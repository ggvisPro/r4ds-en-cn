# Workflow: scripts and projects {#sec-workflow-scripts-projects}

```{r}
#| echo: false
source("_common.R")
```

This chapter will introduce you to two essential tools for organizing your code: scripts and projects.    
æœ¬ç« å°†å‘ä½ ä»‹ç»ä¸¤ä¸ªç»„ç»‡ä»£ç çš„åŸºæœ¬å·¥å…·ï¼šè„šæœ¬å’Œé¡¹ç›®ã€‚

## Scripts

So far, you have used the console to run code.
That's a great place to start, but you'll find it gets cramped pretty quickly as you create more complex ggplot2 graphics and longer dplyr pipelines.
To give yourself more room to work, use the script editor.
Open it up by clicking the File menu, selecting New File, then R script, or using the keyboard shortcut Cmd/Ctrl + Shift + N.
Now you'll see four panes, as in @fig-rstudio-script.
The script editor is a great place to experiment with your code.
When you want to change something, you don't have to re-type the whole thing, you can just edit the script and re-run it.
And once you have written code that works and does what you want, you can save it as a script file to easily return to later.    
åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ ä¸€ç›´åœ¨ä½¿ç”¨æ§åˆ¶å° (console) è¿è¡Œä»£ç ã€‚
è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ï¼Œä½†å½“ä½ åˆ›å»ºæ›´å¤æ‚çš„ ggplot2 å›¾å½¢å’Œæ›´é•¿çš„ dplyr ç®¡é“æ—¶ï¼Œä½ ä¼šå‘ç°å®ƒå¾ˆå¿«å°±ä¼šå˜å¾—æ‹¥æŒ¤ä¸å ªã€‚
ä¸ºäº†ç»™è‡ªå·±æ›´å¤šçš„å·¥ä½œç©ºé—´ï¼Œè¯·ä½¿ç”¨è„šæœ¬ç¼–è¾‘å™¨ã€‚
é€šè¿‡ç‚¹å‡»æ–‡ä»¶èœå•ï¼Œé€‰æ‹©æ–°å»ºæ–‡ä»¶ï¼Œç„¶åé€‰æ‹© R è„šæœ¬æ¥æ‰“å¼€å®ƒï¼Œæˆ–è€…ä½¿ç”¨é”®ç›˜å¿«æ·é”® Cmd/Ctrl + Shift + Nã€‚
ç°åœ¨ä½ ä¼šçœ‹åˆ°å››ä¸ªçª—æ ¼ï¼Œå¦‚ @fig-rstudio-script æ‰€ç¤ºã€‚
è„šæœ¬ç¼–è¾‘å™¨æ˜¯è¯•éªŒä»£ç çš„ç»ä½³åœºæ‰€ã€‚
å½“ä½ æƒ³æ”¹å˜æŸäº›ä¸œè¥¿æ—¶ï¼Œä½ ä¸å¿…é‡æ–°è¾“å…¥å…¨éƒ¨å†…å®¹ï¼Œåªéœ€ç¼–è¾‘è„šæœ¬å¹¶é‡æ–°è¿è¡Œå³å¯ã€‚
è€Œä¸”ï¼Œä¸€æ—¦ä½ ç¼–å†™äº†èƒ½æ­£å¸¸å·¥ä½œå¹¶å®ç°ä½ æƒ³è¦çš„åŠŸèƒ½çš„ä»£ç ï¼Œä½ å¯ä»¥å°†å…¶ä¿å­˜ä¸ºè„šæœ¬æ–‡ä»¶ï¼Œä»¥ä¾¿æ—¥åè½»æ¾è¿”å›ã€‚

```{r}
#| label: fig-rstudio-script
#| echo: false
#| out-width: ~
#| fig-cap: |
#|   Opening the script editor adds a new pane at the top-left of the
#|   IDE.
#| fig-alt: |
#|   RStudio IDE with Editor, Console, and Output highlighted.
knitr::include_graphics("diagrams/rstudio/script.png", dpi = 270)
```

### Running code

The script editor is an excellent place for building complex ggplot2 plots or long sequences of dplyr manipulations.
The key to using the script editor effectively is to memorize one of the most important keyboard shortcuts: Cmd/Ctrl + Enter.
This executes the current R expression in the console.
For example, take the code below.    
è„šæœ¬ç¼–è¾‘å™¨æ˜¯æ„å»ºå¤æ‚ ggplot2 å›¾æˆ–é•¿åºåˆ— dplyr æ“ä½œçš„ç»ä½³åœºæ‰€ã€‚
æœ‰æ•ˆä½¿ç”¨è„šæœ¬ç¼–è¾‘å™¨çš„å…³é”®æ˜¯è®°ä½ä¸€ä¸ªæœ€é‡è¦çš„é”®ç›˜å¿«æ·é”®ï¼šCmd/Ctrl + Enterã€‚
è¿™ä¼šåœ¨æ§åˆ¶å°ä¸­æ‰§è¡Œå½“å‰çš„ R è¡¨è¾¾å¼ã€‚
ä¾‹å¦‚ï¼Œçœ‹ä¸‹é¢çš„ä»£ç ã€‚

```{r}
#| eval: false
library(dplyr)
library(nycflights13)

not_cancelled <- flights |> 
  filter(!is.na(dep_delay)â–ˆ, !is.na(arr_delay))

not_cancelled |> 
  group_by(year, month, day) |> 
  summarize(mean = mean(dep_delay))
```

If your cursor is at â–ˆ, pressing Cmd/Ctrl + Enter will run the complete command that generates `not_cancelled`.
It will also move the cursor to the following statement (beginning with `not_cancelled |>`).
That makes it easy to step through your complete script by repeatedly pressing Cmd/Ctrl + Enter.    
å¦‚æœä½ çš„å…‰æ ‡åœ¨ â–ˆ å¤„ï¼ŒæŒ‰ä¸‹ Cmd/Ctrl + Enter å°†è¿è¡Œç”Ÿæˆ `not_cancelled` çš„å®Œæ•´å‘½ä»¤ã€‚
å®ƒè¿˜ä¼šå°†å…‰æ ‡ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªè¯­å¥ï¼ˆä»¥ `not_cancelled |>` å¼€å¤´ï¼‰ã€‚
è¿™æ ·ï¼Œé€šè¿‡é‡å¤æŒ‰ Cmd/Ctrl + Enterï¼Œä½ å°±å¯ä»¥è½»æ¾åœ°é€æ­¥æ‰§è¡Œæ•´ä¸ªè„šæœ¬ã€‚

Instead of running your code expression-by-expression, you can also execute the complete script in one step with Cmd/Ctrl + Shift + S.
Doing this regularly is a great way to ensure that you've captured all the important parts of your code in the script.    
é™¤äº†é€ä¸ªè¡¨è¾¾å¼è¿è¡Œä»£ç ï¼Œä½ è¿˜å¯ä»¥é€šè¿‡ Cmd/Ctrl + Shift + S ä¸€æ­¥æ‰§è¡Œæ•´ä¸ªè„šæœ¬ã€‚
å®šæœŸè¿™æ ·åšæ˜¯ç¡®ä¿ä½ å·²å°†æ‰€æœ‰é‡è¦ä»£ç éƒ¨åˆ†ä¿å­˜åœ¨è„šæœ¬ä¸­çš„å¥½æ–¹æ³•ã€‚

We recommend you always start your script with the packages you need.
That way, if you share your code with others, they can easily see which packages they need to install.
Note, however, that you should never include `install.packages()` in a script you share.
It's inconsiderate to hand off a script that will change something on their computer if they're not being careful!    
æˆ‘ä»¬å»ºè®®ä½ å§‹ç»ˆåœ¨è„šæœ¬çš„å¼€å¤´å£°æ˜æ‰€éœ€çš„åŒ…ã€‚
è¿™æ ·ï¼Œå¦‚æœä½ ä¸ä»–äººå…±äº«ä»£ç ï¼Œä»–ä»¬å¯ä»¥è½»æ¾çœ‹åˆ°éœ€è¦å®‰è£…å“ªäº›åŒ…ã€‚
ä½†æ˜¯è¯·æ³¨æ„ï¼Œä½ æ°¸è¿œä¸åº”è¯¥åœ¨ä½ åˆ†äº«çš„è„šæœ¬ä¸­åŒ…å« `install.packages()`ã€‚
å¦‚æœåˆ«äººä¸å°å¿ƒï¼Œä½ çš„è„šæœ¬å¯èƒ½ä¼šåœ¨ä»–ä»¬çš„è®¡ç®—æœºä¸Šåšå‡ºæ›´æ”¹ï¼Œé€’äº¤è¿™æ ·çš„è„šæœ¬æ˜¯ä¸ä½“è´´çš„è¡Œä¸ºï¼

When working through future chapters, we highly recommend starting in the script editor and practicing your keyboard shortcuts.
Over time, sending code to the console in this way will become so natural that you won't even think about it.    
åœ¨å­¦ä¹ åç»­ç« èŠ‚æ—¶ï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½ ä»è„šæœ¬ç¼–è¾‘å™¨å¼€å§‹ï¼Œå¹¶ç»ƒä¹ ä½ çš„é”®ç›˜å¿«æ·é”®ã€‚
éšç€æ—¶é—´çš„æ¨ç§»ï¼Œä»¥è¿™ç§æ–¹å¼å‘æ§åˆ¶å°å‘é€ä»£ç å°†å˜å¾—å¦‚æ­¤è‡ªç„¶ï¼Œä»¥è‡³äºä½ ç”šè‡³ä¸ä¼šå»æƒ³å®ƒã€‚

### RStudio diagnostics

In the script editor, RStudio will highlight syntax errors with a red squiggly line and a cross in the sidebar:    
åœ¨è„šæœ¬ç¼–è¾‘å™¨ä¸­ï¼ŒRStudio ä¼šç”¨çº¢è‰²æ³¢æµªçº¿å’Œä¾§è¾¹æ ä¸­çš„å‰å·æ¥é«˜äº®æ˜¾ç¤ºè¯­æ³•é”™è¯¯ï¼š

```{r}
#| echo: false
#| out-width: ~
#| fig-alt: |
#|   Script editor with the script x y <- 10. A red X indicates that there is 
#|   syntax error. The syntax error is also highlighted with a red squiggly line.
knitr::include_graphics("screenshots/rstudio-diagnostic.png")
```

Hover over the cross to see what the problem is:    
å°†é¼ æ ‡æ‚¬åœåœ¨å‰å·ä¸ŠæŸ¥çœ‹é—®é¢˜æ‰€åœ¨ï¼š

```{r}
#| echo: false
#| out-width: ~
#| fig-alt: |
#|   Script editor with the script x y <- 10. A red X indicates that there is 
#|   syntax error. The syntax error is also highlighted with a red squiggly line.
#|   Hovering over the X shows a text box with the text unexpected token y and 
#|   unexpected token <-.
knitr::include_graphics("screenshots/rstudio-diagnostic-tip.png")
```

RStudio will also let you know about potential problems:    
RStudio ä¹Ÿä¼šè®©ä½ çŸ¥é“æ½œåœ¨çš„é—®é¢˜ï¼š

```{r}
#| echo: false
#| out-width: ~
#| fig-alt: |
#|   Script editor with the script 3 == NA. A yellow exclamation mark 
#|   indicates that there may be a potential problem. Hovering over the 
#|   exclamation mark shows a text box with the text use is.na to check 
#|   whether expression evaluates to NA.
knitr::include_graphics("screenshots/rstudio-diagnostic-warn.png")
```

### Saving and naming

RStudio automatically saves the contents of the script editor when you quit, and automatically reloads it when you re-open.
Nevertheless, it's a good idea to avoid Untitled1, Untitled2, Untitled3, and so on and instead save your scripts and to give them informative names.    
å½“ä½ é€€å‡º RStudio æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨ä¿å­˜è„šæœ¬ç¼–è¾‘å™¨çš„å†…å®¹ï¼Œå¹¶åœ¨ä½ é‡æ–°æ‰“å¼€æ—¶è‡ªåŠ¨é‡æ–°åŠ è½½ã€‚
å°½ç®¡å¦‚æ­¤ï¼Œæœ€å¥½è¿˜æ˜¯é¿å…ä½¿ç”¨ Untitled1ã€Untitled2ã€Untitled3 ç­‰åç§°ï¼Œè€Œæ˜¯ä¿å­˜ä½ çš„è„šæœ¬å¹¶ç»™å®ƒä»¬èµ·ä¸€äº›ä¿¡æ¯ä¸°å¯Œçš„åå­—ã€‚

It might be tempting to name your files `code.R` or `myscript.R`, but you should think a bit harder before choosing a name for your file.
Three important principles for file naming are as follows:    
ä½ å¯èƒ½ä¼šæƒ³æŠŠä½ çš„æ–‡ä»¶å‘½åä¸º `code.R` æˆ– `myscript.R`ï¼Œä½†åœ¨é€‰æ‹©æ–‡ä»¶åä¹‹å‰ï¼Œä½ åº”è¯¥å†å¤šæƒ³ä¸€æƒ³ã€‚
æ–‡ä»¶å‘½åçš„ä¸‰ä¸ªé‡è¦åŸåˆ™å¦‚ä¸‹ï¼š

1.  File names should be **machine** readable: avoid spaces, symbols, and special characters. Don't rely on case sensitivity to distinguish files.  
  æ–‡ä»¶ååº”ä¾¿äº**æœºå™¨**è¯»å–ï¼šé¿å…ä½¿ç”¨ç©ºæ ¼ã€ç¬¦å·å’Œç‰¹æ®Šå­—ç¬¦ã€‚ä¸è¦ä¾èµ–å¤§å°å†™åŒºåˆ†æ–‡ä»¶ã€‚

2.  File names should be **human** readable: use file names to describe what's in the file.  
  æ–‡ä»¶ååº”ä¾¿äº**äººç±»**é˜…è¯»ï¼šç”¨æ–‡ä»¶åæè¿°æ–‡ä»¶å†…å®¹ã€‚

3.  File names should play well with default ordering: start file names with numbers so that alphabetical sorting puts them in the order they get used.  
  æ–‡ä»¶ååº”ä¾¿äºé»˜è®¤æ’åºï¼šç”¨æ•°å­—å¼€å¤´ï¼Œè¿™æ ·æŒ‰å­—æ¯æ’åºæ—¶æ–‡ä»¶ä¼šæŒ‰ä½¿ç”¨é¡ºåºæ’åˆ—ã€‚


For example, suppose you have the following files in a project folder.    
ä¾‹å¦‚ï¼Œå‡è®¾ä½ çš„é¡¹ç›®æ–‡ä»¶å¤¹ä¸­æœ‰ä»¥ä¸‹æ–‡ä»¶ã€‚

```         
alternative model.R
code for exploratory analysis.r
finalreport.qmd
FinalReport.qmd
fig 1.png
Figure_02.png
model_first_try.R
run-first.r
temp.txt
```

There are a variety of problems here: it's hard to find which file to run first, file names contain spaces, there are two files with the same name but different capitalization (`finalreport` vs. `FinalReport`[^1]), and some names don't describe their contents (`run-first` and `temp`).    
è¿™é‡Œå­˜åœ¨å„ç§é—®é¢˜ï¼šå¾ˆéš¾æ‰¾åˆ°é¦–å…ˆè¦è¿è¡Œå“ªä¸ªæ–‡ä»¶ï¼Œæ–‡ä»¶ååŒ…å«ç©ºæ ¼ï¼Œæœ‰ä¸¤ä¸ªåç§°ç›¸åŒä½†å¤§å°å†™ä¸åŒçš„æ–‡ä»¶ï¼ˆ`finalreport` vs. `FinalReport`<sup>1</sup>ï¼‰ï¼Œè€Œä¸”æœ‰äº›åç§°æ²¡æœ‰æè¿°å…¶å†…å®¹ï¼ˆ`run-first` å’Œ `temp`ï¼‰ã€‚
    

Here's a better way of naming and organizing the same set of files:    
è¿™é‡Œæœ‰ä¸€ç§æ›´å¥½çš„å‘½åå’Œç»„ç»‡åŒä¸€ç»„æ–‡ä»¶çš„æ–¹å¼ï¼š

```         
01-load-data.R
02-exploratory-analysis.R
03-model-approach-1.R
04-model-approach-2.R
fig-01.png
fig-02.png
report-2022-03-20.qmd
report-2022-04-02.qmd
report-draft-notes.txt
```

Numbering the key scripts makes it obvious in which order to run them and a consistent naming scheme makes it easier to see what varies.
Additionally, the figures are labelled similarly, the reports are distinguished by dates included in the file names, and `temp` is renamed to `report-draft-notes` to better describe its contents.
If you have a lot of files in a directory, taking organization one step further and placing different types of files (scripts, figures, etc.) in different directories is recommended.    
å¯¹å…³é”®è„šæœ¬è¿›è¡Œç¼–å·å¯ä»¥æ¸…æ¥šåœ°è¡¨æ˜è¿è¡Œå®ƒä»¬çš„é¡ºåºï¼Œè€Œä¸€è‡´çš„å‘½åæ–¹æ¡ˆä¹Ÿæ›´å®¹æ˜“çœ‹å‡ºä¸åŒä¹‹å¤„ã€‚
æ­¤å¤–ï¼Œå›¾å½¢çš„æ ‡ç­¾ä¹Ÿç±»ä¼¼ï¼ŒæŠ¥å‘Šé€šè¿‡æ–‡ä»¶åä¸­åŒ…å«çš„æ—¥æœŸæ¥åŒºåˆ†ï¼Œ`temp` è¢«é‡å‘½åä¸º `report-draft-notes` ä»¥æ›´å¥½åœ°æè¿°å…¶å†…å®¹ã€‚
å¦‚æœä¸€ä¸ªç›®å½•ä¸­æœ‰å¾ˆå¤šæ–‡ä»¶ï¼Œå»ºè®®å°†ç»„ç»‡å·¥ä½œæ›´è¿›ä¸€æ­¥ï¼Œå°†ä¸åŒç±»å‹çš„æ–‡ä»¶ï¼ˆè„šæœ¬ã€å›¾å½¢ç­‰ï¼‰æ”¾åœ¨ä¸åŒçš„ç›®å½•ä¸­ã€‚

## Projects

One day, you will need to quit R, go do something else, and return to your analysis later.
One day, you will be working on multiple analyses simultaneously and you want to keep them separate.
One day, you will need to bring data from the outside world into R and send numerical results and figures from R back out into the world.    
æ€»æœ‰ä¸€å¤©ï¼Œä½ éœ€è¦é€€å‡º Rï¼Œå»åšåˆ«çš„äº‹æƒ…ï¼Œç„¶åå†å›åˆ°ä½ çš„åˆ†æä¸­ã€‚
æ€»æœ‰ä¸€å¤©ï¼Œä½ ä¼šåŒæ—¶è¿›è¡Œå¤šä¸ªåˆ†æï¼Œå¹¶ä¸”ä½ å¸Œæœ›å°†å®ƒä»¬åˆ†å¼€ã€‚
æ€»æœ‰ä¸€å¤©ï¼Œä½ éœ€è¦å°†å¤–éƒ¨ä¸–ç•Œçš„æ•°æ®å¯¼å…¥ Rï¼Œå¹¶å°†æ•°å€¼ç»“æœå’Œå›¾è¡¨ä» R å¯¼å‡ºåˆ°å¤–éƒ¨ä¸–ç•Œã€‚

To handle these real life situations, you need to make two decisions:    
ä¸ºäº†å¤„ç†è¿™äº›ç°å®ç”Ÿæ´»ä¸­çš„æƒ…å†µï¼Œä½ éœ€è¦åšå‡ºä¸¤ä¸ªå†³å®šï¼š

1.  What is the source of truth? What will you save as your lasting record of what happened?    
  äº‹å®æ¥æºæ˜¯ä»€ä¹ˆï¼Ÿ
  ä½ ä¼šä¿å­˜ä»€ä¹ˆä½œä¸ºä½ æ‰€åšäº‹æƒ…çš„æ°¸ä¹…è®°å½•ï¼Ÿ

2.  Where does your analysis live?  
  ä½ çš„åˆ†æå­˜æ”¾åœ¨å“ªé‡Œï¼Ÿ


### What is the source of truth?

As a beginner, it's okay to rely on your current Environment to contain all the objects you have created throughout your analysis.
However, to make it easier to work on larger projects or collaborate with others, your source of truth should be the R scripts.
With your R scripts (and your data files), you can recreate the environment.
With only your environment, it's much harder to recreate your R scripts: you'll either have to retype a lot of code from memory (inevitably making mistakes along the way) or you'll have to carefully mine your R history.    
ä½œä¸ºåˆå­¦è€…ï¼Œä¾èµ–ä½ å½“å‰çš„ç¯å¢ƒ (Environment) æ¥åŒ…å«ä½ åœ¨æ•´ä¸ªåˆ†æè¿‡ç¨‹ä¸­åˆ›å»ºçš„æ‰€æœ‰å¯¹è±¡æ˜¯å¯ä»¥çš„ã€‚
ç„¶è€Œï¼Œä¸ºäº†æ›´å®¹æ˜“åœ°å¤„ç†å¤§å‹é¡¹ç›®æˆ–ä¸ä»–äººåä½œï¼Œä½ çš„äº‹å®æ¥æºåº”è¯¥æ˜¯ R è„šæœ¬ã€‚
æœ‰äº†ä½ çš„ R è„šæœ¬ï¼ˆå’Œä½ çš„æ•°æ®æ–‡ä»¶ï¼‰ï¼Œä½ å°±å¯ä»¥é‡ç°ç¯å¢ƒã€‚
å¦‚æœåªæœ‰ä½ çš„ç¯å¢ƒï¼Œè¦é‡ç°ä½ çš„ R è„šæœ¬å°±å›°éš¾å¾—å¤šï¼šä½ è¦ä¹ˆå¿…é¡»å‡­è®°å¿†é‡æ–°è¾“å…¥å¤§é‡ä»£ç ï¼ˆè¿™ä¸å¯é¿å…åœ°ä¼šå‡ºé”™ï¼‰ï¼Œè¦ä¹ˆå°±å¾—ä»”ç»†æŒ–æ˜ä½ çš„ R å†å²è®°å½•ã€‚

To help keep your R scripts as the source of truth for your analysis, we highly recommend that you instruct RStudio not to preserve your workspace between sessions.
You can do this either by running `usethis::use_blank_slate()`[^2] or by mimicking the options shown in @fig-blank-slate. This will cause you some short-term pain, because now when you restart RStudio, it will no longer remember the code that you ran last time nor will the objects you created or the datasets you read be available to use.
But this short-term pain saves you long-term agony because it forces you to capture all important procedures in your code.
There's nothing worse than discovering three months after the fact that you've only stored the results of an important calculation in your environment, not the calculation itself in your code.    
ä¸ºäº†å¸®åŠ©ä¿æŒä½ çš„ R è„šæœ¬ä½œä¸ºä½ åˆ†æçš„äº‹å®æ¥æºï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½ æŒ‡ç¤º RStudio åœ¨ä¼šè¯ä¹‹é—´ä¸è¦ä¿å­˜ä½ çš„å·¥ä½œåŒºã€‚
ä½ å¯ä»¥é€šè¿‡è¿è¡Œ `usethis::use_blank_slate()`<sup>1</sup> æˆ–æ¨¡ä»¿ @fig-blank-slate ä¸­æ˜¾ç¤ºçš„é€‰é¡¹æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚è¿™ä¼šç»™ä½ å¸¦æ¥ä¸€äº›çŸ­æœŸçš„ç—›è‹¦ï¼Œå› ä¸ºç°åœ¨å½“ä½ é‡æ–°å¯åŠ¨ RStudio æ—¶ï¼Œå®ƒå°†ä¸å†è®°å¾—ä½ ä¸Šæ¬¡è¿è¡Œçš„ä»£ç ï¼Œä½ åˆ›å»ºçš„å¯¹è±¡æˆ–è¯»å–çš„æ•°æ®é›†ä¹Ÿæ— æ³•ä½¿ç”¨ã€‚
ä½†è¿™ç§çŸ­æœŸçš„ç—›è‹¦å¯ä»¥ä¸ºä½ çœå»é•¿æœŸçš„æŠ˜ç£¨ï¼Œå› ä¸ºå®ƒè¿«ä½¿ä½ å°†æ‰€æœ‰é‡è¦çš„è¿‡ç¨‹éƒ½è®°å½•åœ¨ä½ çš„ä»£ç ä¸­ã€‚
æ²¡æœ‰ä»€ä¹ˆæ¯”åœ¨ä¸‰ä¸ªæœˆåå‘ç°ä½ åªåœ¨ç¯å¢ƒä¸­å­˜å‚¨äº†é‡è¦è®¡ç®—çš„ç»“æœï¼Œè€Œæ²¡æœ‰åœ¨ä»£ç ä¸­å­˜å‚¨è®¡ç®—æœ¬èº«æ›´ç³Ÿç³•çš„äº†ã€‚
    

```{r}
#| label: fig-blank-slate
#| echo: false
#| fig-cap: |
#|   Copy these options in your RStudio options to always start your 
#|   RStudio session with a clean slate.
#| fig-alt: |
#|   RStudio Global Options window where the option Restore .RData into workspace 
#|   at startup is not checked. Also, the option Save workspace to .RData 
#|   on exit is set to Never.
#| out-width: ~
knitr::include_graphics("diagrams/rstudio/clean-slate.png", dpi = 270)
```

There is a great pair of keyboard shortcuts that will work together to make sure you've captured the important parts of your code in the editor:    
æœ‰ä¸€å¯¹å¾ˆæ£’çš„é”®ç›˜å¿«æ·é”®å¯ä»¥ååŒå·¥ä½œï¼Œç¡®ä¿ä½ å·²ç»å°†ä»£ç çš„é‡è¦éƒ¨åˆ†ä¿å­˜åœ¨ç¼–è¾‘å™¨ä¸­ï¼š

1.  Press Cmd/Ctrl + Shift + 0/F10 to restart R.  
  æŒ‰ä¸‹ Cmd/Ctrl + Shift + 0/F10 é‡å¯ Rã€‚

2.  Press Cmd/Ctrl + Shift + S to re-run the current script.  
  æŒ‰ä¸‹ Cmd/Ctrl + Shift + S é‡æ–°è¿è¡Œå½“å‰è„šæœ¬ã€‚


We collectively use this pattern hundreds of times a week.    
æˆ‘ä»¬æ¯å‘¨ä¼šé›†ä½“ä½¿ç”¨è¿™ä¸ªæ¨¡å¼æ•°ç™¾æ¬¡ã€‚

Alternatively, if you don't use keyboard shortcuts, you can go to Session \> Restart R and then highlight and re-run your current script.    
æˆ–è€…ï¼Œå¦‚æœä½ ä¸ä½¿ç”¨é”®ç›˜å¿«æ·é”®ï¼Œä½ å¯ä»¥è½¬åˆ° Session \> Restart Rï¼Œç„¶åé«˜äº®å¹¶é‡æ–°è¿è¡Œä½ å½“å‰çš„è„šæœ¬ã€‚

::: callout-note

## RStudio server

If you're using RStudio server, your R session is never restarted by default.
When you close your RStudio server tab, it might feel like you're closing R, but the server actually keeps it running in the background.
The next time you return, you'll be in exactly the same place you left.
This makes it even more important to regularly restart R so that you're starting with a clean slate.   
å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ RStudio æœåŠ¡å™¨ï¼Œä½ çš„ R ä¼šè¯é»˜è®¤æƒ…å†µä¸‹æ°¸è¿œä¸ä¼šé‡å¯ã€‚
å½“ä½ å…³é—­ RStudio æœåŠ¡å™¨çš„æ ‡ç­¾é¡µæ—¶ï¼Œå¯èƒ½æ„Ÿè§‰åƒæ˜¯å…³é—­äº† Rï¼Œä½†æœåŠ¡å™¨å®é™…ä¸Šåœ¨åå°ä¿æŒå®ƒè¿è¡Œã€‚
ä¸‹æ¬¡ä½ å›æ¥æ—¶ï¼Œä½ å°†æ­£å¥½åœ¨ä½ ç¦»å¼€çš„åœ°æ–¹ã€‚
è¿™ä½¿å¾—å®šæœŸé‡å¯ R ä»¥ä¾¿ä»ä¸€ä¸ªå¹²å‡€çš„çŠ¶æ€å¼€å§‹å˜å¾—æ›´åŠ é‡è¦ã€‚
:::    


### Where does your analysis live?

R has a powerful notion of the **working directory**.
This is where R looks for files that you ask it to load, and where it will put any files that you ask it to save.
RStudio shows your current working directory at the top of the console:    
R æœ‰ä¸€ä¸ªå¼ºå¤§çš„æ¦‚å¿µï¼Œå«åš**å·¥ä½œç›®å½• (working directory)**ã€‚
è¿™æ˜¯ R å¯»æ‰¾ä½ è¦æ±‚å®ƒåŠ è½½çš„æ–‡ä»¶çš„ä½ç½®ï¼Œä¹Ÿæ˜¯å®ƒå­˜æ”¾ä½ è¦æ±‚å®ƒä¿å­˜çš„ä»»ä½•æ–‡ä»¶çš„ä½ç½®ã€‚
RStudio åœ¨æ§åˆ¶å°çš„é¡¶éƒ¨æ˜¾ç¤ºä½ å½“å‰çš„å·¥ä½œç›®å½•ï¼š

```{r}
#| echo: false
#| fig-alt: |
#|   The Console tab shows the current working directory as 
#|   ~/Documents/r4ds.
#| out-width: ~
knitr::include_graphics("screenshots/rstudio-wd.png")
```

And you can print this out in R code by running `getwd()`:    
ä½ ä¹Ÿå¯ä»¥åœ¨ R ä»£ç ä¸­é€šè¿‡è¿è¡Œ `getwd()` æ¥æ‰“å°å‡ºè¿™ä¸ªè·¯å¾„ï¼š

```{r}
#| eval: false
getwd()
#> [1] "/Users/hadley/Documents/r4ds"
```

In this R session, the current working directory (think of it as "home") is in hadley's Documents folder, in a subfolder called r4ds.
This code will return a different result when you run it, because your computer has a different directory structure than Hadley's!    
åœ¨è¿™ä¸ª R ä¼šè¯ä¸­ï¼Œå½“å‰çš„å·¥ä½œç›®å½•ï¼ˆå¯ä»¥æŠŠå®ƒæƒ³è±¡æˆâ€œå®¶â€ï¼‰åœ¨ hadley çš„ Documents æ–‡ä»¶å¤¹ä¸‹çš„ä¸€ä¸ªåä¸º r4ds çš„å­æ–‡ä»¶å¤¹ä¸­ã€‚
å½“ä½ è¿è¡Œè¿™æ®µä»£ç æ—¶ï¼Œä¼šè¿”å›ä¸€ä¸ªä¸åŒçš„ç»“æœï¼Œå› ä¸ºä½ çš„è®¡ç®—æœºç›®å½•ç»“æ„ä¸ Hadley çš„ä¸åŒï¼

As a beginning R user, it's OK to let your working directory be your home directory, documents directory, or any other weird directory on your computer.
But you're more than a handful of chapters into this book, and you're no longer a beginner.
Very soon now you should evolve to organizing your projects into directories and, when working on a project, set R's working directory to the associated directory.    
ä½œä¸º R çš„åˆå­¦è€…ï¼Œè®©ä½ çš„å·¥ä½œç›®å½•æ˜¯ä½ çš„ä¸»ç›®å½•ã€æ–‡æ¡£ç›®å½•æˆ–ä½ ç”µè„‘ä¸Šçš„ä»»ä½•å…¶ä»–å¥‡æ€ªç›®å½•éƒ½æ˜¯å¯ä»¥çš„ã€‚
ä½†ä½ å·²ç»è¯»äº†è¿™æœ¬ä¹¦å¥½å‡ ç« äº†ï¼Œä½ ä¸å†æ˜¯åˆå­¦è€…äº†ã€‚
å¾ˆå¿«ä½ å°±åº”è¯¥è¿›åŒ–åˆ°å°†ä½ çš„é¡¹ç›®ç»„ç»‡åˆ°ç›®å½•ä¸­ï¼Œå¹¶ä¸”åœ¨å¤„ç†ä¸€ä¸ªé¡¹ç›®æ—¶ï¼Œå°† R çš„å·¥ä½œç›®å½•è®¾ç½®ä¸ºç›¸å…³çš„ç›®å½•ã€‚

You can set the working directory from within R but **we** **do not recommend it**:    
ä½ å¯ä»¥åœ¨ R å†…éƒ¨è®¾ç½®å·¥ä½œç›®å½•ï¼Œä½†**æˆ‘ä»¬ä¸æ¨è**è¿™æ ·åšï¼š

```{r}
#| eval: false
setwd("/path/to/my/CoolProject")
```

There's a better way; a way that also puts you on the path to managing your R work like an expert.
That way is the **RStudio** **project**.    
æœ‰æ›´å¥½çš„æ–¹æ³•ï¼›ä¸€ç§èƒ½è®©ä½ åƒä¸“å®¶ä¸€æ ·ç®¡ç†ä½ çš„ R å·¥ä½œçš„é€”å¾„ã€‚
é‚£å°±æ˜¯ **RStudio é¡¹ç›® (project)**ã€‚

### RStudio projects

Keeping all the files associated with a given project (input data, R scripts, analytical results, and figures) together in one directory is such a wise and common practice that RStudio has built-in support for this via **projects**.
Let's make a project for you to use while you're working through the rest of this book.
Click File \> New Project, then follow the steps shown in @fig-new-project.    
å°†ä¸ç‰¹å®šé¡¹ç›®ç›¸å…³çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆè¾“å…¥æ•°æ®ã€R è„šæœ¬ã€åˆ†æç»“æœå’Œå›¾è¡¨ï¼‰éƒ½æ”¾åœ¨ä¸€ä¸ªç›®å½•ä¸­æ˜¯ä¸€ç§éå¸¸æ˜æ™ºå’Œæ™®éçš„åšæ³•ï¼ŒRStudio é€šè¿‡**é¡¹ç›®**ä¸ºè¿™ç§åšæ³•æä¾›äº†å†…ç½®æ”¯æŒã€‚
è®©æˆ‘ä»¬ä¸ºä½ åˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œä»¥ä¾¿ä½ åœ¨å­¦ä¹ æœ¬ä¹¦å…¶ä½™éƒ¨åˆ†æ—¶ä½¿ç”¨ã€‚
ç‚¹å‡» File \> New Projectï¼Œç„¶åæŒ‰ç…§ @fig-new-project ä¸­æ˜¾ç¤ºçš„æ­¥éª¤æ“ä½œã€‚

```{r}
#| label: fig-new-project
#| echo: false
#| fig-cap: | 
#|   To create new project: (top) first click New Directory, then (middle)
#|   click New Project, then (bottom) fill in the directory (project) name,
#|   choose a good subdirectory for its home and click Create Project.
#| fig-alt: |
#|   Three screenshots of the New Project menu. In the first screenshot, 
#|   the Create Project window is shown and New Directory is selected. 
#|   In the second screenshot, the Project Type window is shown and 
#|   Empty Project is selected. In the third screenshot, the Create New
#|   Project  window is shown and the directory name is given as r4ds and
#|   the project is being created as subdirectory of the Desktop.
#| out-width: ~
knitr::include_graphics("diagrams/new-project.png")
```

Call your project `r4ds` and think carefully about which subdirectory you put the project in.
If you don't store it somewhere sensible, it will be hard to find it in the future!    
å°†ä½ çš„é¡¹ç›®å‘½åä¸º `r4ds`ï¼Œå¹¶ä»”ç»†è€ƒè™‘å°†é¡¹ç›®æ”¾åœ¨å“ªä¸ªå­ç›®å½•ä¸­ã€‚
å¦‚æœä½ ä¸æŠŠå®ƒå­˜æ”¾åœ¨ä¸€ä¸ªåˆç†çš„åœ°æ–¹ï¼Œå°†æ¥ä¼šå¾ˆéš¾æ‰¾åˆ°å®ƒï¼

Once this process is complete, you'll get a new RStudio project just for this book.
Check that the "home" of your project is the current working directory:    
ä¸€æ—¦è¿™ä¸ªè¿‡ç¨‹å®Œæˆï¼Œä½ å°†ä¸ºè¿™æœ¬ä¹¦å¾—åˆ°ä¸€ä¸ªæ–°çš„ RStudio é¡¹ç›®ã€‚
æ£€æŸ¥ä¸€ä¸‹ä½ é¡¹ç›®çš„â€œå®¶â€æ˜¯å¦æ˜¯å½“å‰çš„å·¥ä½œç›®å½•ï¼š

```{r}
#| eval: false
getwd()
#> [1] /Users/hadley/Documents/r4ds
```

Now enter the following commands in the script editor, and save the file, calling it "diamonds.R".
Then, create a new folder called "data".
You can do this by clicking on the "New Folder" button in the Files pane in RStudio.
Finally, run the complete script which will save a PNG and CSV file into your project directory.
Don't worry about the details, you'll learn them later in the book.    
ç°åœ¨åœ¨è„šæœ¬ç¼–è¾‘å™¨ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œå¹¶ä¿å­˜æ–‡ä»¶ï¼Œå‘½åä¸ºâ€œdiamonds.Râ€ã€‚
ç„¶åï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºâ€œdataâ€çš„æ–°æ–‡ä»¶å¤¹ã€‚
ä½ å¯ä»¥é€šè¿‡ç‚¹å‡» RStudio æ–‡ä»¶çª—æ ¼ä¸­çš„â€œNew Folderâ€æŒ‰é’®æ¥å®Œæˆæ­¤æ“ä½œã€‚
æœ€åï¼Œè¿è¡Œæ•´ä¸ªè„šæœ¬ï¼Œè¿™ä¼šå°†ä¸€ä¸ª PNG å’Œä¸€ä¸ª CSV æ–‡ä»¶ä¿å­˜åˆ°ä½ çš„é¡¹ç›®ç›®å½•ä¸­ã€‚
åˆ«æ‹…å¿ƒç»†èŠ‚ï¼Œä½ å°†åœ¨ä¹¦çš„åé¢å­¦ä¹ å®ƒä»¬ã€‚

```{r}
#| label: toy-line
#| eval: false
library(tidyverse)

ggplot(diamonds, aes(x = carat, y = price)) + 
  geom_hex()
ggsave("diamonds.png")

write_csv(diamonds, "data/diamonds.csv")
```

Quit RStudio.
Inspect the folder associated with your project --- notice the `.Rproj` file.
Double-click that file to re-open the project.
Notice you get back to where you left off: it's the same working directory and command history, and all the files you were working on are still open.
Because you followed our instructions above, you will, however, have a completely fresh environment, guaranteeing that you're starting with a clean slate.    
é€€å‡º RStudioã€‚
æ£€æŸ¥ä¸ä½ çš„é¡¹ç›®å…³è”çš„æ–‡ä»¶å¤¹â€”â€”æ³¨æ„é‚£ä¸ª `.Rproj` æ–‡ä»¶ã€‚
åŒå‡»è¯¥æ–‡ä»¶ä»¥é‡æ–°æ‰“å¼€é¡¹ç›®ã€‚
ä½ ä¼šå‘ç°ä½ å›åˆ°äº†ç¦»å¼€æ—¶çš„åœ°æ–¹ï¼šå·¥ä½œç›®å½•å’Œå‘½ä»¤å†å²è®°å½•éƒ½ç›¸åŒï¼Œä½ æ­£åœ¨å¤„ç†çš„æ‰€æœ‰æ–‡ä»¶ä»ç„¶æ˜¯æ‰“å¼€çš„ã€‚
ç„¶è€Œï¼Œå› ä¸ºä½ éµå¾ªäº†æˆ‘ä»¬ä¸Šé¢çš„æŒ‡ç¤ºï¼Œä½ å°†æ‹¥æœ‰ä¸€ä¸ªå…¨æ–°çš„ç¯å¢ƒï¼Œä¿è¯ä½ æ˜¯ä»ä¸€ä¸ªå¹²å‡€çš„çŠ¶æ€å¼€å§‹ã€‚

In your favorite OS-specific way, search your computer for `diamonds.png` and you will find the PNG (no surprise) but *also the script that created it* (`diamonds.R`).
This is a huge win!
One day, you will want to remake a figure or just understand where it came from.
If you rigorously save figures to files **with R code** and never with the mouse or the clipboard, you will be able to reproduce old work with ease!    
ç”¨ä½ å–œæ¬¢çš„ç‰¹å®šäºæ“ä½œç³»ç»Ÿçš„æ–¹å¼ï¼Œåœ¨ä½ çš„ç”µè„‘ä¸Šæœç´¢ `diamonds.png`ï¼Œä½ ä¼šæ‰¾åˆ°è¿™ä¸ª PNG æ–‡ä»¶ï¼ˆä¸å¥‡æ€ªï¼‰ï¼Œä½†*åŒæ—¶ä¹Ÿä¼šæ‰¾åˆ°åˆ›å»ºå®ƒçš„è„šæœ¬* (`diamonds.R`)ã€‚
è¿™æ˜¯ä¸€ä¸ªå·¨å¤§çš„èƒœåˆ©ï¼
æ€»æœ‰ä¸€å¤©ï¼Œä½ ä¼šæƒ³è¦é‡åšä¸€ä¸ªå›¾è¡¨ï¼Œæˆ–è€…åªæ˜¯æƒ³äº†è§£å®ƒæ˜¯æ€ä¹ˆæ¥çš„ã€‚
å¦‚æœä½ ä¸¥æ ¼åœ°**ç”¨ R ä»£ç **å°†å›¾è¡¨ä¿å­˜åˆ°æ–‡ä»¶ï¼Œè€Œä¸æ˜¯ç”¨é¼ æ ‡æˆ–å‰ªè´´æ¿ï¼Œä½ å°†èƒ½å¤Ÿè½»æ¾åœ°é‡ç°æ—§çš„å·¥ä½œï¼

### Relative and absolute paths

Once you're inside a project, you should only ever use relative paths not absolute paths.
What's the difference?
A relative path is relative to the working directory, i.e. the project's home.
When Hadley wrote `data/diamonds.csv` above it was a shortcut for `/Users/hadley/Documents/r4ds/data/diamonds.csv`.
But importantly, if Mine ran this code on her computer, it would point to `/Users/Mine/Documents/r4ds/data/diamonds.csv`.
This is why relative paths are important: they'll work regardless of where the R project folder ends up.    
ä¸€æ—¦ä½ è¿›å…¥ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œä½ åº”è¯¥åªä½¿ç”¨ç›¸å¯¹è·¯å¾„ (relative paths)ï¼Œè€Œä¸æ˜¯ç»å¯¹è·¯å¾„ (absolute paths)ã€‚
æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ
ç›¸å¯¹è·¯å¾„æ˜¯ç›¸å¯¹äºå·¥ä½œç›®å½•çš„ï¼Œä¹Ÿå°±æ˜¯é¡¹ç›®çš„ä¸»ç›®å½•ã€‚
å½“ Hadley åœ¨ä¸Šé¢å†™ `data/diamonds.csv` æ—¶ï¼Œå®ƒæ˜¯ `/Users/hadley/Documents/r4ds/data/diamonds.csv` çš„ä¸€ä¸ªå¿«æ·æ–¹å¼ã€‚
ä½†é‡è¦çš„æ˜¯ï¼Œå¦‚æœ Mine åœ¨å¥¹çš„ç”µè„‘ä¸Šè¿è¡Œè¿™æ®µä»£ç ï¼Œå®ƒå°†æŒ‡å‘ `/Users/Mine/Documents/r4ds/data/diamonds.csv`ã€‚
è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç›¸å¯¹è·¯å¾„å¾ˆé‡è¦ï¼šæ— è®º R é¡¹ç›®æ–‡ä»¶å¤¹æœ€ç»ˆåœ¨å“ªé‡Œï¼Œå®ƒä»¬éƒ½èƒ½å·¥ä½œã€‚

Absolute paths point to the same place regardless of your working directory.
They look a little different depending on your operating system.
On Windows they start with a drive letter (e.g., `C:`) or two backslashes (e.g., `\\servername`) and on Mac/Linux they start with a slash "/" (e.g., `/users/hadley`).
You should **never** use absolute paths in your scripts, because they hinder sharing: no one else will have exactly the same directory configuration as you.    
æ— è®ºä½ çš„å·¥ä½œç›®å½•æ˜¯ä»€ä¹ˆï¼Œç»å¯¹è·¯å¾„éƒ½æŒ‡å‘åŒä¸€ä¸ªåœ°æ–¹ã€‚
å®ƒä»¬æ ¹æ®ä½ çš„æ“ä½œç³»ç»Ÿçœ‹èµ·æ¥æœ‰äº›ä¸åŒã€‚
åœ¨ Windows ä¸Šï¼Œå®ƒä»¬ä»¥é©±åŠ¨å™¨å·ï¼ˆä¾‹å¦‚ `C:`ï¼‰æˆ–ä¸¤ä¸ªåæ–œæ ï¼ˆä¾‹å¦‚ `\\servername`ï¼‰å¼€å¤´ï¼Œè€Œåœ¨ Mac/Linux ä¸Šï¼Œå®ƒä»¬ä»¥æ–œæ â€œ/â€å¼€å¤´ï¼ˆä¾‹å¦‚ `/users/hadley`ï¼‰ã€‚
ä½ **æ°¸è¿œä¸åº”è¯¥**åœ¨ä½ çš„è„šæœ¬ä¸­ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œå› ä¸ºå®ƒä»¬ä¼šå¦¨ç¢å…±äº«ï¼šæ²¡æœ‰å…¶ä»–äººä¼šæ‹¥æœ‰ä¸ä½ å®Œå…¨ç›¸åŒçš„ç›®å½•é…ç½®ã€‚

There's another important difference between operating systems: how you separate the components of the path.
Mac and Linux uses slashes (e.g., `data/diamonds.csv`) and Windows uses backslashes (e.g., `data\diamonds.csv`).
R can work with either type (no matter what platform you're currently using), but unfortunately, backslashes mean something special to R, and to get a single backslash in the path, you need to type two backslashes!
That makes life frustrating, so we recommend always using the Linux/Mac style with forward slashes.    
æ“ä½œç³»ç»Ÿä¹‹é—´è¿˜æœ‰å¦ä¸€ä¸ªé‡è¦çš„åŒºåˆ«ï¼šä½ å¦‚ä½•åˆ†éš”è·¯å¾„çš„ç»„æˆéƒ¨åˆ†ã€‚
Mac å’Œ Linux ä½¿ç”¨æ­£æ–œæ ï¼ˆä¾‹å¦‚ `data/diamonds.csv`ï¼‰ï¼Œè€Œ Windows ä½¿ç”¨åæ–œæ ï¼ˆä¾‹å¦‚ `data\diamonds.csv`ï¼‰ã€‚
R å¯ä»¥å¤„ç†è¿™ä¸¤ç§ç±»å‹ï¼ˆæ— è®ºä½ å½“å‰ä½¿ç”¨çš„æ˜¯å“ªä¸ªå¹³å°ï¼‰ï¼Œä½†ä¸å¹¸çš„æ˜¯ï¼Œåæ–œæ å¯¹ R æ¥è¯´æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œè¦åœ¨è·¯å¾„ä¸­å¾—åˆ°ä¸€ä¸ªåæ–œæ ï¼Œä½ éœ€è¦è¾“å…¥ä¸¤ä¸ªåæ–œæ ï¼
è¿™è®©ç”Ÿæ´»å˜å¾—ä»¤äººæ²®ä¸§ï¼Œæ‰€ä»¥æˆ‘ä»¬å»ºè®®å§‹ç»ˆä½¿ç”¨ Linux/Mac é£æ ¼çš„æ­£æ–œæ ã€‚

## Exercises

1.  Go to the RStudio Tips Twitter account, [https://twitter.com/rstudiotips](https://twitter.com/rstudiotips) and find one tip that looks interesting.
    Practice using it!

2.  What other common mistakes will RStudio diagnostics report?
    Read [https://support.posit.co/hc/en-us/articles/205753617-Code-Diagnostics](https://support.posit.co/hc/en-us/articles/205753617-Code-Diagnostics) to find out.

## Summary

In this chapter, you've learned how to organize your R code in scripts (files) and projects (directories).
Much like code style, this may feel like busywork at first.
But as you accumulate more code across multiple projects, you'll learn to appreciate how a little up front organisation can save you a bunch of time down the road.    
åœ¨æœ¬ç« ä¸­ï¼Œä½ å­¦ä¹ äº†å¦‚ä½•åœ¨è„šæœ¬ï¼ˆæ–‡ä»¶ï¼‰å’Œé¡¹ç›®ï¼ˆç›®å½•ï¼‰ä¸­ç»„ç»‡ä½ çš„ R ä»£ç ã€‚
å°±åƒä»£ç é£æ ¼ä¸€æ ·ï¼Œè¿™èµ·åˆå¯èƒ½æ„Ÿè§‰åƒæ˜¯çç¢çš„å·¥ä½œã€‚
ä½†éšç€ä½ åœ¨å¤šä¸ªé¡¹ç›®ä¸­ç§¯ç´¯äº†è¶Šæ¥è¶Šå¤šçš„ä»£ç ï¼Œä½ ä¼šé€æ¸ä½“ä¼šåˆ°ï¼Œä¸€ç‚¹ç‚¹å‰æœŸçš„ç»„ç»‡å·¥ä½œèƒ½åœ¨æœªæ¥ä¸ºä½ èŠ‚çœå¤§é‡æ—¶é—´ã€‚

In summary, scripts and projects give you a solid workflow that will serve you well in the future:    
æ€»è€Œè¨€ä¹‹ï¼Œè„šæœ¬å’Œé¡¹ç›®ä¸ºä½ æä¾›äº†ä¸€ä¸ªåšå®çš„å·¥ä½œæµç¨‹ï¼Œè¿™å°†åœ¨æœªæ¥å¯¹ä½ å¤§æœ‰è£¨ç›Šï¼š

-   Create one RStudio project for each data analysis project.  
  ä¸ºæ¯ä¸ªæ•°æ®åˆ†æé¡¹ç›®åˆ›å»ºä¸€ä¸ª RStudio é¡¹ç›®ã€‚

-   Save your scripts (with informative names) in the project, edit them, run them in bits or as a whole. Restart R frequently to make sure you've captured everything in your scripts.  
  åœ¨é¡¹ç›®ä¸­ä¿å­˜ä½ çš„è„šæœ¬ï¼ˆå¹¶ä½¿ç”¨ä¿¡æ¯ä¸°å¯Œçš„åç§°ï¼‰ï¼Œç¼–è¾‘å®ƒä»¬ï¼Œåˆ†æ®µæˆ–æ•´ä½“è¿è¡Œå®ƒä»¬ã€‚é¢‘ç¹é‡å¯ R ä»¥ç¡®ä¿ä½ å·²å°†æ‰€æœ‰å†…å®¹éƒ½è®°å½•åœ¨è„šæœ¬ä¸­ã€‚
  
-   Only ever use relative paths, not absolute paths.  
  åªä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œä¸ä½¿ç”¨ç»å¯¹è·¯å¾„ã€‚    

Then everything you need is in one place and cleanly separated from all the other projects that you are working on.    
ç„¶åï¼Œä½ éœ€è¦çš„ä¸€åˆ‡éƒ½åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œå¹¶ä¸ä½ æ­£åœ¨è¿›è¡Œçš„æ‰€æœ‰å…¶ä»–é¡¹ç›®æ¸…æ™°åœ°åˆ†ç¦»å¼€æ¥ã€‚

So far, we've worked with datasets bundled inside of R packages.
This makes it easier to get some practice on pre-prepared data, but obviously your data won't be available in this way.
So in the next chapter, you're going to learn how load data from disk into your R session using the readr package.    
åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸€ç›´ä½¿ç”¨ R åŒ…ä¸­æ†ç»‘çš„æ•°æ®é›†ã€‚
è¿™ä½¿å¾—åœ¨é¢„å…ˆå‡†å¤‡å¥½çš„æ•°æ®ä¸Šè¿›è¡Œç»ƒä¹ å˜å¾—æ›´å®¹æ˜“ï¼Œä½†æ˜¾ç„¶ä½ çš„æ•°æ®ä¸ä¼šä»¥è¿™ç§æ–¹å¼æä¾›ã€‚
å› æ­¤ï¼Œåœ¨ä¸‹ä¸€ç« ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨ readr åŒ…å°†æ•°æ®ä»ç£ç›˜åŠ è½½åˆ°ä½ çš„ R ä¼šè¯ä¸­ã€‚

[^1]:
    Not to mention that you're tempting fate by using "final" in the name ğŸ˜† The comic Piled Higher and Deeper has a [fun strip on this](https://phdcomics.com/comics/archive.php?comicid=1531).

[^2]:
    If you don't have usethis installed, you can install it with `install.packages("usethis")`.
