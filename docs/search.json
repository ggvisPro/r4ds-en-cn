[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "R æ•°æ®ç§‘å­¦ 2e ï¼ˆåŒè¯­ï¼‰",
    "section": "",
    "text": "Welcome\nThis is the website for the 2nd edition of â€œR for Data Scienceâ€. This book will teach you how to do data science with R: Youâ€™ll learn how to get your data into R, get it into the most useful structure, transform it and visualize.\nè¿™é‡Œæ˜¯ç¬¬äºŒç‰ˆ ã€ŠR æ•°æ®ç§‘å­¦ã€‹ çš„ç½‘ç«™ã€‚ æœ¬ä¹¦å°†æ•™ä½ å¦‚ä½•ç”¨ R æ¥åšæ•°æ®ç§‘å­¦ï¼šä½ å°†å­¦ä¹ å¦‚ä½•å°†æ•°æ®å¯¼å…¥ Rï¼Œå¦‚ä½•å°†å…¶æ•´ç†ä¸ºæœ€æœ‰ç”¨ç»“æ„ï¼Œä»¥åŠå¦‚ä½•è½¬æ¢å’Œå¯è§†åŒ–æ•°æ®ã€‚\nIn this book, you will find a practicum of skills for data science. Just as a chemist learns how to clean test tubes and stock a lab, youâ€™ll learn how to clean data and draw plotsâ€”and many other things besides. These are the skills that allow data science to happen, and here you will find the best practices for doing each of these things with R. Youâ€™ll learn how to use the grammar of graphics, literate programming, and reproducible research to save time. Youâ€™ll also learn how to manage cognitive resources to facilitate discoveries when wrangling, visualizing, and exploring data.\nåœ¨æœ¬ä¹¦ä¸­ï¼Œä½ ä¼šå‘ç°ä¸€å¥—æ•°æ®ç§‘å­¦çš„å®è·µæŠ€èƒ½ã€‚ å°±åƒåŒ–å­¦å®¶å­¦ä¹ å¦‚ä½•æ¸…æ´—è¯•ç®¡å’Œå‚¨å¤‡å®éªŒå®¤ä¸€æ ·ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•æ¸…ç†æ•°æ®å’Œç»˜åˆ¶å›¾è¡¨â€”â€”ä»¥åŠè®¸å¤šå…¶ä»–äº‹æƒ…ã€‚ è¿™äº›æ˜¯è®©æ•°æ®ç§‘å­¦å¾—ä»¥å®ç°çš„æŠ€èƒ½ï¼Œåœ¨è¿™é‡Œä½ ä¼šæ‰¾åˆ°ç”¨ R æ¥å®Œæˆè¿™äº›äº‹æƒ…çš„æœ€ä½³å®è·µã€‚ ä½ å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨å›¾å½¢è¯­æ³• (grammar of graphics)ã€æ–‡å­¦ç¼–ç¨‹ (literate programming) å’Œå¯é‡å¤ç ”ç©¶ (reproducible research) æ¥èŠ‚çœæ—¶é—´ã€‚ ä½ è¿˜å°†å­¦ä¹ å¦‚ä½•ç®¡ç†è®¤çŸ¥èµ„æºï¼Œä»¥ä¾¿åœ¨æ•´ç†ã€å¯è§†åŒ–å’Œæ¢ç´¢æ•°æ®æ—¶ä¿ƒè¿›æ–°å‘ç°ã€‚\nThis website is and will always be free, licensed under the CC BY-NC-ND 3.0 License. If youâ€™d like a physical copy of the book, you can order it on Amazon. If you appreciate reading the book for free and would like to give back, please make a donation to KÄkÄpÅ Recovery: the kÄkÄpÅ (which appears on the cover of R4DS) is a critically endangered parrot native to New Zealand; there are only 244 left.\næœ¬ç½‘ç«™æ˜¯å¹¶ä¸”å°†æ°¸è¿œæ˜¯å…è´¹çš„ï¼ŒåŸºäº CC BY-NC-ND 3.0 è®¸å¯åè®®ã€‚ å¦‚æœä½ æƒ³è¦å®ä½“ä¹¦ï¼Œå¯ä»¥åœ¨ äºšé©¬é€Š ä¸Šè®¢è´­ã€‚ å¦‚æœä½ å¾ˆæ„Ÿæ¿€èƒ½å¤Ÿå…è´¹é˜…è¯»æœ¬ä¹¦å¹¶å¸Œæœ›å›é¦ˆï¼Œè¯·å‘ KÄkÄpÅ Recovery ææ¬¾ï¼škÄkÄpÅ (R4DS å°é¢ä¸Šçš„é¸Ÿ) æ˜¯æ–°è¥¿å…°æœ¬åœŸçš„ä¸€ç§æåº¦æ¿’å±çš„é¹¦é¹‰ï¼›ç›®å‰ä»…å­˜ 244 åªã€‚\nIf you speak another language, you might be interested in the freely available translations of the 1st edition:\nå¦‚æœä½ ä½¿ç”¨å…¶ä»–è¯­è¨€ï¼Œä½ å¯èƒ½ä¼šå¯¹ç¬¬ä¸€ç‰ˆçš„å…è´¹è¯‘æœ¬æ„Ÿå…´è¶£ï¼š\n\nSpanish\nItalian\nTurkish\nPortuguese\n\nYou can find suggested answers to exercises in the book at https://mine-cetinkaya-rundel.github.io/r4ds-solutions.\nä½ å¯ä»¥åœ¨ https://mine-cetinkaya-rundel.github.io/r4ds-solutions æ‰¾åˆ°ä¹¦ä¸­ç»ƒä¹ çš„å»ºè®®ç­”æ¡ˆã€‚\nPlease note that R4DS uses a Contributor Code of Conduct. By contributing to this book, you agree to abide by its terms.\nè¯·æ³¨æ„ï¼ŒR4DS ä½¿ç”¨ è´¡çŒ®è€…è¡Œä¸ºå‡†åˆ™ã€‚ ä¸ºæœ¬ä¹¦åšè´¡çŒ®ï¼Œå³è¡¨ç¤ºä½ åŒæ„éµå®ˆå…¶æ¡æ¬¾ã€‚ http://googleusercontent.com/youtube_content/0",
    "crumbs": [
      "Welcome"
    ]
  },
  {
    "objectID": "preface-2e.html",
    "href": "preface-2e.html",
    "title": "Preface to the second edition",
    "section": "",
    "text": "Welcome to the second edition of â€œR for Data Scienceâ€! This is a major reworking of the first edition, removing material we no longer think is useful, adding material we wish we included in the first edition, and generally updating the text and code to reflect changes in best practices. Weâ€™re also very excited to welcome a new co-author: Mine Ã‡etinkaya-Rundel, a noted data science educator and one of our colleagues at Posit (the company formerly known as RStudio).\næ¬¢è¿é˜…è¯»ã€ŠR æ•°æ®ç§‘å­¦ã€‹ç¬¬äºŒç‰ˆï¼ è¿™æ˜¯å¯¹ç¬¬ä¸€ç‰ˆçš„ä¸€æ¬¡é‡å¤§ä¿®è®¢ï¼Œæˆ‘ä»¬åˆ é™¤äº†ä¸€äº›æˆ‘ä»¬è®¤ä¸ºä¸å†æœ‰ç”¨çš„ææ–™ï¼Œæ·»åŠ äº†æˆ‘ä»¬å¸Œæœ›åœ¨ç¬¬ä¸€ç‰ˆä¸­å°±åŒ…å«çš„å†…å®¹ï¼Œå¹¶å…¨é¢æ›´æ–°äº†æ–‡æœ¬å’Œä»£ç ï¼Œä»¥åæ˜ æœ€ä½³å®è·µçš„å˜åŒ–ã€‚ æˆ‘ä»¬ä¹Ÿéå¸¸é«˜å…´åœ°è¿æ¥äº†ä¸€ä½æ–°çš„åˆè‘—è€…ï¼šMine Ã‡etinkaya-Rundelï¼Œå¥¹æ˜¯ä¸€ä½è‘—åçš„æ•°æ®ç§‘å­¦æ•™è‚²å®¶ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬åœ¨ Posit (å‰èº«ä¸º RStudio çš„å…¬å¸) çš„åŒäº‹ä¹‹ä¸€ã€‚\nA brief summary of the biggest changes follows:\nä»¥ä¸‹æ˜¯ä¸»è¦å˜åŒ–çš„ç®€è¦æ€»ç»“ï¼š\n\nThe first part of the book has been renamed to â€œWhole gameâ€. The goal of this section is to give you the rough details of the â€œwhole gameâ€ of data science before we dive into the details.\næœ¬ä¹¦çš„ç¬¬ä¸€éƒ¨åˆ†å·²æ›´åä¸º â€œå…¨å±€è®¤çŸ¥â€ (Whole game)ã€‚ æœ¬éƒ¨åˆ†çš„ç›®æ ‡æ˜¯åœ¨æˆ‘ä»¬æ·±å…¥æ¢è®¨ç»†èŠ‚ä¹‹å‰ï¼Œè®©ä½ å¯¹æ•°æ®ç§‘å­¦çš„ â€œå…¨å±€â€ æœ‰ä¸€ä¸ªå¤§è‡´çš„äº†è§£ã€‚\nThe second part of the book is â€œVisualizeâ€. This part gives data visualization tools and best practices a more thorough coverage compared to the first edition. The best place to get all the details is still the ggplot2 book, but now R4DS covers more of the most important techniques.\næœ¬ä¹¦çš„ç¬¬äºŒéƒ¨åˆ†æ˜¯ â€œå¯è§†åŒ–â€ (Visualize)ã€‚ ä¸ç¬¬ä¸€ç‰ˆç›¸æ¯”ï¼Œè¿™éƒ¨åˆ†å¯¹æ•°æ®å¯è§†åŒ–å·¥å…·å’Œæœ€ä½³å®è·µè¿›è¡Œäº†æ›´å…¨é¢çš„ä»‹ç»ã€‚ è·å–æ‰€æœ‰ç»†èŠ‚çš„æœ€ä½³å»å¤„ä»ç„¶æ˜¯ ã€Šggplot2 bookã€‹ï¼Œä½†ç°åœ¨ R4DS æ¶µç›–äº†æ›´å¤šæœ€é‡è¦çš„æŠ€æœ¯ã€‚\nThe third part of the book is now called â€œTransformâ€ and gains new chapters on numbers, logical vectors, and missing values. These were previously parts of the data transformation chapter, but needed much more room to cover all the details.\næœ¬ä¹¦çš„ç¬¬ä¸‰éƒ¨åˆ†ç°åœ¨ç§°ä¸º â€œè½¬æ¢â€ (Transform)ï¼Œå¹¶å¢åŠ äº†å…³äºæ•°å­—ã€é€»è¾‘å‘é‡å’Œç¼ºå¤±å€¼çš„æ–°ç« èŠ‚ã€‚ è¿™äº›å†…å®¹ä»¥å‰æ˜¯æ•°æ®è½¬æ¢ç« èŠ‚çš„ä¸€éƒ¨åˆ†ï¼Œä½†éœ€è¦æ›´å¤šçš„ç©ºé—´æ¥æ¶µç›–æ‰€æœ‰ç»†èŠ‚ã€‚\nThe fourth part of the book is called â€œImportâ€. Itâ€™s a new set of chapters that goes beyond reading flat text files to working with spreadsheets, getting data out of databases, working with big data, rectangling hierarchical data, and scraping data from web sites.\næœ¬ä¹¦çš„ç¬¬å››éƒ¨åˆ†ç§°ä¸º â€œå¯¼å…¥â€ (Import)ã€‚ è¿™æ˜¯ä¸€ç»„æ–°çš„ç« èŠ‚ï¼Œå†…å®¹è¶…å‡ºäº†è¯»å–çº¯æ–‡æœ¬æ–‡ä»¶çš„èŒƒå›´ï¼Œè¿˜åŒ…æ‹¬å¤„ç†ç”µå­è¡¨æ ¼ã€ä»æ•°æ®åº“ä¸­è·å–æ•°æ®ã€å¤„ç†å¤§æ•°æ®ã€æ•´ç†å±‚æ¬¡åŒ–æ•°æ®ä»¥åŠä»ç½‘ç«™ä¸ŠæŠ“å–æ•°æ®ã€‚\nThe â€œProgramâ€ part remains, but has been rewritten from top-to-bottom to focus on the most important parts of function writing and iteration. Function writing now includes details on how to wrap tidyverse functions (dealing with the challenges of tidy evaluation), since this has become much easier and more important over the last few years. Weâ€™ve added a new chapter on important base R functions that youâ€™re likely to see in wild-caught R code.\nâ€œç¼–ç¨‹â€ (Program) éƒ¨åˆ†ä»ç„¶ä¿ç•™ï¼Œä½†å·²ç»ä»å¤´åˆ°å°¾è¿›è¡Œäº†é‡å†™ï¼Œä»¥ä¸“æ³¨äºå‡½æ•°ç¼–å†™å’Œè¿­ä»£çš„æœ€é‡è¦éƒ¨åˆ†ã€‚ å‡½æ•°ç¼–å†™ç°åœ¨åŒ…å«äº†å¦‚ä½•åŒ…è£… tidyverse å‡½æ•°çš„ç»†èŠ‚ (å¤„ç†æ•´æ´è¯„ä¼° (tidy evaluation) çš„æŒ‘æˆ˜)ï¼Œå› ä¸ºåœ¨è¿‡å»å‡ å¹´ä¸­ï¼Œè¿™å˜å¾—æ›´åŠ å®¹æ˜“å’Œé‡è¦ã€‚ æˆ‘ä»¬å¢åŠ äº†ä¸€ä¸ªæ–°ç« èŠ‚ï¼Œä»‹ç»äº†ä¸€äº›é‡è¦çš„åŸºç¡€ R å‡½æ•°ï¼Œä½ å¾ˆå¯èƒ½ä¼šåœ¨å®é™…çš„ R ä»£ç ä¸­çœ‹åˆ°å®ƒä»¬ã€‚\nThe modeling part has been removed. We never had enough room to fully do modelling justice, and there are now much better resources available. We generally recommend using the tidymodels packages and reading Tidy Modeling with R by Max Kuhn and Julia Silge.\nå»ºæ¨¡ (modeling) éƒ¨åˆ†å·²è¢«ç§»é™¤ã€‚ æˆ‘ä»¬ä¸€ç›´æ²¡æœ‰è¶³å¤Ÿçš„ç¯‡å¹…æ¥å……åˆ†åœ°è®²è§£å»ºæ¨¡ï¼Œè€Œä¸”ç°åœ¨æœ‰æ›´å¥½çš„èµ„æºå¯ä¾›ä½¿ç”¨ã€‚ æˆ‘ä»¬é€šå¸¸æ¨èä½¿ç”¨ tidymodels å®åŒ…å¹¶é˜…è¯» Max Kuhn å’Œ Julia Silge åˆè‘—çš„ ã€ŠTidy Modeling with Rã€‹ã€‚\nThe â€œCommunicateâ€ part remains, but has been thoroughly updated to feature Quarto instead of R Markdown. This edition of the book has been written in Quarto, and itâ€™s clearly the tool of the future.\nâ€œæ²Ÿé€šâ€ (Communicate) éƒ¨åˆ†ä»ç„¶ä¿ç•™ï¼Œä½†å·²ç»å…¨é¢æ›´æ–°ï¼Œä»¥ Quarto ä»£æ›¿ R Markdownã€‚ æœ¬ä¹¦çš„è¿™ä¸€ç‰ˆæ˜¯ç”¨ Quarto ç¼–å†™çš„ï¼Œå®ƒæ˜¾ç„¶æ˜¯æœªæ¥çš„å·¥å…·ã€‚",
    "crumbs": [
      "Preface to the second edition"
    ]
  },
  {
    "objectID": "intro.html",
    "href": "intro.html",
    "title": "Introduction",
    "section": "",
    "text": "What you will learn\nData science is an exciting discipline that allows you to transform raw data into understanding, insight, and knowledge.\næ•°æ®ç§‘å­¦æ˜¯ä¸€é—¨æ¿€åŠ¨äººå¿ƒçš„å­¦ç§‘ï¼Œå®ƒèƒ½è®©ä½ å°†åŸå§‹æ•°æ®è½¬åŒ–ä¸ºç†è§£ã€æ´å¯Ÿå’ŒçŸ¥è¯†ã€‚\nThe goal of â€œR for Data Scienceâ€ is to help you learn the most important tools in R that will allow you to do data science efficiently and reproducibly, and to have some fun along the way ğŸ˜ƒ.\nã€ŠR æ•°æ®ç§‘å­¦ã€‹çš„ç›®æ ‡æ˜¯å¸®åŠ©ä½ å­¦ä¹  R ä¸­æœ€é‡è¦çš„å·¥å…·ï¼Œè¿™äº›å·¥å…·å°†ä½¿ä½ èƒ½å¤Ÿé«˜æ•ˆã€å¯é‡å¤åœ°è¿›è¡Œæ•°æ®ç§‘å­¦å·¥ä½œï¼Œå¹¶åœ¨æ­¤è¿‡ç¨‹ä¸­è·å¾—ä¸€äº›ä¹è¶£ ğŸ˜ƒã€‚\nAfter reading this book, youâ€™ll have the tools to tackle a wide variety of data science challenges using the best parts of R.\nè¯»å®Œæœ¬ä¹¦åï¼Œä½ å°†æ‹¥æœ‰ä½¿ç”¨ R çš„ç²¾åéƒ¨åˆ†æ¥åº”å¯¹å„ç§æ•°æ®ç§‘å­¦æŒ‘æˆ˜çš„å·¥å…·ã€‚\nData science is a vast field, and thereâ€™s no way you can master it all by reading a single book.\næ•°æ®ç§‘å­¦æ˜¯ä¸€ä¸ªå¹¿é˜”çš„é¢†åŸŸï¼Œä¸å¯èƒ½é€šè¿‡é˜…è¯»ä¸€æœ¬ä¹¦å°±æŒæ¡æ‰€æœ‰å†…å®¹ã€‚\nThis book aims to give you a solid foundation in the most important tools and enough knowledge to find the resources to learn more when necessary.\næœ¬ä¹¦æ—¨åœ¨ä¸ºä½ æ‰“ä¸‹æœ€é‡è¦çš„å·¥å…·çš„åšå®åŸºç¡€ï¼Œå¹¶æä¾›è¶³å¤Ÿçš„çŸ¥è¯†ï¼Œä»¥ä¾¿åœ¨å¿…è¦æ—¶æ‰¾åˆ°æ›´å¤šå­¦ä¹ èµ„æºã€‚\nOur model of the steps of a typical data science project looks something like FigureÂ 1.\næˆ‘ä»¬å¯¹å…¸å‹æ•°æ®ç§‘å­¦é¡¹ç›®æ­¥éª¤çš„æ¨¡å‹å¦‚ FigureÂ 1 æ‰€ç¤ºã€‚\nFigureÂ 1: In our model of the data science process, you start with data import and tidying. Next, you understand your data with an iterative cycle of transforming, visualizing, and modeling. You finish the process by communicating your results to other humans.\nFirst, you must import your data into R.\né¦–å…ˆï¼Œä½ å¿…é¡»å°†æ•°æ® å¯¼å…¥ (import) åˆ° R ä¸­ã€‚\nThis typically means that you take data stored in a file, database, or web application programming interface (API) and load it into a data frame in R.\nè¿™é€šå¸¸æ„å‘³ç€ä½ å°†å­˜å‚¨åœ¨æ–‡ä»¶ã€æ•°æ®åº“æˆ– Web åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ (API) ä¸­çš„æ•°æ®åŠ è½½åˆ° R çš„æ•°æ®æ¡† (data frame) ä¸­ã€‚\nIf you canâ€™t get your data into R, you canâ€™t do data science on it!\nå¦‚æœæ— æ³•å°†æ•°æ®å¯¼å…¥ Rï¼Œä½ å°±æ— æ³•å¯¹å…¶è¿›è¡Œæ•°æ®ç§‘å­¦åˆ†æï¼\nOnce youâ€™ve imported your data, it is a good idea to tidy it.\nå¯¼å…¥æ•°æ®åï¼Œæœ€å¥½å¯¹å…¶è¿›è¡Œ æ•´ç† (tidy)ã€‚\nTidying your data means storing it in a consistent form that matches the semantics of the dataset with how it is stored.\næ•´ç†æ•°æ®æ„å‘³ç€å°†å…¶ä»¥ä¸€ç§ä¸€è‡´çš„å½¢å¼å­˜å‚¨ï¼Œè¯¥å½¢å¼å°†æ•°æ®é›†çš„è¯­ä¹‰ä¸å…¶å­˜å‚¨æ–¹å¼ç›¸åŒ¹é…ã€‚\nIn brief, when your data is tidy, each column is a variable and each row is an observation.\nç®€è€Œè¨€ä¹‹ï¼Œå½“ä½ çš„æ•°æ®æ˜¯æ•´æ´ (tidy) çš„æ—¶ï¼Œæ¯ä¸€åˆ—éƒ½æ˜¯ä¸€ä¸ªå˜é‡ï¼Œæ¯ä¸€è¡Œéƒ½æ˜¯ä¸€ä¸ªè§‚æµ‹ã€‚\nTidy data is important because the consistent structure lets you focus your efforts on answering questions about the data, not fighting to get the data into the right form for different functions.\næ•´æ´çš„æ•°æ®å¾ˆé‡è¦ï¼Œå› ä¸ºå…¶ä¸€è‡´çš„ç»“æ„å¯ä»¥è®©ä½ ä¸“æ³¨äºå›ç­”å…³äºæ•°æ®çš„é—®é¢˜ï¼Œè€Œä¸æ˜¯è´¹åŠ›åœ°å°†æ•°æ®è½¬æ¢ä¸ºé€‚åˆä¸åŒå‡½æ•°çš„å½¢å¼ã€‚\nOnce you have tidy data, a common next step is to transform it.\næ‹¥æœ‰æ•´æ´çš„æ•°æ®åï¼Œé€šå¸¸çš„ä¸‹ä¸€æ­¥æ˜¯è¿›è¡Œ è½¬æ¢ (transform)ã€‚\nTransformation includes narrowing in on observations of interest (like all people in one city or all data from the last year), creating new variables that are functions of existing variables (like computing speed from distance and time), and calculating a set of summary statistics (like counts or means).\nè½¬æ¢åŒ…æ‹¬ç­›é€‰å‡ºæ„Ÿå…´è¶£çš„è§‚æµ‹ï¼ˆä¾‹å¦‚ï¼ŒæŸä¸ªåŸå¸‚çš„æ‰€æœ‰äººæˆ–å»å¹´çš„æ‰€æœ‰æ•°æ®ï¼‰ï¼Œæ ¹æ®ç°æœ‰å˜é‡åˆ›å»ºæ–°å˜é‡ï¼ˆä¾‹å¦‚ï¼Œæ ¹æ®è·ç¦»å’Œæ—¶é—´è®¡ç®—é€Ÿåº¦ï¼‰ï¼Œä»¥åŠè®¡ç®—ä¸€ç»„æ‘˜è¦ç»Ÿè®¡é‡ï¼ˆä¾‹å¦‚ï¼Œè®¡æ•°æˆ–å‡å€¼ï¼‰ã€‚\nTogether, tidying and transforming are called wrangling because getting your data in a form thatâ€™s natural to work with often feels like a fight!\næ•´ç†å’Œè½¬æ¢åˆåœ¨ä¸€èµ·è¢«ç§°ä¸º æ•°æ®æ•´ç† (wrangling)ï¼Œå› ä¸ºå°†æ•°æ®å¤„ç†æˆæ˜“äºä½¿ç”¨çš„å½¢å¼é€šå¸¸æ„Ÿè§‰åƒä¸€åœºæˆ˜æ–—ï¼\nOnce you have tidy data with the variables you need, there are two main engines of knowledge generation: visualization and modeling.\nå½“ä½ æ‹¥æœ‰äº†åŒ…å«æ‰€éœ€å˜é‡çš„æ•´æ´æ•°æ®åï¼ŒçŸ¥è¯†ç”Ÿæˆçš„ä¸¤å¤§å¼•æ“ä¾¿æ˜¯ï¼šå¯è§†åŒ–å’Œå»ºæ¨¡ã€‚\nThese have complementary strengths and weaknesses, so any real data analysis will iterate between them many times.\nè¿™ä¸¤è€…å„æœ‰ä¼˜ç¼ºç‚¹ï¼Œç›¸è¾…ç›¸æˆï¼Œå› æ­¤ä»»ä½•å®é™…çš„æ•°æ®åˆ†æéƒ½ä¼šåœ¨å®ƒä»¬ä¹‹é—´å¤šæ¬¡è¿­ä»£ã€‚\nVisualization is a fundamentally human activity.\nå¯è§†åŒ– (Visualization) æœ¬è´¨ä¸Šæ˜¯ä¸€é¡¹äººç±»æ´»åŠ¨ã€‚\nA good visualization will show you things you did not expect or raise new questions about the data.\nå¥½çš„å¯è§†åŒ–ä¼šå‘ä½ å±•ç¤ºæ„æƒ³ä¸åˆ°çš„æƒ…å†µï¼Œæˆ–å¼•å‘å…³äºæ•°æ®çš„æ–°é—®é¢˜ã€‚\nA good visualization might also hint that youâ€™re asking the wrong question or that you need to collect different data.\nå¥½çš„å¯è§†åŒ–ä¹Ÿå¯èƒ½æš—ç¤ºä½ é—®é”™äº†é—®é¢˜ï¼Œæˆ–è€…ä½ éœ€è¦æ”¶é›†ä¸åŒçš„æ•°æ®ã€‚\nVisualizations can surprise you, but they donâ€™t scale particularly well because they require a human to interpret them.\nå¯è§†åŒ–å¯ä»¥ç»™ä½ å¸¦æ¥æƒŠå–œï¼Œä½†å®ƒä»¬çš„å¯æ‰©å±•æ€§ä¸æ˜¯å¾ˆå¥½ï¼Œå› ä¸ºå®ƒä»¬éœ€è¦äººæ¥è§£é‡Šã€‚\nModels are complementary tools to visualization.\næ¨¡å‹ (Models) æ˜¯å¯è§†åŒ–çš„è¡¥å……å·¥å…·ã€‚\nOnce you have made your questions sufficiently precise, you can use a model to answer them.\nä¸€æ—¦ä½ å°†é—®é¢˜å®šä¹‰å¾—è¶³å¤Ÿç²¾ç¡®ï¼Œå°±å¯ä»¥ä½¿ç”¨æ¨¡å‹æ¥å›ç­”å®ƒä»¬ã€‚\nModels are fundamentally mathematical or computational tools, so they generally scale well.\næ¨¡å‹æœ¬è´¨ä¸Šæ˜¯æ•°å­¦æˆ–è®¡ç®—å·¥å…·ï¼Œå› æ­¤å®ƒä»¬é€šå¸¸å…·æœ‰è‰¯å¥½çš„å¯æ‰©å±•æ€§ã€‚\nEven when they donâ€™t, itâ€™s usually cheaper to buy more computers than it is to buy more brains!\nå³ä½¿å®ƒä»¬ä¸å…·å¤‡æ‰©å±•æ€§ï¼Œé€šå¸¸è´­ä¹°æ›´å¤šçš„è®¡ç®—æœºä¹Ÿæ¯”é›‡ä½£æ›´å¤šçš„äººè„‘ä¾¿å®œï¼\nBut every model makes assumptions, and by its very nature, a model cannot question its own assumptions.\nä½†æ˜¯ï¼Œæ¯ä¸ªæ¨¡å‹éƒ½æœ‰å…¶å‡è®¾ï¼Œè€Œæ¨¡å‹æœ¬èº«æ— æ³•è´¨ç–‘è‡ªèº«çš„å‡è®¾ã€‚\nThat means a model cannot fundamentally surprise you.\nè¿™æ„å‘³ç€æ¨¡å‹æœ¬è´¨ä¸Šä¸ä¼šç»™ä½ å¸¦æ¥æƒŠå–œã€‚\nThe last step of data science is communication, an absolutely critical part of any data analysis project.\næ•°æ®ç§‘å­¦çš„æœ€åä¸€æ­¥æ˜¯ æ²Ÿé€š (communication)ï¼Œè¿™æ˜¯ä»»ä½•æ•°æ®åˆ†æé¡¹ç›®ä¸­éƒ½è‡³å…³é‡è¦çš„éƒ¨åˆ†ã€‚\nIt doesnâ€™t matter how well your models and visualization have led you to understand the data unless you can also communicate your results to others.\né™¤éä½ èƒ½å¤Ÿå°†ç»“æœä¼ è¾¾ç»™ä»–äººï¼Œå¦åˆ™æ— è®ºä½ çš„æ¨¡å‹å’Œå¯è§†åŒ–è®©ä½ å¯¹æ•°æ®æœ‰å¤šæ·±çš„ç†è§£ï¼Œéƒ½æ¯«æ— æ„ä¹‰ã€‚\nSurrounding all these tools is programming.\nå›´ç»•æ‰€æœ‰è¿™äº›å·¥å…·çš„æ˜¯ ç¼–ç¨‹ (programming)ã€‚\nProgramming is a cross-cutting tool that you use in nearly every part of a data science project.\nç¼–ç¨‹æ˜¯ä¸€ä¸ªè´¯ç©¿å§‹ç»ˆçš„å·¥å…·ï¼Œä½ åœ¨æ•°æ®ç§‘å­¦é¡¹ç›®çš„å‡ ä¹æ¯ä¸ªéƒ¨åˆ†éƒ½ä¼šç”¨åˆ°å®ƒã€‚\nYou donâ€™t need to be an expert programmer to be a successful data scientist, but learning more about programming pays off because becoming a better programmer allows you to automate common tasks and solve new problems with greater ease.\nä½ ä¸éœ€è¦æˆä¸ºç¼–ç¨‹ä¸“å®¶æ‰èƒ½æˆä¸ºä¸€åæˆåŠŸçš„æ•°æ®ç§‘å­¦å®¶ï¼Œä½†å­¦ä¹ æ›´å¤šç¼–ç¨‹çŸ¥è¯†æ˜¯å€¼å¾—çš„ï¼Œå› ä¸ºæˆä¸ºä¸€åæ›´å¥½çš„ç¨‹åºå‘˜å¯ä»¥è®©ä½ è‡ªåŠ¨åŒ–å¸¸è§„ä»»åŠ¡ï¼Œå¹¶æ›´è½»æ¾åœ°è§£å†³æ–°é—®é¢˜ã€‚\nYouâ€™ll use these tools in every data science project, but theyâ€™re not enough for most projects.\nä½ ä¼šåœ¨æ¯ä¸ªæ•°æ®ç§‘å­¦é¡¹ç›®ä¸­ä½¿ç”¨è¿™äº›å·¥å…·ï¼Œä½†å¯¹äºå¤§å¤šæ•°é¡¹ç›®æ¥è¯´ï¼Œè¿™äº›å·¥å…·æ˜¯ä¸å¤Ÿçš„ã€‚\nThereâ€™s a rough 80/20 rule at play: you can tackle about 80% of every project using the tools youâ€™ll learn in this book, but youâ€™ll need other tools to tackle the remaining 20%.\nè¿™é‡Œæœ‰ä¸€ä¸ªç²—ç•¥çš„ 80/20 æ³•åˆ™ï¼šä½ å¯ä»¥ä½¿ç”¨æœ¬ä¹¦ä¸­å­¦åˆ°çš„å·¥å…·è§£å†³æ¯ä¸ªé¡¹ç›®ä¸­å¤§çº¦ 80% çš„é—®é¢˜ï¼Œä½†ä½ éœ€è¦å…¶ä»–å·¥å…·æ¥è§£å†³å‰©ä¸‹çš„ 20%ã€‚\nThroughout this book, weâ€™ll point you to resources where you can learn more.\nåœ¨æœ¬ä¹¦ä¸­ï¼Œæˆ‘ä»¬å°†ä¸ºä½ æŒ‡å‡ºå¯ä»¥å­¦ä¹ æ›´å¤šå†…å®¹çš„èµ„æºã€‚",
    "crumbs": [
      "Introduction"
    ]
  },
  {
    "objectID": "intro.html#how-this-book-is-organized",
    "href": "intro.html#how-this-book-is-organized",
    "title": "Introduction",
    "section": "How this book is organized",
    "text": "How this book is organized\nThe previous description of the tools of data science is organized roughly according to the order in which you use them in an analysis (although, of course, youâ€™ll iterate through them multiple times).\nå‰é¢å…³äºæ•°æ®ç§‘å­¦å·¥å…·çš„æè¿°å¤§è‡´æ˜¯æŒ‰ç…§ä½ åœ¨åˆ†æä¸­ä½¿ç”¨çš„é¡ºåºæ¥ç»„ç»‡çš„ï¼ˆå½“ç„¶ï¼Œä½ ä¼šå¤šæ¬¡è¿­ä»£ä½¿ç”¨å®ƒä»¬ï¼‰ã€‚\nIn our experience, however, learning data importing and tidying first is suboptimal because, 80% of the time, itâ€™s routine and boring, and the other 20% of the time, itâ€™s weird and frustrating.\nç„¶è€Œï¼Œæ ¹æ®æˆ‘ä»¬çš„ç»éªŒï¼Œé¦–å…ˆå­¦ä¹ æ•°æ®å¯¼å…¥å’Œæ•´ç†å¹¶éæœ€ä½³é€‰æ‹©ï¼Œå› ä¸º 80% çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯å¸¸è§„ä¸”ä¹å‘³çš„ï¼Œè€Œå¦å¤– 20% çš„æƒ…å†µä¸‹ï¼Œå®ƒåˆå¥‡æ€ªåˆä»¤äººæ²®ä¸§ã€‚\nThatâ€™s a bad place to start learning a new subject!\nè¿™å¯¹äºå¼€å§‹å­¦ä¹ ä¸€ä¸ªæ–°ä¸»é¢˜æ¥è¯´ä¸æ˜¯ä¸€ä¸ªå¥½çš„èµ·ç‚¹ï¼\nInstead, weâ€™ll start with visualization and transformation of data thatâ€™s already been imported and tidied.\nå› æ­¤ï¼Œæˆ‘ä»¬å°†ä»å·²å¯¼å…¥å’Œæ•´ç†å¥½çš„æ•°æ®çš„å¯è§†åŒ–å’Œè½¬æ¢å¼€å§‹ã€‚\nThat way, when you ingest and tidy your own data, your motivation will stay high because you know the pain is worth the effort.\nè¿™æ ·ï¼Œå½“ä½ å¤„ç†å’Œæ•´ç†è‡ªå·±çš„æ•°æ®æ—¶ï¼Œä½ ä¼šä¿æŒé«˜æ˜‚çš„ç§¯ææ€§ï¼Œå› ä¸ºä½ çŸ¥é“è¿™äº›è¾›è‹¦æ˜¯å€¼å¾—çš„ã€‚\nWithin each chapter, we try to adhere to a consistent pattern: start with some motivating examples so you can see the bigger picture, and then dive into the details.\nåœ¨æ¯ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬éƒ½å°½é‡éµå¾ªä¸€ä¸ªä¸€è‡´çš„æ¨¡å¼ï¼šä»ä¸€äº›æ¿€åŠ±äººå¿ƒçš„ä¾‹å­å¼€å§‹ï¼Œè®©ä½ çœ‹åˆ°å…¨å±€ï¼Œç„¶åå†æ·±å…¥ç»†èŠ‚ã€‚\nEach section of the book is paired with exercises to help you practice what youâ€™ve learned.\næœ¬ä¹¦çš„æ¯ä¸ªéƒ¨åˆ†éƒ½é…æœ‰ç»ƒä¹ ï¼Œä»¥å¸®åŠ©ä½ å®è·µæ‰€å­¦å†…å®¹ã€‚\nAlthough it can be tempting to skip the exercises, thereâ€™s no better way to learn than by practicing on real problems.\nå°½ç®¡è·³è¿‡ç»ƒä¹ å¾ˆè¯±äººï¼Œä½†æ²¡æœ‰æ¯”é€šè¿‡è§£å†³å®é™…é—®é¢˜è¿›è¡Œç»ƒä¹ æ›´å¥½çš„å­¦ä¹ æ–¹æ³•äº†ã€‚",
    "crumbs": [
      "Introduction"
    ]
  },
  {
    "objectID": "intro.html#what-you-wont-learn",
    "href": "intro.html#what-you-wont-learn",
    "title": "Introduction",
    "section": "What you wonâ€™t learn",
    "text": "What you wonâ€™t learn\nThere are several important topics that this book doesnâ€™t cover.\næœ¬ä¹¦æ²¡æœ‰æ¶µç›–å‡ ä¸ªé‡è¦ä¸»é¢˜ã€‚\nWe believe itâ€™s important to stay ruthlessly focused on the essentials so you can get up and running as quickly as possible.\næˆ‘ä»¬è®¤ä¸ºï¼Œä¸¥æ ¼ä¸“æ³¨äºåŸºç¡€çŸ¥è¯†éå¸¸é‡è¦ï¼Œè¿™æ ·ä½ æ‰èƒ½å°½å¿«ä¸Šæ‰‹ã€‚\nThat means this book canâ€™t cover every important topic.\nè¿™æ„å‘³ç€æœ¬ä¹¦æ— æ³•æ¶µç›–æ‰€æœ‰é‡è¦ä¸»é¢˜ã€‚\nModeling\nModeling is super important for data science, but itâ€™s a big topic, and unfortunately, we just donâ€™t have the space to give it the coverage it deserves here.\nå»ºæ¨¡å¯¹äºæ•°æ®ç§‘å­¦éå¸¸é‡è¦ï¼Œä½†å®ƒæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„ä¸»é¢˜ï¼Œä¸å¹¸çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œæ²¡æœ‰è¶³å¤Ÿçš„ç¯‡å¹…æ¥ç»™äºˆå®ƒåº”æœ‰çš„ä»‹ç»ã€‚\nTo learn more about modeling, we highly recommend Tidy Modeling with R by our colleagues Max Kuhn and Julia Silge.\nè¦äº†è§£æ›´å¤šå…³äºå»ºæ¨¡çš„çŸ¥è¯†ï¼Œæˆ‘ä»¬å¼ºçƒˆæ¨èæˆ‘ä»¬çš„åŒäº‹ Max Kuhn å’Œ Julia Silge ç¼–å†™çš„ ã€ŠTidy Modeling with Rã€‹ã€‚\nThis book will teach you the tidymodels family of packages, which, as you might guess from the name, share many conventions with the tidyverse packages we use in this book.\nè¿™æœ¬ä¹¦å°†æ•™ä½  tidymodels ç³»åˆ—åŒ…ï¼Œæ­£å¦‚ä½ å¯èƒ½ä»åå­—ä¸­çŒœåˆ°çš„é‚£æ ·ï¼Œå®ƒä¸æˆ‘ä»¬åœ¨æœ¬ä¹¦ä¸­ä½¿ç”¨çš„ tidyverse åŒ…æœ‰è®¸å¤šå…±åŒçš„çº¦å®šã€‚\nBig data\nThis book proudly and primarily focuses on small, in-memory datasets.\næœ¬ä¹¦ä¸»è¦ä¸”è‡ªè±ªåœ°ä¸“æ³¨äºå†…å­˜ä¸­çš„å°å‹æ•°æ®é›†ã€‚\nThis is the right place to start because you canâ€™t tackle big data unless you have experience with small data.\nè¿™æ˜¯ä¸€ä¸ªæ­£ç¡®çš„èµ·ç‚¹ï¼Œå› ä¸ºå¦‚æœä½ æ²¡æœ‰å¤„ç†å°æ•°æ®çš„ç»éªŒï¼Œä½ å°±æ— æ³•å¤„ç†å¤§æ•°æ®ã€‚\nThe tools youâ€™ll learn throughout the majority of this book will easily handle hundreds of megabytes of data, and with a bit of care, you can typically use them to work with a few gigabytes of data.\nä½ åœ¨æœ¬ä¹¦å¤§éƒ¨åˆ†å†…å®¹ä¸­å­¦åˆ°çš„å·¥å…·å¯ä»¥è½»æ¾å¤„ç†æ•°ç™¾å…†å­—èŠ‚çš„æ•°æ®ï¼Œå¦‚æœç¨åŠ æ³¨æ„ï¼Œä½ é€šå¸¸å¯ä»¥ä½¿ç”¨å®ƒä»¬æ¥å¤„ç†å‡ åƒå…†å­—èŠ‚çš„æ•°æ®ã€‚\nWeâ€™ll also show you how to get data out of databases and parquet files, both of which are often used to store big data.\næˆ‘ä»¬è¿˜å°†å‘ä½ å±•ç¤ºå¦‚ä½•ä»æ•°æ®åº“å’Œ parquet æ–‡ä»¶ä¸­è·å–æ•°æ®ï¼Œè¿™ä¸¤ç§æ–‡ä»¶éƒ½å¸¸ç”¨äºå­˜å‚¨å¤§æ•°æ®ã€‚\nYou wonâ€™t necessarily be able to work with the entire dataset, but thatâ€™s not a problem because you only need a subset or subsample to answer the question that youâ€™re interested in.\nä½ ä¸ä¸€å®šèƒ½å¤„ç†æ•´ä¸ªæ•°æ®é›†ï¼Œä½†è¿™ä¸æˆé—®é¢˜ï¼Œå› ä¸ºä½ åªéœ€è¦ä¸€ä¸ªå­é›†æˆ–å­æ ·æœ¬æ¥å›ç­”ä½ æ„Ÿå…´è¶£çš„é—®é¢˜ã€‚\nIf youâ€™re routinely working with larger data (10â€“100 GB, say), we recommend learning more about data.table.\nå¦‚æœä½ ç»å¸¸å¤„ç†æ›´å¤§çš„æ•°æ®ï¼ˆæ¯”å¦‚ 10-100 GBï¼‰ï¼Œæˆ‘ä»¬å»ºè®®ä½ å­¦ä¹ æ›´å¤šå…³äº data.table çš„çŸ¥è¯†ã€‚\nWe donâ€™t teach it here because it uses a different interface than the tidyverse and requires you to learn some different conventions.\næˆ‘ä»¬åœ¨è¿™é‡Œä¸æ•™å®ƒï¼Œå› ä¸ºå®ƒä½¿ç”¨äº†ä¸ tidyverse ä¸åŒçš„æ¥å£ï¼Œå¹¶ä¸”éœ€è¦ä½ å­¦ä¹ ä¸€äº›ä¸åŒçš„çº¦å®šã€‚\nHowever, it is incredibly faster, and the performance payoff is worth investing some time in learning it if youâ€™re working with large data.\nç„¶è€Œï¼Œå®ƒçš„é€Ÿåº¦éå¸¸å¿«ï¼Œå¦‚æœä½ å¤„ç†å¤§æ•°æ®ï¼Œé‚£ä¹ˆèŠ±æ—¶é—´å­¦ä¹ å®ƒæ‰€å¸¦æ¥çš„æ€§èƒ½æå‡æ˜¯å€¼å¾—çš„ã€‚\nPython, Julia, and friends\nIn this book, you wonâ€™t learn anything about Python, Julia, or any other programming language useful for data science.\nåœ¨æœ¬ä¹¦ä¸­ï¼Œä½ ä¸ä¼šå­¦åˆ°ä»»ä½•å…³äº Pythonã€Julia æˆ–ä»»ä½•å…¶ä»–å¯ç”¨äºæ•°æ®ç§‘å­¦çš„ç¼–ç¨‹è¯­è¨€çš„çŸ¥è¯†ã€‚\nThis isnâ€™t because we think these tools are bad.\nè¿™å¹¶ä¸æ˜¯å› ä¸ºæˆ‘ä»¬è®¤ä¸ºè¿™äº›å·¥å…·ä¸å¥½ã€‚\nTheyâ€™re not!\nå®ƒä»¬ä¸æ˜¯ï¼\nAnd in practice, most data science teams use a mix of languages, often at least R and Python.\nåœ¨å®è·µä¸­ï¼Œå¤§å¤šæ•°æ•°æ®ç§‘å­¦å›¢é˜Ÿä¼šæ··åˆä½¿ç”¨å¤šç§è¯­è¨€ï¼Œé€šå¸¸è‡³å°‘åŒ…æ‹¬ R å’Œ Pythonã€‚\nBut we strongly believe that itâ€™s best to master one tool at a time, and R is a great place to start.\nä½†æˆ‘ä»¬åšä¿¡ï¼Œä¸€æ¬¡æŒæ¡ä¸€ä¸ªå·¥å…·æ˜¯æœ€å¥½çš„ï¼Œè€Œ R æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ã€‚",
    "crumbs": [
      "Introduction"
    ]
  },
  {
    "objectID": "intro.html#prerequisites",
    "href": "intro.html#prerequisites",
    "title": "Introduction",
    "section": "Prerequisites",
    "text": "Prerequisites\nWeâ€™ve made a few assumptions about what you already know to get the most out of this book.\nä¸ºäº†è®©ä½ èƒ½ä»æœ¬ä¹¦ä¸­è·å¾—æœ€å¤§æ”¶ç›Šï¼Œæˆ‘ä»¬å¯¹ä½ å·²æœ‰çš„çŸ¥è¯†åšäº†ä¸€äº›å‡è®¾ã€‚\nYou should be generally numerically literate, and itâ€™s helpful if you have some basic programming experience already.\nä½ åº”è¯¥å…·å¤‡åŸºæœ¬çš„æ•°å­—ç´ å…»ï¼Œå¦‚æœå·²ç»æœ‰ä¸€äº›åŸºç¡€çš„ç¼–ç¨‹ç»éªŒä¼šæ›´æœ‰å¸®åŠ©ã€‚\nIf youâ€™ve never programmed before, you might find Hands on Programming with R by Garrett to be a valuable adjunct to this book.\nå¦‚æœä½ ä»¥å‰ä»æœªç¼–ç¨‹è¿‡ï¼Œä½ å¯èƒ½ä¼šå‘ç° Garrett ç¼–å†™çš„ ã€ŠHands on Programming with Rã€‹ æ˜¯æœ¬ä¹¦çš„ä¸€ä¸ªæœ‰ä»·å€¼çš„è¡¥å……ã€‚\nYou need four things to run the code in this book: R, RStudio, a collection of R packages called the tidyverse, and a handful of other packages.\nä½ éœ€è¦å››æ ·ä¸œè¥¿æ¥è¿è¡Œæœ¬ä¹¦ä¸­çš„ä»£ç ï¼šRã€RStudioã€ä¸€ä¸ªåä¸º tidyverse çš„ R åŒ…é›†åˆï¼Œä»¥åŠä¸€äº›å…¶ä»–åŒ…ã€‚\nPackages are the fundamental units of reproducible R code.\nåŒ… (Packages) æ˜¯å¯é‡ç° R ä»£ç çš„åŸºæœ¬å•ä½ã€‚\nThey include reusable functions, documentation that describes how to use them, and sample data.\nå®ƒä»¬åŒ…æ‹¬å¯é‡ç”¨çš„å‡½æ•°ã€æè¿°å¦‚ä½•ä½¿ç”¨å®ƒä»¬çš„æ–‡æ¡£ä»¥åŠç¤ºä¾‹æ•°æ®ã€‚\nR\nTo download R, go to CRAN, the comprehensive R archive network, https://cloud.r-project.org.\nè¦ä¸‹è½½ Rï¼Œè¯·è®¿é—® CRAN (the comprehensive R archive network)ï¼Œç½‘å€ä¸º https://cloud.r-project.orgã€‚\nA new major version of R comes out once a year, and there are 2-3 minor releases each year.\nR æ¯å¹´å‘å¸ƒä¸€ä¸ªæ–°çš„ä¸»ç‰ˆæœ¬ï¼Œå¹¶ä¸”æ¯å¹´æœ‰ 2-3 ä¸ªæ¬¡è¦ç‰ˆæœ¬å‘å¸ƒã€‚\nItâ€™s a good idea to update regularly.\nå®šæœŸæ›´æ–°æ˜¯ä¸ªå¥½ä¸»æ„ã€‚\nUpgrading can be a bit of a hassle, especially for major versions that require you to re-install all your packages, but putting it off only makes it worse.\nå‡çº§å¯èƒ½æœ‰ç‚¹éº»çƒ¦ï¼Œç‰¹åˆ«æ˜¯å¯¹äºéœ€è¦é‡æ–°å®‰è£…æ‰€æœ‰åŒ…çš„ä¸»ç‰ˆæœ¬ï¼Œä½†æ‹–å»¶åªä¼šè®©æƒ…å†µå˜å¾—æ›´ç³Ÿã€‚\nWe recommend R 4.2.0 or later for this book.\næœ¬ä¹¦æ¨èä½¿ç”¨ R 4.2.0 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚\nRStudio\nRStudio is an integrated development environment, or IDE, for R programming, which you can download from https://posit.co/download/rstudio-desktop/.\nRStudio æ˜¯ä¸€ä¸ªç”¨äº R ç¼–ç¨‹çš„é›†æˆå¼€å‘ç¯å¢ƒ (IDE)ï¼Œä½ å¯ä»¥ä» https://posit.co/download/rstudio-desktop/ ä¸‹è½½ã€‚\nRStudio is updated a couple of times a year, and it will automatically let you know when a new version is out, so thereâ€™s no need to check back.\nRStudio æ¯å¹´æ›´æ–°å‡ æ¬¡ï¼Œå½“æ–°ç‰ˆæœ¬å‘å¸ƒæ—¶å®ƒä¼šè‡ªåŠ¨é€šçŸ¥ä½ ï¼Œæ‰€ä»¥æ— éœ€åå¤æ£€æŸ¥ã€‚\nItâ€™s a good idea to upgrade regularly to take advantage of the latest and greatest features.\nå®šæœŸå‡çº§ä»¥åˆ©ç”¨æœ€æ–°æœ€å¥½çš„åŠŸèƒ½æ˜¯ä¸ªå¥½ä¸»æ„ã€‚\nFor this book, make sure you have at least RStudio 2022.02.0.\nå¯¹äºæœ¬ä¹¦ï¼Œè¯·ç¡®ä¿ä½ è‡³å°‘æ‹¥æœ‰ RStudio 2022.02.0 ç‰ˆæœ¬ã€‚\nWhen you start RStudio, FigureÂ 2, youâ€™ll see two key regions in the interface: the console pane and the output pane.\nå½“ä½ å¯åŠ¨ RStudio æ—¶ï¼Œå¦‚ FigureÂ 2 æ‰€ç¤ºï¼Œä½ ä¼šåœ¨ç•Œé¢ä¸­çœ‹åˆ°ä¸¤ä¸ªå…³é”®åŒºåŸŸï¼šæ§åˆ¶å°çª—æ ¼ (console pane) å’Œè¾“å‡ºçª—æ ¼ (output pane)ã€‚\nFor now, all you need to know is that you type the R code in the console pane and press enter to run it.\nç›®å‰ï¼Œä½ åªéœ€è¦çŸ¥é“åœ¨æ§åˆ¶å°çª—æ ¼ä¸­è¾“å…¥ R ä»£ç å¹¶æŒ‰ Enter é”®æ¥è¿è¡Œå®ƒã€‚\nYouâ€™ll learn more as we go along!1\néšç€å­¦ä¹ çš„æ·±å…¥ï¼Œä½ ä¼šå­¦åˆ°æ›´å¤šï¼2\n\n\n\n\n\n\n\nFigureÂ 2: The RStudio IDE has two key regions: type R code in the console pane on the left, and look for plots in the output pane on the right.\n\n\n\n\nThe tidyverse\nYouâ€™ll also need to install some R packages.\nä½ è¿˜éœ€è¦å®‰è£…ä¸€äº› R åŒ…ã€‚\nAn R package is a collection of functions, data, and documentation that extends the capabilities of base R.\nR åŒ… (package) æ˜¯ä¸€ä¸ªå‡½æ•°ã€æ•°æ®å’Œæ–‡æ¡£çš„é›†åˆï¼Œå®ƒæ‰©å±•äº†åŸºç¡€ R çš„åŠŸèƒ½ã€‚\nUsing packages is key to the successful use of R.\nä½¿ç”¨åŒ…æ˜¯æˆåŠŸä½¿ç”¨ R çš„å…³é”®ã€‚\nThe majority of the packages that you will learn in this book are part of the so-called tidyverse.\nä½ åœ¨æœ¬ä¹¦ä¸­å°†å­¦åˆ°çš„å¤§éƒ¨åˆ†åŒ…éƒ½å±äºæ‰€è°“çš„ tidyverseã€‚\nAll packages in the tidyverse share a common philosophy of data and R programming and are designed to work together.\ntidyverse ä¸­çš„æ‰€æœ‰åŒ…éƒ½å…±äº«ä¸€ç§é€šç”¨çš„æ•°æ®å’Œ R ç¼–ç¨‹ç†å¿µï¼Œå¹¶ä¸”è¢«è®¾è®¡ä¸ºå¯ä»¥ååŒå·¥ä½œã€‚\nYou can install the complete tidyverse with a single line of code:\nä½ å¯ä»¥ç”¨ä¸€è¡Œä»£ç å®‰è£…å®Œæ•´çš„ tidyverseï¼š\n\ninstall.packages(\"tidyverse\")\n\nOn your computer, type that line of code in the console, and then press enter to run it.\nåœ¨ä½ çš„è®¡ç®—æœºä¸Šï¼Œåœ¨æ§åˆ¶å°ä¸­è¾“å…¥é‚£è¡Œä»£ç ï¼Œç„¶åæŒ‰ Enter é”®è¿è¡Œå®ƒã€‚\nR will download the packages from CRAN and install them on your computer.\nR å°†ä» CRAN ä¸‹è½½è¿™äº›åŒ…å¹¶å®‰è£…åˆ°ä½ çš„è®¡ç®—æœºä¸Šã€‚\nYou will not be able to use the functions, objects, or help files in a package until you load it with library().\nåœ¨ä½¿ç”¨ library() åŠ è½½åŒ…ä¹‹å‰ï¼Œä½ å°†æ— æ³•ä½¿ç”¨å…¶ä¸­çš„å‡½æ•°ã€å¯¹è±¡æˆ–å¸®åŠ©æ–‡ä»¶ã€‚\nOnce you have installed a package, you can load it using the library() function:\nå®‰è£…åŒ…åï¼Œä½ å¯ä»¥ä½¿ç”¨ library() å‡½æ•°åŠ è½½å®ƒï¼š\n\nlibrary(tidyverse)\n#&gt; â”€â”€ Attaching core tidyverse packages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse 2.0.0 â”€â”€\n#&gt; âœ” dplyr     1.1.4     âœ” readr     2.1.5\n#&gt; âœ” forcats   1.0.0     âœ” stringr   1.5.1\n#&gt; âœ” ggplot2   3.5.2     âœ” tibble    3.3.0\n#&gt; âœ” lubridate 1.9.4     âœ” tidyr     1.3.1\n#&gt; âœ” purrr     1.0.4     \n#&gt; â”€â”€ Conflicts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse_conflicts() â”€â”€\n#&gt; âœ– dplyr::filter() masks stats::filter()\n#&gt; âœ– dplyr::lag()    masks stats::lag()\n#&gt; â„¹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nThis tells you that tidyverse loads nine packages: dplyr, forcats, ggplot2, lubridate, purrr, readr, stringr, tibble, tidyr.\nè¿™ä¼šå‘Šè¯‰ä½  tidyverse åŠ è½½äº†ä¹ä¸ªåŒ…ï¼šdplyrã€forcatsã€ggplot2ã€lubridateã€purrrã€readrã€stringrã€tibbleã€tidyrã€‚\nThese are considered the core of the tidyverse because youâ€™ll use them in almost every analysis.\nè¿™äº›è¢«è®¤ä¸ºæ˜¯ tidyverse çš„ æ ¸å¿ƒï¼Œå› ä¸ºä½ å‡ ä¹åœ¨æ¯æ¬¡åˆ†æä¸­éƒ½ä¼šä½¿ç”¨å®ƒä»¬ã€‚\nPackages in the tidyverse change fairly frequently.\ntidyverse ä¸­çš„åŒ…å˜åŒ–ç›¸å½“é¢‘ç¹ã€‚\nYou can see if updates are available by running tidyverse_update().\nä½ å¯ä»¥è¿è¡Œ tidyverse_update() æ¥æŸ¥çœ‹æ˜¯å¦æœ‰å¯ç”¨çš„æ›´æ–°ã€‚\nOther packages\nThere are many other excellent packages that are not part of the tidyverse because they solve problems in a different domain or are designed with a different set of underlying principles.\nè¿˜æœ‰è®¸å¤šå…¶ä»–ä¼˜ç§€çš„åŒ…ä¸å±äº tidyverseï¼Œå› ä¸ºå®ƒä»¬è§£å†³çš„æ˜¯ä¸åŒé¢†åŸŸçš„é—®é¢˜ï¼Œæˆ–è€…éµå¾ªä¸€å¥—ä¸åŒçš„åŸºæœ¬åŸåˆ™è¿›è¡Œè®¾è®¡ã€‚\nThis doesnâ€™t make them better or worse; it just makes them different.\nè¿™å¹¶ä¸æ˜¯è¯´å®ƒä»¬æ›´å¥½æˆ–æ›´å·®ï¼Œåªæ˜¯å®ƒä»¬ä¸åŒã€‚\nIn other words, the complement to the tidyverse is not the messyverse but many other universes of interrelated packages.\næ¢å¥è¯è¯´ï¼Œä¸ tidyverse äº’è¡¥çš„ä¸æ˜¯ messyverseï¼ˆæ··ä¹±å®‡å®™ï¼‰ï¼Œè€Œæ˜¯è®¸å¤šå…¶ä»–ç›¸äº’å…³è”çš„åŒ…çš„å®‡å®™ã€‚\nAs you tackle more data science projects with R, youâ€™ll learn new packages and new ways of thinking about data.\néšç€ä½ ç”¨ R è§£å†³æ›´å¤šçš„æ•°æ®ç§‘å­¦é¡¹ç›®ï¼Œä½ å°†å­¦ä¹ æ–°çš„åŒ…å’Œæ–°çš„æ•°æ®æ€ç»´æ–¹å¼ã€‚\nWeâ€™ll use many packages from outside the tidyverse in this book. æœ¬ä¹¦ä¸­æˆ‘ä»¬å°†ä½¿ç”¨è®¸å¤šæ¥è‡ª tidyverse ä¹‹å¤–çš„åŒ…ã€‚\nFor example, weâ€™ll use the following packages because they provide interesting datasets for us to work with in the process of learning R:\nä¾‹å¦‚ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä»¥ä¸‹åŒ…ï¼Œå› ä¸ºå®ƒä»¬åœ¨æˆ‘ä»¬å­¦ä¹  R çš„è¿‡ç¨‹ä¸­æä¾›äº†æœ‰è¶£çš„æ•°æ®é›†ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼š\n\ninstall.packages(\nÂ  c(\"arrow\", \"babynames\", \"curl\", \"duckdb\", \"gapminder\",Â \nÂ  Â  \"ggrepel\", \"ggridges\", \"ggthemes\", \"hexbin\", \"janitor\", \"Lahman\",Â \nÂ  Â  \"leaflet\", \"maps\", \"nycflights13\", \"openxlsx\", \"palmerpenguins\",Â \nÂ  Â  \"repurrrsive\", \"tidymodels\", \"writexl\")\nÂ  )\n\nWeâ€™ll also use a selection of other packages for one off examples.\næˆ‘ä»¬è¿˜å°†ä¸ºä¸€äº›ä¸€æ¬¡æ€§çš„ä¾‹å­ä½¿ç”¨ä¸€äº›å…¶ä»–çš„åŒ…ã€‚\nYou donâ€™t need to install them now, just remember that whenever you see an error like this:\nä½ ç°åœ¨ä¸éœ€è¦å®‰è£…å®ƒä»¬ï¼Œåªéœ€è®°ä½ï¼Œå½“ä½ çœ‹åˆ°å¦‚ä¸‹é”™è¯¯æ—¶ï¼š\n\nlibrary(ggrepel)\n#&gt; Error in library(ggrepel) : there is no package called â€˜ggrepelâ€™\n\nYou need to run install.packages(\"ggrepel\") to install the package.\nä½ éœ€è¦è¿è¡Œ install.packages(\"ggrepel\") æ¥å®‰è£…è¯¥åŒ…ã€‚",
    "crumbs": [
      "Introduction"
    ]
  },
  {
    "objectID": "intro.html#running-r-code",
    "href": "intro.html#running-r-code",
    "title": "Introduction",
    "section": "Running R code",
    "text": "Running R code\nThe previous section showed you several examples of running R code.\nä¸Šä¸€èŠ‚å‘ä½ å±•ç¤ºäº†å‡ ä¸ªè¿è¡Œ R ä»£ç çš„ä¾‹å­ã€‚\nThe code in the book looks like this:\nä¹¦ä¸­çš„ä»£ç çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š\n\n1 + 2\n#&gt; [1] 3\n\nIf you run the same code in your local console, it will look like this:\nå¦‚æœä½ åœ¨æœ¬åœ°æ§åˆ¶å°ä¸­è¿è¡Œç›¸åŒçš„ä»£ç ï¼Œå®ƒä¼šçœ‹èµ·æ¥åƒè¿™æ ·ï¼š\nÂ  Â  Â  Â  Â  &gt; 1 + 2 [1] 3\nThere are two main differences.\nè¿™é‡Œæœ‰ä¸¤ä¸ªä¸»è¦åŒºåˆ«ã€‚\nIn your console, you type after the &gt;, called the prompt; we donâ€™t show the prompt in the book.\nåœ¨ä½ çš„æ§åˆ¶å°ä¸­ï¼Œä½ åœ¨ &gt;ï¼ˆç§°ä¸º æç¤ºç¬¦ (prompt)ï¼‰åé¢è¾“å…¥ï¼›æˆ‘ä»¬åœ¨ä¹¦ä¸­ä¸æ˜¾ç¤ºæç¤ºç¬¦ã€‚\nIn the book, the output is commented out with #&gt;; in your console, it appears directly after your code.\nåœ¨ä¹¦ä¸­ï¼Œè¾“å‡ºç”¨ #&gt; æ³¨é‡Šæ‰ï¼›åœ¨ä½ çš„æ§åˆ¶å°ä¸­ï¼Œå®ƒç›´æ¥å‡ºç°åœ¨ä½ çš„ä»£ç ä¹‹åã€‚\nThese two differences mean that if youâ€™re working with an electronic version of the book, you can easily copy code out of the book and paste it into the console.\nè¿™ä¸¤ä¸ªåŒºåˆ«æ„å‘³ç€ï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯æœ¬ä¹¦çš„ç”µå­ç‰ˆï¼Œä½ å¯ä»¥è½»æ¾åœ°ä»ä¹¦ä¸­å¤åˆ¶ä»£ç å¹¶ç²˜è´´åˆ°æ§åˆ¶å°ä¸­ã€‚\nThroughout the book, we use a consistent set of conventions to refer to code:\nåœ¨æ•´æœ¬ä¹¦ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€å¥—ä¸€è‡´çš„çº¦å®šæ¥å¼•ç”¨ä»£ç ï¼š\n-Â  Â Functions are displayed in a code font and followed by parentheses, like sum() or mean().\n-Â  Â å‡½æ•°ä»¥ä»£ç å­—ä½“æ˜¾ç¤ºï¼Œå¹¶åè·Ÿæ‹¬å·ï¼Œå¦‚ sum() æˆ– mean()ã€‚\n-Â  Â Other R objects (such as data or function arguments) are in a code font, without parentheses, like flights or x.\n-Â  Â å…¶ä»– R å¯¹è±¡ï¼ˆä¾‹å¦‚æ•°æ®æˆ–å‡½æ•°å‚æ•°ï¼‰ä½¿ç”¨ä»£ç å­—ä½“ï¼Œä¸å¸¦æ‹¬å·ï¼Œå¦‚ flights æˆ– xã€‚\n-Â  Â Sometimes, to make it clear which package an object comes from, weâ€™ll use the package name followed by two colons, like dplyr::mutate() or nycflights13::flights. Â  Â  This is also valid R code.\n-Â  Â æœ‰æ—¶ï¼Œä¸ºäº†æ˜ç¡®ä¸€ä¸ªå¯¹è±¡æ¥è‡ªå“ªä¸ªåŒ…ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨åŒ…ååè·Ÿä¸¤ä¸ªå†’å·çš„å½¢å¼ï¼Œå¦‚ dplyr::mutate() æˆ– nycflights13::flightsã€‚è¿™ä¹Ÿæ˜¯æœ‰æ•ˆçš„ R ä»£ç ã€‚",
    "crumbs": [
      "Introduction"
    ]
  },
  {
    "objectID": "intro.html#acknowledgments",
    "href": "intro.html#acknowledgments",
    "title": "Introduction",
    "section": "Acknowledgments",
    "text": "Acknowledgments\nThis book isnâ€™t just the product of Hadley, Mine, and Garrett but is the result of many conversations (in person and online) that weâ€™ve had with many people in the R community.\næœ¬ä¹¦ä¸ä»…ä»…æ˜¯ Hadleyã€Mine å’Œ Garrett çš„æˆæœï¼Œä¹Ÿæ˜¯æˆ‘ä»¬ä¸ R ç¤¾åŒºä¸­è®¸å¤šäººè¿›è¡Œå¤šæ¬¡ï¼ˆé¢å¯¹é¢å’Œåœ¨çº¿ï¼‰å¯¹è¯çš„ç»“æœã€‚\nWeâ€™re incredibly grateful for all the conversations weâ€™ve had with yâ€™all; thank you so much!\næˆ‘ä»¬éå¸¸æ„Ÿè°¢ä¸å¤§å®¶è¿›è¡Œçš„æ‰€æœ‰å¯¹è¯ï¼›éå¸¸æ„Ÿè°¢ä½ ä»¬ï¼\nThis book was written in the open, and many people contributed via pull requests. A special thanks to all 259 of you who contributed improvements via GitHub pull requests (in alphabetical order by username): æœ¬ä¹¦æ˜¯å…¬å¼€å†™æˆçš„ï¼Œè®¸å¤šäººé€šè¿‡æ‹‰å–è¯·æ±‚ (pull requests) åšå‡ºäº†è´¡çŒ®ã€‚ç‰¹åˆ«æ„Ÿè°¢æ‰€æœ‰é€šè¿‡ GitHub æ‹‰å–è¯·æ±‚ï¼ˆæŒ‰ç”¨æˆ·åé¦–å­—æ¯æ’åºï¼‰ä¸ºæœ¬ä¹¦åšå‡ºæ”¹è¿›çš„ 259 ä½è´¡çŒ®è€…ï¼š@a-rosenberg, Tim Becker (@a2800276), Abinash Satapathy (@Abinashbunty), Adam Gruer (@adam-gruer), adi pradhan (@adidoit), A. s. (@Adrianzo), Aep Hidyatuloh (@aephidayatuloh), Andrea Gilardi (@agila5), Ajay Deonarine (@ajay-d), @AlanFeder, Daihe Sui (@alansuidaihe), @alberto-agudo, @AlbertRapp, @aleloi, pete (@alonzi), Alex (@ALShum), Andrew M. (@amacfarland), Andrew Landgraf (@andland), @andyhuynh92, Angela Li (@angela-li), Antti Rask (@AnttiRask), LOU Xun (@aquarhead), @ariespirgel, @august-18, Michael Henry (@aviast), Azza Ahmed (@azzaea), Steven Moran (@bambooforest), Brian G. Barkley (@BarkleyBG), Mara Averick (@batpigandme), Oluwafemi OYEDELE (@BB1464), Brent Brewington (@bbrewington), Bill Behrman (@behrman), Ben Herbertson (@benherbertson), Ben Marwick (@benmarwick), Ben Steinberg (@bensteinberg), Benjamin Yeh (@bentyeh), Betul Turkoglu (@betulturkoglu), Brandon Greenwell (@bgreenwell), Bianca Peterson (@BinxiePeterson), Birger Niklas (@BirgerNi), Brett Klamer (@bklamer), @boardtc, Christian (@c-hoh), Caddy (@caddycarine), Camille V Leonard (@camillevleonard), @canovasjm, Cedric Batailler (@cedricbatailler), Christina Wei (@christina-wei), Christian Mongeau (@chrMongeau), Cooper Morris (@coopermor), Colin Gillespie (@csgillespie), Rademeyer Vermaak (@csrvermaak), Chloe Thierstein (@cthierst), Chris Saunders (@ctsa), Abhinav Singh (@curious-abhinav), Curtis Alexander (@curtisalexander), Christian G. Warden (@cwarden), Charlotte Wickham (@cwickham), Kenny Darrell (@darrkj), David Kane (@davidkane9), David (@davidrsch), David Rubinger (@davidrubinger), David Clark (@DDClark), Derwin McGeary (@derwinmcgeary), Daniel Gromer (@dgromer), @Divider85, @djbirke, Danielle Navarro (@djnavarro), Russell Shean (@DOH-RPS1303), Zhuoer Dong (@dongzhuoer), Devin Pastoor (@dpastoor), @DSGeoff, Devarshi Thakkar (@dthakkar09), Julian During (@duju211), Dylan Cashman (@dylancashman), Dirk Eddelbuettel (@eddelbuettel), Edwin Thoen (@EdwinTh), Ahmed El-Gabbas (@elgabbas), Henry Webel (@enryH), Ercan Karadas (@ercan7), Eric Kitaif (@EricKit), Eric Watt (@ericwatt), Erik Erhardt (@erikerhardt), Etienne B. Racine (@etiennebr), Everett Robinson (@evjrob), @fellennert, Flemming Miguel (@flemmingmiguel), Floris Vanderhaeghe (@florisvdh), @funkybluehen, @gabrivera, Garrick Aden-Buie (@gadenbuie), Peter Ganong (@ganong123), Gerome Meyer (@GeroVanMi), Gleb Ebert (@gl-eb), Josh Goldberg (@GoldbergData), bahadir cankardes (@gridgrad), Gustav W Delius (@gustavdelius), Hao Chen (@hao-trivago), Harris McGehee (@harrismcgehee), @hendrikweisser, Hengni Cai (@hengnicai), Iain (@Iain-S), Ian Sealy (@iansealy), Ian Lyttle (@ijlyttle), Ivan Krukov (@ivan-krukov), Jacob Kaplan (@jacobkap), Jazz Weisman (@jazzlw), John Blischak (@jdblischak), John D. Storey (@jdstorey), Gregory Jefferis (@jefferis), Jeffrey Stevens (@JeffreyRStevens), è’‹é›¨è’™ (@JeldorPKU), Jennifer (Jenny) Bryan (@jennybc), Jen Ren (@jenren), Jeroen Janssens (@jeroenjanssens), @jeromecholewa, Janet Wesner (@jilmun), Jim Hester (@jimhester), JJ Chen (@jjchern), Jacek Kolacz (@jkolacz), Joanne Jang (@joannejang), @johannes4998, John Sears (@johnsears), @jonathanflint, Jon Calder (@jonmcalder), Jonathan Page (@jonpage), Jon Harmon (@jonthegeek), JooYoung Seo (@jooyoungseo), Justinas Petuchovas (@jpetuchovas), Jordan (@jrdnbradford), Jeffrey Arnold (@jrnold), Jose Roberto Ayala Solares (@jroberayalas), Joyce Robbins (@jtr13), @juandering, Julia Stewart Lowndes (@jules32), Sonja (@kaetschap), Kara Woo (@karawoo), Katrin Leinweber (@katrinleinweber), Karandeep Singh (@kdpsingh), Kevin Perese (@kevinxperese), Kevin Ferris (@kferris10), Kirill Sevastyanenko (@kirillseva), Jonathan Kitt (@KittJonathan), @koalabearski, Kirill MÃ¼ller (@krlmlr), RafaÅ‚ Kucharski (@kucharsky), Kevin Wright (@kwstat), Noah Landesberg (@landesbergn), Lawrence Wu (@lawwu), @lindbrook, Luke W Johnston (@lwjohnst86), Kara de la Marck (@MarckK), Kunal Marwaha (@marwahaha), Matan Hakim (@matanhakim), Matthias Liew (@MatthiasLiew), Matt Wittbrodt (@MattWittbrodt), Mauro Lepore (@maurolepore), Mark Beveridge (@mbeveridge), @mcewenkhundi, mcsnowface, PhD (@mcsnowface), Matt Herman (@mfherman), Michael Boerman (@michaelboerman), Mitsuo Shiota (@mitsuoxv), Matthew Hendrickson (@mjhendrickson), @MJMarshall, Misty Knight-Finley (@mkfin7), Mohammed Hamdy (@mmhamdy), Maxim Nazarov (@mnazarov), Maria Paula Caldas (@mpaulacaldas), Mustafa Ascha (@mustafaascha), Nelson Areal (@nareal), Nate Olson (@nate-d-olson), Nathanael (@nateaff), @nattalides, Ned Western (@NedJWestern), Nick Clark (@nickclark1000), @nickelas, Nirmal Patel (@nirmalpatel), Nischal Shrestha (@nischalshrestha), Nicholas Tierney (@njtierney), Jakub Nowosad (@Nowosad), Nick Pullen (@nstjhp), @olivier6088, Olivier Cailloux (@oliviercailloux), Robin Penfold (@p0bs), Pablo E. Garcia (@pabloedug), Paul Adamson (@padamson), Penelope Y (@penelopeysm), Peter Hurford (@peterhurford), Peter Baumgartner (@petzi53), Patrick Kennedy (@pkq), Pooya Taherkhani (@pooyataher), Y. Yu (@PursuitOfDataScience), Radu Grosu (@radugrosu), Ranae Dietzel (@Ranae), Ralph Straumann (@rastrau), Rayna M Harris (@raynamharris), @ReeceGoding, Robin Gertenbach (@rgertenbach), Jajo (@RIngyao), Riva Quiroga (@rivaquiroga), Richard Knight (@RJHKnight), Richard Zijdeman (@rlzijdeman), @robertchu03, Robin Kohrs (@RobinKohrs), Robin (@Robinlovelace), Emily Robinson (@robinsones), Rob Tenorio (@robtenorio), Rod Mazloomi (@RodAli), Rohan Alexander (@RohanAlexander), Romero Morais (@RomeroBarata), Albert Y. Kim (@rudeboybert), Saghir (@saghirb), Hojjat Salmasian (@salmasian), Jonas (@sauercrowd), Vebash Naidoo (@sciencificity), Seamus McKinsey (@seamus-mckinsey), @seanpwilliams, Luke Smith (@seasmith), Matthew Sedaghatfar (@sedaghatfar), Sebastian Kraus (@sekR4), Sam Firke (@sfirke), Shannon Ellis (@ShanEllis), @shoili, Christian Heinrich (@Shurakai), Sâ€™busiso Mkhondwane (@sibusiso16), SM Raiyyan (@sm-raiyyan), Jakob Krigovsky (@sonicdoe), Stephan Koenig (@stephan-koenig), Stephen Balogun (@stephenbalogun), Steven M. Mortimer (@StevenMMortimer), StÃ©phane Guillou (@stragu), Sulgi Kim (@sulgik), Sergiusz Bleja (@svenski), Tal Galili (@talgalili), Alec Fisher (@Taurenamo), Todd Gerarden (@tgerarden), Tom Godfrey (@thomasggodfrey), Tim Broderick (@timbroderick), Tim Waterhouse (@timwaterhouse), TJ Mahr (@tjmahr), Thomas Klebel (@tklebel), Tom Prior (@tomjamesprior), Terence Teo (@tteo), @twgardner2, Ulrik Lyngs (@ulyngs), Shinya Uryu (@uribo), Martin Van der Linden (@vanderlindenma), Walter Somerville (@waltersom), @werkstattcodes, Will Beasley (@wibeasley), Yihui Xie (@yihui), Yiming (Paul) Li (@yimingli), @yingxingwu, Hiroaki Yutani (@yutannihilation), Yu Yu Aung (@yuyu-aung), Zach Bogart (@zachbogart), @zeal626, Zeki Akyol (@zekiakyol).",
    "crumbs": [
      "Introduction"
    ]
  },
  {
    "objectID": "intro.html#colophon",
    "href": "intro.html#colophon",
    "title": "Introduction",
    "section": "Colophon",
    "text": "Colophon\nAn online version of this book is available at https://r4ds.hadley.nz.\næœ¬ä¹¦çš„åœ¨çº¿ç‰ˆæœ¬å¯åœ¨ https://r4ds.hadley.nz æŸ¥çœ‹ã€‚\nIt will continue to evolve in between reprints of the physical book.\nåœ¨å®ä½“ä¹¦å†ç‰ˆä¹‹é—´ï¼Œå®ƒå°†ç»§ç»­å‘å±•ã€‚\nThe source of the book is available at https://github.com/hadley/r4ds.\næœ¬ä¹¦çš„æºä»£ç å¯åœ¨ https://github.com/hadley/r4ds æ‰¾åˆ°ã€‚\nThe book is powered by Quarto, which makes it easy to write books that combine text and executable code.\næœ¬ä¹¦ç”± Quarto æä¾›æ”¯æŒï¼Œå®ƒä½¿å¾—ç¼–å†™ç»“åˆæ–‡æœ¬å’Œå¯æ‰§è¡Œä»£ç çš„ä¹¦ç±å˜å¾—å®¹æ˜“ã€‚",
    "crumbs": [
      "Introduction"
    ]
  },
  {
    "objectID": "intro.html#footnotes",
    "href": "intro.html#footnotes",
    "title": "Introduction",
    "section": "",
    "text": "If youâ€™d like a comprehensive overview of all of RStudioâ€™s features, see the RStudio User Guide at https://docs.posit.co/ide/user.â†©ï¸\nIf youâ€™d like a comprehensive overview of all of RStudioâ€™s features, see the RStudio User Guide at https://docs.posit.co/ide/user.â†©ï¸",
    "crumbs": [
      "Introduction"
    ]
  },
  {
    "objectID": "whole-game.html",
    "href": "whole-game.html",
    "title": "Whole game",
    "section": "",
    "text": "Our goal in this part of the book is to give you a rapid overview of the main tools of data science: importing, tidying, transforming, and visualizing data, as shown in FigureÂ 1. We want to show you the â€œwhole gameâ€ of data science giving you just enough of all the major pieces so that you can tackle real, if simple, datasets. The later parts of the book will hit each of these topics in more depth, increasing the range of data science challenges that you can tackle.\næœ¬ä¹¦è¿™éƒ¨åˆ†çš„ç›®æ ‡æ˜¯å¿«é€Ÿæ¦‚è¿°æ•°æ®ç§‘å­¦çš„ä¸»è¦å·¥å…·ï¼šå¯¼å…¥ (importing)ã€æ•´ç† (tidying)ã€è½¬æ¢ (transforming) å’Œå¯è§†åŒ–æ•°æ® (visualizing data)ï¼Œå¦‚ FigureÂ 1 æ‰€ç¤ºã€‚æˆ‘ä»¬å¸Œæœ›å‘ä½ å±•ç¤ºæ•°æ®ç§‘å­¦çš„â€œå…¨è²Œâ€ (whole game)ï¼Œä¸ºä½ æä¾›æ‰€æœ‰ä¸»è¦éƒ¨åˆ†çš„è¶³å¤ŸçŸ¥è¯†ï¼Œä»¥ä¾¿ä½ å¯ä»¥å¤„ç†çœŸå®çš„ï¼ˆå°½ç®¡æ˜¯ç®€å•çš„ï¼‰æ•°æ®é›†ã€‚æœ¬ä¹¦çš„åç»­éƒ¨åˆ†å°†æ›´æ·±å…¥åœ°æ¢è®¨è¿™äº›ä¸»é¢˜ï¼Œå¢åŠ ä½ å¯ä»¥åº”å¯¹çš„æ•°æ®ç§‘å­¦æŒ‘æˆ˜çš„èŒƒå›´ã€‚\n\n\n\n\n\n\n\nFigureÂ 1: In this section of the book, youâ€™ll learn how to import, tidy, transform, and visualize data.\n\n\n\n\nFour chapters focus on the tools of data science:\næœ‰å››ç« å†…å®¹é‡ç‚¹ä»‹ç»æ•°æ®ç§‘å­¦çš„å·¥å…·ï¼š\n-Â  Â Visualization is a great place to start with R programming, because the payoff is so clear: you get to make elegant and informative plots that help you understand data. Â  Â  In 1Â  Data visualization youâ€™ll dive into visualization, learning the basic structure of a ggplot2 plot, and powerful techniques for turning data into plots.\n\nå¯è§†åŒ–æ˜¯å¼€å§‹ R ç¼–ç¨‹çš„ç»ä½³èµ·ç‚¹ï¼Œå› ä¸ºå›æŠ¥éå¸¸æ˜ç¡®ï¼šä½ å¯ä»¥åˆ¶ä½œå‡ºä¼˜é›…ä¸”ä¿¡æ¯ä¸°å¯Œçš„å›¾è¡¨ï¼Œå¸®åŠ©ä½ ç†è§£æ•°æ®ã€‚åœ¨ 1Â  Data visualization ä¸­ï¼Œä½ å°†æ·±å…¥å­¦ä¹ å¯è§†åŒ–ï¼Œäº†è§£ ggplot2 å›¾çš„åŸºæœ¬ç»“æ„ä»¥åŠå°†æ•°æ®è½¬åŒ–ä¸ºå›¾è¡¨çš„å¼ºå¤§æŠ€æœ¯ã€‚\n\n-Â  Â Visualization alone is typically not enough, so in 3Â  æ•°æ®è½¬æ¢, youâ€™ll learn the key verbs that allow you to select important variables, filter out key observations, create new variables, and compute summaries.\n\né€šå¸¸ä»…æœ‰å¯è§†åŒ–æ˜¯ä¸å¤Ÿçš„ï¼Œå› æ­¤åœ¨ 3Â  æ•°æ®è½¬æ¢ ä¸­ï¼Œä½ å°†å­¦ä¹ ä¸€äº›å…³é”®çš„â€œåŠ¨è¯â€ (verbs)ï¼Œå®ƒä»¬èƒ½è®©ä½ é€‰æ‹©é‡è¦çš„å˜é‡ã€ç­›é€‰å‡ºå…³é”®çš„è§‚æµ‹å€¼ã€åˆ›å»ºæ–°å˜é‡ä»¥åŠè®¡ç®—æ‘˜è¦ã€‚\n\n-Â  Â In 5Â  æ•°æ®æ•´ç†, youâ€™ll learn about tidy data, a consistent way of storing your data that makes transformation, visualization, and modelling easier. Â  Â  Youâ€™ll learn the underlying principles, and how to get your data into a tidy form.\n\nåœ¨ 5Â  æ•°æ®æ•´ç† ä¸­ï¼Œä½ å°†å­¦ä¹ æ•´æ´æ•°æ® (tidy data)ï¼Œè¿™æ˜¯ä¸€ç§ä¸€è‡´çš„æ•°æ®å­˜å‚¨æ–¹å¼ï¼Œå¯ä»¥ä½¿è½¬æ¢ã€å¯è§†åŒ–å’Œå»ºæ¨¡å˜å¾—æ›´åŠ å®¹æ˜“ã€‚ä½ å°†å­¦ä¹ å…¶åŸºæœ¬åŸåˆ™ï¼Œä»¥åŠå¦‚ä½•å°†ä½ çš„æ•°æ®æ•´ç†æˆæ•´æ´çš„å½¢å¼ã€‚\n\n-Â  Â Before you can transform and visualize your data, you need to first get your data into R. Â  Â  In 7Â  æ•°æ®å¯¼å…¥ youâ€™ll learn the basics of getting .csv files into R.\n\nåœ¨è½¬æ¢å’Œå¯è§†åŒ–æ•°æ®ä¹‹å‰ï¼Œä½ é¦–å…ˆéœ€è¦å°†æ•°æ®å¯¼å…¥ Rã€‚åœ¨ 7Â  æ•°æ®å¯¼å…¥ ä¸­ï¼Œä½ å°†å­¦ä¹ å°† .csv æ–‡ä»¶å¯¼å…¥ R çš„åŸºç¡€çŸ¥è¯†ã€‚\n\nNestled among these chapters are four other chapters that focus on your R workflow. In 2Â  Workflow: basics, 4Â  å·¥ä½œæµï¼šä»£ç é£æ ¼, and 6Â  å·¥ä½œæµï¼šè„šæœ¬å’Œé¡¹ç›® youâ€™ll learn good workflow practices for writing and organizing your R code. These will set you up for success in the long run, as theyâ€™ll give you the tools to stay organized when you tackle real projects. Finally, 8Â  å·¥ä½œæµï¼šè·å–å¸®åŠ© will teach you how to get help and keep learning.\nåœ¨è¿™äº›ç« èŠ‚ä¹‹é—´ï¼Œè¿˜æœ‰å¦å¤–å››ç« ä¸“æ³¨äºä½ çš„ R å·¥ä½œæµç¨‹ (workflow)ã€‚åœ¨ 2Â  Workflow: basicsã€4Â  å·¥ä½œæµï¼šä»£ç é£æ ¼ å’Œ 6Â  å·¥ä½œæµï¼šè„šæœ¬å’Œé¡¹ç›® ä¸­ï¼Œä½ å°†å­¦ä¹ ç¼–å†™å’Œç»„ç»‡ R ä»£ç çš„è‰¯å¥½å·¥ä½œæµç¨‹å®è·µã€‚ä»é•¿è¿œæ¥çœ‹ï¼Œè¿™äº›å°†ä¸ºä½ å¥ å®šæˆåŠŸçš„åŸºç¡€ï¼Œå› ä¸ºå®ƒä»¬ä¸ºä½ æä¾›äº†åœ¨å¤„ç†å®é™…é¡¹ç›®æ—¶ä¿æŒæ¡ç†çš„å·¥å…·ã€‚æœ€åï¼Œ8Â  å·¥ä½œæµï¼šè·å–å¸®åŠ© å°†æ•™ä½ å¦‚ä½•è·å–å¸®åŠ©å¹¶æŒç»­å­¦ä¹ ã€‚",
    "crumbs": [
      "Whole game"
    ]
  },
  {
    "objectID": "data-visualize.html",
    "href": "data-visualize.html",
    "title": "1Â  Data visualization",
    "section": "",
    "text": "1.1 Introduction\nR has several systems for making graphs, but ggplot2 is one of the most elegant and most versatile. ggplot2 implements the grammar of graphics, a coherent system for describing and building graphs. With ggplot2, you can do more and faster by learning one system and applying it in many places.\nR æœ‰å¤šç§åˆ¶å›¾ç³»ç»Ÿï¼Œä½† ggplot2 æ˜¯å…¶ä¸­æœ€ä¼˜é›…ã€åŠŸèƒ½æœ€ä¸°å¯Œçš„ç³»ç»Ÿä¹‹ä¸€ã€‚ggplot2 å®ç°äº†å›¾å½¢è¯­æ³• (grammar of graphics)ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºæè¿°å’Œæ„å»ºå›¾å½¢çš„è¿è´¯ç³»ç»Ÿã€‚å€ŸåŠ© ggplot2ï¼Œä½ å¯ä»¥é€šè¿‡å­¦ä¹ ä¸€ä¸ªç³»ç»Ÿå¹¶å°†å…¶åº”ç”¨äºè®¸å¤šåœ°æ–¹ï¼Œä»è€Œæ›´å¿«åœ°å®Œæˆæ›´å¤šå·¥ä½œã€‚\nThis chapter will teach you how to visualize your data using ggplot2. We will start by creating a simple scatterplot and use that to introduce aesthetic mappings and geometric objects â€“ the fundamental building blocks of ggplot2. We will then walk you through visualizing distributions of single variables as well as visualizing relationships between two or more variables. Weâ€™ll finish off with saving your plots and troubleshooting tips.\næœ¬ç« å°†æ•™ä½ å¦‚ä½•ä½¿ç”¨ ggplot2 å¯è§†åŒ–æ•°æ®ã€‚æˆ‘ä»¬å°†ä»åˆ›å»ºä¸€ä¸ªç®€å•çš„æ•£ç‚¹å›¾å¼€å§‹ï¼Œå¹¶ç”¨å®ƒæ¥ä»‹ç»ç¾å­¦æ˜ å°„ (aesthetic mappings) å’Œå‡ ä½•å¯¹è±¡ (geometric objects)â€”â€”ggplot2 çš„åŸºæœ¬æ„å»ºæ¨¡å—ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†å¼•å¯¼ä½ å­¦ä¹ å¦‚ä½•å¯è§†åŒ–å•ä¸ªå˜é‡çš„åˆ†å¸ƒä»¥åŠä¸¤ä¸ªæˆ–å¤šä¸ªå˜é‡ä¹‹é—´çš„å…³ç³»ã€‚æœ€åï¼Œæˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•ä¿å­˜ä½ çš„å›¾è¡¨ä»¥åŠä¸€äº›æ•…éšœæ’é™¤æŠ€å·§ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>1</span>Â  <span class='chapter-title'>Data visualization</span>"
    ]
  },
  {
    "objectID": "data-visualize.html#introduction",
    "href": "data-visualize.html#introduction",
    "title": "1Â  Data visualization",
    "section": "",
    "text": "â€œThe simple graph has brought more information to the data analystâ€™s mind than any other device.â€ â€” John Tukey\n\n\nâ€œç®€å•çš„å›¾å½¢ä¸ºæ•°æ®åˆ†æå¸ˆå¸¦æ¥çš„ä¿¡æ¯æ¯”ä»»ä½•å…¶ä»–è®¾å¤‡éƒ½å¤šã€‚â€ â€” John Tukey\n\n\n\n\n\n\n1.1.1 Prerequisites\nThis chapter focuses on ggplot2, one of the core packages in the tidyverse. To access the datasets, help pages, and functions used in this chapter, load the tidyverse by running:\næœ¬ç« é‡ç‚¹ä»‹ç» ggplot2ï¼Œå®ƒæ˜¯ tidyverse ä¸­çš„æ ¸å¿ƒåŒ…ä¹‹ä¸€ã€‚è¦è®¿é—®æœ¬ç« ä¸­ä½¿ç”¨çš„æ•°æ®é›†ã€å¸®åŠ©é¡µé¢å’Œå‡½æ•°ï¼Œè¯·é€šè¿‡è¿è¡Œä»¥ä¸‹ä»£ç åŠ è½½ tidyverseï¼š\n\nlibrary(tidyverse)\n#&gt; â”€â”€ Attaching core tidyverse packages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse 2.0.0 â”€â”€\n#&gt; âœ” dplyr     1.1.4     âœ” readr     2.1.5\n#&gt; âœ” forcats   1.0.0     âœ” stringr   1.5.1\n#&gt; âœ” ggplot2   3.5.2     âœ” tibble    3.3.0\n#&gt; âœ” lubridate 1.9.4     âœ” tidyr     1.3.1\n#&gt; âœ” purrr     1.0.4     \n#&gt; â”€â”€ Conflicts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse_conflicts() â”€â”€\n#&gt; âœ– dplyr::filter() masks stats::filter()\n#&gt; âœ– dplyr::lag()    masks stats::lag()\n#&gt; â„¹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nThat one line of code loads the core tidyverse; the packages that you will use in almost every data analysis. It also tells you which functions from the tidyverse conflict with functions in base R (or from other packages you might have loaded)1.\nè¿™ä¸€è¡Œä»£ç ä¼šåŠ è½½æ ¸å¿ƒçš„ tidyverseï¼›è¿™äº›åŒ…å‡ ä¹åœ¨æ¯ä¸ªæ•°æ®åˆ†æä¸­éƒ½ä¼šç”¨åˆ°ã€‚å®ƒè¿˜ä¼šå‘Šè¯‰ä½  tidyverse ä¸­çš„å“ªäº›å‡½æ•°ä¸ R åŸºç¡€åŒ…ï¼ˆæˆ–ä½ å¯èƒ½å·²åŠ è½½çš„å…¶ä»–åŒ…ï¼‰ä¸­çš„å‡½æ•°å­˜åœ¨å†²çª2ã€‚\nIf you run this code and get the error message there is no package called 'tidyverse', youâ€™ll need to first install it, then run library() once again.\nå¦‚æœä½ è¿è¡Œæ­¤ä»£ç å¹¶æ”¶åˆ°é”™è¯¯æ¶ˆæ¯ there is no package called 'tidyverse'ï¼Œä½ éœ€è¦å…ˆå®‰è£…å®ƒï¼Œç„¶åå†è¿è¡Œä¸€æ¬¡ library()ã€‚\n\ninstall.packages(\"tidyverse\")\nlibrary(tidyverse)\n\nYou only need to install a package once, but you need to load it every time you start a new session.\nä½ åªéœ€è¦å®‰è£…ä¸€ä¸ªåŒ…ä¸€æ¬¡ï¼Œä½†æ¯æ¬¡å¼€å§‹æ–°ä¼šè¯æ—¶éƒ½éœ€è¦åŠ è½½å®ƒã€‚\nIn addition to tidyverse, we will also use the palmerpenguins package, which includes the penguins dataset containing body measurements for penguins on three islands in the Palmer Archipelago, and the ggthemes package, which offers a colorblind safe color palette.\né™¤äº† tidyverseï¼Œæˆ‘ä»¬è¿˜å°†ä½¿ç”¨ palmerpenguins åŒ…ï¼Œå…¶ä¸­åŒ…å«äº† penguins æ•°æ®é›†ï¼Œè¯¥æ•°æ®é›†åŒ…å«äº†å¸•é»˜ç¾¤å²› (Palmer Archipelago) ä¸Šä¸‰ä¸ªå²›å±¿çš„ä¼é¹…èº«ä½“æµ‹é‡æ•°æ®ï¼Œä»¥åŠ ggthemes åŒ…ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªè‰²ç›²å®‰å…¨çš„è°ƒè‰²æ¿ã€‚\n\nlibrary(palmerpenguins)\n#&gt; \n#&gt; Attaching package: 'palmerpenguins'\n#&gt; The following objects are masked from 'package:datasets':\n#&gt; \n#&gt;     penguins, penguins_raw\nlibrary(ggthemes)",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>1</span>Â  <span class='chapter-title'>Data visualization</span>"
    ]
  },
  {
    "objectID": "data-visualize.html#first-steps",
    "href": "data-visualize.html#first-steps",
    "title": "1Â  Data visualization",
    "section": "\n1.2 First steps",
    "text": "1.2 First steps\nDo penguins with longer flippers weigh more or less than penguins with shorter flippers? You probably already have an answer, but try to make your answer precise. What does the relationship between flipper length and body mass look like? Is it positive? Negative? Linear? Nonlinear? Does the relationship vary by the species of the penguin? How about by the island where the penguin lives? Letâ€™s create visualizations that we can use to answer these questions.\né³çŠ¶è‚¢è¾ƒé•¿çš„ä¼é¹…æ¯”é³çŠ¶è‚¢è¾ƒçŸ­çš„ä¼é¹…é‡è¿˜æ˜¯è½»ï¼Ÿä½ å¯èƒ½å·²ç»æœ‰äº†ç­”æ¡ˆï¼Œä½†è¯·å°è¯•è®©ä½ çš„ç­”æ¡ˆæ›´ç²¾ç¡®ã€‚é³çŠ¶è‚¢é•¿åº¦å’Œä½“é‡ä¹‹é—´çš„å…³ç³»æ˜¯æ€æ ·çš„ï¼Ÿæ˜¯æ­£ç›¸å…³ï¼Ÿè´Ÿç›¸å…³ï¼Ÿçº¿æ€§ï¼Ÿè¿˜æ˜¯éçº¿æ€§ï¼Ÿè¿™ç§å…³ç³»æ˜¯å¦å› ä¼é¹…çš„ç§ç±»è€Œå¼‚ï¼Ÿåˆæ˜¯å¦å› ä¼é¹…å±…ä½çš„å²›å±¿è€Œå¼‚ï¼Ÿè®©æˆ‘ä»¬åˆ›å»ºä¸€äº›å¯è§†åŒ–å›¾è¡¨æ¥å›ç­”è¿™äº›é—®é¢˜ã€‚\n\n1.2.1 The penguins data frame\nYou can test your answers to those questions with the penguins data frame found in palmerpenguins (a.k.a. palmerpenguins::penguins). A data frame is a rectangular collection of variables (in the columns) and observations (in the rows). penguins contains 344 observations collected and made available by Dr.Â Kristen Gorman and the Palmer Station, Antarctica LTER3.\nä½ å¯ä»¥ä½¿ç”¨ palmerpenguins åŒ…ä¸­çš„ penguins æ•°æ®æ¡† (data frame)ï¼ˆä¹Ÿç§°ä¸º palmerpenguins::penguinsï¼‰æ¥æ£€éªŒä½ å¯¹è¿™äº›é—®é¢˜çš„ç­”æ¡ˆã€‚æ•°æ®æ¡†æ˜¯å˜é‡ï¼ˆåœ¨åˆ—ä¸­ï¼‰å’Œè§‚æµ‹ï¼ˆåœ¨è¡Œä¸­ï¼‰çš„çŸ©å½¢é›†åˆã€‚penguins åŒ…å«äº† 344 æ¡è§‚æµ‹æ•°æ®ï¼Œç”± Kristen Gorman åšå£«å’Œå¸•é»˜ç«™ï¼Œå—æ LTER æ”¶é›†å¹¶æä¾›4ã€‚\nTo make the discussion easier, letâ€™s define some terms:\nä¸ºäº†è®©è®¨è®ºæ›´å®¹æ˜“ï¼Œæˆ‘ä»¬å…ˆå®šä¹‰ä¸€äº›æœ¯è¯­ï¼š\n\nA variable is a quantity, quality, or property that you can measure.\nå˜é‡ (variable) æ˜¯ä½ å¯ä»¥æµ‹é‡çš„æ•°é‡ã€è´¨é‡æˆ–å±æ€§ã€‚\nA value is the state of a variable when you measure it. The value of a variable may change from measurement to measurement.\nå€¼ (value) æ˜¯ä½ æµ‹é‡æ—¶å˜é‡çš„çŠ¶æ€ã€‚ä¸€ä¸ªå˜é‡çš„å€¼å¯èƒ½åœ¨æ¯æ¬¡æµ‹é‡ä¸­éƒ½ä¼šæ”¹å˜ã€‚\nAn observation is a set of measurements made under similar conditions (you usually make all of the measurements in an observation at the same time and on the same object). An observation will contain several values, each associated with a different variable. Weâ€™ll sometimes refer to an observation as a data point.\nè§‚æµ‹ (observation) æ˜¯åœ¨ç›¸ä¼¼æ¡ä»¶ä¸‹è¿›è¡Œçš„ä¸€ç»„æµ‹é‡ï¼ˆé€šå¸¸ä½ åœ¨åŒä¸€æ—¶é—´å¯¹åŒä¸€å¯¹è±¡è¿›è¡Œä¸€æ¬¡è§‚æµ‹ä¸­çš„æ‰€æœ‰æµ‹é‡ï¼‰ã€‚ä¸€ä¸ªè§‚æµ‹ä¼šåŒ…å«å¤šä¸ªå€¼ï¼Œæ¯ä¸ªå€¼éƒ½ä¸ä¸€ä¸ªä¸åŒçš„å˜é‡ç›¸å…³è”ã€‚æˆ‘ä»¬æœ‰æ—¶ä¹Ÿå°†ä¸€ä¸ªè§‚æµ‹ç§°ä¸ºä¸€ä¸ªæ•°æ®ç‚¹ã€‚\nTabular data is a set of values, each associated with a variable and an observation. Tabular data is tidy if each value is placed in its own â€œcellâ€, each variable in its own column, and each observation in its own row.\nè¡¨æ ¼æ•°æ® (tabular data) æ˜¯ä¸€ç»„å€¼ï¼Œæ¯ä¸ªå€¼éƒ½ä¸ä¸€ä¸ªå˜é‡å’Œä¸€ä¸ªè§‚æµ‹ç›¸å…³è”ã€‚å¦‚æœæ¯ä¸ªå€¼éƒ½æ”¾åœ¨è‡ªå·±çš„â€œå•å…ƒæ ¼â€ä¸­ï¼Œæ¯ä¸ªå˜é‡éƒ½åœ¨è‡ªå·±çš„åˆ—ä¸­ï¼Œæ¯ä¸ªè§‚æµ‹éƒ½åœ¨è‡ªå·±çš„è¡Œä¸­ï¼Œé‚£ä¹ˆè¡¨æ ¼æ•°æ®å°±æ˜¯æ•´æ´ (tidy) çš„ã€‚\n\nIn this context, a variable refers to an attribute of all the penguins, and an observation refers to all the attributes of a single penguin.\nåœ¨æ­¤èƒŒæ™¯ä¸‹ï¼Œä¸€ä¸ªå˜é‡æŒ‡çš„æ˜¯æ‰€æœ‰ä¼é¹…çš„ä¸€ä¸ªå±æ€§ï¼Œè€Œä¸€ä¸ªè§‚æµ‹æŒ‡çš„æ˜¯ä¸€åªä¼é¹…çš„æ‰€æœ‰å±æ€§ã€‚\nType the name of the data frame in the console and R will print a preview of its contents. Note that it says tibble on top of this preview. In the tidyverse, we use special data frames called tibbles that you will learn more about soon.\nåœ¨æ§åˆ¶å°ä¸­è¾“å…¥æ•°æ®æ¡†çš„åç§°ï¼ŒR å°†æ‰“å°å…¶å†…å®¹çš„é¢„è§ˆã€‚æ³¨æ„ï¼Œåœ¨è¿™ä¸ªé¢„è§ˆçš„é¡¶éƒ¨æ˜¾ç¤ºç€ tibbleã€‚åœ¨ tidyverse ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ç§ç‰¹æ®Šçš„æ•°æ®æ¡†ï¼Œç§°ä¸º tibblesï¼Œä½ å¾ˆå¿«å°±ä¼šå­¦åˆ°æ›´å¤šå…³äºå®ƒçš„çŸ¥è¯†ã€‚\n\npenguins\n#&gt; # A tibble: 344 Ã— 8\n#&gt;   species island    bill_length_mm bill_depth_mm flipper_length_mm\n#&gt;   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;\n#&gt; 1 Adelie  Torgersen           39.1          18.7               181\n#&gt; 2 Adelie  Torgersen           39.5          17.4               186\n#&gt; 3 Adelie  Torgersen           40.3          18                 195\n#&gt; 4 Adelie  Torgersen           NA            NA                  NA\n#&gt; 5 Adelie  Torgersen           36.7          19.3               193\n#&gt; 6 Adelie  Torgersen           39.3          20.6               190\n#&gt; # â„¹ 338 more rows\n#&gt; # â„¹ 3 more variables: body_mass_g &lt;int&gt;, sex &lt;fct&gt;, year &lt;int&gt;\n\nThis data frame contains 8 columns. For an alternative view, where you can see all variables and the first few observations of each variable, use glimpse(). Or, if youâ€™re in RStudio, run View(penguins) to open an interactive data viewer.\nè¯¥æ•°æ®æ¡†åŒ…å« 8 åˆ—ã€‚è‹¥è¦æŸ¥çœ‹å¦ä¸€ç§è§†å›¾ï¼Œå…¶ä¸­å¯ä»¥çœ‹åˆ°æ‰€æœ‰å˜é‡ä»¥åŠæ¯ä¸ªå˜é‡çš„å‰å‡ ä¸ªè§‚æµ‹å€¼ï¼Œè¯·ä½¿ç”¨ glimpse()ã€‚æˆ–è€…ï¼Œå¦‚æœä½ åœ¨ RStudio ä¸­ï¼Œè¿è¡Œ View(penguins) æ¥æ‰“å¼€ä¸€ä¸ªäº¤äº’å¼æ•°æ®æŸ¥çœ‹å™¨ã€‚\n\nglimpse(penguins)\n#&gt; Rows: 344\n#&gt; Columns: 8\n#&gt; $ species           &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Aâ€¦\n#&gt; $ island            &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgeâ€¦\n#&gt; $ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.â€¦\n#&gt; $ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.â€¦\n#&gt; $ flipper_length_mm &lt;int&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, â€¦\n#&gt; $ body_mass_g       &lt;int&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 347â€¦\n#&gt; $ sex               &lt;fct&gt; male, female, female, NA, female, male, female, mâ€¦\n#&gt; $ year              &lt;int&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2â€¦\n\nAmong the variables in penguins are:\nåœ¨ penguins çš„å˜é‡ä¸­ï¼Œæœ‰ï¼š\n\nspecies: a penguinâ€™s species (Adelie, Chinstrap, or Gentoo).\nspeciesï¼šä¼é¹…çš„ç§ç±»ï¼ˆé˜¿å¾·åˆ©ã€å¸½å¸¦æˆ–å·´å¸ƒäºšï¼‰ã€‚\nflipper_length_mm: length of a penguinâ€™s flipper, in millimeters.\nflipper_length_mmï¼šä¼é¹…é³çŠ¶è‚¢çš„é•¿åº¦ï¼Œå•ä½ä¸ºæ¯«ç±³ã€‚\nbody_mass_g: body mass of a penguin, in grams.\nbody_mass_gï¼šä¼é¹…çš„ä½“é‡ï¼Œå•ä½ä¸ºå…‹ã€‚\n\nTo learn more about penguins, open its help page by running ?penguins.\nè¦äº†è§£æ›´å¤šå…³äº penguins çš„ä¿¡æ¯ï¼Œè¯·è¿è¡Œ ?penguins æ‰“å¼€å…¶å¸®åŠ©é¡µé¢ã€‚\n\n1.2.2 Ultimate goal\nOur ultimate goal in this chapter is to recreate the following visualization displaying the relationship between flipper lengths and body masses of these penguins, taking into consideration the species of the penguin.\næˆ‘ä»¬åœ¨æœ¬ç« çš„æœ€ç»ˆç›®æ ‡æ˜¯é‡ç°ä»¥ä¸‹å¯è§†åŒ–å›¾è¡¨ï¼Œè¯¥å›¾è¡¨å±•ç¤ºäº†è¿™äº›ä¼é¹…çš„é³çŠ¶è‚¢é•¿åº¦å’Œä½“é‡ä¹‹é—´çš„å…³ç³»ï¼ŒåŒæ—¶è€ƒè™‘äº†ä¼é¹…çš„ç§ç±»ã€‚\n\n\n\n\n\n\n\n\n\n1.2.3 Creating a ggplot\nLetâ€™s recreate this plot step-by-step.\nè®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥åœ°é‡ç°è¿™ä¸ªå›¾è¡¨ã€‚\nWith ggplot2, you begin a plot with the function ggplot(), defining a plot object that you then add layers to. The first argument of ggplot() is the dataset to use in the graph and so ggplot(data = penguins) creates an empty graph that is primed to display the penguins data, but since we havenâ€™t told it how to visualize it yet, for now itâ€™s empty. This is not a very exciting plot, but you can think of it like an empty canvas youâ€™ll paint the remaining layers of your plot onto.\nä½¿ç”¨ ggplot2 æ—¶ï¼Œä½ ç”¨ ggplot() å‡½æ•°å¼€å§‹ä¸€ä¸ªç»˜å›¾ï¼Œå®šä¹‰ä¸€ä¸ªç»˜å›¾å¯¹è±¡ï¼Œç„¶åå‘å…¶æ·»åŠ å›¾å±‚ (layers)ã€‚ggplot() çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦åœ¨å›¾ä¸­ä½¿ç”¨çš„æ•°æ®é›†ï¼Œæ‰€ä»¥ ggplot(data = penguins) åˆ›å»ºäº†ä¸€ä¸ªç©ºçš„å›¾è¡¨ï¼Œå‡†å¤‡å¥½æ˜¾ç¤º penguins æ•°æ®ï¼Œä½†ç”±äºæˆ‘ä»¬è¿˜æ²¡æœ‰å‘Šè¯‰å®ƒå¦‚ä½•å¯è§†åŒ–ï¼Œæ‰€ä»¥ç›®å‰å®ƒæ˜¯ç©ºçš„ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªéå¸¸æ¿€åŠ¨äººå¿ƒçš„å›¾è¡¨ï¼Œä½†ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€å—ç©ºçš„ç”»å¸ƒï¼Œä½ å°†åœ¨ä¸Šé¢ç»˜åˆ¶å›¾è¡¨çš„å…¶ä½™å›¾å±‚ã€‚\n\nggplot(data = penguins)\n\n\n\n\n\n\n\nNext, we need to tell ggplot() how the information from our data will be visually represented. The mapping argument of the ggplot() function defines how variables in your dataset are mapped to visual properties (aesthetics) of your plot. The mapping argument is always defined in the aes() function, and the x and y arguments of aes() specify which variables to map to the x and y axes. For now, we will only map flipper length to the x aesthetic and body mass to the y aesthetic. ggplot2 looks for the mapped variables in the data argument, in this case, penguins.\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰ ggplot() å¦‚ä½•å°†æˆ‘ä»¬æ•°æ®ä¸­çš„ä¿¡æ¯è¿›è¡Œå¯è§†åŒ–è¡¨ç¤ºã€‚ggplot() å‡½æ•°çš„ mapping å‚æ•°å®šä¹‰äº†æ•°æ®é›†ä¸­çš„å˜é‡å¦‚ä½•æ˜ å°„åˆ°å›¾è¡¨çš„è§†è§‰å±æ€§ï¼ˆç¾å­¦ (aesthetics)ï¼‰ã€‚mapping å‚æ•°æ€»æ˜¯åœ¨ aes() å‡½æ•°ä¸­å®šä¹‰ï¼Œaes() çš„ x å’Œ y å‚æ•°æŒ‡å®šäº†å°†å“ªäº›å˜é‡æ˜ å°„åˆ° x è½´å’Œ y è½´ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬åªå°†é³çŠ¶è‚¢é•¿åº¦æ˜ å°„åˆ° x ç¾å­¦ï¼Œå°†ä½“é‡æ˜ å°„åˆ° y ç¾å­¦ã€‚ggplot2 ä¼šåœ¨ data å‚æ•°ä¸­æŸ¥æ‰¾æ˜ å°„çš„å˜é‡ï¼Œåœ¨è¿™é‡Œæ˜¯ penguinsã€‚\nThe following plot shows the result of adding these mappings.\nä¸‹é¢çš„å›¾è¡¨æ˜¾ç¤ºäº†æ·»åŠ è¿™äº›æ˜ å°„çš„ç»“æœã€‚\n\nggplot(\n  data = penguins,\n  mapping = aes(x = flipper_length_mm, y = body_mass_g)\n)\n\n\n\n\n\n\n\nOur empty canvas now has more structure â€“ itâ€™s clear where flipper lengths will be displayed (on the x-axis) and where body masses will be displayed (on the y-axis). But the penguins themselves are not yet on the plot. This is because we have not yet articulated, in our code, how to represent the observations from our data frame on our plot.\næˆ‘ä»¬ç©ºè¡è¡çš„ç”»å¸ƒç°åœ¨æœ‰äº†æ›´å¤šçš„ç»“æ„â€”â€”å¾ˆæ¸…æ¥šé³çŠ¶è‚¢é•¿åº¦å°†æ˜¾ç¤ºåœ¨å“ªé‡Œï¼ˆx è½´ä¸Šï¼‰ï¼Œä½“é‡å°†æ˜¾ç¤ºåœ¨å“ªé‡Œï¼ˆy è½´ä¸Šï¼‰ã€‚ä½†æ˜¯ä¼é¹…æœ¬èº«è¿˜æ²¡æœ‰åœ¨å›¾ä¸Šã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰åœ¨ä»£ç ä¸­æ˜ç¡®è¯´æ˜å¦‚ä½•åœ¨å›¾ä¸Šè¡¨ç¤ºæˆ‘ä»¬æ•°æ®æ¡†ä¸­çš„è§‚æµ‹å€¼ã€‚\nTo do so, we need to define a geom: the geometrical object that a plot uses to represent data. These geometric objects are made available in ggplot2 with functions that start with geom_. People often describe plots by the type of geom that the plot uses. For example, bar charts use bar geoms (geom_bar()), line charts use line geoms (geom_line()), boxplots use boxplot geoms (geom_boxplot()), scatterplots use point geoms (geom_point()), and so on.\nä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ª geomï¼šå›¾è¡¨ç”¨æ¥è¡¨ç¤ºæ•°æ®çš„å‡ ä½•å¯¹è±¡ã€‚è¿™äº›å‡ ä½•å¯¹è±¡åœ¨ ggplot2 ä¸­é€šè¿‡ä»¥ geom_ å¼€å¤´çš„å‡½æ•°æä¾›ã€‚äººä»¬é€šå¸¸ç”¨å›¾è¡¨ä½¿ç”¨çš„ geom ç±»å‹æ¥æè¿°å›¾è¡¨ã€‚ä¾‹å¦‚ï¼Œæ¡å½¢å›¾ä½¿ç”¨æ¡å½¢ geom (geom_bar())ï¼ŒæŠ˜çº¿å›¾ä½¿ç”¨æŠ˜çº¿ geom (geom_line())ï¼Œç®±çº¿å›¾ä½¿ç”¨ç®±çº¿å›¾ geom (geom_boxplot())ï¼Œæ•£ç‚¹å›¾ä½¿ç”¨ç‚¹ geom (geom_point()) ç­‰ç­‰ã€‚\nThe function geom_point() adds a layer of points to your plot, which creates a scatterplot. ggplot2 comes with many geom functions that each adds a different type of layer to a plot. Youâ€™ll learn a whole bunch of geoms throughout the book, particularly in Chapter 9.\ngeom_point() å‡½æ•°ä¼šä¸ºä½ çš„å›¾è¡¨æ·»åŠ ä¸€ä¸ªç‚¹å›¾å±‚ï¼Œä»è€Œåˆ›å»ºä¸€ä¸ªæ•£ç‚¹å›¾ã€‚ggplot2 æä¾›äº†è®¸å¤š geom å‡½æ•°ï¼Œæ¯ä¸ªå‡½æ•°éƒ½ä¸ºå›¾è¡¨æ·»åŠ ä¸åŒç±»å‹çš„å›¾å±‚ã€‚ä½ å°†åœ¨æœ¬ä¹¦ä¸­ï¼Œç‰¹åˆ«æ˜¯åœ¨ Chapter 9 ä¸­å­¦åˆ°å¾ˆå¤š geomã€‚\n\nggplot(\n  data = penguins,\n  mapping = aes(x = flipper_length_mm, y = body_mass_g)\n) +\n  geom_point()\n#&gt; Warning: Removed 2 rows containing missing values or values outside the scale range\n#&gt; (`geom_point()`).\n\n\n\n\n\n\n\nNow we have something that looks like what we might think of as a â€œscatterplotâ€. It doesnâ€™t yet match our â€œultimate goalâ€ plot, but using this plot we can start answering the question that motivated our exploration: â€œWhat does the relationship between flipper length and body mass look like?â€ The relationship appears to be positive (as flipper length increases, so does body mass), fairly linear (the points are clustered around a line instead of a curve), and moderately strong (there isnâ€™t too much scatter around such a line). Penguins with longer flippers are generally larger in terms of their body mass.\nç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªå¯ä»¥ç§°ä¹‹ä¸ºâ€œæ•£ç‚¹å›¾â€çš„ä¸œè¥¿ã€‚å®ƒè¿˜ä¸å®Œå…¨ç¬¦åˆæˆ‘ä»¬çš„â€œæœ€ç»ˆç›®æ ‡â€å›¾ï¼Œä½†é€šè¿‡è¿™ä¸ªå›¾ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹å›ç­”æˆ‘ä»¬æ¢ç´¢çš„åŠ¨æœºé—®é¢˜ï¼šâ€œé³çŠ¶è‚¢é•¿åº¦å’Œä½“é‡ä¹‹é—´çš„å…³ç³»æ˜¯æ€æ ·çš„ï¼Ÿâ€ è¿™ç§å…³ç³»çœ‹èµ·æ¥æ˜¯æ­£ç›¸å…³çš„ï¼ˆéšç€é³çŠ¶è‚¢é•¿åº¦çš„å¢åŠ ï¼Œä½“é‡ä¹Ÿå¢åŠ ï¼‰ï¼Œç›¸å½“çº¿æ€§çš„ï¼ˆæ•°æ®ç‚¹èšé›†åœ¨ä¸€æ¡ç›´çº¿å‘¨å›´è€Œä¸æ˜¯ä¸€æ¡æ›²çº¿ä¸Šï¼‰ï¼Œå¹¶ä¸”å¼ºåº¦é€‚ä¸­ï¼ˆå›´ç»•è¿™æ¡çº¿çš„æ•£å¸ƒä¸æ˜¯å¾ˆå¤§ï¼‰ã€‚é³çŠ¶è‚¢è¾ƒé•¿çš„ä¼é¹…é€šå¸¸ä½“é‡ä¹Ÿè¾ƒé‡ã€‚\nBefore we add more layers to this plot, letâ€™s pause for a moment and review the warning message we got:\nåœ¨æˆ‘ä»¬ä¸ºè¿™å¼ å›¾æ·»åŠ æ›´å¤šå›¾å±‚ä¹‹å‰ï¼Œè®©æˆ‘ä»¬æš‚åœä¸€ä¸‹ï¼Œå›é¡¾ä¸€ä¸‹æˆ‘ä»¬æ”¶åˆ°çš„è­¦å‘Šä¿¡æ¯ï¼š\n\nRemoved 2 rows containing missing values (geom_point()).\n\n\nåˆ é™¤äº† 2 è¡ŒåŒ…å«ç¼ºå¤±å€¼çš„è¡Œ (geom_point()).\n\nWeâ€™re seeing this message because there are two penguins in our dataset with missing body mass and/or flipper length values and ggplot2 has no way of representing them on the plot without both of these values. Like R, ggplot2 subscribes to the philosophy that missing values should never silently go missing. This type of warning is probably one of the most common types of warnings you will see when working with real data â€“ missing values are a very common issue and youâ€™ll learn more about them throughout the book, particularly in Chapter 18. For the remaining plots in this chapter we will suppress this warning so itâ€™s not printed alongside every single plot we make.\næˆ‘ä»¬çœ‹åˆ°è¿™ä¸ªæ¶ˆæ¯æ˜¯å› ä¸ºæˆ‘ä»¬çš„æ•°æ®é›†ä¸­æœ‰ä¸¤åªä¼é¹…ç¼ºå°‘ä½“é‡å’Œ/æˆ–é³çŠ¶è‚¢é•¿åº¦çš„å€¼ï¼Œè€Œ ggplot2 åœ¨æ²¡æœ‰è¿™ä¸¤ä¸ªå€¼çš„æƒ…å†µä¸‹æ— æ³•åœ¨å›¾ä¸Šè¡¨ç¤ºå®ƒä»¬ã€‚å’Œ R ä¸€æ ·ï¼Œggplot2 éµå¾ªçš„å“²å­¦æ˜¯ç¼ºå¤±å€¼ä¸åº”è¯¥è¢«æ‚„æ‚„åœ°å¿½ç•¥ã€‚è¿™ç§ç±»å‹çš„è­¦å‘Šå¯èƒ½æ˜¯ä½ åœ¨å¤„ç†çœŸå®æ•°æ®æ—¶ä¼šçœ‹åˆ°çš„æœ€å¸¸è§çš„è­¦å‘Šä¹‹ä¸€â€”â€”ç¼ºå¤±å€¼æ˜¯ä¸€ä¸ªéå¸¸æ™®éçš„é—®é¢˜ï¼Œä½ å°†åœ¨æœ¬ä¹¦ä¸­ï¼Œç‰¹åˆ«æ˜¯åœ¨ Chapter 18 ä¸­å­¦åˆ°æ›´å¤šå…³äºå®ƒä»¬çš„å†…å®¹ã€‚åœ¨æœ¬ç« ä½™ä¸‹çš„å›¾è¡¨ä¸­ï¼Œæˆ‘ä»¬å°†æŠ‘åˆ¶è¿™ä¸ªè­¦å‘Šï¼Œè¿™æ ·å®ƒå°±ä¸ä¼šåœ¨æˆ‘ä»¬åˆ¶ä½œçš„æ¯ä¸€å¼ å›¾è¡¨æ—è¾¹éƒ½æ‰“å°å‡ºæ¥ã€‚\n\n1.2.4 Adding aesthetics and layers\nScatterplots are useful for displaying the relationship between two numerical variables, but itâ€™s always a good idea to be skeptical of any apparent relationship between two variables and ask if there may be other variables that explain or change the nature of this apparent relationship. For example, does the relationship between flipper length and body mass differ by species? Letâ€™s incorporate species into our plot and see if this reveals any additional insights into the apparent relationship between these variables. We will do this by representing species with different colored points.\næ•£ç‚¹å›¾å¯¹äºæ˜¾ç¤ºä¸¤ä¸ªæ•°å€¼å˜é‡ä¹‹é—´çš„å…³ç³»éå¸¸æœ‰ç”¨ï¼Œä½†å¯¹ä¸¤ä¸ªå˜é‡ä¹‹é—´çš„ä»»ä½•æ˜æ˜¾å…³ç³»æŒæ€€ç–‘æ€åº¦æ€»æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œå¹¶è¯¢é—®æ˜¯å¦å¯èƒ½æœ‰å…¶ä»–å˜é‡è§£é‡Šæˆ–æ”¹å˜äº†è¿™ç§æ˜æ˜¾å…³ç³»çš„æ€§è´¨ã€‚ä¾‹å¦‚ï¼Œé³çŠ¶è‚¢é•¿åº¦å’Œä½“é‡ä¹‹é—´çš„å…³ç³»æ˜¯å¦å› ç‰©ç§è€Œå¼‚ï¼Ÿè®©æˆ‘ä»¬å°†ç‰©ç§çº³å…¥æˆ‘ä»¬çš„å›¾è¡¨ä¸­ï¼Œçœ‹çœ‹è¿™æ˜¯å¦ä¼šæ­ç¤ºå‡ºè¿™äº›å˜é‡ä¹‹é—´æ˜æ˜¾å…³ç³»çš„ä»»ä½•å…¶ä»–è§è§£ã€‚æˆ‘ä»¬å°†é€šè¿‡ç”¨ä¸åŒé¢œè‰²çš„ç‚¹æ¥ä»£è¡¨ç‰©ç§æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚\nTo achieve this, will we need to modify the aesthetic or the geom? If you guessed â€œin the aesthetic mapping, inside of aes()â€, youâ€™re already getting the hang of creating data visualizations with ggplot2! And if not, donâ€™t worry. Throughout the book you will make many more ggplots and have many more opportunities to check your intuition as you make them.\nè¦å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ç¾å­¦è¿˜æ˜¯å‡ ä½•å¯¹è±¡ï¼Ÿå¦‚æœä½ çŒœåˆ°â€œåœ¨ aes() å†…éƒ¨çš„ç¾å­¦æ˜ å°„ä¸­â€ï¼Œé‚£ä¹ˆä½ å·²ç»å¼€å§‹æŒæ¡ç”¨ ggplot2 åˆ›å»ºæ•°æ®å¯è§†åŒ–çš„çªé—¨äº†ï¼å¦‚æœæ²¡çŒœå¯¹ï¼Œä¹Ÿåˆ«æ‹…å¿ƒã€‚åœ¨æœ¬ä¹¦ä¸­ï¼Œä½ å°†åˆ¶ä½œæ›´å¤šçš„ ggplot å›¾ï¼Œå¹¶æœ‰æ›´å¤šæœºä¼šåœ¨åˆ¶ä½œè¿‡ç¨‹ä¸­æ£€éªŒä½ çš„ç›´è§‰ã€‚\n\nggplot(\n  data = penguins,\n  mapping = aes(x = flipper_length_mm, y = body_mass_g, color = species)\n) +\n  geom_point()\n\n\n\n\n\n\n\nWhen a categorical variable is mapped to an aesthetic, ggplot2 will automatically assign a unique value of the aesthetic (here a unique color) to each unique level of the variable (each of the three species), a process known as scaling. ggplot2 will also add a legend that explains which values correspond to which levels.\nå½“ä¸€ä¸ªåˆ†ç±»å˜é‡è¢«æ˜ å°„åˆ°ä¸€ä¸ªç¾å­¦ä¸Šæ—¶ï¼Œggplot2 ä¼šè‡ªåŠ¨ä¸ºè¯¥å˜é‡çš„æ¯ä¸ªå”¯ä¸€çº§åˆ«ï¼ˆè¿™é‡Œæ˜¯ä¸‰ä¸ªç‰©ç§ä¸­çš„æ¯ä¸€ä¸ªï¼‰åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ç¾å­¦å€¼ï¼ˆè¿™é‡Œæ˜¯å”¯ä¸€çš„é¢œè‰²ï¼‰ï¼Œè¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºæ ‡åº¦å˜æ¢ (scaling)ã€‚ggplot2 è¿˜ä¼šæ·»åŠ ä¸€ä¸ªå›¾ä¾‹ï¼Œè§£é‡Šå“ªäº›å€¼å¯¹åº”å“ªäº›çº§åˆ«ã€‚\nNow letâ€™s add one more layer: a smooth curve displaying the relationship between body mass and flipper length. Before you proceed, refer back to the code above, and think about how we can add this to our existing plot.\nç°åœ¨è®©æˆ‘ä»¬å†æ·»åŠ ä¸€ä¸ªå›¾å±‚ï¼šä¸€æ¡å¹³æ»‘æ›²çº¿ï¼Œæ˜¾ç¤ºä½“é‡å’Œé³çŠ¶è‚¢é•¿åº¦ä¹‹é—´çš„å…³ç³»ã€‚åœ¨ç»§ç»­ä¹‹å‰ï¼Œè¯·å›é¡¾ä¸Šé¢çš„ä»£ç ï¼Œå¹¶æ€è€ƒå¦‚ä½•å°†å…¶æ·»åŠ åˆ°æˆ‘ä»¬ç°æœ‰çš„å›¾è¡¨ä¸­ã€‚\nSince this is a new geometric object representing our data, we will add a new geom as a layer on top of our point geom: geom_smooth(). And we will specify that we want to draw the line of best fit based on a linear model with method = \"lm\".\nç”±äºè¿™æ˜¯ä¸€ä¸ªä»£è¡¨æˆ‘ä»¬æ•°æ®çš„æ–°å‡ ä½•å¯¹è±¡ï¼Œæˆ‘ä»¬å°†åœ¨ç‚¹å‡ ä½•å¯¹è±¡ä¹‹ä¸Šæ·»åŠ ä¸€ä¸ªæ–°çš„å‡ ä½•å¯¹è±¡ä½œä¸ºå›¾å±‚ï¼šgeom_smooth()ã€‚å¹¶ä¸”æˆ‘ä»¬å°†æŒ‡å®šæˆ‘ä»¬æƒ³è¦åŸºäº linear modelï¼ˆçº¿æ€§æ¨¡å‹ï¼‰ç»˜åˆ¶æœ€ä½³æ‹Ÿåˆçº¿ï¼Œé€šè¿‡ method = \"lm\"ã€‚\n\nggplot(\n  data = penguins,\n  mapping = aes(x = flipper_length_mm, y = body_mass_g, color = species)\n) +\n  geom_point() +\n  geom_smooth(method = \"lm\")\n\n\n\n\n\n\n\nWe have successfully added lines, but this plot doesnâ€™t look like the plot from Section 1.2.2, which only has one line for the entire dataset as opposed to separate lines for each of the penguin species.\næˆ‘ä»¬æˆåŠŸåœ°æ·»åŠ äº†çº¿ï¼Œä½†è¿™å¼ å›¾çœ‹èµ·æ¥ä¸åƒ Section 1.2.2 ä¸­çš„å›¾ï¼Œé‚£å¼ å›¾åªæœ‰ä¸€æ¡çº¿ä»£è¡¨æ•´ä¸ªæ•°æ®é›†ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ç§ä¼é¹…åˆ†åˆ«ç”»çº¿ã€‚\nWhen aesthetic mappings are defined in ggplot(), at the global level, theyâ€™re passed down to each of the subsequent geom layers of the plot. However, each geom function in ggplot2 can also take a mapping argument, which allows for aesthetic mappings at the local level that are added to those inherited from the global level. Since we want points to be colored based on species but donâ€™t want the lines to be separated out for them, we should specify color = species for geom_point() only.\nå½“ç¾å­¦æ˜ å°„åœ¨ ggplot() ä¸­å®šä¹‰æ—¶ï¼Œå³åœ¨å…¨å±€çº§åˆ«ï¼Œå®ƒä»¬ä¼šè¢«ä¼ é€’ç»™å›¾çš„æ¯ä¸ªåç»­å‡ ä½•å›¾å±‚ã€‚ç„¶è€Œï¼Œggplot2 ä¸­çš„æ¯ä¸ªå‡ ä½•å‡½æ•°ä¹Ÿå¯ä»¥æ¥å—ä¸€ä¸ª mapping å‚æ•°ï¼Œè¿™å…è®¸åœ¨å±€éƒ¨çº§åˆ«è¿›è¡Œç¾å­¦æ˜ å°„ï¼Œè¿™äº›æ˜ å°„ä¼šæ·»åŠ åˆ°ä»å…¨å±€çº§åˆ«ç»§æ‰¿çš„æ˜ å°„ä¸­ã€‚ç”±äºæˆ‘ä»¬å¸Œæœ›ç‚¹æ ¹æ®ç‰©ç§ç€è‰²ï¼Œä½†åˆä¸å¸Œæœ›çº¿æ¡ä¹Ÿå› æ­¤åˆ†å¼€ï¼Œæˆ‘ä»¬åº”è¯¥åªä¸º geom_point() æŒ‡å®š color = speciesã€‚\n\nggplot(\n  data = penguins,\n  mapping = aes(x = flipper_length_mm, y = body_mass_g)\n) +\n  geom_point(mapping = aes(color = species)) +\n  geom_smooth(method = \"lm\")\n\n\n\n\n\n\n\nVoila! We have something that looks very much like our ultimate goal, though itâ€™s not yet perfect. We still need to use different shapes for each species of penguins and improve labels.\nç§ï¼æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªä¸æˆ‘ä»¬çš„æœ€ç»ˆç›®æ ‡éå¸¸ç›¸ä¼¼çš„ä¸œè¥¿ï¼Œè™½ç„¶è¿˜ä¸æ˜¯å®Œç¾çš„ã€‚æˆ‘ä»¬ä»ç„¶éœ€è¦ä¸ºæ¯ç§ä¼é¹…ä½¿ç”¨ä¸åŒçš„å½¢çŠ¶ï¼Œå¹¶æ”¹è¿›æ ‡ç­¾ã€‚\nItâ€™s generally not a good idea to represent information using only colors on a plot, as people perceive colors differently due to color blindness or other color vision differences. Therefore, in addition to color, we can also map species to the shape aesthetic.\né€šå¸¸ï¼Œåœ¨å›¾è¡¨ä¸Šä»…ä½¿ç”¨é¢œè‰²æ¥è¡¨ç¤ºä¿¡æ¯å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œå› ä¸ºäººä»¬å› è‰²ç›²æˆ–å…¶ä»–è‰²è§‰å·®å¼‚è€Œå¯¹é¢œè‰²çš„æ„ŸçŸ¥ä¸åŒã€‚å› æ­¤ï¼Œé™¤äº†é¢œè‰²ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å°† species æ˜ å°„åˆ° shape ç¾å­¦ä¸Šã€‚\n\nggplot(\n  data = penguins,\n  mapping = aes(x = flipper_length_mm, y = body_mass_g)\n) +\n  geom_point(mapping = aes(color = species, shape = species)) +\n  geom_smooth(method = \"lm\")\n\n\n\n\n\n\n\nNote that the legend is automatically updated to reflect the different shapes of the points as well.\næ³¨æ„ï¼Œå›¾ä¾‹ä¹Ÿä¼šè‡ªåŠ¨æ›´æ–°ï¼Œä»¥åæ˜ ç‚¹çš„ä¸åŒå½¢çŠ¶ã€‚\nAnd finally, we can improve the labels of our plot using the labs() function in a new layer. Some of the arguments to labs() might be self explanatory: title adds a title and subtitle adds a subtitle to the plot. Other arguments match the aesthetic mappings, x is the x-axis label, y is the y-axis label, and color and shape define the label for the legend. In addition, we can improve the color palette to be colorblind safe with the scale_color_colorblind() function from the ggthemes package.\næœ€åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ labs() å‡½æ•°åœ¨ä¸€ä¸ªæ–°çš„å›¾å±‚ä¸­æ”¹è¿›æˆ‘ä»¬å›¾è¡¨çš„æ ‡ç­¾ã€‚labs() çš„ä¸€äº›å‚æ•°å¯èƒ½æ˜¯ä¸è¨€è‡ªæ˜çš„ï¼štitle ä¸ºå›¾è¡¨æ·»åŠ æ ‡é¢˜ï¼Œsubtitle æ·»åŠ å‰¯æ ‡é¢˜ã€‚å…¶ä»–å‚æ•°ä¸ç¾å­¦æ˜ å°„ç›¸åŒ¹é…ï¼Œx æ˜¯ x è½´æ ‡ç­¾ï¼Œy æ˜¯ y è½´æ ‡ç­¾ï¼Œè€Œ color å’Œ shape å®šä¹‰äº†å›¾ä¾‹çš„æ ‡ç­¾ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ggthemes åŒ…ä¸­çš„ scale_color_colorblind() å‡½æ•°æ¥æ”¹è¿›è°ƒè‰²æ¿ï¼Œä½¿å…¶å¯¹è‰²ç›²å‹å¥½ã€‚\n\nggplot(\n  data = penguins,\n  mapping = aes(x = flipper_length_mm, y = body_mass_g)\n) +\n  geom_point(aes(color = species, shape = species)) +\n  geom_smooth(method = \"lm\") +\n  labs(\n    title = \"Body mass and flipper length\",\n    subtitle = \"Dimensions for Adelie, Chinstrap, and Gentoo Penguins\",\n    x = \"Flipper length (mm)\", y = \"Body mass (g)\",\n    color = \"Species\", shape = \"Species\"\n  ) +\n  scale_color_colorblind()\n\n\n\n\n\n\n\nWe finally have a plot that perfectly matches our â€œultimate goalâ€!\næˆ‘ä»¬ç»ˆäºæœ‰äº†ä¸€ä¸ªä¸æˆ‘ä»¬çš„â€œæœ€ç»ˆç›®æ ‡â€å®Œå…¨åŒ¹é…çš„å›¾è¡¨ï¼\n\n1.2.5 Exercises\n\nHow many rows are in penguins? How many columns?\npenguins ä¸­æœ‰å¤šå°‘è¡Œï¼Ÿå¤šå°‘åˆ—ï¼Ÿ\nWhat does the bill_depth_mm variable in the penguins data frame describe? Read the help for ?penguins to find out.\npenguins æ•°æ®æ¡†ä¸­çš„ bill_depth_mm å˜é‡æè¿°äº†ä»€ä¹ˆï¼Ÿé˜…è¯» ?penguins çš„å¸®åŠ©æ–‡æ¡£æ¥æ‰¾å‡ºç­”æ¡ˆã€‚\nMake a scatterplot of bill_depth_mm vs.Â bill_length_mm. That is, make a scatterplot with bill_depth_mm on the y-axis and bill_length_mm on the x-axis. Describe the relationship between these two variables.\nåˆ¶ä½œä¸€ä¸ª bill_depth_mm å¯¹ bill_length_mm çš„æ•£ç‚¹å›¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåˆ¶ä½œä¸€ä¸ªä»¥ bill_depth_mm ä¸º y è½´ï¼Œbill_length_mm ä¸º x è½´çš„æ•£ç‚¹å›¾ã€‚æè¿°è¿™ä¸¤ä¸ªå˜é‡ä¹‹é—´çš„å…³ç³»ã€‚\nWhat happens if you make a scatterplot of species vs.Â bill_depth_mm? What might be a better choice of geom?\nå¦‚æœä½ åˆ¶ä½œä¸€ä¸ª species å¯¹ bill_depth_mm çš„æ•£ç‚¹å›¾ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿä»€ä¹ˆå¯èƒ½æ˜¯æ›´å¥½çš„å‡ ä½•å¯¹è±¡é€‰æ‹©ï¼Ÿ\nWhy does the following give an error and how would you fix it?\n\nä¸ºä»€ä¹ˆä¸‹é¢çš„ä»£ç ä¼šæŠ¥é”™ï¼Œä½ å°†å¦‚ä½•ä¿®å¤å®ƒï¼Ÿ\n{r}     #| eval: false     ggplot(data = penguins) +        geom_point()\n\nWhat does the na.rm argument do in geom_point()? What is the default value of the argument? Create a scatterplot where you successfully use this argument set to TRUE.\ngeom_point() ä¸­çš„ na.rm å‚æ•°æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿè¯¥å‚æ•°çš„é»˜è®¤å€¼æ˜¯ä»€ä¹ˆï¼Ÿåˆ›å»ºä¸€ä¸ªæ•£ç‚¹å›¾ï¼Œåœ¨å…¶ä¸­æˆåŠŸåœ°å°†æ­¤å‚æ•°è®¾ç½®ä¸º TRUEã€‚\nAdd the following caption to the plot you made in the previous exercise: â€œData come from the palmerpenguins package.â€ Hint: Take a look at the documentation for labs().\nåœ¨ä½ ä¸Šä¸€ä¸ªç»ƒä¹ ä¸­åˆ¶ä½œçš„å›¾è¡¨ä¸­æ·»åŠ ä»¥ä¸‹æ ‡é¢˜ï¼šâ€œæ•°æ®æ¥è‡ª palmerpenguins åŒ…ã€‚â€ æç¤ºï¼šæŸ¥çœ‹ labs() çš„æ–‡æ¡£ã€‚\nRecreate the following visualization. What aesthetic should bill_depth_mm be mapped to? And should it be mapped at the global level or at the geom level?\n\né‡æ–°åˆ›å»ºä»¥ä¸‹å¯è§†åŒ–å›¾è¡¨ã€‚bill_depth_mm åº”è¯¥æ˜ å°„åˆ°å“ªä¸ªç¾å­¦ä¸Šï¼Ÿå®ƒåº”è¯¥åœ¨å…¨å±€çº§åˆ«è¿˜æ˜¯åœ¨å‡ ä½•å¯¹è±¡çº§åˆ«è¿›è¡Œæ˜ å°„ï¼Ÿ\n{r}     #| echo: false     #| warning: false     #| fig-alt: |     #|   A scatterplot of body mass vs. flipper length of penguins, colored      #|   by bill depth. A smooth curve of the relationship between body mass      #|   and flipper length is overlaid. The relationship is positive,      #|   fairly linear, and moderately strong.     ggplot(       data = penguins,       mapping = aes(x = flipper_length_mm, y = body_mass_g)     ) +       geom_point(aes(color = bill_depth_mm)) +       geom_smooth()\n\nRun this code in your head and predict what the output will look like. Then, run the code in R and check your predictions.\n\nåœ¨è„‘æµ·ä¸­è¿è¡Œè¿™æ®µä»£ç ï¼Œå¹¶é¢„æµ‹è¾“å‡ºä¼šæ˜¯ä»€ä¹ˆæ ·å­ã€‚ç„¶åï¼Œåœ¨ R ä¸­è¿è¡Œä»£ç å¹¶æ£€æŸ¥ä½ çš„é¢„æµ‹ã€‚\n{r}     #| eval: false     ggplot(       data = penguins,       mapping = aes(x = flipper_length_mm, y = body_mass_g, color = island)     ) +       geom_point() +       geom_smooth(se = FALSE)\n\nWill these two graphs look different? Why/why not?\n\nè¿™ä¸¤å¼ å›¾çœ‹èµ·æ¥ä¼šæœ‰æ‰€ä¸åŒå—ï¼Ÿä¸ºä»€ä¹ˆ/ä¸ºä»€ä¹ˆä¸ï¼Ÿ\n```{r} #| eval: false ggplot( data = penguins, mapping = aes(x = flipper_length_mm, y = body_mass_g) ) + geom_point() + geom_smooth()\nggplot() + geom_point( data = penguins, mapping = aes(x = flipper_length_mm, y = body_mass_g) ) + geom_smooth( data = penguins, mapping = aes(x = flipper_length_mm, y = body_mass_g) ) ```",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>1</span>Â  <span class='chapter-title'>Data visualization</span>"
    ]
  },
  {
    "objectID": "data-visualize.html#sec-ggplot2-calls",
    "href": "data-visualize.html#sec-ggplot2-calls",
    "title": "1Â  Data visualization",
    "section": "\n1.3 ggplot2 calls",
    "text": "1.3 ggplot2 calls\nAs we move on from these introductory sections, weâ€™ll transition to a more concise expression of ggplot2 code. So far weâ€™ve been very explicit, which is helpful when you are learning:\néšç€æˆ‘ä»¬ä»è¿™äº›ä»‹ç»æ€§éƒ¨åˆ†è¿‡æ¸¡ï¼Œæˆ‘ä»¬å°†è½¬å‘æ›´ç®€æ´çš„ ggplot2 ä»£ç è¡¨è¾¾æ–¹å¼ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸€ç›´éå¸¸æ˜ç¡®ï¼Œè¿™åœ¨å­¦ä¹ æ—¶å¾ˆæœ‰å¸®åŠ©ï¼š\n\nggplot(\n  data = penguins,\n  mapping = aes(x = flipper_length_mm, y = body_mass_g)\n) +\n  geom_point()\n\nTypically, the first one or two arguments to a function are so important that you should know them by heart. The first two arguments to ggplot() are data and mapping, in the remainder of the book, we wonâ€™t supply those names. That saves typing, and, by reducing the amount of extra text, makes it easier to see whatâ€™s different between plots. Thatâ€™s a really important programming concern that weâ€™ll come back to in Chapter 25.\né€šå¸¸ï¼Œå‡½æ•°çš„å‰ä¸€ä¸¤ä¸ªå‚æ•°éå¸¸é‡è¦ï¼Œä½ åº”è¯¥ç‰¢è®°åœ¨å¿ƒã€‚ggplot() çš„å‰ä¸¤ä¸ªå‚æ•°æ˜¯ data å’Œ mappingï¼Œåœ¨æœ¬ä¹¦çš„å…¶ä½™éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†ä¸å†æä¾›è¿™äº›åç§°ã€‚è¿™æ ·å¯ä»¥èŠ‚çœæ‰“å­—æ—¶é—´ï¼Œå¹¶ä¸”é€šè¿‡å‡å°‘é¢å¤–çš„æ–‡æœ¬é‡ï¼Œæ›´å®¹æ˜“çœ‹å‡ºå›¾è¡¨ä¹‹é—´çš„å·®å¼‚ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç¼–ç¨‹é—®é¢˜ï¼Œæˆ‘ä»¬å°†åœ¨ Chapter 25 ä¸­å†æ¬¡è®¨è®ºã€‚\nRewriting the previous plot more concisely yields:\næ›´ç®€æ´åœ°é‡å†™ä¹‹å‰çš„å›¾è¡¨ï¼Œå¾—åˆ°ï¼š\n\nggplot(penguins, aes(x = flipper_length_mm, y = body_mass_g)) + \n  geom_point()\n\nIn the future, youâ€™ll also learn about the pipe, |&gt;, which will allow you to create that plot with:\nå°†æ¥ï¼Œä½ è¿˜ä¼šå­¦åˆ°ç®¡é“ç¬¦ |&gt;ï¼Œå®ƒå°†å…è®¸ä½ ç”¨ä»¥ä¸‹æ–¹å¼åˆ›å»ºè¯¥å›¾è¡¨ï¼š\n\npenguins |&gt; \n  ggplot(aes(x = flipper_length_mm, y = body_mass_g)) + \n  geom_point()",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>1</span>Â  <span class='chapter-title'>Data visualization</span>"
    ]
  },
  {
    "objectID": "data-visualize.html#visualizing-distributions",
    "href": "data-visualize.html#visualizing-distributions",
    "title": "1Â  Data visualization",
    "section": "\n1.4 Visualizing distributions",
    "text": "1.4 Visualizing distributions\nHow you visualize the distribution of a variable depends on the type of variable: categorical or numerical.\nå¦‚ä½•å¯è§†åŒ–ä¸€ä¸ªå˜é‡çš„åˆ†å¸ƒå–å†³äºè¯¥å˜é‡çš„ç±»å‹ï¼šåˆ†ç±»å˜é‡æˆ–æ•°å€¼å˜é‡ã€‚\n\n1.4.1 A categorical variable\nA variable is categorical if it can only take one of a small set of values. To examine the distribution of a categorical variable, you can use a bar chart. The height of the bars displays how many observations occurred with each x value.\nå¦‚æœä¸€ä¸ªå˜é‡åªèƒ½å–ä¸€å°ç»„å€¼ä¸­çš„ä¸€ä¸ªï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯åˆ†ç±» (categorical) å˜é‡ã€‚è¦æ£€æŸ¥åˆ†ç±»å˜é‡çš„åˆ†å¸ƒï¼Œä½ å¯ä»¥ä½¿ç”¨æ¡å½¢å›¾ã€‚æ¡å½¢çš„é«˜åº¦æ˜¾ç¤ºäº†æ¯ä¸ª x å€¼å‡ºç°äº†å¤šå°‘æ¬¡è§‚æµ‹ã€‚\n\nggplot(penguins, aes(x = species)) +\n  geom_bar()\n\n\n\n\n\n\n\nIn bar plots of categorical variables with non-ordered levels, like the penguin species above, itâ€™s often preferable to reorder the bars based on their frequencies. Doing so requires transforming the variable to a factor (how R handles categorical data) and then reordering the levels of that factor.\nåœ¨å…·æœ‰æ— åºçº§åˆ«çš„åˆ†ç±»å˜é‡çš„æ¡å½¢å›¾ä¸­ï¼Œæ¯”å¦‚ä¸Šé¢çš„ä¼é¹… speciesï¼Œé€šå¸¸æœ€å¥½æ ¹æ®å®ƒä»¬çš„é¢‘ç‡é‡æ–°æ’åºæ¡å½¢ã€‚è¿™æ ·åšéœ€è¦å°†å˜é‡è½¬æ¢ä¸ºå› å­ï¼ˆR å¤„ç†åˆ†ç±»æ•°æ®çš„æ–¹å¼ï¼‰ï¼Œç„¶åé‡æ–°æ’åºè¯¥å› å­çš„çº§åˆ«ã€‚\n\nggplot(penguins, aes(x = fct_infreq(species))) +\n  geom_bar()\n\n\n\n\n\n\n\nYou will learn more about factors and functions for dealing with factors (like fct_infreq() shown above) in Chapter 16.\nä½ å°†åœ¨ Chapter 16 ä¸­å­¦ä¹ æ›´å¤šå…³äºå› å­ä»¥åŠå¤„ç†å› å­çš„å‡½æ•°ï¼ˆå¦‚ä¸Šé¢å±•ç¤ºçš„ fct_infreq()ï¼‰çš„çŸ¥è¯†ã€‚\n\n1.4.2 A numerical variable\nA variable is numerical (or quantitative) if it can take on a wide range of numerical values, and it is sensible to add, subtract, or take averages with those values. Numerical variables can be continuous or discrete.\nå¦‚æœä¸€ä¸ªå˜é‡å¯ä»¥å–å¹¿æ³›çš„æ•°å€¼ï¼Œå¹¶ä¸”å¯¹è¿™äº›å€¼è¿›è¡ŒåŠ ã€å‡æˆ–æ±‚å¹³å‡æ˜¯æœ‰æ„ä¹‰çš„ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯æ•°å€¼ (numerical)ï¼ˆæˆ–å®šé‡ï¼‰å˜é‡ã€‚æ•°å€¼å˜é‡å¯ä»¥æ˜¯è¿ç»­çš„æˆ–ç¦»æ•£çš„ã€‚\nOne commonly used visualization for distributions of continuous variables is a histogram.\nå¯¹äºè¿ç»­å˜é‡çš„åˆ†å¸ƒï¼Œä¸€ç§å¸¸ç”¨çš„å¯è§†åŒ–æ–¹æ³•æ˜¯ç›´æ–¹å›¾ã€‚\n\nggplot(penguins, aes(x = body_mass_g)) +\n  geom_histogram(binwidth = 200)\n\n\n\n\n\n\n\nA histogram divides the x-axis into equally spaced bins and then uses the height of a bar to display the number of observations that fall in each bin. In the graph above, the tallest bar shows that 39 observations have a body_mass_g value between 3,500 and 3,700 grams, which are the left and right edges of the bar.\nç›´æ–¹å›¾å°† x è½´åˆ’åˆ†ä¸ºç­‰è·çš„åŒºé—´ï¼ˆbinï¼‰ï¼Œç„¶åç”¨æ¡å½¢çš„é«˜åº¦æ¥æ˜¾ç¤ºè½å…¥æ¯ä¸ªåŒºé—´å†…çš„è§‚æµ‹æ•°é‡ã€‚åœ¨ä¸Šå›¾ä¸­ï¼Œæœ€é«˜çš„æ¡å½¢æ˜¾ç¤ºæœ‰ 39 ä¸ªè§‚æµ‹çš„ body_mass_g å€¼åœ¨ 3500 åˆ° 3700 å…‹ä¹‹é—´ï¼Œè¿™æ˜¯è¯¥æ¡å½¢çš„å·¦å³è¾¹ç¼˜ã€‚\nYou can set the width of the intervals in a histogram with the binwidth argument, which is measured in the units of the x variable. You should always explore a variety of binwidths when working with histograms, as different binwidths can reveal different patterns. In the plots below a binwidth of 20 is too narrow, resulting in too many bars, making it difficult to determine the shape of the distribution. Similarly, a binwidth of 2,000 is too high, resulting in all data being binned into only three bars, and also making it difficult to determine the shape of the distribution. A binwidth of 200 provides a sensible balance.\nä½ å¯ä»¥ä½¿ç”¨ binwidth å‚æ•°è®¾ç½®ç›´æ–¹å›¾ä¸­åŒºé—´çš„å®½åº¦ï¼Œè¯¥å‚æ•°ä»¥ x å˜é‡çš„å•ä½æ¥åº¦é‡ã€‚åœ¨ä½¿ç”¨ç›´æ–¹å›¾æ—¶ï¼Œä½ åº”è¯¥æ€»æ˜¯å°è¯•ä¸åŒçš„ binwidthï¼Œå› ä¸ºä¸åŒçš„å®½åº¦å¯ä»¥æ­ç¤ºä¸åŒçš„æ¨¡å¼ã€‚åœ¨ä¸‹é¢çš„å›¾è¡¨ä¸­ï¼Œ20 çš„ binwidth å¤ªçª„ï¼Œå¯¼è‡´æ¡å½¢è¿‡å¤šï¼Œéš¾ä»¥ç¡®å®šåˆ†å¸ƒçš„å½¢çŠ¶ã€‚åŒæ ·ï¼Œ2000 çš„ binwidth å¤ªé«˜ï¼Œå¯¼è‡´æ‰€æœ‰æ•°æ®åªè¢«åˆ†åˆ°ä¸‰ä¸ªæ¡å½¢ä¸­ï¼Œä¹Ÿéš¾ä»¥ç¡®å®šåˆ†å¸ƒçš„å½¢çŠ¶ã€‚200 çš„ binwidth æä¾›äº†ä¸€ä¸ªåˆç†çš„å¹³è¡¡ã€‚\nggplot(penguins, aes(x = body_mass_g)) +\n  geom_histogram(binwidth = 20)\nggplot(penguins, aes(x = body_mass_g)) +\n  geom_histogram(binwidth = 2000)\n\n\n\n\n\n\n\n\n\n\nAn alternative visualization for distributions of numerical variables is a density plot. A density plot is a smoothed-out version of a histogram and a practical alternative, particularly for continuous data that comes from an underlying smooth distribution. We wonâ€™t go into how geom_density() estimates the density (you can read more about that in the function documentation), but letâ€™s explain how the density curve is drawn with an analogy. Imagine a histogram made out of wooden blocks. Then, imagine that you drop a cooked spaghetti string over it. The shape the spaghetti will take draped over blocks can be thought of as the shape of the density curve. It shows fewer details than a histogram but can make it easier to quickly glean the shape of the distribution, particularly with respect to modes and skewness.\næ•°å€¼å˜é‡åˆ†å¸ƒçš„å¦ä¸€ç§å¯è§†åŒ–æ–¹æ³•æ˜¯å¯†åº¦å›¾ã€‚å¯†åº¦å›¾æ˜¯ç›´æ–¹å›¾çš„å¹³æ»‘ç‰ˆæœ¬ï¼Œæ˜¯ä¸€ç§å®ç”¨çš„æ›¿ä»£æ–¹æ¡ˆï¼Œç‰¹åˆ«æ˜¯å¯¹äºæ¥è‡ªåº•å±‚å¹³æ»‘åˆ†å¸ƒçš„è¿ç»­æ•°æ®ã€‚æˆ‘ä»¬ä¸ä¼šæ·±å…¥æ¢è®¨ geom_density() å¦‚ä½•ä¼°è®¡å¯†åº¦ï¼ˆä½ å¯ä»¥åœ¨å‡½æ•°æ–‡æ¡£ä¸­é˜…è¯»æ›´å¤šç›¸å…³å†…å®¹ï¼‰ï¼Œä½†è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªç±»æ¯”æ¥è§£é‡Šå¯†åº¦æ›²çº¿æ˜¯å¦‚ä½•ç»˜åˆ¶çš„ã€‚æƒ³è±¡ä¸€ä¸ªç”±æœ¨å—åˆ¶æˆçš„ç›´æ–¹å›¾ã€‚ç„¶åï¼Œæƒ³è±¡ä½ æŠŠä¸€æ ¹ç…®ç†Ÿçš„æ„å¤§åˆ©é¢æ¡æ‰”åœ¨ä¸Šé¢ã€‚æ„å¤§åˆ©é¢æ¡æŠ«åœ¨æœ¨å—ä¸Šçš„å½¢çŠ¶å¯ä»¥è¢«è®¤ä¸ºæ˜¯å¯†åº¦æ›²çº¿çš„å½¢çŠ¶ã€‚å®ƒæ¯”ç›´æ–¹å›¾æ˜¾ç¤ºçš„ç»†èŠ‚å°‘ï¼Œä½†å¯ä»¥æ›´å®¹æ˜“åœ°å¿«é€Ÿäº†è§£åˆ†å¸ƒçš„å½¢çŠ¶ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¼—æ•°å’Œååº¦æ–¹é¢ã€‚\n\nggplot(penguins, aes(x = body_mass_g)) +\n  geom_density()\n#&gt; Warning: Removed 2 rows containing non-finite outside the scale range\n#&gt; (`stat_density()`).\n\n\n\n\n\n\n\n\n1.4.3 Exercises\n\nMake a bar plot of species of penguins, where you assign species to the y aesthetic. How is this plot different?\nåˆ¶ä½œä¸€ä¸ª penguins çš„ species æ¡å½¢å›¾ï¼Œå…¶ä¸­ä½ å°† species åˆ†é…ç»™ y ç¾å­¦ã€‚è¿™ä¸ªå›¾æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ\nHow are the following two plots different? Which aesthetic, color or fill, is more useful for changing the color of bars?\n\nä¸‹é¢ä¸¤å¼ å›¾æœ‰ä»€ä¹ˆä¸åŒï¼Ÿå“ªä¸ªç¾å­¦ï¼Œcolor è¿˜æ˜¯ fillï¼Œå¯¹äºæ”¹å˜æ¡å½¢çš„é¢œè‰²æ›´æœ‰ç”¨ï¼Ÿ\n```{r} #| eval: false ggplot(penguins, aes(x = species)) + geom_bar(color = â€œredâ€)\nggplot(penguins, aes(x = species)) + geom_bar(fill = â€œredâ€) ```\n\nWhat does the bins argument in geom_histogram() do?\ngeom_histogram() ä¸­çš„ bins å‚æ•°æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ\nMake a histogram of the carat variable in the diamonds dataset that is available when you load the tidyverse package. Experiment with different binwidths. What binwidth reveals the most interesting patterns?\nåˆ¶ä½œä¸€ä¸ª diamonds æ•°æ®é›†ä¸­ carat å˜é‡çš„ç›´æ–¹å›¾ï¼Œè¯¥æ•°æ®é›†åœ¨åŠ è½½ tidyverse åŒ…æ—¶å¯ç”¨ã€‚å°è¯•ä¸åŒçš„ binwidthã€‚å“ªä¸ª binwidth æ­ç¤ºäº†æœ€æœ‰è¶£çš„æ¨¡å¼ï¼Ÿ",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>1</span>Â  <span class='chapter-title'>Data visualization</span>"
    ]
  },
  {
    "objectID": "data-visualize.html#visualizing-relationships",
    "href": "data-visualize.html#visualizing-relationships",
    "title": "1Â  Data visualization",
    "section": "\n1.5 Visualizing relationships",
    "text": "1.5 Visualizing relationships\nTo visualize a relationship we need to have at least two variables mapped to aesthetics of a plot. In the following sections you will learn about commonly used plots for visualizing relationships between two or more variables and the geoms used for creating them.\nè¦å¯è§†åŒ–ä¸€ä¸ªå…³ç³»ï¼Œæˆ‘ä»¬éœ€è¦å°†è‡³å°‘ä¸¤ä¸ªå˜é‡æ˜ å°„åˆ°å›¾è¡¨çš„ç¾å­¦ä¸Šã€‚åœ¨æ¥ä¸‹æ¥çš„éƒ¨åˆ†ä¸­ï¼Œä½ å°†å­¦ä¹ ç”¨äºå¯è§†åŒ–ä¸¤ä¸ªæˆ–å¤šä¸ªå˜é‡ä¹‹é—´å…³ç³»çš„å¸¸ç”¨å›¾è¡¨ï¼Œä»¥åŠç”¨äºåˆ›å»ºå®ƒä»¬çš„å‡ ä½•å¯¹è±¡ã€‚\n\n1.5.1 A numerical and a categorical variable\nTo visualize the relationship between a numerical and a categorical variable we can use side-by-side box plots. A boxplot is a type of visual shorthand for measures of position (percentiles) that describe a distribution. It is also useful for identifying potential outliers. As shown in FigureÂ 1.1, each boxplot consists of:\nè¦å¯è§†åŒ–æ•°å€¼å˜é‡å’Œåˆ†ç±»å˜é‡ä¹‹é—´çš„å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¹¶æ’çš„ç®±çº¿å›¾ã€‚ç®±çº¿å›¾ (boxplot) æ˜¯ä¸€ç§æè¿°åˆ†å¸ƒä½ç½®åº¦é‡ï¼ˆç™¾åˆ†ä½æ•°ï¼‰çš„è§†è§‰ç®€å†™ã€‚å®ƒå¯¹äºè¯†åˆ«æ½œåœ¨çš„å¼‚å¸¸å€¼ä¹Ÿå¾ˆæœ‰ç”¨ã€‚å¦‚ FigureÂ 1.1 æ‰€ç¤ºï¼Œæ¯ä¸ªç®±çº¿å›¾éƒ½åŒ…å«ï¼š\n\nA box that indicates the range of the middle half of the data, a distance known as the interquartile range (IQR), stretching from the 25th percentile of the distribution to the 75th percentile. In the middle of the box is a line that displays the median, i.e.Â 50th percentile, of the distribution. These three lines give you a sense of the spread of the distribution and whether or not the distribution is symmetric about the median or skewed to one side.\nä¸€ä¸ªç®±ä½“ï¼Œè¡¨ç¤ºæ•°æ®ä¸­é—´ä¸€åŠçš„èŒƒå›´ï¼Œè¿™ä¸ªè·ç¦»è¢«ç§°ä¸ºå››åˆ†ä½è· (interquartile range, IQR)ï¼Œä»åˆ†å¸ƒçš„ç¬¬ 25 ç™¾åˆ†ä½æ•°å»¶ä¼¸åˆ°ç¬¬ 75 ç™¾åˆ†ä½æ•°ã€‚ç®±ä½“ä¸­é—´æœ‰ä¸€æ¡çº¿ï¼Œæ˜¾ç¤ºåˆ†å¸ƒçš„ä¸­ä½æ•°ï¼Œå³ç¬¬ 50 ç™¾åˆ†ä½æ•°ã€‚è¿™ä¸‰æ¡çº¿è®©ä½ äº†è§£åˆ†å¸ƒçš„ç¦»æ•£ç¨‹åº¦ä»¥åŠåˆ†å¸ƒæ˜¯å¦å…³äºä¸­ä½æ•°å¯¹ç§°æˆ–åå‘ä¸€ä¾§ã€‚\nVisual points that display observations that fall more than 1.5 times the IQR from either edge of the box. These outlying points are unusual so are plotted individually.\nä¸€äº›è§†è§‰ç‚¹ï¼Œæ˜¾ç¤ºé‚£äº›è·ç¦»ç®±ä½“ä»»ä¸€è¾¹ç¼˜è¶…è¿‡ 1.5 å€ IQR çš„è§‚æµ‹å€¼ã€‚è¿™äº›ç¦»ç¾¤ç‚¹æ˜¯ä¸å¯»å¸¸çš„ï¼Œå› æ­¤ä¼šå•ç‹¬ç»˜åˆ¶ã€‚\nA line (or whisker) that extends from each end of the box and goes to the farthest non-outlier point in the distribution.\nä¸€æ¡ä»ç®±ä½“ä¸¤ç«¯å»¶ä¼¸å‡ºæ¥çš„çº¿ï¼ˆæˆ–ç§°ä¸ºèƒ¡é¡»ï¼‰ï¼Œä¸€ç›´å»¶ä¼¸åˆ°åˆ†å¸ƒä¸­æœ€è¿œçš„éç¦»ç¾¤ç‚¹ã€‚\n\n\n\n\n\n\n\n\nFigureÂ 1.1: Diagram depicting how a boxplot is created.\n\n\n\n\nLetâ€™s take a look at the distribution of body mass by species using geom_boxplot():\nè®©æˆ‘ä»¬ä½¿ç”¨ geom_boxplot() æ¥æŸ¥çœ‹æŒ‰ç‰©ç§åˆ’åˆ†çš„ä½“é‡åˆ†å¸ƒï¼š\n\nggplot(penguins, aes(x = species, y = body_mass_g)) +\n  geom_boxplot()\n\n\n\n\n\n\n\nAlternatively, we can make density plots with geom_density().\næˆ–è€…ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ geom_density() åˆ¶ä½œå¯†åº¦å›¾ã€‚\n\nggplot(penguins, aes(x = body_mass_g, color = species)) +\n  geom_density(linewidth = 0.75)\n\n\n\n\n\n\n\nWeâ€™ve also customized the thickness of the lines using the linewidth argument in order to make them stand out a bit more against the background.\næˆ‘ä»¬è¿˜ä½¿ç”¨äº† linewidth å‚æ•°è‡ªå®šä¹‰äº†çº¿æ¡çš„ç²—ç»†ï¼Œä»¥ä½¿å®ƒä»¬åœ¨èƒŒæ™¯ä¸­æ›´çªå‡ºä¸€äº›ã€‚\nAdditionally, we can map species to both color and fill aesthetics and use the alpha aesthetic to add transparency to the filled density curves. This aesthetic takes values between 0 (completely transparent) and 1 (completely opaque). In the following plot itâ€™s set to 0.5.\næ­¤å¤–ï¼Œæˆ‘ä»¬å¯ä»¥å°† species æ˜ å°„åˆ° color å’Œ fill ä¸¤ä¸ªç¾å­¦ä¸Šï¼Œå¹¶ä½¿ç”¨ alpha ç¾å­¦ä¸ºå¡«å……çš„å¯†åº¦æ›²çº¿æ·»åŠ é€æ˜åº¦ã€‚è¿™ä¸ªç¾å­¦çš„å€¼ä»‹äº 0ï¼ˆå®Œå…¨é€æ˜ï¼‰å’Œ 1ï¼ˆå®Œå…¨ä¸é€æ˜ï¼‰ä¹‹é—´ã€‚åœ¨ä¸‹é¢çš„å›¾è¡¨ä¸­ï¼Œå®ƒè¢«è®¾ç½®ä¸º 0.5ã€‚\n\nggplot(penguins, aes(x = body_mass_g, color = species, fill = species)) +\n  geom_density(alpha = 0.5)\n\n\n\n\n\n\n\nNote the terminology we have used here:\næ³¨æ„æˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨çš„æœ¯è¯­ï¼š\n\nWe map variables to aesthetics if we want the visual attribute represented by that aesthetic to vary based on the values of that variable.\nOtherwise, we set the value of an aesthetic.\nå¦‚æœå¸Œæœ›ç”±æŸä¸ªç¾å­¦è¡¨ç¤ºçš„è§†è§‰å±æ€§æ ¹æ®æŸä¸ªå˜é‡çš„å€¼è€Œå˜åŒ–ï¼Œæˆ‘ä»¬å°±å°†å˜é‡æ˜ å°„ (map) åˆ°è¯¥ç¾å­¦ã€‚\nå¦åˆ™ï¼Œæˆ‘ä»¬å°±è®¾ç½® (set) è¯¥ç¾å­¦çš„å€¼ã€‚\n\n1.5.2 Two categorical variables\nWe can use stacked bar plots to visualize the relationship between two categorical variables. For example, the following two stacked bar plots both display the relationship between island and species, or specifically, visualizing the distribution of species within each island.\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨å †å æ¡å½¢å›¾æ¥å¯è§†åŒ–ä¸¤ä¸ªåˆ†ç±»å˜é‡ä¹‹é—´çš„å…³ç³»ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä¸¤ä¸ªå †å æ¡å½¢å›¾éƒ½æ˜¾ç¤ºäº† island å’Œ species ä¹‹é—´çš„å…³ç³»ï¼Œæˆ–è€…å…·ä½“æ¥è¯´ï¼Œå¯è§†åŒ–äº†æ¯ä¸ªå²›å±¿å†… species çš„åˆ†å¸ƒã€‚\nThe first plot shows the frequencies of each species of penguins on each island. The plot of frequencies shows that there are equal numbers of Adelies on each island. But we donâ€™t have a good sense of the percentage balance within each island.\nç¬¬ä¸€å¼ å›¾æ˜¾ç¤ºäº†æ¯ä¸ªå²›å±¿ä¸Šæ¯ç§ä¼é¹…çš„é¢‘ç‡ã€‚é¢‘ç‡å›¾æ˜¾ç¤ºï¼Œæ¯ä¸ªå²›å±¿ä¸Šçš„é˜¿å¾·åˆ©ä¼é¹…æ•°é‡ç›¸ç­‰ã€‚ä½†æˆ‘ä»¬æ— æ³•å¾ˆå¥½åœ°äº†è§£æ¯ä¸ªå²›å±¿å†…éƒ¨çš„ç™¾åˆ†æ¯”å¹³è¡¡ã€‚\n\nggplot(penguins, aes(x = island, fill = species)) +\n  geom_bar()\n\n\n\n\n\n\n\nThe second plot, a relative frequency plot created by setting position = \"fill\" in the geom, is more useful for comparing species distributions across islands since itâ€™s not affected by the unequal numbers of penguins across the islands. Using this plot we can see that Gentoo penguins all live on Biscoe island and make up roughly 75% of the penguins on that island, Chinstrap all live on Dream island and make up roughly 50% of the penguins on that island, and Adelie live on all three islands and make up all of the penguins on Torgersen.\nç¬¬äºŒå¼ å›¾ï¼Œä¸€ä¸ªé€šè¿‡åœ¨å‡ ä½•å¯¹è±¡ä¸­è®¾ç½® position = \"fill\" åˆ›å»ºçš„ç›¸å¯¹é¢‘ç‡å›¾ï¼Œåœ¨æ¯”è¾ƒå„å²›å±¿é—´ç‰©ç§åˆ†å¸ƒæ—¶æ›´æœ‰ç”¨ï¼Œå› ä¸ºå®ƒä¸å—å„å²›å±¿ä¼é¹…æ•°é‡ä¸ç­‰çš„å½±å“ã€‚ä½¿ç”¨è¿™å¼ å›¾æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ‰€æœ‰å·´å¸ƒäºšä¼é¹…éƒ½ç”Ÿæ´»åœ¨æ¯”æ–¯ç§‘å²›ä¸Šï¼Œçº¦å è¯¥å²›ä¼é¹…çš„ 75%ï¼›æ‰€æœ‰å¸½å¸¦ä¼é¹…éƒ½ç”Ÿæ´»åœ¨æ¢¦å¹»å²›ä¸Šï¼Œçº¦å è¯¥å²›ä¼é¹…çš„ 50%ï¼›è€Œé˜¿å¾·åˆ©ä¼é¹…ç”Ÿæ´»åœ¨æ‰€æœ‰ä¸‰ä¸ªå²›å±¿ä¸Šï¼Œå¹¶æ„æˆäº†ç‰¹æ ¼å°”æ£®å²›ä¸Šçš„å…¨éƒ¨ä¼é¹…ã€‚\n\nggplot(penguins, aes(x = island, fill = species)) +\n  geom_bar(position = \"fill\")\n\n\n\n\n\n\n\nIn creating these bar charts, we map the variable that will be separated into bars to the x aesthetic, and the variable that will change the colors inside the bars to the fill aesthetic.\nåœ¨åˆ›å»ºè¿™äº›æ¡å½¢å›¾æ—¶ï¼Œæˆ‘ä»¬å°†è¦è¢«åˆ†æˆæ¡å½¢çš„å˜é‡æ˜ å°„åˆ° x ç¾å­¦ï¼Œå°†è¦æ”¹å˜æ¡å½¢å†…éƒ¨é¢œè‰²çš„å˜é‡æ˜ å°„åˆ° fill ç¾å­¦ã€‚\n\n1.5.3 Two numerical variables\nSo far youâ€™ve learned about scatterplots (created with geom_point()) and smooth curves (created with geom_smooth()) for visualizing the relationship between two numerical variables. A scatterplot is probably the most commonly used plot for visualizing the relationship between two numerical variables.\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ å·²ç»å­¦ä¹ äº†ç”¨äºå¯è§†åŒ–ä¸¤ä¸ªæ•°å€¼å˜é‡ä¹‹é—´å…³ç³»çš„æ•£ç‚¹å›¾ï¼ˆç”¨ geom_point() åˆ›å»ºï¼‰å’Œå¹³æ»‘æ›²çº¿ï¼ˆç”¨ geom_smooth() åˆ›å»ºï¼‰ã€‚æ•£ç‚¹å›¾å¯èƒ½æ˜¯å¯è§†åŒ–ä¸¤ä¸ªæ•°å€¼å˜é‡ä¹‹é—´å…³ç³»æœ€å¸¸ç”¨çš„å›¾è¡¨ã€‚\n\nggplot(penguins, aes(x = flipper_length_mm, y = body_mass_g)) +\n  geom_point()\n\n\n\n\n\n\n\n\n1.5.4 Three or more variables\nAs we saw in Section 1.2.4, we can incorporate more variables into a plot by mapping them to additional aesthetics. For example, in the following scatterplot the colors of points represent species and the shapes of points represent islands.\næ­£å¦‚æˆ‘ä»¬åœ¨ Section 1.2.4 ä¸­çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å°†æ›´å¤šå˜é‡æ˜ å°„åˆ°é¢å¤–çš„ç¾å­¦ä¸Šï¼Œå°†å®ƒä»¬æ•´åˆåˆ°å›¾è¡¨ä¸­ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„æ•£ç‚¹å›¾ä¸­ï¼Œç‚¹çš„é¢œè‰²ä»£è¡¨ç‰©ç§ï¼Œç‚¹çš„å½¢çŠ¶ä»£è¡¨å²›å±¿ã€‚\n\nggplot(penguins, aes(x = flipper_length_mm, y = body_mass_g)) +\n  geom_point(aes(color = species, shape = island))\n\n\n\n\n\n\n\nHowever adding too many aesthetic mappings to a plot makes it cluttered and difficult to make sense of. Another way, which is particularly useful for categorical variables, is to split your plot into facets, subplots that each display one subset of the data.\nç„¶è€Œï¼Œå‘å›¾è¡¨ä¸­æ·»åŠ è¿‡å¤šçš„ç¾å­¦æ˜ å°„ä¼šä½¿å…¶å˜å¾—æ‚ä¹±æ— ç« ï¼Œéš¾ä»¥ç†è§£ã€‚å¦ä¸€ç§æ–¹æ³•ï¼Œç‰¹åˆ«æ˜¯å¯¹äºåˆ†ç±»å˜é‡å¾ˆæœ‰ç”¨ï¼Œå°±æ˜¯å°†ä½ çš„å›¾è¡¨åˆ†å‰²æˆåˆ†é¢ (facets)ï¼Œå³æ¯ä¸ªå­å›¾æ˜¾ç¤ºæ•°æ®çš„ä¸€ä¸ªå­é›†ã€‚\nTo facet your plot by a single variable, use facet_wrap(). The first argument of facet_wrap() is a formula5, which you create with ~ followed by a variable name. The variable that you pass to facet_wrap() should be categorical.\nè¦æŒ‰å•ä¸ªå˜é‡å¯¹å›¾è¡¨è¿›è¡Œåˆ†é¢ï¼Œè¯·ä½¿ç”¨ facet_wrap()ã€‚facet_wrap() çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå…¬å¼6ï¼Œä½ é€šè¿‡ ~ åè·Ÿä¸€ä¸ªå˜é‡åæ¥åˆ›å»ºå®ƒã€‚ä¼ é€’ç»™ facet_wrap() çš„å˜é‡åº”è¯¥æ˜¯åˆ†ç±»å˜é‡ã€‚\n\nggplot(penguins, aes(x = flipper_length_mm, y = body_mass_g)) +\n  geom_point(aes(color = species, shape = species)) +\n  facet_wrap(~island)\n\n\n\n\n\n\n\nYou will learn about many other geoms for visualizing distributions of variables and relationships between them in Chapter 9.\nä½ å°†åœ¨ Chapter 9 ä¸­å­¦ä¹ è®¸å¤šå…¶ä»–ç”¨äºå¯è§†åŒ–å˜é‡åˆ†å¸ƒå’Œå®ƒä»¬ä¹‹é—´å…³ç³»çš„å‡ ä½•å¯¹è±¡ã€‚\n\n1.5.5 Exercises\n\nThe mpg data frame that is bundled with the ggplot2 package contains 234 observations collected by the US Environmental Protection Agency on 38 car models. Which variables in mpg are categorical? Which variables are numerical? (Hint: Type ?mpg to read the documentation for the dataset.) How can you see this information when you run mpg?\nä¸ ggplot2 åŒ…æ†ç»‘çš„ mpg æ•°æ®æ¡†åŒ…å«ç”±ç¾å›½ç¯å¢ƒä¿æŠ¤ç½²æ”¶é›†çš„ 38 ç§æ±½è½¦æ¨¡å‹çš„ 234 æ¡è§‚æµ‹æ•°æ®ã€‚mpg ä¸­çš„å“ªäº›å˜é‡æ˜¯åˆ†ç±»å˜é‡ï¼Ÿå“ªäº›å˜é‡æ˜¯æ•°å€¼å˜é‡ï¼Ÿï¼ˆæç¤ºï¼šè¾“å…¥ ?mpg é˜…è¯»æ•°æ®é›†çš„æ–‡æ¡£ã€‚ï¼‰å½“ä½ è¿è¡Œ mpg æ—¶ï¼Œå¦‚ä½•çœ‹åˆ°è¿™äº›ä¿¡æ¯ï¼Ÿ\nMake a scatterplot of hwy vs.Â displ using the mpg data frame. Next, map a third, numerical variable to color, then size, then both color and size, then shape. How do these aesthetics behave differently for categorical vs.Â numerical variables?\nä½¿ç”¨ mpg æ•°æ®æ¡†åˆ¶ä½œä¸€ä¸ª hwy å¯¹ displ çš„æ•£ç‚¹å›¾ã€‚æ¥ä¸‹æ¥ï¼Œå°†ç¬¬ä¸‰ä¸ªæ•°å€¼å˜é‡æ˜ å°„åˆ° colorï¼Œç„¶åæ˜¯ sizeï¼Œç„¶åæ˜¯ color å’Œ sizeï¼Œæœ€åæ˜¯ shapeã€‚è¿™äº›ç¾å­¦å¯¹äºåˆ†ç±»å˜é‡å’Œæ•°å€¼å˜é‡çš„è¡Œä¸ºæœ‰ä½•ä¸åŒï¼Ÿ\nIn the scatterplot of hwy vs.Â displ, what happens if you map a third variable to linewidth?\nåœ¨ hwy å¯¹ displ çš„æ•£ç‚¹å›¾ä¸­ï¼Œå¦‚æœå°†ç¬¬ä¸‰ä¸ªå˜é‡æ˜ å°„åˆ° linewidth ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ\nWhat happens if you map the same variable to multiple aesthetics?\nå¦‚æœå°†åŒä¸€ä¸ªå˜é‡æ˜ å°„åˆ°å¤šä¸ªç¾å­¦ä¸Šä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ\nMake a scatterplot of bill_depth_mm vs.Â bill_length_mm and color the points by species. What does adding coloring by species reveal about the relationship between these two variables? What about faceting by species?\nåˆ¶ä½œä¸€ä¸ª bill_depth_mm å¯¹ bill_length_mm çš„æ•£ç‚¹å›¾ï¼Œå¹¶æŒ‰ species ä¸ºç‚¹ç€è‰²ã€‚æŒ‰ç‰©ç§ç€è‰²æ­ç¤ºäº†è¿™ä¸¤ä¸ªå˜é‡ä¹‹é—´å…³ç³»çš„ä»€ä¹ˆä¿¡æ¯ï¼ŸæŒ‰ species åˆ†é¢åˆå¦‚ä½•å‘¢ï¼Ÿ\nWhy does the following yield two separate legends? How would you fix it to combine the two legends?\n\nä¸ºä»€ä¹ˆä¸‹é¢çš„ä»£ç ä¼šäº§ç”Ÿä¸¤ä¸ªç‹¬ç«‹çš„å›¾ä¾‹ï¼Ÿä½ å°†å¦‚ä½•ä¿®å¤å®ƒä»¥åˆå¹¶è¿™ä¸¤ä¸ªå›¾ä¾‹ï¼Ÿ\n{r}     #| warning: false     #| fig-show: hide     ggplot(       data = penguins,       mapping = aes(         x = bill_length_mm, y = bill_depth_mm,          color = species, shape = species       )     ) +       geom_point() +       labs(color = \"Species\")\n\nCreate the two following stacked bar plots. Which question can you answer with the first one? Which question can you answer with the second one?\n\nåˆ›å»ºä»¥ä¸‹ä¸¤ä¸ªå †å æ¡å½¢å›¾ã€‚ä½ å¯ä»¥ç”¨ç¬¬ä¸€ä¸ªå›ç­”ä»€ä¹ˆé—®é¢˜ï¼Ÿä½ å¯ä»¥ç”¨ç¬¬äºŒä¸ªå›ç­”ä»€ä¹ˆé—®é¢˜ï¼Ÿ\n{r}     #| fig-show: hide     ggplot(penguins, aes(x = island, fill = species)) +       geom_bar(position = \"fill\")     ggplot(penguins, aes(x = species, fill = island)) +       geom_bar(position = \"fill\")",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>1</span>Â  <span class='chapter-title'>Data visualization</span>"
    ]
  },
  {
    "objectID": "data-visualize.html#sec-ggsave",
    "href": "data-visualize.html#sec-ggsave",
    "title": "1Â  Data visualization",
    "section": "\n1.6 Saving your plots",
    "text": "1.6 Saving your plots\nOnce youâ€™ve made a plot, you might want to get it out of R by saving it as an image that you can use elsewhere. Thatâ€™s the job of ggsave(), which will save the plot most recently created to disk:\nä¸€æ—¦ä½ åˆ¶ä½œäº†ä¸€ä¸ªå›¾è¡¨ï¼Œä½ å¯èƒ½æƒ³æŠŠå®ƒä» R ä¸­å¯¼å‡ºæ¥ï¼Œä¿å­˜ä¸ºä¸€å¼ å›¾ç‰‡ä»¥ä¾¿åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨ã€‚è¿™æ˜¯ ggsave() çš„å·¥ä½œï¼Œå®ƒä¼šå°†æœ€è¿‘åˆ›å»ºçš„å›¾è¡¨ä¿å­˜åˆ°ç£ç›˜ä¸Šï¼š\n\nggplot(penguins, aes(x = flipper_length_mm, y = body_mass_g)) +\n  geom_point()\nggsave(filename = \"penguin-plot.png\")\n\nThis will save your plot to your working directory, a concept youâ€™ll learn more about in Chapter 6.\nè¿™ä¼šå°†ä½ çš„å›¾è¡¨ä¿å­˜åˆ°ä½ çš„å·¥ä½œç›®å½•ä¸­ï¼Œå…³äºè¿™ä¸ªæ¦‚å¿µä½ å°†åœ¨ Chapter 6 ä¸­å­¦åˆ°æ›´å¤šã€‚\nIf you donâ€™t specify the width and height they will be taken from the dimensions of the current plotting device. For reproducible code, youâ€™ll want to specify them. You can learn more about ggsave() in the documentation.\nå¦‚æœä½ ä¸æŒ‡å®š width å’Œ heightï¼Œå®ƒä»¬å°†å–è‡ªå½“å‰ç»˜å›¾è®¾å¤‡çš„å°ºå¯¸ã€‚ä¸ºäº†ä»£ç çš„å¯é‡ç°æ€§ï¼Œä½ ä¼šæƒ³è¦æŒ‡å®šå®ƒä»¬ã€‚ä½ å¯ä»¥åœ¨æ–‡æ¡£ä¸­äº†è§£æ›´å¤šå…³äº ggsave() çš„ä¿¡æ¯ã€‚\nGenerally, however, we recommend that you assemble your final reports using Quarto, a reproducible authoring system that allows you to interleave your code and your prose and automatically include your plots in your write-ups. You will learn more about Quarto in Chapter 28.\nç„¶è€Œï¼Œé€šå¸¸æˆ‘ä»¬å»ºè®®ä½ ä½¿ç”¨ Quarto æ¥ç»„ç»‡ä½ çš„æœ€ç»ˆæŠ¥å‘Šï¼Œè¿™æ˜¯ä¸€ä¸ªå¯é‡ç°çš„åˆ›ä½œç³»ç»Ÿï¼Œå®ƒå…è®¸ä½ å°†ä»£ç å’Œæ•£æ–‡äº¤ç»‡åœ¨ä¸€èµ·ï¼Œå¹¶è‡ªåŠ¨å°†ä½ çš„å›¾è¡¨åŒ…å«åœ¨ä½ çš„æŠ¥å‘Šä¸­ã€‚ä½ å°†åœ¨ Chapter 28 ä¸­å­¦ä¹ æ›´å¤šå…³äº Quarto çš„çŸ¥è¯†ã€‚\n\n1.6.1 Exercises\n\nRun the following lines of code. Which of the two plots is saved as mpg-plot.png? Why?\n\nè¿è¡Œä»¥ä¸‹ä»£ç è¡Œã€‚å“ªä¸€å¼ å›¾è¢«ä¿å­˜ä¸º mpg-plot.pngï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ\n{r}     #| eval: false     ggplot(mpg, aes(x = class)) +       geom_bar()     ggplot(mpg, aes(x = cty, y = hwy)) +       geom_point()     ggsave(\"mpg-plot.png\")\n\nWhat do you need to change in the code above to save the plot as a PDF instead of a PNG? How could you find out what types of image files would work in ggsave()?\nåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œä½ éœ€è¦æ”¹å˜ä»€ä¹ˆæ‰èƒ½å°†å›¾è¡¨ä¿å­˜ä¸º PDF è€Œä¸æ˜¯ PNGï¼Ÿä½ å¦‚ä½•æ‰¾å‡º ggsave() å¯ä»¥ä½¿ç”¨å“ªäº›ç±»å‹çš„å›¾åƒæ–‡ä»¶ï¼Ÿ",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>1</span>Â  <span class='chapter-title'>Data visualization</span>"
    ]
  },
  {
    "objectID": "data-visualize.html#common-problems",
    "href": "data-visualize.html#common-problems",
    "title": "1Â  Data visualization",
    "section": "\n1.7 Common problems",
    "text": "1.7 Common problems\nAs you start to run R code, youâ€™re likely to run into problems. Donâ€™t worry â€” it happens to everyone. We have all been writing R code for years, but every day we still write code that doesnâ€™t work on the first try!\nå½“ä½ å¼€å§‹è¿è¡Œ R ä»£ç æ—¶ï¼Œä½ å¾ˆå¯èƒ½ä¼šé‡åˆ°é—®é¢˜ã€‚åˆ«æ‹…å¿ƒâ€”â€”è¿™å‘ç”Ÿåœ¨æ¯ä¸ªäººèº«ä¸Šã€‚æˆ‘ä»¬éƒ½å†™äº†å¾ˆå¤šå¹´çš„ R ä»£ç ï¼Œä½†æ¯å¤©æˆ‘ä»¬ä»ç„¶ä¼šå†™å‡ºç¬¬ä¸€æ¬¡å°è¯•å°±ä¸å·¥ä½œçš„ä»£ç ï¼\nStart by carefully comparing the code that youâ€™re running to the code in the book. R is extremely picky, and a misplaced character can make all the difference. Make sure that every ( is matched with a ) and every \" is paired with another \". Sometimes youâ€™ll run the code and nothing happens. Check the left-hand of your console: if itâ€™s a +, it means that R doesnâ€™t think youâ€™ve typed a complete expression and itâ€™s waiting for you to finish it. In this case, itâ€™s usually easy to start from scratch again by pressing ESCAPE to abort processing the current command.\né¦–å…ˆä»”ç»†æ¯”è¾ƒä½ æ­£åœ¨è¿è¡Œçš„ä»£ç å’Œä¹¦ä¸­çš„ä»£ç ã€‚R éå¸¸æŒ‘å‰”ï¼Œä¸€ä¸ªæ”¾é”™ä½ç½®çš„å­—ç¬¦éƒ½å¯èƒ½é€ æˆå¤©å£¤ä¹‹åˆ«ã€‚ç¡®ä¿æ¯ä¸ª ( éƒ½ä¸ä¸€ä¸ª ) åŒ¹é…ï¼Œæ¯ä¸ª \" éƒ½ä¸å¦ä¸€ä¸ª \" é…å¯¹ã€‚æœ‰æ—¶ä½ è¿è¡Œä»£ç åä»€ä¹ˆä¹Ÿæ²¡å‘ç”Ÿã€‚æ£€æŸ¥ä½ çš„æ§åˆ¶å°å·¦ä¾§ï¼šå¦‚æœæ˜¯ä¸€ä¸ª +ï¼Œè¿™æ„å‘³ç€ R è®¤ä¸ºä½ è¿˜æ²¡æœ‰è¾“å…¥ä¸€ä¸ªå®Œæ•´çš„è¡¨è¾¾å¼ï¼Œå®ƒæ­£åœ¨ç­‰ä½ å®Œæˆã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé€šå¸¸å¾ˆå®¹æ˜“é€šè¿‡æŒ‰ ESCAPE é”®ä¸­æ­¢å¤„ç†å½“å‰å‘½ä»¤æ¥é‡æ–°å¼€å§‹ã€‚\nOne common problem when creating ggplot2 graphics is to put the + in the wrong place: it has to come at the end of the line, not the start. In other words, make sure you havenâ€™t accidentally written code like this:\nåœ¨åˆ›å»º ggplot2 å›¾å½¢æ—¶ï¼Œä¸€ä¸ªå¸¸è§çš„é—®é¢˜æ˜¯æŠŠ + æ”¾åœ¨äº†é”™è¯¯çš„ä½ç½®ï¼šå®ƒå¿…é¡»æ”¾åœ¨è¡Œçš„æœ«å°¾ï¼Œè€Œä¸æ˜¯å¼€å¤´ã€‚æ¢å¥è¯è¯´ï¼Œç¡®ä¿ä½ æ²¡æœ‰æ„å¤–åœ°å†™å‡ºè¿™æ ·çš„ä»£ç ï¼š\n\nggplot(data = mpg) \n+ geom_point(mapping = aes(x = displ, y = hwy))\n\nIf youâ€™re still stuck, try the help. You can get help about any R function by running ?function_name in the console, or highlighting the function name and pressing F1 in RStudio. Donâ€™t worry if the help doesnâ€™t seem that helpful - instead skip down to the examples and look for code that matches what youâ€™re trying to do.\nå¦‚æœä½ ä»ç„¶å¡ä½äº†ï¼Œè¯•è¯•å¸®åŠ©ã€‚ä½ å¯ä»¥é€šè¿‡åœ¨æ§åˆ¶å°ä¸­è¿è¡Œ ?function_name æ¥è·å–ä»»ä½• R å‡½æ•°çš„å¸®åŠ©ï¼Œæˆ–è€…åœ¨ RStudio ä¸­é«˜äº®å‡½æ•°åå¹¶æŒ‰ F1ã€‚å¦‚æœå¸®åŠ©çœ‹èµ·æ¥ä¸é‚£ä¹ˆæœ‰ç”¨ï¼Œä¹Ÿä¸è¦æ‹…å¿ƒâ€”â€”ç›´æ¥è·³åˆ°ç¤ºä¾‹éƒ¨åˆ†ï¼Œå¯»æ‰¾ä¸ä½ æ­£åœ¨å°è¯•åšçš„äº‹æƒ…ç›¸åŒ¹é…çš„ä»£ç ã€‚\nIf that doesnâ€™t help, carefully read the error message. Sometimes the answer will be buried there! But when youâ€™re new to R, even if the answer is in the error message, you might not yet know how to understand it. Another great tool is Google: try googling the error message, as itâ€™s likely someone else has had the same problem, and has gotten help online.\nå¦‚æœé‚£æ²¡æœ‰å¸®åŠ©ï¼Œä»”ç»†é˜…è¯»é”™è¯¯ä¿¡æ¯ã€‚æœ‰æ—¶ç­”æ¡ˆå°±åŸ‹è—åœ¨é‚£é‡Œï¼ä½†æ˜¯å½“ä½ åˆšæ¥è§¦ R æ—¶ï¼Œå³ä½¿ç­”æ¡ˆåœ¨é”™è¯¯ä¿¡æ¯ä¸­ï¼Œä½ å¯èƒ½è¿˜ä¸çŸ¥é“å¦‚ä½•ç†è§£å®ƒã€‚å¦ä¸€ä¸ªå¾ˆæ£’çš„å·¥å…·æ˜¯è°·æ­Œï¼šå°è¯•ç”¨è°·æ­Œæœç´¢é”™è¯¯ä¿¡æ¯ï¼Œå› ä¸ºå¾ˆå¯èƒ½å…¶ä»–äººä¹Ÿé‡åˆ°è¿‡åŒæ ·çš„é—®é¢˜ï¼Œå¹¶ä¸”åœ¨ç½‘ä¸Šå¾—åˆ°äº†å¸®åŠ©ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>1</span>Â  <span class='chapter-title'>Data visualization</span>"
    ]
  },
  {
    "objectID": "data-visualize.html#summary",
    "href": "data-visualize.html#summary",
    "title": "1Â  Data visualization",
    "section": "\n1.8 Summary",
    "text": "1.8 Summary\nIn this chapter, youâ€™ve learned the basics of data visualization with ggplot2. We started with the basic idea that underpins ggplot2: a visualization is a mapping from variables in your data to aesthetic properties like position, color, size and shape. You then learned about increasing the complexity and improving the presentation of your plots layer-by-layer. You also learned about commonly used plots for visualizing the distribution of a single variable as well as for visualizing relationships between two or more variables, by leveraging additional aesthetic mappings and/or splitting your plot into small multiples using faceting.\nåœ¨æœ¬ç« ä¸­ï¼Œä½ å­¦ä¹ äº†ç”¨ ggplot2 è¿›è¡Œæ•°æ®å¯è§†åŒ–çš„åŸºç¡€çŸ¥è¯†ã€‚æˆ‘ä»¬ä»æ”¯æ’‘ ggplot2 çš„åŸºæœ¬æ€æƒ³å¼€å§‹ï¼šå¯è§†åŒ–æ˜¯å°†æ•°æ®ä¸­çš„å˜é‡æ˜ å°„åˆ°è¯¸å¦‚ä½ç½®ã€é¢œè‰²ã€å¤§å°å’Œå½¢çŠ¶ç­‰ç¾å­¦å±æ€§ã€‚ç„¶åä½ å­¦ä¹ äº†å¦‚ä½•é€å±‚å¢åŠ å›¾è¡¨çš„å¤æ‚æ€§å’Œæ”¹å–„å…¶å‘ˆç°æ–¹å¼ã€‚ä½ è¿˜å­¦ä¹ äº†ç”¨äºå¯è§†åŒ–å•ä¸ªå˜é‡åˆ†å¸ƒä»¥åŠå¯è§†åŒ–ä¸¤ä¸ªæˆ–å¤šä¸ªå˜é‡ä¹‹é—´å…³ç³»çš„å¸¸ç”¨å›¾è¡¨ï¼Œæ–¹æ³•æ˜¯åˆ©ç”¨é¢å¤–çš„ç¾å­¦æ˜ å°„å’Œ/æˆ–ä½¿ç”¨åˆ†é¢å°†å›¾è¡¨åˆ†å‰²æˆå°å€æ•°å›¾ã€‚\nWeâ€™ll use visualizations again and again throughout this book, introducing new techniques as we need them as well as do a deeper dive into creating visualizations with ggplot2 in Chapter 9 through Chapter 11.\nåœ¨æœ¬ä¹¦ä¸­ï¼Œæˆ‘ä»¬å°†åå¤ä½¿ç”¨å¯è§†åŒ–ï¼Œåœ¨éœ€è¦æ—¶ä»‹ç»æ–°æŠ€æœ¯ï¼Œå¹¶åœ¨ Chapter 9 åˆ° Chapter 11 ä¸­æ›´æ·±å…¥åœ°æ¢è®¨ç”¨ ggplot2 åˆ›å»ºå¯è§†åŒ–ã€‚\nWith the basics of visualization under your belt, in the next chapter weâ€™re going to switch gears a little and give you some practical workflow advice. We intersperse workflow advice with data science tools throughout this part of the book because itâ€™ll help you stay organized as you write increasing amounts of R code.\næŒæ¡äº†å¯è§†åŒ–çš„åŸºç¡€çŸ¥è¯†åï¼Œåœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†ç¨å¾®è½¬æ¢ä¸€ä¸‹æ€è·¯ï¼Œç»™ä½ ä¸€äº›å®ç”¨çš„å·¥ä½œæµç¨‹å»ºè®®ã€‚æˆ‘ä»¬åœ¨æœ¬ä¹¦çš„è¿™ä¸€éƒ¨åˆ†å°†å·¥ä½œæµç¨‹å»ºè®®ä¸æ•°æ®ç§‘å­¦å·¥å…·ç©¿æ’åœ¨ä¸€èµ·ï¼Œå› ä¸ºå½“ä½ ç¼–å†™è¶Šæ¥è¶Šå¤šçš„ R ä»£ç æ—¶ï¼Œè¿™å°†å¸®åŠ©ä½ ä¿æŒæ¡ç†ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>1</span>Â  <span class='chapter-title'>Data visualization</span>"
    ]
  },
  {
    "objectID": "data-visualize.html#footnotes",
    "href": "data-visualize.html#footnotes",
    "title": "1Â  Data visualization",
    "section": "",
    "text": "You can eliminate that message and force conflict resolution to happen on demand by using the conflicted package, which becomes more important as you load more packages. You can learn more about conflicted at https://conflicted.r-lib.org.â†©ï¸\nYou can eliminate that message and force conflict resolution to happen on demand by using the conflicted package, which becomes more important as you load more packages. You can learn more about conflicted at https://conflicted.r-lib.org.â†©ï¸\nHorst AM, Hill AP, Gorman KB (2020). palmerpenguins: Palmer Archipelago (Antarctica) penguin data. R package version 0.1.0. https://allisonhorst.github.io/palmerpenguins/. doi: 10.5281/zenodo.3960218.â†©ï¸\nHorst AM, Hill AP, Gorman KB (2020). palmerpenguins: Palmer Archipelago (Antarctica) penguin data. R package version 0.1.0. https://allisonhorst.github.io/palmerpenguins/. doi: 10.5281/zenodo.3960218.â†©ï¸\nHere â€œformulaâ€ is the name of the thing created by ~, not a synonym for â€œequationâ€.â†©ï¸\nHere â€œformulaâ€ is the name of the thing created by ~, not a synonym for â€œequationâ€.â†©ï¸",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>1</span>Â  <span class='chapter-title'>Data visualization</span>"
    ]
  },
  {
    "objectID": "workflow-basics.html",
    "href": "workflow-basics.html",
    "title": "2Â  Workflow: basics",
    "section": "",
    "text": "2.1 Coding basics\nYou now have some experience running R code. We didnâ€™t give you many details, but youâ€™ve obviously figured out the basics, or you wouldâ€™ve thrown this book away in frustration! Frustration is natural when you start programming in R because it is such a stickler for punctuation, and even one character out of place can cause it to complain. But while you should expect to be a little frustrated, take comfort in that this experience is typical and temporary: it happens to everyone, and the only way to get over it is to keep trying.\nä½ ç°åœ¨å·²ç»æœ‰äº†ä¸€äº›è¿è¡Œ R ä»£ç çš„ç»éªŒã€‚æˆ‘ä»¬æ²¡æœ‰æä¾›å¤ªå¤šç»†èŠ‚ï¼Œä½†ä½ æ˜¾ç„¶å·²ç»æŒæ¡äº†åŸºç¡€çŸ¥è¯†ï¼Œå¦åˆ™ä½ æ—©å°±æ²®ä¸§åœ°æŠŠè¿™æœ¬ä¹¦æ‰”æ‰äº†ï¼å½“ä½ å¼€å§‹ç”¨ R ç¼–ç¨‹æ—¶ï¼Œæ„Ÿåˆ°æ²®ä¸§æ˜¯å¾ˆè‡ªç„¶çš„ï¼Œå› ä¸ºå®ƒå¯¹æ ‡ç‚¹ç¬¦å·è¦æ±‚éå¸¸ä¸¥æ ¼ï¼Œå³ä½¿ä¸€ä¸ªå­—ç¬¦æ”¾é”™äº†ä½ç½®ï¼Œä¹Ÿå¯èƒ½å¯¼è‡´å®ƒæŠ¥é”™ã€‚ä½†æ˜¯ï¼Œå°½ç®¡ä½ åº”è¯¥é¢„æ–™åˆ°ä¼šæœ‰äº›æ²®ä¸§ï¼Œä½†è¯·æ”¾å¿ƒï¼Œè¿™ç§ç»å†æ˜¯å…¸å‹ä¸”æš‚æ—¶çš„ï¼šæ¯ä¸ªäººéƒ½ä¼šé‡åˆ°ï¼Œè€Œå…‹æœå®ƒçš„å”¯ä¸€æ–¹æ³•å°±æ˜¯ä¸æ–­å°è¯•ã€‚\nBefore we go any further, letâ€™s ensure youâ€™ve got a solid foundation in running R code and that you know some of the most helpful RStudio features.\nåœ¨ç»§ç»­ä¹‹å‰ï¼Œè®©æˆ‘ä»¬ç¡®ä¿ä½ åœ¨è¿è¡Œ R ä»£ç æ–¹é¢æœ‰åšå®çš„åŸºç¡€ï¼Œå¹¶ä¸”äº†è§£ä¸€äº›æœ€æœ‰ç”¨çš„ RStudio åŠŸèƒ½ã€‚\nLetâ€™s review some basics weâ€™ve omitted so far in the interest of getting you plotting as quickly as possible. You can use R to do basic math calculations:\nè®©æˆ‘ä»¬å›é¡¾ä¸€äº›æˆ‘ä»¬ä¹‹å‰ä¸ºäº†è®©ä½ å°½å¿«å¼€å§‹ç»˜å›¾è€Œçœç•¥çš„åŸºç¡€çŸ¥è¯†ã€‚ä½ å¯ä»¥ä½¿ç”¨ R è¿›è¡ŒåŸºæœ¬çš„æ•°å­¦è®¡ç®—ï¼š\n1 / 200 * 30\n#&gt; [1] 0.15\n(59 + 73 + 2) / 3\n#&gt; [1] 44.66667\nsin(pi / 2)\n#&gt; [1] 1\nYou can create new objects with the assignment operator &lt;-:\nä½ å¯ä»¥ä½¿ç”¨èµ‹å€¼è¿ç®—ç¬¦ &lt;- åˆ›å»ºæ–°å¯¹è±¡ï¼š\nx &lt;- 3 * 4\nNote that the value of x is not printed, itâ€™s just stored. If you want to view the value, type x in the console.\næ³¨æ„ï¼Œx çš„å€¼æ²¡æœ‰è¢«æ‰“å°å‡ºæ¥ï¼Œå®ƒåªæ˜¯è¢«å­˜å‚¨äº†ã€‚å¦‚æœä½ æƒ³æŸ¥çœ‹å®ƒçš„å€¼ï¼Œå¯ä»¥åœ¨æ§åˆ¶å° (console) ä¸­è¾“å…¥ xã€‚\nYou can combine multiple elements into a vector with c():\nä½ å¯ä»¥ç”¨ c() å°†å¤šä¸ªå…ƒç´ åˆå¹¶ (combine) æˆä¸€ä¸ªå‘é‡ (vector)ï¼š\nprimes &lt;- c(2, 3, 5, 7, 11, 13)\nAnd basic arithmetic on vectors is applied to every element of the vector:\nå¯¹å‘é‡è¿›è¡Œçš„åŸºæœ¬ç®—æœ¯è¿ç®—ä¼šåº”ç”¨äºå‘é‡çš„æ¯ä¸ªå…ƒç´ ï¼š\nprimes * 2\n#&gt; [1]  4  6 10 14 22 26\nprimes - 1\n#&gt; [1]  1  2  4  6 10 12\nAll R statements where you create objects, assignment statements, have the same form:\næ‰€æœ‰åˆ›å»ºå¯¹è±¡çš„ R è¯­å¥ï¼Œå³èµ‹å€¼ (assignment) è¯­å¥ï¼Œéƒ½å…·æœ‰ç›¸åŒçš„å½¢å¼ï¼š\nobject_name &lt;- value\nWhen reading that code, say â€œobject name gets valueâ€ in your head.\nè¯»è¿™æ®µä»£ç æ—¶ï¼Œå¯ä»¥åœ¨è„‘æµ·é‡Œé»˜å¿µâ€œå¯¹è±¡åå¾—åˆ°å€¼â€ã€‚\nYou will make lots of assignments, and &lt;- is a pain to type. You can save time with RStudioâ€™s keyboard shortcut: Alt + - (the minus sign). Notice that RStudio automatically surrounds &lt;- with spaces, which is a good code formatting practice. Code can be miserable to read on a good day, so giveyoureyesabreak and use spaces.\nä½ ä¼šè¿›è¡Œå¤§é‡èµ‹å€¼æ“ä½œï¼Œè€Œè¾“å…¥ &lt;- å¾ˆéº»çƒ¦ã€‚ä½ å¯ä»¥ä½¿ç”¨ RStudio çš„é”®ç›˜å¿«æ·é”®æ¥èŠ‚çœæ—¶é—´ï¼šAlt + - (å‡å·)ã€‚æ³¨æ„ï¼ŒRStudio ä¼šè‡ªåŠ¨åœ¨ &lt;- ä¸¤ä¾§åŠ ä¸Šç©ºæ ¼ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä»£ç æ ¼å¼åŒ–ä¹ æƒ¯ã€‚ä»£ç åœ¨å¥½çš„æƒ…å†µä¸‹ä¹Ÿå¯èƒ½éš¾ä»¥é˜…è¯»ï¼Œæ‰€ä»¥è¯·ä½¿ç”¨ç©ºæ ¼ï¼Œè®©ä½ çš„çœ¼ç›ä¼‘æ¯ä¸€ä¸‹ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>2</span>Â  <span class='chapter-title'>Workflow: basics</span>"
    ]
  },
  {
    "objectID": "workflow-basics.html#comments",
    "href": "workflow-basics.html#comments",
    "title": "2Â  Workflow: basics",
    "section": "\n2.2 Comments",
    "text": "2.2 Comments\nR will ignore any text after # for that line. This allows you to write comments, text that is ignored by R but read by other humans. Weâ€™ll sometimes include comments in examples explaining whatâ€™s happening with the code.\nR ä¼šå¿½ç•¥æŸè¡Œä¸­ # ä¹‹åçš„æ‰€æœ‰æ–‡æœ¬ã€‚è¿™å…è®¸ä½ ç¼–å†™æ³¨é‡Š (comments)ï¼Œè¿™äº›æ–‡æœ¬ä¼šè¢« R å¿½ç•¥ï¼Œä½†å¯ä¾›å…¶ä»–äººé˜…è¯»ã€‚æˆ‘ä»¬æœ‰æ—¶ä¼šåœ¨ç¤ºä¾‹ä¸­åŠ å…¥æ³¨é‡Šæ¥è§£é‡Šä»£ç çš„åŠŸèƒ½ã€‚\nComments can be helpful for briefly describing what the following code does.\næ³¨é‡Šå¯¹äºç®€è¦æè¿°åç»­ä»£ç çš„åŠŸèƒ½å¾ˆæœ‰å¸®åŠ©ã€‚\n\n# create vector of primes\nprimes &lt;- c(2, 3, 5, 7, 11, 13)\n\n# multiply primes by 2\nprimes * 2\n#&gt; [1]  4  6 10 14 22 26\n\nWith short pieces of code like this, leaving a comment for every single line of code might not be necessary. But as the code youâ€™re writing gets more complex, comments can save you (and your collaborators) a lot of time figuring out what was done in the code.\nå¯¹äºåƒè¿™æ ·ç®€çŸ­çš„ä»£ç ç‰‡æ®µï¼Œå¯èƒ½æ²¡æœ‰å¿…è¦ä¸ºæ¯ä¸€è¡Œä»£ç éƒ½ç•™ä¸‹æ³¨é‡Šã€‚ä½†éšç€ä½ ç¼–å†™çš„ä»£ç è¶Šæ¥è¶Šå¤æ‚ï¼Œæ³¨é‡Šå¯ä»¥ä¸ºä½ ï¼ˆå’Œä½ çš„åˆä½œè€…ï¼‰èŠ‚çœå¤§é‡æ—¶é—´æ¥ç†è§£ä»£ç çš„åŠŸèƒ½ã€‚\nUse comments to explain the why of your code, not the how or the what. The what and how of your code are always possible to figure out, even if it might be tedious, by carefully reading it. If you describe every step in the comments, and then change the code, you will have to remember to update the comments as well or it will be confusing when you return to your code in the future.\nä½¿ç”¨æ³¨é‡Šæ¥è§£é‡Šä½ ä»£ç çš„åŸå›  (why)ï¼Œè€Œä¸æ˜¯æ–¹å¼ (how) æˆ–å†…å®¹ (what)ã€‚ä½ ä»£ç çš„å†…å®¹å’Œæ–¹å¼æ€»æ˜¯å¯ä»¥é€šè¿‡ä»”ç»†é˜…è¯»ä»£ç æ¥å¼„æ¸…æ¥šï¼Œå³ä½¿è¿™å¯èƒ½å¾ˆä¹å‘³ã€‚å¦‚æœä½ åœ¨æ³¨é‡Šä¸­æè¿°äº†æ¯ä¸€æ­¥ï¼Œç„¶ååˆæ›´æ”¹äº†ä»£ç ï¼Œä½ å°±å¿…é¡»è®°å¾—åŒæ—¶æ›´æ–°æ³¨é‡Šï¼Œå¦åˆ™å°†æ¥ä½ å›åˆ°ä»£ç æ—¶ä¼šæ„Ÿåˆ°å›°æƒ‘ã€‚\nFiguring out why something was done is much more difficult, if not impossible. For example, geom_smooth() has an argument called span, which controls the smoothness of the curve, with larger values yielding a smoother curve. Suppose you decide to change the value of span from its default of 0.75 to 0.9: itâ€™s easy for a future reader to understand what is happening, but unless you note your thinking in a comment, no one will understand why you changed the default.\nå¼„æ¸…æ¥šä¸ºä»€ä¹ˆè¿™ä¹ˆåšè¦å›°éš¾å¾—å¤šï¼Œç”šè‡³æ˜¯ä¸å¯èƒ½çš„ã€‚ä¾‹å¦‚ï¼Œgeom_smooth() æœ‰ä¸€ä¸ªåä¸º span çš„å‚æ•°ï¼Œå®ƒæ§åˆ¶æ›²çº¿çš„å¹³æ»‘åº¦ï¼Œå€¼è¶Šå¤§ï¼Œæ›²çº¿è¶Šå¹³æ»‘ã€‚å‡è®¾ä½ å†³å®šå°† span çš„å€¼ä»é»˜è®¤çš„ 0.75 æ›´æ”¹ä¸º 0.9ï¼šæœªæ¥çš„è¯»è€…å¾ˆå®¹æ˜“ç†è§£å‘ç”Ÿäº†ä»€ä¹ˆï¼Œä½†é™¤éä½ åœ¨æ³¨é‡Šä¸­è®°ä¸‹ä½ çš„æƒ³æ³•ï¼Œå¦åˆ™æ²¡äººä¼šæ˜ç™½ä½ ä¸ºä»€ä¹ˆè¦æ›´æ”¹é»˜è®¤å€¼ã€‚\nFor data analysis code, use comments to explain your overall plan of attack and record important insights as you encounter them. Thereâ€™s no way to re-capture this knowledge from the code itself.\nå¯¹äºæ•°æ®åˆ†æä»£ç ï¼Œä½¿ç”¨æ³¨é‡Šæ¥è§£é‡Šä½ çš„æ•´ä½“åˆ†æè®¡åˆ’ï¼Œå¹¶è®°å½•ä½ é‡åˆ°çš„é‡è¦è§è§£ã€‚è¿™äº›çŸ¥è¯†æ˜¯æ— æ³•ä»ä»£ç æœ¬èº«é‡æ–°è·å–çš„ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>2</span>Â  <span class='chapter-title'>Workflow: basics</span>"
    ]
  },
  {
    "objectID": "workflow-basics.html#sec-whats-in-a-name",
    "href": "workflow-basics.html#sec-whats-in-a-name",
    "title": "2Â  Workflow: basics",
    "section": "\n2.3 Whatâ€™s in a name?",
    "text": "2.3 Whatâ€™s in a name?\nObject names must start with a letter and can only contain letters, numbers, _, and .. You want your object names to be descriptive, so youâ€™ll need to adopt a convention for multiple words. We recommend snake_case, where you separate lowercase words with _.\nå¯¹è±¡åç§°å¿…é¡»ä»¥å­—æ¯å¼€å¤´ï¼Œå¹¶ä¸”åªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—ã€_ å’Œ .ã€‚ä½ å¸Œæœ›ä½ çš„å¯¹è±¡åç§°å…·æœ‰æè¿°æ€§ï¼Œæ‰€ä»¥ä½ éœ€è¦ä¸ºå¤šä¸ªå•è¯çš„å‘½åé‡‡ç”¨ä¸€ç§çº¦å®šã€‚æˆ‘ä»¬æ¨èä½¿ç”¨è›‡å½¢å‘½åæ³• (snake_case)ï¼Œå³ç”¨ _ åˆ†éš”å°å†™å•è¯ã€‚\n\ni_use_snake_case\notherPeopleUseCamelCase\nsome.people.use.periods\nAnd_aFew.People_RENOUNCEconvention\n\nWeâ€™ll return to names again when we discuss code style in Chapter 4.\næˆ‘ä»¬å°†åœ¨ Chapter 4 ä¸­è®¨è®ºä»£ç é£æ ¼æ—¶å†æ¬¡å›åˆ°å‘½åé—®é¢˜ã€‚\nYou can inspect an object by typing its name:\nä½ å¯ä»¥é€šè¿‡è¾“å…¥å¯¹è±¡åç§°æ¥æŸ¥çœ‹å®ƒï¼š\n\nx\n#&gt; [1] 12\n\nMake another assignment:\nè¿›è¡Œå¦ä¸€ä¸ªèµ‹å€¼æ“ä½œï¼š\n\nthis_is_a_really_long_name &lt;- 2.5\n\nTo inspect this object, try out RStudioâ€™s completion facility: type â€œthisâ€, press TAB, add characters until you have a unique prefix, then press return.\nè¦æŸ¥çœ‹è¿™ä¸ªå¯¹è±¡ï¼Œå¯ä»¥è¯•è¯• RStudio çš„è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ï¼šè¾“å…¥ â€œthisâ€ï¼ŒæŒ‰ TAB é”®ï¼Œç»§ç»­æ·»åŠ å­—ç¬¦ç›´åˆ°å‰ç¼€å”¯ä¸€ï¼Œç„¶åæŒ‰å›è½¦é”®ã€‚\nLetâ€™s assume you made a mistake, and that the value of this_is_a_really_long_name should be 3.5, not 2.5. You can use another keyboard shortcut to help you fix it. For example, you can press â†‘ to bring the last command you typed and edit it. Or, type â€œthisâ€ then press Cmd/Ctrl + â†‘ to list all the commands youâ€™ve typed that start with those letters. Use the arrow keys to navigate, then press enter to retype the command. Change 2.5 to 3.5 and rerun.\nå‡è®¾ä½ çŠ¯äº†ä¸€ä¸ªé”™è¯¯ï¼Œthis_is_a_really_long_name çš„å€¼åº”è¯¥æ˜¯ 3.5ï¼Œè€Œä¸æ˜¯ 2.5ã€‚ä½ å¯ä»¥ä½¿ç”¨å¦ä¸€ä¸ªé”®ç›˜å¿«æ·é”®æ¥å¸®åŠ©ä½ ä¿®æ­£ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥æŒ‰ â†‘ é”®è°ƒå‡ºä½ è¾“å…¥çš„ä¸Šä¸€æ¡å‘½ä»¤å¹¶è¿›è¡Œç¼–è¾‘ã€‚æˆ–è€…ï¼Œè¾“å…¥ â€œthisâ€ ç„¶åæŒ‰ Cmd/Ctrl + â†‘ é”®ï¼Œåˆ—å‡ºæ‰€æœ‰ä»¥è¿™äº›å­—æ¯å¼€å¤´çš„ä½ è¾“å…¥è¿‡çš„å‘½ä»¤ã€‚ä½¿ç”¨æ–¹å‘é”®å¯¼èˆªï¼Œç„¶åæŒ‰å›è½¦é”®é‡æ–°è¾“å…¥è¯¥å‘½ä»¤ã€‚å°† 2.5 æ”¹ä¸º 3.5 å¹¶é‡æ–°è¿è¡Œã€‚\nMake yet another assignment:\nå†è¿›è¡Œä¸€ä¸ªèµ‹å€¼æ“ä½œï¼š\n\nr_rocks &lt;- 2^3\n\nLetâ€™s try to inspect it:\nè®©æˆ‘ä»¬è¯•ç€æŸ¥çœ‹å®ƒï¼š\n\nr_rock\n#&gt; Error: object 'r_rock' not found\nR_rocks\n#&gt; Error: object 'R_rocks' not found\n\nThis illustrates the implied contract between you and R: R will do the tedious computations for you, but in exchange, you must be completely precise in your instructions. If not, youâ€™re likely to get an error that says the object youâ€™re looking for was not found. Typos matter; R canâ€™t read your mind and say, â€œoh, they probably meant r_rocks when they typed r_rockâ€. Case matters; similarly, R canâ€™t read your mind and say, â€œoh, they probably meant r_rocks when they typed R_rocksâ€.\nè¿™è¯´æ˜äº†ä½ å’Œ R ä¹‹é—´çš„ä¸€ä¸ªéšå«çº¦å®šï¼šR ä¼šä¸ºä½ å®Œæˆç¹ççš„è®¡ç®—ï¼Œä½†ä½œä¸ºäº¤æ¢ï¼Œä½ çš„æŒ‡ä»¤å¿…é¡»å®Œå…¨ç²¾ç¡®ã€‚å¦åˆ™ï¼Œä½ å¾ˆå¯èƒ½ä¼šæ”¶åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œæç¤ºæ‰¾ä¸åˆ°ä½ æƒ³è¦çš„å¯¹è±¡ã€‚æ‹¼å†™é”™è¯¯å¾ˆé‡è¦ï¼›R æ— æ³•è¯»æ‡‚ä½ çš„å¿ƒæ€ï¼Œè¯´ï¼šâ€œå“¦ï¼Œä»–ä»¬è¾“å…¥ r_rock æ—¶å¯èƒ½æŒ‡çš„æ˜¯ r_rocksâ€ã€‚å¤§å°å†™ä¹Ÿå¾ˆé‡è¦ï¼›åŒæ ·ï¼ŒR ä¹Ÿæ— æ³•è¯»æ‡‚ä½ çš„å¿ƒæ€ï¼Œè¯´ï¼šâ€œå“¦ï¼Œä»–ä»¬è¾“å…¥ R_rocks æ—¶å¯èƒ½æŒ‡çš„æ˜¯ r_rocksâ€ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>2</span>Â  <span class='chapter-title'>Workflow: basics</span>"
    ]
  },
  {
    "objectID": "workflow-basics.html#calling-functions",
    "href": "workflow-basics.html#calling-functions",
    "title": "2Â  Workflow: basics",
    "section": "\n2.4 Calling functions",
    "text": "2.4 Calling functions\nR has a large collection of built-in functions that are called like this:\nR æœ‰å¤§é‡å†…ç½®å‡½æ•°ï¼Œè°ƒç”¨æ–¹å¼å¦‚ä¸‹ï¼š\n\nfunction_name(argument1 = value1, argument2 = value2, ...)\n\nLetâ€™s try using seq(), which makes regular sequences of numbers, and while weâ€™re at it, learn more helpful features of RStudio. Type se and hit TAB. A popup shows you possible completions. Specify seq() by typing more (a q) to disambiguate or by using â†‘/â†“ arrows to select. Notice the floating tooltip that pops up, reminding you of the functionâ€™s arguments and purpose. If you want more help, press F1 to get all the details in the help tab in the lower right pane.\nè®©æˆ‘ä»¬å°è¯•ä½¿ç”¨ seq() å‡½æ•°ï¼Œå®ƒå¯ä»¥ç”Ÿæˆè§„åˆ™çš„æ•°å­—åºåˆ— (sequence)ï¼ŒåŒæ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å­¦ä¹ æ›´å¤š RStudio çš„å®ç”¨åŠŸèƒ½ã€‚è¾“å…¥ se ç„¶åæŒ‰ TAB é”®ã€‚ä¸€ä¸ªå¼¹å‡ºçª—å£ä¼šæ˜¾ç¤ºå¯èƒ½çš„è¡¥å…¨é€‰é¡¹ã€‚é€šè¿‡è¾“å…¥æ›´å¤šå­—ç¬¦ï¼ˆä¸€ä¸ª qï¼‰æ¥æ˜ç¡®æŒ‡å®š seq()ï¼Œæˆ–è€…ä½¿ç”¨ â†‘/â†“ ç®­å¤´æ¥é€‰æ‹©ã€‚æ³¨æ„å¼¹å‡ºçš„æµ®åŠ¨æç¤ºæ¡†ï¼Œå®ƒä¼šæé†’ä½ å‡½æ•°çš„å‚æ•°å’Œç”¨é€”ã€‚å¦‚æœä½ éœ€è¦æ›´å¤šå¸®åŠ©ï¼Œå¯ä»¥æŒ‰ F1 é”®ï¼Œåœ¨å³ä¸‹è§’çª—æ ¼çš„å¸®åŠ© (Help) é€‰é¡¹å¡ä¸­è·å–æ‰€æœ‰è¯¦ç»†ä¿¡æ¯ã€‚\nWhen youâ€™ve selected the function you want, press TAB again. RStudio will add matching opening (() and closing ()) parentheses for you. Type the name of the first argument, from, and set it equal to 1. Then, type the name of the second argument, to, and set it equal to 10. Finally, hit return.\nå½“ä½ é€‰å®šæƒ³è¦çš„å‡½æ•°åï¼Œå†æ¬¡æŒ‰ TAB é”®ã€‚RStudio ä¼šä¸ºä½ æ·»åŠ åŒ¹é…çš„å¼€æ‹¬å· ( å’Œé—­æ‹¬å· )ã€‚è¾“å…¥ç¬¬ä¸€ä¸ªå‚æ•°çš„åç§° fromï¼Œå¹¶å°†å…¶è®¾ç½®ä¸º 1ã€‚ç„¶åï¼Œè¾“å…¥ç¬¬äºŒä¸ªå‚æ•°çš„åç§° toï¼Œå¹¶å°†å…¶è®¾ç½®ä¸º 10ã€‚æœ€åï¼ŒæŒ‰å›è½¦é”®ã€‚\n\nseq(from = 1, to = 10)\n#&gt;  [1]  1  2  3  4  5  6  7  8  9 10\n\nWe often omit the names of the first several arguments in function calls, so we can rewrite this as follows:\nåœ¨å‡½æ•°è°ƒç”¨ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šçœç•¥å‰å‡ ä¸ªå‚æ•°çš„åç§°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åƒä¸‹é¢è¿™æ ·é‡å†™ï¼š\n\nseq(1, 10)\n#&gt;  [1]  1  2  3  4  5  6  7  8  9 10\n\nType the following code and notice that RStudio provides similar assistance with the paired quotation marks:\nè¾“å…¥ä»¥ä¸‹ä»£ç ï¼Œæ³¨æ„ RStudio å¯¹æˆå¯¹çš„å¼•å·ä¹Ÿæä¾›äº†ç±»ä¼¼çš„è¾…åŠ©åŠŸèƒ½ï¼š\n\nx &lt;- \"hello world\"\n\nQuotation marks and parentheses must always come in a pair. RStudio does its best to help you, but itâ€™s still possible to mess up and end up with a mismatch. If this happens, R will show you the continuation character â€œ+â€:\nå¼•å·å’Œæ‹¬å·å¿…é¡»æ€»æ˜¯æˆå¯¹å‡ºç°ã€‚RStudio ä¼šå°½åŠ›å¸®åŠ©ä½ ï¼Œä½†ä»ç„¶æœ‰å¯èƒ½å‡ºé”™å¹¶å¯¼è‡´ä¸åŒ¹é…ã€‚å¦‚æœå‘ç”Ÿè¿™ç§æƒ…å†µï¼ŒR ä¼šæ˜¾ç¤ºä¸€ä¸ªè¿ç»­å­—ç¬¦ +ï¼š\n&gt; x &lt;- \"hello\n+\nThe + tells you that R is waiting for more input; it doesnâ€™t think youâ€™re done yet. Usually, this means youâ€™ve forgotten either a \" or a ). Either add the missing pair, or press ESCAPE to abort the expression and try again.\n+ å‘Šè¯‰ä½  R æ­£åœ¨ç­‰å¾…æ›´å¤šè¾“å…¥ï¼›å®ƒè®¤ä¸ºä½ è¿˜æ²¡æœ‰å®Œæˆã€‚è¿™é€šå¸¸æ„å‘³ç€ä½ å¿˜è®°äº†è¾“å…¥ä¸€ä¸ª \" æˆ– )ã€‚ä½ å¯ä»¥è¡¥ä¸Šç¼ºå¤±çš„ç¬¦å·ï¼Œæˆ–è€…æŒ‰ ESCAPE é”®ä¸­æ­¢è¡¨è¾¾å¼å¹¶é‡è¯•ã€‚\nNote that the environment tab in the upper right pane displays all of the objects that youâ€™ve created:\næ³¨æ„ï¼Œå³ä¸Šè§’çª—æ ¼ä¸­çš„ç¯å¢ƒ (Environment) é€‰é¡¹å¡ä¼šæ˜¾ç¤ºä½ åˆ›å»ºçš„æ‰€æœ‰å¯¹è±¡ï¼š",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>2</span>Â  <span class='chapter-title'>Workflow: basics</span>"
    ]
  },
  {
    "objectID": "workflow-basics.html#exercises",
    "href": "workflow-basics.html#exercises",
    "title": "2Â  Workflow: basics",
    "section": "\n2.5 Exercises",
    "text": "2.5 Exercises\n\n\nWhy does this code not work?\nä¸ºä»€ä¹ˆè¿™æ®µä»£ç æ— æ³•å·¥ä½œï¼Ÿ\n\nmy_variable &lt;- 10\nmy_varÄ±able\n#&gt; Error: object 'my_varÄ±able' not found\n\nLook carefully! (This may seem like an exercise in pointlessness, but training your brain to notice even the tiniest difference will pay off when programming.)\nä»”ç»†çœ‹ï¼(è¿™å¯èƒ½çœ‹èµ·æ¥åƒä¸€ä¸ªæ— æ„ä¹‰çš„ç»ƒä¹ ï¼Œä½†è®­ç»ƒä½ çš„å¤§è„‘æ³¨æ„æœ€å¾®å°çš„å·®å¼‚ï¼Œåœ¨ç¼–ç¨‹æ—¶ä¼šå¤§æœ‰è£¨ç›Šã€‚)\n\n\nTweak each of the following R commands so that they run correctly:\nè°ƒæ•´ä»¥ä¸‹æ¯ä¸ª R å‘½ä»¤ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿæ­£ç¡®è¿è¡Œï¼š\n\nlibary(todyverse)\n\nggplot(dTA = mpg) + \n  geom_point(maping = aes(x = displ y = hwy)) +\n  geom_smooth(method = \"lm)\n\n\n\nPress Option + Shift + K / Alt + Shift + K. What happens? How can you get to the same place using the menus?\næŒ‰ Option + Shift + K / Alt + Shift + Kã€‚ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿä½ å¦‚ä½•é€šè¿‡èœå•åˆ°è¾¾åŒä¸€ä¸ªåœ°æ–¹ï¼Ÿ\n\n\nLetâ€™s revisit an exercise from the Section 1.6. Run the following lines of code. Which of the two plots is saved as mpg-plot.png? Why?\nè®©æˆ‘ä»¬é‡æ¸© Section 1.6 ä¸­çš„ä¸€ä¸ªç»ƒä¹ ã€‚è¿è¡Œä»¥ä¸‹ä»£ç è¡Œã€‚å“ªå¼ å›¾è¢«ä¿å­˜ä¸º mpg-plot.pngï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ\n\nmy_bar_plot &lt;- ggplot(mpg, aes(x = class)) +\n  geom_bar()\nmy_scatter_plot &lt;- ggplot(mpg, aes(x = cty, y = hwy)) +\n  geom_point()\nggsave(filename = \"mpg-plot.png\", plot = my_bar_plot)",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>2</span>Â  <span class='chapter-title'>Workflow: basics</span>"
    ]
  },
  {
    "objectID": "workflow-basics.html#summary",
    "href": "workflow-basics.html#summary",
    "title": "2Â  Workflow: basics",
    "section": "\n2.6 Summary",
    "text": "2.6 Summary\nNow that youâ€™ve learned a little more about how R code works, and some tips to help you understand your code when you come back to it in the future. In the next chapter, weâ€™ll continue your data science journey by teaching you about dplyr, the tidyverse package that helps you transform data, whether itâ€™s selecting important variables, filtering down to rows of interest, or computing summary statistics.\nç°åœ¨ä½ å¯¹ R ä»£ç çš„å·¥ä½œåŸç†æœ‰äº†æ›´å¤šäº†è§£ï¼Œä¹Ÿå­¦åˆ°äº†ä¸€äº›æŠ€å·§ï¼Œå¯ä»¥å¸®åŠ©ä½ åœ¨æœªæ¥å›é¡¾ä»£ç æ—¶æ›´å¥½åœ°ç†è§£å®ƒã€‚åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†ç»§ç»­ä½ çš„æ•°æ®ç§‘å­¦ä¹‹æ—…ï¼Œæ•™ä½ å…³äº dplyr çš„çŸ¥è¯†ï¼Œè¿™æ˜¯ä¸€ä¸ª tidyverse åŒ…ï¼Œå¯ä»¥å¸®åŠ©ä½ è½¬æ¢æ•°æ®ï¼Œæ— è®ºæ˜¯é€‰æ‹©é‡è¦å˜é‡ã€ç­›é€‰æ„Ÿå…´è¶£çš„è¡Œï¼Œè¿˜æ˜¯è®¡ç®—æ±‡æ€»ç»Ÿè®¡æ•°æ®ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>2</span>Â  <span class='chapter-title'>Workflow: basics</span>"
    ]
  },
  {
    "objectID": "data-transform.html",
    "href": "data-transform.html",
    "title": "3Â  æ•°æ®è½¬æ¢",
    "section": "",
    "text": "3.1 å¼•è¨€\nå¯è§†åŒ–æ˜¯äº§ç”Ÿæ´è§çš„é‡è¦å·¥å…·ï¼Œä½†ä½ å¾ˆå°‘èƒ½å¾—åˆ°å®Œå…¨ç¬¦åˆä½ éœ€æ±‚çš„ã€å¯ä»¥ç›´æ¥ç”¨æ¥åˆ¶ä½œä½ æƒ³è¦çš„å›¾è¡¨çš„æ•°æ®å½¢å¼ã€‚é€šå¸¸ï¼Œä½ éœ€è¦åˆ›å»ºä¸€äº›æ–°çš„å˜é‡æˆ–æ‘˜è¦æ¥ç”¨æ•°æ®å›ç­”ä½ çš„é—®é¢˜ï¼Œæˆ–è€…ä½ å¯èƒ½åªæ˜¯æƒ³é‡å‘½åå˜é‡æˆ–é‡æ–°æ’åºè§‚æµ‹å€¼ï¼Œä»¥ä¾¿è®©æ•°æ®æ›´å®¹æ˜“å¤„ç†ã€‚åœ¨æœ¬ç« ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•åšåˆ°æ‰€æœ‰è¿™äº›ï¼ˆä»¥åŠæ›´å¤šï¼ï¼‰ï¼Œæœ¬ç« å°†å‘ä½ ä»‹ç»å¦‚ä½•ä½¿ç”¨ dplyr åŒ…å’Œä¸€ä¸ªå…³äº 2013 å¹´ä»çº½çº¦å¸‚èµ·é£çš„èˆªç­çš„æ–°æ•°æ®é›†æ¥è¿›è¡Œæ•°æ®è½¬æ¢ã€‚\næœ¬ç« çš„ç›®æ ‡æ˜¯è®©ä½ å¯¹æ‰€æœ‰ç”¨äºè½¬æ¢æ•°æ®æ¡†çš„å…³é”®å·¥å…·æœ‰ä¸€ä¸ªå…¨é¢çš„äº†è§£ã€‚æˆ‘ä»¬å°†ä»æ“ä½œæ•°æ®æ¡†çš„è¡Œå’Œåˆ—çš„å‡½æ•°å¼€å§‹ï¼Œç„¶åå›è¿‡å¤´æ¥æ›´å¤šåœ°è®¨è®ºç®¡é“ (pipe)ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºç»„åˆåŠ¨è¯çš„é‡è¦å·¥å…·ã€‚æ¥ç€ï¼Œæˆ‘ä»¬å°†ä»‹ç»å¤„ç†åˆ†ç»„çš„èƒ½åŠ›ã€‚æœ¬ç« æœ€åä¼šæœ‰ä¸€ä¸ªæ¡ˆä¾‹ç ”ç©¶ï¼Œå±•ç¤ºè¿™äº›å‡½æ•°çš„å®é™…åº”ç”¨ã€‚åœ¨åé¢çš„ç« èŠ‚ä¸­ï¼Œå½“æˆ‘ä»¬å¼€å§‹æ·±å…¥ç ”ç©¶ç‰¹å®šç±»å‹çš„æ•°æ®ï¼ˆä¾‹å¦‚ï¼Œæ•°å­—ã€å­—ç¬¦ä¸²ã€æ—¥æœŸï¼‰æ—¶ï¼Œæˆ‘ä»¬å°†æ›´è¯¦ç»†åœ°å›é¡¾è¿™äº›å‡½æ•°ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>3</span>Â  <span class='chapter-title'>æ•°æ®è½¬æ¢</span>"
    ]
  },
  {
    "objectID": "data-transform.html#å¼•è¨€",
    "href": "data-transform.html#å¼•è¨€",
    "title": "3Â  æ•°æ®è½¬æ¢",
    "section": "",
    "text": "3.1.1 å…ˆå†³æ¡ä»¶\nåœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†é‡ç‚¹å…³æ³¨ dplyr åŒ…ï¼Œå®ƒæ˜¯ tidyverse çš„å¦ä¸€ä¸ªæ ¸å¿ƒæˆå‘˜ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ nycflights13 åŒ…ä¸­çš„æ•°æ®æ¥è¯´æ˜å…³é”®æ€æƒ³ï¼Œå¹¶ä½¿ç”¨ ggplot2 æ¥å¸®åŠ©æˆ‘ä»¬ç†è§£æ•°æ®ã€‚\n\nlibrary(nycflights13)\nlibrary(tidyverse)\n#&gt; â”€â”€ Attaching core tidyverse packages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse 2.0.0 â”€â”€\n#&gt; âœ” dplyr     1.1.4     âœ” readr     2.1.5\n#&gt; âœ” forcats   1.0.0     âœ” stringr   1.5.1\n#&gt; âœ” ggplot2   3.5.2     âœ” tibble    3.3.0\n#&gt; âœ” lubridate 1.9.4     âœ” tidyr     1.3.1\n#&gt; âœ” purrr     1.0.4     \n#&gt; â”€â”€ Conflicts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse_conflicts() â”€â”€\n#&gt; âœ– dplyr::filter() masks stats::filter()\n#&gt; âœ– dplyr::lag()    masks stats::lag()\n#&gt; â„¹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nè¯·ä»”ç»†æ³¨æ„åŠ è½½ tidyverse æ—¶æ‰“å°å‡ºçš„å†²çªä¿¡æ¯ã€‚å®ƒå‘Šè¯‰ä½  dplyr è¦†ç›–äº† R åŸºç¡€åŒ…ä¸­çš„ä¸€äº›å‡½æ•°ã€‚å¦‚æœä½ åœ¨åŠ è½½ dplyr åæƒ³ä½¿ç”¨è¿™äº›å‡½æ•°çš„åŸºç¡€ç‰ˆæœ¬ï¼Œä½ éœ€è¦ä½¿ç”¨å®ƒä»¬çš„å…¨åï¼šstats::filter() å’Œ stats::lag()ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å¤§å¤šå¿½ç•¥äº†å‡½æ•°æ¥è‡ªå“ªä¸ªåŒ…ï¼Œå› ä¸ºè¿™é€šå¸¸ä¸é‡è¦ã€‚ç„¶è€Œï¼ŒçŸ¥é“åŒ…å¯ä»¥å¸®åŠ©ä½ æ‰¾åˆ°å¸®åŠ©å’Œç›¸å…³å‡½æ•°ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬éœ€â€‹â€‹è¦ç²¾ç¡®è¯´æ˜ä¸€ä¸ªå‡½æ•°æ¥è‡ªå“ªä¸ªåŒ…æ—¶ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸ R ç›¸åŒçš„è¯­æ³•ï¼špackagename::functionname()ã€‚\n\n3.1.2 nycflights13\nä¸ºäº†æ¢ç´¢åŸºæœ¬çš„ dplyr åŠ¨è¯ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ nycflights13::flightsã€‚è¿™ä¸ªæ•°æ®é›†åŒ…å«äº† 2013 å¹´ä»çº½çº¦å¸‚èµ·é£çš„æ‰€æœ‰ 336,776 ä¸ªèˆªç­ã€‚æ•°æ®æ¥è‡ªç¾å›½äº¤é€šç»Ÿè®¡å±€ï¼Œå¹¶åœ¨ ?flights ä¸­æœ‰æ–‡æ¡£è¯´æ˜ã€‚\n\nflights\n#&gt; # A tibble: 336,776 Ã— 19\n#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1  2013     1     1      517            515         2      830            819\n#&gt; 2  2013     1     1      533            529         4      850            830\n#&gt; 3  2013     1     1      542            540         2      923            850\n#&gt; 4  2013     1     1      544            545        -1     1004           1022\n#&gt; 5  2013     1     1      554            600        -6      812            837\n#&gt; 6  2013     1     1      554            558        -4      740            728\n#&gt; # â„¹ 336,770 more rows\n#&gt; # â„¹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, â€¦\n\nflights æ˜¯ä¸€ä¸ª tibbleï¼Œè¿™æ˜¯ tidyverse ä½¿ç”¨çš„ä¸€ç§ç‰¹æ®Šç±»å‹çš„æ•°æ®æ¡†ï¼Œä»¥é¿å…ä¸€äº›å¸¸è§çš„é™·é˜±ã€‚tibble å’Œæ•°æ®æ¡†ä¹‹é—´æœ€é‡è¦çš„åŒºåˆ«æ˜¯ tibble çš„æ‰“å°æ–¹å¼ï¼›å®ƒä»¬ä¸“ä¸ºå¤§å‹æ•°æ®é›†è®¾è®¡ï¼Œå› æ­¤åªæ˜¾ç¤ºå‰å‡ è¡Œå’Œèƒ½åœ¨ä¸€ä¸ªå±å¹•ä¸Šå®¹çº³çš„åˆ—ã€‚æœ‰å‡ ç§æ–¹æ³•å¯ä»¥æŸ¥çœ‹æ‰€æœ‰å†…å®¹ã€‚å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ RStudioï¼Œæœ€æ–¹ä¾¿çš„å¯èƒ½æ˜¯ View(flights)ï¼Œå®ƒä¼šæ‰“å¼€ä¸€ä¸ªå¯äº¤äº’ã€å¯æ»šåŠ¨å’Œå¯ç­›é€‰çš„è§†å›¾ã€‚å¦åˆ™ä½ å¯ä»¥ä½¿ç”¨ print(flights, width = Inf) æ¥æ˜¾ç¤ºæ‰€æœ‰åˆ—ï¼Œæˆ–è€…ä½¿ç”¨ glimpse()ï¼š\n\nglimpse(flights)\n#&gt; Rows: 336,776\n#&gt; Columns: 19\n#&gt; $ year           &lt;int&gt; 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013â€¦\n#&gt; $ month          &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1â€¦\n#&gt; $ day            &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1â€¦\n#&gt; $ dep_time       &lt;int&gt; 517, 533, 542, 544, 554, 554, 555, 557, 557, 558, 55â€¦\n#&gt; $ sched_dep_time &lt;int&gt; 515, 529, 540, 545, 600, 558, 600, 600, 600, 600, 60â€¦\n#&gt; $ dep_delay      &lt;dbl&gt; 2, 4, 2, -1, -6, -4, -5, -3, -3, -2, -2, -2, -2, -2,â€¦\n#&gt; $ arr_time       &lt;int&gt; 830, 850, 923, 1004, 812, 740, 913, 709, 838, 753, 8â€¦\n#&gt; $ sched_arr_time &lt;int&gt; 819, 830, 850, 1022, 837, 728, 854, 723, 846, 745, 8â€¦\n#&gt; $ arr_delay      &lt;dbl&gt; 11, 20, 33, -18, -25, 12, 19, -14, -8, 8, -2, -3, 7,â€¦\n#&gt; $ carrier        &lt;chr&gt; \"UA\", \"UA\", \"AA\", \"B6\", \"DL\", \"UA\", \"B6\", \"EV\", \"B6\"â€¦\n#&gt; $ flight         &lt;int&gt; 1545, 1714, 1141, 725, 461, 1696, 507, 5708, 79, 301â€¦\n#&gt; $ tailnum        &lt;chr&gt; \"N14228\", \"N24211\", \"N619AA\", \"N804JB\", \"N668DN\", \"Nâ€¦\n#&gt; $ origin         &lt;chr&gt; \"EWR\", \"LGA\", \"JFK\", \"JFK\", \"LGA\", \"EWR\", \"EWR\", \"LGâ€¦\n#&gt; $ dest           &lt;chr&gt; \"IAH\", \"IAH\", \"MIA\", \"BQN\", \"ATL\", \"ORD\", \"FLL\", \"IAâ€¦\n#&gt; $ air_time       &lt;dbl&gt; 227, 227, 160, 183, 116, 150, 158, 53, 140, 138, 149â€¦\n#&gt; $ distance       &lt;dbl&gt; 1400, 1416, 1089, 1576, 762, 719, 1065, 229, 944, 73â€¦\n#&gt; $ hour           &lt;dbl&gt; 5, 5, 5, 5, 6, 5, 6, 6, 6, 6, 6, 6, 6, 6, 6, 5, 6, 6â€¦\n#&gt; $ minute         &lt;dbl&gt; 15, 29, 40, 45, 0, 58, 0, 0, 0, 0, 0, 0, 0, 0, 0, 59â€¦\n#&gt; $ time_hour      &lt;dttm&gt; 2013-01-01 05:00:00, 2013-01-01 05:00:00, 2013-01-0â€¦\n\nåœ¨è¿™ä¸¤ç§è§†å›¾ä¸­ï¼Œå˜é‡ååé¢éƒ½è·Ÿç€ç¼©å†™ï¼Œå‘Šè¯‰ä½ æ¯ä¸ªå˜é‡çš„ç±»å‹ï¼š&lt;int&gt; æ˜¯æ•´æ•° (integer) çš„ç¼©å†™ï¼Œ&lt;dbl&gt; æ˜¯åŒç²¾åº¦æµ®ç‚¹æ•° (double)ï¼ˆä¹Ÿå°±æ˜¯å®æ•°ï¼‰çš„ç¼©å†™ï¼Œ&lt;chr&gt; æ˜¯å­—ç¬¦ (character)ï¼ˆä¹Ÿå°±æ˜¯å­—ç¬¦ä¸²ï¼‰çš„ç¼©å†™ï¼Œ&lt;dttm&gt; æ˜¯æ—¥æœŸæ—¶é—´ (date-time) çš„ç¼©å†™ã€‚è¿™äº›éƒ½å¾ˆé‡è¦ï¼Œå› ä¸ºä½ å¯ä»¥å¯¹ä¸€åˆ—æ‰§è¡Œçš„æ“ä½œåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºå®ƒçš„â€œç±»å‹â€ã€‚\n\n3.1.3 dplyr åŸºç¡€\nä½ å³å°†å­¦ä¹ ä¸»è¦çš„ dplyr åŠ¨è¯ï¼ˆå‡½æ•°ï¼‰ï¼Œå®ƒä»¬å°†ä½¿ä½ èƒ½å¤Ÿè§£å†³ç»å¤§å¤šæ•°æ•°æ®æ“ä½œæŒ‘æˆ˜ã€‚ä½†åœ¨æˆ‘ä»¬è®¨è®ºå®ƒä»¬å„è‡ªçš„å·®å¼‚ä¹‹å‰ï¼Œå€¼å¾—è¯´æ˜ä¸€ä¸‹å®ƒä»¬çš„å…±åŒç‚¹ï¼š\n\nç¬¬ä¸€ä¸ªå‚æ•°æ€»æ˜¯ä¸€ä¸ªæ•°æ®æ¡†ã€‚\nåç»­çš„å‚æ•°é€šå¸¸ä½¿ç”¨å˜é‡åï¼ˆä¸å¸¦å¼•å·ï¼‰æ¥æè¿°è¦æ“ä½œçš„åˆ—ã€‚\nè¾“å‡ºæ€»æ˜¯ä¸€ä¸ªæ–°çš„æ•°æ®æ¡†ã€‚\n\nå› ä¸ºæ¯ä¸ªåŠ¨è¯éƒ½åªåšå¥½ä¸€ä»¶äº‹ï¼Œæ‰€ä»¥è§£å†³å¤æ‚é—®é¢˜é€šå¸¸éœ€è¦ç»„åˆå¤šä¸ªåŠ¨è¯ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ç®¡é“ |&gt; æ¥å®ç°è¿™ä¸€ç‚¹ã€‚æˆ‘ä»¬å°†åœ¨ Section 3.4 ä¸­æ›´å¤šåœ°è®¨è®ºç®¡é“ï¼Œä½†ç®€è€Œè¨€ä¹‹ï¼Œç®¡é“å°†å…¶å·¦ä¾§çš„å†…å®¹ä¼ é€’ç»™å³ä¾§çš„å‡½æ•°ï¼Œå› æ­¤ x |&gt; f(y) ç­‰åŒäº f(x, y)ï¼Œè€Œ x |&gt; f(y) |&gt; g(z) ç­‰åŒäº g(f(x, y), z)ã€‚ç®¡é“æœ€ç®€å•çš„å‘éŸ³æ–¹å¼æ˜¯â€œç„¶å (then)â€ã€‚è¿™ä½¿å¾—å³ä½¿ä½ è¿˜æ²¡æœ‰å­¦ä¹ ç»†èŠ‚ï¼Œä¹Ÿèƒ½å¯¹ä»¥ä¸‹ä»£ç æœ‰ä¸€ä¸ªå¤§è‡´çš„äº†è§£ï¼š\n\nflights |&gt;\n    filter(dest == \"IAH\") |&gt;\n    group_by(year, month, day) |&gt;\n    summarize(\n        arr_delay = mean(arr_delay, na.rm = TRUE)\n    )\n\ndplyr çš„åŠ¨è¯æ ¹æ®å®ƒä»¬æ“ä½œçš„å¯¹è±¡åˆ†ä¸ºå››ç»„ï¼šè¡Œ (rows)ã€åˆ— (columns)ã€ç»„ (groups) æˆ–è¡¨ (tables)ã€‚åœ¨æ¥ä¸‹æ¥çš„éƒ¨åˆ†ä¸­ï¼Œä½ å°†å­¦ä¹ é’ˆå¯¹è¡Œã€åˆ—å’Œç»„çš„æœ€é‡è¦çš„åŠ¨è¯ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†åœ¨ Chapter 19 ä¸­å›åˆ°å¤„ç†è¡¨çš„è¿æ¥åŠ¨è¯ã€‚è®©æˆ‘ä»¬å¼€å§‹å§ï¼",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>3</span>Â  <span class='chapter-title'>æ•°æ®è½¬æ¢</span>"
    ]
  },
  {
    "objectID": "data-transform.html#è¡Œ",
    "href": "data-transform.html#è¡Œ",
    "title": "3Â  æ•°æ®è½¬æ¢",
    "section": "\n3.2 è¡Œ",
    "text": "3.2 è¡Œ\næ“ä½œæ•°æ®é›†è¡Œçš„æœ€é‡è¦çš„åŠ¨è¯æ˜¯ filter() å’Œ arrange()ã€‚filter() å¯ä»¥åœ¨ä¸æ”¹å˜è¡Œé¡ºåºçš„æƒ…å†µä¸‹æ”¹å˜å“ªäº›è¡Œå­˜åœ¨ï¼Œè€Œ arrange() å¯ä»¥åœ¨ä¸æ”¹å˜å“ªäº›è¡Œå­˜åœ¨çš„æƒ…å†µä¸‹æ”¹å˜è¡Œçš„é¡ºåºã€‚è¿™ä¸¤ä¸ªå‡½æ•°éƒ½åªå½±å“è¡Œï¼Œåˆ—ä¿æŒä¸å˜ã€‚æˆ‘ä»¬è¿˜å°†è®¨è®º distinct()ï¼Œå®ƒèƒ½æ‰¾åˆ°å…·æœ‰å”¯ä¸€å€¼çš„è¡Œã€‚ä¸ arrange() å’Œ filter() ä¸åŒï¼Œå®ƒä¹Ÿå¯ä»¥é€‰æ‹©æ€§åœ°ä¿®æ”¹åˆ—ã€‚\n\n3.2.1 filter()\n\nfilter() å…è®¸ä½ æ ¹æ®åˆ—çš„å€¼ä¿ç•™è¡Œ1ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ•°æ®æ¡†ã€‚ç¬¬äºŒä¸ªåŠåç»­å‚æ•°æ˜¯ä¿ç•™è¡Œå¿…é¡»æ»¡è¶³çš„æ¡ä»¶ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°æ‰€æœ‰æ™šç‚¹è¶…è¿‡ 120 åˆ†é’Ÿï¼ˆä¸¤å°æ—¶ï¼‰èµ·é£çš„èˆªç­ï¼š\n\nflights |&gt;\n    filter(dep_delay &gt; 120)\n#&gt; # A tibble: 9,723 Ã— 19\n#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1  2013     1     1      848           1835       853     1001           1950\n#&gt; 2  2013     1     1      957            733       144     1056            853\n#&gt; 3  2013     1     1     1114            900       134     1447           1222\n#&gt; 4  2013     1     1     1540           1338       122     2020           1825\n#&gt; 5  2013     1     1     1815           1325       290     2120           1542\n#&gt; 6  2013     1     1     1842           1422       260     1958           1535\n#&gt; # â„¹ 9,717 more rows\n#&gt; # â„¹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, â€¦\n\né™¤äº† &gt;ï¼ˆå¤§äºï¼‰ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨ &gt;=ï¼ˆå¤§äºæˆ–ç­‰äºï¼‰ã€&lt;ï¼ˆå°äºï¼‰ã€&lt;=ï¼ˆå°äºæˆ–ç­‰äºï¼‰ã€==ï¼ˆç­‰äºï¼‰å’Œ !=ï¼ˆä¸ç­‰äºï¼‰ã€‚ä½ è¿˜å¯ä»¥ç”¨ & æˆ– , ç»„åˆæ¡ä»¶æ¥è¡¨ç¤ºâ€œä¸â€ï¼ˆæ£€æŸ¥ä¸¤ä¸ªæ¡ä»¶ï¼‰ï¼Œæˆ–ç”¨ | æ¥è¡¨ç¤ºâ€œæˆ–â€ï¼ˆæ£€æŸ¥ä»»ä¸€æ¡ä»¶ï¼‰ï¼š\n\n# 1 æœˆ 1 æ—¥èµ·é£çš„èˆªç­\nflights |&gt;\n    filter(month == 1 & day == 1)\n#&gt; # A tibble: 842 Ã— 19\n#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1  2013     1     1      517            515         2      830            819\n#&gt; 2  2013     1     1      533            529         4      850            830\n#&gt; 3  2013     1     1      542            540         2      923            850\n#&gt; 4  2013     1     1      544            545        -1     1004           1022\n#&gt; 5  2013     1     1      554            600        -6      812            837\n#&gt; 6  2013     1     1      554            558        -4      740            728\n#&gt; # â„¹ 836 more rows\n#&gt; # â„¹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, â€¦\n\n# 1 æœˆæˆ– 2 æœˆèµ·é£çš„èˆªç­\nflights |&gt;\n    filter(month == 1 | month == 2)\n#&gt; # A tibble: 51,955 Ã— 19\n#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1  2013     1     1      517            515         2      830            819\n#&gt; 2  2013     1     1      533            529         4      850            830\n#&gt; 3  2013     1     1      542            540         2      923            850\n#&gt; 4  2013     1     1      544            545        -1     1004           1022\n#&gt; 5  2013     1     1      554            600        -6      812            837\n#&gt; 6  2013     1     1      554            558        -4      740            728\n#&gt; # â„¹ 51,949 more rows\n#&gt; # â„¹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, â€¦\n\nå½“ä½ ç»„åˆ | å’Œ == æ—¶ï¼Œæœ‰ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„å¿«æ·æ–¹å¼ï¼š%in%ã€‚å®ƒä¼šä¿ç•™å˜é‡ç­‰äºå³ä¾§å€¼ä¹‹ä¸€çš„è¡Œï¼š\n\n# ä¸€ç§æ›´çŸ­çš„æ–¹å¼æ¥é€‰æ‹© 1 æœˆæˆ– 2 æœˆèµ·é£çš„èˆªç­\nflights |&gt;\n    filter(month %in% c(1, 2))\n#&gt; # A tibble: 51,955 Ã— 19\n#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1  2013     1     1      517            515         2      830            819\n#&gt; 2  2013     1     1      533            529         4      850            830\n#&gt; 3  2013     1     1      542            540         2      923            850\n#&gt; 4  2013     1     1      544            545        -1     1004           1022\n#&gt; 5  2013     1     1      554            600        -6      812            837\n#&gt; 6  2013     1     1      554            558        -4      740            728\n#&gt; # â„¹ 51,949 more rows\n#&gt; # â„¹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, â€¦\n\næˆ‘ä»¬å°†åœ¨ Chapter 12 ä¸­æ›´è¯¦ç»†åœ°å›åˆ°è¿™äº›æ¯”è¾ƒå’Œé€»è¾‘è¿ç®—ç¬¦ã€‚\nå½“ä½ è¿è¡Œ filter() æ—¶ï¼Œdplyr ä¼šæ‰§è¡Œç­›é€‰æ“ä½œï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®æ¡†ï¼Œç„¶åæ‰“å°å®ƒã€‚å®ƒä¸ä¼šä¿®æ”¹ç°æœ‰çš„ flights æ•°æ®é›†ï¼Œå› ä¸º dplyr å‡½æ•°ä»ä¸ä¿®æ”¹å®ƒä»¬çš„è¾“å…¥ã€‚è¦ä¿å­˜ç»“æœï¼Œä½ éœ€è¦ä½¿ç”¨èµ‹å€¼è¿ç®—ç¬¦ &lt;-ï¼š\n\njan1 &lt;- flights |&gt;\n    filter(month == 1 & day == 1)\n\n\n3.2.2 å¸¸è§é”™è¯¯\nå½“ä½ åˆšå¼€å§‹ä½¿ç”¨ R æ—¶ï¼Œæœ€å®¹æ˜“çŠ¯çš„é”™è¯¯æ˜¯åœ¨æµ‹è¯•ç›¸ç­‰æ€§æ—¶ä½¿ç”¨ = è€Œä¸æ˜¯ ==ã€‚filter() ä¼šåœ¨è¿™ç§æƒ…å†µä¸‹æé†’ä½ ï¼š\n\nflights |&gt;\n    filter(month = 1)\n#&gt; Error in `filter()`:\n#&gt; ! We detected a named input.\n#&gt; â„¹ This usually means that you've used `=` instead of `==`.\n#&gt; â„¹ Did you mean `month == 1`?\n\nå¦ä¸€ä¸ªé”™è¯¯æ˜¯ä½ åƒåœ¨è‹±è¯­ä¸­é‚£æ ·å†™â€œæˆ–â€è¯­å¥ï¼š\n\nflights |&gt;\n    filter(month == 1 | 2)\n\nè¿™åœ¨æŸç§æ„ä¹‰ä¸Šæ˜¯â€œæœ‰æ•ˆâ€çš„ï¼Œå› ä¸ºå®ƒä¸ä¼šæŠ›å‡ºé”™è¯¯ï¼Œä½†å®ƒæ²¡æœ‰åšä½ æƒ³è¦çš„äº‹æƒ…ï¼Œå› ä¸º | é¦–å…ˆæ£€æŸ¥æ¡ä»¶ month == 1ï¼Œç„¶åæ£€æŸ¥æ¡ä»¶ 2ï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªåˆç†çš„æ£€æŸ¥æ¡ä»¶ã€‚æˆ‘ä»¬å°†åœ¨ Section 12.3.2 ä¸­å­¦ä¹ æ›´å¤šå…³äºè¿™é‡Œå‘ç”Ÿäº†ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆä¼šè¿™æ ·ã€‚\n\n3.2.3 arrange()\n\narrange() æ ¹æ®åˆ—çš„å€¼æ”¹å˜è¡Œçš„é¡ºåºã€‚å®ƒæ¥å—ä¸€ä¸ªæ•°æ®æ¡†å’Œä¸€ç»„åˆ—åï¼ˆæˆ–æ›´å¤æ‚çš„è¡¨è¾¾å¼ï¼‰ä½œä¸ºæ’åºä¾æ®ã€‚å¦‚æœä½ æä¾›å¤šä¸ªåˆ—åï¼Œæ¯ä¸ªé¢å¤–çš„åˆ—å°†ç”¨äºæ‰“ç ´å‰ä¸€åˆ—å€¼ä¸­çš„å¹³å±€ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç æŒ‰å‡ºå‘æ—¶é—´æ’åºï¼Œè¯¥æ—¶é—´åˆ†å¸ƒåœ¨å››åˆ—ä¸­ã€‚æˆ‘ä»¬é¦–å…ˆå¾—åˆ°æœ€æ—©çš„å¹´ä»½ï¼Œç„¶ååœ¨ä¸€å¹´å†…ï¼Œæœ€æ—©çš„æœˆä»½ï¼Œä¾æ­¤ç±»æ¨ã€‚\n\nflights |&gt;\n    arrange(year, month, day, dep_time)\n#&gt; # A tibble: 336,776 Ã— 19\n#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1  2013     1     1      517            515         2      830            819\n#&gt; 2  2013     1     1      533            529         4      850            830\n#&gt; 3  2013     1     1      542            540         2      923            850\n#&gt; 4  2013     1     1      544            545        -1     1004           1022\n#&gt; 5  2013     1     1      554            600        -6      812            837\n#&gt; 6  2013     1     1      554            558        -4      740            728\n#&gt; # â„¹ 336,770 more rows\n#&gt; # â„¹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, â€¦\n\nä½ å¯ä»¥åœ¨ arrange() å†…éƒ¨å¯¹ä¸€åˆ—ä½¿ç”¨ desc()ï¼Œä»¥æŒ‰è¯¥åˆ—çš„é™åºï¼ˆä»å¤§åˆ°å°ï¼‰é‡æ–°æ’åºæ•°æ®æ¡†ã€‚ä¾‹å¦‚ï¼Œè¿™æ®µä»£ç æŒ‰å»¶è¯¯æ—¶é—´ä»å¤šåˆ°å°‘å¯¹èˆªç­è¿›è¡Œæ’åºï¼š\n\nflights |&gt;\n    arrange(desc(dep_delay))\n#&gt; # A tibble: 336,776 Ã— 19\n#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1  2013     1     9      641            900      1301     1242           1530\n#&gt; 2  2013     6    15     1432           1935      1137     1607           2120\n#&gt; 3  2013     1    10     1121           1635      1126     1239           1810\n#&gt; 4  2013     9    20     1139           1845      1014     1457           2210\n#&gt; 5  2013     7    22      845           1600      1005     1044           1815\n#&gt; 6  2013     4    10     1100           1900       960     1342           2211\n#&gt; # â„¹ 336,770 more rows\n#&gt; # â„¹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, â€¦\n\næ³¨æ„è¡Œæ•°æ²¡æœ‰æ”¹å˜â€”â€”æˆ‘ä»¬åªæ˜¯åœ¨æ’åˆ—æ•°æ®ï¼Œè€Œä¸æ˜¯ç­›é€‰æ•°æ®ã€‚\n\n3.2.4 distinct()\n\ndistinct() æ‰¾åˆ°æ•°æ®é›†ä¸­çš„æ‰€æœ‰å”¯ä¸€è¡Œï¼Œæ‰€ä»¥ä»æŠ€æœ¯ä¸Šè®²ï¼Œå®ƒä¸»è¦æ“ä½œè¡Œã€‚ç„¶è€Œï¼Œå¤§å¤šæ•°æ—¶å€™ï¼Œä½ ä¼šæƒ³è¦ä¸€äº›å˜é‡çš„ç‹¬ç‰¹ç»„åˆï¼Œæ‰€ä»¥ä½ ä¹Ÿå¯ä»¥é€‰æ‹©æ€§åœ°æä¾›åˆ—åï¼š\n\n# å¦‚æœæœ‰çš„è¯ï¼Œç§»é™¤é‡å¤çš„è¡Œ\nflights |&gt;\n    distinct()\n#&gt; # A tibble: 336,776 Ã— 19\n#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1  2013     1     1      517            515         2      830            819\n#&gt; 2  2013     1     1      533            529         4      850            830\n#&gt; 3  2013     1     1      542            540         2      923            850\n#&gt; 4  2013     1     1      544            545        -1     1004           1022\n#&gt; 5  2013     1     1      554            600        -6      812            837\n#&gt; 6  2013     1     1      554            558        -4      740            728\n#&gt; # â„¹ 336,770 more rows\n#&gt; # â„¹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, â€¦\n\n# æ‰¾åˆ°æ‰€æœ‰å”¯ä¸€çš„å‡ºå‘åœ°å’Œç›®çš„åœ°å¯¹\nflights |&gt;\n    distinct(origin, dest)\n#&gt; # A tibble: 224 Ã— 2\n#&gt;   origin dest \n#&gt;   &lt;chr&gt;  &lt;chr&gt;\n#&gt; 1 EWR    IAH  \n#&gt; 2 LGA    IAH  \n#&gt; 3 JFK    MIA  \n#&gt; 4 JFK    BQN  \n#&gt; 5 LGA    ATL  \n#&gt; 6 EWR    ORD  \n#&gt; # â„¹ 218 more rows\n\nå¦å¤–ï¼Œå¦‚æœä½ æƒ³åœ¨ç­›é€‰å”¯ä¸€è¡Œæ—¶ä¿ç•™å…¶ä»–åˆ—ï¼Œä½ å¯ä»¥ä½¿ç”¨ .keep_all = TRUE é€‰é¡¹ã€‚\n\nflights |&gt;\n    distinct(origin, dest, .keep_all = TRUE)\n#&gt; # A tibble: 224 Ã— 19\n#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1  2013     1     1      517            515         2      830            819\n#&gt; 2  2013     1     1      533            529         4      850            830\n#&gt; 3  2013     1     1      542            540         2      923            850\n#&gt; 4  2013     1     1      544            545        -1     1004           1022\n#&gt; 5  2013     1     1      554            600        -6      812            837\n#&gt; 6  2013     1     1      554            558        -4      740            728\n#&gt; # â„¹ 218 more rows\n#&gt; # â„¹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, â€¦\n\næ‰€æœ‰è¿™äº›ä¸åŒçš„èˆªç­éƒ½åœ¨ 1 æœˆ 1 æ—¥å¹¶éå·§åˆï¼šdistinct() ä¼šæ‰¾åˆ°æ•°æ®é›†ä¸­å”¯ä¸€è¡Œçš„ç¬¬ä¸€æ¬¡å‡ºç°ï¼Œå¹¶ä¸¢å¼ƒå…¶ä½™çš„ã€‚\nå¦‚æœä½ æƒ³æ‰¾åˆ°å‡ºç°çš„æ¬¡æ•°ï¼Œæœ€å¥½å°† distinct() æ¢æˆ count()ã€‚é€šè¿‡ sort = TRUE å‚æ•°ï¼Œä½ å¯ä»¥æŒ‰å‡ºç°æ¬¡æ•°çš„é™åºæ’åˆ—å®ƒä»¬ã€‚ä½ å°†åœ¨ Section 13.3 ä¸­å­¦åˆ°æ›´å¤šå…³äº count çš„çŸ¥è¯†ã€‚\n\nflights |&gt;\n    count(origin, dest, sort = TRUE)\n#&gt; # A tibble: 224 Ã— 3\n#&gt;   origin dest      n\n#&gt;   &lt;chr&gt;  &lt;chr&gt; &lt;int&gt;\n#&gt; 1 JFK    LAX   11262\n#&gt; 2 LGA    ATL   10263\n#&gt; 3 LGA    ORD    8857\n#&gt; 4 JFK    SFO    8204\n#&gt; 5 LGA    CLT    6168\n#&gt; 6 EWR    ORD    6100\n#&gt; # â„¹ 218 more rows\n\n\n3.2.5 ç»ƒä¹ \n\n\nåœ¨å•ä¸ªç®¡é“ä¸­ï¼Œæ‰¾åˆ°æ»¡è¶³ä»¥ä¸‹æ¯ä¸ªæ¡ä»¶çš„æ‰€æœ‰èˆªç­ï¼š\n\nåˆ°è¾¾å»¶è¯¯ä¸¤å°æ—¶æˆ–ä»¥ä¸Š\né£å¾€ä¼‘æ–¯é¡¿ï¼ˆIAH æˆ– HOUï¼‰\nç”±è”åˆèˆªç©ºã€ç¾å›½èˆªç©ºæˆ–è¾¾ç¾èˆªç©ºè¿è¥\nåœ¨å¤å­£ï¼ˆä¸ƒæœˆã€å…«æœˆå’Œä¹æœˆï¼‰å‡ºå‘\nåˆ°è¾¾å»¶è¯¯è¶…è¿‡ä¸¤å°æ—¶ï¼Œä½†èµ·é£æ²¡æœ‰æ™šç‚¹\nå»¶è¯¯è‡³å°‘ä¸€å°æ—¶ï¼Œä½†åœ¨é£è¡Œä¸­å¼¥è¡¥äº†è¶…è¿‡ 30 åˆ†é’Ÿçš„æ—¶é—´\n\n\nå¯¹ flights è¿›è¡Œæ’åºï¼Œæ‰¾å‡ºèµ·é£å»¶è¯¯æœ€é•¿çš„èˆªç­ã€‚æ‰¾å‡ºæ¸…æ™¨æœ€æ—©ç¦»å¼€çš„èˆªç­ã€‚\nå¯¹ flights è¿›è¡Œæ’åºï¼Œæ‰¾å‡ºæœ€å¿«çš„èˆªç­ã€‚ï¼ˆæç¤ºï¼šå°è¯•åœ¨å‡½æ•°å†…éƒ¨åŒ…å«æ•°å­¦è®¡ç®—ã€‚ï¼‰\n2013 å¹´çš„æ¯ä¸€å¤©éƒ½æœ‰èˆªç­å—ï¼Ÿ\nå“ªäº›èˆªç­é£è¡Œçš„è·ç¦»æœ€è¿œï¼Ÿå“ªäº›é£è¡Œçš„è·ç¦»æœ€çŸ­ï¼Ÿ\nå¦‚æœä½ åŒæ—¶ä½¿ç”¨ filter() å’Œ arrange()ï¼Œå®ƒä»¬çš„é¡ºåºé‡è¦å—ï¼Ÿä¸ºä»€ä¹ˆ/ä¸ºä»€ä¹ˆä¸ï¼Ÿæ€è€ƒä¸€ä¸‹ç»“æœä»¥åŠå‡½æ•°éœ€è¦åšå¤šå°‘å·¥ä½œã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>3</span>Â  <span class='chapter-title'>æ•°æ®è½¬æ¢</span>"
    ]
  },
  {
    "objectID": "data-transform.html#åˆ—",
    "href": "data-transform.html#åˆ—",
    "title": "3Â  æ•°æ®è½¬æ¢",
    "section": "\n3.3 åˆ—",
    "text": "3.3 åˆ—\næœ‰å››ä¸ªé‡è¦çš„åŠ¨è¯ä¼šå½±å“åˆ—è€Œä¸æ”¹å˜è¡Œï¼šmutate() ä»ç°æœ‰åˆ—æ´¾ç”Ÿå‡ºæ–°åˆ—ï¼Œselect() æ”¹å˜å“ªäº›åˆ—å­˜åœ¨ï¼Œrename() æ”¹å˜åˆ—çš„åç§°ï¼Œrelocate() æ”¹å˜åˆ—çš„ä½ç½®ã€‚\n\n3.3.1 mutate()\n\nmutate() çš„å·¥ä½œæ˜¯æ·»åŠ ä»ç°æœ‰åˆ—è®¡ç®—å‡ºçš„æ–°åˆ—ã€‚åœ¨æ•°æ®è½¬æ¢çš„ç« èŠ‚ä¸­ï¼Œä½ å°†å­¦ä¹ ä¸€å¤§å †å¯ä»¥ç”¨æ¥æ“ä½œä¸åŒç±»å‹å˜é‡çš„å‡½æ•°ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬åªä½¿ç”¨åŸºæœ¬ä»£æ•°ï¼Œè¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿè®¡ç®— gainï¼ˆå»¶è¯¯èˆªç­åœ¨ç©ºä¸­å¼¥è¡¥äº†å¤šå°‘æ—¶é—´ï¼‰å’Œ speedï¼ˆä»¥è‹±é‡Œ/å°æ—¶ä¸ºå•ä½ï¼‰ï¼š\n\nflights |&gt;\n    mutate(\n        gain = dep_delay - arr_delay,\n        speed = distance / air_time * 60\n    )\n#&gt; # A tibble: 336,776 Ã— 21\n#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1  2013     1     1      517            515         2      830            819\n#&gt; 2  2013     1     1      533            529         4      850            830\n#&gt; 3  2013     1     1      542            540         2      923            850\n#&gt; 4  2013     1     1      544            545        -1     1004           1022\n#&gt; 5  2013     1     1      554            600        -6      812            837\n#&gt; 6  2013     1     1      554            558        -4      740            728\n#&gt; # â„¹ 336,770 more rows\n#&gt; # â„¹ 13 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, â€¦\n\né»˜è®¤æƒ…å†µä¸‹ï¼Œmutate() ä¼šåœ¨ä½ æ•°æ®é›†çš„å³ä¾§æ·»åŠ æ–°åˆ—ï¼Œè¿™ä½¿å¾—å¾ˆéš¾çœ‹åˆ°è¿™é‡Œå‘ç”Ÿäº†ä»€ä¹ˆã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ .before å‚æ•°å°†å˜é‡æ·»åŠ åˆ°å·¦ä¾§2ï¼š\n\nflights |&gt;\n    mutate(\n        gain = dep_delay - arr_delay,\n        speed = distance / air_time * 60,\n        .before = 1\n    )\n#&gt; # A tibble: 336,776 Ã— 21\n#&gt;    gain speed  year month   day dep_time sched_dep_time dep_delay arr_time\n#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;\n#&gt; 1    -9  370.  2013     1     1      517            515         2      830\n#&gt; 2   -16  374.  2013     1     1      533            529         4      850\n#&gt; 3   -31  408.  2013     1     1      542            540         2      923\n#&gt; 4    17  517.  2013     1     1      544            545        -1     1004\n#&gt; 5    19  394.  2013     1     1      554            600        -6      812\n#&gt; 6   -16  288.  2013     1     1      554            558        -4      740\n#&gt; # â„¹ 336,770 more rows\n#&gt; # â„¹ 12 more variables: sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;, â€¦\n\n. è¡¨ç¤º .before æ˜¯å‡½æ•°çš„å‚æ•°ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬æ­£åœ¨åˆ›å»ºçš„ç¬¬ä¸‰ä¸ªæ–°å˜é‡çš„åç§°ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ .after åœ¨æŸä¸ªå˜é‡ä¹‹åæ·»åŠ ï¼Œå¹¶ä¸”åœ¨ .before å’Œ .after ä¸­ä½ éƒ½å¯ä»¥ä½¿ç”¨å˜é‡åè€Œä¸æ˜¯ä½ç½®ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ day ä¹‹åæ·»åŠ æ–°å˜é‡ï¼š\n\nflights |&gt;\n    mutate(\n        gain = dep_delay - arr_delay,\n        speed = distance / air_time * 60,\n        .after = day\n    )\n\nå¦å¤–ï¼Œä½ å¯ä»¥ç”¨ .keep å‚æ•°æ¥æ§åˆ¶ä¿ç•™å“ªäº›å˜é‡ã€‚ä¸€ä¸ªç‰¹åˆ«æœ‰ç”¨çš„å‚æ•°æ˜¯ \"used\"ï¼Œå®ƒæŒ‡å®šæˆ‘ä»¬åªä¿ç•™åœ¨ mutate() æ­¥éª¤ä¸­æ¶‰åŠæˆ–åˆ›å»ºçš„åˆ—ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹è¾“å‡ºå°†åªåŒ…å« dep_delayã€arr_delayã€air_timeã€gainã€hours å’Œ gain_per_hour è¿™äº›å˜é‡ã€‚\n\nflights |&gt;\n    mutate(\n        gain = dep_delay - arr_delay,\n        hours = air_time / 60,\n        gain_per_hour = gain / hours,\n        .keep = \"used\"\n    )\n\næ³¨æ„ï¼Œç”±äºæˆ‘ä»¬æ²¡æœ‰å°†ä¸Šè¿°è®¡ç®—çš„ç»“æœèµ‹å€¼å› flightsï¼Œæ–°å˜é‡ gainã€hours å’Œ gain_per_hour åªä¼šè¢«æ‰“å°å‡ºæ¥ï¼Œè€Œä¸ä¼šå­˜å‚¨åœ¨æ•°æ®æ¡†ä¸­ã€‚å¦‚æœæˆ‘ä»¬å¸Œæœ›å®ƒä»¬åœ¨æ•°æ®æ¡†ä¸­å¯ç”¨äºå°†æ¥çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬åº”è¯¥ä»”ç»†è€ƒè™‘æ˜¯å¦å¸Œæœ›å°†ç»“æœèµ‹å€¼å› flightsï¼Œä»è€Œè¦†ç›–åŸå§‹çš„å…·æœ‰æ›´å¤šå˜é‡çš„æ•°æ®æ¡†ï¼Œè¿˜æ˜¯èµ‹å€¼ç»™ä¸€ä¸ªæ–°å¯¹è±¡ã€‚é€šå¸¸ï¼Œæ­£ç¡®çš„ç­”æ¡ˆæ˜¯ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå…¶åç§°åº”å…·æœ‰ä¿¡æ¯æ€§ä»¥è¡¨æ˜å…¶å†…å®¹ï¼Œä¾‹å¦‚ delay_gainï¼Œä½†ä½ ä¹Ÿå¯èƒ½æœ‰å……åˆ†çš„ç†ç”±è¦†ç›– flightsã€‚\n\n3.3.2 select()\n\nå¾—åˆ°åŒ…å«æˆç™¾ä¸Šåƒä¸ªå˜é‡çš„æ•°æ®é›†å¹¶ä¸å°‘è§ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¬¬ä¸€ä¸ªæŒ‘æˆ˜é€šå¸¸å°±æ˜¯ä¸“æ³¨äºä½ æ„Ÿå…´è¶£çš„å˜é‡ã€‚select() å…è®¸ä½ ä½¿ç”¨åŸºäºå˜é‡åç§°çš„æ“ä½œå¿«é€Ÿåœ°èšç„¦äºä¸€ä¸ªæœ‰ç”¨çš„å­é›†ï¼š\n\n\næŒ‰åç§°é€‰æ‹©åˆ—ï¼š\n\nflights |&gt;\nselect(year, month, day)\n\n\n\né€‰æ‹©ä» year åˆ° day ä¹‹é—´çš„æ‰€æœ‰åˆ—ï¼ˆåŒ…æ‹¬ year å’Œ dayï¼‰ï¼š\n\nflights |&gt;\nselect(year:day)\n\n\n\né€‰æ‹©é™¤äº†ä» year åˆ° day ä¹‹å¤–çš„æ‰€æœ‰åˆ—ï¼ˆåŒ…æ‹¬ year å’Œ dayï¼‰ï¼š\n\nflights |&gt;\nselect(!year:day)\n\nå†å²ä¸Šï¼Œè¿™ä¸ªæ“ä½œæ˜¯ç”¨ - è€Œä¸æ˜¯ ! æ¥å®Œæˆçš„ï¼Œæ‰€ä»¥ä½ å¾ˆå¯èƒ½ä¼šåœ¨å®é™…åº”ç”¨ä¸­çœ‹åˆ°å®ƒã€‚è¿™ä¸¤ä¸ªè¿ç®—ç¬¦ä½œç”¨ç›¸åŒï¼Œä½†è¡Œä¸ºä¸Šæœ‰ä¸€äº›ç»†å¾®çš„å·®å¼‚ã€‚æˆ‘ä»¬æ¨èä½¿ç”¨ !ï¼Œå› ä¸ºå®ƒè¯»ä½œâ€œé (not)â€ï¼Œå¹¶ä¸”èƒ½å¾ˆå¥½åœ°ä¸ & å’Œ | ç»“åˆã€‚\n\n\né€‰æ‹©æ‰€æœ‰å­—ç¬¦ç±»å‹çš„åˆ—ï¼š\n\nflights |&gt;\nselect(where(is.character))\n\n\n\nåœ¨ select() ä¸­å¯ä»¥ä½¿ç”¨è®¸å¤šè¾…åŠ©å‡½æ•°ï¼š\n\n\nstarts_with(\"abc\")ï¼šåŒ¹é…ä»¥ â€œabcâ€ å¼€å¤´çš„åç§°ã€‚\n\nends_with(\"xyz\")ï¼šåŒ¹é…ä»¥ â€œxyzâ€ ç»“å°¾çš„åç§°ã€‚\n\ncontains(\"ijk\")ï¼šåŒ¹é…åŒ…å« â€œijkâ€ çš„åç§°ã€‚\n\nnum_range(\"x\", 1:3)ï¼šåŒ¹é… x1ã€x2 å’Œ x3ã€‚\n\næ›´å¤šè¯¦æƒ…è¯·å‚è§ ?selectã€‚ä¸€æ—¦ä½ äº†è§£äº†æ­£åˆ™è¡¨è¾¾å¼ï¼ˆChapter 15 çš„ä¸»é¢˜ï¼‰ï¼Œä½ ä¹Ÿå°†èƒ½å¤Ÿä½¿ç”¨ matches() æ¥é€‰æ‹©åŒ¹é…æ¨¡å¼çš„å˜é‡ã€‚\nä½ å¯ä»¥åœ¨ select() æ—¶ä½¿ç”¨ = æ¥é‡å‘½åå˜é‡ã€‚æ–°åç§°å‡ºç°åœ¨ = çš„å·¦ä¾§ï¼Œæ—§å˜é‡å‡ºç°åœ¨å³ä¾§ï¼š\n\nflights |&gt;\n    select(tail_num = tailnum)\n#&gt; # A tibble: 336,776 Ã— 1\n#&gt;   tail_num\n#&gt;   &lt;chr&gt;   \n#&gt; 1 N14228  \n#&gt; 2 N24211  \n#&gt; 3 N619AA  \n#&gt; 4 N804JB  \n#&gt; 5 N668DN  \n#&gt; 6 N39463  \n#&gt; # â„¹ 336,770 more rows\n\n\n3.3.3 rename()\n\nå¦‚æœä½ æƒ³ä¿ç•™æ‰€æœ‰ç°æœ‰çš„å˜é‡ï¼Œåªæƒ³é‡å‘½åå°‘æ•°å‡ ä¸ªï¼Œä½ å¯ä»¥ä½¿ç”¨ rename() è€Œä¸æ˜¯ select()ï¼š\n\nflights |&gt;\n    rename(tail_num = tailnum)\n#&gt; # A tibble: 336,776 Ã— 19\n#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1  2013     1     1      517            515         2      830            819\n#&gt; 2  2013     1     1      533            529         4      850            830\n#&gt; 3  2013     1     1      542            540         2      923            850\n#&gt; 4  2013     1     1      544            545        -1     1004           1022\n#&gt; 5  2013     1     1      554            600        -6      812            837\n#&gt; 6  2013     1     1      554            558        -4      740            728\n#&gt; # â„¹ 336,770 more rows\n#&gt; # â„¹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, â€¦\n\nå¦‚æœä½ æœ‰ä¸€å †å‘½åä¸ä¸€è‡´çš„åˆ—ï¼Œå¹¶ä¸”æ‰‹åŠ¨ä¿®å¤å®ƒä»¬ä¼šå¾ˆç—›è‹¦ï¼Œå¯ä»¥çœ‹çœ‹ janitor::clean_names()ï¼Œå®ƒæä¾›äº†ä¸€äº›æœ‰ç”¨çš„è‡ªåŠ¨æ¸…ç†åŠŸèƒ½ã€‚\n\n3.3.4 relocate()\n\nä½¿ç”¨ relocate() æ¥ç§»åŠ¨å˜é‡çš„ä½ç½®ã€‚ä½ å¯èƒ½æƒ³æŠŠç›¸å…³çš„å˜é‡æ”¶é›†åœ¨ä¸€èµ·ï¼Œæˆ–è€…æŠŠé‡è¦çš„å˜é‡ç§»åˆ°å‰é¢ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œrelocate() ä¼šæŠŠå˜é‡ç§»åˆ°æœ€å‰é¢ï¼š\n\nflights |&gt;\n    relocate(time_hour, air_time)\n#&gt; # A tibble: 336,776 Ã— 19\n#&gt;   time_hour           air_time  year month   day dep_time sched_dep_time\n#&gt;   &lt;dttm&gt;                 &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1 2013-01-01 05:00:00      227  2013     1     1      517            515\n#&gt; 2 2013-01-01 05:00:00      227  2013     1     1      533            529\n#&gt; 3 2013-01-01 05:00:00      160  2013     1     1      542            540\n#&gt; 4 2013-01-01 05:00:00      183  2013     1     1      544            545\n#&gt; 5 2013-01-01 06:00:00      116  2013     1     1      554            600\n#&gt; 6 2013-01-01 05:00:00      150  2013     1     1      554            558\n#&gt; # â„¹ 336,770 more rows\n#&gt; # â„¹ 12 more variables: dep_delay &lt;dbl&gt;, arr_time &lt;int&gt;, â€¦\n\nä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ .before å’Œ .after å‚æ•°æŒ‡å®šå°†å®ƒä»¬æ”¾åœ¨å“ªé‡Œï¼Œå°±åƒåœ¨ mutate() ä¸­ä¸€æ ·ï¼š\n\nflights |&gt;\n    relocate(year:dep_time, .after = time_hour)\nflights |&gt;\n    relocate(starts_with(\"arr\"), .before = dep_time)\n\n\n3.3.5 ç»ƒä¹ \n\næ¯”è¾ƒ dep_timeã€sched_dep_time å’Œ dep_delayã€‚ä½ æœŸæœ›è¿™ä¸‰ä¸ªæ•°å­—ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ\nå°½å¯èƒ½å¤šåœ°æƒ³å‡ºä» flights ä¸­é€‰æ‹© dep_timeã€dep_delayã€arr_time å’Œ arr_delay çš„æ–¹æ³•ã€‚\nå¦‚æœåœ¨ select() è°ƒç”¨ä¸­å¤šæ¬¡æŒ‡å®šåŒä¸€ä¸ªå˜é‡çš„åç§°ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ\n\nany_of() å‡½æ•°æ˜¯åšä»€ä¹ˆçš„ï¼Ÿä¸ºä»€ä¹ˆå®ƒä¸ä¸‹é¢è¿™ä¸ªå‘é‡ä¸€èµ·ä½¿ç”¨å¯èƒ½ä¼šæœ‰å¸®åŠ©ï¼Ÿ\n\nvariables &lt;- c(\"year\", \"month\", \"day\", \"dep_delay\", \"arr_delay\")\n\n\n\nè¿è¡Œä»¥ä¸‹ä»£ç çš„ç»“æœæ˜¯å¦è®©ä½ æ„Ÿåˆ°æƒŠè®¶ï¼Ÿselect è¾…åŠ©å‡½æ•°é»˜è®¤å¦‚ä½•å¤„ç†å¤§å°å†™ï¼Ÿä½ å¦‚ä½•æ›´æ”¹è¯¥é»˜è®¤è®¾ç½®ï¼Ÿ\n\nflights |&gt; select(contains(\"TIME\"))\n\n\nå°† air_time é‡å‘½åä¸º air_time_min ä»¥è¡¨æ˜åº¦é‡å•ä½ï¼Œå¹¶å°†å…¶ç§»åŠ¨åˆ°æ•°æ®æ¡†çš„å¼€å¤´ã€‚\n\nä¸ºä»€ä¹ˆä»¥ä¸‹ä»£ç ä¸èµ·ä½œç”¨ï¼Œè¿™ä¸ªé”™è¯¯æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ\n\nflights |&gt;\nselect(tailnum) |&gt;\narrange(arr_delay)\n#&gt; Error in `arrange()`:\n#&gt; â„¹ In argument: `..1 = arr_delay`.\n#&gt; Caused by error:\n#&gt; ! object 'arr_delay' not found",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>3</span>Â  <span class='chapter-title'>æ•°æ®è½¬æ¢</span>"
    ]
  },
  {
    "objectID": "data-transform.html#sec-the-pipe",
    "href": "data-transform.html#sec-the-pipe",
    "title": "3Â  æ•°æ®è½¬æ¢",
    "section": "\n3.4 ç®¡é“",
    "text": "3.4 ç®¡é“\næˆ‘ä»¬ä¸Šé¢å·²ç»å‘ä½ å±•ç¤ºäº†ç®¡é“çš„ç®€å•ç¤ºä¾‹ï¼Œä½†å®ƒçœŸæ­£çš„å¨åŠ›åœ¨äºä½ å¼€å§‹ç»„åˆå¤šä¸ªåŠ¨è¯æ—¶ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ æƒ³æ‰¾åˆ°é£å¾€ä¼‘æ–¯é¡¿ IAH æœºåœºçš„æœ€å¿«èˆªç­ï¼šä½ éœ€è¦ç»„åˆ filter()ã€mutate()ã€select() å’Œ arrange()ï¼š\n\nflights |&gt;\n    filter(dest == \"IAH\") |&gt;\n    mutate(speed = distance / air_time * 60) |&gt;\n    select(year:day, dep_time, carrier, flight, speed) |&gt;\n    arrange(desc(speed))\n#&gt; # A tibble: 7,198 Ã— 7\n#&gt;    year month   day dep_time carrier flight speed\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt; &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt;\n#&gt; 1  2013     7     9      707 UA         226  522.\n#&gt; 2  2013     8    27     1850 UA        1128  521.\n#&gt; 3  2013     8    28      902 UA        1711  519.\n#&gt; 4  2013     8    28     2122 UA        1022  519.\n#&gt; 5  2013     6    11     1628 UA        1178  515.\n#&gt; 6  2013     8    27     1017 UA         333  515.\n#&gt; # â„¹ 7,192 more rows\n\nå°½ç®¡è¿™ä¸ªç®¡é“æœ‰å››ä¸ªæ­¥éª¤ï¼Œä½†å®ƒå¾ˆå®¹æ˜“æµè§ˆï¼Œå› ä¸ºåŠ¨è¯éƒ½å‡ºç°åœ¨æ¯è¡Œçš„å¼€å¤´ï¼šä» flights æ•°æ®å¼€å§‹ï¼Œç„¶åç­›é€‰ï¼Œç„¶åæ´¾ç”Ÿï¼Œç„¶åé€‰æ‹©ï¼Œç„¶åæ’åºã€‚\nå¦‚æœæˆ‘ä»¬æ²¡æœ‰ç®¡é“ä¼šæ€ä¹ˆæ ·ï¼Ÿæˆ‘ä»¬å¯ä»¥å°†æ¯ä¸ªå‡½æ•°è°ƒç”¨åµŒå¥—åœ¨å‰ä¸€ä¸ªè°ƒç”¨ä¸­ï¼š\n\narrange(\n    select(\n        mutate(\n            filter(\n                flights,\n                dest == \"IAH\"\n            ),\n            speed = distance / air_time * 60\n        ),\n        year:day, dep_time, carrier, flight, speed\n    ),\n    desc(speed)\n)\n\næˆ–è€…æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€å †ä¸­é—´å¯¹è±¡ï¼š\n\nflights1 &lt;- filter(flights, dest == \"IAH\")\nflights2 &lt;- mutate(flights1, speed = distance / air_time * 60)\nflights3 &lt;- select(flights2, year:day, dep_time, carrier, flight, speed)\narrange(flights3, desc(speed))\n\nè™½ç„¶è¿™ä¸¤ç§å½¢å¼éƒ½æœ‰å…¶é€‚ç”¨çš„åœºåˆï¼Œä½†ç®¡é“é€šå¸¸äº§ç”Ÿçš„æ•°æ®åˆ†æä»£ç æ›´æ˜“äºç¼–å†™å’Œé˜…è¯»ã€‚\nè¦åœ¨ä½ çš„ä»£ç ä¸­æ·»åŠ ç®¡é“ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨å†…ç½®çš„é”®ç›˜å¿«æ·é”® Ctrl/Cmd + Shift + Mã€‚ä½ éœ€è¦å¯¹ä½ çš„ RStudio é€‰é¡¹åšä¸€ä¸ªæ›´æ”¹ï¼Œä»¥ä½¿ç”¨ |&gt; è€Œä¸æ˜¯ %&gt;%ï¼Œå¦‚ FigureÂ 3.1 æ‰€ç¤ºï¼›å…³äº %&gt;% çš„æ›´å¤šå†…å®¹ç¨åä»‹ç»ã€‚\n\n\n\n\n\n\n\nFigureÂ 3.1: è¦æ’å…¥ |&gt;ï¼Œè¯·ç¡®ä¿å‹¾é€‰äº†â€œä½¿ç”¨åŸç”Ÿç®¡é“è¿ç®—ç¬¦â€é€‰é¡¹ã€‚\n\n\n\n\n\n\n\n\n\n\nmagrittr\n\n\n\nå¦‚æœä½ å·²ç»ä½¿ç”¨ tidyverse ä¸€æ®µæ—¶é—´äº†ï¼Œä½ å¯èƒ½ç†Ÿæ‚‰ magrittr åŒ…æä¾›çš„ %&gt;% ç®¡é“ã€‚magrittr åŒ…åŒ…å«åœ¨æ ¸å¿ƒ tidyverse ä¸­ï¼Œæ‰€ä»¥ä½ å¯ä»¥åœ¨åŠ è½½ tidyverse æ—¶éšæ—¶ä½¿ç”¨ %&gt;%ï¼š\n\nlibrary(tidyverse)\n\nmtcars %&gt;%\n    group_by(cyl) %&gt;%\n    summarize(n = n())\n\nåœ¨ç®€å•çš„æƒ…å†µä¸‹ï¼Œ|&gt; å’Œ %&gt;% çš„è¡Œä¸ºå®Œå…¨ç›¸åŒã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆæˆ‘ä»¬æ¨èåŸºç¡€ç®¡é“å‘¢ï¼Ÿé¦–å…ˆï¼Œå› ä¸ºå®ƒæ˜¯ R åŸºç¡€åŒ…çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥å³ä½¿ä½ ä¸ä½¿ç”¨ tidyverseï¼Œå®ƒä¹Ÿæ€»æ˜¯å¯ç”¨çš„ã€‚å…¶æ¬¡ï¼Œ|&gt; æ¯” %&gt;% ç®€å•å¾—å¤šï¼šåœ¨ %&gt;% äº 2014 å¹´å‘æ˜å’Œ |&gt; äº 2021 å¹´ R 4.1.0 ä¸­è¢«åŒ…å«ä¹‹é—´çš„æ—¶é—´é‡Œï¼Œæˆ‘ä»¬å¯¹ç®¡é“æœ‰äº†æ›´å¥½çš„ç†è§£ã€‚è¿™ä½¿å¾—åŸºç¡€å®ç°å¯ä»¥æ‘’å¼ƒä¸å¸¸ç”¨å’Œä¸é‚£ä¹ˆé‡è¦çš„åŠŸèƒ½ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>3</span>Â  <span class='chapter-title'>æ•°æ®è½¬æ¢</span>"
    ]
  },
  {
    "objectID": "data-transform.html#åˆ†ç»„",
    "href": "data-transform.html#åˆ†ç»„",
    "title": "3Â  æ•°æ®è½¬æ¢",
    "section": "\n3.5 åˆ†ç»„",
    "text": "3.5 åˆ†ç»„\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ å·²ç»å­¦ä¹ äº†å¤„ç†è¡Œå’Œåˆ—çš„å‡½æ•°ã€‚å½“ä½ åŠ å…¥å¤„ç†åˆ†ç»„çš„èƒ½åŠ›æ—¶ï¼Œdplyr ä¼šå˜å¾—æ›´åŠ å¼ºå¤§ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†é‡ç‚¹å…³æ³¨æœ€é‡è¦çš„å‡½æ•°ï¼šgroup_by()ã€summarize() ä»¥åŠ slice ç³»åˆ—å‡½æ•°ã€‚\n\n3.5.1 group_by()\n\nä½¿ç”¨ group_by() å°†ä½ çš„æ•°æ®é›†åˆ’åˆ†ä¸ºå¯¹ä½ çš„åˆ†ææœ‰æ„ä¹‰çš„ç»„ï¼š\n\nflights |&gt;\n    group_by(month)\n#&gt; # A tibble: 336,776 Ã— 19\n#&gt; # Groups:   month [12]\n#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1  2013     1     1      517            515         2      830            819\n#&gt; 2  2013     1     1      533            529         4      850            830\n#&gt; 3  2013     1     1      542            540         2      923            850\n#&gt; 4  2013     1     1      544            545        -1     1004           1022\n#&gt; 5  2013     1     1      554            600        -6      812            837\n#&gt; 6  2013     1     1      554            558        -4      740            728\n#&gt; # â„¹ 336,770 more rows\n#&gt; # â„¹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, â€¦\n\ngroup_by() ä¸ä¼šæ”¹å˜æ•°æ®ï¼Œä½†å¦‚æœä½ ä»”ç»†çœ‹è¾“å‡ºï¼Œä½ ä¼šæ³¨æ„åˆ°è¾“å‡ºè¡¨æ˜å®ƒâ€œæŒ‰æœˆä»½åˆ†ç»„â€ (Groups: month [12])ã€‚è¿™æ„å‘³ç€åç»­æ“ä½œç°åœ¨å°†â€œæŒ‰æœˆâ€å·¥ä½œã€‚group_by() å°†è¿™ä¸ªåˆ†ç»„ç‰¹æ€§ï¼ˆç§°ä¸ºç±»ï¼‰æ·»åŠ åˆ°æ•°æ®æ¡†ä¸­ï¼Œè¿™æ”¹å˜äº†åº”ç”¨äºè¯¥æ•°æ®çš„åç»­åŠ¨è¯çš„è¡Œä¸ºã€‚\n\n3.5.2 summarize()\n\næœ€é‡è¦çš„åˆ†ç»„æ“ä½œæ˜¯æ‘˜è¦ (summary)ï¼Œå¦‚æœç”¨äºè®¡ç®—å•ä¸ªæ‘˜è¦ç»Ÿè®¡é‡ï¼Œå®ƒä¼šå°†æ•°æ®æ¡†å‡å°‘åˆ°æ¯ä¸ªç»„åªæœ‰ä¸€è¡Œã€‚åœ¨ dplyr ä¸­ï¼Œè¿™ä¸ªæ“ä½œç”± summarize()3 æ‰§è¡Œï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼Œè¯¥ç¤ºä¾‹è®¡ç®—äº†æŒ‰æœˆä»½çš„å¹³å‡å‡ºå‘å»¶è¯¯ï¼š\n\nflights |&gt;\n    group_by(month) |&gt;\n    summarize(\n        avg_delay = mean(dep_delay)\n    )\n#&gt; # A tibble: 12 Ã— 2\n#&gt;   month avg_delay\n#&gt;   &lt;int&gt;     &lt;dbl&gt;\n#&gt; 1     1        NA\n#&gt; 2     2        NA\n#&gt; 3     3        NA\n#&gt; 4     4        NA\n#&gt; 5     5        NA\n#&gt; 6     6        NA\n#&gt; # â„¹ 6 more rows\n\nå™¢ï¼å‡ºé”™äº†ï¼Œæˆ‘ä»¬æ‰€æœ‰çš„ç»“æœéƒ½æ˜¯ NAï¼ˆå‘éŸ³ä¸ºâ€œN-Aâ€ï¼‰ï¼Œè¿™æ˜¯ R ä¸­è¡¨ç¤ºç¼ºå¤±å€¼çš„ç¬¦å·ã€‚è¿™æ˜¯å› ä¸ºä¸€äº›è§‚æµ‹åˆ°çš„èˆªç­åœ¨å»¶è¯¯åˆ—ä¸­æœ‰ç¼ºå¤±æ•°æ®ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬è®¡ç®—åŒ…å«è¿™äº›å€¼çš„å¹³å‡å€¼æ—¶ï¼Œæˆ‘ä»¬å¾—åˆ°äº† NA ç»“æœã€‚æˆ‘ä»¬å°†åœ¨ Chapter 18 ä¸­è¯¦ç»†è®¨è®ºç¼ºå¤±å€¼ï¼Œä½†ç°åœ¨ï¼Œæˆ‘ä»¬å°†é€šè¿‡å°†å‚æ•° na.rm è®¾ç½®ä¸º TRUE æ¥å‘Šè¯‰ mean() å‡½æ•°å¿½ç•¥æ‰€æœ‰ç¼ºå¤±å€¼ï¼š\n\nflights |&gt;\n    group_by(month) |&gt;\n    summarize(\n        avg_delay = mean(dep_delay, na.rm = TRUE)\n    )\n#&gt; # A tibble: 12 Ã— 2\n#&gt;   month avg_delay\n#&gt;   &lt;int&gt;     &lt;dbl&gt;\n#&gt; 1     1      10.0\n#&gt; 2     2      10.8\n#&gt; 3     3      13.2\n#&gt; 4     4      13.9\n#&gt; 5     5      13.0\n#&gt; 6     6      20.8\n#&gt; # â„¹ 6 more rows\n\nä½ å¯ä»¥åœ¨ä¸€æ¬¡ summarize() è°ƒç”¨ä¸­åˆ›å»ºä»»æ„æ•°é‡çš„æ‘˜è¦ã€‚ä½ å°†åœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­å­¦åˆ°å„ç§æœ‰ç”¨çš„æ‘˜è¦ï¼Œä½†ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„æ‘˜è¦æ˜¯ n()ï¼Œå®ƒè¿”å›æ¯ä¸ªç»„ä¸­çš„è¡Œæ•°ï¼š\n\nflights |&gt;\n    group_by(month) |&gt;\n    summarize(\n        avg_delay = mean(dep_delay, na.rm = TRUE),\n        n = n()\n    )\n#&gt; # A tibble: 12 Ã— 3\n#&gt;   month avg_delay     n\n#&gt;   &lt;int&gt;     &lt;dbl&gt; &lt;int&gt;\n#&gt; 1     1      10.0 27004\n#&gt; 2     2      10.8 24951\n#&gt; 3     3      13.2 28834\n#&gt; 4     4      13.9 28330\n#&gt; 5     5      13.0 28796\n#&gt; 6     6      20.8 28243\n#&gt; # â„¹ 6 more rows\n\nåœ¨æ•°æ®ç§‘å­¦ä¸­ï¼Œå¹³å‡å€¼å’Œè®¡æ•°èƒ½è®©ä½ èµ°å¾—å¾ˆè¿œï¼\n\n3.5.3 slice_ ç³»åˆ—å‡½æ•°\næœ‰äº”ä¸ªæ–¹ä¾¿çš„å‡½æ•°ï¼Œå…è®¸ä½ åœ¨æ¯ä¸ªç»„å†…æå–ç‰¹å®šçš„è¡Œï¼š\n\n\ndf |&gt; slice_head(n = 1) ä»æ¯ä¸ªç»„ä¸­å–ç¬¬ä¸€è¡Œã€‚\n\ndf |&gt; slice_tail(n = 1) ä»æ¯ä¸ªç»„ä¸­å–æœ€åä¸€è¡Œã€‚\n\ndf |&gt; slice_min(x, n = 1) å–åˆ— x å€¼æœ€å°çš„è¡Œã€‚\n\ndf |&gt; slice_max(x, n = 1) å–åˆ— x å€¼æœ€å¤§çš„è¡Œã€‚\n\ndf |&gt; slice_sample(n = 1) å–ä¸€ä¸ªéšæœºè¡Œã€‚\n\nä½ å¯ä»¥æ”¹å˜ n æ¥é€‰æ‹©å¤šäºä¸€è¡Œï¼Œæˆ–è€…ç”¨ prop = 0.1 ä»£æ›¿ n = æ¥é€‰æ‹©ï¼ˆä¾‹å¦‚ï¼‰æ¯ä¸ªç»„ä¸­ 10% çš„è¡Œã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç æ‰¾åˆ°äº†åœ¨æ¯ä¸ªç›®çš„åœ°åˆ°è¾¾æ—¶å»¶è¯¯æœ€ä¸¥é‡çš„èˆªç­ï¼š\n\nflights |&gt;\n    group_by(dest) |&gt;\n    slice_max(arr_delay, n = 1) |&gt;\n    relocate(dest)\n#&gt; # A tibble: 108 Ã— 19\n#&gt; # Groups:   dest [105]\n#&gt;   dest   year month   day dep_time sched_dep_time dep_delay arr_time\n#&gt;   &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;\n#&gt; 1 ABQ    2013     7    22     2145           2007        98      132\n#&gt; 2 ACK    2013     7    23     1139            800       219     1250\n#&gt; 3 ALB    2013     1    25      123           2000       323      229\n#&gt; 4 ANC    2013     8    17     1740           1625        75     2042\n#&gt; 5 ATL    2013     7    22     2257            759       898      121\n#&gt; 6 AUS    2013     7    10     2056           1505       351     2347\n#&gt; # â„¹ 102 more rows\n#&gt; # â„¹ 11 more variables: sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;, â€¦\n\næ³¨æ„è¿™é‡Œæœ‰ 105 ä¸ªç›®çš„åœ°ï¼Œä½†æˆ‘ä»¬å¾—åˆ°äº† 108 è¡Œã€‚æ€ä¹ˆå›äº‹ï¼Ÿslice_min() å’Œ slice_max() ä¼šä¿ç•™å€¼ç›¸åŒçš„è¡Œï¼Œæ‰€ä»¥ n = 1 æ„å‘³ç€ç»™æˆ‘ä»¬æ‰€æœ‰å…·æœ‰æœ€é«˜å€¼çš„è¡Œã€‚å¦‚æœä½ å¸Œæœ›æ¯ä¸ªç»„åªå¾—åˆ°ä¸€è¡Œï¼Œä½ å¯ä»¥è®¾ç½® with_ties = FALSEã€‚\nè¿™ç±»ä¼¼äºç”¨ summarize() è®¡ç®—æœ€å¤§å»¶è¯¯ï¼Œä½†ä½ å¾—åˆ°çš„æ˜¯æ•´ä¸ªå¯¹åº”çš„è¡Œï¼ˆå¦‚æœå€¼ç›¸åŒåˆ™æœ‰å¤šè¡Œï¼‰ï¼Œè€Œä¸æ˜¯å•ä¸ªæ‘˜è¦ç»Ÿè®¡é‡ã€‚\n\n3.5.4 æŒ‰å¤šä¸ªå˜é‡åˆ†ç»„\nä½ å¯ä»¥ä½¿ç”¨å¤šä¸ªå˜é‡æ¥åˆ›å»ºç»„ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºæ¯ä¸ªæ—¥æœŸåˆ›å»ºä¸€ä¸ªç»„ã€‚\n\ndaily &lt;- flights |&gt;\n    group_by(year, month, day)\ndaily\n#&gt; # A tibble: 336,776 Ã— 19\n#&gt; # Groups:   year, month, day [365]\n#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1  2013     1     1      517            515         2      830            819\n#&gt; 2  2013     1     1      533            529         4      850            830\n#&gt; 3  2013     1     1      542            540         2      923            850\n#&gt; 4  2013     1     1      544            545        -1     1004           1022\n#&gt; 5  2013     1     1      554            600        -6      812            837\n#&gt; 6  2013     1     1      554            558        -4      740            728\n#&gt; # â„¹ 336,770 more rows\n#&gt; # â„¹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, â€¦\n\nå½“ä½ å¯¹æŒ‰å¤šä¸ªå˜é‡åˆ†ç»„çš„ tibble è¿›è¡Œæ‘˜è¦æ—¶ï¼Œæ¯ä¸ªæ‘˜è¦éƒ½ä¼šå‰¥ç¦»æœ€åä¸€ä¸ªåˆ†ç»„ã€‚äº‹åçœ‹æ¥ï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªè®©è¿™ä¸ªå‡½æ•°å·¥ä½œçš„å¾ˆå¥½æ–¹å¼ï¼Œä½†åœ¨ä¸ç ´åç°æœ‰ä»£ç çš„æƒ…å†µä¸‹å¾ˆéš¾æ”¹å˜ã€‚ä¸ºäº†æ¸…æ¥šåœ°è¯´æ˜å‘ç”Ÿäº†ä»€ä¹ˆï¼Œdplyr æ˜¾ç¤ºäº†ä¸€æ¡æ¶ˆæ¯ï¼Œå‘Šè¯‰ä½ å¦‚ä½•æ”¹å˜è¿™ç§è¡Œä¸ºï¼š\n\ndaily_flights &lt;- daily |&gt;\n    summarize(n = n())\n#&gt; `summarise()` has grouped output by 'year', 'month'. You can override using\n#&gt; the `.groups` argument.\n\nå¦‚æœä½ å¯¹è¿™ç§è¡Œä¸ºæ„Ÿåˆ°æ»¡æ„ï¼Œä½ å¯ä»¥æ˜ç¡®è¯·æ±‚å®ƒä»¥æŠ‘åˆ¶è¯¥æ¶ˆæ¯ï¼š\n\ndaily_flights &lt;- daily |&gt;\n    summarize(\n        n = n(),\n        .groups = \"drop_last\"\n    )\n\næˆ–è€…ï¼Œé€šè¿‡è®¾ç½®ä¸åŒçš„å€¼æ¥æ›´æ”¹é»˜è®¤è¡Œä¸ºï¼Œä¾‹å¦‚ï¼Œ\"drop\" ç”¨äºåˆ é™¤æ‰€æœ‰åˆ†ç»„ï¼Œæˆ– \"keep\" ç”¨äºä¿ç•™ç›¸åŒçš„åˆ†ç»„ã€‚\n\n3.5.5 å–æ¶ˆåˆ†ç»„\nä½ å¯èƒ½è¿˜æƒ³åœ¨ä¸ä½¿ç”¨ summarize() çš„æƒ…å†µä¸‹ä»æ•°æ®æ¡†ä¸­ç§»é™¤åˆ†ç»„ã€‚ä½ å¯ä»¥ä½¿ç”¨ ungroup() æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚\n\ndaily |&gt;\n    ungroup()\n#&gt; # A tibble: 336,776 Ã— 19\n#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1  2013     1     1      517            515         2      830            819\n#&gt; 2  2013     1     1      533            529         4      850            830\n#&gt; 3  2013     1     1      542            540         2      923            850\n#&gt; 4  2013     1     1      544            545        -1     1004           1022\n#&gt; 5  2013     1     1      554            600        -6      812            837\n#&gt; 6  2013     1     1      554            558        -4      740            728\n#&gt; # â„¹ 336,770 more rows\n#&gt; # â„¹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, â€¦\n\nç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹å½“ä½ å¯¹ä¸€ä¸ªæœªåˆ†ç»„çš„æ•°æ®æ¡†è¿›è¡Œæ‘˜è¦æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚\n\ndaily |&gt;\n    ungroup() |&gt;\n    summarize(\n        avg_delay = mean(dep_delay, na.rm = TRUE),\n        flights = n()\n    )\n#&gt; # A tibble: 1 Ã— 2\n#&gt;   avg_delay flights\n#&gt;       &lt;dbl&gt;   &lt;int&gt;\n#&gt; 1      12.6  336776\n\nä½ å¾—åˆ°äº†ä¸€è¡Œï¼Œå› ä¸º dplyr å°†æœªåˆ†ç»„æ•°æ®æ¡†ä¸­çš„æ‰€æœ‰è¡Œéƒ½è§†ä¸ºå±äºä¸€ä¸ªç»„ã€‚\n\n3.5.6 .by\n\ndplyr 1.1.0 åŒ…å«äº†ä¸€ç§æ–°çš„ã€å®éªŒæ€§çš„ã€ç”¨äºæŒ‰æ“ä½œåˆ†ç»„çš„è¯­æ³•ï¼Œå³ .by å‚æ•°ã€‚group_by() å’Œ ungroup() ä¸ä¼šæ¶ˆå¤±ï¼Œä½†ä½ ç°åœ¨ä¹Ÿå¯ä»¥ä½¿ç”¨ .by å‚æ•°åœ¨å•ä¸ªæ“ä½œå†…è¿›è¡Œåˆ†ç»„ï¼š\n\nflights |&gt;\n    summarize(\n        delay = mean(dep_delay, na.rm = TRUE),\n        n = n(),\n        .by = month\n    )\n\næˆ–è€…ï¼Œå¦‚æœä½ æƒ³æŒ‰å¤šä¸ªå˜é‡åˆ†ç»„ï¼š\n\nflights |&gt;\n    summarize(\n        delay = mean(dep_delay, na.rm = TRUE),\n        n = n(),\n        .by = c(origin, dest)\n    )\n\n.by é€‚ç”¨äºæ‰€æœ‰åŠ¨è¯ï¼Œå¹¶ä¸”å®ƒçš„ä¼˜ç‚¹æ˜¯ï¼Œä½ ä¸éœ€è¦ä½¿ç”¨ .groups å‚æ•°æ¥æŠ‘åˆ¶åˆ†ç»„æ¶ˆæ¯ï¼Œæˆ–è€…åœ¨å®Œæˆåä½¿ç”¨ ungroup()ã€‚\næˆ‘ä»¬åœ¨æœ¬ç« ä¸­æ²¡æœ‰é‡ç‚¹ä»‹ç»è¿™ç§è¯­æ³•ï¼Œå› ä¸ºåœ¨æˆ‘ä»¬å†™ä¹¦æ—¶å®ƒè¿˜å¾ˆæ–°ã€‚æˆ‘ä»¬æƒ³æä¸€ä¸‹å®ƒï¼Œå› ä¸ºæˆ‘ä»¬è®¤ä¸ºå®ƒæœ‰å¾ˆå¤§çš„æ½œåŠ›ï¼Œå¾ˆå¯èƒ½ä¼šéå¸¸æµè¡Œã€‚ä½ å¯ä»¥åœ¨ dplyr 1.1.0 åšå®¢æ–‡ç« ä¸­äº†è§£æ›´å¤šå…³äºå®ƒçš„ä¿¡æ¯ã€‚\n\n3.5.7 ç»ƒä¹ \n\nå“ªä¸ªèˆªç©ºå…¬å¸çš„å¹³å‡å»¶è¯¯æœ€ä¸¥é‡ï¼ŸæŒ‘æˆ˜ï¼šä½ èƒ½åˆ†æ¸…æ˜¯æœºåœºä¸å¥½è¿˜æ˜¯èˆªç©ºå…¬å¸ä¸å¥½çš„å½±å“å—ï¼Ÿä¸ºä»€ä¹ˆ/ä¸ºä»€ä¹ˆä¸ï¼Ÿï¼ˆæç¤ºï¼šæƒ³æƒ³ flights |&gt; group_by(carrier, dest) |&gt; summarize(n())ï¼‰\næ‰¾å‡ºä»æ¯ä¸ªç›®çš„åœ°å‡ºå‘æ—¶å»¶è¯¯æœ€ä¸¥é‡çš„èˆªç­ã€‚\nå»¶è¯¯åœ¨ä¸€å¤©ä¸­æ˜¯å¦‚ä½•å˜åŒ–çš„ï¼Ÿç”¨å›¾è¡¨æ¥è¯´æ˜ä½ çš„ç­”æ¡ˆã€‚\nå¦‚æœä½ å‘ slice_min() åŠç±»ä¼¼å‡½æ•°æä¾›ä¸€ä¸ªè´Ÿçš„ n ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ\nç”¨ä½ åˆšå­¦è¿‡çš„ dplyr åŠ¨è¯è§£é‡Š count() çš„ä½œç”¨ã€‚count() çš„ sort å‚æ•°æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ\n\nå‡è®¾æˆ‘ä»¬æœ‰ä»¥ä¸‹è¿™ä¸ªå°æ•°æ®æ¡†ï¼š\n\ndf &lt;- tibble(\nx = 1:5,\ny = c(\"a\", \"b\", \"a\", \"a\", \"b\"),\nz = c(\"K\", \"K\", \"L\", \"L\", \"K\")\n)\n\n\nå†™ä¸‹ä½ è®¤ä¸ºè¾“å‡ºä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼Œç„¶åæ£€æŸ¥ä½ æ˜¯å¦æ­£ç¡®ï¼Œå¹¶æè¿° group_by() çš„ä½œç”¨ã€‚\n\n\ndf |&gt;\n  group_by(y)\n\n\nb.  å†™ä¸‹ä½ è®¤ä¸ºè¾“å‡ºä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼Œç„¶åæ£€æŸ¥ä½ æ˜¯å¦æ­£ç¡®ï¼Œå¹¶æè¿° `arrange()` çš„ä½œç”¨ã€‚å¦å¤–ï¼Œè¯„è®ºå®ƒä¸ (a) éƒ¨åˆ†ä¸­çš„ `group_by()` æœ‰ä½•ä¸åŒã€‚\n\n\ndf |&gt;\n  arrange(y)\n\n\nc.  å†™ä¸‹ä½ è®¤ä¸ºè¾“å‡ºä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼Œç„¶åæ£€æŸ¥ä½ æ˜¯å¦æ­£ç¡®ï¼Œå¹¶æè¿°è¿™ä¸ªç®¡é“çš„ä½œç”¨ã€‚\n\n\ndf |&gt;\n  group_by(y) |&gt;\n  summarize(mean_x = mean(x))\n\n\nd.  å†™ä¸‹ä½ è®¤ä¸ºè¾“å‡ºä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼Œç„¶åæ£€æŸ¥ä½ æ˜¯å¦æ­£ç¡®ï¼Œå¹¶æè¿°è¿™ä¸ªç®¡é“çš„ä½œç”¨ã€‚ç„¶åï¼Œè¯„è®ºæ¶ˆæ¯è¯´äº†ä»€ä¹ˆã€‚\n\n\ndf |&gt;\n  group_by(y, z) |&gt;\n  summarize(mean_x = mean(x))\n\n\nå†™ä¸‹ä½ è®¤ä¸ºè¾“å‡ºä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼Œç„¶åæ£€æŸ¥ä½ æ˜¯å¦æ­£ç¡®ï¼Œå¹¶æè¿°è¿™ä¸ªç®¡é“çš„ä½œç”¨ã€‚å®ƒçš„è¾“å‡ºä¸ (d) éƒ¨åˆ†çš„è¾“å‡ºæœ‰ä½•ä¸åŒï¼Ÿ\n\n\ndf |&gt;\n  group_by(y, z) |&gt;\n  summarize(mean_x = mean(x), .groups = \"drop\")\n\n\nå†™ä¸‹ä½ è®¤ä¸ºè¾“å‡ºä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼Œç„¶åæ£€æŸ¥ä½ æ˜¯å¦æ­£ç¡®ï¼Œå¹¶æè¿°æ¯ä¸ªç®¡é“çš„ä½œç”¨ã€‚è¿™ä¸¤ä¸ªç®¡é“çš„è¾“å‡ºæœ‰ä½•ä¸åŒï¼Ÿ\n\n\ndf |&gt;\n  group_by(y, z) |&gt;\n  summarize(mean_x = mean(x))\n\ndf |&gt;\n  group_by(y, z) |&gt;\n  mutate(mean_x = mean(x))",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>3</span>Â  <span class='chapter-title'>æ•°æ®è½¬æ¢</span>"
    ]
  },
  {
    "objectID": "data-transform.html#sec-sample-size",
    "href": "data-transform.html#sec-sample-size",
    "title": "3Â  æ•°æ®è½¬æ¢",
    "section": "\n3.6 æ¡ˆä¾‹",
    "text": "3.6 æ¡ˆä¾‹\næ¯å½“ä½ è¿›è¡Œä»»ä½•èšåˆæ“ä½œæ—¶ï¼ŒåŒ…å«ä¸€ä¸ªè®¡æ•°ï¼ˆn()ï¼‰æ€»æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚è¿™æ ·ï¼Œä½ å¯ä»¥ç¡®ä¿ä½ ä¸æ˜¯åŸºäºéå¸¸å°‘é‡çš„æ•°æ®å¾—å‡ºç»“è®ºã€‚æˆ‘ä»¬å°†ç”¨ Lahman åŒ…ä¸­çš„ä¸€äº›æ£’çƒæ•°æ®æ¥æ¼”ç¤ºè¿™ä¸€ç‚¹ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å°†æ¯”è¾ƒä¸€ä¸ªçƒå‘˜å‡»ä¸­å®‰æ‰“ï¼ˆHï¼‰çš„æ¯”ä¾‹ä¸ä»–ä»¬å°è¯•å°†çƒæ‰“å…¥åœºå†…ï¼ˆABï¼‰çš„æ¬¡æ•°ï¼š\n\nbatters &lt;- Lahman::Batting |&gt;\n    group_by(playerID) |&gt;\n    summarize(\n        performance = sum(H, na.rm = TRUE) / sum(AB, na.rm = TRUE),\n        n = sum(AB, na.rm = TRUE)\n    )\nbatters\n#&gt; # A tibble: 20,730 Ã— 3\n#&gt;   playerID  performance     n\n#&gt;   &lt;chr&gt;           &lt;dbl&gt; &lt;int&gt;\n#&gt; 1 aardsda01      0          4\n#&gt; 2 aaronha01      0.305  12364\n#&gt; 3 aaronto01      0.229    944\n#&gt; 4 aasedo01       0          5\n#&gt; 5 abadan01       0.0952    21\n#&gt; 6 abadfe01       0.111      9\n#&gt; # â„¹ 20,724 more rows\n\nå½“æˆ‘ä»¬ç»˜åˆ¶å‡»çƒæ‰‹çš„æŠ€æœ¯æ°´å¹³ï¼ˆç”¨å‡»çƒç‡ performance è¡¡é‡ï¼‰ä¸å‡»çƒæœºä¼šæ¬¡æ•°ï¼ˆç”¨æ‰“æ•° n è¡¡é‡ï¼‰çš„å…³ç³»å›¾æ—¶ï¼Œä½ ä¼šçœ‹åˆ°ä¸¤ç§æ¨¡å¼ï¼š\n\nåœ¨æ‰“æ•°è¾ƒå°‘çš„çƒå‘˜ä¸­ï¼Œperformance çš„å˜å¼‚æ›´å¤§ã€‚è¿™ä¸ªå›¾çš„å½¢çŠ¶éå¸¸æœ‰ç‰¹ç‚¹ï¼šæ¯å½“ä½ ç»˜åˆ¶å¹³å‡å€¼ï¼ˆæˆ–å…¶ä»–æ‘˜è¦ç»Ÿè®¡é‡ï¼‰ä¸ç»„å¤§å°æ—¶ï¼Œä½ éƒ½ä¼šçœ‹åˆ°éšç€æ ·æœ¬é‡çš„å¢åŠ ï¼Œå˜å¼‚ä¼šå‡å°4ã€‚\næŠ€æœ¯æ°´å¹³ (performance) å’Œå‡»çƒæœºä¼š (n) ä¹‹é—´å­˜åœ¨æ­£ç›¸å…³å…³ç³»ï¼Œå› ä¸ºçƒé˜Ÿå¸Œæœ›ç»™ä»–ä»¬æœ€å¥½çš„å‡»çƒæ‰‹æœ€å¤šçš„å‡»çƒæœºä¼šã€‚\n\n\nbatters |&gt;\n    filter(n &gt; 100) |&gt;\n    ggplot(aes(x = n, y = performance)) +\n    geom_point(alpha = 1 / 10) +\n    geom_smooth(se = FALSE)\n\n\n\n\n\n\n\næ³¨æ„ ggplot2 å’Œ dplyr ç»„åˆä½¿ç”¨çš„ä¾¿æ·æ¨¡å¼ã€‚ä½ åªéœ€è¦è®°ä½ä»ç”¨äºæ•°æ®å¤„ç†çš„ |&gt; åˆ‡æ¢åˆ°ç”¨äºå‘å›¾è¡¨æ·»åŠ å›¾å±‚çš„ +ã€‚\nè¿™å¯¹æ’åä¹Ÿæœ‰é‡è¦å½±å“ã€‚å¦‚æœä½ å¤©çœŸåœ°æŒ‰ desc(performance) æ’åºï¼Œå‡»çƒç‡æœ€é«˜çš„äººæ˜¾ç„¶æ˜¯é‚£äº›å°è¯•å°†çƒæ‰“å…¥åœºå†…æ¬¡æ•°å¾ˆå°‘ä¸”ç¢°å·§å‡»ä¸­å®‰æ‰“çš„äººï¼Œä»–ä»¬ä¸ä¸€å®šæ˜¯æœ€æœ‰æŠ€æœ¯çš„çƒå‘˜ï¼š\n\nbatters |&gt;\n    arrange(desc(performance))\n#&gt; # A tibble: 20,730 Ã— 3\n#&gt;   playerID  performance     n\n#&gt;   &lt;chr&gt;           &lt;dbl&gt; &lt;int&gt;\n#&gt; 1 abramge01           1     1\n#&gt; 2 alberan01           1     1\n#&gt; 3 banisje01           1     1\n#&gt; 4 bartocl01           1     1\n#&gt; 5 bassdo01            1     1\n#&gt; 6 birasst01           1     2\n#&gt; # â„¹ 20,724 more rows\n\nä½ å¯ä»¥åœ¨ http://varianceexplained.org/r/empirical_bayes_baseball/ å’Œ https://www.evanmiller.org/how-not-to-sort-by-average-rating.html æ‰¾åˆ°å¯¹è¿™ä¸ªé—®é¢˜ä»¥åŠå¦‚ä½•å…‹æœå®ƒçš„å¾ˆå¥½è§£é‡Šã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>3</span>Â  <span class='chapter-title'>æ•°æ®è½¬æ¢</span>"
    ]
  },
  {
    "objectID": "data-transform.html#å°ç»“",
    "href": "data-transform.html#å°ç»“",
    "title": "3Â  æ•°æ®è½¬æ¢",
    "section": "\n3.7 å°ç»“",
    "text": "3.7 å°ç»“\nåœ¨æœ¬ç« ä¸­ï¼Œä½ å­¦ä¹ äº† dplyr ä¸ºå¤„ç†æ•°æ®æ¡†æä¾›çš„å·¥å…·ã€‚è¿™äº›å·¥å…·å¤§è‡´åˆ†ä¸ºä¸‰ç±»ï¼šæ“ä½œè¡Œçš„ï¼ˆå¦‚ filter() å’Œ arrange()ï¼‰ï¼Œæ“ä½œåˆ—çš„ï¼ˆå¦‚ select() å’Œ mutate()ï¼‰ï¼Œä»¥åŠæ“ä½œåˆ†ç»„çš„ï¼ˆå¦‚ group_by() å’Œ summarize()ï¼‰ã€‚åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬é‡ç‚¹å…³æ³¨äº†è¿™äº›â€œæ•´ä¸ªæ•°æ®æ¡†â€çš„å·¥å…·ï¼Œä½†ä½ è¿˜æ²¡æœ‰å­¦åˆ°å¤ªå¤šå…³äºå¯ä»¥å¯¹å•ä¸ªå˜é‡åšä»€ä¹ˆçš„çŸ¥è¯†ã€‚æˆ‘ä»¬å°†åœ¨æœ¬ä¹¦çš„â€œè½¬æ¢â€éƒ¨åˆ†å›åˆ°è¿™ä¸ªé—®é¢˜ï¼Œå…¶ä¸­æ¯ä¸€ç« éƒ½ä¸ºç‰¹å®šç±»å‹çš„å˜é‡æä¾›å·¥å…·ã€‚\nåœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†è½¬å›å·¥ä½œæµç¨‹ï¼Œè®¨è®ºä»£ç é£æ ¼çš„é‡è¦æ€§ä»¥åŠä¿æŒä»£ç è‰¯å¥½ç»„ç»‡ï¼Œä»¥ä¾¿ä½ å’Œä»–äººéƒ½èƒ½è½»æ¾é˜…è¯»å’Œç†è§£ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>3</span>Â  <span class='chapter-title'>æ•°æ®è½¬æ¢</span>"
    ]
  },
  {
    "objectID": "data-transform.html#footnotes",
    "href": "data-transform.html#footnotes",
    "title": "3Â  æ•°æ®è½¬æ¢",
    "section": "",
    "text": "ç¨åï¼Œä½ å°†å­¦ä¹  slice_*() ç³»åˆ—å‡½æ•°ï¼Œå®ƒå…è®¸ä½ æ ¹æ®è¡Œçš„ä½ç½®é€‰æ‹©è¡Œã€‚â†©ï¸\nè®°ä½ï¼Œåœ¨ RStudio ä¸­ï¼ŒæŸ¥çœ‹å¤šåˆ—æ•°æ®é›†æœ€ç®€å•çš„æ–¹æ³•æ˜¯ View()ã€‚â†©ï¸\næˆ–è€… summarise()ï¼Œå¦‚æœä½ æ›´å–œæ¬¢è‹±å¼è‹±è¯­ã€‚â†©ï¸\nå¤§æ•°å®šå¾‹ã€‚â†©ï¸",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>3</span>Â  <span class='chapter-title'>æ•°æ®è½¬æ¢</span>"
    ]
  },
  {
    "objectID": "workflow-style.html",
    "href": "workflow-style.html",
    "title": "4Â  å·¥ä½œæµï¼šä»£ç é£æ ¼",
    "section": "",
    "text": "4.1 å‘½å\nè‰¯å¥½çš„ä»£ç é£æ ¼å°±åƒæ­£ç¡®çš„æ ‡ç‚¹ç¬¦å·ï¼šæ²¡æœ‰å®ƒä¹Ÿèƒ½è¡Œï¼Œä½†å®ƒç¡®å®èƒ½è®©å†…å®¹æ›´å®¹æ˜“é˜…è¯»ã€‚ å³ä½¿æ˜¯ç¼–ç¨‹æ–°æ‰‹ï¼Œä¹Ÿåº”è¯¥åŠªåŠ›åŸ¹å…»è‰¯å¥½çš„ä»£ç é£æ ¼ã€‚ ä½¿ç”¨ä¸€è‡´çš„é£æ ¼å¯ä»¥è®©å…¶ä»–äºº (åŒ…æ‹¬æœªæ¥çš„ä½ ï¼) æ›´å®¹æ˜“è¯»æ‡‚ä½ çš„ä»£ç ï¼Œå½“éœ€è¦ä»ä»–äººé‚£é‡Œè·å¾—å¸®åŠ©æ—¶ï¼Œè¿™ä¸€ç‚¹å°¤ä¸ºé‡è¦ã€‚ æœ¬ç« å°†ä»‹ç» tidyverse é£æ ¼æŒ‡å— ä¸­æœ€é‡è¦çš„å‡ ç‚¹ï¼Œæœ¬ä¹¦é€šç¯‡éƒ½ä½¿ç”¨äº†è¯¥é£æ ¼ã€‚\nä¸€å¼€å§‹ï¼Œå¯¹ä»£ç è¿›è¡Œé£æ ¼åŒ–ä¼šè®©ä½ è§‰å¾—æœ‰ç‚¹ä¹å‘³ï¼Œä½†åªè¦å¤šåŠ ç»ƒä¹ ï¼Œå®ƒå¾ˆå¿«å°±ä¼šæˆä¸ºä½ çš„ç¬¬äºŒå¤©æ€§ã€‚ æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€äº›å¾ˆæ£’çš„å·¥å…·å¯ä»¥å¿«é€Ÿé‡å¡‘ç°æœ‰ä»£ç çš„é£æ ¼ï¼Œæ¯”å¦‚ Lorenz Walthert å¼€å‘çš„ styler åŒ…ã€‚ ç”¨ install.packages(\"styler\") å®‰è£…å®ƒä¹‹åï¼Œä¸€ä¸ªç®€ä¾¿çš„ä½¿ç”¨æ–¹æ³•æ˜¯é€šè¿‡ RStudio çš„å‘½ä»¤é¢æ¿ (command palette)ã€‚ å‘½ä»¤é¢æ¿å¯ä»¥è®©ä½ ä½¿ç”¨ä»»ä½•å†…ç½®çš„ RStudio å‘½ä»¤ä»¥åŠè®¸å¤šç”±åŒ…æä¾›çš„æ’ä»¶ã€‚ æŒ‰ Cmd/Ctrl + Shift + P æ‰“å¼€å‘½ä»¤é¢æ¿ï¼Œç„¶åè¾“å…¥ â€œstylerâ€ å°±å¯ä»¥çœ‹åˆ° styler æä¾›çš„æ‰€æœ‰å¿«æ·æ–¹å¼ã€‚ FigureÂ 4.1 å±•ç¤ºäº†ç»“æœã€‚\nåœ¨æœ¬ç« çš„ä»£ç ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ tidyverse å’Œ nycflights13 åŒ…ã€‚\næˆ‘ä»¬åœ¨ Section 2.3 ä¸­ç®€è¦è®¨è®ºè¿‡å‘½åã€‚ è®°ä½ï¼Œå˜é‡å (ç”¨ &lt;- åˆ›å»ºçš„å’Œç”¨ mutate() åˆ›å»ºçš„) åº”è¯¥åªä½¿ç”¨å°å†™å­—æ¯ã€æ•°å­—å’Œ _ã€‚ ä½¿ç”¨ _ æ¥åˆ†éš”åç§°ä¸­çš„å•è¯ã€‚\n# æå€¡ï¼š\nshort_flights &lt;- flights |&gt; filter(air_time &lt; 60)\n\n# é¿å…ï¼š\nSHORTFLIGHTS &lt;- flights |&gt; filter(air_time &lt; 60)\nä½œä¸ºä¸€æ¡é€šç”¨ç»éªŒæ³•åˆ™ï¼Œæœ€å¥½æ˜¯é€‰æ‹©æ˜“äºç†è§£çš„é•¿æè¿°æ€§åç§°ï¼Œè€Œä¸æ˜¯ä¸ºäº†è¾“å…¥å¿«æ·è€Œä½¿ç”¨ç®€æ´çš„åç§°ã€‚ åœ¨ç¼–å†™ä»£ç æ—¶ï¼ŒçŸ­åç§°èŠ‚çœçš„æ—¶é—´ç›¸å¯¹è¾ƒå°‘ (ç‰¹åˆ«æ˜¯å› ä¸ºè‡ªåŠ¨è¡¥å…¨ä¼šå¸®ä½ å®Œæˆè¾“å…¥)ï¼Œä½†å½“ä½ å›è¿‡å¤´æ¥çœ‹æ—§ä»£ç æ—¶ï¼Œå´å¯èƒ½è¦èŠ±å¾ˆå¤šæ—¶é—´å»ç¢ç£¨ä¸€ä¸ªæ™¦æ¶©çš„ç¼©å†™ã€‚\nå¦‚æœä½ æœ‰ä¸€ç»„ç›¸å…³äº‹ç‰©çš„åç§°ï¼Œè¯·å°½é‡ä¿æŒä¸€è‡´ã€‚ å½“ä½ å¿˜è®°äº†ä¹‹å‰çš„çº¦å®šï¼Œä¸ä¸€è‡´çš„æƒ…å†µå°±å¾ˆå®¹æ˜“å‡ºç°ï¼Œæ‰€ä»¥å¦‚æœä½ éœ€è¦å›å»é‡å‘½åä¸€äº›ä¸œè¥¿ï¼Œä¸è¦è§‰å¾—ä¸å¥½æ„æ€ã€‚ æ€»çš„æ¥è¯´ï¼Œå¦‚æœä½ æœ‰ä¸€ç»„å±äºåŒä¸€ä¸»é¢˜çš„å˜é‡ï¼Œæœ€å¥½ç»™å®ƒä»¬ä¸€ä¸ªå…±åŒçš„å‰ç¼€ï¼Œè€Œä¸æ˜¯å…±åŒçš„åç¼€ï¼Œå› ä¸ºè‡ªåŠ¨è¡¥å…¨åœ¨å˜é‡çš„å¼€å¤´éƒ¨åˆ†æ•ˆæœæœ€å¥½ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>4</span>Â  <span class='chapter-title'>å·¥ä½œæµï¼šä»£ç é£æ ¼</span>"
    ]
  },
  {
    "objectID": "workflow-style.html#ç©ºæ ¼",
    "href": "workflow-style.html#ç©ºæ ¼",
    "title": "4Â  å·¥ä½œæµï¼šä»£ç é£æ ¼",
    "section": "\n4.2 ç©ºæ ¼",
    "text": "4.2 ç©ºæ ¼\nåœ¨æ•°å­¦è¿ç®—ç¬¦çš„ä¸¤ä¾§éƒ½è¦åŠ ä¸Šç©ºæ ¼ï¼Œé™¤äº† ^ (å³ +ã€-ã€==ã€&lt; ç­‰)ï¼Œåœ¨èµ‹å€¼è¿ç®—ç¬¦ (&lt;-) çš„ä¸¤ä¾§ä¹Ÿè¦åŠ ä¸Šç©ºæ ¼ã€‚\n\n# æå€¡ï¼š\nz &lt;- (a + b)^2 / d\n\n# é¿å…ï¼š\nz &lt;- (a + b)^2 / d\n\nåœ¨å¸¸è§„å‡½æ•°è°ƒç”¨çš„æ‹¬å·å†…å¤–ä¸è¦åŠ ç©ºæ ¼ã€‚ é€—å·åé¢è¦å§‹ç»ˆåŠ ä¸€ä¸ªç©ºæ ¼ï¼Œå°±åƒæ ‡å‡†çš„è‹±è¯­ä¹¦å†™ä¸€æ ·ã€‚\n\n# æå€¡ï¼š\nmean(x, na.rm = TRUE)\n\n# é¿å…ï¼š\nmean(x, na.rm = TRUE)\n\nå¦‚æœèƒ½æ”¹å–„å¯¹é½ï¼Œå¯ä»¥æ·»åŠ é¢å¤–çš„ç©ºæ ¼ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœä½ åœ¨ mutate() ä¸­åˆ›å»ºå¤šä¸ªå˜é‡ï¼Œä½ å¯èƒ½æƒ³æ·»åŠ ç©ºæ ¼ä»¥ä¾¿æ‰€æœ‰çš„ = å¯¹é½ã€‚1 è¿™è®©ä»£ç æ›´å®¹æ˜“æµè§ˆã€‚\n\nflights |&gt;\n    mutate(\n        speed      = distance / air_time,\n        dep_hour   = dep_time %/% 100,\n        dep_minute = dep_time %% 100\n    )",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>4</span>Â  <span class='chapter-title'>å·¥ä½œæµï¼šä»£ç é£æ ¼</span>"
    ]
  },
  {
    "objectID": "workflow-style.html#sec-pipes",
    "href": "workflow-style.html#sec-pipes",
    "title": "4Â  å·¥ä½œæµï¼šä»£ç é£æ ¼",
    "section": "\n4.3 ç®¡é“",
    "text": "4.3 ç®¡é“\n|&gt; å‰é¢åº”è¯¥æ€»æœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œå¹¶ä¸”é€šå¸¸åº”è¯¥æ˜¯ä¸€è¡Œçš„æœ€åä¸€ä¸ªå­—ç¬¦ã€‚ è¿™ä½¿å¾—æ·»åŠ æ–°æ­¥éª¤ã€é‡æ–°æ’åˆ—ç°æœ‰æ­¥éª¤ã€ä¿®æ”¹æ­¥éª¤ä¸­çš„å…ƒç´ ä»¥åŠé€šè¿‡æµè§ˆå·¦ä¾§çš„åŠ¨è¯æ¥è·å¾—å®è§‚è§†è§’éƒ½å˜å¾—æ›´åŠ å®¹æ˜“ã€‚\n\n# æå€¡ï¼š\nflights |&gt;\n    filter(!is.na(arr_delay), !is.na(tailnum)) |&gt;\n    count(dest)\n\n# é¿å…ï¼š\nflights |&gt;\n    filter(!is.na(arr_delay), !is.na(tailnum)) |&gt;\n    count(dest)\n\nå¦‚æœä½ æ­£åœ¨ç®¡é“è¾“é€åˆ°çš„å‡½æ•°æœ‰å‘½åå‚æ•° (å¦‚ mutate() æˆ– summarize())ï¼Œè¯·å°†æ¯ä¸ªå‚æ•°æ”¾åœ¨æ–°çš„ä¸€è¡Œã€‚ å¦‚æœå‡½æ•°æ²¡æœ‰å‘½åå‚æ•° (å¦‚ select() æˆ– filter())ï¼Œè¯·å°†æ‰€æœ‰å†…å®¹ä¿æŒåœ¨ä¸€è¡Œï¼Œé™¤éä¸€è¡Œæ”¾ä¸ä¸‹ï¼Œæ­¤æ—¶ä½ åº”è¯¥å°†æ¯ä¸ªå‚æ•°æ”¾åœ¨å®ƒè‡ªå·±çš„ä¸€è¡Œã€‚\n\n# æå€¡ï¼š\nflights |&gt;\n    group_by(tailnum) |&gt;\n    summarize(\n        delay = mean(arr_delay, na.rm = TRUE),\n        n = n()\n    )\n\n# é¿å…ï¼š\nflights |&gt;\n    group_by(\n        tailnum\n    ) |&gt;\n    summarize(delay = mean(arr_delay, na.rm = TRUE), n = n())\n\nåœ¨ç®¡é“çš„ç¬¬ä¸€æ­¥ä¹‹åï¼Œæ¯ä¸€è¡Œéƒ½ç¼©è¿›ä¸¤ä¸ªç©ºæ ¼ã€‚ åœ¨ |&gt; åçš„æ¢è¡Œç¬¦å¤„ï¼ŒRStudio ä¼šè‡ªåŠ¨ä¸ºä½ æ·»åŠ ç©ºæ ¼ã€‚ å¦‚æœä½ å°†æ¯ä¸ªå‚æ•°æ”¾åœ¨å•ç‹¬çš„ä¸€è¡Œï¼Œåˆ™å†é¢å¤–ç¼©è¿›ä¸¤ä¸ªç©ºæ ¼ã€‚ ç¡®ä¿ ) åœ¨å®ƒè‡ªå·±çš„ä¸€è¡Œï¼Œå¹¶ä¸”ä¸ç¼©è¿›ï¼Œä¸å‡½æ•°åçš„æ°´å¹³ä½ç½®å¯¹é½ã€‚\n\n# æå€¡ï¼š\nflights |&gt;\n    group_by(tailnum) |&gt;\n    summarize(\n        delay = mean(arr_delay, na.rm = TRUE),\n        n = n()\n    )\n\n# é¿å…ï¼š\nflights |&gt;\n    group_by(tailnum) |&gt;\n    summarize(\n        delay = mean(arr_delay, na.rm = TRUE),\n        n = n()\n    )\n\n# é¿å…ï¼š\nflights |&gt;\n    group_by(tailnum) |&gt;\n    summarize(\n        delay = mean(arr_delay, na.rm = TRUE),\n        n = n()\n    )\n\nå¦‚æœä½ çš„ç®¡é“èƒ½å¾ˆè½»æ¾åœ°æ”¾åœ¨ä¸€è¡Œé‡Œï¼Œé‚£ä¹ˆå¯ä»¥ä¸éµå¾ªè¿™äº›è§„åˆ™ä¸­çš„æŸå‡ æ¡ã€‚ ä½†æ ¹æ®æˆ‘ä»¬çš„é›†ä½“ç»éªŒï¼ŒçŸ­å°çš„ä»£ç ç‰‡æ®µå¸¸å¸¸ä¼šå˜é•¿ï¼Œæ‰€ä»¥ä»ä¸€å¼€å§‹å°±ç•™å‡ºè¶³å¤Ÿçš„å‚ç›´ç©ºé—´ï¼Œä»é•¿è¿œæ¥çœ‹é€šå¸¸ä¼šèŠ‚çœæ—¶é—´ã€‚\n\n# è¿™èƒ½ç´§å‡‘åœ°æ”¾åœ¨ä¸€è¡Œ\ndf |&gt; mutate(y = x + 1)\n\n# è€Œè¿™æ ·è™½ç„¶å ç”¨äº† 4 å€çš„è¡Œæ•°ï¼Œä½†æœªæ¥å¾ˆå®¹æ˜“æ‰©å±•åˆ°æ›´å¤šå˜é‡å’Œæ›´å¤šæ­¥éª¤\ndf |&gt;\n    mutate(\n        y = x + 1\n    )\n\næœ€åï¼Œè¦è­¦æƒ•ç¼–å†™éå¸¸é•¿çš„ç®¡é“ï¼Œæ¯”å¦‚è¶…è¿‡ 10-15 è¡Œã€‚ å°è¯•å°†å®ƒä»¬åˆ†è§£æˆæ›´å°çš„å­ä»»åŠ¡ï¼Œå¹¶ç»™æ¯ä¸ªä»»åŠ¡ä¸€ä¸ªä¿¡æ¯ä¸°å¯Œçš„åç§°ã€‚ è¿™äº›åç§°å°†æœ‰åŠ©äºæç¤ºè¯»è€…æ­£åœ¨å‘ç”Ÿä»€ä¹ˆï¼Œå¹¶ä½¿å¾—æ£€æŸ¥ä¸­é—´ç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸå˜å¾—æ›´å®¹æ˜“ã€‚ åªè¦ä½ èƒ½ç»™æŸæ ·ä¸œè¥¿èµ·ä¸€ä¸ªä¿¡æ¯ä¸°å¯Œçš„åå­—ï¼Œä½ å°±åº”è¯¥è¿™æ ·åšï¼Œä¾‹å¦‚ï¼Œå½“ä½ ä»æ ¹æœ¬ä¸Šæ”¹å˜äº†æ•°æ®çš„ç»“æ„æ—¶ (æ¯”å¦‚åœ¨é€è§†æˆ–æ±‡æ€»ä¹‹å)ã€‚ ä¸è¦æŒ‡æœ›ä¸€æ¬¡å°±èƒ½åšå¯¹ï¼ è¿™æ„å‘³ç€å¦‚æœå­˜åœ¨å¯ä»¥è·å¾—å¥½åç§°çš„ä¸­é—´çŠ¶æ€ï¼Œå°±åº”è¯¥æŠŠé•¿ç®¡é“æ‹†åˆ†å¼€ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>4</span>Â  <span class='chapter-title'>å·¥ä½œæµï¼šä»£ç é£æ ¼</span>"
    ]
  },
  {
    "objectID": "workflow-style.html#ggplot2",
    "href": "workflow-style.html#ggplot2",
    "title": "4Â  å·¥ä½œæµï¼šä»£ç é£æ ¼",
    "section": "\n4.4 ggplot2",
    "text": "4.4 ggplot2\né€‚ç”¨äºç®¡é“çš„åŸºæœ¬è§„åˆ™åŒæ ·é€‚ç”¨äº ggplot2ï¼›åªéœ€å°† + å½“ä½œ |&gt; ä¸€æ ·å¤„ç†å³å¯ã€‚\n\nflights |&gt;\n    group_by(month) |&gt;\n    summarize(\n        delay = mean(arr_delay, na.rm = TRUE)\n    ) |&gt;\n    ggplot(aes(x = month, y = delay)) +\n    geom_point() +\n    geom_line()\n\nåŒæ ·ï¼Œå¦‚æœä½ æ— æ³•å°†å‡½æ•°çš„æ‰€æœ‰å‚æ•°æ”¾åœ¨ä¸€è¡Œï¼Œå°±å°†æ¯ä¸ªå‚æ•°æ”¾åœ¨å•ç‹¬çš„ä¸€è¡Œï¼š\n\nflights |&gt;\n    group_by(dest) |&gt;\n    summarize(\n        distance = mean(distance),\n        speed = mean(distance / air_time, na.rm = TRUE)\n    ) |&gt;\n    ggplot(aes(x = distance, y = speed)) +\n    geom_smooth(\n        method = \"loess\",\n        span = 0.5,\n        se = FALSE,\n        color = \"white\",\n        linewidth = 4\n    ) +\n    geom_point()\n\næ³¨æ„ä» |&gt; åˆ° + çš„è½¬æ¢ã€‚ æˆ‘ä»¬å¸Œæœ›è¿™ç§è½¬æ¢æ²¡æœ‰å¿…è¦ï¼Œä½†ä¸å¹¸çš„æ˜¯ï¼Œggplot2 æ˜¯åœ¨ç®¡é“è¢«å‘ç°ä¹‹å‰ç¼–å†™çš„ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>4</span>Â  <span class='chapter-title'>å·¥ä½œæµï¼šä»£ç é£æ ¼</span>"
    ]
  },
  {
    "objectID": "workflow-style.html#åˆ†èŠ‚æ³¨é‡Š",
    "href": "workflow-style.html#åˆ†èŠ‚æ³¨é‡Š",
    "title": "4Â  å·¥ä½œæµï¼šä»£ç é£æ ¼",
    "section": "\n4.5 åˆ†èŠ‚æ³¨é‡Š",
    "text": "4.5 åˆ†èŠ‚æ³¨é‡Š\nå½“ä½ çš„è„šæœ¬å˜å¾—è¶Šæ¥è¶Šé•¿æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨åˆ†èŠ‚ (sectioning) æ³¨é‡Šå°†ä½ çš„æ–‡ä»¶åˆ†æˆæ˜“äºç®¡ç†çš„å°å—ï¼š\n\n# åŠ è½½æ•°æ® --------------------------------------\n\n# ç»˜åˆ¶æ•°æ® --------------------------------------\n\nRStudio æä¾›äº†ä¸€ä¸ªåˆ›å»ºè¿™äº›æ ‡é¢˜çš„é”®ç›˜å¿«æ·é”® (Cmd/Ctrl + Shift + R)ï¼Œå¹¶ä¼šåœ¨ç¼–è¾‘å™¨å·¦ä¸‹è§’çš„ä»£ç å¯¼èˆªä¸‹æ‹‰èœå•ä¸­æ˜¾ç¤ºå®ƒä»¬ï¼Œå¦‚ FigureÂ 4.2 æ‰€ç¤ºã€‚\n\n\n\n\n\n\n\nFigureÂ 4.2: å‘è„šæœ¬æ·»åŠ åˆ†èŠ‚æ³¨é‡Šåï¼Œä½ å¯ä»¥ä½¿ç”¨è„šæœ¬ç¼–è¾‘å™¨å·¦ä¸‹è§’çš„ä»£ç å¯¼èˆªå·¥å…·è½»æ¾åœ°è·³è½¬åˆ°å®ƒä»¬ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>4</span>Â  <span class='chapter-title'>å·¥ä½œæµï¼šä»£ç é£æ ¼</span>"
    ]
  },
  {
    "objectID": "workflow-style.html#ç»ƒä¹ ",
    "href": "workflow-style.html#ç»ƒä¹ ",
    "title": "4Â  å·¥ä½œæµï¼šä»£ç é£æ ¼",
    "section": "\n4.6 ç»ƒä¹ ",
    "text": "4.6 ç»ƒä¹ \n\n\næŒ‰ç…§ä¸Šé¢çš„æŒ‡å¯¼åŸåˆ™ï¼Œé‡æ–°è°ƒæ•´ä»¥ä¸‹ç®¡é“çš„é£æ ¼ã€‚\n\nflights |&gt;\nfilter(dest == \"IAH\") |&gt;\ngroup_by(year, month, day) |&gt;\nsummarize(\n    n = n(),\n    delay = mean(arr_delay, na.rm = TRUE)\n) |&gt;\nfilter(n &gt; 10)\n\nflights |&gt;\nfilter(carrier == \"UA\", dest %in% c(\"IAH\", \"HOU\"), sched_dep_time &gt;\n    0900, sched_arr_time &lt; 2000) |&gt;\ngroup_by(flight) |&gt;\nsummarize(delay = mean(\n    arr_delay,\n    na.rm = TRUE\n), cancelled = sum(is.na(arr_delay)), n = n()) |&gt;\nfilter(n &gt; 10)",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>4</span>Â  <span class='chapter-title'>å·¥ä½œæµï¼šä»£ç é£æ ¼</span>"
    ]
  },
  {
    "objectID": "workflow-style.html#å°ç»“",
    "href": "workflow-style.html#å°ç»“",
    "title": "4Â  å·¥ä½œæµï¼šä»£ç é£æ ¼",
    "section": "\n4.7 å°ç»“",
    "text": "4.7 å°ç»“\nåœ¨æœ¬ç« ä¸­ï¼Œä½ å­¦ä¹ äº†ä»£ç é£æ ¼æœ€é‡è¦çš„åŸåˆ™ã€‚ èµ·åˆï¼Œè¿™äº›å¯èƒ½æ„Ÿè§‰åƒæ˜¯ä¸€å¥—æ­¦æ–­çš„è§„åˆ™ (å› ä¸ºå®ƒä»¬ç¡®å®æ˜¯ï¼)ï¼Œä½†éšç€æ—¶é—´çš„æ¨ç§»ï¼Œå½“ä½ ç¼–å†™æ›´å¤šä»£ç å¹¶ä¸æ›´å¤šäººå…±äº«ä»£ç æ—¶ï¼Œä½ å°±ä¼šæ˜ç™½ä¸€è‡´çš„é£æ ¼æœ‰å¤šä¹ˆé‡è¦ã€‚ åˆ«å¿˜äº† styler åŒ…ï¼šå®ƒæ˜¯ä¸€ç§å¿«é€Ÿæ”¹å–„é£æ ¼ä¸ä½³ä»£ç è´¨é‡çš„å¥½æ–¹æ³•ã€‚\nåœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†åˆ‡æ¢å›æ•°æ®ç§‘å­¦å·¥å…·ï¼Œå­¦ä¹ æœ‰å…³æ•´æ´æ•°æ® (tidy data) çš„çŸ¥è¯†ã€‚ æ•´æ´æ•°æ®æ˜¯ä¸€ç§ç»„ç»‡æ•°æ®æ¡†çš„ä¸€è‡´æ–¹å¼ï¼Œæ•´ä¸ª tidyverse éƒ½åœ¨ä½¿ç”¨å®ƒã€‚ è¿™ç§ä¸€è‡´æ€§ä½¿ä½ çš„ç”Ÿæ´»æ›´è½»æ¾ï¼Œå› ä¸ºä¸€æ—¦ä½ æ‹¥æœ‰äº†æ•´æ´æ•°æ®ï¼Œå®ƒå°±å¯ä»¥ä¸ç»å¤§å¤šæ•° tidyverse å‡½æ•°ä¸€èµ·å·¥ä½œã€‚ å½“ç„¶ï¼Œç”Ÿæ´»ä»æ¥éƒ½ä¸æ˜¯ä¸€å¸†é£é¡ºçš„ï¼Œä½ åœ¨ç°å®ä¸–ç•Œä¸­é‡åˆ°çš„å¤§å¤šæ•°æ•°æ®é›†éƒ½ä¸ä¼šæ˜¯ç°æˆæ•´æ´çš„ã€‚ æ‰€ä»¥æˆ‘ä»¬è¿˜å°†æ•™ä½ å¦‚ä½•ä½¿ç”¨ tidyr åŒ…æ¥æ•´ç†ä½ çš„ä¸æ•´æ´æ•°æ®ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>4</span>Â  <span class='chapter-title'>å·¥ä½œæµï¼šä»£ç é£æ ¼</span>"
    ]
  },
  {
    "objectID": "workflow-style.html#footnotes",
    "href": "workflow-style.html#footnotes",
    "title": "4Â  å·¥ä½œæµï¼šä»£ç é£æ ¼",
    "section": "",
    "text": "ç”±äº dep_time çš„æ ¼å¼æ˜¯ HMM æˆ– HHMMï¼Œæˆ‘ä»¬ä½¿ç”¨æ•´æ•°é™¤æ³• (%/%) æ¥è·å–å°æ—¶ï¼Œä½¿ç”¨æ±‚ä½™ (ä¹Ÿç§°ä¸ºæ¨¡è¿ç®—ï¼Œ%%) æ¥è·å–åˆ†é’Ÿã€‚â†©ï¸",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>4</span>Â  <span class='chapter-title'>å·¥ä½œæµï¼šä»£ç é£æ ¼</span>"
    ]
  },
  {
    "objectID": "data-tidy.html",
    "href": "data-tidy.html",
    "title": "5Â  æ•°æ®æ•´ç†",
    "section": "",
    "text": "5.1 å¼•è¨€\nåœ¨æœ¬ç« ä¸­ï¼Œä½ å°†å­¦ä¹ ä¸€ç§ä½¿ç”¨åä¸ºæ•´æ´æ•°æ® (tidy data) çš„ç³»ç»Ÿæ¥åœ¨ R ä¸­ä¸€è‡´åœ°ç»„ç»‡æ•°æ®çš„æ–¹æ³•ã€‚å°†æ•°æ®è½¬æ¢æˆè¿™ç§æ ¼å¼éœ€è¦ä¸€äº›å‰æœŸå·¥ä½œï¼Œä½†ä»é•¿è¿œæ¥çœ‹ï¼Œè¿™äº›å·¥ä½œæ˜¯å€¼å¾—çš„ã€‚ä¸€æ—¦ä½ æœ‰äº†æ•´æ´çš„æ•°æ®å’Œ tidyverse ä¸­å„ä¸ªåŒ…æä¾›çš„æ•´æ´å·¥å…·ï¼Œä½ å°†èŠ±æ›´å°‘çš„æ—¶é—´åœ¨ä¸åŒè¡¨ç¤ºå½¢å¼ä¹‹é—´è½¬æ¢æ•°æ®ï¼Œä»è€Œèƒ½å°†æ›´å¤šæ—¶é—´ç”¨äºä½ æ‰€å…³å¿ƒçš„æ•°æ®é—®é¢˜ä¸Šã€‚\nåœ¨æœ¬ç« ä¸­ï¼Œä½ å°†é¦–å…ˆå­¦ä¹ æ•´æ´æ•°æ®çš„å®šä¹‰ï¼Œå¹¶çœ‹åˆ°å®ƒå¦‚ä½•åº”ç”¨äºä¸€ä¸ªç®€å•çš„ç¤ºä¾‹æ•°æ®é›†ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ä½ å°†ç”¨äºæ•´ç†æ•°æ®çš„ä¸»è¦å·¥å…·ï¼šè½¬æ¢ (pivoting)ã€‚è½¬æ¢å¯ä»¥è®©ä½ åœ¨ä¸æ”¹å˜ä»»ä½•å€¼çš„æƒ…å†µä¸‹æ”¹å˜æ•°æ®çš„å½¢æ€ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>5</span>Â  <span class='chapter-title'>æ•°æ®æ•´ç†</span>"
    ]
  },
  {
    "objectID": "data-tidy.html#å¼•è¨€",
    "href": "data-tidy.html#å¼•è¨€",
    "title": "5Â  æ•°æ®æ•´ç†",
    "section": "",
    "text": "â€œHappy families are all alike; every unhappy family is unhappy in its own way.â€\nâ€” Leo Tolstoy\nâ€œå¹¸ç¦çš„å®¶åº­éƒ½æ˜¯ç›¸ä¼¼çš„ï¼›ä¸å¹¸çš„å®¶åº­å„æœ‰å„çš„ä¸å¹¸ã€‚â€ Â  â€” åˆ—å¤«Â·æ‰˜å°”æ–¯æ³°\n\n\nâ€œTidy datasets are all alike, but every messy dataset is messy in its own way.â€\nâ€” Hadley Wickham\nâ€œæ•´æ´çš„æ•°æ®é›†éƒ½æ˜¯ç›¸ä¼¼çš„ï¼Œä½†æ¯ä¸ªå‡Œä¹±çš„æ•°æ®é›†å„æœ‰å„çš„å‡Œä¹±ã€‚â€\nâ€” å“ˆå¾·åˆ©Â·å¨å…‹å§†\n\n\n\n\n5.1.1 å…ˆå†³æ¡ä»¶\nåœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†é‡ç‚¹å…³æ³¨ tidyrï¼Œè¿™æ˜¯ä¸€ä¸ªæä¾›äº†å¤§é‡å·¥å…·æ¥å¸®åŠ©ä½ æ•´ç†å‡Œä¹±æ•°æ®é›†çš„åŒ…ã€‚tidyr æ˜¯æ ¸å¿ƒ tidyverse çš„æˆå‘˜ä¹‹ä¸€ã€‚\n\nlibrary(tidyverse)\n\nä»æœ¬ç« å¼€å§‹ï¼Œæˆ‘ä»¬å°†æŠ‘åˆ¶ library(tidyverse) åŠ è½½æ—¶æ˜¾ç¤ºçš„æ¶ˆæ¯ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>5</span>Â  <span class='chapter-title'>æ•°æ®æ•´ç†</span>"
    ]
  },
  {
    "objectID": "data-tidy.html#sec-tidy-data",
    "href": "data-tidy.html#sec-tidy-data",
    "title": "5Â  æ•°æ®æ•´ç†",
    "section": "\n5.2 æ•´æ´æ•°æ®",
    "text": "5.2 æ•´æ´æ•°æ®\nä½ å¯ä»¥ç”¨å¤šç§æ–¹å¼æ¥è¡¨ç¤ºç›¸åŒçš„åŸºç¡€æ•°æ®ã€‚ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†ç”¨ä¸‰ç§ä¸åŒæ–¹å¼ç»„ç»‡çš„ç›¸åŒæ•°æ®ã€‚æ¯ä¸ªæ•°æ®é›†éƒ½æ˜¾ç¤ºäº†å››ä¸ªå˜é‡çš„ç›¸åŒå€¼ï¼šcountry (å›½å®¶)ã€year (å¹´ä»½)ã€population (äººå£) å’Œè®°å½•åœ¨æ¡ˆçš„ cases (ç»“æ ¸ç—…æ¡ˆä¾‹) æ•°é‡ï¼Œä½†æ¯ä¸ªæ•°æ®é›†ä»¥ä¸åŒçš„æ–¹å¼ç»„ç»‡è¿™äº›å€¼ã€‚\n\ntable1\n#&gt; # A tibble: 6 Ã— 4\n#&gt;   country      year  cases population\n#&gt;   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;\n#&gt; 1 Afghanistan  1999    745   19987071\n#&gt; 2 Afghanistan  2000   2666   20595360\n#&gt; 3 Brazil       1999  37737  172006362\n#&gt; 4 Brazil       2000  80488  174504898\n#&gt; 5 China        1999 212258 1272915272\n#&gt; 6 China        2000 213766 1280428583\n\ntable2\n#&gt; # A tibble: 12 Ã— 4\n#&gt;   country      year type           count\n#&gt;   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;\n#&gt; 1 Afghanistan  1999 cases            745\n#&gt; 2 Afghanistan  1999 population  19987071\n#&gt; 3 Afghanistan  2000 cases           2666\n#&gt; 4 Afghanistan  2000 population  20595360\n#&gt; 5 Brazil       1999 cases          37737\n#&gt; 6 Brazil       1999 population 172006362\n#&gt; # â„¹ 6 more rows\n\ntable3\n#&gt; # A tibble: 6 Ã— 3\n#&gt;   country      year rate             \n#&gt;   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;            \n#&gt; 1 Afghanistan  1999 745/19987071     \n#&gt; 2 Afghanistan  2000 2666/20595360    \n#&gt; 3 Brazil       1999 37737/172006362  \n#&gt; 4 Brazil       2000 80488/174504898  \n#&gt; 5 China        1999 212258/1272915272\n#&gt; 6 China        2000 213766/1280428583\n\nè¿™äº›éƒ½æ˜¯ç›¸åŒåŸºç¡€æ•°æ®çš„è¡¨ç¤ºå½¢å¼ï¼Œä½†å®ƒä»¬çš„ä½¿ç”¨ä¾¿åˆ©æ€§å¹¶ä¸ç›¸åŒã€‚å…¶ä¸­ä¹‹ä¸€ï¼Œtable1ï¼Œåœ¨ tidyverse ä¸­ä½¿ç”¨èµ·æ¥ä¼šå®¹æ˜“å¾—å¤šï¼Œå› ä¸ºå®ƒæ˜¯æ•´æ´çš„ (tidy)ã€‚\næœ‰ä¸‰æ¡ç›¸äº’å…³è”çš„è§„åˆ™å¯ä»¥ä½¿ä¸€ä¸ªæ•°æ®é›†å˜å¾—æ•´æ´ï¼š\n\næ¯ä¸ªå˜é‡æ˜¯ä¸€åˆ—ï¼›æ¯åˆ—æ˜¯ä¸€ä¸ªå˜é‡ã€‚\næ¯ä¸ªè§‚æµ‹æ˜¯ä¸€è¡Œï¼›æ¯è¡Œæ˜¯ä¸€ä¸ªè§‚æµ‹ã€‚\næ¯ä¸ªå€¼æ˜¯ä¸€ä¸ªå•å…ƒæ ¼ï¼›æ¯ä¸ªå•å…ƒæ ¼æ˜¯ä¸€ä¸ªå€¼ã€‚\n\nFigureÂ 5.1 ç›´è§‚åœ°å±•ç¤ºäº†è¿™äº›è§„åˆ™ã€‚\n\n\n\n\n\n\n\nFigureÂ 5.1: ä»¥ä¸‹ä¸‰æ¡è§„åˆ™æ„æˆä¸€ä¸ªæ•´æ´çš„æ•°æ®é›†ï¼šå˜é‡æ˜¯åˆ—ï¼Œè§‚æµ‹æ˜¯è¡Œï¼Œå€¼æ˜¯å•å…ƒæ ¼ã€‚\n\n\n\n\nä¸ºä»€ä¹ˆéœ€è¦ç¡®ä¿ä½ çš„æ•°æ®æ˜¯æ•´æ´çš„å‘¢ï¼Ÿä¸»è¦æœ‰ä¸¤ä¸ªä¼˜ç‚¹ï¼š\n\né€‰æ‹©ä¸€ç§ä¸€è‡´çš„æ–¹å¼æ¥å­˜å‚¨æ•°æ®å…·æœ‰æ™®éçš„ä¼˜åŠ¿ã€‚å¦‚æœä½ æœ‰äº†ä¸€è‡´çš„æ•°æ®ç»“æ„ï¼Œå­¦ä¹ ä½¿ç”¨ä¸ä¹‹é…å¥—çš„å·¥å…·å°±ä¼šæ›´å®¹æ˜“ï¼Œå› ä¸ºå®ƒä»¬å…·æœ‰å†…åœ¨çš„ä¸€è‡´æ€§ã€‚\nå°†å˜é‡æ”¾åœ¨åˆ—ä¸­æœ‰å…¶ç‰¹æ®Šçš„ä¼˜åŠ¿ï¼Œå› ä¸ºè¿™èƒ½è®© R çš„å‘é‡åŒ–ç‰¹æ€§å¤§æ”¾å¼‚å½©ã€‚æ­£å¦‚ä½ åœ¨ Section 3.3.1 å’Œ Section 3.5.2 ä¸­å­¦åˆ°çš„ï¼Œå¤§å¤šæ•°å†…ç½®çš„ R å‡½æ•°éƒ½å¤„ç†å€¼çš„å‘é‡ã€‚è¿™ä½¿å¾—è½¬æ¢æ•´æ´æ•°æ®æ„Ÿè§‰ç‰¹åˆ«è‡ªç„¶ã€‚\n\ndplyrã€ggplot2 ä»¥åŠ tidyverse ä¸­çš„æ‰€æœ‰å…¶ä»–åŒ…éƒ½æ˜¯ä¸ºå¤„ç†æ•´æ´æ•°æ®è€Œè®¾è®¡çš„ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å°ä¾‹å­ï¼Œå±•ç¤ºäº†ä½ å¯èƒ½ä¼šå¦‚ä½•ä½¿ç”¨ table1ã€‚\n\n# è®¡ç®—æ¯ä¸‡äººçš„æ¯”ç‡\ntable1 |&gt;\n  mutate(rate = cases / population * 10000)\n#&gt; # A tibble: 6 Ã— 5\n#&gt;   country      year  cases population  rate\n#&gt;   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1 Afghanistan  1999    745   19987071 0.373\n#&gt; 2 Afghanistan  2000   2666   20595360 1.29 \n#&gt; 3 Brazil       1999  37737  172006362 2.19 \n#&gt; 4 Brazil       2000  80488  174504898 4.61 \n#&gt; 5 China        1999 212258 1272915272 1.67 \n#&gt; 6 China        2000 213766 1280428583 1.67\n\n# è®¡ç®—æ¯å¹´çš„æ€»ç—…ä¾‹æ•°\ntable1 |&gt; \n  group_by(year) |&gt; \n  summarize(total_cases = sum(cases))\n#&gt; # A tibble: 2 Ã— 2\n#&gt;    year total_cases\n#&gt;   &lt;dbl&gt;       &lt;dbl&gt;\n#&gt; 1  1999      250740\n#&gt; 2  2000      296920\n\n# å¯è§†åŒ–éšæ—¶é—´çš„å˜åŒ–\nggplot(table1, aes(x = year, y = cases)) +\n  geom_line(aes(group = country), color = \"grey50\") +\n  geom_point(aes(color = country, shape = country)) +\n  scale_x_continuous(breaks = c(1999, 2000)) # x è½´åˆ»åº¦åœ¨ 1999 å’Œ 2000\n\n\n\n\n\n\n\n\n5.2.1 ç»ƒä¹ \n\nå¯¹äºæ¯ä¸ªç¤ºä¾‹è¡¨æ ¼ï¼Œæè¿°æ¯ä¸ªè§‚æµ‹å’Œæ¯åˆ—ä»£è¡¨ä»€ä¹ˆã€‚\n\nç®€è¦æè¿°ä½ å°†å¦‚ä½•ä¸º table2 å’Œ table3 è®¡ç®— rate çš„è¿‡ç¨‹ã€‚ä½ éœ€è¦æ‰§è¡Œå››ä¸ªæ“ä½œï¼š\n\næå–æ¯ä¸ªå›½å®¶æ¯å¹´çš„ç»“æ ¸ç—…ç—…ä¾‹æ•°ã€‚\næå–æ¯ä¸ªå›½å®¶æ¯å¹´åŒ¹é…çš„äººå£æ•°ã€‚\nå°†ç—…ä¾‹æ•°é™¤ä»¥äººå£æ•°ï¼Œç„¶åä¹˜ä»¥ 10000ã€‚\nå°†ç»“æœå­˜å›é€‚å½“çš„ä½ç½®ã€‚\n\nä½ è¿˜æ²¡æœ‰å­¦åˆ°å®é™…æ‰§è¡Œè¿™äº›æ“ä½œæ‰€éœ€çš„æ‰€æœ‰å‡½æ•°ï¼Œä½†ä½ åº”è¯¥èƒ½å¤Ÿæ€è€ƒå‡ºä½ éœ€è¦çš„è½¬æ¢è¿‡ç¨‹ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>5</span>Â  <span class='chapter-title'>æ•°æ®æ•´ç†</span>"
    ]
  },
  {
    "objectID": "data-tidy.html#sec-pivoting",
    "href": "data-tidy.html#sec-pivoting",
    "title": "5Â  æ•°æ®æ•´ç†",
    "section": "\n5.3 æ‹‰é•¿æ•°æ®",
    "text": "5.3 æ‹‰é•¿æ•°æ®\næ•´æ´æ•°æ®çš„åŸåˆ™å¯èƒ½çœ‹èµ·æ¥å¦‚æ­¤æ˜¾è€Œæ˜“è§ï¼Œä»¥è‡³äºä½ å¯èƒ½ä¼šæ€€ç–‘è‡ªå·±æ˜¯å¦ä¼šé‡åˆ°ä¸æ•´æ´çš„æ•°æ®é›†ã€‚ç„¶è€Œï¼Œä¸å¹¸çš„æ˜¯ï¼Œå¤§å¤šæ•°çœŸå®æ•°æ®éƒ½æ˜¯ä¸æ•´æ´çš„ã€‚ä¸»è¦æœ‰ä¸¤ä¸ªåŸå› ï¼š\n\næ•°æ®çš„ç»„ç»‡æ–¹å¼é€šå¸¸æ˜¯ä¸ºäº†æ–¹ä¾¿æŸäº›åˆ†æä¹‹å¤–çš„ç›®æ ‡ã€‚ä¾‹å¦‚ï¼Œä¸ºäº†æ–¹ä¾¿æ•°æ®å½•å…¥è€Œéåˆ†æè€Œç»„ç»‡æ•°æ®æ˜¯å¾ˆå¸¸è§çš„ã€‚\nå¤§å¤šæ•°äººå¹¶ä¸ç†Ÿæ‚‰æ•´æ´æ•°æ®çš„åŸåˆ™ï¼Œé™¤éä½ èŠ±å¤§é‡æ—¶é—´å¤„ç†æ•°æ®ï¼Œå¦åˆ™å¾ˆéš¾è‡ªå·±æ¨å¯¼å‡ºè¿™äº›åŸåˆ™ã€‚\n\nè¿™æ„å‘³ç€å¤§å¤šæ•°çœŸå®çš„åˆ†æè‡³å°‘éœ€è¦ä¸€äº›æ•´ç†å·¥ä½œã€‚ä½ å°†ä»å¼„æ¸…æ¥šåŸºç¡€çš„å˜é‡å’Œè§‚æµ‹æ˜¯ä»€ä¹ˆå¼€å§‹ã€‚æœ‰æ—¶è¿™å¾ˆå®¹æ˜“ï¼›å…¶ä»–æ—¶å€™ä½ å¯èƒ½éœ€è¦å’¨è¯¢æœ€åˆç”Ÿæˆæ•°æ®çš„äººã€‚æ¥ä¸‹æ¥ï¼Œä½ å°†è½¬æ¢ (pivot) ä½ çš„æ•°æ®ï¼Œä½¿å…¶æˆä¸ºå˜é‡åœ¨åˆ—ã€è§‚æµ‹åœ¨è¡Œçš„æ•´æ´å½¢å¼ã€‚\ntidyr æä¾›äº†ä¸¤ä¸ªç”¨äºè½¬æ¢æ•°æ®çš„å‡½æ•°ï¼špivot_longer() å’Œ pivot_wider()ã€‚æˆ‘ä»¬å…ˆä» pivot_longer() å¼€å§‹ï¼Œå› ä¸ºè¿™æ˜¯æœ€å¸¸è§çš„æƒ…å†µã€‚è®©æˆ‘ä»¬æ¥çœ‹ä¸€äº›ä¾‹å­ã€‚\n\n5.3.1 åˆ—åä¸­åŒ…å«æ•°æ®\nbillboard æ•°æ®é›†è®°å½•äº† 2000 å¹´æ­Œæ›²çš„å¹¿å‘Šç‰Œæ’åï¼š\n\nbillboard\n#&gt; # A tibble: 317 Ã— 79\n#&gt;   artist       track               date.entered   wk1   wk2   wk3   wk4   wk5\n#&gt;   &lt;chr&gt;        &lt;chr&gt;               &lt;date&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1 2 Pac        Baby Don't Cry (Keâ€¦ 2000-02-26      87    82    72    77    87\n#&gt; 2 2Ge+her      The Hardest Part Oâ€¦ 2000-09-02      91    87    92    NA    NA\n#&gt; 3 3 Doors Down Kryptonite          2000-04-08      81    70    68    67    66\n#&gt; 4 3 Doors Down Loser               2000-10-21      76    76    72    69    67\n#&gt; 5 504 Boyz     Wobble Wobble       2000-04-15      57    34    25    17    17\n#&gt; 6 98^0         Give Me Just One Nâ€¦ 2000-08-19      51    39    34    26    26\n#&gt; # â„¹ 311 more rows\n#&gt; # â„¹ 71 more variables: wk6 &lt;dbl&gt;, wk7 &lt;dbl&gt;, wk8 &lt;dbl&gt;, wk9 &lt;dbl&gt;, â€¦\n\nåœ¨è¿™ä¸ªæ•°æ®é›†ä¸­ï¼Œæ¯ä¸ªè§‚æµ‹æ˜¯ä¸€é¦–æ­Œã€‚å‰ä¸‰åˆ— (artist, track å’Œ date.entered) æ˜¯æè¿°æ­Œæ›²çš„å˜é‡ã€‚ç„¶åæˆ‘ä»¬æœ‰ 76 åˆ— (wk1-wk76) æè¿°äº†æ­Œæ›²åœ¨æ¯å‘¨çš„æ’å1ã€‚åœ¨è¿™é‡Œï¼Œåˆ—åæ˜¯ä¸€ä¸ªå˜é‡ (å‘¨ï¼Œweek)ï¼Œè€Œå•å…ƒæ ¼çš„å€¼æ˜¯å¦ä¸€ä¸ªå˜é‡ (æ’åï¼Œrank)ã€‚\nä¸ºäº†æ•´ç†è¿™ä¸ªæ•°æ®ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ pivot_longer()ï¼š\n\nbillboard |&gt; \n  pivot_longer(\n    cols = starts_with(\"wk\"), \n    names_to = \"week\", \n    values_to = \"rank\"\n  )\n#&gt; # A tibble: 24,092 Ã— 5\n#&gt;    artist track                   date.entered week   rank\n#&gt;    &lt;chr&gt;  &lt;chr&gt;                   &lt;date&gt;       &lt;chr&gt; &lt;dbl&gt;\n#&gt;  1 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk1      87\n#&gt;  2 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk2      82\n#&gt;  3 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk3      72\n#&gt;  4 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk4      77\n#&gt;  5 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk5      87\n#&gt;  6 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk6      94\n#&gt;  7 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk7      99\n#&gt;  8 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk8      NA\n#&gt;  9 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk9      NA\n#&gt; 10 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk10     NA\n#&gt; # â„¹ 24,082 more rows\n\nåœ¨æ•°æ®ä¹‹åï¼Œæœ‰ä¸‰ä¸ªå…³é”®å‚æ•°ï¼š\n\n\ncols æŒ‡å®šå“ªäº›åˆ—éœ€è¦è¢«è½¬æ¢ï¼Œå³å“ªäº›åˆ—ä¸æ˜¯å˜é‡ã€‚è¿™ä¸ªå‚æ•°ä½¿ç”¨ä¸ select() ç›¸åŒçš„è¯­æ³•ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ !c(artist, track, date.entered) æˆ– starts_with(\"wk\")ã€‚\n\nnames_to ä¸ºå­˜å‚¨åœ¨åˆ—åä¸­çš„å˜é‡å‘½åï¼Œæˆ‘ä»¬å°†å…¶å‘½åä¸º weekã€‚\n\nvalues_to ä¸ºå­˜å‚¨åœ¨å•å…ƒæ ¼å€¼ä¸­çš„å˜é‡å‘½åï¼Œæˆ‘ä»¬å°†å…¶å‘½åä¸º rankã€‚\n\nè¯·æ³¨æ„ï¼Œåœ¨ä»£ç ä¸­ \"week\" å’Œ \"rank\" æ˜¯å¸¦å¼•å·çš„ï¼Œå› ä¸ºå®ƒä»¬æ˜¯æˆ‘ä»¬æ­£åœ¨åˆ›å»ºçš„æ–°å˜é‡ï¼Œåœ¨è¿è¡Œ pivot_longer() è°ƒç”¨æ—¶å®ƒä»¬è¿˜ä¸å­˜åœ¨äºæ•°æ®ä¸­ã€‚\nç°åœ¨è®©æˆ‘ä»¬æŠŠæ³¨æ„åŠ›è½¬å‘ç»“æœä¸­è¿™ä¸ªæ›´é•¿çš„æ•°æ®æ¡†ã€‚å¦‚æœä¸€é¦–æ­Œåœ¨å‰ 100 åçš„æ—¶é—´å°‘äº 76 å‘¨ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿä»¥ 2 Pac çš„ â€œBaby Donâ€™t Cryâ€ ä¸ºä¾‹ã€‚ä¸Šé¢çš„è¾“å‡ºè¡¨æ˜å®ƒåªåœ¨å‰ 100 åä¸­å¾…äº† 7 å‘¨ï¼Œæ‰€æœ‰å‰©ä½™çš„å‘¨éƒ½ç”¨ç¼ºå¤±å€¼å¡«å……ã€‚è¿™äº› NA å¹¶ä¸çœŸæ­£ä»£è¡¨æœªçŸ¥çš„è§‚æµ‹ï¼›å®ƒä»¬æ˜¯è¢«æ•°æ®é›†çš„ç»“æ„å¼ºåˆ¶å­˜åœ¨çš„2ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½® values_drop_na = TRUE æ¥è®© pivot_longer() ç§»é™¤å®ƒä»¬ï¼š\n\nbillboard |&gt; \n  pivot_longer(\n    cols = starts_with(\"wk\"), \n    names_to = \"week\", \n    values_to = \"rank\",\n    values_drop_na = TRUE\n  )\n#&gt; # A tibble: 5,307 Ã— 5\n#&gt;   artist track                   date.entered week   rank\n#&gt;   &lt;chr&gt;  &lt;chr&gt;                   &lt;date&gt;       &lt;chr&gt; &lt;dbl&gt;\n#&gt; 1 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk1      87\n#&gt; 2 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk2      82\n#&gt; 3 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk3      72\n#&gt; 4 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk4      77\n#&gt; 5 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk5      87\n#&gt; 6 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk6      94\n#&gt; # â„¹ 5,301 more rows\n\nç°åœ¨è¡Œæ•°å°‘äº†å¾ˆå¤šï¼Œè¿™è¡¨æ˜è®¸å¤šå¸¦æœ‰ NA çš„è¡Œè¢«åˆ é™¤äº†ã€‚\nä½ å¯èƒ½è¿˜ä¼šæƒ³ï¼Œå¦‚æœä¸€é¦–æ­Œåœ¨å‰ 100 åçš„æ—¶é—´è¶…è¿‡ 76 å‘¨ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿæˆ‘ä»¬æ— æ³•ä»è¿™äº›æ•°æ®ä¸­å¾—çŸ¥ï¼Œä½†ä½ å¯èƒ½ä¼šçŒœåˆ°ï¼Œæ•°æ®é›†ä¸­ä¼šæ·»åŠ é¢å¤–çš„åˆ— wk77ã€wk78â€¦â€¦\nè¿™ä¸ªæ•°æ®ç°åœ¨æ˜¯æ•´æ´çš„äº†ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ mutate() å’Œ readr::parse_number() å°† week çš„å€¼ä»å­—ç¬¦å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—ï¼Œæ¥ä½¿æœªæ¥çš„è®¡ç®—æ›´å®¹æ˜“ä¸€äº›ã€‚parse_number() æ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„å‡½æ•°ï¼Œå®ƒä¼šä»å­—ç¬¦ä¸²ä¸­æå–ç¬¬ä¸€ä¸ªæ•°å­—ï¼Œå¿½ç•¥æ‰€æœ‰å…¶ä»–æ–‡æœ¬ã€‚\n\nbillboard_longer &lt;- billboard |&gt; \n  pivot_longer(\n    cols = starts_with(\"wk\"), \n    names_to = \"week\", \n    values_to = \"rank\",\n    values_drop_na = TRUE\n  ) |&gt; \n  mutate(\n    week = parse_number(week)\n  )\nbillboard_longer\n#&gt; # A tibble: 5,307 Ã— 5\n#&gt;   artist track                   date.entered  week  rank\n#&gt;   &lt;chr&gt;  &lt;chr&gt;                   &lt;date&gt;       &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1 2 Pac  Baby Don't Cry (Keep... 2000-02-26       1    87\n#&gt; 2 2 Pac  Baby Don't Cry (Keep... 2000-02-26       2    82\n#&gt; 3 2 Pac  Baby Don't Cry (Keep... 2000-02-26       3    72\n#&gt; 4 2 Pac  Baby Don't Cry (Keep... 2000-02-26       4    77\n#&gt; 5 2 Pac  Baby Don't Cry (Keep... 2000-02-26       5    87\n#&gt; 6 2 Pac  Baby Don't Cry (Keep... 2000-02-26       6    94\n#&gt; # â„¹ 5,301 more rows\n\nç°åœ¨æˆ‘ä»¬æŠŠæ‰€æœ‰çš„å‘¨æ•°éƒ½æ”¾åœ¨ä¸€ä¸ªå˜é‡é‡Œï¼Œæ‰€æœ‰çš„æ’åå€¼éƒ½æ”¾åœ¨å¦ä¸€ä¸ªå˜é‡é‡Œï¼Œæˆ‘ä»¬å°±å¾ˆæ–¹ä¾¿åœ°å¯ä»¥å¯è§†åŒ–æ­Œæ›²æ’åéšæ—¶é—´çš„å˜åŒ–äº†ã€‚ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼Œç»“æœåœ¨ FigureÂ 5.2 ä¸­ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¾ˆå°‘æœ‰æ­Œæ›²åœ¨å‰ 100 åä¸­åœç•™è¶…è¿‡ 20 å‘¨ã€‚\n\nbillboard_longer |&gt; \n  ggplot(aes(x = week, y = rank, group = track)) + \n  geom_line(alpha = 0.25) + \n  scale_y_reverse()\n\n\n\n\n\n\nFigureÂ 5.2: ä¸€ä¸ªæŠ˜çº¿å›¾ï¼Œæ˜¾ç¤ºäº†æ­Œæ›²æ’åéšæ—¶é—´çš„å˜åŒ–ã€‚\n\n\n\n\n\n5.3.2 è½¬æ¢æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ\nç°åœ¨ä½ å·²ç»çœ‹åˆ°äº†æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨è½¬æ¢æ¥é‡å¡‘æ•°æ®ï¼Œè®©æˆ‘ä»¬èŠ±ä¸€ç‚¹æ—¶é—´æ¥ç›´è§‚åœ°ç†è§£è½¬æ¢å¯¹æ•°æ®åšäº†ä»€ä¹ˆã€‚è®©æˆ‘ä»¬ä»ä¸€ä¸ªéå¸¸ç®€å•çš„æ•°æ®é›†å¼€å§‹ï¼Œä»¥ä¾¿æ›´å®¹æ˜“åœ°çœ‹åˆ°å‘ç”Ÿäº†ä»€ä¹ˆã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸‰ä¸ªç—…äººï¼Œid åˆ†åˆ«æ˜¯ Aã€B å’Œ Cï¼Œæˆ‘ä»¬å¯¹æ¯ä¸ªç—…äººè¿›è¡Œäº†ä¸¤æ¬¡è¡€å‹æµ‹é‡ã€‚æˆ‘ä»¬å°†ç”¨ tribble() åˆ›å»ºæ•°æ®ï¼Œè¿™æ˜¯ä¸€ä¸ªæ–¹ä¾¿æ‰‹åŠ¨æ„å»ºå°å‹ tibble çš„å‡½æ•°ï¼š\n\ndf &lt;- tribble(\n  ~id,  ~bp1, ~bp2,\n   \"A\",   100,  120,\n   \"B\",   140,  115,\n   \"C\",   120,  125\n)\n\næˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„æ–°æ•°æ®é›†æœ‰ä¸‰ä¸ªå˜é‡ï¼šid (å·²å­˜åœ¨)ã€measurement (æµ‹é‡ï¼Œå³åˆ—å) å’Œ value (å€¼ï¼Œå³å•å…ƒæ ¼å€¼)ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦å°† df æ‹‰é•¿ï¼š\n\ndf |&gt; \n  pivot_longer(\n    cols = bp1:bp2,\n    names_to = \"measurement\",\n    values_to = \"value\"\n  )\n#&gt; # A tibble: 6 Ã— 3\n#&gt;   id    measurement value\n#&gt;   &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt;\n#&gt; 1 A     bp1           100\n#&gt; 2 A     bp2           120\n#&gt; 3 B     bp1           140\n#&gt; 4 B     bp2           115\n#&gt; 5 C     bp1           120\n#&gt; 6 C     bp2           125\n\né‡å¡‘æ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢ï¼Ÿå¦‚æœæˆ‘ä»¬é€åˆ—æ€è€ƒï¼Œå°±æ›´å®¹æ˜“ç†è§£äº†ã€‚å¦‚ FigureÂ 5.3 æ‰€ç¤ºï¼ŒåŸå§‹æ•°æ®é›†ä¸­å·²ç»æ˜¯å˜é‡çš„åˆ—ä¸­çš„å€¼ (id) éœ€è¦è¢«é‡å¤ï¼Œæ¯ä¸ªè¢«è½¬æ¢çš„åˆ—é‡å¤ä¸€æ¬¡ã€‚\n\n\n\n\n\n\n\nFigureÂ 5.3: å·²ç»æ˜¯å˜é‡çš„åˆ—éœ€è¦è¢«é‡å¤ï¼Œæ¯ä¸ªè¢«è½¬æ¢çš„åˆ—é‡å¤ä¸€æ¬¡ã€‚\n\n\n\n\nåˆ—åä¼šæˆä¸ºä¸€ä¸ªæ–°å˜é‡ä¸­çš„å€¼ï¼Œè¯¥æ–°å˜é‡çš„åç§°ç”± names_to å®šä¹‰ï¼Œå¦‚ FigureÂ 5.4 æ‰€ç¤ºã€‚å®ƒä»¬éœ€è¦ä¸ºåŸå§‹æ•°æ®é›†ä¸­çš„æ¯ä¸€è¡Œé‡å¤ä¸€æ¬¡ã€‚\n\n\n\n\n\n\n\nFigureÂ 5.4: è¢«è½¬æ¢åˆ—çš„åˆ—åæˆä¸ºæ–°åˆ—ä¸­çš„å€¼ã€‚è¿™äº›å€¼éœ€è¦ä¸ºåŸå§‹æ•°æ®é›†çš„æ¯ä¸€è¡Œé‡å¤ä¸€æ¬¡ã€‚\n\n\n\n\nå•å…ƒæ ¼çš„å€¼ä¹Ÿæˆä¸ºä¸€ä¸ªæ–°å˜é‡ä¸­çš„å€¼ï¼Œå…¶åç§°ç”± values_to å®šä¹‰ã€‚å®ƒä»¬è¢«é€è¡Œå±•å¼€ã€‚FigureÂ 5.5 å±•ç¤ºäº†è¿™ä¸ªè¿‡ç¨‹ã€‚\n\n\n\n\n\n\n\nFigureÂ 5.5: å€¼çš„æ•°é‡è¢«ä¿ç•™ï¼ˆä¸é‡å¤ï¼‰ï¼Œä½†è¢«é€è¡Œå±•å¼€ã€‚\n\n\n\n\n\n5.3.3 åˆ—åä¸­åŒ…å«å¤šä¸ªå˜é‡\nä¸€ä¸ªæ›´å…·æŒ‘æˆ˜æ€§çš„æƒ…å†µæ˜¯ï¼Œå½“ä½ çš„åˆ—åä¸­å¡å…¥äº†å¤šæ¡ä¿¡æ¯ï¼Œè€Œä½ å¸Œæœ›å°†è¿™äº›ä¿¡æ¯å­˜å‚¨åœ¨ä¸åŒçš„æ–°å˜é‡ä¸­æ—¶ã€‚ä¾‹å¦‚ï¼Œæ‹¿ who2 æ•°æ®é›†æ¥è¯´ï¼Œè¿™æ˜¯ä½ ä¸Šé¢çœ‹åˆ°çš„ table1 åŠå…¶ä»–è¡¨æ ¼çš„æ¥æºï¼š\n\nwho2\n#&gt; # A tibble: 7,240 Ã— 58\n#&gt;   country      year sp_m_014 sp_m_1524 sp_m_2534 sp_m_3544 sp_m_4554\n#&gt;   &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;\n#&gt; 1 Afghanistan  1980       NA        NA        NA        NA        NA\n#&gt; 2 Afghanistan  1981       NA        NA        NA        NA        NA\n#&gt; 3 Afghanistan  1982       NA        NA        NA        NA        NA\n#&gt; 4 Afghanistan  1983       NA        NA        NA        NA        NA\n#&gt; 5 Afghanistan  1984       NA        NA        NA        NA        NA\n#&gt; 6 Afghanistan  1985       NA        NA        NA        NA        NA\n#&gt; # â„¹ 7,234 more rows\n#&gt; # â„¹ 51 more variables: sp_m_5564 &lt;dbl&gt;, sp_m_65 &lt;dbl&gt;, sp_f_014 &lt;dbl&gt;, â€¦\n\nè¿™ä¸ªç”±ä¸–ç•Œå«ç”Ÿç»„ç»‡æ”¶é›†çš„æ•°æ®é›†è®°å½•äº†å…³äºç»“æ ¸ç—…è¯Šæ–­çš„ä¿¡æ¯ã€‚æœ‰ä¸¤åˆ—å·²ç»æ˜¯å˜é‡å¹¶ä¸”å¾ˆå®¹æ˜“è§£é‡Šï¼šcountry å’Œ yearã€‚å®ƒä»¬åé¢è·Ÿç€ 56 åˆ—ï¼Œå¦‚ sp_m_014ã€ep_m_4554 å’Œ rel_m_3544ã€‚å¦‚æœä½ ç›¯ç€è¿™äº›åˆ—è¶³å¤Ÿé•¿çš„æ—¶é—´ï¼Œä½ ä¼šæ³¨æ„åˆ°ä¸€ä¸ªæ¨¡å¼ã€‚æ¯ä¸ªåˆ—åéƒ½ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œç”¨ _ åˆ†éš”ã€‚ç¬¬ä¸€éƒ¨åˆ†ï¼Œsp/rel/epï¼Œæè¿°äº†è¯Šæ–­æ‰€ç”¨çš„æ–¹æ³•ï¼›ç¬¬äºŒéƒ¨åˆ†ï¼Œm/f æ˜¯ gender (æ€§åˆ«ï¼Œåœ¨è¿™ä¸ªæ•°æ®é›†ä¸­ç¼–ç ä¸ºäºŒå…ƒå˜é‡)ï¼›ç¬¬ä¸‰éƒ¨åˆ†ï¼Œ014/1524/2534/3544/4554/5564/65 æ˜¯ age (å¹´é¾„) èŒƒå›´ (ä¾‹å¦‚ï¼Œ014 ä»£è¡¨ 0-14 å²)ã€‚\næ‰€ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åœ¨ who2 ä¸­è®°å½•äº†å…­æ¡ä¿¡æ¯ï¼šå›½å®¶å’Œå¹´ä»½ (å·²ç»æ˜¯åˆ—)ï¼›è¯Šæ–­æ–¹æ³•ã€æ€§åˆ«ç±»åˆ«å’Œå¹´é¾„èŒƒå›´ç±»åˆ« (åŒ…å«åœ¨å…¶ä»–åˆ—åä¸­)ï¼›ä»¥åŠè¯¥ç±»åˆ«ä¸­çš„æ‚£è€…è®¡æ•° (å•å…ƒæ ¼å€¼)ã€‚ä¸ºäº†å°†è¿™å…­æ¡ä¿¡æ¯ç»„ç»‡åœ¨å…­ä¸ªç‹¬ç«‹çš„åˆ—ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ pivot_longer()ï¼Œå¹¶ä¸º names_to æä¾›ä¸€ä¸ªåˆ—åå‘é‡ï¼Œä¸º names_sep æä¾›å°†åŸå§‹å˜é‡åæ‹†åˆ†æˆå—çš„æŒ‡ä»¤ï¼Œä»¥åŠä¸º values_to æä¾›ä¸€ä¸ªåˆ—åï¼š\n\nwho2 |&gt; \n  pivot_longer(\n    cols = !(country:year),\n    names_to = c(\"diagnosis\", \"gender\", \"age\"), \n    names_sep = \"_\",\n    values_to = \"count\"\n  )\n#&gt; # A tibble: 405,440 Ã— 6\n#&gt;   country      year diagnosis gender age   count\n#&gt;   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt;\n#&gt; 1 Afghanistan  1980 sp        m      014      NA\n#&gt; 2 Afghanistan  1980 sp        m      1524     NA\n#&gt; 3 Afghanistan  1980 sp        m      2534     NA\n#&gt; 4 Afghanistan  1980 sp        m      3544     NA\n#&gt; 5 Afghanistan  1980 sp        m      4554     NA\n#&gt; 6 Afghanistan  1980 sp        m      5564     NA\n#&gt; # â„¹ 405,434 more rows\n\nnames_sep çš„ä¸€ä¸ªæ›¿ä»£æ–¹æ¡ˆæ˜¯ names_patternï¼Œåœ¨ä½ å­¦ä¹ äº† Chapter 15 ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼åï¼Œå¯ä»¥ç”¨å®ƒä»æ›´å¤æ‚çš„å‘½ååœºæ™¯ä¸­æå–å˜é‡ã€‚\nä»æ¦‚å¿µä¸Šè®²ï¼Œè¿™åªæ˜¯ä½ å·²ç»çœ‹è¿‡çš„æ›´ç®€å•æƒ…å†µçš„ä¸€ä¸ªå°å˜ç§ã€‚FigureÂ 5.6 å±•ç¤ºäº†åŸºæœ¬æ€æƒ³ï¼šç°åœ¨ï¼Œåˆ—åä¸å†æ˜¯è½¬æ¢æˆå•ä¸ªåˆ—ï¼Œè€Œæ˜¯è½¬æ¢æˆå¤šä¸ªåˆ—ã€‚ä½ å¯ä»¥æƒ³è±¡è¿™åˆ†ä¸¤æ­¥å‘ç”Ÿ (å…ˆè½¬æ¢å†åˆ†ç¦»)ï¼Œä½†å®é™…ä¸Šå®ƒæ˜¯åœ¨ä¸€ä¸ªæ­¥éª¤ä¸­å®Œæˆçš„ï¼Œå› ä¸ºè¿™æ ·æ›´å¿«ã€‚\n\n\n\n\n\n\n\nFigureÂ 5.6: è½¬æ¢åç§°ä¸­åŒ…å«å¤šæ¡ä¿¡æ¯çš„åˆ—ï¼Œæ„å‘³ç€æ¯ä¸ªåˆ—åç°åœ¨éƒ½ä¼šå¡«å……åˆ°è¾“å‡ºçš„å¤šä¸ªåˆ—ä¸­ã€‚\n\n\n\n\n\n5.3.4 åˆ—æ ‡é¢˜ä¸­åŒ…å«æ•°æ®å’Œå˜é‡å\nå¤æ‚æ€§çš„ä¸‹ä¸€ä¸ªå°é˜¶æ˜¯å½“åˆ—åä¸­æ··åˆäº†å˜é‡å€¼å’Œå˜é‡åã€‚ä¾‹å¦‚ï¼Œæ‹¿ household æ•°æ®é›†æ¥è¯´ï¼š\n\nhousehold\n#&gt; # A tibble: 5 Ã— 5\n#&gt;   family dob_child1 dob_child2 name_child1 name_child2\n#&gt;    &lt;int&gt; &lt;date&gt;     &lt;date&gt;     &lt;chr&gt;       &lt;chr&gt;      \n#&gt; 1      1 1998-11-26 2000-01-29 Susan       Jose       \n#&gt; 2      2 1996-06-22 NA         Mark        &lt;NA&gt;       \n#&gt; 3      3 2002-07-11 2004-04-05 Sam         Seth       \n#&gt; 4      4 2004-10-10 2009-08-27 Craig       Khai       \n#&gt; 5      5 2000-12-05 2005-02-28 Parker      Gracie\n\nè¿™ä¸ªæ•°æ®é›†åŒ…å«äº†äº”ä¸ªå®¶åº­çš„æ•°æ®ï¼Œä»¥åŠæœ€å¤šä¸¤ä¸ªå­©å­çš„å§“åå’Œå‡ºç”Ÿæ—¥æœŸã€‚è¿™ä¸ªæ•°æ®é›†ä¸­çš„æ–°æŒ‘æˆ˜æ˜¯ï¼Œåˆ—ååŒ…å«äº†ä¸¤ä¸ªå˜é‡çš„åç§° (dobã€name) å’Œå¦ä¸€ä¸ªå˜é‡ (childï¼Œå€¼ä¸º 1 æˆ– 2) çš„å€¼ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å†æ¬¡éœ€è¦å‘ names_to æä¾›ä¸€ä¸ªå‘é‡ï¼Œä½†è¿™æ¬¡æˆ‘ä»¬ä½¿ç”¨ç‰¹æ®Šçš„ \".value\" æŒ‡ç¤ºç¬¦ï¼›è¿™ä¸æ˜¯ä¸€ä¸ªå˜é‡åï¼Œè€Œæ˜¯ä¸€ä¸ªå‘Šè¯‰ pivot_longer() åšäº›ä¸åŒäº‹æƒ…çš„å”¯ä¸€å€¼ã€‚è¿™ä¼šè¦†ç›–é€šå¸¸çš„ values_to å‚æ•°ï¼Œè½¬è€Œä½¿ç”¨è¢«è½¬æ¢åˆ—åçš„ç¬¬ä¸€éƒ¨åˆ†ä½œä¸ºè¾“å‡ºä¸­çš„å˜é‡åã€‚\n\nhousehold |&gt; \n  pivot_longer(\n    cols = !family, \n    names_to = c(\".value\", \"child\"), \n    names_sep = \"_\", \n    values_drop_na = TRUE\n  )\n#&gt; # A tibble: 9 Ã— 4\n#&gt;   family child  dob        name \n#&gt;    &lt;int&gt; &lt;chr&gt;  &lt;date&gt;     &lt;chr&gt;\n#&gt; 1      1 child1 1998-11-26 Susan\n#&gt; 2      1 child2 2000-01-29 Jose \n#&gt; 3      2 child1 1996-06-22 Mark \n#&gt; 4      3 child1 2002-07-11 Sam  \n#&gt; 5      3 child2 2004-04-05 Seth \n#&gt; 6      4 child1 2004-10-10 Craig\n#&gt; # â„¹ 3 more rows\n\næˆ‘ä»¬å†æ¬¡ä½¿ç”¨ values_drop_na = TRUEï¼Œå› ä¸ºè¾“å…¥çš„å½¢çŠ¶å¼ºåˆ¶åˆ›å»ºäº†æ˜¾å¼çš„ç¼ºå¤±å˜é‡ (ä¾‹å¦‚ï¼Œå¯¹äºåªæœ‰ä¸€ä¸ªå­©å­çš„å®¶åº­)ã€‚\nFigureÂ 5.7 ç”¨ä¸€ä¸ªæ›´ç®€å•çš„ä¾‹å­é˜è¿°äº†åŸºæœ¬æ€æƒ³ã€‚å½“ä½ åœ¨ names_to ä¸­ä½¿ç”¨ \".value\" æ—¶ï¼Œè¾“å…¥ä¸­çš„åˆ—ååŒæ—¶è´¡çŒ®äº†è¾“å‡ºä¸­çš„å€¼å’Œå˜é‡åã€‚\n\n\n\n\n\n\n\nFigureÂ 5.7: ä½¿ç”¨ names_to = c(\".value\", \"num\") è¿›è¡Œè½¬æ¢ä¼šå°†åˆ—ååˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼šç¬¬ä¸€éƒ¨åˆ†å†³å®šè¾“å‡ºåˆ—çš„åç§°ï¼ˆx æˆ– yï¼‰ï¼Œç¬¬äºŒéƒ¨åˆ†å†³å®š num åˆ—çš„å€¼ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>5</span>Â  <span class='chapter-title'>æ•°æ®æ•´ç†</span>"
    ]
  },
  {
    "objectID": "data-tidy.html#åŠ å®½æ•°æ®",
    "href": "data-tidy.html#åŠ å®½æ•°æ®",
    "title": "5Â  æ•°æ®æ•´ç†",
    "section": "\n5.4 åŠ å®½æ•°æ®",
    "text": "5.4 åŠ å®½æ•°æ®\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»ä½¿ç”¨ pivot_longer() æ¥è§£å†³ä¸€ç±»å¸¸è§çš„é—®é¢˜ï¼Œå³å€¼æœ€ç»ˆå‡ºç°åœ¨åˆ—åä¸­ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è½¬å‘ pivot_wider()ï¼Œå®ƒé€šè¿‡å¢åŠ åˆ—æ•°å’Œå‡å°‘è¡Œæ•°æ¥ä½¿æ•°æ®é›†å˜å®½ï¼Œå¹¶åœ¨ä¸€ä¸ªè§‚æµ‹åˆ†å¸ƒåœ¨å¤šè¡Œæ—¶æä¾›å¸®åŠ©ã€‚è¿™ç§æƒ…å†µåœ¨ç°å®ä¸–ç•Œä¸­ä¼¼ä¹ä¸é‚£ä¹ˆå¸¸è§ï¼Œä½†åœ¨å¤„ç†æ”¿åºœæ•°æ®æ—¶ä¼¼ä¹ç»å¸¸å‡ºç°ã€‚\næˆ‘ä»¬å°†ä»æŸ¥çœ‹ cms_patient_experience å¼€å§‹ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¥è‡ªåŒ»ç–—ä¿é™©å’ŒåŒ»ç–—è¡¥åŠ©æœåŠ¡ä¸­å¿ƒçš„æ•°æ®é›†ï¼Œæ”¶é›†äº†å…³äºæ‚£è€…ä½“éªŒçš„æ•°æ®ï¼š\n\ncms_patient_experience\n#&gt; # A tibble: 500 Ã— 5\n#&gt;   org_pac_id org_nm                     measure_cd   measure_title   prf_rate\n#&gt;   &lt;chr&gt;      &lt;chr&gt;                      &lt;chr&gt;        &lt;chr&gt;              &lt;dbl&gt;\n#&gt; 1 0446157747 USC CARE MEDICAL GROUP INC CAHPS_GRP_1  CAHPS for MIPSâ€¦       63\n#&gt; 2 0446157747 USC CARE MEDICAL GROUP INC CAHPS_GRP_2  CAHPS for MIPSâ€¦       87\n#&gt; 3 0446157747 USC CARE MEDICAL GROUP INC CAHPS_GRP_3  CAHPS for MIPSâ€¦       86\n#&gt; 4 0446157747 USC CARE MEDICAL GROUP INC CAHPS_GRP_5  CAHPS for MIPSâ€¦       57\n#&gt; 5 0446157747 USC CARE MEDICAL GROUP INC CAHPS_GRP_8  CAHPS for MIPSâ€¦       85\n#&gt; 6 0446157747 USC CARE MEDICAL GROUP INC CAHPS_GRP_12 CAHPS for MIPSâ€¦       24\n#&gt; # â„¹ 494 more rows\n\nè¢«ç ”ç©¶çš„æ ¸å¿ƒå•ä½æ˜¯ä¸€ä¸ªç»„ç»‡ï¼Œä½†æ¯ä¸ªç»„ç»‡éƒ½åˆ†å¸ƒåœ¨å…­è¡Œä¸­ï¼Œæ¯ä¸€è¡Œå¯¹åº”äºåœ¨è¯¥ç»„ç»‡è°ƒæŸ¥ä¸­è¿›è¡Œçš„ä¸€æ¬¡æµ‹é‡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ distinct() æ¥æŸ¥çœ‹ measure_cd å’Œ measure_title çš„å®Œæ•´å€¼é›†ï¼š\n\ncms_patient_experience |&gt; \n  distinct(measure_cd, measure_title)\n#&gt; # A tibble: 6 Ã— 2\n#&gt;   measure_cd   measure_title                                                 \n#&gt;   &lt;chr&gt;        &lt;chr&gt;                                                         \n#&gt; 1 CAHPS_GRP_1  CAHPS for MIPS SSM: Getting Timely Care, Appointments, and Inâ€¦\n#&gt; 2 CAHPS_GRP_2  CAHPS for MIPS SSM: How Well Providers Communicate            \n#&gt; 3 CAHPS_GRP_3  CAHPS for MIPS SSM: Patient's Rating of Provider              \n#&gt; 4 CAHPS_GRP_5  CAHPS for MIPS SSM: Health Promotion and Education            \n#&gt; 5 CAHPS_GRP_8  CAHPS for MIPS SSM: Courteous and Helpful Office Staff        \n#&gt; 6 CAHPS_GRP_12 CAHPS for MIPS SSM: Stewardship of Patient Resources\n\nè¿™ä¸¤åˆ—éƒ½ä¸ä¼šæˆä¸ºç‰¹åˆ«å¥½çš„å˜é‡åï¼šmeasure_cd æ²¡æœ‰æš—ç¤ºå˜é‡çš„å«ä¹‰ï¼Œè€Œ measure_title æ˜¯ä¸€ä¸ªåŒ…å«ç©ºæ ¼çš„é•¿å¥å­ã€‚æˆ‘ä»¬ç°åœ¨å°†ä½¿ç”¨ measure_cd ä½œä¸ºæ–°åˆ—åçš„æ¥æºï¼Œä½†åœ¨å®é™…åˆ†æä¸­ï¼Œä½ å¯èƒ½æƒ³è¦åˆ›å»ºæ—¢ç®€çŸ­åˆæœ‰æ„ä¹‰çš„è‡ªå·±çš„å˜é‡åã€‚\npivot_wider() çš„æ¥å£ä¸ pivot_longer() ç›¸åï¼šæˆ‘ä»¬ä¸æ˜¯é€‰æ‹©æ–°çš„åˆ—åï¼Œè€Œæ˜¯éœ€è¦æä¾›å®šä¹‰å€¼çš„ç°æœ‰åˆ— (values_from) å’Œå®šä¹‰åˆ—åçš„åˆ— (names_from)ï¼š\n\ncms_patient_experience |&gt; \n  pivot_wider(\n    names_from = measure_cd,\n    values_from = prf_rate\n  )\n#&gt; # A tibble: 500 Ã— 9\n#&gt;   org_pac_id org_nm                   measure_title   CAHPS_GRP_1 CAHPS_GRP_2\n#&gt;   &lt;chr&gt;      &lt;chr&gt;                    &lt;chr&gt;                 &lt;dbl&gt;       &lt;dbl&gt;\n#&gt; 1 0446157747 USC CARE MEDICAL GROUP â€¦ CAHPS for MIPSâ€¦          63          NA\n#&gt; 2 0446157747 USC CARE MEDICAL GROUP â€¦ CAHPS for MIPSâ€¦          NA          87\n#&gt; 3 0446157747 USC CARE MEDICAL GROUP â€¦ CAHPS for MIPSâ€¦          NA          NA\n#&gt; 4 0446157747 USC CARE MEDICAL GROUP â€¦ CAHPS for MIPSâ€¦          NA          NA\n#&gt; 5 0446157747 USC CARE MEDICAL GROUP â€¦ CAHPS for MIPSâ€¦          NA          NA\n#&gt; 6 0446157747 USC CARE MEDICAL GROUP â€¦ CAHPS for MIPSâ€¦          NA          NA\n#&gt; # â„¹ 494 more rows\n#&gt; # â„¹ 4 more variables: CAHPS_GRP_3 &lt;dbl&gt;, CAHPS_GRP_5 &lt;dbl&gt;, â€¦\n\nè¾“å‡ºçœ‹èµ·æ¥ä¸å¤ªå¯¹ï¼›æˆ‘ä»¬ä¼¼ä¹æ¯ä¸ªç»„ç»‡ä»ç„¶æœ‰å¤šè¡Œã€‚è¿™æ˜¯å› ä¸ºï¼Œæˆ‘ä»¬è¿˜éœ€è¦å‘Šè¯‰ pivot_wider() å“ªä¸ªæˆ–å“ªäº›åˆ—çš„å€¼å”¯ä¸€æ ‡è¯†æ¯ä¸€è¡Œï¼›åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ˜¯é‚£äº›ä»¥ \"org\" å¼€å¤´çš„å˜é‡ï¼š\n\ncms_patient_experience |&gt; \n  pivot_wider(\n    id_cols = starts_with(\"org\"),\n    names_from = measure_cd,\n    values_from = prf_rate\n  )\n#&gt; # A tibble: 95 Ã— 8\n#&gt;   org_pac_id org_nm           CAHPS_GRP_1 CAHPS_GRP_2 CAHPS_GRP_3 CAHPS_GRP_5\n#&gt;   &lt;chr&gt;      &lt;chr&gt;                  &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;\n#&gt; 1 0446157747 USC CARE MEDICAâ€¦          63          87          86          57\n#&gt; 2 0446162697 ASSOCIATION OF â€¦          59          85          83          63\n#&gt; 3 0547164295 BEAVER MEDICAL â€¦          49          NA          75          44\n#&gt; 4 0749333730 CAPE PHYSICIANSâ€¦          67          84          85          65\n#&gt; 5 0840104360 ALLIANCE PHYSICâ€¦          66          87          87          64\n#&gt; 6 0840109864 REX HOSPITAL INC          73          87          84          67\n#&gt; # â„¹ 89 more rows\n#&gt; # â„¹ 2 more variables: CAHPS_GRP_8 &lt;dbl&gt;, CAHPS_GRP_12 &lt;dbl&gt;\n\nè¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†æˆ‘ä»¬æƒ³è¦çš„è¾“å‡ºã€‚\n\n5.4.1 pivot_wider() æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ\nä¸ºäº†ç†è§£ pivot_wider() æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œè®©æˆ‘ä»¬å†æ¬¡ä»ä¸€ä¸ªéå¸¸ç®€å•çš„æ•°æ®é›†å¼€å§‹ã€‚è¿™æ¬¡æˆ‘ä»¬æœ‰ä¸¤ä¸ªç—…äººï¼Œid åˆ†åˆ«æ˜¯ A å’Œ Bï¼Œæˆ‘ä»¬å¯¹ç—…äºº A è¿›è¡Œäº†ä¸‰æ¬¡è¡€å‹æµ‹é‡ï¼Œå¯¹ç—…äºº B è¿›è¡Œäº†ä¸¤æ¬¡ï¼š\n\ndf &lt;- tribble(\n  ~id, ~measurement, ~value,\n  \"A\",        \"bp1\",    100,\n  \"B\",        \"bp1\",    140,\n  \"B\",        \"bp2\",    115, \n  \"A\",        \"bp2\",    120,\n  \"A\",        \"bp3\",    105\n)\n\næˆ‘ä»¬å°†ä» value åˆ—å–å€¼ï¼Œä» measurement åˆ—å–åï¼š\n\ndf |&gt; \n  pivot_wider(\n    names_from = measurement,\n    values_from = value\n  )\n#&gt; # A tibble: 2 Ã— 4\n#&gt;   id      bp1   bp2   bp3\n#&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1 A       100   120   105\n#&gt; 2 B       140   115    NA\n\nä¸ºäº†å¼€å§‹è¿™ä¸ªè¿‡ç¨‹ï¼Œpivot_wider() é¦–å…ˆéœ€è¦å¼„æ¸…æ¥šè¡Œå’Œåˆ—ä¸­å°†æ”¾ä»€ä¹ˆã€‚æ–°çš„åˆ—åå°†æ˜¯ measurement çš„å”¯ä¸€å€¼ã€‚\n\ndf |&gt; \n  distinct(measurement) |&gt; \n  pull()\n#&gt; [1] \"bp1\" \"bp2\" \"bp3\"\n\né»˜è®¤æƒ…å†µä¸‹ï¼Œè¾“å‡ºä¸­çš„è¡Œç”±æ‰€æœ‰ä¸è¿›å…¥æ–°åç§°æˆ–å€¼çš„å˜é‡å†³å®šã€‚è¿™äº›è¢«ç§°ä¸º id_colsã€‚è¿™é‡Œåªæœ‰ä¸€ä¸ªåˆ—ï¼Œä½†é€šå¸¸å¯ä»¥æœ‰ä»»æ„æ•°é‡ã€‚\n\ndf |&gt; \n  select(-measurement, -value) |&gt; \n  distinct()\n#&gt; # A tibble: 2 Ã— 1\n#&gt;   id   \n#&gt;   &lt;chr&gt;\n#&gt; 1 A    \n#&gt; 2 B\n\nç„¶å pivot_wider() ç»“åˆè¿™äº›ç»“æœç”Ÿæˆä¸€ä¸ªç©ºçš„æ•°æ®æ¡†ï¼š\n\ndf |&gt; \n  select(-measurement, -value) |&gt; \n  distinct() |&gt; \n  mutate(x = NA, y = NA, z = NA)\n#&gt; # A tibble: 2 Ã— 4\n#&gt;   id    x     y     z    \n#&gt;   &lt;chr&gt; &lt;lgl&gt; &lt;lgl&gt; &lt;lgl&gt;\n#&gt; 1 A     NA    NA    NA   \n#&gt; 2 B     NA    NA    NA\n\nç„¶åå®ƒç”¨è¾“å…¥ä¸­çš„æ•°æ®å¡«å……æ‰€æœ‰ç¼ºå¤±å€¼ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¹¶éè¾“å‡ºä¸­çš„æ¯ä¸ªå•å…ƒæ ¼åœ¨è¾“å…¥ä¸­éƒ½æœ‰å¯¹åº”çš„å€¼ï¼Œå› ä¸ºç—…äºº B æ²¡æœ‰ç¬¬ä¸‰æ¬¡è¡€å‹æµ‹é‡ï¼Œæ‰€ä»¥é‚£ä¸ªå•å…ƒæ ¼ä¿æŒç¼ºå¤±ã€‚æˆ‘ä»¬å°†åœ¨ Chapter 18 ä¸­å›åˆ° pivot_wider() å¯ä»¥â€œåˆ¶é€ â€ç¼ºå¤±å€¼çš„è¿™ä¸ªæ¦‚å¿µã€‚\nä½ å¯èƒ½è¿˜ä¼šæƒ³ï¼Œå¦‚æœè¾“å…¥ä¸­æœ‰å¤šä¸ªè¡Œå¯¹åº”äºè¾“å‡ºä¸­çš„ä¸€ä¸ªå•å…ƒæ ¼ä¼šå‘ç”Ÿä»€ä¹ˆã€‚ä¸‹é¢çš„ä¾‹å­æœ‰ä¸¤è¡Œå¯¹åº”äº id â€œAâ€ å’Œ measurement â€œbp1â€ï¼š\n\ndf &lt;- tribble(\n  ~id, ~measurement, ~value,\n  \"A\",        \"bp1\",    100,\n  \"A\",        \"bp1\",    102,\n  \"A\",        \"bp2\",    120,\n  \"B\",        \"bp1\",    140, \n  \"B\",        \"bp2\",    115\n)\n\nå¦‚æœæˆ‘ä»¬å°è¯•è½¬æ¢è¿™ä¸ªï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªåŒ…å«åˆ—è¡¨åˆ— (list-columns) çš„è¾“å‡ºï¼Œä½ å°†åœ¨ Chapter 23 ä¸­å­¦åˆ°æ›´å¤šå…³äºå®ƒçš„çŸ¥è¯†ï¼š\n\ndf |&gt;\n  pivot_wider(\n    names_from = measurement,\n    values_from = value\n  )\n#&gt; Warning: Values from `value` are not uniquely identified; output will contain\n#&gt; list-cols.\n#&gt; â€¢ Use `values_fn = list` to suppress this warning.\n#&gt; â€¢ Use `values_fn = {summary_fun}` to summarise duplicates.\n#&gt; â€¢ Use the following dplyr code to identify duplicates.\n#&gt;   {data} |&gt;\n#&gt;   dplyr::summarise(n = dplyr::n(), .by = c(id, measurement)) |&gt;\n#&gt;   dplyr::filter(n &gt; 1L)\n#&gt; # A tibble: 2 Ã— 3\n#&gt;   id    bp1       bp2      \n#&gt;   &lt;chr&gt; &lt;list&gt;    &lt;list&gt;   \n#&gt; 1 A     &lt;dbl [2]&gt; &lt;dbl [1]&gt;\n#&gt; 2 B     &lt;dbl [1]&gt; &lt;dbl [1]&gt;\n\nå› ä¸ºä½ è¿˜ä¸çŸ¥é“å¦‚ä½•å¤„ç†è¿™ç§æ•°æ®ï¼Œä½ å¯èƒ½éœ€è¦æ ¹æ®è­¦å‘Šä¸­çš„æç¤ºæ¥æ‰¾å‡ºé—®é¢˜æ‰€åœ¨ï¼š\n\ndf |&gt; \n  group_by(id, measurement) |&gt; \n  summarize(n = n(), .groups = \"drop\") |&gt; \n  filter(n &gt; 1)\n#&gt; # A tibble: 1 Ã— 3\n#&gt;   id    measurement     n\n#&gt;   &lt;chr&gt; &lt;chr&gt;       &lt;int&gt;\n#&gt; 1 A     bp1             2\n\nç„¶åå°±å¾—ç”±ä½ æ¥å¼„æ¸…æ¥šä½ çš„æ•°æ®å‡ºäº†ä»€ä¹ˆé—®é¢˜ï¼Œè¦ä¹ˆä¿®å¤åº•å±‚çš„æ•°æ®æŸåï¼Œè¦ä¹ˆä½¿ç”¨ä½ çš„åˆ†ç»„å’Œæ±‡æ€»æŠ€èƒ½æ¥ç¡®ä¿è¡Œå’Œåˆ—å€¼çš„æ¯ä¸ªç»„åˆåªæœ‰ä¸€ä¸ªå•è¡Œã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>5</span>Â  <span class='chapter-title'>æ•°æ®æ•´ç†</span>"
    ]
  },
  {
    "objectID": "data-tidy.html#å°ç»“",
    "href": "data-tidy.html#å°ç»“",
    "title": "5Â  æ•°æ®æ•´ç†",
    "section": "\n5.5 å°ç»“",
    "text": "5.5 å°ç»“\nåœ¨æœ¬ç« ä¸­ï¼Œä½ å­¦ä¹ äº†å…³äºæ•´æ´æ•°æ®çš„çŸ¥è¯†ï¼šå³å˜é‡åœ¨åˆ—ã€è§‚æµ‹åœ¨è¡Œçš„æ•°æ®ã€‚æ•´æ´æ•°æ®ä½¿å¾—åœ¨ tidyverse ä¸­å·¥ä½œæ›´å®¹æ˜“ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªè¢«å¤§å¤šæ•°å‡½æ•°æ‰€ç†è§£çš„ä¸€è‡´ç»“æ„ï¼Œä¸»è¦çš„æŒ‘æˆ˜æ˜¯å°†ä½ æ”¶åˆ°çš„ä»»ä½•ç»“æ„çš„æ•°æ®è½¬æ¢æˆæ•´æ´çš„æ ¼å¼ã€‚ä¸ºæ­¤ï¼Œä½ å­¦ä¹ äº† pivot_longer() å’Œ pivot_wider()ï¼Œå®ƒä»¬å¯ä»¥è®©ä½ æ•´ç†è®¸å¤šä¸æ•´æ´çš„æ•°æ®é›†ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œå±•ç¤ºçš„ä¾‹å­æ˜¯ä» vignette(\"pivot\", package = \"tidyr\") ä¸­æŒ‘é€‰çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥å¦‚æœä½ é‡åˆ°çš„é—®é¢˜æœ¬ç« æ²¡æœ‰å¸®åŠ©ä½ è§£å†³ï¼Œé‚£ä¹ˆé‚£ä¸ªå°å“æ–‡æ˜¯ä¸€ä¸ªå€¼å¾—å°è¯•çš„ä¸‹ä¸€ä¸ªåœ°æ–¹ã€‚\nå¦ä¸€ä¸ªæŒ‘æˆ˜æ˜¯ï¼Œå¯¹äºä¸€ä¸ªç»™å®šçš„æ•°æ®é›†ï¼Œå¯èƒ½æ— æ³•å°†æ›´é•¿æˆ–æ›´å®½çš„ç‰ˆæœ¬æ ‡è®°ä¸ºâ€œæ•´æ´â€çš„é‚£ä¸ªã€‚è¿™éƒ¨åˆ†åæ˜ äº†æˆ‘ä»¬å¯¹æ•´æ´æ•°æ®çš„å®šä¹‰ï¼Œæˆ‘ä»¬è¯´æ•´æ´æ•°æ®æ¯ä¸ªåˆ—ä¸­æœ‰ä¸€ä¸ªå˜é‡ï¼Œä½†æˆ‘ä»¬å®é™…ä¸Šæ²¡æœ‰å®šä¹‰ä»€ä¹ˆæ˜¯å˜é‡ (è€Œä¸”å®šä¹‰å®ƒå‡ºå¥‡åœ°å›°éš¾)ã€‚åŠ¡å®åœ°è¯´ï¼Œä¸€ä¸ªå˜é‡å¯ä»¥æ˜¯ä»»ä½•ä½¿ä½ çš„åˆ†ææœ€å®¹æ˜“çš„ä¸œè¥¿ï¼Œè¿™æ˜¯å®Œå…¨å¯ä»¥æ¥å—çš„ã€‚æ‰€ä»¥å¦‚æœä½ åœ¨ figuring out å¦‚ä½•è¿›è¡ŒæŸäº›è®¡ç®—æ—¶å¡ä½äº†ï¼Œè€ƒè™‘æ”¹å˜ä½ çš„æ•°æ®ç»„ç»‡æ–¹å¼ï¼›ä¸è¦å®³æ€•æŒ‰éœ€è¿›è¡Œéæ•´æ´åŒ–ã€è½¬æ¢å’Œé‡æ–°æ•´æ´åŒ–ï¼\nå¦‚æœä½ å–œæ¬¢æœ¬ç« å¹¶æƒ³äº†è§£æ›´å¤šå…³äºå…¶åº•å±‚ç†è®ºçš„çŸ¥è¯†ï¼Œä½ å¯ä»¥åœ¨å‘è¡¨äºã€Šç»Ÿè®¡è½¯ä»¶æ‚å¿—ã€‹(Journal of Statistical Software) çš„è®ºæ–‡ Tidy Data ä¸­äº†è§£æ›´å¤šå…³äºå…¶å†å²å’Œç†è®ºåŸºç¡€ã€‚\nç°åœ¨ä½ æ­£åœ¨ç¼–å†™å¤§é‡çš„ R ä»£ç ï¼Œæ˜¯æ—¶å€™å­¦ä¹ æ›´å¤šå…³äºå°†ä½ çš„ä»£ç ç»„ç»‡åˆ°æ–‡ä»¶å’Œç›®å½•ä¸­çš„çŸ¥è¯†äº†ã€‚åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œä½ å°†å­¦ä¹ åˆ°è„šæœ¬å’Œé¡¹ç›®çš„æ‰€æœ‰ä¼˜ç‚¹ï¼Œä»¥åŠå®ƒä»¬æä¾›çš„è®¸å¤šä½¿ä½ çš„ç”Ÿæ´»æ›´è½»æ¾çš„å·¥å…·ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>5</span>Â  <span class='chapter-title'>æ•°æ®æ•´ç†</span>"
    ]
  },
  {
    "objectID": "data-tidy.html#footnotes",
    "href": "data-tidy.html#footnotes",
    "title": "5Â  æ•°æ®æ•´ç†",
    "section": "",
    "text": "åªè¦ä¸€é¦–æ­Œåœ¨ 2000 å¹´çš„æŸä¸ªæ—¶é—´ç‚¹è¿›å…¥è¿‡å‰ 100 åï¼Œå®ƒå°±ä¼šè¢«æ”¶å½•ï¼Œå¹¶ä¸”åœ¨å‡ºç°åæœ€å¤šè¢«è¿½è¸ª 72 å‘¨ã€‚â†©ï¸\næˆ‘ä»¬å°†åœ¨ Chapter 18 ä¸­å›åˆ°è¿™ä¸ªæ¦‚å¿µã€‚â†©ï¸",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>5</span>Â  <span class='chapter-title'>æ•°æ®æ•´ç†</span>"
    ]
  },
  {
    "objectID": "workflow-scripts.html",
    "href": "workflow-scripts.html",
    "title": "6Â  å·¥ä½œæµï¼šè„šæœ¬å’Œé¡¹ç›®",
    "section": "",
    "text": "6.1 è„šæœ¬\næœ¬ç« å°†å‘ä½ ä»‹ç»ä¸¤ä¸ªç”¨äºç»„ç»‡ä»£ç çš„é‡è¦å·¥å…·ï¼šè„šæœ¬å’Œé¡¹ç›®ã€‚\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ ä¸€ç›´åœ¨ä½¿ç”¨æ§åˆ¶å°æ¥è¿è¡Œä»£ç ã€‚ è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ï¼Œä½†å½“ä½ åˆ›å»ºæ›´å¤æ‚çš„ ggplot2 å›¾å½¢å’Œæ›´é•¿çš„ dplyr ç®¡é“æ—¶ï¼Œä½ ä¼šå‘ç°å®ƒå¾ˆå¿«å°±ä¼šå˜å¾—æ‹¥æŒ¤ä¸å ªã€‚ ä¸ºäº†ç»™è‡ªå·±æ›´å¤šçš„å·¥ä½œç©ºé—´ï¼Œè¯·ä½¿ç”¨è„šæœ¬ç¼–è¾‘å™¨ã€‚ é€šè¿‡ç‚¹å‡»æ–‡ä»¶ (File) èœå•ï¼Œé€‰æ‹©æ–°å»ºæ–‡ä»¶ (New File)ï¼Œç„¶åé€‰æ‹© R è„šæœ¬ (R script)ï¼Œæˆ–è€…ä½¿ç”¨é”®ç›˜å¿«æ·é”® Cmd/Ctrl + Shift + N æ¥æ‰“å¼€å®ƒã€‚ ç°åœ¨ä½ ä¼šçœ‹åˆ°å››ä¸ªçª—æ ¼ï¼Œå¦‚ FigureÂ 6.1 æ‰€ç¤ºã€‚ è„šæœ¬ç¼–è¾‘å™¨æ˜¯è¯•éªŒä»£ç çš„å¥½åœ°æ–¹ã€‚ å½“ä½ æƒ³ä¿®æ”¹æŸäº›ä¸œè¥¿æ—¶ï¼Œä½ ä¸å¿…é‡æ–°è¾“å…¥æ‰€æœ‰å†…å®¹ï¼Œåªéœ€ç¼–è¾‘è„šæœ¬å¹¶é‡æ–°è¿è¡Œå³å¯ã€‚ è€Œä¸”ï¼Œä¸€æ—¦ä½ ç¼–å†™äº†èƒ½å¤Ÿæ­£å¸¸å·¥ä½œå¹¶å®ç°ä½ æƒ³è¦çš„åŠŸèƒ½çš„ä»£ç ï¼Œä½ å°±å¯ä»¥å°†å…¶ä¿å­˜ä¸ºè„šæœ¬æ–‡ä»¶ï¼Œä»¥ä¾¿æ—¥åè½»æ¾è¿”å›ã€‚\nFigureÂ 6.1: æ‰“å¼€è„šæœ¬ç¼–è¾‘å™¨ä¼šåœ¨ IDE çš„å·¦ä¸Šæ–¹æ·»åŠ ä¸€ä¸ªæ–°çª—æ ¼ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>6</span>Â  <span class='chapter-title'>å·¥ä½œæµï¼šè„šæœ¬å’Œé¡¹ç›®</span>"
    ]
  },
  {
    "objectID": "workflow-scripts.html#è„šæœ¬",
    "href": "workflow-scripts.html#è„šæœ¬",
    "title": "6Â  å·¥ä½œæµï¼šè„šæœ¬å’Œé¡¹ç›®",
    "section": "",
    "text": "6.1.1 è¿è¡Œä»£ç \nè„šæœ¬ç¼–è¾‘å™¨æ˜¯æ„å»ºå¤æ‚ ggplot2 å›¾æˆ–é•¿åºåˆ— dplyr æ“ä½œçš„ç»ä½³åœºæ‰€ã€‚ æœ‰æ•ˆä½¿ç”¨è„šæœ¬ç¼–è¾‘å™¨çš„å…³é”®æ˜¯è®°ä½ä¸€ä¸ªæœ€é‡è¦çš„é”®ç›˜å¿«æ·é”®ï¼šCmd/Ctrl + Enterã€‚ è¿™ä¸ªå¿«æ·é”®ä¼šåœ¨æ§åˆ¶å°ä¸­æ‰§è¡Œå½“å‰çš„ R è¡¨è¾¾å¼ã€‚ ä¾‹å¦‚ï¼Œçœ‹ä¸‹é¢çš„ä»£ç ã€‚\n\nlibrary(dplyr)\nlibrary(nycflights13)\n\nnot_cancelled &lt;- flights |&gt; \n  filter(!is.na(dep_delay)â–ˆ, !is.na(arr_delay))\n\nnot_cancelled |&gt; \n  group_by(year, month, day) |&gt; \n  summarize(mean = mean(dep_delay))\n\nå¦‚æœä½ çš„å…‰æ ‡åœ¨ â–ˆ å¤„ï¼ŒæŒ‰ä¸‹ Cmd/Ctrl + Enter å°†ä¼šè¿è¡Œç”Ÿæˆ not_cancelled çš„å®Œæ•´å‘½ä»¤ã€‚ å®ƒè¿˜ä¼šå°†å…‰æ ‡ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªè¯­å¥ï¼ˆä»¥ not_cancelled |&gt; å¼€å¤´ï¼‰ã€‚ è¿™ä½¿å¾—é€šè¿‡é‡å¤æŒ‰ Cmd/Ctrl + Enter æ¥é€æ­¥æ‰§è¡Œä½ çš„å®Œæ•´è„šæœ¬å˜å¾—å®¹æ˜“ã€‚\né™¤äº†é€ä¸ªè¡¨è¾¾å¼è¿è¡Œä»£ç å¤–ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨ Cmd/Ctrl + Shift + S ä¸€æ­¥æ‰§è¡Œæ•´ä¸ªè„šæœ¬ã€‚ å®šæœŸè¿™æ ·åšæ˜¯ç¡®ä¿ä½ å·²å°†ä»£ç çš„æ‰€æœ‰é‡è¦éƒ¨åˆ†éƒ½ä¿å­˜åœ¨è„šæœ¬ä¸­çš„å¥½æ–¹æ³•ã€‚\næˆ‘ä»¬å»ºè®®ä½ å§‹ç»ˆä»¥æ‰€éœ€çš„åŒ…å¼€å§‹ä½ çš„è„šæœ¬ã€‚ è¿™æ ·ï¼Œå¦‚æœä½ ä¸ä»–äººå…±äº«ä»£ç ï¼Œä»–ä»¬å¯ä»¥è½»æ¾çœ‹åˆ°éœ€è¦å®‰è£…å“ªäº›åŒ…ã€‚ ä½†è¯·æ³¨æ„ï¼Œä½ æ°¸è¿œä¸åº”è¯¥åœ¨ä½ å…±äº«çš„è„šæœ¬ä¸­åŒ…å« install.packages()ã€‚ å¦‚æœåˆ«äººä¸å°å¿ƒï¼Œä½ é€’ç»™ä»–ä»¬çš„è„šæœ¬å¯èƒ½ä¼šåœ¨ä»–ä»¬çš„è®¡ç®—æœºä¸Šæ”¹å˜æŸäº›ä¸œè¥¿ï¼Œè¿™æ˜¯ä¸ä½“è´´çš„ï¼\nåœ¨å­¦ä¹ åç»­ç« èŠ‚æ—¶ï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®ä»è„šæœ¬ç¼–è¾‘å™¨å¼€å§‹ï¼Œå¹¶ç»ƒä¹ ä½ çš„é”®ç›˜å¿«æ·é”®ã€‚ éšç€æ—¶é—´çš„æ¨ç§»ï¼Œä»¥è¿™ç§æ–¹å¼å‘æ§åˆ¶å°å‘é€ä»£ç å°†å˜å¾—å¦‚æ­¤è‡ªç„¶ï¼Œä»¥è‡³äºä½ ç”šè‡³ä¸ä¼šå»æƒ³å®ƒã€‚\n\n6.1.2 RStudio è¯Šæ–­åŠŸèƒ½\nåœ¨è„šæœ¬ç¼–è¾‘å™¨ä¸­ï¼ŒRStudio ä¼šç”¨çº¢è‰²æ³¢æµªçº¿å’Œä¾§è¾¹æ ä¸­çš„å‰å·é«˜äº®æ˜¾ç¤ºè¯­æ³•é”™è¯¯ï¼š\n\n\n\n\n\n\n\n\nå°†é¼ æ ‡æ‚¬åœåœ¨å‰å·ä¸Šå¯ä»¥çœ‹åˆ°é—®é¢˜æ‰€åœ¨ï¼š\n\n\n\n\n\n\n\n\nRStudio ä¹Ÿä¼šæç¤ºä½ æ½œåœ¨çš„é—®é¢˜ï¼š\n\n\n\n\n\n\n\n\n\n6.1.3 ä¿å­˜ä¸å‘½å\nå½“ä½ é€€å‡º RStudio æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨ä¿å­˜è„šæœ¬ç¼–è¾‘å™¨çš„å†…å®¹ï¼Œå¹¶åœ¨ä½ é‡æ–°æ‰“å¼€æ—¶è‡ªåŠ¨é‡æ–°åŠ è½½ã€‚ å°½ç®¡å¦‚æ­¤ï¼Œæœ€å¥½è¿˜æ˜¯é¿å…ä½¿ç”¨ Untitled1ã€Untitled2ã€Untitled3 ç­‰åç§°ï¼Œè€Œæ˜¯ä¿å­˜ä½ çš„è„šæœ¬å¹¶ç»™å®ƒä»¬èµ·ä¸€äº›ä¿¡æ¯ä¸°å¯Œçš„åå­—ã€‚\nä½ å¯èƒ½ä¼šæƒ³æŠŠæ–‡ä»¶å‘½åä¸º code.R æˆ– myscript.Rï¼Œä½†åœ¨ä¸ºæ–‡ä»¶é€‰æ‹©åç§°ä¹‹å‰ï¼Œä½ åº”è¯¥å†å¤šè€ƒè™‘ä¸€ä¸‹ã€‚ æ–‡ä»¶å‘½åçš„ä¸‰ä¸ªé‡è¦åŸåˆ™å¦‚ä¸‹ï¼š\n\næ–‡ä»¶ååº”è¯¥æ˜¯æœºå™¨å¯è¯»çš„ï¼šé¿å…ä½¿ç”¨ç©ºæ ¼ã€ç¬¦å·å’Œç‰¹æ®Šå­—ç¬¦ã€‚ä¸è¦ä¾èµ–å¤§å°å†™æ¥åŒºåˆ†æ–‡ä»¶ã€‚\næ–‡ä»¶ååº”è¯¥æ˜¯äººç±»å¯è¯»çš„ï¼šä½¿ç”¨æ–‡ä»¶åæ¥æè¿°æ–‡ä»¶å†…å®¹ã€‚\næ–‡ä»¶ååº”è¯¥ä¸é»˜è®¤æ’åºæ–¹å¼è‰¯å¥½é…åˆï¼šä»¥æ•°å­—å¼€å¤´çš„æ–‡ä»¶åå¯ä»¥ä½¿å®ƒä»¬æŒ‰å­—æ¯é¡ºåºæ’åºæ—¶ï¼Œä¹ŸæŒ‰ä½¿ç”¨é¡ºåºæ’åˆ—ã€‚\n\nä¾‹å¦‚ï¼Œå‡è®¾ä½ çš„é¡¹ç›®æ–‡ä»¶å¤¹ä¸­æœ‰ä»¥ä¸‹æ–‡ä»¶ã€‚\nalternative model.R\ncode for exploratory analysis.r\nfinalreport.qmd\nFinalReport.qmd\nfig 1.png\nFigure_02.png\nmodel_first_try.R\nrun-first.r\ntemp.txt\nè¿™é‡Œå­˜åœ¨å„ç§é—®é¢˜ï¼šå¾ˆéš¾æ‰¾åˆ°é¦–å…ˆè¦è¿è¡Œå“ªä¸ªæ–‡ä»¶ï¼Œæ–‡ä»¶ååŒ…å«ç©ºæ ¼ï¼Œæœ‰ä¸¤ä¸ªåŒåä½†å¤§å°å†™ä¸åŒçš„æ–‡ä»¶ï¼ˆfinalreport vs.Â FinalReport1ï¼‰ï¼Œè¿˜æœ‰ä¸€äº›æ–‡ä»¶åæ²¡æœ‰æè¿°å…¶å†…å®¹ï¼ˆrun-first å’Œ tempï¼‰ã€‚\nä»¥ä¸‹æ˜¯å‘½åå’Œç»„ç»‡åŒä¸€ç»„æ–‡ä»¶çš„æ›´å¥½æ–¹å¼ï¼š\n01-load-data.R\n02-exploratory-analysis.R\n03-model-approach-1.R\n04-model-approach-2.R\nfig-01.png\nfig-02.png\nreport-2022-03-20.qmd\nreport-2022-04-02.qmd\nreport-draft-notes.txt\nä¸ºå…³é”®è„šæœ¬ç¼–å·ä½¿å¾—è¿è¡Œé¡ºåºä¸€ç›®äº†ç„¶ï¼Œè€Œä¸€è‡´çš„å‘½åæ–¹æ¡ˆä¹Ÿæ›´å®¹æ˜“çœ‹å‡ºå˜åŒ–ä¹‹å¤„ã€‚ æ­¤å¤–ï¼Œå›¾å½¢çš„æ ‡ç­¾ä¹Ÿç±»ä¼¼ï¼ŒæŠ¥å‘Šé€šè¿‡æ–‡ä»¶åä¸­åŒ…å«çš„æ—¥æœŸæ¥åŒºåˆ†ï¼Œtempè¢«é‡å‘½åä¸º report-draft-notes ä»¥æ›´å¥½åœ°æè¿°å…¶å†…å®¹ã€‚ å¦‚æœä½ ä¸€ä¸ªç›®å½•ä¸­æœ‰å¾ˆå¤šæ–‡ä»¶ï¼Œå»ºè®®æ›´è¿›ä¸€æ­¥ï¼Œå°†ä¸åŒç±»å‹çš„æ–‡ä»¶ï¼ˆè„šæœ¬ã€å›¾å½¢ç­‰ï¼‰æ”¾åœ¨ä¸åŒçš„ç›®å½•ä¸­ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>6</span>Â  <span class='chapter-title'>å·¥ä½œæµï¼šè„šæœ¬å’Œé¡¹ç›®</span>"
    ]
  },
  {
    "objectID": "workflow-scripts.html#é¡¹ç›®",
    "href": "workflow-scripts.html#é¡¹ç›®",
    "title": "6Â  å·¥ä½œæµï¼šè„šæœ¬å’Œé¡¹ç›®",
    "section": "\n6.2 é¡¹ç›®",
    "text": "6.2 é¡¹ç›®\næ€»æœ‰ä¸€å¤©ï¼Œä½ éœ€è¦é€€å‡º Rï¼Œå»åšäº›åˆ«çš„äº‹æƒ…ï¼Œç„¶åå†å›æ¥ç»§ç»­ä½ çš„åˆ†æã€‚ æ€»æœ‰ä¸€å¤©ï¼Œä½ ä¼šåŒæ—¶è¿›è¡Œå¤šä¸ªåˆ†æï¼Œå¹¶ä¸”ä½ å¸Œæœ›å°†å®ƒä»¬åˆ†å¼€ã€‚ æ€»æœ‰ä¸€å¤©ï¼Œä½ éœ€è¦å°†å¤–éƒ¨ä¸–ç•Œçš„æ•°æ®å¯¼å…¥ Rï¼Œå¹¶å°†æ•°å€¼ç»“æœå’Œå›¾å½¢ä» R è¾“å‡ºåˆ°å¤–éƒ¨ä¸–ç•Œã€‚\nä¸ºäº†å¤„ç†è¿™äº›ç°å®ç”Ÿæ´»ä¸­çš„æƒ…å†µï¼Œä½ éœ€è¦åšå‡ºä¸¤ä¸ªå†³å®šï¼š\n\nä»€ä¹ˆæ˜¯äº‹å®çš„å”¯ä¸€æ¥æº (source of truth)ï¼Ÿ ä½ å°†ä¿å­˜ä»€ä¹ˆä½œä¸ºä½ æ‰€åšå·¥ä½œçš„æŒä¹…è®°å½•ï¼Ÿ\nä½ çš„åˆ†æå·¥ä½œå­˜æ”¾åœ¨å“ªé‡Œï¼Ÿ\n\n\n6.2.1 ä»€ä¹ˆæ˜¯äº‹å®çš„å”¯ä¸€æ¥æºï¼Ÿ\nä½œä¸ºåˆå­¦è€…ï¼Œä¾èµ–å½“å‰ç¯å¢ƒ (Environment) æ¥åŒ…å«ä½ åœ¨æ•´ä¸ªåˆ†æè¿‡ç¨‹ä¸­åˆ›å»ºçš„æ‰€æœ‰å¯¹è±¡æ˜¯å¯ä»¥çš„ã€‚ ç„¶è€Œï¼Œä¸ºäº†æ›´å®¹æ˜“åœ°å¤„ç†å¤§å‹é¡¹ç›®æˆ–ä¸ä»–äººåä½œï¼Œä½ çš„äº‹å®çš„å”¯ä¸€æ¥æºåº”è¯¥æ˜¯ R è„šæœ¬ã€‚ æœ‰äº†ä½ çš„ R è„šæœ¬ï¼ˆå’Œä½ çš„æ•°æ®æ–‡ä»¶ï¼‰ï¼Œä½ å°±å¯ä»¥é‡ç°ç¯å¢ƒã€‚ è€Œåªæœ‰ä½ çš„ç¯å¢ƒï¼Œè¦é‡ç°ä½ çš„ R è„šæœ¬å°±å›°éš¾å¾—å¤šï¼šä½ è¦ä¹ˆå¾—å‡­è®°å¿†é‡æ–°è¾“å…¥å¤§é‡ä»£ç ï¼ˆä¸å¯é¿å…åœ°ä¼šå‡ºé”™ï¼‰ï¼Œè¦ä¹ˆå°±å¾—ä»”ç»†æŒ–æ˜ä½ çš„ R å†å²è®°å½•ã€‚\nä¸ºäº†å¸®åŠ©ä½ å°† R è„šæœ¬ä½œä¸ºåˆ†æçš„äº‹å®çš„å”¯ä¸€æ¥æºï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½ è®¾ç½® RStudio åœ¨ä¼šè¯ä¹‹é—´ä¸ä¿å­˜ä½ çš„å·¥ä½œåŒºã€‚ ä½ å¯ä»¥é€šè¿‡è¿è¡Œ usethis::use_blank_slate()2 æˆ–æ¨¡ä»¿ FigureÂ 6.2 ä¸­æ˜¾ç¤ºçš„é€‰é¡¹æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚è¿™ä¼šç»™ä½ å¸¦æ¥ä¸€äº›çŸ­æœŸçš„ç—›è‹¦ï¼Œå› ä¸ºç°åœ¨å½“ä½ é‡å¯ RStudio æ—¶ï¼Œå®ƒå°†ä¸å†è®°å¾—ä½ ä¸Šæ¬¡è¿è¡Œçš„ä»£ç ï¼Œä½ åˆ›å»ºçš„å¯¹è±¡æˆ–è¯»å–çš„æ•°æ®é›†ä¹Ÿæ— æ³•ä½¿ç”¨ã€‚ ä½†æ˜¯è¿™ç§çŸ­æœŸçš„ç—›è‹¦å¯ä»¥è®©ä½ å…äºé•¿æœŸçš„æŠ˜ç£¨ï¼Œå› ä¸ºå®ƒè¿«ä½¿ä½ å°†æ‰€æœ‰é‡è¦çš„è¿‡ç¨‹éƒ½è®°å½•åœ¨ä½ çš„ä»£ç ä¸­ã€‚ æ²¡æœ‰ä»€ä¹ˆæ¯”åœ¨ä¸‰ä¸ªæœˆåå‘ç°ä½ åªæŠŠä¸€ä¸ªé‡è¦è®¡ç®—çš„ç»“æœä¿å­˜åœ¨ä½ çš„ç¯å¢ƒä¸­ï¼Œè€Œä¸æ˜¯æŠŠè®¡ç®—æœ¬èº«ä¿å­˜åœ¨ä½ çš„ä»£ç ä¸­æ›´ç³Ÿç³•çš„äº†ã€‚\n\n\n\n\n\n\n\nFigureÂ 6.2: åœ¨ä½ çš„ RStudio é€‰é¡¹ä¸­å¤åˆ¶è¿™äº›è®¾ç½®ï¼Œä»¥ä¾¿æ€»æ˜¯ä»¥ä¸€ä¸ªå…¨æ–°çš„çŠ¶æ€å¼€å§‹ä½ çš„ RStudio ä¼šè¯ã€‚\n\n\n\n\næœ‰ä¸€å¯¹å¾ˆæ£’çš„é”®ç›˜å¿«æ·é”®å¯ä»¥ååŒå·¥ä½œï¼Œç¡®ä¿ä½ å·²ç»å°†ä»£ç çš„é‡è¦éƒ¨åˆ†ä¿å­˜åœ¨ç¼–è¾‘å™¨ä¸­ï¼š\n\næŒ‰ Cmd/Ctrl + Shift + 0/F10 é‡å¯ Rã€‚\næŒ‰ Cmd/Ctrl + Shift + S é‡æ–°è¿è¡Œå½“å‰è„šæœ¬ã€‚\n\næˆ‘ä»¬æ¯å‘¨ä¼šé›†ä½“ä½¿ç”¨è¿™ä¸ªæ¨¡å¼æ•°ç™¾æ¬¡ã€‚\nå¦å¤–ï¼Œå¦‚æœä½ ä¸ä½¿ç”¨é”®ç›˜å¿«æ·é”®ï¼Œä½ å¯ä»¥å»èœå•æ çš„ Session &gt; Restart Rï¼Œç„¶åé«˜äº®å¹¶é‡æ–°è¿è¡Œä½ å½“å‰çš„è„šæœ¬ã€‚\n\n\n\n\n\n\nRStudio Server\n\n\n\nå¦‚æœä½ æ­£åœ¨ä½¿ç”¨ RStudio Serverï¼Œä½ çš„ R ä¼šè¯é»˜è®¤æ˜¯æ°¸è¿œä¸ä¼šé‡å¯çš„ã€‚ å½“ä½ å…³é—­ä½ çš„ RStudio Server æ ‡ç­¾é¡µæ—¶ï¼Œå¯èƒ½æ„Ÿè§‰åƒæ˜¯åœ¨å…³é—­ Rï¼Œä½†æœåŠ¡å™¨å®é™…ä¸Šåœ¨åå°ä¿æŒå®ƒçš„è¿è¡Œã€‚ ä¸‹æ¬¡ä½ å›æ¥æ—¶ï¼Œä½ å°†å›åˆ°ä½ ç¦»å¼€æ—¶çš„ç¡®åˆ‡ä½ç½®ã€‚ è¿™ä½¿å¾—å®šæœŸé‡å¯ R ä»¥ä¾¿ä»ä¸€ä¸ªå¹²å‡€çš„çŠ¶æ€å¼€å§‹å˜å¾—æ›´åŠ é‡è¦ã€‚\n\n\n\n6.2.2 ä½ çš„åˆ†æå·¥ä½œå­˜æ”¾åœ¨å“ªé‡Œï¼Ÿ\nR æœ‰ä¸€ä¸ªå¼ºå¤§çš„æ¦‚å¿µï¼Œå«åšå·¥ä½œç›®å½• (working directory)ã€‚ è¿™æ˜¯ R å¯»æ‰¾ä½ è¦æ±‚å®ƒåŠ è½½çš„æ–‡ä»¶çš„ä½ç½®ï¼Œä¹Ÿæ˜¯å®ƒå­˜æ”¾ä½ è¦æ±‚å®ƒä¿å­˜çš„ä»»ä½•æ–‡ä»¶çš„ä½ç½®ã€‚ RStudio åœ¨æ§åˆ¶å°çš„é¡¶éƒ¨æ˜¾ç¤ºä½ å½“å‰çš„å·¥ä½œç›®å½•ï¼š\n\n\n\n\n\n\n\n\nä½ ä¹Ÿå¯ä»¥é€šè¿‡è¿è¡Œ getwd() åœ¨ R ä»£ç ä¸­æ‰“å°å‡ºè¿™ä¸ªè·¯å¾„ï¼š\n\ngetwd()\n#&gt; [1] \"/Users/hadley/Documents/r4ds\"\n\nåœ¨è¿™ä¸ª R ä¼šè¯ä¸­ï¼Œå½“å‰çš„å·¥ä½œç›®å½•ï¼ˆå¯ä»¥æŠŠå®ƒæƒ³è±¡æˆâ€œå®¶â€ï¼‰åœ¨ hadley çš„ Documents æ–‡ä»¶å¤¹ä¸‹çš„ä¸€ä¸ªåä¸º r4ds çš„å­æ–‡ä»¶å¤¹ä¸­ã€‚ å½“ä½ è¿è¡Œè¿™æ®µä»£ç æ—¶ï¼Œä¼šè¿”å›ä¸€ä¸ªä¸åŒçš„ç»“æœï¼Œå› ä¸ºä½ çš„è®¡ç®—æœºæœ‰ä¸ Hadley ä¸åŒçš„ç›®å½•ç»“æ„ï¼\nä½œä¸º R çš„åˆå­¦è€…ï¼Œè®©ä½ çš„å·¥ä½œç›®å½•æ˜¯ä½ çš„ä¸»ç›®å½•ã€æ–‡æ¡£ç›®å½•æˆ–ä½ ç”µè„‘ä¸Šä»»ä½•å…¶ä»–å¥‡æ€ªçš„ç›®å½•éƒ½æ˜¯å¯ä»¥çš„ã€‚ ä½†ä½ å·²ç»è¯»äº†è¿™æœ¬ä¹¦å¥½å‡ ç« äº†ï¼Œä½ ä¸å†æ˜¯åˆå­¦è€…äº†ã€‚ å¾ˆå¿«ä½ å°±åº”è¯¥è¿›åŒ–åˆ°å°†ä½ çš„é¡¹ç›®ç»„ç»‡åˆ°ç›®å½•ä¸­ï¼Œå¹¶ä¸”åœ¨å¤„ç†ä¸€ä¸ªé¡¹ç›®æ—¶ï¼Œå°† R çš„å·¥ä½œç›®å½•è®¾ç½®åˆ°ç›¸å…³çš„ç›®å½•ã€‚\nä½ å¯ä»¥åœ¨ R å†…éƒ¨è®¾ç½®å·¥ä½œç›®å½•ï¼Œä½†æˆ‘ä»¬ä¸æ¨èè¿™æ ·åšï¼š\n\nsetwd(\"/path/to/my/CoolProject\")\n\næœ‰ä¸€ä¸ªæ›´å¥½çš„æ–¹æ³•ï¼›ä¸€ä¸ªä¹Ÿèƒ½è®©ä½ èµ°ä¸Šåƒä¸“å®¶ä¸€æ ·ç®¡ç†ä½ çš„ R å·¥ä½œä¹‹è·¯çš„æ–¹æ³•ã€‚ è¿™ä¸ªæ–¹æ³•å°±æ˜¯ RStudio é¡¹ç›®ã€‚\n\n6.2.3 RStudio é¡¹ç›®\nå°†ä¸æŸä¸ªç‰¹å®šé¡¹ç›®ç›¸å…³çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆè¾“å…¥æ•°æ®ã€R è„šæœ¬ã€åˆ†æç»“æœå’Œå›¾è¡¨ï¼‰éƒ½æ”¾åœ¨ä¸€ä¸ªç›®å½•ä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æ˜æ™ºå’Œæ™®éçš„åšæ³•ï¼Œä»¥è‡³äº RStudio é€šè¿‡é¡¹ç›® (projects) å†…ç½®äº†å¯¹æ­¤çš„æ”¯æŒã€‚ è®©æˆ‘ä»¬ä¸ºä½ åˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œä»¥ä¾¿ä½ åœ¨å­¦ä¹ æœ¬ä¹¦ä½™ä¸‹éƒ¨åˆ†æ—¶ä½¿ç”¨ã€‚ ç‚¹å‡» File &gt; New Projectï¼Œç„¶åæŒ‰ç…§ FigureÂ 6.3 ä¸­æ˜¾ç¤ºçš„æ­¥éª¤æ“ä½œã€‚\n\n\n\n\n\n\n\nFigureÂ 6.3: åˆ›å»ºæ–°é¡¹ç›®ï¼š(ä¸Š) é¦–å…ˆç‚¹å‡»æ–°ç›®å½• (New Directory)ï¼Œç„¶å (ä¸­) ç‚¹å‡»æ–°é¡¹ç›® (New Project)ï¼Œæœ€å (ä¸‹) å¡«å†™ç›®å½•ï¼ˆé¡¹ç›®ï¼‰åç§°ï¼Œ ä¸ºå…¶é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„å­ç›®å½•ä½œä¸ºå…¶ä¸»ç›®å½•ï¼Œç„¶åç‚¹å‡»åˆ›å»ºé¡¹ç›® (Create Project)ã€‚\n\n\n\n\nå°†ä½ çš„é¡¹ç›®å‘½åä¸º r4dsï¼Œå¹¶ä»”ç»†è€ƒè™‘ä½ å°†é¡¹ç›®æ”¾åœ¨å“ªä¸ªå­ç›®å½•ä¸­ã€‚ å¦‚æœä½ ä¸æŠŠå®ƒå­˜æ”¾åœ¨æŸä¸ªåˆç†çš„åœ°æ–¹ï¼Œå°†æ¥ä¼šå¾ˆéš¾æ‰¾åˆ°å®ƒï¼\nè¿™ä¸ªè¿‡ç¨‹å®Œæˆåï¼Œä½ å°†ä¸ºè¿™æœ¬ä¹¦å¾—åˆ°ä¸€ä¸ªæ–°çš„ RStudio é¡¹ç›®ã€‚ æ£€æŸ¥ä¸€ä¸‹ä½ çš„é¡¹ç›®çš„â€œå®¶â€æ˜¯å¦å°±æ˜¯å½“å‰çš„å·¥ä½œç›®å½•ï¼š\n\ngetwd()\n#&gt; [1] /Users/hadley/Documents/r4ds\n\nç°åœ¨åœ¨è„šæœ¬ç¼–è¾‘å™¨ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œå¹¶å°†æ–‡ä»¶ä¿å­˜ä¸º â€œdiamonds.Râ€ã€‚ ç„¶åï¼Œåˆ›å»ºä¸€ä¸ªåä¸º â€œdataâ€ çš„æ–°æ–‡ä»¶å¤¹ã€‚ ä½ å¯ä»¥é€šè¿‡ç‚¹å‡» RStudio ä¸­æ–‡ä»¶çª—æ ¼çš„â€œæ–°å»ºæ–‡ä»¶å¤¹â€æŒ‰é’®æ¥å®Œæˆæ­¤æ“ä½œã€‚ æœ€åï¼Œè¿è¡Œæ•´ä¸ªè„šæœ¬ï¼Œè¿™ä¼šå°†ä¸€ä¸ª PNG å’Œä¸€ä¸ª CSV æ–‡ä»¶ä¿å­˜åˆ°ä½ çš„é¡¹ç›®ç›®å½•ä¸­ã€‚ ä¸ç”¨æ‹…å¿ƒç»†èŠ‚ï¼Œä½ å°†åœ¨æœ¬ä¹¦çš„åé¢å­¦åˆ°å®ƒä»¬ã€‚\n\nlibrary(tidyverse)\n\nggplot(diamonds, aes(x = carat, y = price)) + \n  geom_hex()\nggsave(\"diamonds.png\")\n\nwrite_csv(diamonds, \"data/diamonds.csv\")\n\né€€å‡º RStudioã€‚ æ£€æŸ¥ä¸ä½ çš„é¡¹ç›®å…³è”çš„æ–‡ä»¶å¤¹ â€”â€” æ³¨æ„é‚£ä¸ª .Rproj æ–‡ä»¶ã€‚ åŒå‡»è¯¥æ–‡ä»¶ä»¥é‡æ–°æ‰“å¼€é¡¹ç›®ã€‚ ä½ ä¼šå‘ç°ä½ å›åˆ°äº†ä½ ç¦»å¼€çš„åœ°æ–¹ï¼šå·¥ä½œç›®å½•å’Œå‘½ä»¤å†å²éƒ½ä¸€æ ·ï¼Œä½ æ­£åœ¨å¤„ç†çš„æ‰€æœ‰æ–‡ä»¶ä¹Ÿä»ç„¶æ‰“å¼€ç€ã€‚ å› ä¸ºä½ éµå¾ªäº†æˆ‘ä»¬ä¸Šé¢çš„æŒ‡ç¤ºï¼Œä½ å°†ä¼šæœ‰ä¸€ä¸ªå…¨æ–°çš„ç¯å¢ƒï¼Œä¿è¯ä½ ä»ä¸€ä¸ªå¹²å‡€çš„çŠ¶æ€å¼€å§‹ã€‚\nç”¨ä½ å–œæ¬¢çš„æ“ä½œç³»ç»Ÿç‰¹æœ‰çš„æ–¹å¼ï¼Œåœ¨ä½ çš„ç”µè„‘ä¸Šæœç´¢ diamonds.pngï¼Œä½ ä¼šæ‰¾åˆ°è¿™ä¸ª PNG æ–‡ä»¶ï¼ˆä¸å¥‡æ€ªï¼‰ï¼Œä½†åŒæ—¶ä¹Ÿèƒ½æ‰¾åˆ°åˆ›å»ºå®ƒçš„è„šæœ¬ (diamonds.R)ã€‚ è¿™æ˜¯ä¸€ä¸ªå·¨å¤§çš„èƒœåˆ©ï¼ æ€»æœ‰ä¸€å¤©ï¼Œä½ ä¼šæƒ³è¦é‡åˆ¶ä¸€å¼ å›¾ï¼Œæˆ–è€…åªæ˜¯æƒ³äº†è§£å®ƒæ˜¯ä»å“ªé‡Œæ¥çš„ã€‚ å¦‚æœä½ ä¸¥æ ¼åœ°ç”¨ R ä»£ç å°†å›¾è¡¨ä¿å­˜åˆ°æ–‡ä»¶ï¼Œè€Œä¸æ˜¯ç”¨é¼ æ ‡æˆ–å‰ªè´´æ¿ï¼Œä½ å°†èƒ½å¤Ÿè½»æ¾åœ°é‡ç°ä»¥å‰çš„å·¥ä½œï¼\n\n6.2.4 ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„\nä¸€æ—¦ä½ è¿›å…¥ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œä½ åº”è¯¥åªä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œè€Œä¸æ˜¯ç»å¯¹è·¯å¾„ã€‚ æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ ç›¸å¯¹è·¯å¾„æ˜¯ç›¸å¯¹äºå·¥ä½œç›®å½•çš„ï¼Œä¹Ÿå°±æ˜¯é¡¹ç›®çš„ä¸»ç›®å½•ã€‚ å½“ Hadley åœ¨ä¸Šé¢å†™ data/diamonds.csv æ—¶ï¼Œå®ƒæ˜¯ /Users/hadley/Documents/r4ds/data/diamonds.csv çš„ä¸€ä¸ªå¿«æ·æ–¹å¼ã€‚ ä½†é‡è¦çš„æ˜¯ï¼Œå¦‚æœ Mine åœ¨å¥¹çš„ç”µè„‘ä¸Šè¿è¡Œè¿™æ®µä»£ç ï¼Œå®ƒä¼šæŒ‡å‘ /Users/Mine/Documents/r4ds/data/diamonds.csvã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç›¸å¯¹è·¯å¾„å¾ˆé‡è¦ï¼šæ— è®º R é¡¹ç›®æ–‡ä»¶å¤¹æœ€ç»ˆåœ¨å“ªé‡Œï¼Œå®ƒä»¬éƒ½èƒ½å·¥ä½œã€‚\nç»å¯¹è·¯å¾„æ— è®ºä½ çš„å·¥ä½œç›®å½•åœ¨å“ªé‡Œï¼Œéƒ½æŒ‡å‘åŒä¸€ä¸ªåœ°æ–¹ã€‚ å®ƒä»¬æ ¹æ®ä½ çš„æ“ä½œç³»ç»Ÿçœ‹èµ·æ¥æœ‰ç‚¹ä¸åŒã€‚ åœ¨ Windows ä¸Šï¼Œå®ƒä»¬ä»¥ä¸€ä¸ªé©±åŠ¨å™¨å­—æ¯ï¼ˆä¾‹å¦‚ï¼ŒC:ï¼‰æˆ–ä¸¤ä¸ªåæ–œæ ï¼ˆä¾‹å¦‚ï¼Œ\\\\servernameï¼‰å¼€å¤´ï¼Œè€Œåœ¨ Mac/Linux ä¸Šï¼Œå®ƒä»¬ä»¥ä¸€ä¸ªæ–œæ  â€œ/â€ å¼€å¤´ï¼ˆä¾‹å¦‚ï¼Œ/users/hadleyï¼‰ã€‚ ä½ æ°¸è¿œä¸åº”è¯¥åœ¨ä½ çš„è„šæœ¬ä¸­ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œå› ä¸ºå®ƒä»¬å¦¨ç¢äº†å…±äº«ï¼šæ²¡æœ‰å…¶ä»–äººä¼šæœ‰å’Œä½ å®Œå…¨ç›¸åŒçš„ç›®å½•é…ç½®ã€‚\næ“ä½œç³»ç»Ÿä¹‹é—´è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„åŒºåˆ«ï¼šä½ å¦‚ä½•åˆ†éš”è·¯å¾„çš„ç»„ä»¶ã€‚ Mac å’Œ Linux ä½¿ç”¨æ–œæ ï¼ˆä¾‹å¦‚ data/diamonds.csvï¼‰ï¼Œè€Œ Windows ä½¿ç”¨åæ–œæ ï¼ˆä¾‹å¦‚ data\\diamonds.csvï¼‰ã€‚ R å¯ä»¥å¤„ç†ä»»ä½•ä¸€ç§ç±»å‹ï¼ˆæ— è®ºä½ å½“å‰ä½¿ç”¨çš„æ˜¯å“ªä¸ªå¹³å°ï¼‰ï¼Œä½†ä¸å¹¸çš„æ˜¯ï¼Œåæ–œæ å¯¹ R æ¥è¯´æœ‰ç‰¹æ®Šçš„å«ä¹‰ï¼Œè¦åœ¨è·¯å¾„ä¸­å¾—åˆ°ä¸€ä¸ªåæ–œæ ï¼Œä½ éœ€è¦è¾“å…¥ä¸¤ä¸ªåæ–œæ ï¼ è¿™è®©ç”Ÿæ´»å˜å¾—å¾ˆçƒ¦æ¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å»ºè®®æ€»æ˜¯ä½¿ç”¨ Linux/Mac é£æ ¼çš„æ­£æ–œæ ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>6</span>Â  <span class='chapter-title'>å·¥ä½œæµï¼šè„šæœ¬å’Œé¡¹ç›®</span>"
    ]
  },
  {
    "objectID": "workflow-scripts.html#ç»ƒä¹ ",
    "href": "workflow-scripts.html#ç»ƒä¹ ",
    "title": "6Â  å·¥ä½œæµï¼šè„šæœ¬å’Œé¡¹ç›®",
    "section": "\n6.3 ç»ƒä¹ ",
    "text": "6.3 ç»ƒä¹ \n\nè®¿é—® RStudio Tips çš„ Twitter è´¦æˆ· https://twitter.com/rstudiotipsï¼Œæ‰¾åˆ°ä¸€æ¡ä½ è§‰å¾—æœ‰è¶£çš„æŠ€å·§ã€‚ ç»ƒä¹ ä½¿ç”¨å®ƒï¼\nRStudio çš„è¯Šæ–­åŠŸèƒ½è¿˜ä¼šæŠ¥å‘Šå“ªäº›å…¶ä»–å¸¸è§çš„é”™è¯¯ï¼Ÿ é˜…è¯» https://support.posit.co/hc/en-us/articles/205753617-Code-Diagnostics æ¥æ‰¾å‡ºç­”æ¡ˆã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>6</span>Â  <span class='chapter-title'>å·¥ä½œæµï¼šè„šæœ¬å’Œé¡¹ç›®</span>"
    ]
  },
  {
    "objectID": "workflow-scripts.html#æ€»ç»“",
    "href": "workflow-scripts.html#æ€»ç»“",
    "title": "6Â  å·¥ä½œæµï¼šè„šæœ¬å’Œé¡¹ç›®",
    "section": "\n6.4 æ€»ç»“",
    "text": "6.4 æ€»ç»“\nåœ¨æœ¬ç« ä¸­ï¼Œä½ å­¦ä¼šäº†å¦‚ä½•å°†ä½ çš„ R ä»£ç ç»„ç»‡åœ¨è„šæœ¬ï¼ˆæ–‡ä»¶ï¼‰å’Œé¡¹ç›®ï¼ˆç›®å½•ï¼‰ä¸­ã€‚ å°±åƒä»£ç é£æ ¼ä¸€æ ·ï¼Œè¿™èµ·åˆå¯èƒ½æ„Ÿè§‰åƒæ˜¯ç¹ççš„å·¥ä½œã€‚ ä½†éšç€ä½ åœ¨å¤šä¸ªé¡¹ç›®ä¸­ç§¯ç´¯äº†è¶Šæ¥è¶Šå¤šçš„ä»£ç ï¼Œä½ å°†å­¦ä¼šæ¬£èµä¸€ç‚¹ç‚¹å‰æœŸçš„ç»„ç»‡å·¥ä½œèƒ½åœ¨æœªæ¥ä¸ºä½ èŠ‚çœå¤§é‡æ—¶é—´ã€‚\næ€»è€Œè¨€ä¹‹ï¼Œè„šæœ¬å’Œé¡¹ç›®ä¸ºä½ æä¾›äº†ä¸€ä¸ªåšå®çš„å·¥ä½œæµï¼Œå°†åœ¨æœªæ¥ä¸ºä½ å¸¦æ¥å¾ˆå¥½çš„æœåŠ¡ï¼š\n\nä¸ºæ¯ä¸ªæ•°æ®åˆ†æé¡¹ç›®åˆ›å»ºä¸€ä¸ª RStudio é¡¹ç›®ã€‚\nå°†ä½ çš„è„šæœ¬ï¼ˆç”¨ä¿¡æ¯ä¸°å¯Œçš„åç§°ï¼‰ä¿å­˜åœ¨é¡¹ç›®ä¸­ï¼Œç¼–è¾‘å®ƒä»¬ï¼Œåˆ†éƒ¨åˆ†æˆ–æ•´ä½“è¿è¡Œå®ƒä»¬ã€‚é¢‘ç¹é‡å¯ R ä»¥ç¡®ä¿ä½ å·²ç»å°†æ‰€æœ‰å†…å®¹éƒ½ä¿å­˜åœ¨ä½ çš„è„šæœ¬ä¸­ã€‚\nåªä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œç»ä¸ä½¿ç”¨ç»å¯¹è·¯å¾„ã€‚\n\nè¿™æ ·ï¼Œä½ éœ€è¦çš„ä¸€åˆ‡éƒ½åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œå¹¶ä¸ä½ æ­£åœ¨è¿›è¡Œçš„æ‰€æœ‰å…¶ä»–é¡¹ç›®æ¸…æ™°åœ°åˆ†ç¦»å¼€æ¥ã€‚\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸€ç›´ä½¿ç”¨çš„æ˜¯ R åŒ…ä¸­æ†ç»‘çš„æ•°æ®é›†ã€‚ è¿™ä½¿å¾—åœ¨é¢„å…ˆå‡†å¤‡å¥½çš„æ•°æ®ä¸Šè¿›è¡Œä¸€äº›ç»ƒä¹ å˜å¾—æ›´å®¹æ˜“ï¼Œä½†æ˜¾ç„¶ä½ çš„æ•°æ®ä¸ä¼šä»¥è¿™ç§æ–¹å¼æä¾›ã€‚ å› æ­¤ï¼Œåœ¨ä¸‹ä¸€ç« ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨ readr åŒ…å°†æ•°æ®ä»ç£ç›˜åŠ è½½åˆ°ä½ çš„ R ä¼šè¯ä¸­ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>6</span>Â  <span class='chapter-title'>å·¥ä½œæµï¼šè„šæœ¬å’Œé¡¹ç›®</span>"
    ]
  },
  {
    "objectID": "workflow-scripts.html#footnotes",
    "href": "workflow-scripts.html#footnotes",
    "title": "6Â  å·¥ä½œæµï¼šè„šæœ¬å’Œé¡¹ç›®",
    "section": "",
    "text": "æ›´ä¸ç”¨è¯´ï¼Œä½ åœ¨æ–‡ä»¶åä¸­ä½¿ç”¨â€œfinalâ€è¿™ä¸ªè¯æ˜¯åœ¨æŒ‘æˆ˜å‘½è¿ ğŸ˜†ã€‚ã€ŠPiled Higher and Deeperã€‹è¿™æœ¬æ¼«ç”»å¯¹æ­¤æœ‰ä¸€ä¸ªæœ‰è¶£çš„æ¡æ¼«ã€‚â†©ï¸\nå¦‚æœä½ æ²¡æœ‰å®‰è£… usethisï¼Œå¯ä»¥ç”¨ install.packages(\"usethis\") æ¥å®‰è£…å®ƒã€‚â†©ï¸",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>6</span>Â  <span class='chapter-title'>å·¥ä½œæµï¼šè„šæœ¬å’Œé¡¹ç›®</span>"
    ]
  },
  {
    "objectID": "data-import.html",
    "href": "data-import.html",
    "title": "7Â  æ•°æ®å¯¼å…¥",
    "section": "",
    "text": "7.1 å¼•è¨€\nä½¿ç”¨ R åŒ…æä¾›çš„æ•°æ®æ˜¯å­¦ä¹ æ•°æ®ç§‘å­¦å·¥å…·çš„å¥½æ–¹æ³•ï¼Œä½†æ€»æœ‰ä¸€å¤©ï¼Œä½ ä¼šå¸Œæœ›å°†æ‰€å­¦çŸ¥è¯†åº”ç”¨åˆ°è‡ªå·±çš„æ•°æ®ä¸Šã€‚ åœ¨æœ¬ç« ä¸­ï¼Œä½ å°†å­¦ä¹ å°†æ•°æ®æ–‡ä»¶è¯»å…¥ R çš„åŸºç¡€çŸ¥è¯†ã€‚\nå…·ä½“æ¥è¯´ï¼Œæœ¬ç« å°†é‡ç‚¹ä»‹ç»å¦‚ä½•è¯»å–çº¯æ–‡æœ¬çŸ©å½¢æ–‡ä»¶ã€‚ æˆ‘ä»¬å°†ä»å¤„ç†åˆ—åã€ç±»å‹å’Œç¼ºå¤±æ•°æ®ç­‰ç‰¹æ€§çš„å®ç”¨å»ºè®®å¼€å§‹ã€‚ ç„¶åï¼Œä½ å°†å­¦ä¹ å¦‚ä½•ä¸€æ¬¡æ€§ä»å¤šä¸ªæ–‡ä»¶ä¸­è¯»å–æ•°æ®ï¼Œä»¥åŠå¦‚ä½•å°†æ•°æ®ä» R å†™å…¥æ–‡ä»¶ã€‚ æœ€åï¼Œä½ å°†å­¦ä¹ å¦‚ä½•åœ¨ R ä¸­æ‰‹åŠ¨åˆ›å»ºæ•°æ®æ¡†ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>7</span>Â  <span class='chapter-title'>æ•°æ®å¯¼å…¥</span>"
    ]
  },
  {
    "objectID": "data-import.html#å¼•è¨€",
    "href": "data-import.html#å¼•è¨€",
    "title": "7Â  æ•°æ®å¯¼å…¥",
    "section": "",
    "text": "7.1.1 å…ˆå†³æ¡ä»¶\nåœ¨æœ¬ç« ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨ readr åŒ…å°†çº¯æ–‡æœ¬æ–‡ä»¶åŠ è½½åˆ° R ä¸­ï¼Œè¯¥åŒ…æ˜¯æ ¸å¿ƒ tidyverse çš„ä¸€éƒ¨åˆ†ã€‚\n\nlibrary(tidyverse)",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>7</span>Â  <span class='chapter-title'>æ•°æ®å¯¼å…¥</span>"
    ]
  },
  {
    "objectID": "data-import.html#ä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®",
    "href": "data-import.html#ä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®",
    "title": "7Â  æ•°æ®å¯¼å…¥",
    "section": "\n7.2 ä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®",
    "text": "7.2 ä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®\né¦–å…ˆï¼Œæˆ‘ä»¬å°†é‡ç‚¹å…³æ³¨æœ€å¸¸è§çš„çŸ©å½¢æ•°æ®æ–‡ä»¶ç±»å‹ï¼šCSVï¼Œå³é€—å·åˆ†éš”å€¼ (comma-separated values) çš„ç¼©å†™ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ CSV æ–‡ä»¶çš„æ ·å­ã€‚ ç¬¬ä¸€è¡Œï¼Œé€šå¸¸ç§°ä¸ºæ ‡é¢˜è¡Œ (header row)ï¼Œç»™å‡ºäº†åˆ—åï¼Œæ¥ä¸‹æ¥çš„å…­è¡Œæä¾›äº†æ•°æ®ã€‚ è¿™äº›åˆ—ç”±é€—å·åˆ†éš”ï¼Œä¹Ÿç§°ä¸ºå®šç•Œ (delimited)ã€‚\n\nStudent ID,Full Name,favourite.food,mealPlan,AGE\n1,Sunil Huffmann,Strawberry yoghurt,Lunch only,4\n2,Barclay Lynn,French fries,Lunch only,5\n3,Jayendra Lyne,N/A,Breakfast and lunch,7\n4,Leon Rossini,Anchovies,Lunch only,\n5,Chidiegwu Dunkel,Pizza,Breakfast and lunch,five\n6,GÃ¼venÃ§ Attila,Ice cream,Lunch only,6\n\nTableÂ 7.1 ä»¥è¡¨æ ¼å½¢å¼å±•ç¤ºäº†ç›¸åŒçš„æ•°æ®ã€‚\n\n\n\nTableÂ 7.1: æ¥è‡ª students.csv æ–‡ä»¶çš„æ•°æ®è¡¨æ ¼ã€‚\n\n\n\n\n\n\n\n\n\n\n\nStudent ID\nFull Name\nfavourite.food\nmealPlan\nAGE\n\n\n\n1\nSunil Huffmann\nStrawberry yoghurt\nLunch only\n4\n\n\n2\nBarclay Lynn\nFrench fries\nLunch only\n5\n\n\n3\nJayendra Lyne\nN/A\nBreakfast and lunch\n7\n\n\n4\nLeon Rossini\nAnchovies\nLunch only\nNA\n\n\n5\nChidiegwu Dunkel\nPizza\nBreakfast and lunch\nfive\n\n\n6\nGÃ¼venÃ§ Attila\nIce cream\nLunch only\n6\n\n\n\n\n\n\n\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨ read_csv() å°†è¿™ä¸ªæ–‡ä»¶è¯»å…¥ Rã€‚ ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æœ€é‡è¦çš„ï¼šæ–‡ä»¶çš„è·¯å¾„ã€‚ ä½ å¯ä»¥å°†è·¯å¾„çœ‹ä½œæ˜¯æ–‡ä»¶çš„åœ°å€ï¼šæ–‡ä»¶åä¸º students.csvï¼Œå®ƒä½äº data æ–‡ä»¶å¤¹ä¸­ã€‚\n\nstudents &lt;- read_csv(\"data/students.csv\")\n#&gt; Rows: 6 Columns: 5\n#&gt; â”€â”€ Column specification â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n#&gt; Delimiter: \",\"\n#&gt; chr (4): Full Name, favourite.food, mealPlan, AGE\n#&gt; dbl (1): Student ID\n#&gt; \n#&gt; â„¹ Use `spec()` to retrieve the full column specification for this data.\n#&gt; â„¹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nå¦‚æœä½ çš„é¡¹ç›®ä¸­çš„ data æ–‡ä»¶å¤¹é‡Œæœ‰ students.csv æ–‡ä»¶ï¼Œä¸Šé¢çš„ä»£ç å°±èƒ½æ­£å¸¸å·¥ä½œã€‚ ä½ å¯ä»¥ä» https://pos.it/r4ds-students-csv ä¸‹è½½ students.csv æ–‡ä»¶ï¼Œæˆ–è€…ç”¨ä¸‹é¢çš„ä»£ç ç›´æ¥ä»é‚£ä¸ª URL è¯»å–å®ƒï¼š\n\nstudents &lt;- read_csv(\"https://pos.it/r4ds-students-csv\")\n\nå½“ä½ è¿è¡Œ read_csv() æ—¶ï¼Œå®ƒä¼šæ‰“å°ä¸€æ¡æ¶ˆæ¯ï¼Œå‘Šè¯‰ä½ æ•°æ®çš„è¡Œæ•°å’Œåˆ—æ•°ã€ä½¿ç”¨çš„åˆ†éš”ç¬¦ä»¥åŠåˆ—çš„è§„æ ¼ï¼ˆæŒ‰åˆ—æ‰€å«æ•°æ®ç±»å‹ç»„ç»‡çš„åˆ—åï¼‰ã€‚ å®ƒè¿˜ä¼šæ‰“å°ä¸€äº›å…³äºæ£€ç´¢å®Œæ•´åˆ—è§„æ ¼å’Œå¦‚ä½•é™é»˜æ­¤æ¶ˆæ¯çš„ä¿¡æ¯ã€‚ è¿™æ¡æ¶ˆæ¯æ˜¯ readr çš„ä¸€ä¸ªç»„æˆéƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†åœ¨ Section 7.3 ä¸­å†æ¬¡è®¨è®ºå®ƒã€‚\n\n7.2.1 å®ç”¨å»ºè®®\nä¸€æ—¦ä½ è¯»å…¥æ•°æ®ï¼Œç¬¬ä¸€æ­¥é€šå¸¸æ˜¯è¿›è¡ŒæŸç§æ–¹å¼çš„è½¬æ¢ï¼Œä»¥ä¾¿åœ¨åç»­åˆ†æä¸­æ›´å®¹æ˜“å¤„ç†ã€‚ è®©æˆ‘ä»¬å¸¦ç€è¿™ä¸ªæƒ³æ³•å†çœ‹ä¸€æ¬¡ students æ•°æ®ã€‚\n\nstudents\n#&gt; # A tibble: 6 Ã— 5\n#&gt;   `Student ID` `Full Name`      favourite.food     mealPlan            AGE  \n#&gt;          &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;chr&gt;               &lt;chr&gt;\n#&gt; 1            1 Sunil Huffmann   Strawberry yoghurt Lunch only          4    \n#&gt; 2            2 Barclay Lynn     French fries       Lunch only          5    \n#&gt; 3            3 Jayendra Lyne    N/A                Breakfast and lunch 7    \n#&gt; 4            4 Leon Rossini     Anchovies          Lunch only          &lt;NA&gt; \n#&gt; 5            5 Chidiegwu Dunkel Pizza              Breakfast and lunch five \n#&gt; 6            6 GÃ¼venÃ§ Attila    Ice cream          Lunch only          6\n\nåœ¨ favourite.food åˆ—ä¸­ï¼Œæœ‰ä¸€å †é£Ÿç‰©é¡¹ç›®ï¼Œç„¶åæ˜¯å­—ç¬¦ä¸² N/Aï¼Œè¿™æœ¬åº”æ˜¯ä¸€ä¸ªçœŸæ­£çš„ NAï¼ŒR ä¼šå°†å…¶è¯†åˆ«ä¸ºâ€œä¸å¯ç”¨â€(not available)ã€‚ è¿™æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ na å‚æ•°æ¥è§£å†³çš„é—®é¢˜ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œread_csv() åœ¨è¿™ä¸ªæ•°æ®é›†ä¸­åªè¯†åˆ«ç©ºå­—ç¬¦ä¸² (\"\") ä¸º NAï¼Œæˆ‘ä»¬å¸Œæœ›å®ƒä¹Ÿèƒ½è¯†åˆ«å­—ç¬¦ä¸² \"N/A\"ã€‚\n\nstudents &lt;- read_csv(\"data/students.csv\", na = c(\"N/A\", \"\"))\n\nstudents\n#&gt; # A tibble: 6 Ã— 5\n#&gt;   `Student ID` `Full Name`      favourite.food     mealPlan            AGE  \n#&gt;          &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;chr&gt;               &lt;chr&gt;\n#&gt; 1            1 Sunil Huffmann   Strawberry yoghurt Lunch only          4    \n#&gt; 2            2 Barclay Lynn     French fries       Lunch only          5    \n#&gt; 3            3 Jayendra Lyne    &lt;NA&gt;               Breakfast and lunch 7    \n#&gt; 4            4 Leon Rossini     Anchovies          Lunch only          &lt;NA&gt; \n#&gt; 5            5 Chidiegwu Dunkel Pizza              Breakfast and lunch five \n#&gt; 6            6 GÃ¼venÃ§ Attila    Ice cream          Lunch only          6\n\nä½ å¯èƒ½è¿˜ä¼šæ³¨æ„åˆ° Student ID å’Œ Full Name è¿™ä¸¤åˆ—è¢«åå¼•å·åŒ…å›´ã€‚ è¿™æ˜¯å› ä¸ºå®ƒä»¬åŒ…å«ç©ºæ ¼ï¼Œç ´åäº† R çš„å¸¸è§„å˜é‡å‘½åè§„åˆ™ï¼›å®ƒä»¬æ˜¯éè¯­æ³• (non-syntactic) åç§°ã€‚ è¦å¼•ç”¨è¿™äº›å˜é‡ï¼Œä½ éœ€è¦ç”¨åå¼•å· ` å°†å®ƒä»¬åŒ…å›´èµ·æ¥ï¼š\n\nstudents |&gt; \n  rename(\n    student_id = `Student ID`,\n    full_name = `Full Name`\n  )\n#&gt; # A tibble: 6 Ã— 5\n#&gt;   student_id full_name        favourite.food     mealPlan            AGE  \n#&gt;        &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;chr&gt;               &lt;chr&gt;\n#&gt; 1          1 Sunil Huffmann   Strawberry yoghurt Lunch only          4    \n#&gt; 2          2 Barclay Lynn     French fries       Lunch only          5    \n#&gt; 3          3 Jayendra Lyne    &lt;NA&gt;               Breakfast and lunch 7    \n#&gt; 4          4 Leon Rossini     Anchovies          Lunch only          &lt;NA&gt; \n#&gt; 5          5 Chidiegwu Dunkel Pizza              Breakfast and lunch five \n#&gt; 6          6 GÃ¼venÃ§ Attila    Ice cream          Lunch only          6\n\nå¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ janitor::clean_names()ï¼Œå®ƒä¼šè¿ç”¨ä¸€äº›å¯å‘å¼æ–¹æ³•ä¸€æ¬¡æ€§å°†æ‰€æœ‰åˆ—åè½¬æ¢ä¸ºè›‡å½¢å‘½åæ³• (snake case)1ã€‚\n\nstudents |&gt; janitor::clean_names()\n#&gt; # A tibble: 6 Ã— 5\n#&gt;   student_id full_name        favourite_food     meal_plan           age  \n#&gt;        &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;chr&gt;               &lt;chr&gt;\n#&gt; 1          1 Sunil Huffmann   Strawberry yoghurt Lunch only          4    \n#&gt; 2          2 Barclay Lynn     French fries       Lunch only          5    \n#&gt; 3          3 Jayendra Lyne    &lt;NA&gt;               Breakfast and lunch 7    \n#&gt; 4          4 Leon Rossini     Anchovies          Lunch only          &lt;NA&gt; \n#&gt; 5          5 Chidiegwu Dunkel Pizza              Breakfast and lunch five \n#&gt; 6          6 GÃ¼venÃ§ Attila    Ice cream          Lunch only          6\n\nè¯»å…¥æ•°æ®åçš„å¦ä¸€ä¸ªå¸¸è§ä»»åŠ¡æ˜¯è€ƒè™‘å˜é‡ç±»å‹ã€‚ ä¾‹å¦‚ï¼Œmeal_plan æ˜¯ä¸€ä¸ªåˆ†ç±»å˜é‡ï¼Œå…·æœ‰ä¸€ç»„å·²çŸ¥çš„å¯èƒ½å€¼ï¼Œåœ¨ R ä¸­åº”è¡¨ç¤ºä¸ºå› å­ (factor)ï¼š\n\nstudents |&gt;\n  janitor::clean_names() |&gt;\n  mutate(meal_plan = factor(meal_plan))\n#&gt; # A tibble: 6 Ã— 5\n#&gt;   student_id full_name        favourite_food     meal_plan           age  \n#&gt;        &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;fct&gt;               &lt;chr&gt;\n#&gt; 1          1 Sunil Huffmann   Strawberry yoghurt Lunch only          4    \n#&gt; 2          2 Barclay Lynn     French fries       Lunch only          5    \n#&gt; 3          3 Jayendra Lyne    &lt;NA&gt;               Breakfast and lunch 7    \n#&gt; 4          4 Leon Rossini     Anchovies          Lunch only          &lt;NA&gt; \n#&gt; 5          5 Chidiegwu Dunkel Pizza              Breakfast and lunch five \n#&gt; 6          6 GÃ¼venÃ§ Attila    Ice cream          Lunch only          6\n\næ³¨æ„ï¼Œmeal_plan å˜é‡ä¸­çš„å€¼ä¿æŒä¸å˜ï¼Œä½†å˜é‡åä¸‹æ–¹è¡¨ç¤ºçš„å˜é‡ç±»å‹å·²ä»å­—ç¬¦ (&lt;chr&gt;) å˜ä¸ºå› å­ (&lt;fct&gt;)ã€‚ ä½ å°†åœ¨ Chapter 16 ä¸­å­¦åˆ°æ›´å¤šå…³äºå› å­çš„çŸ¥è¯†ã€‚\nåœ¨åˆ†æè¿™äº›æ•°æ®ä¹‹å‰ï¼Œä½ å¯èƒ½æƒ³ä¿®å¤ age åˆ—ã€‚ ç›®å‰ï¼Œage æ˜¯ä¸€ä¸ªå­—ç¬¦å˜é‡ï¼Œå› ä¸ºå…¶ä¸­ä¸€ä¸ªè§‚æµ‹å€¼è¢«è¾“å…¥ä¸º five è€Œä¸æ˜¯æ•°å­— 5ã€‚ æˆ‘ä»¬å°†åœ¨ Chapter 20 ä¸­è®¨è®ºä¿®å¤è¿™ä¸ªé—®é¢˜çš„ç»†èŠ‚ã€‚\n\nstudents &lt;- students |&gt;\n  janitor::clean_names() |&gt;\n  mutate(\n    meal_plan = factor(meal_plan),\n    age = parse_number(if_else(age == \"five\", \"5\", age))\n  )\n\nstudents\n#&gt; # A tibble: 6 Ã— 5\n#&gt;   student_id full_name        favourite_food     meal_plan             age\n#&gt;        &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;fct&gt;               &lt;dbl&gt;\n#&gt; 1          1 Sunil Huffmann   Strawberry yoghurt Lunch only              4\n#&gt; 2          2 Barclay Lynn     French fries       Lunch only              5\n#&gt; 3          3 Jayendra Lyne    &lt;NA&gt;               Breakfast and lunch     7\n#&gt; 4          4 Leon Rossini     Anchovies          Lunch only             NA\n#&gt; 5          5 Chidiegwu Dunkel Pizza              Breakfast and lunch     5\n#&gt; 6          6 GÃ¼venÃ§ Attila    Ice cream          Lunch only              6\n\nè¿™é‡Œæœ‰ä¸€ä¸ªæ–°å‡½æ•° if_else()ï¼Œå®ƒæœ‰ä¸‰ä¸ªå‚æ•°ã€‚ ç¬¬ä¸€ä¸ªå‚æ•° test åº”è¯¥æ˜¯ä¸€ä¸ªé€»è¾‘å‘é‡ã€‚ å½“ test ä¸º TRUE æ—¶ï¼Œç»“æœå°†åŒ…å«ç¬¬äºŒä¸ªå‚æ•° yes çš„å€¼ï¼›å½“ test ä¸º FALSE æ—¶ï¼Œç»“æœå°†åŒ…å«ç¬¬ä¸‰ä¸ªå‚æ•° no çš„å€¼ã€‚ è¿™é‡Œæˆ‘ä»¬æ˜¯è¯´ï¼Œå¦‚æœ age æ˜¯å­—ç¬¦ä¸² \"five\"ï¼Œå°±æŠŠå®ƒå˜æˆ \"5\"ï¼Œå¦‚æœä¸æ˜¯ï¼Œå°±ä¿æŒ age ä¸å˜ã€‚ ä½ å°†åœ¨ Chapter 12 ä¸­å­¦åˆ°æ›´å¤šå…³äº if_else() å’Œé€»è¾‘å‘é‡çš„çŸ¥è¯†ã€‚\n\n7.2.2 å…¶ä»–å‚æ•°\næˆ‘ä»¬è¿˜éœ€è¦æåˆ°å‡ ä¸ªå…¶ä»–é‡è¦çš„å‚æ•°ï¼Œå¦‚æœæˆ‘ä»¬å…ˆå‘ä½ å±•ç¤ºä¸€ä¸ªæ–¹ä¾¿çš„æŠ€å·§ï¼Œä¼šæ›´å®¹æ˜“æ¼”ç¤ºï¼šread_csv() å¯ä»¥è¯»å–ä½ åˆ›å»ºå¹¶æ ¼å¼åŒ–ä¸º CSV æ–‡ä»¶é‚£æ ·çš„æ–‡æœ¬å­—ç¬¦ä¸²ï¼š\n\nread_csv(\n  \"a,b,c\n  1,2,3\n  4,5,6\"\n)\n#&gt; # A tibble: 2 Ã— 3\n#&gt;       a     b     c\n#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1     1     2     3\n#&gt; 2     4     5     6\n\né€šå¸¸ï¼Œread_csv() ä½¿ç”¨æ•°æ®çš„ç¬¬ä¸€è¡Œä½œä¸ºåˆ—åï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æ™®éçš„æƒ¯ä¾‹ã€‚ ä½†æ–‡ä»¶é¡¶éƒ¨åŒ…å«å‡ è¡Œå…ƒæ•°æ®çš„æƒ…å†µä¹Ÿå¹¶ä¸å°‘è§ã€‚ ä½ å¯ä»¥ä½¿ç”¨ skip = n æ¥è·³è¿‡å‰ n è¡Œï¼Œæˆ–è€…ä½¿ç”¨ comment = \"#\" æ¥åˆ é™¤æ‰€æœ‰ä»¥ï¼ˆä¾‹å¦‚ï¼‰# å¼€å¤´çš„è¡Œï¼š\n\nread_csv(\n  \"å…ƒæ•°æ®çš„ç¬¬ä¸€è¡Œ\n  å…ƒæ•°æ®çš„ç¬¬äºŒè¡Œ\n  x,y,z\n  1,2,3\",\n  skip = 2\n)\n#&gt; # A tibble: 1 Ã— 3\n#&gt;       x     y     z\n#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1     1     2     3\n\nread_csv(\n  \"# æˆ‘æƒ³è·³è¿‡çš„ä¸€æ¡æ³¨é‡Š\n  x,y,z\n  1,2,3\",\n  comment = \"#\"\n)\n#&gt; # A tibble: 1 Ã— 3\n#&gt;       x     y     z\n#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1     1     2     3\n\nåœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œæ•°æ®å¯èƒ½æ²¡æœ‰åˆ—åã€‚ ä½ å¯ä»¥ä½¿ç”¨ col_names = FALSE æ¥å‘Šè¯‰ read_csv() ä¸è¦å°†ç¬¬ä¸€è¡Œä½œä¸ºæ ‡é¢˜ï¼Œè€Œæ˜¯æŒ‰é¡ºåºå°†å®ƒä»¬æ ‡è®°ä¸º X1 åˆ° Xnï¼š\n\nread_csv(\n  \"1,2,3\n  4,5,6\",\n  col_names = FALSE\n)\n#&gt; # A tibble: 2 Ã— 3\n#&gt;      X1    X2    X3\n#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1     1     2     3\n#&gt; 2     4     5     6\n\næˆ–è€…ï¼Œä½ å¯ä»¥ç»™ col_names ä¼ é€’ä¸€ä¸ªå­—ç¬¦å‘é‡ï¼Œå®ƒå°†è¢«ç”¨ä½œåˆ—åï¼š\n\nread_csv(\n  \"1,2,3\n  4,5,6\",\n  col_names = c(\"x\", \"y\", \"z\")\n)\n#&gt; # A tibble: 2 Ã— 3\n#&gt;       x     y     z\n#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1     1     2     3\n#&gt; 2     4     5     6\n\nè¿™äº›å‚æ•°å°±æ˜¯ä½ åœ¨å®è·µä¸­è¯»å–å¤§å¤šæ•° CSV æ–‡ä»¶æ‰€éœ€è¦çŸ¥é“çš„å…¨éƒ¨å†…å®¹äº†ã€‚ ï¼ˆè‡³äºå…¶ä½™æƒ…å†µï¼Œä½ éœ€è¦ä»”ç»†æ£€æŸ¥ä½ çš„ .csv æ–‡ä»¶ï¼Œå¹¶é˜…è¯» read_csv() è®¸å¤šå…¶ä»–å‚æ•°çš„æ–‡æ¡£ã€‚ï¼‰\n\n7.2.3 å…¶ä»–æ–‡ä»¶ç±»å‹\nä¸€æ—¦ä½ æŒæ¡äº† read_csv()ï¼Œä½¿ç”¨ readr çš„å…¶ä»–å‡½æ•°å°±å¾ˆç›´æ¥äº†ï¼›è¿™åªæ˜¯çŸ¥é“è¯¥ç”¨å“ªä¸ªå‡½æ•°çš„é—®é¢˜ï¼š\n\nread_csv2() è¯»å–åˆ†å·åˆ†éš”çš„æ–‡ä»¶ã€‚ è¿™äº›æ–‡ä»¶ä½¿ç”¨ ; è€Œä¸æ˜¯ , æ¥åˆ†éš”å­—æ®µï¼Œåœ¨é‚£äº›ä½¿ç”¨ , ä½œä¸ºå°æ•°ç‚¹çš„å›½å®¶å¾ˆå¸¸è§ã€‚\nread_tsv() è¯»å–åˆ¶è¡¨ç¬¦åˆ†éš”çš„æ–‡ä»¶ã€‚\nread_delim() è¯»å–ä»»ä½•åˆ†éš”ç¬¦çš„æ–‡ä»¶ï¼Œå¦‚æœä½ ä¸æŒ‡å®šåˆ†éš”ç¬¦ï¼Œå®ƒä¼šå°è¯•è‡ªåŠ¨çŒœæµ‹ã€‚\nread_fwf() è¯»å–å›ºå®šå®½åº¦æ–‡ä»¶ã€‚ ä½ å¯ä»¥ç”¨ fwf_widths() æŒ‰å®½åº¦æŒ‡å®šå­—æ®µï¼Œæˆ–ç”¨ fwf_positions() æŒ‰ä½ç½®æŒ‡å®šå­—æ®µã€‚\nread_table() è¯»å–ä¸€ç§å¸¸è§çš„å›ºå®šå®½åº¦æ–‡ä»¶å˜ä½“ï¼Œå…¶ä¸­åˆ—ç”±ç©ºç™½åˆ†éš”ã€‚\nread_log() è¯»å– Apache é£æ ¼çš„æ—¥å¿—æ–‡ä»¶ã€‚\n\n7.2.4 ç»ƒä¹ \n\nä½ ä¼šç”¨å“ªä¸ªå‡½æ•°æ¥è¯»å–å­—æ®µç”± â€œ|â€ åˆ†éš”çš„æ–‡ä»¶ï¼Ÿ\né™¤äº† fileã€skip å’Œ commentï¼Œread_csv() å’Œ read_tsv() è¿˜æœ‰å“ªäº›å…±åŒçš„å‚æ•°ï¼Ÿ\nread_fwf() æœ€é‡è¦çš„å‚æ•°æ˜¯ä»€ä¹ˆï¼Ÿ\n\næœ‰æ—¶ CSV æ–‡ä»¶ä¸­çš„å­—ç¬¦ä¸²åŒ…å«é€—å·ã€‚ ä¸ºäº†é˜²æ­¢å®ƒä»¬å¼•èµ·é—®é¢˜ï¼Œå®ƒä»¬éœ€è¦è¢«å¼•å·å­—ç¬¦åŒ…å›´ï¼Œæ¯”å¦‚ \" æˆ– 'ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œread_csv() å‡è®¾å¼•å·å­—ç¬¦æ˜¯ \"ã€‚ è¦å°†ä»¥ä¸‹æ–‡æœ¬è¯»å…¥ä¸€ä¸ªæ•°æ®æ¡†ï¼Œä½ éœ€è¦ä¸º read_csv() æŒ‡å®šå“ªä¸ªå‚æ•°ï¼Ÿ\n\n\"x,y\\n1,'a,b'\"\n\n\n\næ‰¾å‡ºä»¥ä¸‹æ¯ä¸ªå†…è” CSV æ–‡ä»¶æœ‰ä»€ä¹ˆé—®é¢˜ã€‚ å½“ä½ è¿è¡Œè¿™äº›ä»£ç æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ\n\nread_csv(\"a,b\\n1,2,3\\n4,5,6\")\nread_csv(\"a,b,c\\n1,2\\n1,2,3,4\")\nread_csv(\"a,b\\n\\\"1\")\nread_csv(\"a,b\\n1,2\\na,b\")\nread_csv(\"a;b\\n1;3\")\n\n\n\nåœ¨ä¸‹é¢çš„æ•°æ®æ¡†ä¸­ç»ƒä¹ å¼•ç”¨éè¯­æ³•åç§°ï¼š\n\næå–åä¸º 1 çš„å˜é‡ã€‚\nç»˜åˆ¶ 1 ä¸ 2 çš„æ•£ç‚¹å›¾ã€‚\nåˆ›å»ºä¸€ä¸ªåä¸º 3 çš„æ–°åˆ—ï¼Œå®ƒæ˜¯ 2 é™¤ä»¥ 1 çš„ç»“æœã€‚\nå°†åˆ—é‡å‘½åä¸º oneã€two å’Œ threeã€‚\n\n\nannoying &lt;- tibble(\n  `1` = 1:10,\n  `2` = `1` * 2 + rnorm(length(`1`))\n)",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>7</span>Â  <span class='chapter-title'>æ•°æ®å¯¼å…¥</span>"
    ]
  },
  {
    "objectID": "data-import.html#sec-col-types",
    "href": "data-import.html#sec-col-types",
    "title": "7Â  æ•°æ®å¯¼å…¥",
    "section": "\n7.3 æ§åˆ¶åˆ—ç±»å‹",
    "text": "7.3 æ§åˆ¶åˆ—ç±»å‹\nCSV æ–‡ä»¶ä¸åŒ…å«å…³äºæ¯ä¸ªå˜é‡ç±»å‹çš„ä¿¡æ¯ï¼ˆå³å®ƒæ˜¯é€»è¾‘å€¼ã€æ•°å­—ã€å­—ç¬¦ä¸²ç­‰ï¼‰ï¼Œæ‰€ä»¥ readr ä¼šå°è¯•çŒœæµ‹ç±»å‹ã€‚ æœ¬èŠ‚æè¿°äº†çŒœæµ‹è¿‡ç¨‹æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œå¦‚ä½•è§£å†³ä¸€äº›å¯¼è‡´å®ƒå¤±è´¥çš„å¸¸è§é—®é¢˜ï¼Œä»¥åŠå¦‚æœéœ€è¦ï¼Œå¦‚ä½•è‡ªå·±æä¾›åˆ—ç±»å‹ã€‚ æœ€åï¼Œæˆ‘ä»¬å°†æåˆ°ä¸€äº›é€šç”¨çš„ç­–ç•¥ï¼Œå¦‚æœ readr å½»åº•å¤±è´¥ï¼Œè€Œä½ éœ€è¦æ›´æ·±å…¥åœ°äº†è§£ä½ çš„æ–‡ä»¶ç»“æ„ï¼Œè¿™äº›ç­–ç•¥ä¼šå¾ˆæœ‰ç”¨ã€‚\n\n7.3.1 çŒœæµ‹ç±»å‹\nreadr ä½¿ç”¨ä¸€ç§å¯å‘å¼æ–¹æ³•æ¥åˆ¤æ–­åˆ—ç±»å‹ã€‚ å¯¹äºæ¯ä¸€åˆ—ï¼Œå®ƒä»ç¬¬ä¸€è¡Œåˆ°æœ€åä¸€è¡Œå‡åŒ€åœ°æŠ½å– 1000 è¡Œ2 çš„å€¼ï¼Œå¹¶å¿½ç•¥ç¼ºå¤±å€¼ã€‚ ç„¶åå®ƒä¼šæŒ‰é¡ºåºè€ƒè™‘ä»¥ä¸‹é—®é¢˜ï¼š\n\nå®ƒæ˜¯å¦åªåŒ…å« Fã€Tã€FALSE æˆ– TRUEï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰ï¼Ÿå¦‚æœæ˜¯ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªé€»è¾‘å€¼ (logical)ã€‚\nå®ƒæ˜¯å¦åªåŒ…å«æ•°å­—ï¼ˆä¾‹å¦‚ï¼Œ1ã€-4.5ã€5e6ã€Infï¼‰ï¼Ÿå¦‚æœæ˜¯ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªæ•°å­— (number)ã€‚\nå®ƒæ˜¯å¦ç¬¦åˆ ISO8601 æ ‡å‡†ï¼Ÿå¦‚æœæ˜¯ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªæ—¥æœŸæˆ–æ—¥æœŸæ—¶é—´ã€‚(æˆ‘ä»¬å°†åœ¨ Section 17.2 ä¸­æ›´è¯¦ç»†åœ°å›åˆ°æ—¥æœŸæ—¶é—´)ã€‚\nå¦åˆ™ï¼Œå®ƒå¿…é¡»æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸² (string)ã€‚\n\nä½ å¯ä»¥åœ¨è¿™ä¸ªç®€å•çš„ä¾‹å­ä¸­çœ‹åˆ°è¿™ç§è¡Œä¸ºï¼š\n\nread_csv(\"\n  logical,numeric,date,string\n  TRUE,1,2021-01-15,abc\n  false,4.5,2021-02-15,def\n  T,Inf,2021-02-16,ghi\n\")\n#&gt; # A tibble: 3 Ã— 4\n#&gt;   logical numeric date       string\n#&gt;   &lt;lgl&gt;     &lt;dbl&gt; &lt;date&gt;     &lt;chr&gt; \n#&gt; 1 TRUE        1   2021-01-15 abc   \n#&gt; 2 FALSE       4.5 2021-02-15 def   \n#&gt; 3 TRUE      Inf   2021-02-16 ghi\n\nå¦‚æœä½ çš„æ•°æ®é›†å¾ˆå¹²å‡€ï¼Œè¿™ä¸ªå¯å‘å¼æ–¹æ³•æ•ˆæœå¾ˆå¥½ï¼Œä½†åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œä½ ä¼šé‡åˆ°å„ç§å„æ ·ç¨€å¥‡å¤æ€ªçš„å¤±è´¥æƒ…å†µã€‚\n\n7.3.2 ç¼ºå¤±å€¼ã€åˆ—ç±»å‹å’Œé—®é¢˜\nåˆ—æ£€æµ‹æœ€å¸¸è§çš„å¤±è´¥æ–¹å¼æ˜¯æŸä¸€åˆ—åŒ…å«äº†æ„æ–™ä¹‹å¤–çš„å€¼ï¼Œå¯¼è‡´ä½ å¾—åˆ°ä¸€ä¸ªå­—ç¬¦åˆ—è€Œä¸æ˜¯æ›´å…·ä½“çš„ç±»å‹ã€‚ æœ€å¸¸è§çš„åŸå› ä¹‹ä¸€æ˜¯ç¼ºå¤±å€¼ï¼Œå®ƒè¢«è®°å½•ä¸º readr ä¸æœŸæœ›çš„å…¶ä»–å½¢å¼ï¼Œè€Œä¸æ˜¯ NAã€‚\nä»¥è¿™ä¸ªç®€å•çš„å•åˆ— CSV æ–‡ä»¶ä¸ºä¾‹ï¼š\n\nsimple_csv &lt;- \"\n  x\n  10\n  .\n  20\n  30\"\n\nå¦‚æœæˆ‘ä»¬ä¸å¸¦ä»»ä½•é¢å¤–å‚æ•°æ¥è¯»å–å®ƒï¼Œx ä¼šå˜æˆä¸€ä¸ªå­—ç¬¦åˆ—ï¼š\n\nread_csv(simple_csv)\n#&gt; # A tibble: 4 Ã— 1\n#&gt;   x    \n#&gt;   &lt;chr&gt;\n#&gt; 1 10   \n#&gt; 2 .    \n#&gt; 3 20   \n#&gt; 4 30\n\nåœ¨è¿™ä¸ªéå¸¸å°çš„æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥è½»æ˜“çœ‹åˆ°ç¼ºå¤±å€¼ .ã€‚ ä½†æ˜¯ï¼Œå¦‚æœä½ æœ‰æˆåƒä¸Šä¸‡è¡Œï¼Œå…¶ä¸­åªæœ‰å°‘æ•°å‡ ä¸ªç”± . è¡¨ç¤ºçš„ç¼ºå¤±å€¼æ•£å¸ƒå…¶ä¸­ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ ä¸€ç§æ–¹æ³•æ˜¯å‘Šè¯‰ readr x æ˜¯ä¸€ä¸ªæ•°å€¼åˆ—ï¼Œç„¶åçœ‹å®ƒåœ¨å“ªé‡Œå¤±è´¥ã€‚ ä½ å¯ä»¥é€šè¿‡ col_types å‚æ•°æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œè¯¥å‚æ•°æ¥å—ä¸€ä¸ªå‘½ååˆ—è¡¨ï¼Œå…¶ä¸­åç§°ä¸ CSV æ–‡ä»¶ä¸­çš„åˆ—ååŒ¹é…ï¼š\n\ndf &lt;- read_csv(\n  simple_csv, \n  col_types = list(x = col_double())\n)\n#&gt; Warning: One or more parsing issues, call `problems()` on your data frame for\n#&gt; details, e.g.:\n#&gt;   dat &lt;- vroom(...)\n#&gt;   problems(dat)\n\nç°åœ¨ read_csv() æŠ¥å‘Šè¯´æœ‰é—®é¢˜ï¼Œå¹¶å‘Šè¯‰æˆ‘ä»¬å¯ä»¥ç”¨ problems() äº†è§£æ›´å¤šä¿¡æ¯ï¼š\n\nproblems(df)\n#&gt; # A tibble: 1 Ã— 5\n#&gt;     row   col expected actual file                                           \n#&gt;   &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;                                          \n#&gt; 1     3     1 a double .      C:/Users/14913/AppData/Local/Temp/RtmpiSxJyZ/fâ€¦\n\nè¿™å‘Šè¯‰æˆ‘ä»¬ï¼Œåœ¨ç¬¬ 3 è¡Œç¬¬ 1 åˆ—æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œreadr æœŸæœ›ä¸€ä¸ªåŒç²¾åº¦æ•° (double)ï¼Œä½†å¾—åˆ°äº†ä¸€ä¸ª .ã€‚ è¿™è¡¨æ˜è¿™ä¸ªæ•°æ®é›†ä½¿ç”¨ . æ¥è¡¨ç¤ºç¼ºå¤±å€¼ã€‚ æ‰€ä»¥æˆ‘ä»¬è®¾ç½® na = \".\"ï¼Œè‡ªåŠ¨çŒœæµ‹å°±æˆåŠŸäº†ï¼Œå¾—åˆ°äº†æˆ‘ä»¬æƒ³è¦çš„æ•°å€¼åˆ—ï¼š\n\nread_csv(simple_csv, na = \".\")\n#&gt; # A tibble: 4 Ã— 1\n#&gt;       x\n#&gt;   &lt;dbl&gt;\n#&gt; 1    10\n#&gt; 2    NA\n#&gt; 3    20\n#&gt; 4    30\n\n\n7.3.3 åˆ—ç±»å‹\nreadr æ€»å…±æä¾›äº†ä¹ç§åˆ—ç±»å‹ä¾›ä½ ä½¿ç”¨ï¼š\n\n\ncol_logical() å’Œ col_double() è¯»å–é€»è¾‘å€¼å’Œå®æ•°ã€‚å®ƒä»¬ç›¸å¯¹æ¥è¯´å¾ˆå°‘éœ€è¦ï¼ˆé™¤éåƒä¸Šé¢é‚£æ ·ï¼‰ï¼Œå› ä¸º readr é€šå¸¸ä¼šä¸ºä½ çŒœåˆ°å®ƒä»¬ã€‚\n\ncol_integer() è¯»å–æ•´æ•°ã€‚æœ¬ä¹¦ä¸­æˆ‘ä»¬å¾ˆå°‘åŒºåˆ†æ•´æ•°å’ŒåŒç²¾åº¦æ•°ï¼Œå› ä¸ºå®ƒä»¬åœ¨åŠŸèƒ½ä¸Šæ˜¯ç­‰æ•ˆçš„ï¼Œä½†æ˜ç¡®è¯»å–æ•´æ•°å¶å°”ä¼šå¾ˆæœ‰ç”¨ï¼Œå› ä¸ºå®ƒä»¬å ç”¨çš„å†…å­˜æ˜¯åŒç²¾åº¦æ•°çš„ä¸€åŠã€‚\n\ncol_character() è¯»å–å­—ç¬¦ä¸²ã€‚å½“ä½ çš„æŸä¸€åˆ—æ˜¯æ•°å€¼æ ‡è¯†ç¬¦æ—¶ï¼Œæ˜ç¡®æŒ‡å®šå®ƒä¼šå¾ˆæœ‰ç”¨ï¼Œå³ä¸€é•¿ä¸²æ•°å­—ï¼Œå®ƒæ ‡è¯†ä¸€ä¸ªå¯¹è±¡ï¼Œä½†å¯¹å…¶è¿›è¡Œæ•°å­¦è¿ç®—æ²¡æœ‰æ„ä¹‰ã€‚ä¾‹å­åŒ…æ‹¬ç”µè¯å·ç ã€ç¤¾ä¼šå®‰å…¨å·ç ã€ä¿¡ç”¨å¡å·ç ç­‰ã€‚\n\ncol_factor()ã€col_date() å’Œ col_datetime() åˆ†åˆ«åˆ›å»ºå› å­ã€æ—¥æœŸå’Œæ—¥æœŸæ—¶é—´ï¼›å½“æˆ‘ä»¬åœ¨ Chapter 16 å’Œ Chapter 17 ä¸­è®²åˆ°è¿™äº›æ•°æ®ç±»å‹æ—¶ï¼Œä½ å°†å­¦åˆ°æ›´å¤šå…³äºå®ƒä»¬çš„å†…å®¹ã€‚\n\ncol_number() æ˜¯ä¸€ä¸ªå®½å®¹çš„æ•°å€¼è§£æå™¨ï¼Œä¼šå¿½ç•¥éæ•°å€¼éƒ¨åˆ†ï¼Œå¯¹è´§å¸ç‰¹åˆ«æœ‰ç”¨ã€‚ä½ å°†åœ¨ Chapter 13 ä¸­å­¦åˆ°æ›´å¤šå…³äºå®ƒçš„çŸ¥è¯†ã€‚\n\ncol_skip() ä¼šè·³è¿‡ä¸€åˆ—ï¼Œä½¿å…¶ä¸è¢«åŒ…å«åœ¨ç»“æœä¸­ï¼Œè¿™åœ¨ä½ æœ‰å¤§å‹ CSV æ–‡ä»¶å¹¶ä¸”åªæƒ³ä½¿ç”¨å…¶ä¸­ä¸€éƒ¨åˆ†åˆ—æ—¶ï¼Œå¯ä»¥åŠ å¿«æ•°æ®è¯»å–é€Ÿåº¦ã€‚\n\nä¹Ÿå¯ä»¥é€šè¿‡ä» list() åˆ‡æ¢åˆ° cols() å¹¶æŒ‡å®š .default æ¥è¦†ç›–é»˜è®¤çš„åˆ—ç±»å‹ï¼š\n\nanother_csv &lt;- \"\nx,y,z\n1,2,3\"\n\nread_csv(\n  another_csv, \n  col_types = cols(.default = col_character())\n)\n#&gt; # A tibble: 1 Ã— 3\n#&gt;   x     y     z    \n#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;\n#&gt; 1 1     2     3\n\nå¦ä¸€ä¸ªæœ‰ç”¨çš„è¾…åŠ©å‡½æ•°æ˜¯ cols_only()ï¼Œå®ƒåªä¼šè¯»å…¥ä½ æŒ‡å®šçš„åˆ—ï¼š\n\nread_csv(\n  another_csv,\n  col_types = cols_only(x = col_character())\n)\n#&gt; # A tibble: 1 Ã— 1\n#&gt;   x    \n#&gt;   &lt;chr&gt;\n#&gt; 1 1",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>7</span>Â  <span class='chapter-title'>æ•°æ®å¯¼å…¥</span>"
    ]
  },
  {
    "objectID": "data-import.html#sec-readr-directory",
    "href": "data-import.html#sec-readr-directory",
    "title": "7Â  æ•°æ®å¯¼å…¥",
    "section": "\n7.4 ä»å¤šä¸ªæ–‡ä»¶ä¸­è¯»å–æ•°æ®",
    "text": "7.4 ä»å¤šä¸ªæ–‡ä»¶ä¸­è¯»å–æ•°æ®\næœ‰æ—¶ä½ çš„æ•°æ®åˆ†æ•£åœ¨å¤šä¸ªæ–‡ä»¶ä¸­ï¼Œè€Œä¸æ˜¯åŒ…å«åœ¨å•ä¸ªæ–‡ä»¶ä¸­ã€‚ ä¾‹å¦‚ï¼Œä½ å¯èƒ½æœ‰å¤šå€‹æœˆçš„é”€å”®æ•°æ®ï¼Œæ¯ä¸ªæœˆçš„æ•°æ®éƒ½åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ï¼š01-sales.csv ä»£è¡¨ä¸€æœˆï¼Œ02-sales.csv ä»£è¡¨äºŒæœˆï¼Œ03-sales.csv ä»£è¡¨ä¸‰æœˆã€‚ ä½¿ç”¨ read_csv()ï¼Œä½ å¯ä»¥ä¸€æ¬¡æ€§è¯»å–è¿™äº›æ•°æ®ï¼Œå¹¶å°†å®ƒä»¬å †å åœ¨ä¸€ä¸ªå•ä¸€çš„æ•°æ®æ¡†ä¸­ã€‚\n\nsales_files &lt;- c(\"data/01-sales.csv\", \"data/02-sales.csv\", \"data/03-sales.csv\")\nread_csv(sales_files, id = \"file\")\n#&gt; # A tibble: 19 Ã— 6\n#&gt;   file              month    year brand  item     n\n#&gt;   &lt;chr&gt;             &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1 data/01-sales.csv January  2019     1  1234     3\n#&gt; 2 data/01-sales.csv January  2019     1  8721     9\n#&gt; 3 data/01-sales.csv January  2019     1  1822     2\n#&gt; 4 data/01-sales.csv January  2019     2  3333     1\n#&gt; 5 data/01-sales.csv January  2019     2  2156     9\n#&gt; 6 data/01-sales.csv January  2019     2  3987     6\n#&gt; # â„¹ 13 more rows\n\nåŒæ ·ï¼Œå¦‚æœä½ çš„é¡¹ç›®ä¸­çš„ data æ–‡ä»¶å¤¹é‡Œæœ‰è¿™äº› CSV æ–‡ä»¶ï¼Œä¸Šé¢çš„ä»£ç å°±èƒ½æ­£å¸¸å·¥ä½œã€‚ ä½ å¯ä»¥ä» https://pos.it/r4ds-01-salesã€https://pos.it/r4ds-02-sales å’Œ https://pos.it/r4ds-03-sales ä¸‹è½½è¿™äº›æ–‡ä»¶ï¼Œæˆ–è€…ç”¨ä¸‹é¢çš„ä»£ç ç›´æ¥è¯»å–å®ƒä»¬ï¼š\n\nsales_files &lt;- c(\n  \"https://pos.it/r4ds-01-sales\",\n  \"https://pos.it/r4ds-02-sales\",\n  \"https://pos.it/r4ds-03-sales\"\n)\nread_csv(sales_files, id = \"file\")\n\nid å‚æ•°ä¼šåœ¨ç»“æœæ•°æ®æ¡†ä¸­æ·»åŠ ä¸€ä¸ªåä¸º file çš„æ–°åˆ—ï¼Œç”¨äºæ ‡è¯†æ•°æ®æ¥è‡ªå“ªä¸ªæ–‡ä»¶ã€‚ è¿™åœ¨è¯»å–çš„æ–‡ä»¶æœ¬èº«æ²¡æœ‰æ ‡è¯†åˆ—ï¼Œæ— æ³•å¸®åŠ©ä½ å°†è§‚æµ‹å€¼è¿½æº¯åˆ°å…¶åŸå§‹æ¥æºçš„æƒ…å†µä¸‹ç‰¹åˆ«æœ‰ç”¨ã€‚\nå¦‚æœä½ æœ‰å¾ˆå¤šæ–‡ä»¶è¦è¯»å–ï¼Œå°†å®ƒä»¬çš„åå­—å†™æˆä¸€ä¸ªåˆ—è¡¨å¯èƒ½ä¼šå¾ˆéº»çƒ¦ã€‚ ç›¸åï¼Œä½ å¯ä»¥ä½¿ç”¨åŸºç¡€ R çš„ list.files() å‡½æ•°ï¼Œé€šè¿‡åŒ¹é…æ–‡ä»¶åä¸­çš„ä¸€ä¸ªæ¨¡å¼æ¥ä¸ºä½ æ‰¾åˆ°æ–‡ä»¶ã€‚ ä½ å°†åœ¨ Chapter 15 ä¸­å­¦åˆ°æ›´å¤šå…³äºè¿™äº›æ¨¡å¼çš„çŸ¥è¯†ã€‚\n\nsales_files &lt;- list.files(\"data\", pattern = \"sales\\\\.csv$\", full.names = TRUE)\nsales_files\n#&gt; [1] \"data/01-sales.csv\" \"data/02-sales.csv\" \"data/03-sales.csv\"",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>7</span>Â  <span class='chapter-title'>æ•°æ®å¯¼å…¥</span>"
    ]
  },
  {
    "objectID": "data-import.html#sec-writing-to-a-file",
    "href": "data-import.html#sec-writing-to-a-file",
    "title": "7Â  æ•°æ®å¯¼å…¥",
    "section": "\n7.5 å†™å…¥æ–‡ä»¶",
    "text": "7.5 å†™å…¥æ–‡ä»¶\nreadr ä¹Ÿé™„å¸¦äº†ä¸¤ä¸ªæœ‰ç”¨çš„å‡½æ•°ï¼Œç”¨äºå°†æ•°æ®å†™å›ç£ç›˜ï¼šwrite_csv() å’Œ write_tsv()ã€‚ è¿™äº›å‡½æ•°æœ€é‡è¦çš„å‚æ•°æ˜¯ xï¼ˆè¦ä¿å­˜çš„æ•°æ®æ¡†ï¼‰å’Œ fileï¼ˆä¿å­˜çš„ä½ç½®ï¼‰ã€‚ ä½ è¿˜å¯ä»¥ç”¨ na æŒ‡å®šå¦‚ä½•å†™å…¥ç¼ºå¤±å€¼ï¼Œä»¥åŠå¦‚æœä½ æƒ³ appendåˆ°ä¸€ä¸ªç°æœ‰æ–‡ä»¶ã€‚\n\nwrite_csv(students, \"students.csv\")\n\nç°åœ¨è®©æˆ‘ä»¬æŠŠé‚£ä¸ª csv æ–‡ä»¶è¯»å›æ¥ã€‚ æ³¨æ„ï¼Œå½“ä½ ä¿å­˜ä¸º CSV æ—¶ï¼Œä½ åˆšåˆšè®¾ç½®çš„å˜é‡ç±»å‹ä¿¡æ¯ä¼šä¸¢å¤±ï¼Œå› ä¸ºä½ åˆä»ä¸€ä¸ªçº¯æ–‡æœ¬æ–‡ä»¶å¼€å§‹è¯»å–äº†ï¼š\n\nstudents\n#&gt; # A tibble: 6 Ã— 5\n#&gt;   student_id full_name        favourite_food     meal_plan             age\n#&gt;        &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;fct&gt;               &lt;dbl&gt;\n#&gt; 1          1 Sunil Huffmann   Strawberry yoghurt Lunch only              4\n#&gt; 2          2 Barclay Lynn     French fries       Lunch only              5\n#&gt; 3          3 Jayendra Lyne    &lt;NA&gt;               Breakfast and lunch     7\n#&gt; 4          4 Leon Rossini     Anchovies          Lunch only             NA\n#&gt; 5          5 Chidiegwu Dunkel Pizza              Breakfast and lunch     5\n#&gt; 6          6 GÃ¼venÃ§ Attila    Ice cream          Lunch only              6\nwrite_csv(students, \"students-2.csv\")\nread_csv(\"students-2.csv\")\n#&gt; # A tibble: 6 Ã— 5\n#&gt;   student_id full_name        favourite_food     meal_plan             age\n#&gt;        &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;chr&gt;               &lt;dbl&gt;\n#&gt; 1          1 Sunil Huffmann   Strawberry yoghurt Lunch only              4\n#&gt; 2          2 Barclay Lynn     French fries       Lunch only              5\n#&gt; 3          3 Jayendra Lyne    &lt;NA&gt;               Breakfast and lunch     7\n#&gt; 4          4 Leon Rossini     Anchovies          Lunch only             NA\n#&gt; 5          5 Chidiegwu Dunkel Pizza              Breakfast and lunch     5\n#&gt; 6          6 GÃ¼venÃ§ Attila    Ice cream          Lunch only              6\n\nè¿™ä½¿å¾— CSV å¯¹äºç¼“å­˜ä¸­é—´ç»“æœæœ‰ç‚¹ä¸å¯é â€”â€”ä½ æ¯æ¬¡åŠ è½½æ—¶éƒ½éœ€è¦é‡æ–°åˆ›å»ºåˆ—è§„æ ¼ã€‚ ä¸»è¦æœ‰ä¸¤ç§æ›¿ä»£æ–¹æ¡ˆï¼š\n\n\nwrite_rds() å’Œ read_rds() æ˜¯å¯¹åŸºç¡€å‡½æ•° readRDS() å’Œ saveRDS() çš„ç»Ÿä¸€åŒ…è£…ã€‚ å®ƒä»¬ä»¥ R çš„è‡ªå®šä¹‰äºŒè¿›åˆ¶æ ¼å¼ RDS å­˜å‚¨æ•°æ®ã€‚ è¿™æ„å‘³ç€å½“ä½ é‡æ–°åŠ è½½å¯¹è±¡æ—¶ï¼Œä½ åŠ è½½çš„æ˜¯ä½ å­˜å‚¨çš„å®Œå…¨ç›¸åŒçš„ R å¯¹è±¡ã€‚\n\nwrite_rds(students, \"students.rds\")\nread_rds(\"students.rds\")\n#&gt; # A tibble: 6 Ã— 5\n#&gt;   student_id full_name        favourite_food     meal_plan             age\n#&gt;        &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;fct&gt;               &lt;dbl&gt;\n#&gt; 1          1 Sunil Huffmann   Strawberry yoghurt Lunch only              4\n#&gt; 2          2 Barclay Lynn     French fries       Lunch only              5\n#&gt; 3          3 Jayendra Lyne    &lt;NA&gt;               Breakfast and lunch     7\n#&gt; 4          4 Leon Rossini     Anchovies          Lunch only             NA\n#&gt; 5          5 Chidiegwu Dunkel Pizza              Breakfast and lunch     5\n#&gt; 6          6 GÃ¼venÃ§ Attila    Ice cream          Lunch only              6\n\n\n\narrow åŒ…å…è®¸ä½ è¯»å†™ parquet æ–‡ä»¶ï¼Œè¿™æ˜¯ä¸€ç§å¿«é€Ÿçš„äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ï¼Œå¯ä»¥åœ¨ä¸åŒç¼–ç¨‹è¯­è¨€ä¹‹é—´å…±äº«ã€‚ æˆ‘ä»¬å°†åœ¨ Chapter 22 ä¸­æ›´æ·±å…¥åœ°è®¨è®º arrowã€‚\n\nlibrary(arrow)\nwrite_parquet(students, \"students.parquet\")\nread_parquet(\"students.parquet\")\n#&gt; # A tibble: 6 Ã— 5\n#&gt;   student_id full_name        favourite_food     meal_plan               age\n#&gt;        &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;fct&gt;                 &lt;dbl&gt;\n#&gt; 1          1 Sunil Huffmann   Strawberry yoghurt Lunch only                4\n#&gt; 2          2 Barclay Lynn     French fries       Lunch only                5\n#&gt; 3          3 Jayendra Lyne    NA                 Breakfast and lunch       7\n#&gt; 4          4 Leon Rossini     Anchovies          Lunch only               NA\n#&gt; 5          5 Chidiegwu Dunkel Pizza              Breakfast and lunch       5\n#&gt; 6          6 GÃ¼venÃ§ Attila    Ice cream          Lunch only                6\n\n\n\nParquet é€šå¸¸æ¯” RDS å¿«å¾—å¤šï¼Œå¹¶ä¸”å¯ä»¥åœ¨ R ä¹‹å¤–ä½¿ç”¨ï¼Œä½†éœ€è¦ arrow åŒ…ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>7</span>Â  <span class='chapter-title'>æ•°æ®å¯¼å…¥</span>"
    ]
  },
  {
    "objectID": "data-import.html#æ•°æ®å½•å…¥",
    "href": "data-import.html#æ•°æ®å½•å…¥",
    "title": "7Â  æ•°æ®å¯¼å…¥",
    "section": "\n7.6 æ•°æ®å½•å…¥",
    "text": "7.6 æ•°æ®å½•å…¥\næœ‰æ—¶ä½ éœ€è¦â€œæ‰‹åŠ¨â€ç»„è£…ä¸€ä¸ª tibbleï¼Œåœ¨ä½ çš„ R è„šæœ¬ä¸­è¿›è¡Œå°‘é‡çš„æ•°æ®å½•å…¥ã€‚ æœ‰ä¸¤ä¸ªæœ‰ç”¨çš„å‡½æ•°å¯ä»¥å¸®åŠ©ä½ åšåˆ°è¿™ä¸€ç‚¹ï¼Œå®ƒä»¬çš„åŒºåˆ«åœ¨äºä½ æ˜¯æŒ‰åˆ—è¿˜æ˜¯æŒ‰è¡Œæ¥å¸ƒå±€ tibbleã€‚ tibble() æ˜¯æŒ‰åˆ—å·¥ä½œçš„ï¼š\n\ntibble(\n  x = c(1, 2, 5), \n  y = c(\"h\", \"m\", \"g\"),\n  z = c(0.08, 0.83, 0.60)\n)\n#&gt; # A tibble: 3 Ã— 3\n#&gt;       x y         z\n#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;\n#&gt; 1     1 h      0.08\n#&gt; 2     2 m      0.83\n#&gt; 3     5 g      0.6\n\næŒ‰åˆ—å¸ƒå±€æ•°æ®å¯èƒ½å¾ˆéš¾çœ‹å‡ºè¡Œä¸è¡Œä¹‹é—´çš„å…³ç³»ï¼Œæ‰€ä»¥å¦ä¸€ç§é€‰æ‹©æ˜¯ tribble()ï¼Œå³è½¬ç½®çš„ tibble (transposed tibble) çš„ç¼©å†™ï¼Œå®ƒè®©ä½ é€è¡Œå¸ƒå±€ä½ çš„æ•°æ®ã€‚ tribble() æ˜¯ä¸ºåœ¨ä»£ç ä¸­è¿›è¡Œæ•°æ®å½•å…¥è€Œå®šåˆ¶çš„ï¼šåˆ—æ ‡é¢˜ä»¥ ~ å¼€å¤´ï¼Œæ¡ç›®ç”±é€—å·åˆ†éš”ã€‚ è¿™ä½¿å¾—å¯ä»¥ç”¨ä¸€ç§æ˜“äºé˜…è¯»çš„å½¢å¼æ¥å¸ƒå±€å°‘é‡æ•°æ®ï¼š\n\ntribble(\n  ~x, ~y, ~z,\n  1, \"h\", 0.08,\n  2, \"m\", 0.83,\n  5, \"g\", 0.60\n)\n#&gt; # A tibble: 3 Ã— 3\n#&gt;       x y         z\n#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;\n#&gt; 1     1 h      0.08\n#&gt; 2     2 m      0.83\n#&gt; 3     5 g      0.6",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>7</span>Â  <span class='chapter-title'>æ•°æ®å¯¼å…¥</span>"
    ]
  },
  {
    "objectID": "data-import.html#æ€»ç»“",
    "href": "data-import.html#æ€»ç»“",
    "title": "7Â  æ•°æ®å¯¼å…¥",
    "section": "\n7.7 æ€»ç»“",
    "text": "7.7 æ€»ç»“\nåœ¨æœ¬ç« ä¸­ï¼Œä½ å­¦ä¼šäº†å¦‚ä½•ä½¿ç”¨ read_csv() åŠ è½½ CSV æ–‡ä»¶ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ tibble() å’Œ tribble() è¿›è¡Œä½ è‡ªå·±çš„æ•°æ®å½•å…¥ã€‚ ä½ äº†è§£äº† CSV æ–‡ä»¶çš„å·¥ä½œåŸç†ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼Œä»¥åŠå¦‚ä½•å…‹æœå®ƒä»¬ã€‚ åœ¨æœ¬ä¹¦ä¸­ï¼Œæˆ‘ä»¬ä¼šå‡ æ¬¡å›åˆ°æ•°æ®å¯¼å…¥è¿™ä¸ªè¯é¢˜ï¼šChapter 20 è®²ä» Excel å’Œ Google Sheets å¯¼å…¥ï¼ŒChapter 21 å°†å‘ä½ å±•ç¤ºå¦‚ä½•ä»æ•°æ®åº“åŠ è½½æ•°æ®ï¼ŒChapter 22 ä» parquet æ–‡ä»¶ï¼ŒChapter 23 ä» JSONï¼Œä»¥åŠ Chapter 24 ä»ç½‘ç«™ã€‚\næˆ‘ä»¬å³å°†ç»“æŸæœ¬ä¹¦çš„è¿™ä¸€éƒ¨åˆ†ï¼Œä½†è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„æœ€åè¯é¢˜è¦è®²ï¼šå¦‚ä½•è·å¾—å¸®åŠ©ã€‚ æ‰€ä»¥åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œä½ å°†å­¦åˆ°ä¸€äº›å¯»æ±‚å¸®åŠ©çš„å¥½åœ°æ–¹ï¼Œå¦‚ä½•åˆ›å»ºä¸€ä¸ª reprex (å¯å¤ç°ç¤ºä¾‹) æ¥æœ€å¤§åŒ–ä½ è·å¾—è‰¯å¥½å¸®åŠ©çš„æœºä¼šï¼Œä»¥åŠä¸€äº›å…³äºè·Ÿä¸Š R ä¸–ç•Œå‘å±•çš„ä¸€èˆ¬æ€§å»ºè®®ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>7</span>Â  <span class='chapter-title'>æ•°æ®å¯¼å…¥</span>"
    ]
  },
  {
    "objectID": "data-import.html#footnotes",
    "href": "data-import.html#footnotes",
    "title": "7Â  æ•°æ®å¯¼å…¥",
    "section": "",
    "text": "janitor åŒ…ä¸å±äº tidyverseï¼Œä½†å®ƒæä¾›äº†ä¾¿æ·çš„æ•°æ®æ¸…ç†å‡½æ•°ï¼Œå¹¶ä¸”èƒ½å¾ˆå¥½åœ°åœ¨ä½¿ ç”¨ |&gt; çš„æ•°æ®ç®¡é“ä¸­å·¥ä½œã€‚â†©ï¸\nä½ å¯ä»¥ç”¨ guess_max å‚æ•°è¦†ç›–é»˜è®¤çš„ 1000 è¡Œã€‚â†©ï¸",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>7</span>Â  <span class='chapter-title'>æ•°æ®å¯¼å…¥</span>"
    ]
  },
  {
    "objectID": "workflow-help.html",
    "href": "workflow-help.html",
    "title": "8Â  å·¥ä½œæµï¼šè·å–å¸®åŠ©",
    "section": "",
    "text": "8.1 è°·æ­Œæ˜¯ä½ çš„å¥½æœ‹å‹\nè¿™æœ¬ä¹¦å¹¶éä¸€åº§å­¤å²›ï¼›æ²¡æœ‰ä»»ä½•å•ä¸€çš„èµ„æºèƒ½è®©ä½ ç²¾é€š Rã€‚ å½“ä½ å¼€å§‹å°†æœ¬ä¹¦ä¸­æè¿°çš„æŠ€æœ¯åº”ç”¨äºè‡ªå·±çš„æ•°æ®æ—¶ï¼Œä½ å¾ˆå¿«å°±ä¼šå‘ç°æˆ‘ä»¬æ²¡æœ‰å›ç­”çš„é—®é¢˜ã€‚ æœ¬èŠ‚å°†ä»‹ç»ä¸€äº›è·å–å¸®åŠ©å’ŒæŒç»­å­¦ä¹ çš„æŠ€å·§ã€‚\nå¦‚æœä½ é‡åˆ°å›°éš¾ï¼Œä»è°·æ­Œå¼€å§‹ã€‚ é€šå¸¸ï¼Œåœ¨æŸ¥è¯¢ä¸­åŠ ä¸Šâ€œRâ€å°±è¶³ä»¥å°†å…¶é™åˆ¶åœ¨ç›¸å…³çš„ç»“æœä¸­ï¼šå¦‚æœæœç´¢ç»“æœæ²¡æœ‰ç”¨ï¼Œé€šå¸¸æ„å‘³ç€æ²¡æœ‰ R ç‰¹å®šçš„ç»“æœå¯ç”¨ã€‚ æ­¤å¤–ï¼Œæ·»åŠ åƒ â€œtidyverseâ€ æˆ– â€œggplot2â€ è¿™æ ·çš„åŒ…åä¹Ÿä¼šå¸®åŠ©ä½ å°†ç»“æœèŒƒå›´ç¼©å°åˆ°ä½ æ›´ç†Ÿæ‚‰çš„ä»£ç ï¼Œä¾‹å¦‚ï¼Œâ€œhow to make a boxplot in Râ€ (å¦‚ä½•åœ¨ R ä¸­åˆ¶ä½œç®±çº¿å›¾) vs.Â â€œhow to make a boxplot in R with ggplot2â€ (å¦‚ä½•ç”¨ ggplot2 åœ¨ R ä¸­åˆ¶ä½œç®±çº¿å›¾)ã€‚ å¯¹äºé”™è¯¯ä¿¡æ¯ï¼Œè°·æ­Œå°¤å…¶æœ‰ç”¨ã€‚ å¦‚æœä½ å¾—åˆ°ä¸€ä¸ªé”™è¯¯ä¿¡æ¯ï¼Œå¹¶ä¸”ä½ ä¸çŸ¥é“å®ƒæ˜¯ä»€ä¹ˆæ„æ€ï¼Œè¯•è¯•è°·æ­Œæœç´¢å®ƒï¼ å¾ˆå¯èƒ½è¿‡å»æœ‰äººä¹Ÿæ›¾å¯¹æ­¤æ„Ÿåˆ°å›°æƒ‘ï¼Œç½‘ä¸ŠæŸä¸ªåœ°æ–¹ä¼šæœ‰å¸®åŠ©ã€‚ ï¼ˆå¦‚æœé”™è¯¯ä¿¡æ¯ä¸æ˜¯è‹±æ–‡çš„ï¼Œè¿è¡Œ Sys.setenv(LANGUAGE = \"en\") å¹¶é‡æ–°è¿è¡Œä»£ç ï¼›ä½ æ›´æœ‰å¯èƒ½ä¸ºè‹±æ–‡é”™è¯¯ä¿¡æ¯æ‰¾åˆ°å¸®åŠ©ã€‚ï¼‰\nå¦‚æœè°·æ­Œæ²¡æœ‰å¸®åŠ©ï¼Œè¯•è¯• Stack Overflowã€‚ é¦–å…ˆèŠ±ç‚¹æ—¶é—´æœç´¢ç°æœ‰çš„ç­”æ¡ˆï¼Œè®°å¾—åŠ ä¸Š [R]ï¼Œå°†ä½ çš„æœç´¢é™åˆ¶åœ¨ä½¿ç”¨ R çš„é—®é¢˜å’Œç­”æ¡ˆä¸Šã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>8</span>Â  <span class='chapter-title'>å·¥ä½œæµï¼šè·å–å¸®åŠ©</span>"
    ]
  },
  {
    "objectID": "workflow-help.html#åˆ¶ä½œä¸€ä¸ªå¯å¤ç°ç¤ºä¾‹-reprex",
    "href": "workflow-help.html#åˆ¶ä½œä¸€ä¸ªå¯å¤ç°ç¤ºä¾‹-reprex",
    "title": "8Â  å·¥ä½œæµï¼šè·å–å¸®åŠ©",
    "section": "\n8.2 åˆ¶ä½œä¸€ä¸ªå¯å¤ç°ç¤ºä¾‹ (reprex)",
    "text": "8.2 åˆ¶ä½œä¸€ä¸ªå¯å¤ç°ç¤ºä¾‹ (reprex)\nå¦‚æœä½ çš„è°·æ­Œæœç´¢æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœ‰ç”¨çš„ä¸œè¥¿ï¼Œé‚£ä¹ˆå‡†å¤‡ä¸€ä¸ª reprexï¼Œå³æœ€å°å¯å¤ç°ç¤ºä¾‹ (minimal reproducible example) æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„ä¸»æ„ã€‚ ä¸€ä¸ªå¥½çš„ reprex èƒ½è®©å…¶ä»–äººæ›´å®¹æ˜“å¸®åŠ©ä½ ï¼Œè€Œä¸”é€šå¸¸ä½ ä¼šåœ¨åˆ¶ä½œå®ƒçš„è¿‡ç¨‹ä¸­è‡ªå·±æ‰¾å‡ºé—®é¢˜æ‰€åœ¨ã€‚ åˆ›å»º reprex æœ‰ä¸¤ä¸ªéƒ¨åˆ†ï¼š\n\né¦–å…ˆï¼Œä½ éœ€è¦è®©ä½ çš„ä»£ç å¯å¤ç° (reproducible)ã€‚ è¿™æ„å‘³ç€ä½ éœ€è¦æ•è·æ‰€æœ‰ä¸œè¥¿ï¼Œå³åŒ…å«ä»»ä½• library() è°ƒç”¨å¹¶åˆ›å»ºæ‰€æœ‰å¿…è¦çš„å¯¹è±¡ã€‚ ç¡®ä¿ä½ åšåˆ°è¿™ä¸€ç‚¹çš„æœ€ç®€å•æ–¹æ³•æ˜¯ä½¿ç”¨ reprex åŒ…ã€‚\nå…¶æ¬¡ï¼Œä½ éœ€è¦è®©å®ƒæœ€å°åŒ– (minimal)ã€‚ å‰¥ç¦»æ‰æ‰€æœ‰ä¸ä½ çš„é—®é¢˜ä¸ç›´æ¥ç›¸å…³çš„ä¸œè¥¿ã€‚ è¿™é€šå¸¸æ¶‰åŠåˆ°åˆ›å»ºä¸€ä¸ªæ¯”ä½ åœ¨ç°å®ç”Ÿæ´»ä¸­é¢å¯¹çš„è¦å°å¾—å¤šã€ç®€å•å¾—å¤šçš„ R å¯¹è±¡ï¼Œç”šè‡³ä½¿ç”¨å†…ç½®æ•°æ®ã€‚\n\nè¿™å¬èµ·æ¥åƒå¾ˆå¤šå·¥ä½œï¼ è€Œä¸”ç¡®å®å¯èƒ½å¦‚æ­¤ï¼Œä½†å®ƒæœ‰å·¨å¤§çš„å›æŠ¥ï¼š\n\n80% çš„æƒ…å†µä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªä¼˜ç§€çš„ reprex ä¼šæ­ç¤ºä½ é—®é¢˜çš„æ ¹æºã€‚ ä»¤äººæƒŠè®¶çš„æ˜¯ï¼Œç¼–å†™ä¸€ä¸ªç‹¬ç«‹çš„ã€æœ€å°åŒ–çš„ä¾‹å­çš„è¿‡ç¨‹ï¼Œå¸¸å¸¸èƒ½è®©ä½ è‡ªå·±å›ç­”è‡ªå·±çš„é—®é¢˜ã€‚\nå¦å¤– 20% çš„æƒ…å†µä¸‹ï¼Œä½ å°†ä»¥ä¸€ç§ä¾¿äºä»–äººä¸Šæ‰‹çš„æ–¹å¼æ•æ‰åˆ°ä½ é—®é¢˜çš„æœ¬è´¨ã€‚ è¿™å¤§å¤§æé«˜äº†ä½ è·å¾—å¸®åŠ©çš„æœºä¼šï¼\n\nå½“æ‰‹åŠ¨åˆ›å»º reprex æ—¶ï¼Œå¾ˆå®¹æ˜“ä¸å°å¿ƒæ¼æ‰æŸäº›ä¸œè¥¿ï¼Œè¿™æ„å‘³ç€ä½ çš„ä»£ç æ— æ³•åœ¨åˆ«äººçš„ç”µè„‘ä¸Šè¿è¡Œã€‚ é€šè¿‡ä½¿ç”¨ reprex åŒ…å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ï¼Œè¯¥åŒ…æ˜¯ä½œä¸º tidyverse çš„ä¸€éƒ¨åˆ†å®‰è£…çš„ã€‚ å‡è®¾ä½ å°†è¿™æ®µä»£ç å¤åˆ¶åˆ°å‰ªè´´æ¿ä¸Šï¼ˆæˆ–è€…ï¼Œåœ¨ RStudio Server æˆ– Cloud ä¸Šï¼Œé€‰ä¸­å®ƒï¼‰ï¼š\n\ny &lt;- 1:4\nmean(y)\n\nç„¶åè°ƒç”¨ reprex()ï¼Œå…¶é»˜è®¤è¾“å‡ºæ˜¯ä¸º GitHub æ ¼å¼åŒ–çš„ï¼š\nreprex::reprex()\nä¸€ä¸ªæ¸²æŸ“ç²¾ç¾çš„ HTML é¢„è§ˆå°†æ˜¾ç¤ºåœ¨ RStudio çš„ Viewer çª—æ ¼ä¸­ï¼ˆå¦‚æœä½ åœ¨ RStudio ä¸­ï¼‰æˆ–ä½ çš„é»˜è®¤æµè§ˆå™¨ä¸­ã€‚ reprex ä¼šè‡ªåŠ¨å¤åˆ¶åˆ°ä½ çš„å‰ªè´´æ¿ï¼ˆåœ¨ RStudio Server æˆ– Cloud ä¸Šï¼Œä½ éœ€è¦è‡ªå·±å¤åˆ¶ï¼‰ï¼š\n``` r\ny &lt;- 1:4\nmean(y)\n#&gt; [1] 2.5\n```\nè¿™æ®µæ–‡æœ¬ä»¥ä¸€ç§ç‰¹æ®Šçš„æ–¹å¼æ ¼å¼åŒ–ï¼Œç§°ä¸º Markdownï¼Œå¯ä»¥ç²˜è´´åˆ°åƒ StackOverflow æˆ– Github è¿™æ ·çš„ç½‘ç«™ä¸Šï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨å°†å…¶æ¸²æŸ“æˆä»£ç çš„æ ·å­ã€‚ è¿™æ˜¯è¯¥ Markdown åœ¨ GitHub ä¸Šæ¸²æŸ“åçš„æ ·å­ï¼š\n\ny &lt;- 1:4\nmean(y)\n#&gt; [1] 2.5\n\nå…¶ä»–ä»»ä½•äººéƒ½å¯ä»¥ç«‹å³å¤åˆ¶ã€ç²˜è´´å¹¶è¿è¡Œå®ƒã€‚\nè¦ä½¿ä½ çš„ç¤ºä¾‹å¯å¤ç°ï¼Œä½ éœ€è¦åŒ…å«ä¸‰ä»¶äº‹ï¼šæ‰€éœ€çš„åŒ…ã€æ•°æ®å’Œä»£ç ã€‚\n\nåŒ… åº”è¯¥åœ¨è„šæœ¬çš„é¡¶éƒ¨åŠ è½½ï¼Œè¿™æ ·å¯ä»¥å¾ˆå®¹æ˜“åœ°çœ‹åˆ°ç¤ºä¾‹éœ€è¦å“ªäº›åŒ…ã€‚ è¿™æ˜¯ä¸€ä¸ªæ£€æŸ¥ä½ æ˜¯å¦æ­£åœ¨ä½¿ç”¨æ¯ä¸ªåŒ…çš„æœ€æ–°ç‰ˆæœ¬çš„å¥½æ—¶æœºï¼›ä½ å¯èƒ½å‘ç°äº†ä¸€ä¸ªè‡ªä½ å®‰è£…æˆ–ä¸Šæ¬¡æ›´æ–°åŒ…ä»¥æ¥å·²ç»ä¿®å¤çš„é”™è¯¯ã€‚ å¯¹äº tidyverse ä¸­çš„åŒ…ï¼Œæœ€ç®€å•çš„æ£€æŸ¥æ–¹æ³•æ˜¯è¿è¡Œ tidyverse_update()ã€‚\n\nåŒ…å«æ•°æ®çš„æœ€ç®€å•æ–¹æ³•æ˜¯ä½¿ç”¨ dput() æ¥ç”Ÿæˆé‡æ–°åˆ›å»ºå®ƒæ‰€éœ€çš„ R ä»£ç ã€‚ ä¾‹å¦‚ï¼Œè¦åœ¨ R ä¸­é‡æ–°åˆ›å»º mtcars æ•°æ®é›†ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š\n\nåœ¨ R ä¸­è¿è¡Œ dput(mtcars)\n\nå¤åˆ¶è¾“å‡º\nåœ¨ reprex ä¸­ï¼Œè¾“å…¥ mtcars &lt;-ï¼Œç„¶åç²˜è´´ã€‚\n\nå°½é‡ä½¿ç”¨èƒ½æ­ç¤ºé—®é¢˜çš„æœ€å°æ•°æ®å­é›†ã€‚\n\n\nèŠ±ä¸€ç‚¹æ—¶é—´ç¡®ä¿ä½ çš„ä»£ç æ˜“äºä»–äººé˜…è¯»ï¼š\n\nç¡®ä¿ä½ ä½¿ç”¨äº†ç©ºæ ¼ï¼Œå¹¶ä¸”ä½ çš„å˜é‡åæ—¢ç®€æ´åˆä¿¡æ¯ä¸°å¯Œã€‚\nä½¿ç”¨æ³¨é‡Šæ¥æŒ‡å‡ºä½ çš„é—®é¢˜æ‰€åœ¨ã€‚\nå°½åŠ›åˆ é™¤æ‰€æœ‰ä¸é—®é¢˜æ— å…³çš„å†…å®¹ã€‚\n\nä½ çš„ä»£ç è¶ŠçŸ­ï¼Œå°±è¶Šå®¹æ˜“ç†è§£ï¼Œä¹Ÿè¶Šå®¹æ˜“ä¿®å¤ã€‚\n\n\næœ€åï¼Œé€šè¿‡å¯åŠ¨ä¸€ä¸ªæ–°çš„ R ä¼šè¯å¹¶å¤åˆ¶ç²˜è´´ä½ çš„è„šæœ¬ï¼Œæ¥æ£€æŸ¥ä½ æ˜¯å¦çœŸçš„åˆ›å»ºäº†ä¸€ä¸ªå¯å¤ç°çš„ç¤ºä¾‹ã€‚\nåˆ›å»º reprex å¹¶éæ˜“äº‹ï¼Œéœ€è¦ä¸€äº›ç»ƒä¹ æ‰èƒ½å­¦ä¼šåˆ›å»ºå¥½çš„ã€çœŸæ­£æœ€å°åŒ–çš„ reprexã€‚ ç„¶è€Œï¼Œå­¦ä¼šæå‡ºåŒ…å«ä»£ç çš„é—®é¢˜ï¼Œå¹¶æŠ•å…¥æ—¶é—´ä½¿å…¶å¯å¤ç°ï¼Œå°†éšç€ä½ å­¦ä¹ å’ŒæŒæ¡ R çš„è¿‡ç¨‹è€ŒæŒç»­å¸¦æ¥å›æŠ¥ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>8</span>Â  <span class='chapter-title'>å·¥ä½œæµï¼šè·å–å¸®åŠ©</span>"
    ]
  },
  {
    "objectID": "workflow-help.html#æŠ•èµ„è‡ªå·±",
    "href": "workflow-help.html#æŠ•èµ„è‡ªå·±",
    "title": "8Â  å·¥ä½œæµï¼šè·å–å¸®åŠ©",
    "section": "\n8.3 æŠ•èµ„è‡ªå·±",
    "text": "8.3 æŠ•èµ„è‡ªå·±\nä½ ä¹Ÿåº”è¯¥èŠ±ä¸€äº›æ—¶é—´åœ¨é—®é¢˜å‘ç”Ÿå‰å°±åšå¥½è§£å†³é—®é¢˜çš„å‡†å¤‡ã€‚ æ¯å¤©æŠ•å…¥ä¸€ç‚¹æ—¶é—´å­¦ä¹  Rï¼Œä»é•¿è¿œæ¥çœ‹å°†è·å¾—ä¸°åšçš„å›æŠ¥ã€‚ ä¸€ç§æ–¹æ³•æ˜¯åœ¨ tidyverse åšå®¢ä¸Šå…³æ³¨ tidyverse å›¢é˜Ÿçš„åŠ¨æ€ã€‚ ä¸ºäº†æ›´å¹¿æ³›åœ°äº†è§£ R ç¤¾åŒºï¼Œæˆ‘ä»¬æ¨èé˜…è¯» R Weeklyï¼šè¿™æ˜¯ä¸€ä¸ªç¤¾åŒºé¡¹ç›®ï¼Œæ¯å‘¨æ±‡æ€» R ç¤¾åŒºæœ€æœ‰è¶£çš„æ–°é—»ã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>8</span>Â  <span class='chapter-title'>å·¥ä½œæµï¼šè·å–å¸®åŠ©</span>"
    ]
  },
  {
    "objectID": "workflow-help.html#æ€»ç»“",
    "href": "workflow-help.html#æ€»ç»“",
    "title": "8Â  å·¥ä½œæµï¼šè·å–å¸®åŠ©",
    "section": "\n8.4 æ€»ç»“",
    "text": "8.4 æ€»ç»“\næœ¬ç« ç»“æŸäº†æœ¬ä¹¦çš„â€œå…¨å±€æ¦‚è§ˆâ€éƒ¨åˆ†ã€‚ ä½ ç°åœ¨å·²ç»çœ‹åˆ°äº†æ•°æ®ç§‘å­¦è¿‡ç¨‹ä¸­æœ€é‡è¦çš„éƒ¨åˆ†ï¼šå¯è§†åŒ–ã€è½¬æ¢ã€æ•´ç†å’Œå¯¼å…¥ã€‚ ç°åœ¨ä½ å¯¹æ•´ä¸ªè¿‡ç¨‹æœ‰äº†æ•´ä½“çš„çœ‹æ³•ï¼Œæˆ‘ä»¬å°†å¼€å§‹æ·±å…¥æ¢è®¨å„ä¸ªå°éƒ¨åˆ†çš„ç»†èŠ‚ã€‚\næœ¬ä¹¦çš„ä¸‹ä¸€éƒ¨åˆ†ï¼Œâ€œå¯è§†åŒ–â€ï¼Œå°†æ›´æ·±å…¥åœ°æ¢è®¨å›¾å½¢è¯­æ³•å’Œä½¿ç”¨ ggplot2 åˆ›å»ºæ•°æ®å¯è§†åŒ–ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨ä½ ç›®å‰å­¦åˆ°çš„å·¥å…·è¿›è¡Œæ¢ç´¢æ€§æ•°æ®åˆ†æï¼Œå¹¶ä»‹ç»ä¸ºæ²Ÿé€šäº¤æµåˆ›å»ºå›¾è¡¨çš„è‰¯å¥½å®è·µã€‚",
    "crumbs": [
      "Whole game",
      "<span class='chapter-number'>8</span>Â  <span class='chapter-title'>å·¥ä½œæµï¼šè·å–å¸®åŠ©</span>"
    ]
  },
  {
    "objectID": "visualize.html",
    "href": "visualize.html",
    "title": "å¯è§†åŒ–",
    "section": "",
    "text": "è¯»å®Œæœ¬ä¹¦çš„ç¬¬ä¸€éƒ¨åˆ†åï¼Œä½ å·²ç»ï¼ˆè‡³å°‘åœ¨è¡¨é¢ä¸Šï¼‰äº†è§£äº†ä»äº‹æ•°æ®ç§‘å­¦æ‰€éœ€çš„æœ€é‡è¦çš„å·¥å…·ã€‚ ç°åœ¨æ˜¯æ—¶å€™å¼€å§‹æ·±å…¥ç»†èŠ‚äº†ã€‚ åœ¨æœ¬ä¹¦çš„è¿™ä¸€éƒ¨åˆ†ï¼Œä½ å°†æ›´æ·±å…¥åœ°å­¦ä¹ æ•°æ®å¯è§†åŒ–ã€‚\n\n\n\n\n\n\n\nFigureÂ 1: æ•°æ®å¯è§†åŒ–é€šå¸¸æ˜¯æ•°æ®æ¢ç´¢çš„ç¬¬ä¸€æ­¥ã€‚\n\n\n\n\næ¯ä¸€ç« éƒ½å°†æ¢è®¨åˆ›å»ºæ•°æ®å¯è§†åŒ–çš„ä¸€ä¸ªæˆ–å‡ ä¸ªæ–¹é¢ã€‚\n\nåœ¨ 9Â  å›¾å±‚ ä¸­ï¼Œä½ å°†å­¦ä¹ å›¾å½¢çš„ layered grammar (åˆ†å±‚è¯­æ³•)ã€‚\nåœ¨ 10Â  æ¢ç´¢æ€§æ•°æ®åˆ†æ ä¸­ï¼Œä½ å°†æŠŠå¯è§†åŒ–ä¸ä½ çš„å¥½å¥‡å¿ƒå’Œæ€€ç–‘ç²¾ç¥ç»“åˆèµ·æ¥ï¼Œä»è€Œæå‡ºå¹¶å›ç­”æœ‰å…³æ•°æ®çš„æœ‰è¶£é—®é¢˜ã€‚\næœ€åï¼Œåœ¨ 11Â  æ²Ÿé€š ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•å°†ä½ çš„æ¢ç´¢æ€§å›¾å½¢è¿›è¡Œå‡åï¼Œå°†å…¶è½¬åŒ–ä¸ºè§£é‡Šæ€§å›¾å½¢ï¼Œè¿™ç§å›¾å½¢å¯ä»¥å¸®åŠ©åˆæ¬¡æ¥è§¦ä½ åˆ†æçš„äººå°½å¯èƒ½å¿«é€Ÿã€è½»æ¾åœ°ç†è§£å½“å‰çš„æƒ…å†µã€‚\n\nè¿™ä¸‰ç« å°†å¸¦ä½ è¿›å…¥å¯è§†åŒ–ä¸–ç•Œçš„å¤§é—¨ï¼Œä½†è¿˜æœ‰æ›´å¤šçš„çŸ¥è¯†æœ‰å¾…å­¦ä¹ ã€‚ å­¦ä¹ æ›´å¤šçŸ¥è¯†çš„æœ€ä½³é€”å¾„æ˜¯é˜…è¯» ggplot2 ä¸“è‘—ï¼šggplot2: Elegant graphics for data analysisã€‚ è¯¥ä¹¦æ›´æ·±å…¥åœ°æ¢è®¨äº†åº•å±‚ç†è®ºï¼Œå¹¶æä¾›äº†æ›´å¤šå…³äºå¦‚ä½•ç»„åˆå„ä¸ªéƒ¨åˆ†æ¥è§£å†³å®é™…é—®é¢˜çš„ç¤ºä¾‹ã€‚ å¦ä¸€ä¸ªå¾ˆæ£’çš„èµ„æºæ˜¯ ggplot2 æ‰©å±•åº“ https://exts.ggplot2.tidyverse.org/gallery/ã€‚ è¿™ä¸ªç½‘ç«™åˆ—å‡ºäº†è®¸å¤šç”¨æ–°çš„å‡ ä½•å¯¹è±¡ (geom) å’Œæ ‡åº¦ (scale) æ¥æ‰©å±• ggplot2 çš„åŒ…ã€‚ å¦‚æœä½ æƒ³ç”¨ ggplot2 åšä¸€äº›çœ‹èµ·æ¥å¾ˆå›°éš¾çš„äº‹æƒ…ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ã€‚",
    "crumbs": [
      "å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "layers.html",
    "href": "layers.html",
    "title": "9Â  å›¾å±‚",
    "section": "",
    "text": "9.1 å¼•è¨€\nåœ¨ Chapter 1 ä¸­ï¼Œä½ å­¦åˆ°çš„è¿œä¸æ­¢å¦‚ä½•åˆ¶ä½œæ•£ç‚¹å›¾ã€æ¡å½¢å›¾å’Œç®±çº¿å›¾ã€‚ä½ å­¦åˆ°äº†ä¸€ä¸ªåŸºç¡€ï¼Œå¯ä»¥ç”¨å®ƒæ¥é€šè¿‡ ggplot2 åˆ¶ä½œä»»ä½•ç±»å‹çš„å›¾è¡¨ã€‚\næœ¬ç« ä¸­ï¼Œä½ å°†åœ¨å­¦ä¹ å›¾å½¢çš„åˆ†å±‚è¯­æ³•æ—¶æ‰©å±•è¿™ä¸€åŸºç¡€ã€‚æˆ‘ä»¬å°†ä»æ›´æ·±å…¥åœ°æ¢è®¨å›¾å½¢å±æ€§æ˜ å°„ (aesthetic mappings)ã€å‡ ä½•å¯¹è±¡ (geometric objects) å’Œåˆ†é¢ (facets) å¼€å§‹ã€‚ç„¶åï¼Œä½ å°†å­¦ä¹  ggplot2 åœ¨åˆ›å»ºå›¾è¡¨æ—¶åœ¨å¹•åè¿›è¡Œçš„ç»Ÿè®¡å˜æ¢ (statistical transformations)ã€‚è¿™äº›å˜æ¢ç”¨äºè®¡ç®—è¦ç»˜åˆ¶çš„æ–°å€¼ï¼Œä¾‹å¦‚æ¡å½¢å›¾ä¸­æ¡å½¢çš„é«˜åº¦æˆ–ç®±çº¿å›¾ä¸­çš„ä¸­ä½æ•°ã€‚ä½ è¿˜å°†å­¦ä¹ ä½ç½®è°ƒæ•´ (position adjustments)ï¼Œå®ƒä¼šä¿®æ”¹å‡ ä½•å¯¹è±¡åœ¨å›¾ä¸­çš„æ˜¾ç¤ºæ–¹å¼ã€‚æœ€åï¼Œæˆ‘ä»¬å°†ç®€è¦ä»‹ç»åæ ‡ç³»ã€‚\næˆ‘ä»¬ä¸ä¼šæ¶µç›–è¿™äº›å›¾å±‚ä¸­æ¯ä¸€ä¸ªçš„å…¨éƒ¨å‡½æ•°å’Œé€‰é¡¹ï¼Œä½†æˆ‘ä»¬ä¼šå¼•å¯¼ä½ äº†è§£ ggplot2 æä¾›çš„æœ€é‡è¦å’Œæœ€å¸¸ç”¨çš„åŠŸèƒ½ï¼Œå¹¶å‘ä½ ä»‹ç»æ‰©å±• ggplot2 çš„åŒ…ã€‚",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>9</span>Â  <span class='chapter-title'>å›¾å±‚</span>"
    ]
  },
  {
    "objectID": "layers.html#å¼•è¨€",
    "href": "layers.html#å¼•è¨€",
    "title": "9Â  å›¾å±‚",
    "section": "",
    "text": "9.1.1 å‰ææ¡ä»¶\næœ¬ç« é‡ç‚¹ä»‹ç» ggplot2ã€‚è¦è®¿é—®æœ¬ç« ä¸­ä½¿ç”¨çš„æ•°æ®é›†ã€å¸®åŠ©é¡µé¢å’Œå‡½æ•°ï¼Œè¯·è¿è¡Œä»¥ä¸‹ä»£ç åŠ è½½ tidyverseï¼š\n\nlibrary(tidyverse)",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>9</span>Â  <span class='chapter-title'>å›¾å±‚</span>"
    ]
  },
  {
    "objectID": "layers.html#å›¾å½¢å±æ€§æ˜ å°„",
    "href": "layers.html#å›¾å½¢å±æ€§æ˜ å°„",
    "title": "9Â  å›¾å±‚",
    "section": "\n9.2 å›¾å½¢å±æ€§æ˜ å°„",
    "text": "9.2 å›¾å½¢å±æ€§æ˜ å°„\n\nâ€œå›¾ç‰‡çš„æœ€å¤§ä»·å€¼åœ¨äºï¼Œå®ƒè¿«ä½¿æˆ‘ä»¬æ³¨æ„åˆ°æˆ‘ä»¬ä»æœªé¢„æ–™ä¼šçœ‹åˆ°çš„ä¸œè¥¿ã€‚â€ â€” John Tukey\n\nè¯·è®°ä½ï¼Œggplot2 åŒ…ä¸­é™„å¸¦çš„ mpg æ•°æ®æ¡†åŒ…å« 234 æ¡å…³äº 38 ç§è½¦å‹çš„è§‚æµ‹æ•°æ®ã€‚\n\nmpg\n#&gt; # A tibble: 234 Ã— 11\n#&gt;   manufacturer model displ  year   cyl trans      drv     cty   hwy fl   \n#&gt;   &lt;chr&gt;        &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;\n#&gt; 1 audi         a4      1.8  1999     4 auto(l5)   f        18    29 p    \n#&gt; 2 audi         a4      1.8  1999     4 manual(m5) f        21    29 p    \n#&gt; 3 audi         a4      2    2008     4 manual(m6) f        20    31 p    \n#&gt; 4 audi         a4      2    2008     4 auto(av)   f        21    30 p    \n#&gt; 5 audi         a4      2.8  1999     6 auto(l5)   f        16    26 p    \n#&gt; 6 audi         a4      2.8  1999     6 manual(m5) f        18    26 p    \n#&gt; # â„¹ 228 more rows\n#&gt; # â„¹ 1 more variable: class &lt;chr&gt;\n\nmpg ä¸­çš„å˜é‡åŒ…æ‹¬ï¼š\n\ndisplï¼šæ±½è½¦çš„å‘åŠ¨æœºå°ºå¯¸ï¼Œå•ä½æ˜¯å‡ (liters)ã€‚è¿™æ˜¯ä¸€ä¸ªæ•°å€¼å˜é‡ã€‚\nhwyï¼šæ±½è½¦åœ¨é«˜é€Ÿå…¬è·¯ä¸Šçš„ç‡ƒæ²¹æ•ˆç‡ï¼Œå•ä½æ˜¯æ¯åŠ ä»‘è‹±é‡Œæ•° (miles per gallon, mpg)ã€‚ç‡ƒæ²¹æ•ˆç‡ä½çš„æ±½è½¦åœ¨è¡Œé©¶ç›¸åŒè·ç¦»æ—¶æ¯”ç‡ƒæ²¹æ•ˆç‡é«˜çš„æ±½è½¦æ¶ˆè€—æ›´å¤šçš„ç‡ƒæ–™ã€‚è¿™æ˜¯ä¸€ä¸ªæ•°å€¼å˜é‡ã€‚\nclassï¼šæ±½è½¦çš„ç±»å‹ã€‚è¿™æ˜¯ä¸€ä¸ªåˆ†ç±»å˜é‡ã€‚\n\næˆ‘ä»¬å…ˆä»å¯è§†åŒ–ä¸åŒ class çš„æ±½è½¦ä¸­ displ å’Œ hwy ä¹‹é—´çš„å…³ç³»å¼€å§‹ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªæ•£ç‚¹å›¾æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œå…¶ä¸­æ•°å€¼å˜é‡è¢«æ˜ å°„åˆ° x å’Œ y å›¾å½¢å±æ€§ï¼Œè€Œåˆ†ç±»å˜é‡è¢«æ˜ å°„åˆ°åƒ color æˆ– shape è¿™æ ·çš„å›¾å½¢å±æ€§ã€‚\n# å·¦\nggplot(mpg, aes(x = displ, y = hwy, color = class)) +\n  geom_point()\n\n# å³\nggplot(mpg, aes(x = displ, y = hwy, shape = class)) +\n  geom_point()\n#&gt; Warning: The shape palette can deal with a maximum of 6 discrete values because more\n#&gt; than 6 becomes difficult to discriminate\n#&gt; â„¹ you have requested 7 values. Consider specifying shapes manually if you\n#&gt;   need that many of them.\n#&gt; Warning: Removed 62 rows containing missing values or values outside the scale range\n#&gt; (`geom_point()`).\n\n\n\n\n\n\n\n\n\n\nå½“ class è¢«æ˜ å°„åˆ° shape æ—¶ï¼Œæˆ‘ä»¬ä¼šæ”¶åˆ°ä¸¤æ¡è­¦å‘Šï¼š\n\n1: The shape palette can deal with a maximum of 6 discrete values because more than 6 becomes difficult to discriminate; you have 7. Consider specifying shapes manually if you must have them. (å½¢çŠ¶è°ƒè‰²æ¿æœ€å¤šåªèƒ½å¤„ç† 6 ä¸ªç¦»æ•£å€¼ï¼Œå› ä¸ºè¶…è¿‡ 6 ä¸ªå°±å¾ˆéš¾åŒºåˆ†äº†ï¼›è€Œä½ æœ‰ 7 ä¸ªã€‚å¦‚æœå¿…é¡»ä½¿ç”¨ï¼Œè¯·è€ƒè™‘æ‰‹åŠ¨æŒ‡å®šå½¢çŠ¶ã€‚)\n2: Removed 62 rows containing missing values (geom_point()). (ç§»é™¤äº† 62 è¡ŒåŒ…å«ç¼ºå¤±å€¼çš„è®°å½• (geom_point()))\n\nç”±äº ggplot2 é»˜è®¤ä¸€æ¬¡åªä½¿ç”¨å…­ç§å½¢çŠ¶ï¼Œå½“ä½ ä½¿ç”¨å½¢çŠ¶å±æ€§æ—¶ï¼Œé¢å¤–çš„ç»„å°†ä¸ä¼šè¢«ç»˜åˆ¶ã€‚ç¬¬äºŒæ¡è­¦å‘Šä¸æ­¤ç›¸å…³â€”â€”æ•°æ®é›†ä¸­æœ‰ 62 è¾† SUV æ²¡æœ‰è¢«ç»˜åˆ¶å‡ºæ¥ã€‚\nç±»ä¼¼åœ°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°† class æ˜ å°„åˆ° size æˆ– alpha å›¾å½¢å±æ€§ï¼Œå®ƒä»¬åˆ†åˆ«æ§åˆ¶ç‚¹çš„å¤§å°å’Œé€æ˜åº¦ã€‚\n# å·¦\nggplot(mpg, aes(x = displ, y = hwy, size = class)) +\n  geom_point()\n#&gt; Warning: Using size for a discrete variable is not advised.\n\n# å³\nggplot(mpg, aes(x = displ, y = hwy, alpha = class)) +\n  geom_point()\n#&gt; Warning: Using alpha for a discrete variable is not advised.\n\n\n\n\n\n\n\n\n\n\nè¿™ä¸¤ä¸ªå›¾ä¹Ÿéƒ½ä¼šäº§ç”Ÿè­¦å‘Šï¼š\n\nUsing alpha for a discrete variable is not advised. (ä¸å»ºè®®å¯¹ç¦»æ•£å˜é‡ä½¿ç”¨ alphaã€‚)\n\nå°†ä¸€ä¸ªæ— åºçš„ç¦»æ•£ (åˆ†ç±») å˜é‡ (class) æ˜ å°„åˆ°ä¸€ä¸ªæœ‰åºçš„å›¾å½¢å±æ€§ (size æˆ– alpha) é€šå¸¸ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œå› ä¸ºå®ƒæš—ç¤ºäº†ä¸€ä¸ªå®é™…ä¸Šä¸å­˜åœ¨çš„æ’åºã€‚\nä¸€æ—¦ä½ æ˜ å°„äº†ä¸€ä¸ªå›¾å½¢å±æ€§ï¼Œggplot2 ä¼šå¤„ç†å‰©ä¸‹çš„äº‹æƒ…ã€‚å®ƒä¼šé€‰æ‹©ä¸€ä¸ªåˆç†çš„æ ‡åº¦ (scale) ä¸è¯¥å±æ€§ä¸€èµ·ä½¿ç”¨ï¼Œå¹¶æ„å»ºä¸€ä¸ªå›¾ä¾‹æ¥è§£é‡Šæ°´å¹³ (levels) å’Œå€¼ (values) ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚å¯¹äº x å’Œ y å›¾å½¢å±æ€§ï¼Œggplot2 ä¸ä¼šåˆ›å»ºå›¾ä¾‹ï¼Œä½†å®ƒä¼šåˆ›å»ºä¸€ä¸ªå¸¦æœ‰åˆ»åº¦æ ‡è®°å’Œæ ‡ç­¾çš„åæ ‡è½´ã€‚åæ ‡è½´çº¿æä¾›ä¸å›¾ä¾‹ç›¸åŒçš„ä¿¡æ¯ï¼›å®ƒè§£é‡Šäº†ä½ç½®å’Œå€¼ä¹‹é—´çš„æ˜ å°„ã€‚\nä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨è®¾ç½®å‡ ä½•å¯¹è±¡çš„è§†è§‰å±æ€§ï¼Œå°†å…¶ä½œä¸ºå‡ ä½•å¯¹è±¡å‡½æ•°çš„å‚æ•° (åœ¨ aes() ä¹‹å¤–)ï¼Œè€Œä¸æ˜¯ä¾èµ–äºå˜é‡æ˜ å°„æ¥å†³å®šå¤–è§‚ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿å›¾ä¸­æ‰€æœ‰çš„ç‚¹éƒ½ä¸ºè“è‰²ï¼š\n\nggplot(mpg, aes(x = displ, y = hwy)) + \n  geom_point(color = \"blue\")\n\n\n\n\n\n\n\nåœ¨è¿™é‡Œï¼Œé¢œè‰²å¹¶ä¸ä¼ è¾¾å…³äºå˜é‡çš„ä¿¡æ¯ï¼Œè€Œåªæ˜¯æ”¹å˜äº†å›¾çš„å¤–è§‚ã€‚ä½ éœ€è¦ä¸ºè¯¥å›¾å½¢å±æ€§é€‰æ‹©ä¸€ä¸ªæœ‰æ„ä¹‰çš„å€¼ï¼š\n\né¢œè‰²çš„åç§°ä½œä¸ºå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ color = \"blue\"\n\nç‚¹çš„å¤§å°ï¼Œå•ä½æ˜¯æ¯«ç±³ (mm)ï¼Œä¾‹å¦‚ size = 1\n\nç‚¹çš„å½¢çŠ¶ï¼Œç”¨æ•°å­—è¡¨ç¤ºï¼Œä¾‹å¦‚ shape = 1ï¼Œå¦‚ FigureÂ 9.1 æ‰€ç¤ºã€‚\n\n\n\n\n\n\n\n\nFigureÂ 9.1: R æœ‰ 26 ç§å†…ç½®å½¢çŠ¶ï¼Œç”¨æ•°å­—æ ‡è¯†ã€‚æœ‰ä¸€äº›çœ‹èµ·æ¥æ˜¯é‡å¤çš„ï¼šä¾‹å¦‚ï¼Œ0ã€15 å’Œ 22 éƒ½æ˜¯æ­£æ–¹å½¢ã€‚ åŒºåˆ«åœ¨äº color å’Œ fill å›¾å½¢å±æ€§çš„äº¤äº’ã€‚ ç©ºå¿ƒå½¢çŠ¶ (0-14) çš„è¾¹æ¡†ç”± color å†³å®šï¼› å®å¿ƒå½¢çŠ¶ (15-20) ç”¨ color å¡«å……ï¼›å¡«å……å½¢çŠ¶ (21-25) çš„è¾¹æ¡†æ˜¯ colorï¼Œå†…éƒ¨ç”¨ fill å¡«å……ã€‚ å½¢çŠ¶çš„æ’åˆ—æ˜¯ä¸ºäº†è®©ç›¸ä¼¼çš„å½¢çŠ¶ç›¸é‚»ã€‚\n\n\n\n\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»è®¨è®ºäº†åœ¨ä½¿ç”¨ç‚¹å‡ ä½•å¯¹è±¡ (point geom) åˆ¶ä½œæ•£ç‚¹å›¾æ—¶å¯ä»¥æ˜ å°„æˆ–è®¾ç½®çš„å›¾å½¢å±æ€§ã€‚ä½ å¯ä»¥åœ¨å›¾å½¢å±æ€§è§„èŒƒè¯´æ˜æ–‡æ¡£ https://ggplot2.tidyverse.org/articles/ggplot2-specs.html ä¸­äº†è§£æ‰€æœ‰å¯èƒ½çš„å›¾å½¢å±æ€§æ˜ å°„ã€‚\nä½ å¯ä»¥ä¸ºå›¾è¡¨ä½¿ç”¨çš„å…·ä½“å›¾å½¢å±æ€§å–å†³äºä½ ç”¨æ¥è¡¨ç¤ºæ•°æ®çš„å‡ ä½•å¯¹è±¡ (geom)ã€‚åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ›´æ·±å…¥åœ°æ¢è®¨å‡ ä½•å¯¹è±¡ã€‚\n\n9.2.1 ç»ƒä¹ \n\nåˆ›å»ºä¸€ä¸ª hwy å¯¹ displ çš„æ•£ç‚¹å›¾ï¼Œå…¶ä¸­çš„ç‚¹æ˜¯ç²‰è‰²å¡«å……çš„ä¸‰è§’å½¢ã€‚\n\nä¸ºä»€ä¹ˆä¸‹é¢çš„ä»£ç æ²¡æœ‰ç”Ÿæˆä¸€ä¸ªå¸¦æœ‰è“è‰²ç‚¹çš„å›¾ï¼Ÿ\n\nggplot(mpg) + \n  geom_point(aes(x = displ, y = hwy, color = \"blue\"))\n\n\nstroke å›¾å½¢å±æ€§æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿå®ƒé€‚ç”¨äºå“ªäº›å½¢çŠ¶ï¼Ÿï¼ˆæç¤ºï¼šä½¿ç”¨ ?geom_pointï¼‰\nå¦‚æœä½ å°†ä¸€ä¸ªå›¾å½¢å±æ€§æ˜ å°„åˆ°å˜é‡åä»¥å¤–çš„ä¸œè¥¿ï¼Œæ¯”å¦‚ aes(color = displ &lt; 5)ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿæ³¨æ„ï¼Œä½ è¿˜éœ€è¦æŒ‡å®š x å’Œ yã€‚",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>9</span>Â  <span class='chapter-title'>å›¾å±‚</span>"
    ]
  },
  {
    "objectID": "layers.html#sec-geometric-objects",
    "href": "layers.html#sec-geometric-objects",
    "title": "9Â  å›¾å±‚",
    "section": "\n9.3 å‡ ä½•å¯¹è±¡",
    "text": "9.3 å‡ ä½•å¯¹è±¡\nä¸‹é¢è¿™ä¸¤å¹…å›¾æœ‰ä½•ç›¸ä¼¼ä¹‹å¤„ï¼Ÿ\n\n\n\n\n\n\n\n\n\n\nä¸¤å¹…å›¾éƒ½åŒ…å«ç›¸åŒçš„ x å˜é‡ï¼Œç›¸åŒçš„ y å˜é‡ï¼Œå¹¶ä¸”éƒ½æè¿°äº†ç›¸åŒçš„æ•°æ®ã€‚ä½†è¿™ä¸¤å¹…å›¾å¹¶ä¸å®Œå…¨ç›¸åŒã€‚æ¯å¹…å›¾ä½¿ç”¨ä¸åŒçš„å‡ ä½•å¯¹è±¡ (geom) æ¥è¡¨ç¤ºæ•°æ®ã€‚å·¦è¾¹çš„å›¾ä½¿ç”¨ç‚¹å‡ ä½•å¯¹è±¡ (point geom)ï¼Œå³è¾¹çš„å›¾ä½¿ç”¨å¹³æ»‘å‡ ä½•å¯¹è±¡ (smooth geom)ï¼Œå³ä¸€æ¡æ‹Ÿåˆæ•°æ®çš„å¹³æ»‘çº¿ã€‚\nè¦æ”¹å˜å›¾ä¸­çš„å‡ ä½•å¯¹è±¡ï¼Œåªéœ€æ”¹å˜ä½ æ·»åŠ åˆ° ggplot() çš„å‡ ä½•å¯¹è±¡å‡½æ•°å³å¯ã€‚ä¾‹å¦‚ï¼Œè¦åˆ¶ä½œä¸Šé¢çš„å›¾ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š\n\n# å·¦å›¾\nggplot(mpg, aes(x = displ, y = hwy)) + \n  geom_point()\n\n# å³å›¾\nggplot(mpg, aes(x = displ, y = hwy)) + \n  geom_smooth()\n#&gt; `geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n\nggplot2 ä¸­çš„æ¯ä¸ªå‡ ä½•å¯¹è±¡å‡½æ•°éƒ½æ¥å—ä¸€ä¸ª mapping å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥åœ¨å‡ ä½•å¯¹è±¡å›¾å±‚ä¸­å±€éƒ¨å®šä¹‰ï¼Œä¹Ÿå¯ä»¥åœ¨ ggplot() å›¾å±‚ä¸­å…¨å±€å®šä¹‰ã€‚ç„¶è€Œï¼Œå¹¶éæ¯ä¸ªå›¾å½¢å±æ€§éƒ½é€‚ç”¨äºæ¯ä¸ªå‡ ä½•å¯¹è±¡ã€‚ä½ å¯ä»¥è®¾ç½®ä¸€ä¸ªç‚¹çš„å½¢çŠ¶ï¼Œä½†ä¸èƒ½è®¾ç½®ä¸€æ¡çº¿çš„â€œå½¢çŠ¶â€ã€‚å¦‚æœä½ å°è¯•è¿™æ ·åšï¼Œggplot2 ä¼šé»˜é»˜åœ°å¿½ç•¥è¯¥å›¾å½¢å±æ€§æ˜ å°„ã€‚å¦ä¸€æ–¹é¢ï¼Œä½ å¯ä»¥è®¾ç½®ä¸€æ¡çº¿çš„çº¿å‹ (linetype)ã€‚geom_smooth() ä¼šä¸ºæ˜ å°„åˆ°çº¿å‹çš„å˜é‡çš„æ¯ä¸ªå”¯ä¸€å€¼ç»˜åˆ¶ä¸€æ¡ä¸åŒçš„çº¿ï¼Œå…·æœ‰ä¸åŒçš„çº¿å‹ã€‚\n# å·¦å›¾\nggplot(mpg, aes(x = displ, y = hwy, shape = drv)) + \n  geom_smooth()\n\n# å³å›¾\nggplot(mpg, aes(x = displ, y = hwy, linetype = drv)) + \n  geom_smooth()\n\n\n\n\n\n\n\n\n\n\nåœ¨è¿™é‡Œï¼Œgeom_smooth() æ ¹æ®æ±½è½¦çš„ drv å€¼ï¼ˆæè¿°æ±½è½¦çš„é©±åŠ¨ç³»ç»Ÿï¼‰å°†æ±½è½¦åˆ†æˆä¸‰æ¡çº¿ã€‚ä¸€æ¡çº¿æè¿°æ‰€æœ‰ drv å€¼ä¸º 4 çš„ç‚¹ï¼Œä¸€æ¡çº¿æè¿°æ‰€æœ‰å€¼ä¸º f çš„ç‚¹ï¼Œè¿˜æœ‰ä¸€æ¡çº¿æè¿°æ‰€æœ‰å€¼ä¸º r çš„ç‚¹ã€‚åœ¨è¿™é‡Œï¼Œ4 ä»£è¡¨å››è½®é©±åŠ¨ (four-wheel drive)ï¼Œf ä»£è¡¨å‰è½®é©±åŠ¨ (front-wheel drive)ï¼Œr ä»£è¡¨åè½®é©±åŠ¨ (rear-wheel drive)ã€‚\nå¦‚æœè¿™å¬èµ·æ¥æœ‰äº›å¥‡æ€ªï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å°†çº¿æ¡å åŠ åœ¨åŸå§‹æ•°æ®ä¹‹ä¸Šï¼Œå¹¶æ ¹æ® drv å¯¹æ‰€æœ‰å…ƒç´ è¿›è¡Œç€è‰²ï¼Œæ¥ä½¿å…¶æ›´æ¸…æ™°ã€‚\n\nggplot(mpg, aes(x = displ, y = hwy, color = drv)) + \n  geom_point() +\n  geom_smooth(aes(linetype = drv))\n\n\n\n\n\n\n\nè¯·æ³¨æ„ï¼Œè¿™å¹…å›¾åœ¨åŒä¸€ä¸ªå›¾å½¢ä¸­åŒ…å«äº†ä¸¤ä¸ªå‡ ä½•å¯¹è±¡ã€‚\nè®¸å¤šå‡ ä½•å¯¹è±¡ï¼Œå¦‚ geom_smooth()ï¼Œä½¿ç”¨å•ä¸ªå‡ ä½•å¯¹è±¡æ¥æ˜¾ç¤ºå¤šè¡Œæ•°æ®ã€‚å¯¹äºè¿™äº›å‡ ä½•å¯¹è±¡ï¼Œä½ å¯ä»¥å°† group å›¾å½¢å±æ€§è®¾ç½®ä¸ºä¸€ä¸ªåˆ†ç±»å˜é‡ï¼Œä»¥ç»˜åˆ¶å¤šä¸ªå¯¹è±¡ã€‚ggplot2 ä¼šä¸ºåˆ†ç»„å˜é‡çš„æ¯ä¸ªå”¯ä¸€å€¼ç»˜åˆ¶ä¸€ä¸ªç‹¬ç«‹çš„å¯¹è±¡ã€‚å®é™…ä¸Šï¼Œæ¯å½“ä½ å°†ä¸€ä¸ªå›¾å½¢å±æ€§æ˜ å°„åˆ°ä¸€ä¸ªç¦»æ•£å˜é‡æ—¶ï¼ˆå¦‚ linetype çš„ä¾‹å­ï¼‰ï¼Œggplot2 éƒ½ä¼šè‡ªåŠ¨ä¸ºè¿™äº›å‡ ä½•å¯¹è±¡è¿›è¡Œæ•°æ®åˆ†ç»„ã€‚ä¾èµ–è¿™ä¸ªç‰¹æ€§å¾ˆæ–¹ä¾¿ï¼Œå› ä¸º group å›¾å½¢å±æ€§æœ¬èº«ä¸ä¼šä¸ºå‡ ä½•å¯¹è±¡æ·»åŠ å›¾ä¾‹æˆ–åŒºåˆ†ç‰¹å¾ã€‚\n# å·¦å›¾\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_smooth()\n\n# ä¸­é—´\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_smooth(aes(group = drv))\n\n# å³å›¾\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_smooth(aes(color = drv), show.legend = FALSE)\n\n\n\n\n\n\n\n\n\n\n\n\n\nå¦‚æœä½ å°†æ˜ å°„æ”¾åœ¨ä¸€ä¸ªå‡ ä½•å¯¹è±¡å‡½æ•°ä¸­ï¼Œggplot2 ä¼šå°†å®ƒä»¬è§†ä¸ºè¯¥å›¾å±‚çš„å±€éƒ¨æ˜ å°„ã€‚å®ƒå°†ä½¿ç”¨è¿™äº›æ˜ å°„æ¥æ‰©å±•æˆ–è¦†ç›–ä»…è¯¥å›¾å±‚çš„å…¨å±€æ˜ å°„ã€‚è¿™ä½¿å¾—åœ¨ä¸åŒå›¾å±‚ä¸­æ˜¾ç¤ºä¸åŒçš„å›¾å½¢å±æ€§æˆä¸ºå¯èƒ½ã€‚\n\nggplot(mpg, aes(x = displ, y = hwy)) + \n  geom_point(aes(color = class)) + \n  geom_smooth()\n\n\n\n\n\n\n\nä½ å¯ä»¥ä½¿ç”¨åŒæ ·çš„æƒ³æ³•ä¸ºæ¯ä¸ªå›¾å±‚æŒ‡å®šä¸åŒçš„ dataã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨çº¢ç‚¹å’Œç©ºå¿ƒåœ†æ¥çªå‡ºæ˜¾ç¤ºåŒåº§è½¦ã€‚geom_point() ä¸­çš„å±€éƒ¨æ•°æ®å‚æ•°ä¼šè¦†ç›– ggplot() ä¸­ä»…è¯¥å›¾å±‚çš„å…¨å±€æ•°æ®å‚æ•°ã€‚\n\nggplot(mpg, aes(x = displ, y = hwy)) + \n  geom_point() + \n  geom_point(\n    data = mpg |&gt; filter(class == \"2seater\"), \n    color = \"red\"\n  ) +\n  geom_point(\n    data = mpg |&gt; filter(class == \"2seater\"), \n    shape = \"circle open\", size = 3, color = \"red\"\n  )\n\n\n\n\n\n\n\nå‡ ä½•å¯¹è±¡æ˜¯ ggplot2 çš„åŸºæœ¬æ„å»ºæ¨¡å—ã€‚ä½ å¯ä»¥é€šè¿‡æ”¹å˜å…¶å‡ ä½•å¯¹è±¡æ¥å®Œå…¨æ”¹å˜å›¾çš„å¤–è§‚ï¼Œä¸åŒçš„å‡ ä½•å¯¹è±¡å¯ä»¥æ­ç¤ºä½ æ•°æ®çš„ä¸åŒç‰¹å¾ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ç›´æ–¹å›¾å’Œå¯†åº¦å›¾æ˜¾ç¤ºé«˜é€Ÿå…¬è·¯é‡Œç¨‹çš„åˆ†å¸ƒæ˜¯åŒå³°ä¸”å³åçš„ï¼Œè€Œç®±çº¿å›¾åˆ™æ­ç¤ºäº†ä¸¤ä¸ªæ½œåœ¨çš„å¼‚å¸¸å€¼ã€‚\n# å·¦å›¾\nggplot(mpg, aes(x = hwy)) +\n  geom_histogram(binwidth = 2)\n\n# ä¸­é—´\nggplot(mpg, aes(x = hwy)) +\n  geom_density()\n\n# å³å›¾\nggplot(mpg, aes(x = hwy)) +\n  geom_boxplot()\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot2 æä¾›äº†è¶…è¿‡ 40 ç§å‡ ä½•å¯¹è±¡ï¼Œä½†è¿™å¹¶ä¸èƒ½æ¶µç›–æ‰€æœ‰å¯èƒ½åˆ¶ä½œçš„å›¾ã€‚å¦‚æœä½ éœ€è¦ä¸€ç§ä¸åŒçš„å‡ ä½•å¯¹è±¡ï¼Œæˆ‘ä»¬å»ºè®®å…ˆæŸ¥çœ‹æ‰©å±•åŒ…ï¼Œçœ‹çœ‹æ˜¯å¦å·²ç»æœ‰äººå®ç°äº†å®ƒï¼ˆå‚è§ https://exts.ggplot2.tidyverse.org/gallery/ çš„ä¸€äº›ä¾‹å­ï¼‰ã€‚ä¾‹å¦‚ï¼Œggridges åŒ… (https://wilkelab.org/ggridges) å¯¹äºåˆ¶ä½œå±±è„Šå›¾ (ridgeline plots) å¾ˆæœ‰ç”¨ï¼Œè¿™å¯¹äºå¯è§†åŒ–ä¸€ä¸ªæ•°å€¼å˜é‡åœ¨ä¸åŒåˆ†ç±»å˜é‡æ°´å¹³ä¸Šçš„å¯†åº¦éå¸¸æœ‰ç”¨ã€‚åœ¨ä¸‹é¢çš„å›¾ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…ä½¿ç”¨äº†ä¸€ä¸ªæ–°çš„å‡ ä½•å¯¹è±¡ (geom_density_ridges())ï¼Œè¿˜å°†åŒä¸€ä¸ªå˜é‡æ˜ å°„åˆ°äº†å¤šä¸ªå›¾å½¢å±æ€§ï¼ˆdrv æ˜ å°„åˆ° yã€fill å’Œ colorï¼‰ï¼Œå¹¶è®¾ç½®äº†ä¸€ä¸ªå›¾å½¢å±æ€§ (alpha = 0.5) æ¥ä½¿å¯†åº¦æ›²çº¿é€æ˜ã€‚\n\nlibrary(ggridges)\n\nggplot(mpg, aes(x = hwy, y = drv, fill = drv, color = drv)) +\n  geom_density_ridges(alpha = 0.5, show.legend = FALSE)\n#&gt; Picking joint bandwidth of 1.28\n\n\n\n\n\n\n\nè¦å…¨é¢äº†è§£ ggplot2 æä¾›çš„æ‰€æœ‰å‡ ä½•å¯¹è±¡ä»¥åŠåŒ…ä¸­çš„æ‰€æœ‰å‡½æ•°ï¼Œæœ€å¥½çš„åœ°æ–¹æ˜¯å‚è€ƒé¡µé¢ï¼šhttps://ggplot2.tidyverse.org/referenceã€‚è¦äº†è§£ä»»ä½•å•ä¸ªå‡ ä½•å¯¹è±¡çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·ä½¿ç”¨å¸®åŠ©ï¼ˆä¾‹å¦‚ï¼Œ?geom_smoothï¼‰ã€‚\n\n9.3.1 ç»ƒä¹ \n\nä½ ä¼šç”¨ä»€ä¹ˆå‡ ä½•å¯¹è±¡æ¥ç»˜åˆ¶æŠ˜çº¿å›¾ï¼Ÿç®±çº¿å›¾ï¼Ÿç›´æ–¹å›¾ï¼Ÿé¢ç§¯å›¾ï¼Ÿ\n\nåœ¨æœ¬ç« å‰é¢ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† show.legend ä½†æ²¡æœ‰è§£é‡Šå®ƒï¼š\n\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_smooth(aes(color = drv), show.legend = FALSE)\n\nshow.legend = FALSE åœ¨è¿™é‡Œæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿå¦‚æœå»æ‰å®ƒä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿä½ è®¤ä¸ºæˆ‘ä»¬ä¹‹å‰ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒï¼Ÿ\n\ngeom_smooth() çš„ se å‚æ•°æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ\n\né‡æ–°åˆ›å»ºç”Ÿæˆä»¥ä¸‹å›¾å½¢æ‰€éœ€çš„ R ä»£ç ã€‚è¯·æ³¨æ„ï¼Œå›¾ä¸­å‡¡æ˜¯ä½¿ç”¨åˆ†ç±»å˜é‡çš„åœ°æ–¹ï¼Œéƒ½æ˜¯ drvã€‚",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>9</span>Â  <span class='chapter-title'>å›¾å±‚</span>"
    ]
  },
  {
    "objectID": "layers.html#åˆ†é¢",
    "href": "layers.html#åˆ†é¢",
    "title": "9Â  å›¾å±‚",
    "section": "\n9.4 åˆ†é¢",
    "text": "9.4 åˆ†é¢\nåœ¨ Chapter 1 ä¸­ï¼Œä½ å­¦ä¹ äº†ä½¿ç”¨ facet_wrap() è¿›è¡Œåˆ†é¢ï¼Œå®ƒæ ¹æ®ä¸€ä¸ªåˆ†ç±»å˜é‡å°†ä¸€ä¸ªå›¾åˆ†å‰²æˆå¤šä¸ªå­å›¾ï¼Œæ¯ä¸ªå­å›¾æ˜¾ç¤ºæ•°æ®çš„ä¸€ä¸ªå­é›†ã€‚\n\nggplot(mpg, aes(x = displ, y = hwy)) + \n  geom_point() + \n  facet_wrap(~cyl)\n\n\n\n\n\n\n\nè¦æ ¹æ®ä¸¤ä¸ªå˜é‡çš„ç»„åˆæ¥åˆ†é¢ä½ çš„å›¾ï¼Œè¯·ä» facet_wrap() åˆ‡æ¢åˆ° facet_grid()ã€‚facet_grid() çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå…¬å¼ï¼Œä½†ç°åœ¨å®ƒæ˜¯ä¸€ä¸ªåŒè¾¹å…¬å¼ï¼šrows ~ colsã€‚\n\nggplot(mpg, aes(x = displ, y = hwy)) + \n  geom_point() + \n  facet_grid(drv ~ cyl)\n\n\n\n\n\n\n\né»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªåˆ†é¢å…±äº«ç›¸åŒçš„ x è½´å’Œ y è½´çš„æ ‡åº¦ (scale) å’ŒèŒƒå›´ (range)ã€‚è¿™åœ¨ä½ æƒ³è¦è·¨åˆ†é¢æ¯”è¾ƒæ•°æ®æ—¶å¾ˆæœ‰ç”¨ï¼Œä½†å½“ä½ æƒ³è¦æ›´å¥½åœ°å¯è§†åŒ–æ¯ä¸ªåˆ†é¢å†…éƒ¨çš„å…³ç³»æ—¶ï¼Œè¿™å¯èƒ½ä¼šæœ‰é™åˆ¶ã€‚åœ¨åˆ†é¢å‡½æ•°ä¸­å°† scales å‚æ•°è®¾ç½®ä¸º \"free_x\" å°†å…è®¸è·¨åˆ—ä½¿ç”¨ä¸åŒçš„ x è½´æ ‡åº¦ï¼Œ\"free_y\" å°†å…è®¸è·¨è¡Œä½¿ç”¨ä¸åŒçš„ y è½´æ ‡åº¦ï¼Œè€Œ \"free\" å°†åŒæ—¶å…è®¸ä¸¤è€…ã€‚\n\nggplot(mpg, aes(x = displ, y = hwy)) + \n  geom_point() + \n  facet_grid(drv ~ cyl, scales = \"free\")\n\n\n\n\n\n\n\n\n9.4.1 ç»ƒä¹ \n\nå¦‚æœä½ å¯¹ä¸€ä¸ªè¿ç»­å˜é‡è¿›è¡Œåˆ†é¢ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ\n\nåœ¨ä¸Šé¢ä½¿ç”¨ facet_grid(drv ~ cyl) çš„å›¾ä¸­ï¼Œç©ºçš„å•å…ƒæ ¼æ„å‘³ç€ä»€ä¹ˆï¼Ÿè¿è¡Œä¸‹é¢çš„ä»£ç ã€‚å®ƒä»¬ä¸æœ€ç»ˆçš„å›¾æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ\n\nggplot(mpg) + \n  geom_point(aes(x = drv, y = cyl))\n\n\n\nä¸‹é¢çš„ä»£ç ç”Ÿæˆäº†ä»€ä¹ˆå›¾ï¼Ÿ. æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ\n\nggplot(mpg) + \n  geom_point(aes(x = displ, y = hwy)) +\n  facet_grid(drv ~ .)\n\nggplot(mpg) + \n  geom_point(aes(x = displ, y = hwy)) +\n  facet_grid(. ~ cyl)\n\n\n\nçœ‹æœ¬èŠ‚çš„ç¬¬ä¸€ä¸ªåˆ†é¢å›¾ï¼š\n\nggplot(mpg) + \n  geom_point(aes(x = displ, y = hwy)) + \n  facet_wrap(~ cyl, nrow = 2)\n\nä½¿ç”¨åˆ†é¢ä»£æ›¿é¢œè‰²å›¾å½¢å±æ€§æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿæœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿå¦‚æœä½ æœ‰ä¸€ä¸ªæ›´å¤§çš„æ•°æ®é›†ï¼Œè¿™ç§æƒè¡¡å¯èƒ½ä¼šå¦‚ä½•æ”¹å˜ï¼Ÿ\n\né˜…è¯» ?facet_wrapã€‚nrow æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿncol æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿè¿˜æœ‰å“ªäº›å…¶ä»–é€‰é¡¹å¯ä»¥æ§åˆ¶å•ä¸ªé¢æ¿çš„å¸ƒå±€ï¼Ÿä¸ºä»€ä¹ˆ facet_grid() æ²¡æœ‰ nrow å’Œ ncol å‚æ•°ï¼Ÿ\n\nä¸‹é¢çš„å“ªä¸ªå›¾æ›´å®¹æ˜“æ¯”è¾ƒä¸åŒé©±åŠ¨ç³»ç»Ÿæ±½è½¦çš„å‘åŠ¨æœºå°ºå¯¸ï¼ˆdisplï¼‰ï¼Ÿè¿™å¯¹äºä½•æ—¶å°†åˆ†é¢å˜é‡æ”¾åœ¨è¡Œæˆ–åˆ—ä¸Šæœ‰ä»€ä¹ˆå¯ç¤ºï¼Ÿ\n\nggplot(mpg, aes(x = displ)) + \n  geom_histogram() + \n  facet_grid(drv ~ .)\n\nggplot(mpg, aes(x = displ)) + \n  geom_histogram() +\n  facet_grid(. ~ drv)\n\n\n\nä½¿ç”¨ facet_wrap() è€Œä¸æ˜¯ facet_grid() é‡æ–°åˆ›å»ºä»¥ä¸‹å›¾ã€‚åˆ†é¢æ ‡ç­¾çš„ä½ç½®æœ‰ä½•å˜åŒ–ï¼Ÿ\n\nggplot(mpg) + \n  geom_point(aes(x = displ, y = hwy)) +\n  facet_grid(drv ~ .)",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>9</span>Â  <span class='chapter-title'>å›¾å±‚</span>"
    ]
  },
  {
    "objectID": "layers.html#ç»Ÿè®¡å˜æ¢",
    "href": "layers.html#ç»Ÿè®¡å˜æ¢",
    "title": "9Â  å›¾å±‚",
    "section": "\n9.5 ç»Ÿè®¡å˜æ¢",
    "text": "9.5 ç»Ÿè®¡å˜æ¢\nè€ƒè™‘ä¸€ä¸ªåŸºæœ¬çš„æ¡å½¢å›¾ï¼Œç”¨ geom_bar() æˆ– geom_col() ç»˜åˆ¶ã€‚ä¸‹é¢çš„å›¾è¡¨æ˜¾ç¤ºäº† diamonds æ•°æ®é›†ä¸­é’»çŸ³çš„æ€»æ•°ï¼ŒæŒ‰ cut åˆ†ç»„ã€‚diamonds æ•°æ®é›†åœ¨ ggplot2 åŒ…ä¸­ï¼ŒåŒ…å«äº†çº¦ 54,000 é¢—é’»çŸ³çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ¯é¢—é’»çŸ³çš„ priceã€caratã€colorã€clarity å’Œ cutã€‚è¯¥å›¾è¡¨æ˜¾ç¤ºï¼Œé«˜è´¨é‡åˆ‡å·¥çš„é’»çŸ³æ¯”ä½è´¨é‡åˆ‡å·¥çš„é’»çŸ³æ›´å¤šã€‚\n\nggplot(diamonds, aes(x = cut)) + \n  geom_bar()\n\n\n\n\n\n\n\nåœ¨ x è½´ä¸Šï¼Œå›¾è¡¨æ˜¾ç¤ºäº† cutï¼Œè¿™æ˜¯ diamonds ä¸­çš„ä¸€ä¸ªå˜é‡ã€‚åœ¨ y è½´ä¸Šï¼Œå®ƒæ˜¾ç¤ºäº†è®¡æ•° (count)ï¼Œä½†è®¡æ•°ä¸æ˜¯ diamonds ä¸­çš„ä¸€ä¸ªå˜é‡ï¼è®¡æ•°æ˜¯ä»å“ªé‡Œæ¥çš„ï¼Ÿè®¸å¤šå›¾å½¢ï¼Œæ¯”å¦‚æ•£ç‚¹å›¾ï¼Œç»˜åˆ¶çš„æ˜¯ä½ æ•°æ®é›†çš„åŸå§‹å€¼ã€‚è€Œå…¶ä»–å›¾å½¢ï¼Œæ¯”å¦‚æ¡å½¢å›¾ï¼Œä¼šè®¡ç®—æ–°çš„å€¼æ¥ç»˜åˆ¶ï¼š\n\næ¡å½¢å›¾ã€ç›´æ–¹å›¾å’Œé¢‘ç‡å¤šè¾¹å›¾ä¼šå¯¹ä½ çš„æ•°æ®è¿›è¡Œåˆ†ç®± (bin)ï¼Œç„¶åç»˜åˆ¶æ¯ä¸ªç®±ä¸­çš„è®¡æ•°ï¼Œå³è½å…¥æ¯ä¸ªç®±ä¸­çš„ç‚¹çš„æ•°é‡ã€‚\nå¹³æ»‘å™¨ (smoothers) ä¼šå¯¹ä½ çš„æ•°æ®æ‹Ÿåˆä¸€ä¸ªæ¨¡å‹ï¼Œç„¶åç»˜åˆ¶æ¨¡å‹çš„é¢„æµ‹å€¼ã€‚\nç®±çº¿å›¾ä¼šè®¡ç®—åˆ†å¸ƒçš„äº”æ•°æ¦‚æ‹¬ (five-number summary)ï¼Œç„¶åå°†è¯¥æ¦‚æ‹¬æ˜¾ç¤ºä¸ºä¸€ä¸ªç‰¹æ®Šæ ¼å¼çš„ç›’å­ã€‚\n\nç”¨äºä¸ºå›¾å½¢è®¡ç®—æ–°å€¼çš„ç®—æ³•è¢«ç§°ä¸º statï¼Œå³ç»Ÿè®¡å˜æ¢ (statistical transformation) çš„ç¼©å†™ã€‚FigureÂ 9.2 å±•ç¤ºäº†è¿™ä¸ªè¿‡ç¨‹å¦‚ä½•ä¸ geom_bar() ä¸€èµ·å·¥ä½œã€‚\n\n\n\n\n\n\n\nFigureÂ 9.2: åœ¨åˆ›å»ºæ¡å½¢å›¾æ—¶ï¼Œæˆ‘ä»¬é¦–å…ˆä»åŸå§‹æ•°æ®å¼€å§‹ï¼Œç„¶å å¯¹å…¶è¿›è¡Œèšåˆä»¥è®¡ç®—æ¯ä¸ªæ¡ä¸­çš„è§‚æµ‹æ•°é‡ï¼Œ æœ€åå°†è¿™äº›è®¡ç®—å‡ºçš„å˜é‡æ˜ å°„åˆ°å›¾çš„å›¾å½¢å±æ€§ä¸Šã€‚\n\n\n\n\nä½ å¯ä»¥é€šè¿‡æ£€æŸ¥ stat å‚æ•°çš„é»˜è®¤å€¼æ¥äº†è§£ä¸€ä¸ªå‡ ä½•å¯¹è±¡ä½¿ç”¨çš„æ˜¯å“ªä¸ª statã€‚ä¾‹å¦‚ï¼Œ?geom_bar æ˜¾ç¤º stat çš„é»˜è®¤å€¼æ˜¯ â€œcountâ€ï¼Œè¿™æ„å‘³ç€ geom_bar() ä½¿ç”¨ stat_count()ã€‚stat_count() ä¸ geom_bar() åœ¨åŒä¸€ä¸ªå¸®åŠ©é¡µé¢ä¸Šæœ‰æ–‡æ¡£ã€‚å¦‚æœä½ å‘ä¸‹æ»šåŠ¨ï¼Œåä¸ºâ€œComputed variablesâ€çš„éƒ¨åˆ†è§£é‡Šè¯´å®ƒè®¡ç®—äº†ä¸¤ä¸ªæ–°å˜é‡ï¼šcount å’Œ propã€‚\næ¯ä¸ªå‡ ä½•å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªé»˜è®¤çš„ statï¼›æ¯ä¸ª stat ä¹Ÿæœ‰ä¸€ä¸ªé»˜è®¤çš„å‡ ä½•å¯¹è±¡ã€‚è¿™æ„å‘³ç€ä½ é€šå¸¸å¯ä»¥ä½¿ç”¨å‡ ä½•å¯¹è±¡è€Œæ— éœ€æ‹…å¿ƒåº•å±‚çš„ç»Ÿè®¡å˜æ¢ã€‚ç„¶è€Œï¼Œæœ‰ä¸‰ä¸ªåŸå› å¯èƒ½è®©ä½ éœ€è¦æ˜ç¡®åœ°ä½¿ç”¨ä¸€ä¸ª statï¼š\n\n\nä½ å¯èƒ½æƒ³è¦†ç›–é»˜è®¤çš„ statã€‚åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å°† geom_bar() çš„ stat ä» countï¼ˆé»˜è®¤å€¼ï¼‰æ”¹ä¸º identityã€‚è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿå°†æ¡å½¢çš„é«˜åº¦æ˜ å°„åˆ° y å˜é‡çš„åŸå§‹å€¼ã€‚\n\ndiamonds |&gt;\n  count(cut) |&gt;\n  ggplot(aes(x = cut, y = n)) +\n  geom_bar(stat = \"identity\")\n\n\n\n\n\n\n\n\n\nä½ å¯èƒ½æƒ³è¦†ç›–ä»å˜æ¢åçš„å˜é‡åˆ°å›¾å½¢å±æ€§çš„é»˜è®¤æ˜ å°„ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½æƒ³æ˜¾ç¤ºä¸€ä¸ªæ¯”ä¾‹çš„æ¡å½¢å›¾ï¼Œè€Œä¸æ˜¯è®¡æ•°çš„æ¡å½¢å›¾ï¼š\n\nggplot(diamonds, aes(x = cut, y = after_stat(prop), group = 1)) + \n  geom_bar()\n\n\n\n\n\n\n\nè¦æŸ¥æ‰¾ stat å¯èƒ½è®¡ç®—çš„æ‰€æœ‰å˜é‡ï¼Œè¯·åœ¨ geom_bar() çš„å¸®åŠ©æ–‡æ¡£ä¸­æŸ¥æ‰¾æ ‡é¢˜ä¸ºâ€œcomputed variablesâ€ï¼ˆè®¡ç®—å˜é‡ï¼‰çš„éƒ¨åˆ†ã€‚\n\n\nä½ å¯èƒ½æƒ³åœ¨ä»£ç ä¸­æ›´ç€é‡åœ°çªå‡ºç»Ÿè®¡å˜æ¢ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½ä¼šä½¿ç”¨ stat_summary()ï¼Œå®ƒä¸ºæ¯ä¸ªå”¯ä¸€çš„ x å€¼æ€»ç»“ y å€¼ï¼Œä»¥çªå‡ºä½ æ­£åœ¨è®¡ç®—çš„æ‘˜è¦ï¼š\n\nggplot(diamonds) + \n  stat_summary(\n    aes(x = cut, y = depth),\n    fun.min = min,\n    fun.max = max,\n    fun = median\n  )\n\n\n\n\n\n\n\n\n\nggplot2 æä¾›äº†è¶…è¿‡ 20 ä¸ª stat ä¾›ä½ ä½¿ç”¨ã€‚æ¯ä¸ª stat éƒ½æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç”¨é€šå¸¸çš„æ–¹å¼è·å–å¸®åŠ©ï¼Œä¾‹å¦‚ ?stat_binã€‚\n\n9.5.1 ç»ƒä¹ \n\nä¸ stat_summary() å…³è”çš„é»˜è®¤å‡ ä½•å¯¹è±¡æ˜¯ä»€ä¹ˆï¼Ÿä½ å¦‚ä½•é‡å†™ä¸Šä¸€ä¸ªå›¾ï¼Œä½¿ç”¨è¯¥å‡ ä½•å¯¹è±¡å‡½æ•°è€Œä¸æ˜¯ stat å‡½æ•°ï¼Ÿ\ngeom_col() åšä»€ä¹ˆï¼Ÿå®ƒä¸ geom_bar() æœ‰ä½•ä¸åŒï¼Ÿ\nå¤§å¤šæ•°å‡ ä½•å¯¹è±¡å’Œç»Ÿè®¡å˜æ¢éƒ½æˆå¯¹å‡ºç°ï¼Œå‡ ä¹æ€»æ˜¯åŒæ—¶ä½¿ç”¨ã€‚åˆ—å‡ºæ‰€æœ‰çš„é…å¯¹ã€‚å®ƒä»¬æœ‰ä»€ä¹ˆå…±åŒç‚¹ï¼Ÿï¼ˆæç¤ºï¼šé€šè¯»æ–‡æ¡£ã€‚ï¼‰\nstat_smooth() è®¡ç®—å“ªäº›å˜é‡ï¼Ÿå“ªäº›å‚æ•°æ§åˆ¶å…¶è¡Œä¸ºï¼Ÿ\n\nåœ¨æˆ‘ä»¬çš„æ¯”ä¾‹æ¡å½¢å›¾ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½® group = 1ã€‚ä¸ºä»€ä¹ˆï¼Ÿæ¢å¥è¯è¯´ï¼Œä¸‹é¢è¿™ä¸¤å¼ å›¾æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ\n\nggplot(diamonds, aes(x = cut, y = after_stat(prop))) + \n  geom_bar()\nggplot(diamonds, aes(x = cut, fill = color, y = after_stat(prop))) + \n  geom_bar()",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>9</span>Â  <span class='chapter-title'>å›¾å±‚</span>"
    ]
  },
  {
    "objectID": "layers.html#ä½ç½®è°ƒæ•´",
    "href": "layers.html#ä½ç½®è°ƒæ•´",
    "title": "9Â  å›¾å±‚",
    "section": "\n9.6 ä½ç½®è°ƒæ•´",
    "text": "9.6 ä½ç½®è°ƒæ•´\næ¡å½¢å›¾è¿˜æœ‰å¦å¤–ä¸€ä¸ªç¥å¥‡ä¹‹å¤„ã€‚ä½ å¯ä»¥ä½¿ç”¨ color å›¾å½¢å±æ€§æ¥ä¸ºæ¡å½¢å›¾ä¸Šè‰²ï¼Œæˆ–è€…æ›´æœ‰ç”¨åœ°ï¼Œä½¿ç”¨ fill å›¾å½¢å±æ€§ï¼š\n# å·¦å›¾\nggplot(mpg, aes(x = drv, color = drv)) + \n  geom_bar()\n\n# å³å›¾\nggplot(mpg, aes(x = drv, fill = drv)) + \n  geom_bar()\n\n\n\n\n\n\n\n\n\n\næ³¨æ„ï¼Œå¦‚æœä½ å°† fill å›¾å½¢å±æ€§æ˜ å°„åˆ°å¦ä¸€ä¸ªå˜é‡ï¼Œæ¯”å¦‚ classï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼šæ¡å½¢ä¼šè‡ªåŠ¨å †å ã€‚æ¯ä¸ªå½©è‰²çŸ©å½¢ä»£è¡¨ drv å’Œ class çš„ä¸€ä¸ªç»„åˆã€‚\n\nggplot(mpg, aes(x = drv, fill = class)) + \n  geom_bar()\n\n\n\n\n\n\n\nå †å æ˜¯ä½¿ç”¨ç”± position å‚æ•°æŒ‡å®šçš„ä½ç½®è°ƒæ•´ (position adjustment) è‡ªåŠ¨æ‰§è¡Œçš„ã€‚å¦‚æœä½ ä¸æƒ³è¦å †å æ¡å½¢å›¾ï¼Œä½ å¯ä»¥ä½¿ç”¨å…¶ä»–ä¸‰ä¸ªé€‰é¡¹ä¹‹ä¸€ï¼š\"identity\"ã€\"dodge\" æˆ– \"fill\"ã€‚\n\n\nposition = \"identity\" ä¼šå°†æ¯ä¸ªå¯¹è±¡ç²¾ç¡®åœ°æ”¾ç½®åœ¨å®ƒåœ¨å›¾ä¸Šä¸‹æ–‡ä¸­æ‰€åœ¨çš„ä½ç½®ã€‚è¿™å¯¹æ¡å½¢å›¾ä¸æ˜¯å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºå®ƒä¼šä½¿å®ƒä»¬é‡å ã€‚ä¸ºäº†çœ‹åˆ°é‡å ï¼Œæˆ‘ä»¬è¦ä¹ˆéœ€è¦é€šè¿‡å°† alpha è®¾ç½®ä¸ºä¸€ä¸ªè¾ƒå°çš„å€¼æ¥ä½¿æ¡å½¢ç•¥å¾®é€æ˜ï¼Œè¦ä¹ˆé€šè¿‡è®¾ç½® fill = NA æ¥ä½¿å…¶å®Œå…¨é€æ˜ã€‚\n# å·¦å›¾\nggplot(mpg, aes(x = drv, fill = class)) + \n  geom_bar(alpha = 1/5, position = \"identity\")\n\n# å³å›¾\nggplot(mpg, aes(x = drv, color = class)) + \n  geom_bar(fill = NA, position = \"identity\")\n\n\n\n\n\n\n\n\n\n\nidentity ä½ç½®è°ƒæ•´å¯¹äºäºŒç»´å‡ ä½•å¯¹è±¡ï¼ˆå¦‚ç‚¹ï¼‰æ›´æœ‰ç”¨ï¼Œå®ƒæ˜¯é»˜è®¤è®¾ç½®ã€‚\n\nposition = \"fill\" çš„å·¥ä½œæ–¹å¼ç±»ä¼¼äºå †å ï¼Œä½†å®ƒä½¿æ¯ç»„å †å çš„æ¡å½¢å…·æœ‰ç›¸åŒçš„é«˜åº¦ã€‚è¿™ä½¿å¾—æ¯”è¾ƒå„ç»„ä¹‹é—´çš„æ¯”ä¾‹æ›´å®¹æ˜“ã€‚\n\nposition = \"dodge\" å°†é‡å çš„å¯¹è±¡ç›´æ¥å¹¶æ’æ”¾ç½®ã€‚è¿™ä½¿å¾—æ¯”è¾ƒå•ä¸ªå€¼æ›´å®¹æ˜“ã€‚\n# å·¦å›¾\nggplot(mpg, aes(x = drv, fill = class)) + \n  geom_bar(position = \"fill\")\n\n# å³å›¾\nggplot(mpg, aes(x = drv, fill = class)) + \n  geom_bar(position = \"dodge\")\n\n\n\n\n\n\n\n\n\n\n\n\nè¿˜æœ‰ä¸€ç§è°ƒæ•´ç±»å‹å¯¹æ¡å½¢å›¾æ²¡æœ‰ç”¨ï¼Œä½†å¯¹æ•£ç‚¹å›¾å¯èƒ½éå¸¸æœ‰ç”¨ã€‚å›æƒ³æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªæ•£ç‚¹å›¾ã€‚ä½ æ˜¯å¦æ³¨æ„åˆ°ï¼Œå°½ç®¡æ•°æ®é›†ä¸­æœ‰ 234 ä¸ªè§‚æµ‹å€¼ï¼Œä½†è¯¥å›¾åªæ˜¾ç¤ºäº† 126 ä¸ªç‚¹ï¼Ÿ\n\n\n\n\n\n\n\n\nhwy å’Œ displ çš„åŸºç¡€å€¼æ˜¯å››èˆäº”å…¥çš„ï¼Œæ‰€ä»¥ç‚¹å‡ºç°åœ¨ä¸€ä¸ªç½‘æ ¼ä¸Šï¼Œè®¸å¤šç‚¹ç›¸äº’é‡å ã€‚è¿™ä¸ªé—®é¢˜è¢«ç§°ä¸ºè¿‡åº¦ç»˜åˆ¶ (overplotting)ã€‚è¿™ç§æ’åˆ—æ–¹å¼ä½¿å¾—å¾ˆéš¾çœ‹å‡ºæ•°æ®çš„åˆ†å¸ƒã€‚æ•°æ®ç‚¹æ˜¯å‡åŒ€åœ°åˆ†å¸ƒåœ¨æ•´ä¸ªå›¾ä¸­ï¼Œè¿˜æ˜¯æœ‰ä¸€ä¸ªç‰¹æ®Šçš„ hwy å’Œ displ ç»„åˆåŒ…å«äº† 109 ä¸ªå€¼ï¼Ÿ\nä½ å¯ä»¥é€šè¿‡å°†ä½ç½®è°ƒæ•´è®¾ç½®ä¸º â€œjitterâ€ æ¥é¿å…è¿™ç§ç½‘æ ¼åŒ–ã€‚position = \"jitter\" ä¸ºæ¯ä¸ªç‚¹æ·»åŠ å°‘é‡éšæœºå™ªå£°ã€‚è¿™ä¼šä½¿ç‚¹æ•£å¼€ï¼Œå› ä¸ºä¸å¤ªå¯èƒ½æœ‰ä¸¤ä¸ªç‚¹ä¼šæ¥æ”¶åˆ°ç›¸åŒæ•°é‡çš„éšæœºå™ªå£°ã€‚\n\nggplot(mpg, aes(x = displ, y = hwy)) + \n  geom_point(position = \"jitter\")\n\n\n\n\n\n\n\næ·»åŠ éšæœºæ€§ä¼¼ä¹æ˜¯æ”¹è¿›ä½ çš„å›¾çš„ä¸€ç§å¥‡æ€ªæ–¹å¼ï¼Œä½†è™½ç„¶å®ƒä½¿ä½ çš„å›¾åœ¨å°å°ºåº¦ä¸Šä¸å¤ªå‡†ç¡®ï¼Œä½†å®ƒä½¿ä½ çš„å›¾åœ¨å¤§å°ºåº¦ä¸Šæ›´å…·æ­ç¤ºæ€§ã€‚å› ä¸ºè¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„æ“ä½œï¼Œggplot2 ä¸º geom_point(position = \"jitter\") æä¾›äº†ä¸€ä¸ªç®€å†™ï¼šgeom_jitter()ã€‚\nè¦äº†è§£æ›´å¤šå…³äºä½ç½®è°ƒæ•´çš„ä¿¡æ¯ï¼Œè¯·æŸ¥é˜…ä¸æ¯ä¸ªè°ƒæ•´ç›¸å…³çš„å¸®åŠ©é¡µé¢ï¼š?position_dodgeã€?position_fillã€?position_identityã€?position_jitter å’Œ ?position_stackã€‚\n\n9.6.1 ç»ƒä¹ \n\n\nä¸‹é¢çš„å›¾æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿä½ å¦‚ä½•æ”¹è¿›å®ƒï¼Ÿ\n\nggplot(mpg, aes(x = cty, y = hwy)) + \n  geom_point()\n\n\n\nè¿™ä¸¤å¼ å›¾æœ‰ä»€ä¹ˆä¸åŒï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ\n\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point()\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point(position = \"identity\")\n\n\ngeom_jitter() çš„å“ªäº›å‚æ•°æ§åˆ¶æŠ–åŠ¨çš„é‡ï¼Ÿ\næ¯”è¾ƒå’Œå¯¹æ¯” geom_jitter() å’Œ geom_count()ã€‚\ngeom_boxplot() çš„é»˜è®¤ä½ç½®è°ƒæ•´æ˜¯ä»€ä¹ˆï¼Ÿåˆ›å»ºä¸€ä¸ª mpg æ•°æ®é›†çš„å¯è§†åŒ–æ¥å±•ç¤ºå®ƒã€‚",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>9</span>Â  <span class='chapter-title'>å›¾å±‚</span>"
    ]
  },
  {
    "objectID": "layers.html#åæ ‡ç³»",
    "href": "layers.html#åæ ‡ç³»",
    "title": "9Â  å›¾å±‚",
    "section": "\n9.7 åæ ‡ç³»",
    "text": "9.7 åæ ‡ç³»\nåæ ‡ç³»å¯èƒ½æ˜¯ ggplot2 ä¸­æœ€å¤æ‚çš„éƒ¨åˆ†ã€‚é»˜è®¤çš„åæ ‡ç³»æ˜¯ç¬›å¡å°”åæ ‡ç³» (Cartesian coordinate system)ï¼Œå…¶ä¸­ x å’Œ y çš„ä½ç½®ç‹¬ç«‹åœ°å†³å®šæ¯ä¸ªç‚¹çš„ä½ç½®ã€‚è¿˜æœ‰å¦å¤–ä¸¤ç§å¶å°”æœ‰ç”¨çš„åæ ‡ç³»ã€‚\n\n\ncoord_quickmap() ä¸ºåœ°ç†åœ°å›¾æ­£ç¡®è®¾ç½®é•¿å®½æ¯”ã€‚å¦‚æœä½ ç”¨ ggplot2 ç»˜åˆ¶ç©ºé—´æ•°æ®ï¼Œè¿™ä¸€ç‚¹éå¸¸é‡è¦ã€‚æˆ‘ä»¬åœ¨è¿™æœ¬ä¹¦é‡Œæ²¡æœ‰ç©ºé—´è®¨è®ºåœ°å›¾ï¼Œä½†ä½ å¯ä»¥åœ¨ ggplot2: Elegant graphics for data analysis çš„ Maps ç« èŠ‚ ä¸­å­¦åˆ°æ›´å¤šã€‚\nnz &lt;- map_data(\"nz\")\n\nggplot(nz, aes(x = long, y = lat, group = group)) +\n  geom_polygon(fill = \"white\", color = \"black\")\n\nggplot(nz, aes(x = long, y = lat, group = group)) +\n  geom_polygon(fill = \"white\", color = \"black\") +\n  coord_quickmap()\n\n\n\n\n\n\n\n\n\n\n\n\ncoord_polar() ä½¿ç”¨æåæ ‡ (polar coordinates)ã€‚æåæ ‡æ­ç¤ºäº†æ¡å½¢å›¾å’Œé¸¡å† èŠ±å›¾ (Coxcomb chart) ä¹‹é—´ä¸€ä¸ªæœ‰è¶£çš„è”ç³»ã€‚\nbar &lt;- ggplot(data = diamonds) + \n  geom_bar(\n    mapping = aes(x = clarity, fill = clarity), \n    show.legend = FALSE,\n    width = 1\n  ) + \n  theme(aspect.ratio = 1)\n\nbar + coord_flip()\nbar + coord_polar()\n\n\n\n\n\n\n\n\n\n\n\n\n\n9.7.1 ç»ƒä¹ \n\nä½¿ç”¨ coord_polar() å°†ä¸€ä¸ªå †å æ¡å½¢å›¾å˜æˆä¸€ä¸ªé¥¼å›¾ã€‚\ncoord_quickmap() å’Œ coord_map() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n\nä¸‹é¢çš„å›¾å‘Šè¯‰ä½ åŸå¸‚å’Œé«˜é€Ÿå…¬è·¯ mpg ä¹‹é—´çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆ coord_fixed() å¾ˆé‡è¦ï¼Ÿgeom_abline() åšä»€ä¹ˆï¼Ÿ\n\nggplot(data = mpg, mapping = aes(x = cty, y = hwy)) +\n  geom_point() + \n  geom_abline() +\n  coord_fixed()",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>9</span>Â  <span class='chapter-title'>å›¾å±‚</span>"
    ]
  },
  {
    "objectID": "layers.html#å›¾å½¢çš„åˆ†å±‚è¯­æ³•",
    "href": "layers.html#å›¾å½¢çš„åˆ†å±‚è¯­æ³•",
    "title": "9Â  å›¾å±‚",
    "section": "\n9.8 å›¾å½¢çš„åˆ†å±‚è¯­æ³•",
    "text": "9.8 å›¾å½¢çš„åˆ†å±‚è¯­æ³•\næˆ‘ä»¬å¯ä»¥æ‰©å±•ä½ åœ¨ Section 1.3 ä¸­å­¦åˆ°çš„ç»˜å›¾æ¨¡æ¿ï¼ŒåŠ å…¥ä½ç½®è°ƒæ•´ã€ç»Ÿè®¡å˜æ¢ã€åæ ‡ç³»å’Œåˆ†é¢ï¼š\nggplot(data = &lt;DATA&gt;) + \n  &lt;GEOM_FUNCTION&gt;(\n     mapping = aes(&lt;MAPPINGS&gt;),\n     stat = &lt;STAT&gt;, \n     position = &lt;POSITION&gt;\n  ) +\n  &lt;COORDINATE_FUNCTION&gt; +\n  &lt;FACET_FUNCTION&gt;\næˆ‘ä»¬çš„æ–°æ¨¡æ¿æœ‰ä¸ƒä¸ªå‚æ•°ï¼Œå³æ¨¡æ¿ä¸­å‡ºç°çš„å¸¦æ‹¬å·çš„è¯ã€‚å®é™…ä¸Šï¼Œä½ å¾ˆå°‘éœ€è¦æä¾›æ‰€æœ‰ä¸ƒä¸ªå‚æ•°æ¥åˆ¶ä½œä¸€ä¸ªå›¾ï¼Œå› ä¸º ggplot2 ä¼šä¸ºé™¤äº†æ•°æ®ã€æ˜ å°„å’Œå‡ ä½•å¯¹è±¡å‡½æ•°ä¹‹å¤–çš„æ‰€æœ‰ä¸œè¥¿æä¾›æœ‰ç”¨çš„é»˜è®¤å€¼ã€‚\næ¨¡æ¿ä¸­çš„ä¸ƒä¸ªå‚æ•°æ„æˆäº†å›¾å½¢çš„è¯­æ³• (grammar of graphics)ï¼Œä¸€ä¸ªç”¨äºæ„å»ºå›¾çš„æ­£å¼ç³»ç»Ÿã€‚å›¾å½¢çš„è¯­æ³•åŸºäºè¿™æ ·ä¸€ä¸ªæ´è§ï¼šä½ å¯ä»¥å°†ä»»ä½•å›¾å”¯ä¸€åœ°æè¿°ä¸ºä¸€ä¸ªæ•°æ®é›†ã€ä¸€ä¸ªå‡ ä½•å¯¹è±¡ã€ä¸€ç»„æ˜ å°„ã€ä¸€ä¸ªç»Ÿè®¡å˜æ¢ã€ä¸€ä¸ªä½ç½®è°ƒæ•´ã€ä¸€ä¸ªåæ ‡ç³»ã€ä¸€ä¸ªåˆ†é¢æ–¹æ¡ˆå’Œä¸€ä¸ªä¸»é¢˜çš„ç»„åˆã€‚\nè¦äº†è§£è¿™æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œå¯ä»¥è€ƒè™‘å¦‚ä½•ä»å¤´å¼€å§‹æ„å»ºä¸€ä¸ªåŸºæœ¬çš„å›¾ï¼šä½ å¯ä»¥ä»ä¸€ä¸ªæ•°æ®é›†å¼€å§‹ï¼Œç„¶åå°†å…¶è½¬æ¢ä¸ºä½ æƒ³è¦æ˜¾ç¤ºçš„ä¿¡æ¯ï¼ˆé€šè¿‡ä¸€ä¸ª statï¼‰ã€‚æ¥ä¸‹æ¥ï¼Œä½ å¯ä»¥é€‰æ‹©ä¸€ä¸ªå‡ ä½•å¯¹è±¡æ¥ä»£è¡¨å˜æ¢åæ•°æ®ä¸­çš„æ¯ä¸ªè§‚æµ‹å€¼ã€‚ç„¶åï¼Œä½ å¯ä»¥ä½¿ç”¨å‡ ä½•å¯¹è±¡çš„å›¾å½¢å±æ€§æ¥ä»£è¡¨æ•°æ®ä¸­çš„å˜é‡ã€‚ä½ ä¼šå°†æ¯ä¸ªå˜é‡çš„å€¼æ˜ å°„åˆ°ä¸€ä¸ªå›¾å½¢å±æ€§çš„æ°´å¹³ä¸Šã€‚è¿™äº›æ­¥éª¤åœ¨ FigureÂ 9.3 ä¸­æœ‰æ‰€è¯´æ˜ã€‚ç„¶åï¼Œä½ ä¼šé€‰æ‹©ä¸€ä¸ªåæ ‡ç³»æ¥æ”¾ç½®è¿™äº›å‡ ä½•å¯¹è±¡ï¼Œä½¿ç”¨å¯¹è±¡çš„ä½ç½®ï¼ˆå…¶æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå›¾å½¢å±æ€§ï¼‰æ¥æ˜¾ç¤º x å’Œ y å˜é‡çš„å€¼ã€‚\n\n\n\n\n\n\n\nFigureÂ 9.3: ä»åŸå§‹æ•°æ®åˆ°é¢‘ç‡è¡¨ï¼Œå†åˆ°æ¡å½¢å›¾çš„æ­¥éª¤ï¼Œ å…¶ä¸­æ¡å½¢çš„é«˜åº¦ä»£è¡¨é¢‘ç‡ã€‚\n\n\n\n\næ­¤æ—¶ï¼Œä½ å·²ç»æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„å›¾ï¼Œä½†ä½ å¯ä»¥è¿›ä¸€æ­¥è°ƒæ•´å‡ ä½•å¯¹è±¡åœ¨åæ ‡ç³»å†…çš„ä½ç½®ï¼ˆä½ç½®è°ƒæ•´ï¼‰æˆ–å°†å›¾åˆ†å‰²æˆå­å›¾ï¼ˆåˆ†é¢ï¼‰ã€‚ä½ è¿˜å¯ä»¥é€šè¿‡æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªé¢å¤–çš„å›¾å±‚æ¥æ‰©å±•è¯¥å›¾ï¼Œå…¶ä¸­æ¯ä¸ªé¢å¤–çš„å›¾å±‚ä½¿ç”¨ä¸€ä¸ªæ•°æ®é›†ã€ä¸€ä¸ªå‡ ä½•å¯¹è±¡ã€ä¸€ç»„æ˜ å°„ã€ä¸€ä¸ªç»Ÿè®¡å˜æ¢å’Œä¸€ä¸ªä½ç½®è°ƒæ•´ã€‚\nä½ å¯ä»¥ç”¨è¿™ç§æ–¹æ³•æ¥æ„å»ºä½ æƒ³è±¡ä¸­çš„ä»»ä½•å›¾ã€‚æ¢å¥è¯è¯´ï¼Œä½ å¯ä»¥ç”¨ä½ åœ¨æœ¬ç« å­¦åˆ°çš„ä»£ç æ¨¡æ¿æ¥æ„å»ºæˆåƒä¸Šä¸‡ä¸ªç‹¬ç‰¹çš„å›¾ã€‚\nå¦‚æœä½ æƒ³æ›´å¤šåœ°äº†è§£ ggplot2 çš„ç†è®ºåŸºç¡€ï¼Œä½ å¯èƒ½ä¼šå–œæ¬¢é˜…è¯» â€œThe Layered Grammar of Graphicsâ€ï¼Œè¿™ç¯‡ç§‘å­¦è®ºæ–‡è¯¦ç»†æè¿°äº† ggplot2 çš„ç†è®ºã€‚",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>9</span>Â  <span class='chapter-title'>å›¾å±‚</span>"
    ]
  },
  {
    "objectID": "layers.html#æ€»ç»“",
    "href": "layers.html#æ€»ç»“",
    "title": "9Â  å›¾å±‚",
    "section": "\n9.9 æ€»ç»“",
    "text": "9.9 æ€»ç»“\nåœ¨æœ¬ç« ä¸­ï¼Œä½ å­¦ä¹ äº†å›¾å½¢çš„åˆ†å±‚è¯­æ³•ï¼Œä»å›¾å½¢å±æ€§å’Œå‡ ä½•å¯¹è±¡å¼€å§‹æ„å»ºç®€å•çš„å›¾ï¼Œç”¨åˆ†é¢å°†å›¾åˆ†å‰²æˆå­é›†ï¼Œç”¨ç»Ÿè®¡å˜æ¢æ¥ç†è§£å‡ ä½•å¯¹è±¡æ˜¯å¦‚ä½•è®¡ç®—çš„ï¼Œç”¨ä½ç½®è°ƒæ•´æ¥æ§åˆ¶å‡ ä½•å¯¹è±¡å¯èƒ½é‡å æ—¶çš„ä½ç½®ç»†èŠ‚ï¼Œä»¥åŠç”¨åæ ‡ç³»æ¥ä»æ ¹æœ¬ä¸Šæ”¹å˜ x å’Œ y çš„å«ä¹‰ã€‚æˆ‘ä»¬å°šæœªæ¶‰åŠçš„ä¸€ä¸ªå›¾å±‚æ˜¯ä¸»é¢˜ (theme)ï¼Œæˆ‘ä»¬å°†åœ¨ Section 11.5 ä¸­ä»‹ç»å®ƒã€‚\nè¦å…¨é¢äº†è§£ ggplot2 çš„åŠŸèƒ½ï¼Œæœ‰ä¸¤ä¸ªéå¸¸æœ‰ç”¨çš„èµ„æºï¼šggplot2 é€ŸæŸ¥è¡¨ï¼ˆä½ å¯ä»¥åœ¨ https://posit.co/resources/cheatsheets æ‰¾åˆ°ï¼‰å’Œ ggplot2 åŒ…ç½‘ç«™ (https://ggplot2.tidyverse.org)ã€‚\nä½ åº”è¯¥ä»æœ¬ç« ä¸­å­¦åˆ°çš„ä¸€ä¸ªé‡è¦æ•™è®­æ˜¯ï¼Œå½“ä½ è§‰å¾—éœ€è¦ä¸€ä¸ª ggplot2 æœªæä¾›çš„å‡ ä½•å¯¹è±¡æ—¶ï¼Œå…ˆçœ‹çœ‹æ˜¯å¦å·²ç»æœ‰äººé€šè¿‡åˆ›å»ºä¸€ä¸ªæä¾›è¯¥å‡ ä½•å¯¹è±¡çš„ ggplot2 æ‰©å±•åŒ…è§£å†³äº†ä½ çš„é—®é¢˜ï¼Œè¿™æ€»æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>9</span>Â  <span class='chapter-title'>å›¾å±‚</span>"
    ]
  },
  {
    "objectID": "EDA.html",
    "href": "EDA.html",
    "title": "10Â  æ¢ç´¢æ€§æ•°æ®åˆ†æ",
    "section": "",
    "text": "10.1 å¼•è¨€\næœ¬ç« å°†å‘ä½ å±•ç¤ºå¦‚ä½•ä½¿ç”¨å¯è§†åŒ–å’Œè½¬æ¢æ¥ç³»ç»Ÿåœ°æ¢ç´¢æ•°æ®ï¼Œç»Ÿè®¡å­¦å®¶ç§°è¿™é¡¹ä»»åŠ¡ä¸ºæ¢ç´¢æ€§æ•°æ®åˆ†æ (exploratory data analysis)ï¼Œç®€ç§° EDAã€‚ EDA æ˜¯ä¸€ä¸ªè¿­ä»£å¾ªç¯ã€‚ ä½ éœ€è¦ï¼š\nEDA ä¸æ˜¯ä¸€ä¸ªæœ‰ç€ä¸¥æ ¼è§„åˆ™çš„æ­£å¼æµç¨‹ã€‚ æ›´é‡è¦çš„æ˜¯ï¼ŒEDA æ˜¯ä¸€ç§æ€ç»´çŠ¶æ€ã€‚ åœ¨ EDA çš„åˆå§‹é˜¶æ®µï¼Œä½ åº”è¯¥è‡ªç”±åœ°æ¢ç´¢ä½ è„‘æµ·ä¸­å‡ºç°çš„æ¯ä¸€ä¸ªæƒ³æ³•ã€‚ æœ‰äº›æƒ³æ³•ä¼šæˆåŠŸï¼Œæœ‰äº›åˆ™ä¼šæ˜¯æ­»èƒ¡åŒã€‚ éšç€æ¢ç´¢çš„æ·±å…¥ï¼Œä½ å°†é€æ¸èšç„¦äºä¸€äº›ç‰¹åˆ«å¯Œæœ‰æˆæ•ˆçš„è§è§£ï¼Œå¹¶æœ€ç»ˆå°†å®ƒä»¬æ•´ç†æˆæ–‡ï¼Œä¸ä»–äººäº¤æµã€‚\nEDA æ˜¯ä»»ä½•æ•°æ®åˆ†æçš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå³ä½¿ä¸»è¦çš„ç ”ç©¶é—®é¢˜å·²ç»ç°æˆåœ°äº¤ç»™ä½ ï¼Œå› ä¸ºä½ æ€»æ˜¯éœ€è¦è°ƒæŸ¥æ•°æ®çš„è´¨é‡ã€‚ æ•°æ®æ¸…ç†åªæ˜¯ EDA çš„ä¸€ä¸ªåº”ç”¨ï¼šä½ æå‡ºå…³äºæ•°æ®æ˜¯å¦ç¬¦åˆé¢„æœŸçš„é—®é¢˜ã€‚ è¦è¿›è¡Œæ•°æ®æ¸…ç†ï¼Œä½ éœ€è¦è¿ç”¨æ‰€æœ‰ EDA çš„å·¥å…·ï¼šå¯è§†åŒ–ã€è½¬æ¢å’Œå»ºæ¨¡ã€‚",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>10</span>Â  <span class='chapter-title'>æ¢ç´¢æ€§æ•°æ®åˆ†æ</span>"
    ]
  },
  {
    "objectID": "EDA.html#å¼•è¨€",
    "href": "EDA.html#å¼•è¨€",
    "title": "10Â  æ¢ç´¢æ€§æ•°æ®åˆ†æ",
    "section": "",
    "text": "ç”Ÿæˆå…³äºæ•°æ®çš„é—®é¢˜ã€‚\né€šè¿‡å¯è§†åŒ–ã€è½¬æ¢å’Œå»ºæ¨¡æ¥å¯»æ‰¾ç­”æ¡ˆã€‚\nåˆ©ç”¨ä½ å­¦åˆ°çš„çŸ¥è¯†æ¥å®Œå–„ä½ çš„é—®é¢˜å’Œ/æˆ–ç”Ÿæˆæ–°çš„é—®é¢˜ã€‚\n\n\n\n\n10.1.1 å…ˆå†³æ¡ä»¶\nåœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†ç»“åˆä½ æ‰€å­¦çš„ dplyr å’Œ ggplot2 çŸ¥è¯†ï¼Œä»¥äº¤äº’æ–¹å¼æå‡ºé—®é¢˜ï¼Œç”¨æ•°æ®å›ç­”é—®é¢˜ï¼Œç„¶åå†æå‡ºæ–°çš„é—®é¢˜ã€‚\n\nlibrary(tidyverse)",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>10</span>Â  <span class='chapter-title'>æ¢ç´¢æ€§æ•°æ®åˆ†æ</span>"
    ]
  },
  {
    "objectID": "EDA.html#é—®é¢˜",
    "href": "EDA.html#é—®é¢˜",
    "title": "10Â  æ¢ç´¢æ€§æ•°æ®åˆ†æ",
    "section": "\n10.2 é—®é¢˜",
    "text": "10.2 é—®é¢˜\n\nâ€œæ²¡æœ‰å¸¸è§„çš„ç»Ÿè®¡é—®é¢˜ï¼Œåªæœ‰å€¼å¾—æ€€ç–‘çš„ç»Ÿè®¡ç¨‹åºã€‚(The greatest value of a picture is when it forces us to notice what we never expected to see.)â€\nâ€” David Cox\n\n\nâ€œå¯¹æ­£ç¡®é—®é¢˜çš„è¿‘ä¼¼ç­”æ¡ˆï¼Œè¿œèƒœäºå¯¹é”™è¯¯é—®é¢˜çš„ç²¾ç¡®ç­”æ¡ˆï¼›å‰è€…é€šå¸¸æ˜¯æ¨¡ç³Šçš„ï¼Œè€Œåè€…æ€»æ˜¯å¯ä»¥åšå¾—å¾ˆç²¾ç¡®ã€‚(Far better an approximate answer to the right question, which is often vague, than an exact answer to the wrong question, which can always be made precise.)â€\nâ€” John Tukey\n\nä½ åœ¨ EDA è¿‡ç¨‹ä¸­çš„ç›®æ ‡æ˜¯å»ºç«‹å¯¹æ•°æ®çš„ç†è§£ã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨é—®é¢˜ä½œä¸ºå·¥å…·æ¥å¼•å¯¼ä½ çš„æ¢ç´¢ã€‚å½“ä½ æå‡ºä¸€ä¸ªé—®é¢˜æ—¶ï¼Œè¿™ä¸ªé—®é¢˜ä¼šå°†ä½ çš„æ³¨æ„åŠ›é›†ä¸­åˆ°æ•°æ®é›†çš„ç‰¹å®šéƒ¨åˆ†ï¼Œå¹¶å¸®åŠ©ä½ å†³å®šåˆ¶ä½œå“ªç§å›¾è¡¨ã€æ¨¡å‹æˆ–è¿›è¡Œä½•ç§è½¬æ¢ã€‚\nEDA æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåˆ›é€ æ€§çš„è¿‡ç¨‹ã€‚å’Œå¤§å¤šæ•°åˆ›é€ æ€§è¿‡ç¨‹ä¸€æ ·ï¼Œæå‡ºé«˜è´¨é‡é—®é¢˜çš„å…³é”®åœ¨äºç”Ÿæˆå¤§é‡çš„é—®é¢˜ã€‚åœ¨åˆ†æä¹‹åˆå¾ˆéš¾æå‡ºæœ‰å¯å‘æ€§çš„é—®é¢˜ï¼Œå› ä¸ºä½ ä¸çŸ¥é“å¯ä»¥ä»æ•°æ®é›†ä¸­è·å¾—å“ªäº›è§è§£ã€‚å¦ä¸€æ–¹é¢ï¼Œä½ æ¯æå‡ºä¸€ä¸ªæ–°é—®é¢˜ï¼Œéƒ½ä¼šè®©ä½ æ¥è§¦åˆ°æ•°æ®çš„ä¸€ä¸ªæ–°æ–¹é¢ï¼Œå¢åŠ ä½ åšå‡ºå‘ç°çš„æœºä¼šã€‚å¦‚æœä½ åœ¨æ¯ä¸ªé—®é¢˜ä¹‹åï¼Œéƒ½æ ¹æ®ä½ çš„å‘ç°æå‡ºä¸€ä¸ªæ–°é—®é¢˜ï¼Œä½ å°±èƒ½è¿…é€Ÿæ·±å…¥åˆ°æ•°æ®æœ€æœ‰è¶£çš„éƒ¨åˆ†ï¼Œå¹¶å½¢æˆä¸€ç³»åˆ—å¼•äººæ·±æ€çš„é—®é¢˜ã€‚\nå…³äºåº”è¯¥æå‡ºä»€ä¹ˆé—®é¢˜æ¥æŒ‡å¯¼ç ”ç©¶ï¼Œæ²¡æœ‰å›ºå®šçš„è§„åˆ™ã€‚ç„¶è€Œï¼Œæœ‰ä¸¤ç±»é—®é¢˜å¯¹äºåœ¨æ•°æ®ä¸­åšå‡ºå‘ç°æ€»æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ä½ å¯ä»¥å°†è¿™äº›é—®é¢˜ç²—ç•¥åœ°è¡¨è¿°ä¸ºï¼š\n\næˆ‘çš„å˜é‡å†…éƒ¨å­˜åœ¨ä»€ä¹ˆæ ·çš„å˜å¼‚ï¼Ÿ\næˆ‘çš„å˜é‡ä¹‹é—´å­˜åœ¨ä»€ä¹ˆæ ·çš„åå˜ï¼Ÿ\n\næœ¬ç« çš„å…¶ä½™éƒ¨åˆ†å°†æ¢è®¨è¿™ä¸¤ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬å°†è§£é‡Šä»€ä¹ˆæ˜¯å˜å¼‚å’Œåå˜ï¼Œå¹¶å‘ä½ å±•ç¤ºå‡ ç§å›ç­”æ¯ä¸ªé—®é¢˜çš„æ–¹æ³•ã€‚",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>10</span>Â  <span class='chapter-title'>æ¢ç´¢æ€§æ•°æ®åˆ†æ</span>"
    ]
  },
  {
    "objectID": "EDA.html#å˜å¼‚",
    "href": "EDA.html#å˜å¼‚",
    "title": "10Â  æ¢ç´¢æ€§æ•°æ®åˆ†æ",
    "section": "\n10.3 å˜å¼‚",
    "text": "10.3 å˜å¼‚\nå˜å¼‚ (Variation) æ˜¯æŒ‡ä¸€ä¸ªå˜é‡çš„å€¼åœ¨ä¸åŒæµ‹é‡ä¸­å˜åŒ–çš„è¶‹åŠ¿ã€‚ä½ åœ¨ç°å®ç”Ÿæ´»ä¸­å¯ä»¥è½»æ˜“çœ‹åˆ°å˜å¼‚ï¼›å¦‚æœä½ å¯¹ä»»ä½•è¿ç»­å˜é‡è¿›è¡Œä¸¤æ¬¡æµ‹é‡ï¼Œä½ ä¼šå¾—åˆ°ä¸¤ä¸ªä¸åŒçš„ç»“æœã€‚å³ä½¿ä½ æµ‹é‡çš„æ˜¯æ’å®šçš„é‡ï¼Œæ¯”å¦‚å…‰é€Ÿï¼Œä¹Ÿæ˜¯å¦‚æ­¤ã€‚ä½ çš„æ¯ä¸€æ¬¡æµ‹é‡éƒ½ä¼šåŒ…å«å°‘é‡çš„è¯¯å·®ï¼Œè¿™ä¸ªè¯¯å·®åœ¨æ¯æ¬¡æµ‹é‡ä¸­éƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚å¦‚æœä½ åœ¨ä¸åŒçš„ä¸»ä½“ï¼ˆä¾‹å¦‚ï¼Œä¸åŒäººçš„çœ¼ç›é¢œè‰²ï¼‰æˆ–ä¸åŒçš„æ—¶é—´ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªç”µå­åœ¨ä¸åŒæ—¶åˆ»çš„èƒ½é‡æ°´å¹³ï¼‰è¿›è¡Œæµ‹é‡ï¼Œå˜é‡ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚æ¯ä¸ªå˜é‡éƒ½æœ‰å…¶è‡ªèº«çš„å˜å¼‚æ¨¡å¼ï¼Œè¿™å¯ä»¥æ­ç¤ºå…³äºå®ƒåœ¨åŒä¸€æ¬¡è§‚æµ‹çš„ä¸åŒæµ‹é‡ä¹‹é—´ä»¥åŠè·¨è§‚æµ‹ä¹‹é—´å¦‚ä½•å˜åŒ–çš„æœ‰è¶£ä¿¡æ¯ã€‚ç†è§£è¿™ç§æ¨¡å¼çš„æœ€ä½³æ–¹æ³•æ˜¯å¯è§†åŒ–å˜é‡å€¼çš„åˆ†å¸ƒï¼Œè¿™åœ¨ Chapter 1 ä¸­ä½ å·²ç»å­¦è¿‡äº†ã€‚\næˆ‘ä»¬å°†é€šè¿‡å¯è§†åŒ– diamonds æ•°æ®é›†ä¸­çº¦ 54,000 é¢—é’»çŸ³çš„é‡é‡ï¼ˆcaratï¼‰åˆ†å¸ƒæ¥å¼€å§‹æˆ‘ä»¬çš„æ¢ç´¢ã€‚ç”±äº carat æ˜¯ä¸€ä¸ªæ•°å€¼å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç›´æ–¹å›¾ï¼š\n\nggplot(diamonds, aes(x = carat)) +\n  geom_histogram(binwidth = 0.5)\n\n\n\n\n\n\n\nç°åœ¨ä½ å·²ç»å¯ä»¥å¯è§†åŒ–å˜å¼‚äº†ï¼Œé‚£ä¹ˆä½ åº”è¯¥åœ¨å›¾è¡¨ä¸­å¯»æ‰¾ä»€ä¹ˆå‘¢ï¼Ÿä½ åº”è¯¥æå‡ºä»€ä¹ˆæ ·çš„åç»­é—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬æ•´ç†äº†ä¸€ä»½æ¸…å•ï¼Œåˆ—å‡ºäº†ä½ åœ¨å›¾ä¸­æœ€å¯èƒ½æ‰¾åˆ°çš„æœ‰ç”¨ä¿¡æ¯ç±»å‹ï¼Œä»¥åŠé’ˆå¯¹æ¯ç§ä¿¡æ¯çš„ä¸€äº›åç»­é—®é¢˜ã€‚æå‡ºå¥½çš„åç»­é—®é¢˜çš„å…³é”®åœ¨äºä¾èµ–ä½ çš„å¥½å¥‡å¿ƒï¼ˆä½ æƒ³æ›´å¤šåœ°äº†è§£ä»€ä¹ˆï¼Ÿï¼‰ä»¥åŠä½ çš„æ€€ç–‘ç²¾ç¥ï¼ˆè¿™å¯èƒ½æ˜¯å¦‚ä½•è¯¯å¯¼äººçš„ï¼Ÿï¼‰ã€‚\n\n10.3.1 å…¸å‹å€¼\nåœ¨æ¡å½¢å›¾å’Œç›´æ–¹å›¾ä¸­ï¼Œé«˜æ¡æ˜¾ç¤ºäº†å˜é‡çš„å¸¸è§å€¼ï¼Œè€ŒçŸ­æ¡æ˜¾ç¤ºäº†ä¸é‚£ä¹ˆå¸¸è§çš„å€¼ã€‚æ²¡æœ‰æ¡å½¢å›¾çš„åœ°æ–¹æ­ç¤ºäº†ä½ çš„æ•°æ®ä¸­æœªæ›¾å‡ºç°çš„å€¼ã€‚è¦å°†è¿™äº›ä¿¡æ¯è½¬åŒ–ä¸ºæœ‰ç”¨çš„é—®é¢˜ï¼Œè¯·å¯»æ‰¾ä»»ä½•æ„æ–™ä¹‹å¤–çš„æƒ…å†µï¼š\n\nå“ªäº›å€¼æ˜¯æœ€å¸¸è§çš„ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ\nå“ªäº›å€¼æ˜¯ç½•è§çš„ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿè¿™æ˜¯å¦ç¬¦åˆä½ çš„é¢„æœŸï¼Ÿ\nä½ èƒ½çœ‹åˆ°ä»»ä½•ä¸å¯»å¸¸çš„æ¨¡å¼å—ï¼Ÿå¯èƒ½æ˜¯ä»€ä¹ˆè§£é‡Šäº†å®ƒä»¬ï¼Ÿ\n\nè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹è¾ƒå°é’»çŸ³çš„ carat åˆ†å¸ƒã€‚\n\nsmaller &lt;- diamonds |&gt; \n  filter(carat &lt; 3)\n\nggplot(smaller, aes(x = carat)) +\n  geom_histogram(binwidth = 0.01)\n\n\n\n\n\n\n\nè¿™ä¸ªç›´æ–¹å›¾å¼•å‡ºäº†ä¸€äº›æœ‰è¶£çš„é—®é¢˜ï¼š\n\nä¸ºä»€ä¹ˆåœ¨æ•´æ•°å…‹æ‹‰å’Œå¸¸è§çš„å…‹æ‹‰åˆ†æ•°å¤„æœ‰æ›´å¤šçš„é’»çŸ³ï¼Ÿ\nä¸ºä»€ä¹ˆåœ¨æ¯ä¸ªå³°å€¼å³ä¾§çš„é’»çŸ³æ¯”å·¦ä¾§çš„è¦å¤šï¼Ÿ\n\nå¯è§†åŒ–è¿˜å¯ä»¥æ­ç¤ºèšç±»ï¼Œè¿™è¡¨æ˜ä½ çš„æ•°æ®ä¸­å­˜åœ¨å­ç¾¤ã€‚è¦ç†è§£è¿™äº›å­ç¾¤ï¼Œè¯·é—®ï¼š\n\næ¯ä¸ªå­ç¾¤å†…çš„è§‚æµ‹å€¼å½¼æ­¤ä¹‹é—´æœ‰ä½•ç›¸ä¼¼ä¹‹å¤„ï¼Ÿ\nä¸åŒèšç±»ä¸­çš„è§‚æµ‹å€¼å½¼æ­¤ä¹‹é—´æœ‰ä½•ä¸åŒï¼Ÿ\nä½ å¦‚ä½•è§£é‡Šæˆ–æè¿°è¿™äº›èšç±»ï¼Ÿ\nä¸ºä»€ä¹ˆèšç±»çš„å‡ºç°å¯èƒ½æ˜¯è¯¯å¯¼æ€§çš„ï¼Ÿ\n\nè¿™äº›é—®é¢˜ä¸­ï¼Œæœ‰äº›å¯ä»¥ç”¨æ•°æ®å›ç­”ï¼Œæœ‰äº›åˆ™éœ€è¦å…³äºæ•°æ®çš„é¢†åŸŸä¸“ä¸šçŸ¥è¯†ã€‚å…¶ä¸­è®¸å¤šé—®é¢˜ä¼šä¿ƒä½¿ä½ æ¢ç´¢å˜é‡ä¹‹é—´çš„å…³ç³»ï¼Œä¾‹å¦‚ï¼Œçœ‹çœ‹ä¸€ä¸ªå˜é‡çš„å€¼æ˜¯å¦èƒ½è§£é‡Šå¦ä¸€ä¸ªå˜é‡çš„è¡Œä¸ºã€‚æˆ‘ä»¬å¾ˆå¿«å°±ä¼šè°ˆåˆ°è¿™ä¸€ç‚¹ã€‚\n\n10.3.2 å¼‚å¸¸å€¼\nç¦»ç¾¤ç‚¹ (Outliers) æ˜¯ä¸å¯»å¸¸çš„è§‚æµ‹å€¼ï¼›å³é‚£äº›ä¼¼ä¹ä¸ç¬¦åˆæ¨¡å¼çš„æ•°æ®ç‚¹ã€‚æœ‰æ—¶ç¦»ç¾¤ç‚¹æ˜¯æ•°æ®å½•å…¥é”™è¯¯ï¼Œæœ‰æ—¶å®ƒä»¬ä»…ä»…æ˜¯åœ¨è¿™æ¬¡æ•°æ®æ”¶é›†ä¸­ç¢°å·§è§‚å¯Ÿåˆ°çš„æç«¯å€¼ï¼Œè€Œå…¶ä»–æ—¶å€™å®ƒä»¬åˆ™é¢„ç¤ºç€é‡è¦çš„æ–°å‘ç°ã€‚å½“æ•°æ®é‡å¾ˆå¤§æ—¶ï¼Œç¦»ç¾¤ç‚¹æœ‰æ—¶åœ¨ç›´æ–¹å›¾ä¸­å¾ˆéš¾çœ‹åˆ°ã€‚ä¾‹å¦‚ï¼Œçœ‹çœ‹ diamonds æ•°æ®é›†ä¸­ y å˜é‡çš„åˆ†å¸ƒã€‚ç¦»ç¾¤ç‚¹çš„å”¯ä¸€è¯æ®æ˜¯ x è½´ä¸Šå¼‚å¸¸å®½çš„èŒƒå›´ã€‚\n\nggplot(diamonds, aes(x = y)) + \n  geom_histogram(binwidth = 0.5)\n\n\n\n\n\n\n\nåœ¨å¸¸è§çš„ç»„ï¼ˆbinï¼‰ä¸­æœ‰å¤ªå¤šçš„è§‚æµ‹å€¼ï¼Œä»¥è‡³äºç½•è§çš„ç»„éå¸¸çŸ­ï¼Œä½¿å¾—å®ƒä»¬å¾ˆéš¾è¢«çœ‹åˆ°ï¼ˆå°½ç®¡å¦‚æœä½ ä»”ç»†ç›¯ç€ 0 çš„ä½ç½®ï¼Œä¹Ÿè®¸ä¼šå‘ç°äº›ä»€ä¹ˆï¼‰ã€‚ä¸ºäº†æ›´å®¹æ˜“åœ°çœ‹åˆ°å¼‚å¸¸å€¼ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ coord_cartesian() æ¥æ”¾å¤§ y è½´çš„è¾ƒå°æ•°å€¼èŒƒå›´ï¼š\n\nggplot(diamonds, aes(x = y)) + \n  geom_histogram(binwidth = 0.5) +\n  coord_cartesian(ylim = c(0, 50))\n\n\n\n\n\n\n\nå½“ä½ éœ€è¦æ”¾å¤§ x è½´æ—¶ï¼Œcoord_cartesian() ä¹Ÿæœ‰ä¸€ä¸ª xlim() å‚æ•°ã€‚ggplot2 è¿˜æœ‰ xlim() å’Œ ylim() å‡½æ•°ï¼Œå®ƒä»¬çš„å·¥ä½œæ–¹å¼ç•¥æœ‰ä¸åŒï¼šå®ƒä»¬ä¼šä¸¢å¼ƒé™åˆ¶èŒƒå›´ä¹‹å¤–çš„æ•°æ®ã€‚\nè¿™è®©æˆ‘ä»¬èƒ½çœ‹åˆ°æœ‰ä¸‰ä¸ªå¼‚å¸¸å€¼ï¼š0ã€çº¦ 30 å’Œçº¦ 60ã€‚æˆ‘ä»¬ç”¨ dplyr å°†å®ƒä»¬æå–å‡ºæ¥ï¼š\n\nunusual &lt;- diamonds |&gt; \n  filter(y &lt; 3 | y &gt; 20) |&gt; \n  select(price, x, y, z) |&gt;\n  arrange(y)\nunusual\n\n# A tibble: 9 Ã— 4\n  price     x     y     z\n  &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1  5139  0      0    0   \n2  6381  0      0    0   \n3 12800  0      0    0   \n4 15686  0      0    0   \n5 18034  0      0    0   \n6  2130  0      0    0   \n7  2130  0      0    0   \n8  2075  5.15  31.8  5.12\n9 12210  8.09  58.9  8.06\n\n\ny å˜é‡æµ‹é‡çš„æ˜¯è¿™äº›é’»çŸ³çš„ä¸‰ä¸ªç»´åº¦ä¹‹ä¸€ï¼Œå•ä½æ˜¯æ¯«ç±³ (mm)ã€‚æˆ‘ä»¬çŸ¥é“é’»çŸ³çš„å®½åº¦ä¸å¯èƒ½æ˜¯ 0mmï¼Œæ‰€ä»¥è¿™äº›å€¼è‚¯å®šæ˜¯é”™è¯¯çš„ã€‚é€šè¿‡è¿›è¡Œ EDAï¼Œæˆ‘ä»¬å‘ç°äº†è¢«ç¼–ç ä¸º 0 çš„ç¼ºå¤±æ•°æ®ï¼Œè€Œä»…ä»…é€šè¿‡æœç´¢ NA æ˜¯æ°¸è¿œæ‰¾ä¸åˆ°çš„ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé€‰æ‹©å°†è¿™äº›å€¼é‡æ–°ç¼–ç ä¸º NAï¼Œä»¥é˜²æ­¢è¯¯å¯¼æ€§çš„è®¡ç®—ã€‚æˆ‘ä»¬å¯èƒ½è¿˜ä¼šæ€€ç–‘ 32mm å’Œ 59mm çš„æµ‹é‡å€¼æ˜¯ä¸å¯ä¿¡çš„ï¼šé‚£äº›é’»çŸ³è¶…è¿‡ä¸€è‹±å¯¸é•¿ï¼Œä½†ä»·æ ¼å´æ²¡æœ‰æ•°åä¸‡ç¾å…ƒï¼\nä¸€ä¸ªå¥½çš„åšæ³•æ˜¯ï¼Œåœ¨åŒ…å«å’Œä¸åŒ…å«ç¦»ç¾¤ç‚¹çš„æƒ…å†µä¸‹é‡å¤ä½ çš„åˆ†æã€‚å¦‚æœå®ƒä»¬å¯¹ç»“æœçš„å½±å“å¾®ä¹å…¶å¾®ï¼Œå¹¶ä¸”ä½ æ— æ³•å¼„æ¸…æ¥šå®ƒä»¬ä¸ºä»€ä¹ˆå­˜åœ¨ï¼Œé‚£ä¹ˆçœç•¥å®ƒä»¬å¹¶ç»§ç»­åˆ†ææ˜¯åˆç†çš„ã€‚ç„¶è€Œï¼Œå¦‚æœå®ƒä»¬å¯¹ä½ çš„ç»“æœæœ‰é‡å¤§å½±å“ï¼Œä½ å°±ä¸åº”è¯¥åœ¨æ²¡æœ‰æ­£å½“ç†ç”±çš„æƒ…å†µä¸‹ä¸¢å¼ƒå®ƒä»¬ã€‚ä½ éœ€è¦å¼„æ¸…æ¥šæ˜¯ä»€ä¹ˆå¯¼è‡´äº†å®ƒä»¬ï¼ˆä¾‹å¦‚ï¼Œæ•°æ®å½•å…¥é”™è¯¯ï¼‰ï¼Œå¹¶åœ¨ä½ çš„æŠ¥å‘Šä¸­æŠ«éœ²ä½ ç§»é™¤äº†å®ƒä»¬ã€‚\n\n10.3.3 ç»ƒä¹ \n\næ¢ç´¢ diamonds æ•°æ®é›†ä¸­ xã€y å’Œ z æ¯ä¸ªå˜é‡çš„åˆ†å¸ƒã€‚ä½ å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿæ€è€ƒä¸€ä¸‹ä¸€é¢—é’»çŸ³ï¼Œä½ å¯èƒ½ä¼šå¦‚ä½•å†³å®šå“ªä¸ªç»´åº¦æ˜¯é•¿åº¦ã€å®½åº¦å’Œæ·±åº¦ã€‚\næ¢ç´¢ price çš„åˆ†å¸ƒã€‚ä½ å‘ç°äº†ä»€ä¹ˆä¸å¯»å¸¸æˆ–ä»¤äººæƒŠè®¶çš„äº‹æƒ…å—ï¼Ÿï¼ˆæç¤ºï¼šä»”ç»†è€ƒè™‘ binwidth å¹¶ç¡®ä¿ä½ å°è¯•äº†å„ç§ä¸åŒçš„å€¼ã€‚ï¼‰\næœ‰å¤šå°‘é¢—é’»çŸ³æ˜¯ 0.99 å…‹æ‹‰ï¼Ÿæœ‰å¤šå°‘æ˜¯ 1 å…‹æ‹‰ï¼Ÿä½ è®¤ä¸ºé€ æˆè¿™ç§å·®å¼‚çš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ\nåœ¨æ”¾å¤§ç›´æ–¹å›¾æ—¶ï¼Œæ¯”è¾ƒå¹¶å¯¹æ¯” coord_cartesian() ä¸ xlim() æˆ– ylim()ã€‚å¦‚æœä½ ä¸è®¾ç½® binwidth ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿå¦‚æœä½ å°è¯•æ”¾å¤§åˆ°åªæ˜¾ç¤ºåŠä¸ªæ¡å½¢ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>10</span>Â  <span class='chapter-title'>æ¢ç´¢æ€§æ•°æ®åˆ†æ</span>"
    ]
  },
  {
    "objectID": "EDA.html#sec-unusual-values-eda",
    "href": "EDA.html#sec-unusual-values-eda",
    "title": "10Â  æ¢ç´¢æ€§æ•°æ®åˆ†æ",
    "section": "\n10.4 å¼‚å¸¸å€¼",
    "text": "10.4 å¼‚å¸¸å€¼\nå¦‚æœä½ åœ¨æ•°æ®é›†ä¸­é‡åˆ°äº†å¼‚å¸¸å€¼ï¼Œå¹¶ä¸”åªæƒ³ç»§ç»­è¿›è¡Œå…¶ä½™çš„åˆ†æï¼Œä½ æœ‰ä¸¤ä¸ªé€‰æ‹©ã€‚\n\n\nåˆ é™¤åŒ…å«å¼‚å¸¸å€¼çš„æ•´è¡Œï¼š\n\ndiamonds2 &lt;- diamonds |&gt; \n  filter(between(y, 3, 20))\n\næˆ‘ä»¬ä¸æ¨èè¿™ä¸ªé€‰é¡¹ï¼Œå› ä¸ºä¸€ä¸ªæ— æ•ˆå€¼å¹¶ä¸æ„å‘³ç€è¯¥è§‚æµ‹çš„æ‰€æœ‰å…¶ä»–å€¼ä¹Ÿæ— æ•ˆã€‚æ­¤å¤–ï¼Œå¦‚æœä½ çš„æ•°æ®è´¨é‡è¾ƒå·®ï¼Œå½“ä½ å¯¹æ¯ä¸ªå˜é‡éƒ½åº”ç”¨è¿™ç§æ–¹æ³•åï¼Œä½ å¯èƒ½ä¼šå‘ç°ä½ å·²ç»æ²¡æœ‰ä»»ä½•æ•°æ®äº†ï¼\n\n\nç›¸åï¼Œæˆ‘ä»¬å»ºè®®ç”¨ç¼ºå¤±å€¼æ›¿æ¢å¼‚å¸¸å€¼ã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨ mutate() å°†å˜é‡æ›¿æ¢ä¸ºä¸€ä¸ªä¿®æ”¹åçš„å‰¯æœ¬ã€‚ä½ å¯ä»¥ä½¿ç”¨ if_else() å‡½æ•°å°†å¼‚å¸¸å€¼æ›¿æ¢ä¸º NAï¼š\n\ndiamonds2 &lt;- diamonds |&gt; \n  mutate(y = if_else(y &lt; 3 | y &gt; 20, NA, y))\n\n\n\nggplot2 ä¸ç¡®å®šåº”è¯¥åœ¨å“ªé‡Œç»˜åˆ¶ç¼ºå¤±å€¼ï¼Œæ‰€ä»¥å®ƒä¸ä¼šåœ¨å›¾è¡¨ä¸­åŒ…å«å®ƒä»¬ï¼Œä½†å®ƒä¼šè­¦å‘Šè¯´å®ƒä»¬å·²è¢«ç§»é™¤ï¼š\n\nggplot(diamonds2, aes(x = x, y = y)) + \n  geom_point()\n\nWarning: Removed 9 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\n\n\n\n\n\n\nè¦æŠ‘åˆ¶è¯¥è­¦å‘Šï¼Œè¯·è®¾ç½® na.rm = TRUEï¼š\n\nggplot(diamonds2, aes(x = x, y = y)) + \n  geom_point(na.rm = TRUE)\n\nå…¶ä»–æ—¶å€™ï¼Œä½ æƒ³è¦ç†è§£ä¸ºä»€ä¹ˆæœ‰ç¼ºå¤±å€¼çš„è§‚æµ‹å€¼ä¸æœ‰è®°å½•å€¼çš„è§‚æµ‹å€¼ä¸åŒã€‚ä¾‹å¦‚ï¼Œåœ¨ nycflights13::flights1 ä¸­ï¼Œdep_time å˜é‡ä¸­çš„ç¼ºå¤±å€¼è¡¨ç¤ºèˆªç­è¢«å–æ¶ˆäº†ã€‚æ‰€ä»¥ä½ å¯èƒ½æƒ³æ¯”è¾ƒå·²å–æ¶ˆå’Œæœªå–æ¶ˆèˆªç­çš„è®¡åˆ’èµ·é£æ—¶é—´ã€‚ä½ å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªæ–°å˜é‡ï¼Œä½¿ç”¨ is.na() æ¥æ£€æŸ¥ dep_time æ˜¯å¦ç¼ºå¤±æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚\n\nnycflights13::flights |&gt; \n  mutate(\n    cancelled = is.na(dep_time),\n    sched_hour = sched_dep_time %/% 100,\n    sched_min = sched_dep_time %% 100,\n    sched_dep_time = sched_hour + (sched_min / 60)\n  ) |&gt; \n  ggplot(aes(x = sched_dep_time)) + \n  geom_freqpoly(aes(color = cancelled), binwidth = 1/4)\n\n\n\n\n\n\n\nç„¶è€Œï¼Œè¿™å¼ å›¾å¹¶ä¸ç†æƒ³ï¼Œå› ä¸ºæœªå–æ¶ˆçš„èˆªç­æ•°é‡è¿œå¤šäºå–æ¶ˆçš„èˆªç­ã€‚åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨ä¸€äº›æ”¹å–„è¿™ç§æ¯”è¾ƒçš„æŠ€å·§ã€‚\n\n10.4.1 ç»ƒä¹ \n\nåœ¨ç›´æ–¹å›¾ä¸­ï¼Œç¼ºå¤±å€¼ä¼šæ€ä¹ˆæ ·ï¼Ÿåœ¨æ¡å½¢å›¾ä¸­ï¼Œç¼ºå¤±å€¼ä¼šæ€ä¹ˆæ ·ï¼Ÿä¸ºä»€ä¹ˆåœ¨ç›´æ–¹å›¾å’Œæ¡å½¢å›¾ä¸­å¤„ç†ç¼ºå¤±å€¼çš„æ–¹å¼æœ‰å·®å¼‚ï¼Ÿ\nna.rm = TRUE åœ¨ mean() å’Œ sum() ä¸­æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ\né‡æ–°åˆ›å»ºæŒ‰èˆªç­æ˜¯å¦å–æ¶ˆç€è‰²çš„ scheduled_dep_time é¢‘ç‡å›¾ã€‚åŒæ—¶ï¼ŒæŒ‰ cancelled å˜é‡è¿›è¡Œåˆ†é¢ã€‚å°è¯•åœ¨åˆ†é¢å‡½æ•°ä¸­ä½¿ç”¨ä¸åŒçš„ scales å˜é‡å€¼ï¼Œä»¥å‡è½»æœªå–æ¶ˆèˆªç­æ•°é‡å¤šäºå–æ¶ˆèˆªç­æ•°é‡çš„å½±å“ã€‚",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>10</span>Â  <span class='chapter-title'>æ¢ç´¢æ€§æ•°æ®åˆ†æ</span>"
    ]
  },
  {
    "objectID": "EDA.html#åå˜",
    "href": "EDA.html#åå˜",
    "title": "10Â  æ¢ç´¢æ€§æ•°æ®åˆ†æ",
    "section": "\n10.5 åå˜",
    "text": "10.5 åå˜\nå¦‚æœè¯´å˜å¼‚æè¿°çš„æ˜¯å•ä¸ªå˜é‡å†…éƒ¨çš„è¡Œä¸ºï¼Œé‚£ä¹ˆåå˜æè¿°çš„å°±æ˜¯å˜é‡ä¹‹é—´çš„è¡Œä¸ºã€‚åå˜ (Covariation) æ˜¯æŒ‡ä¸¤ä¸ªæˆ–å¤šä¸ªå˜é‡çš„å€¼ä»¥ä¸€ç§ç›¸å…³è”çš„æ–¹å¼å…±åŒå˜åŒ–çš„è¶‹åŠ¿ã€‚å‘ç°åå˜çš„æœ€ä½³æ–¹æ³•æ˜¯å¯è§†åŒ–ä¸¤ä¸ªæˆ–å¤šä¸ªå˜é‡ä¹‹é—´çš„å…³ç³»ã€‚\n\n10.5.1 ä¸€ä¸ªåˆ†ç±»å˜é‡å’Œä¸€ä¸ªæ•°å€¼å˜é‡\nä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ geom_freqpoly() æ¥æ¢ç´¢é’»çŸ³ä»·æ ¼å¦‚ä½•éšå…¶è´¨é‡ï¼ˆä»¥ cut è¡¡é‡ï¼‰è€Œå˜åŒ–ï¼š\n\nggplot(diamonds, aes(x = price)) + \n  geom_freqpoly(aes(color = cut), binwidth = 500, linewidth = 0.75)\n\n\n\n\n\n\n\nè¯·æ³¨æ„ï¼Œggplot2 ä¸º cut ä½¿ç”¨äº†æœ‰åºé¢œè‰²æ ‡åº¦ï¼Œå› ä¸ºå®ƒåœ¨æ•°æ®ä¸­è¢«å®šä¹‰ä¸ºä¸€ä¸ªæœ‰åºå› å­å˜é‡ã€‚ä½ å°†åœ¨ Section 16.6 ä¸­å­¦ä¹ æ›´å¤šå…³äºè¿™äº›çš„å†…å®¹ã€‚\ngeom_freqpoly() çš„é»˜è®¤å¤–è§‚åœ¨è¿™é‡Œä¸æ˜¯å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºé«˜åº¦ï¼ˆç”±æ€»è®¡æ•°å†³å®šï¼‰åœ¨ä¸åŒçš„ cut ä¹‹é—´å·®å¼‚å¾ˆå¤§ï¼Œè¿™ä½¿å¾—å¾ˆéš¾çœ‹å‡ºå®ƒä»¬åˆ†å¸ƒå½¢çŠ¶çš„å·®å¼‚ã€‚\nä¸ºäº†ä½¿æ¯”è¾ƒæ›´å®¹æ˜“ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ¢ y è½´ä¸Šæ˜¾ç¤ºçš„å†…å®¹ã€‚æˆ‘ä»¬å°†ä¸å†æ˜¾ç¤ºè®¡æ•°ï¼Œè€Œæ˜¯æ˜¾ç¤ºå¯†åº¦ (density)ï¼Œå³è®¡æ•°ç»è¿‡æ ‡å‡†åŒ–ï¼Œä½¿å¾—æ¯ä¸ªé¢‘ç‡å¤šè¾¹å½¢ä¸‹çš„é¢ç§¯ä¸ºä¸€ã€‚\n\nggplot(diamonds, aes(x = price, y = after_stat(density))) + \n  geom_freqpoly(aes(color = cut), binwidth = 500, linewidth = 0.75)\n\n\n\n\n\n\n\næ³¨æ„ï¼Œæˆ‘ä»¬å°†å¯†åº¦æ˜ å°„åˆ° yï¼Œä½†ç”±äº density ä¸æ˜¯ diamonds æ•°æ®é›†ä¸­çš„å˜é‡ï¼Œæˆ‘ä»¬éœ€è¦å…ˆè®¡ç®—å®ƒã€‚æˆ‘ä»¬ä½¿ç”¨ after_stat() å‡½æ•°æ¥å®Œæˆè¿™ä¸ªè®¡ç®—ã€‚\nè¿™å¼ å›¾ä¸­æœ‰ä¸€äº›ç›¸å½“ä»¤äººæƒŠè®¶çš„äº‹æƒ… â€”â€” ä¼¼ä¹ Fair çº§é’»çŸ³ï¼ˆè´¨é‡æœ€ä½ï¼‰çš„å¹³å‡ä»·æ ¼æœ€é«˜ï¼ä½†è¿™ä¹Ÿè®¸æ˜¯å› ä¸ºé¢‘ç‡å¤šè¾¹å½¢æœ‰ç‚¹éš¾ä»¥è§£è¯» â€”â€” è¿™å¼ å›¾ä¸­ä¿¡æ¯é‡å¤ªå¤§äº†ã€‚\nç”¨äºæ¢ç´¢è¿™ç§å…³ç³»çš„ä¸€ç§è§†è§‰ä¸Šæ›´ç®€å•çš„å›¾æ˜¯å¹¶æ’çš„ç®±çº¿å›¾ã€‚\n\nggplot(diamonds, aes(x = cut, y = price)) +\n  geom_boxplot()\n\n\n\n\n\n\n\næˆ‘ä»¬çœ‹åˆ°çš„å…³äºåˆ†å¸ƒçš„ä¿¡æ¯å°‘äº†å¾ˆå¤šï¼Œä½†æ˜¯ç®±çº¿å›¾æ›´åŠ ç´§å‡‘ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ›´å®¹æ˜“åœ°æ¯”è¾ƒå®ƒä»¬ï¼ˆå¹¶ä¸”å¯ä»¥åœ¨ä¸€å¼ å›¾ä¸Šå®¹çº³æ›´å¤šï¼‰ã€‚å®ƒæ”¯æŒäº†é‚£ä¸ªä¸ç›´è§‰ç›¸åçš„å‘ç°ï¼šè´¨é‡æ›´å¥½çš„é’»çŸ³é€šå¸¸æ›´ä¾¿å®œï¼åœ¨ç»ƒä¹ ä¸­ï¼Œä½ å°†é¢ä¸´æŒ‘æˆ˜ï¼Œå»æ‰¾å‡ºåŸå› ã€‚\ncut æ˜¯ä¸€ä¸ªæœ‰åºå› å­ï¼šfair æ¯” good å·®ï¼Œgood åˆæ¯” very good å·®ï¼Œä¾æ­¤ç±»æ¨ã€‚è®¸å¤šåˆ†ç±»å˜é‡æ²¡æœ‰è¿™ç§å†…åœ¨çš„é¡ºåºï¼Œæ‰€ä»¥ä½ å¯èƒ½æƒ³é‡æ–°æ’åºå®ƒä»¬ä»¥è·å¾—ä¿¡æ¯æ›´ä¸°å¯Œçš„å±•ç¤ºã€‚ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ fct_reorder()ã€‚ä½ å°†åœ¨ Section 16.4 ä¸­å­¦ä¹ æ›´å¤šå…³äºè¿™ä¸ªå‡½æ•°çš„å†…å®¹ï¼Œä½†æˆ‘ä»¬æƒ³åœ¨è¿™é‡Œç»™ä½ ä¸€ä¸ªå¿«é€Ÿé¢„è§ˆï¼Œå› ä¸ºå®ƒéå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œçœ‹çœ‹ mpg æ•°æ®é›†ä¸­çš„ class å˜é‡ã€‚ä½ å¯èƒ½æƒ³çŸ¥é“é«˜é€Ÿå…¬è·¯é‡Œç¨‹æ˜¯å¦‚ä½•å› è½¦å‹è€Œå¼‚çš„ï¼š\n\nggplot(mpg, aes(x = class, y = hwy)) +\n  geom_boxplot()\n\n\n\n\n\n\n\nä¸ºäº†è®©è¶‹åŠ¿æ›´å®¹æ˜“çœ‹æ¸…ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ® hwy çš„ä¸­ä½æ•°é‡æ–°æ’åº classï¼š\n\nggplot(mpg, aes(x = fct_reorder(class, hwy, median), y = hwy)) +\n  geom_boxplot()\n\n\n\n\n\n\n\nå¦‚æœä½ çš„å˜é‡åå¾ˆé•¿ï¼Œgeom_boxplot() å°†å…¶ç¿»è½¬ 90Â° ä¼šæ•ˆæœæ›´å¥½ã€‚ä½ å¯ä»¥é€šè¿‡äº¤æ¢ x å’Œ y çš„ç¾å­¦æ˜ å°„æ¥å®ç°ã€‚\n\nggplot(mpg, aes(x = hwy, y = fct_reorder(class, hwy, median))) +\n  geom_boxplot()\n\n\n\n\n\n\n\n\n10.5.1.1 ç»ƒä¹ \n\nåˆ©ç”¨ä½ æ‰€å­¦åˆ°çš„çŸ¥è¯†ï¼Œæ”¹è¿›å·²å–æ¶ˆèˆªç­ä¸æœªå–æ¶ˆèˆªç­å‡ºå‘æ—¶é—´çš„å¯è§†åŒ–ã€‚\næ ¹æ® EDAï¼Œdiamonds æ•°æ®é›†ä¸­çš„å“ªä¸ªå˜é‡ä¼¼ä¹å¯¹é¢„æµ‹é’»çŸ³ä»·æ ¼æœ€é‡è¦ï¼Ÿè¯¥å˜é‡ä¸åˆ‡å·¥ cut æœ‰ä½•å…³è”ï¼Ÿä¸ºä»€ä¹ˆè¿™ä¸¤ä¸ªå…³ç³»çš„ç»„åˆä¼šå¯¼è‡´è´¨é‡è¾ƒä½çš„é’»çŸ³åè€Œæ›´æ˜‚è´µï¼Ÿ\nä¸è¦äº¤æ¢ x å’Œ y å˜é‡ï¼Œè€Œæ˜¯åœ¨å‚ç›´ç®±çº¿å›¾ä¸­æ·»åŠ  coord_flip() ä½œä¸ºä¸€ä¸ªæ–°å›¾å±‚æ¥åˆ›å»ºæ°´å¹³ç®±çº¿å›¾ã€‚è¿™ä¸äº¤æ¢å˜é‡ç›¸æ¯”å¦‚ä½•ï¼Ÿ\nç®±çº¿å›¾çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå®ƒä»¬æ˜¯åœ¨æ•°æ®é›†å°å¾—å¤šçš„æ—¶ä»£å‘å±•èµ·æ¥çš„ï¼Œå¹¶ä¸”å€¾å‘äºæ˜¾ç¤ºè¿‡å¤šçš„â€œç¦»ç¾¤å€¼â€ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ç§æ–¹æ³•æ˜¯å­—æ¯å€¼å›¾ (letter value plot)ã€‚å®‰è£… lvplot åŒ…ï¼Œå¹¶å°è¯•ä½¿ç”¨ geom_lv() æ¥æ˜¾ç¤ºä»·æ ¼ä¸åˆ‡å·¥çš„åˆ†å¸ƒã€‚ä½ å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿä½ å¦‚ä½•è§£é‡Šè¿™äº›å›¾ï¼Ÿ\nä½¿ç”¨ geom_violin()ã€åˆ†é¢çš„ geom_histogram()ã€å½©è‰²çš„ geom_freqpoly() å’Œå½©è‰²çš„ geom_density()ï¼Œåˆ†åˆ«åˆ›å»ºä¸€ä¸ªé’»çŸ³ä»·æ ¼ä¸ diamonds æ•°æ®é›†ä¸­æŸä¸ªåˆ†ç±»å˜é‡çš„å¯è§†åŒ–ã€‚æ¯”è¾ƒå’Œå¯¹æ¯”è¿™å››ç§å›¾ã€‚åŸºäºä¸€ä¸ªåˆ†ç±»å˜é‡çš„æ°´å¹³æ¥å¯è§†åŒ–ä¸€ä¸ªæ•°å€¼å˜é‡çš„åˆ†å¸ƒï¼Œæ¯ç§æ–¹æ³•çš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ\nå¦‚æœä½ çš„æ•°æ®é›†å¾ˆå°ï¼Œæœ‰æ—¶ä½¿ç”¨ geom_jitter() æ¥é¿å…è¿‡åº¦ç»˜åˆ¶ï¼Œä»è€Œæ›´å®¹æ˜“åœ°çœ‹åˆ°è¿ç»­å˜é‡å’Œåˆ†ç±»å˜é‡ä¹‹é—´çš„å…³ç³»æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ggbeeswarm åŒ…æä¾›äº†è®¸å¤šç±»ä¼¼äº geom_jitter() çš„æ–¹æ³•ã€‚åˆ—å‡ºå®ƒä»¬å¹¶ç®€è¦æè¿°æ¯ç§æ–¹æ³•çš„ä½œç”¨ã€‚\n\n10.5.2 ä¸¤ä¸ªåˆ†ç±»å˜é‡\nè¦å¯è§†åŒ–åˆ†ç±»å˜é‡ä¹‹é—´çš„åå˜ï¼Œä½ éœ€è¦è®¡ç®—è¿™äº›åˆ†ç±»å˜é‡æ¯ä¸ªæ°´å¹³ç»„åˆçš„è§‚æµ‹æ•°é‡ã€‚ä¸€ç§æ–¹æ³•æ˜¯ä¾èµ–å†…ç½®çš„ geom_count()ï¼š\n\nggplot(diamonds, aes(x = cut, y = color)) +\n  geom_count()\n\n\n\n\n\n\n\nå›¾ä¸­æ¯ä¸ªåœ†åœˆçš„å¤§å°æ˜¾ç¤ºäº†åœ¨æ¯ä¸ªå€¼ç»„åˆå¤„æœ‰å¤šå°‘è§‚æµ‹å€¼ã€‚åå˜å°†è¡¨ç°ä¸ºç‰¹å®š x å€¼å’Œç‰¹å®š y å€¼ä¹‹é—´çš„å¼ºç›¸å…³æ€§ã€‚\næ¢ç´¢è¿™äº›å˜é‡ä¹‹é—´å…³ç³»çš„å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ dplyr è®¡ç®—è®¡æ•°ï¼š\n\ndiamonds |&gt; \n  count(color, cut)\n\n# A tibble: 35 Ã— 3\n   color cut           n\n   &lt;ord&gt; &lt;ord&gt;     &lt;int&gt;\n 1 D     Fair        163\n 2 D     Good        662\n 3 D     Very Good  1513\n 4 D     Premium    1603\n 5 D     Ideal      2834\n 6 E     Fair        224\n 7 E     Good        933\n 8 E     Very Good  2400\n 9 E     Premium    2337\n10 E     Ideal      3903\n# â„¹ 25 more rows\n\n\nç„¶åä½¿ç”¨ geom_tile() å’Œ fill ç¾å­¦è¿›è¡Œå¯è§†åŒ–ï¼š\n\ndiamonds |&gt; \n  count(color, cut) |&gt;  \n  ggplot(aes(x = color, y = cut)) +\n  geom_tile(aes(fill = n))\n\n\n\n\n\n\n\nå¦‚æœåˆ†ç±»å˜é‡æ˜¯æ— åºçš„ï¼Œä½ å¯èƒ½æƒ³ä½¿ç”¨ seriation åŒ…æ¥åŒæ—¶é‡æ–°æ’åˆ—è¡Œå’Œåˆ—ï¼Œä»¥ä¾¿æ›´æ¸…æ™°åœ°æ­ç¤ºæœ‰è¶£çš„æ¨¡å¼ã€‚å¯¹äºæ›´å¤§çš„å›¾ï¼Œä½ å¯èƒ½æƒ³å°è¯• heatmaply åŒ…ï¼Œå®ƒå¯ä»¥åˆ›å»ºäº¤äº’å¼å›¾ã€‚\n\n10.5.2.1 ç»ƒä¹ \n\nä½ å¦‚ä½•é‡æ–°ç¼©æ”¾ä¸Šé¢çš„è®¡æ•°æ•°æ®é›†ï¼Œä»¥æ›´æ¸…æ™°åœ°æ˜¾ç¤ºé¢œè‰²å†…çš„åˆ‡å·¥åˆ†å¸ƒï¼Œæˆ–åˆ‡å·¥å†…çš„é¢œè‰²åˆ†å¸ƒï¼Ÿ\nå¦‚æœå°†é¢œè‰²æ˜ å°„åˆ° x ç¾å­¦ï¼Œå°† cut æ˜ å°„åˆ° fill ç¾å­¦ï¼Œä½¿ç”¨åˆ†æ®µæ¡å½¢å›¾ä½ ä¼šå¾—åˆ°ä»€ä¹ˆä¸åŒçš„æ•°æ®è§è§£ï¼Ÿè®¡ç®—è½å…¥æ¯ä¸ªåˆ†æ®µçš„è®¡æ•°ã€‚\nä½¿ç”¨ geom_tile() å’Œ dplyr æ¥æ¢ç´¢å¹³å‡èˆªç­èµ·é£å»¶è¿Ÿå¦‚ä½•éšç›®çš„åœ°å’Œå¹´ä»½ä¸­çš„æœˆä»½è€Œå˜åŒ–ã€‚æ˜¯ä»€ä¹ˆä½¿å¾—å›¾è¡¨éš¾ä»¥é˜…è¯»ï¼Ÿä½ å¦‚ä½•æ”¹è¿›å®ƒï¼Ÿ\n\n10.5.3 ä¸¤ä¸ªæ•°å€¼å˜é‡\nä½ å·²ç»è§è¿‡ä¸€ç§å¯è§†åŒ–ä¸¤ä¸ªæ•°å€¼å˜é‡ä¹‹é—´åå˜çš„ç»ä½³æ–¹æ³•ï¼šç”¨ geom_point() ç»˜åˆ¶æ•£ç‚¹å›¾ã€‚ä½ å¯ä»¥å°†åå˜çœ‹ä½œæ˜¯ç‚¹çš„æ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥çœ‹åˆ°é’»çŸ³çš„å…‹æ‹‰å¤§å°å’Œä»·æ ¼ä¹‹é—´å­˜åœ¨æ­£ç›¸å…³å…³ç³»ï¼šå…‹æ‹‰æ•°è¶Šå¤§çš„é’»çŸ³ä»·æ ¼è¶Šé«˜ã€‚è¿™ç§å…³ç³»æ˜¯æŒ‡æ•°çº§çš„ã€‚\n\nggplot(smaller, aes(x = carat, y = price)) +\n  geom_point()\n\n\n\n\n\n\n\nï¼ˆåœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ smaller æ•°æ®é›†ï¼Œä»¥ä¸“æ³¨äºå°äº 3 å…‹æ‹‰çš„å¤§éƒ¨åˆ†é’»çŸ³ï¼‰\néšç€æ•°æ®é›†è§„æ¨¡çš„å¢é•¿ï¼Œæ•£ç‚¹å›¾çš„ç”¨å¤„ä¼šå‡å°ï¼Œå› ä¸ºç‚¹å¼€å§‹é‡å ï¼ˆoverplotï¼‰ï¼Œå †ç§¯æˆå‡åŒ€çš„é»‘è‰²åŒºåŸŸï¼Œä½¿å¾—éš¾ä»¥åˆ¤æ–­æ•°æ®åœ¨äºŒç»´ç©ºé—´ä¸­å¯†åº¦çš„å·®å¼‚ï¼Œä¹Ÿéš¾ä»¥å‘ç°è¶‹åŠ¿ã€‚ä½ å·²ç»è§è¿‡ä¸€ç§è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•ï¼šä½¿ç”¨ alpha ç¾å­¦æ¥å¢åŠ é€æ˜åº¦ã€‚\n\nggplot(smaller, aes(x = carat, y = price)) + \n  geom_point(alpha = 1 / 100)\n\n\n\n\n\n\n\nä½†æ˜¯å¯¹äºéå¸¸å¤§çš„æ•°æ®é›†ï¼Œä½¿ç”¨é€æ˜åº¦å¯èƒ½å…·æœ‰æŒ‘æˆ˜æ€§ã€‚å¦ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨åˆ†ç®± (bin)ã€‚ä¹‹å‰ä½ ä½¿ç”¨ geom_histogram() å’Œ geom_freqpoly() åœ¨ä¸€ç»´ç©ºé—´ä¸­è¿›è¡Œåˆ†ç®±ã€‚ç°åœ¨ä½ å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨ geom_bin2d() å’Œ geom_hex() åœ¨äºŒç»´ç©ºé—´ä¸­è¿›è¡Œåˆ†ç®±ã€‚\ngeom_bin2d() å’Œ geom_hex() å°†åæ ‡å¹³é¢åˆ’åˆ†ä¸ºäºŒç»´çš„ç®±å­ï¼Œç„¶åä½¿ç”¨å¡«å……é¢œè‰²æ¥æ˜¾ç¤ºæœ‰å¤šå°‘ä¸ªç‚¹è½å…¥æ¯ä¸ªç®±å­ã€‚geom_bin2d() åˆ›å»ºçŸ©å½¢ç®±å­ã€‚geom_hex() åˆ›å»ºå…­è¾¹å½¢ç®±å­ã€‚ä½ éœ€è¦å®‰è£… hexbin åŒ…æ‰èƒ½ä½¿ç”¨ geom_hex()ã€‚\nggplot(smaller, aes(x = carat, y = price)) +\n  geom_bin2d()\n# install.packages(\"hexbin\")\nggplot(smaller, aes(x = carat, y = price)) +\n  geom_hex()\n\n\n\n\n\n\n\n\n\n\nå¦ä¸€ä¸ªé€‰æ‹©æ˜¯å°†ä¸€ä¸ªè¿ç»­å˜é‡åˆ†ç®±ï¼Œä½¿å…¶åƒä¸€ä¸ªåˆ†ç±»å˜é‡ä¸€æ ·ã€‚ç„¶åä½ å¯ä»¥ä½¿ç”¨ä½ å­¦è¿‡çš„å¯è§†åŒ–åˆ†ç±»å˜é‡å’Œè¿ç»­å˜é‡ç»„åˆçš„æŠ€å·§ä¹‹ä¸€ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥å°† carat åˆ†ç®±ï¼Œç„¶åä¸ºæ¯ä¸ªç»„æ˜¾ç¤ºä¸€ä¸ªç®±çº¿å›¾ï¼š\n\nggplot(smaller, aes(x = carat, y = price)) + \n  geom_boxplot(aes(group = cut_width(carat, 0.1)))\n\n\n\n\n\n\n\ncut_width(x, width)ï¼Œå¦‚ä¸Šæ‰€è¿°ï¼Œå°† x åˆ†æˆå®½åº¦ä¸º width çš„ç®±ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ— è®ºæœ‰å¤šå°‘è§‚æµ‹å€¼ï¼Œç®±çº¿å›¾çœ‹èµ·æ¥éƒ½å¤§è‡´ç›¸åŒï¼ˆé™¤äº†ç¦»ç¾¤ç‚¹çš„æ•°é‡ï¼‰ï¼Œæ‰€ä»¥å¾ˆéš¾çœ‹å‡ºæ¯ä¸ªç®±çº¿å›¾æ€»ç»“äº†ä¸åŒæ•°é‡çš„ç‚¹ã€‚ä¸€ç§æ˜¾ç¤ºè¿™ä¸€ç‚¹çš„æ–¹æ³•æ˜¯è®©ç®±çº¿å›¾çš„å®½åº¦ä¸ç‚¹çš„æ•°é‡æˆæ­£æ¯”ï¼Œä½¿ç”¨ varwidth = TRUEã€‚\n\n10.5.3.1 ç»ƒä¹ \n\né™¤äº†ç”¨ç®±çº¿å›¾æ€»ç»“æ¡ä»¶åˆ†å¸ƒï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨é¢‘ç‡å¤šè¾¹å½¢ã€‚åœ¨ä½¿ç”¨ cut_width() ä¸ cut_number() æ—¶ï¼Œä½ éœ€è¦è€ƒè™‘ä»€ä¹ˆï¼Ÿè¿™å¯¹ carat å’Œ price çš„äºŒç»´åˆ†å¸ƒçš„å¯è§†åŒ–æœ‰ä½•å½±å“ï¼Ÿ\nå¯è§†åŒ–æŒ‰ price åˆ’åˆ†çš„ carat çš„åˆ†å¸ƒã€‚\néå¸¸å¤§çš„é’»çŸ³ä¸å°é’»çŸ³çš„ä»·æ ¼åˆ†å¸ƒç›¸æ¯”å¦‚ä½•ï¼Ÿæ˜¯å¦‚ä½ æ‰€æ–™ï¼Œè¿˜æ˜¯è®©ä½ æ„Ÿåˆ°æƒŠè®¶ï¼Ÿ\nç»“åˆä½ å­¦åˆ°çš„ä¸¤ç§æŠ€å·§ï¼Œæ¥å¯è§†åŒ– cutã€carat å’Œ price çš„ç»„åˆåˆ†å¸ƒã€‚\n\näºŒç»´å›¾æ­ç¤ºäº†åœ¨ä¸€ç»´å›¾ä¸­ä¸å¯è§çš„ç¦»ç¾¤ç‚¹ã€‚ä¾‹å¦‚ï¼Œä¸‹å›¾ä¸­æœ‰äº›ç‚¹çš„ x å’Œ y å€¼ç»„åˆä¸å¯»å¸¸ï¼Œè¿™ä½¿å¾—è¿™äº›ç‚¹æˆä¸ºç¦»ç¾¤ç‚¹ï¼Œå³ä½¿å®ƒä»¬çš„ x å’Œ y å€¼åœ¨å•ç‹¬æ£€æŸ¥æ—¶çœ‹èµ·æ¥æ­£å¸¸ã€‚ä¸ºä»€ä¹ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ•£ç‚¹å›¾æ¯”åˆ†ç®±å›¾æ›´é€‚åˆæ˜¾ç¤ºï¼Ÿ\n\ndiamonds |&gt; \n  filter(x &gt;= 4) |&gt; \n  ggplot(aes(x = x, y = y)) +\n  geom_point() +\n  coord_cartesian(xlim = c(4, 11), ylim = c(4, 11))\n\n\n\né™¤äº†ç”¨ cut_width() åˆ›å»ºç­‰å®½çš„ç®±å­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨ cut_number() åˆ›å»ºåŒ…å«å¤§è‡´ç›¸ç­‰æ•°é‡çš„ç‚¹çš„ç®±å­ã€‚è¿™ç§æ–¹æ³•çš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ\n\nggplot(smaller, aes(x = carat, y = price)) + \n  geom_boxplot(aes(group = cut_number(carat, 20)))",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>10</span>Â  <span class='chapter-title'>æ¢ç´¢æ€§æ•°æ®åˆ†æ</span>"
    ]
  },
  {
    "objectID": "EDA.html#æ¨¡å¼å’Œæ¨¡å‹",
    "href": "EDA.html#æ¨¡å¼å’Œæ¨¡å‹",
    "title": "10Â  æ¢ç´¢æ€§æ•°æ®åˆ†æ",
    "section": "\n10.6 æ¨¡å¼å’Œæ¨¡å‹",
    "text": "10.6 æ¨¡å¼å’Œæ¨¡å‹\nå¦‚æœä¸¤ä¸ªå˜é‡ä¹‹é—´å­˜åœ¨ç³»ç»Ÿæ€§å…³ç³»ï¼Œå®ƒå°†ä»¥æ•°æ®ä¸­çš„æ¨¡å¼å‡ºç°ã€‚å¦‚æœä½ å‘ç°ä¸€ä¸ªæ¨¡å¼ï¼Œé—®é—®è‡ªå·±ï¼š\n\nè¿™ä¸ªæ¨¡å¼å¯èƒ½æ˜¯ç”±äºå·§åˆï¼ˆå³éšæœºæœºä¼šï¼‰å—ï¼Ÿ\nä½ å¦‚ä½•æè¿°è¯¥æ¨¡å¼æ‰€æš—ç¤ºçš„å…³ç³»ï¼Ÿ\nè¯¥æ¨¡å¼æ‰€æš—ç¤ºçš„å…³ç³»æœ‰å¤šå¼ºï¼Ÿ\nè¿˜æœ‰å“ªäº›å…¶ä»–å˜é‡å¯èƒ½ä¼šå½±å“è¿™ç§å…³ç³»ï¼Ÿ\nå¦‚æœä½ è§‚å¯Ÿæ•°æ®çš„å„ä¸ªå­ç¾¤ï¼Œè¿™ç§å…³ç³»ä¼šæ”¹å˜å—ï¼Ÿ\n\næ•°æ®ä¸­çš„æ¨¡å¼æä¾›äº†å…³äºå…³ç³»çš„çº¿ç´¢ï¼Œå³å®ƒä»¬æ­ç¤ºäº†åå˜ã€‚å¦‚æœä½ æŠŠå˜å¼‚çœ‹ä½œæ˜¯ä¸€ç§äº§ç”Ÿä¸ç¡®å®šæ€§çš„ç°è±¡ï¼Œé‚£ä¹ˆåå˜å°±æ˜¯ä¸€ç§å‡å°‘ä¸ç¡®å®šæ€§çš„ç°è±¡ã€‚å¦‚æœä¸¤ä¸ªå˜é‡åå˜ï¼Œä½ å¯ä»¥åˆ©ç”¨ä¸€ä¸ªå˜é‡çš„å€¼æ¥æ›´å¥½åœ°é¢„æµ‹å¦ä¸€ä¸ªå˜é‡çš„å€¼ã€‚å¦‚æœåå˜æ˜¯ç”±äºå› æœå…³ç³»ï¼ˆä¸€ç§ç‰¹æ®Šæƒ…å†µï¼‰ï¼Œé‚£ä¹ˆä½ å¯ä»¥åˆ©ç”¨ä¸€ä¸ªå˜é‡çš„å€¼æ¥æ§åˆ¶å¦ä¸€ä¸ªå˜é‡çš„å€¼ã€‚\næ¨¡å‹æ˜¯ä»æ•°æ®ä¸­æå–æ¨¡å¼çš„å·¥å…·ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘é’»çŸ³æ•°æ®ã€‚å¾ˆéš¾ç†è§£åˆ‡å·¥å’Œä»·æ ¼ä¹‹é—´çš„å…³ç³»ï¼Œå› ä¸ºåˆ‡å·¥å’Œå…‹æ‹‰ï¼Œä»¥åŠå…‹æ‹‰å’Œä»·æ ¼æ˜¯ç´§å¯†ç›¸å…³çš„ã€‚å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ¨¡å‹æ¥ç§»é™¤ä»·æ ¼å’Œå…‹æ‹‰ä¹‹é—´éå¸¸å¼ºçš„å…³ç³»ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ¢ç´¢å‰©ä¸‹çš„ç»†å¾®å·®åˆ«ã€‚ä¸‹é¢çš„ä»£ç æ‹Ÿåˆäº†ä¸€ä¸ªä» carat é¢„æµ‹ price çš„æ¨¡å‹ï¼Œç„¶åè®¡ç®—æ®‹å·®ï¼ˆé¢„æµ‹å€¼å’Œå®é™…å€¼ä¹‹é—´çš„å·®å¼‚ï¼‰ã€‚æ®‹å·®ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªè§†è§’ï¼Œæ¥çœ‹å¾…åœ¨ç§»é™¤äº†å…‹æ‹‰çš„å½±å“ä¹‹åé’»çŸ³çš„ä»·æ ¼ã€‚è¯·æ³¨æ„ï¼Œæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨ price å’Œ carat çš„åŸå§‹å€¼ï¼Œè€Œæ˜¯å…ˆå¯¹å®ƒä»¬è¿›è¡Œå¯¹æ•°è½¬æ¢ï¼Œå¹¶å¯¹å¯¹æ•°è½¬æ¢åçš„å€¼æ‹Ÿåˆä¸€ä¸ªæ¨¡å‹ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯¹æ®‹å·®è¿›è¡ŒæŒ‡æ•°åŒ–ï¼Œå°†å…¶æ”¾å›åˆ°åŸå§‹ä»·æ ¼çš„å°ºåº¦ä¸Šã€‚\n\nlibrary(tidymodels)\n\ndiamonds &lt;- diamonds |&gt;\n  mutate(\n    log_price = log(price),\n    log_carat = log(carat)\n  )\n\ndiamonds_fit &lt;- linear_reg() |&gt;\n  fit(log_price ~ log_carat, data = diamonds)\n\ndiamonds_aug &lt;- augment(diamonds_fit, new_data = diamonds) |&gt;\n  mutate(.resid = exp(.resid))\n\nggplot(diamonds_aug, aes(x = carat, y = .resid)) + \n  geom_point()\n\n\n\n\n\n\n\nä¸€æ—¦ä½ ç§»é™¤äº†å…‹æ‹‰å’Œä»·æ ¼ä¹‹é—´çš„å¼ºå…³ç³»ï¼Œä½ å°±å¯ä»¥åœ¨åˆ‡å·¥å’Œä»·æ ¼ä¹‹é—´çš„å…³ç³»ä¸­çœ‹åˆ°ä½ æ‰€æœŸæœ›çš„ï¼šç›¸å¯¹äºå®ƒä»¬çš„å¤§å°ï¼Œè´¨é‡æ›´å¥½çš„é’»çŸ³æ›´æ˜‚è´µã€‚\n\nggplot(diamonds_aug, aes(x = cut, y = .resid)) + \n  geom_boxplot()\n\n\n\n\n\n\n\næˆ‘ä»¬åœ¨è¿™æœ¬ä¹¦ä¸­ä¸è®¨è®ºå»ºæ¨¡ï¼Œå› ä¸ºç†è§£æ¨¡å‹æ˜¯ä»€ä¹ˆä»¥åŠå®ƒä»¬å¦‚ä½•å·¥ä½œï¼Œåœ¨ä½ æŒæ¡äº†æ•°æ®æ•´ç†å’Œç¼–ç¨‹çš„å·¥å…·ä¹‹åä¼šæœ€å®¹æ˜“ã€‚",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>10</span>Â  <span class='chapter-title'>æ¢ç´¢æ€§æ•°æ®åˆ†æ</span>"
    ]
  },
  {
    "objectID": "EDA.html#æ€»ç»“",
    "href": "EDA.html#æ€»ç»“",
    "title": "10Â  æ¢ç´¢æ€§æ•°æ®åˆ†æ",
    "section": "\n10.7 æ€»ç»“",
    "text": "10.7 æ€»ç»“\nåœ¨æœ¬ç« ä¸­ï¼Œä½ å­¦ä¹ äº†å„ç§å·¥å…·æ¥å¸®åŠ©ä½ ç†è§£æ•°æ®ä¸­çš„å˜å¼‚ã€‚ä½ çœ‹åˆ°äº†å¤„ç†å•ä¸ªå˜é‡å’Œä¸€å¯¹å˜é‡çš„æŠ€å·§ã€‚å¦‚æœä½ çš„æ•°æ®ä¸­æœ‰å‡ åä¸ªæˆ–å‡ ç™¾ä¸ªå˜é‡ï¼Œè¿™å¯èƒ½çœ‹èµ·æ¥å¾ˆç—›è‹¦åœ°å—é™ï¼Œä½†å®ƒä»¬æ˜¯æ‰€æœ‰å…¶ä»–æŠ€æœ¯æ„å»ºçš„åŸºç¡€ã€‚\nåœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä¸“æ³¨äºæˆ‘ä»¬å¯ä»¥ç”¨æ¥äº¤æµæˆ‘ä»¬ç»“æœçš„å·¥å…·ã€‚",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>10</span>Â  <span class='chapter-title'>æ¢ç´¢æ€§æ•°æ®åˆ†æ</span>"
    ]
  },
  {
    "objectID": "EDA.html#footnotes",
    "href": "EDA.html#footnotes",
    "title": "10Â  æ¢ç´¢æ€§æ•°æ®åˆ†æ",
    "section": "",
    "text": "è¯·è®°ä½ï¼Œå½“æˆ‘ä»¬éœ€æ˜ç¡®æŒ‡å‡ºä¸€ä¸ªå‡½æ•°ï¼ˆæˆ–æ•°æ®é›†ï¼‰çš„æ¥æºæ—¶ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ç‰¹æ®Šå½¢å¼ package::function() æˆ– package::datasetã€‚â†©ï¸",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>10</span>Â  <span class='chapter-title'>æ¢ç´¢æ€§æ•°æ®åˆ†æ</span>"
    ]
  },
  {
    "objectID": "communication.html",
    "href": "communication.html",
    "title": "11Â  æ²Ÿé€š",
    "section": "",
    "text": "11.1 å¼•è¨€\nåœ¨ Chapter 10 ä¸­ï¼Œä½ å­¦ä¹ äº†å¦‚ä½•å°†ç»˜å›¾ä½œä¸ºæ¢ç´¢çš„å·¥å…·ã€‚å½“ä½ åˆ¶ä½œæ¢ç´¢æ€§å›¾è¡¨æ—¶ï¼Œä½ ç”šè‡³åœ¨çœ‹å›¾ä¹‹å‰å°±çŸ¥é“å®ƒå°†æ˜¾ç¤ºå“ªäº›å˜é‡ã€‚ä½ ä¸ºæ¯ä¸ªå›¾è¡¨çš„åˆ¶ä½œéƒ½å¸¦æœ‰ç›®çš„ï¼Œå¯ä»¥å¿«é€ŸæŸ¥çœ‹ï¼Œç„¶åè½¬å‘ä¸‹ä¸€ä¸ªå›¾è¡¨ã€‚åœ¨å¤§å¤šæ•°åˆ†æè¿‡ç¨‹ä¸­ï¼Œä½ ä¼šç”Ÿæˆæ•°åç”šè‡³æ•°ç™¾ä¸ªå›¾è¡¨ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†ä¼šè¢«ç«‹å³ä¸¢å¼ƒã€‚\nç°åœ¨ä½ å·²ç»ç†è§£äº†ä½ çš„æ•°æ®ï¼Œä½ éœ€è¦å°†ä½ çš„ç†è§£ä¼ è¾¾ç»™ä»–äººã€‚ä½ çš„å—ä¼—å¯èƒ½ä¸å…·å¤‡ä½ çš„èƒŒæ™¯çŸ¥è¯†ï¼Œä¹Ÿä¸ä¼šå¯¹æ•°æ®æŠ•å…¥å¾ˆæ·±ã€‚ä¸ºäº†å¸®åŠ©ä»–äººå¿«é€Ÿå»ºç«‹å¯¹æ•°æ®çš„è‰¯å¥½å¿ƒæ™ºæ¨¡å‹ï¼Œä½ éœ€è¦æŠ•å…¥å¤§é‡ç²¾åŠ›ï¼Œè®©ä½ çš„å›¾è¡¨å°½å¯èƒ½åœ°ä¸è¨€è‡ªæ˜ã€‚åœ¨æœ¬ç« ä¸­ï¼Œä½ å°†å­¦ä¹  ggplot2 ä¸ºæ­¤æä¾›çš„ä¸€äº›å·¥å…·ã€‚\næœ¬ç« é‡ç‚¹ä»‹ç»åˆ›å»ºä¼˜è´¨å›¾å½¢æ‰€éœ€çš„å·¥å…·ã€‚æˆ‘ä»¬å‡è®¾ä½ çŸ¥é“è‡ªå·±æƒ³è¦ä»€ä¹ˆï¼Œåªéœ€è¦çŸ¥é“å¦‚ä½•å®ç°å®ƒã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®å°†æœ¬ç« ä¸ä¸€æœ¬ä¼˜ç§€çš„é€šç”¨å¯è§†åŒ–ä¹¦ç±ç»“åˆèµ·æ¥é˜…è¯»ã€‚æˆ‘ä»¬ç‰¹åˆ«å–œæ¬¢ Albert Cairo çš„ The Truthful Artã€‚è¿™æœ¬ä¹¦ä¸æ•™åˆ›å»ºå¯è§†åŒ–çš„å…·ä½“æ–¹æ³•ï¼Œè€Œæ˜¯ä¾§é‡äºä¸ºäº†åˆ›å»ºæœ‰æ•ˆçš„å›¾å½¢ä½ éœ€è¦æ€è€ƒä»€ä¹ˆã€‚",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>11</span>Â  <span class='chapter-title'>æ²Ÿé€š</span>"
    ]
  },
  {
    "objectID": "communication.html#å¼•è¨€",
    "href": "communication.html#å¼•è¨€",
    "title": "11Â  æ²Ÿé€š",
    "section": "",
    "text": "11.1.1 å…ˆå†³æ¡ä»¶\nåœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†å†æ¬¡é‡ç‚¹å…³æ³¨ ggplot2ã€‚æˆ‘ä»¬è¿˜å°†ä½¿ç”¨ä¸€äº› dplyr è¿›è¡Œæ•°æ®å¤„ç†ï¼Œä½¿ç”¨ scales åŒ…æ¥è¦†ç›–é»˜è®¤çš„åˆ»åº¦ã€æ ‡ç­¾ã€è½¬æ¢å’Œè°ƒè‰²æ¿ï¼Œä»¥åŠä¸€äº› ggplot2 æ‰©å±•åŒ…ï¼ŒåŒ…æ‹¬ Kamil Slowikowski çš„ ggrepel (https://ggrepel.slowkow.com) å’Œ Thomas Lin Pedersen çš„ patchwork (https://patchwork.data-imaginist.com)ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£…è¿™äº›åŒ…ï¼Œåˆ«å¿˜äº†ç”¨ install.packages() æ¥å®‰è£…å®ƒä»¬ã€‚\n\nlibrary(tidyverse)\nlibrary(scales)\nlibrary(ggrepel)\nlibrary(patchwork)",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>11</span>Â  <span class='chapter-title'>æ²Ÿé€š</span>"
    ]
  },
  {
    "objectID": "communication.html#æ ‡ç­¾",
    "href": "communication.html#æ ‡ç­¾",
    "title": "11Â  æ²Ÿé€š",
    "section": "\n11.2 æ ‡ç­¾",
    "text": "11.2 æ ‡ç­¾\nå°†æ¢ç´¢æ€§å›¾è¡¨è½¬å˜ä¸ºè¯´æ˜æ€§å›¾è¡¨æ—¶ï¼Œæœ€ç®€å•çš„å…¥æ‰‹ç‚¹å°±æ˜¯ä½¿ç”¨å¥½çš„æ ‡ç­¾ã€‚ä½ å¯ä»¥ä½¿ç”¨ labs() å‡½æ•°æ·»åŠ æ ‡ç­¾ã€‚\n\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point(aes(color = class)) +\n  geom_smooth(se = FALSE) +\n  labs(\n    x = \"å‘åŠ¨æœºæ’é‡ (L)\",\n    y = \"é«˜é€Ÿå…¬è·¯ç‡ƒæ²¹ç»æµæ€§ (mpg)\",\n    color = \"æ±½è½¦ç±»å‹\",\n    title = \"ç‡ƒæ²¹æ•ˆç‡é€šå¸¸éšå‘åŠ¨æœºå°ºå¯¸çš„å¢å¤§è€Œé™ä½\",\n    subtitle = \"åŒåº§è½¦ï¼ˆè·‘è½¦ï¼‰å› å…¶é‡é‡è½»è€Œæˆä¸ºä¾‹å¤–\",\n    caption = \"æ•°æ®æ¥è‡ª fueleconomy.gov\"\n  )\n\n\n\n\n\n\n\nå›¾è¡¨æ ‡é¢˜çš„ç›®çš„æ˜¯æ€»ç»“ä¸»è¦å‘ç°ã€‚é¿å…ä½¿ç”¨ä»…ä»…æè¿°å›¾è¡¨å†…å®¹çš„æ ‡é¢˜ï¼Œä¾‹å¦‚â€œå‘åŠ¨æœºæ’é‡ä¸ç‡ƒæ²¹ç»æµæ€§çš„æ•£ç‚¹å›¾â€ã€‚\nå¦‚æœä½ éœ€è¦æ·»åŠ æ›´å¤šæ–‡æœ¬ï¼Œè¿˜æœ‰å¦å¤–ä¸¤ä¸ªæœ‰ç”¨çš„æ ‡ç­¾ï¼šsubtitle ä¼šåœ¨æ ‡é¢˜ä¸‹æ–¹ç”¨è¾ƒå°çš„å­—ä½“æ·»åŠ é¢å¤–ç»†èŠ‚ï¼Œè€Œ caption ä¼šåœ¨å›¾è¡¨å³ä¸‹è§’æ·»åŠ æ–‡æœ¬ï¼Œé€šå¸¸ç”¨äºæè¿°æ•°æ®æ¥æºã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ labs() æ¥æ›¿æ¢åæ ‡è½´å’Œå›¾ä¾‹çš„æ ‡é¢˜ã€‚é€šå¸¸ï¼Œç”¨æ›´è¯¦ç»†çš„æè¿°æ›¿æ¢ç®€çŸ­çš„å˜é‡åï¼Œå¹¶åŒ…å«å•ä½ï¼Œæ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚\né™¤äº†æ–‡æœ¬å­—ç¬¦ä¸²ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æ•°å­¦è¡¨è¾¾å¼ã€‚åªéœ€å°† \"\" æ¢æˆ quote()ï¼Œå¹¶åœ¨ ?plotmath ä¸­é˜…è¯»å¯ç”¨çš„é€‰é¡¹ï¼š\n\ndf &lt;- tibble(\n  x = 1:10,\n  y = cumsum(x^2)\n)\n\nggplot(df, aes(x, y)) +\n  geom_point() +\n  labs(\n    x = quote(x[i]),\n    y = quote(sum(x[i] ^ 2, i == 1, n))\n  )\n\n\n\n\n\n\n\n\n11.2.1 ç»ƒä¹ \n\nä½¿ç”¨ç‡ƒæ²¹ç»æµæ€§æ•°æ®åˆ›å»ºä¸€å¼ å›¾ï¼Œå¹¶è‡ªå®šä¹‰ titleã€subtitleã€captionã€xã€y å’Œ color æ ‡ç­¾ã€‚\n\nä½¿ç”¨ç‡ƒæ²¹ç»æµæ€§æ•°æ®é‡æ–°åˆ›å»ºä¸‹å›¾ã€‚è¯·æ³¨æ„ï¼Œç‚¹çš„é¢œè‰²å’Œå½¢çŠ¶éƒ½éšé©±åŠ¨ç³»ç»Ÿç±»å‹è€Œå˜åŒ–ã€‚\n\n\n\n\n\n\n\n\n\næ‰¾ä¸€ä¸ªä½ åœ¨ä¸Šä¸ªæœˆåˆ›å»ºçš„æ¢ç´¢æ€§å›¾è¡¨ï¼Œå¹¶ä¸ºå…¶æ·»åŠ ä¿¡æ¯ä¸°å¯Œçš„æ ‡é¢˜ï¼Œä»¥ä¾¿ä»–äººæ›´å®¹æ˜“ç†è§£ã€‚",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>11</span>Â  <span class='chapter-title'>æ²Ÿé€š</span>"
    ]
  },
  {
    "objectID": "communication.html#æ³¨é‡Š",
    "href": "communication.html#æ³¨é‡Š",
    "title": "11Â  æ²Ÿé€š",
    "section": "\n11.3 æ³¨é‡Š",
    "text": "11.3 æ³¨é‡Š\né™¤äº†ä¸ºå›¾è¡¨çš„ä¸»è¦ç»„æˆéƒ¨åˆ†æ·»åŠ æ ‡ç­¾å¤–ï¼Œä¸ºå•ä¸ªè§‚æµ‹æˆ–è§‚æµ‹ç»„æ·»åŠ æ ‡ç­¾ä¹Ÿå¸¸å¸¸å¾ˆæœ‰ç”¨ã€‚ä½ å¯ä»¥ä½¿ç”¨çš„ç¬¬ä¸€ä¸ªå·¥å…·æ˜¯ geom_text()ã€‚geom_text() ç±»ä¼¼äº geom_point()ï¼Œä½†å®ƒæœ‰ä¸€ä¸ªé¢å¤–çš„ç¾å­¦å±æ€§ï¼šlabelã€‚è¿™ä½¿å¾—åœ¨å›¾è¡¨ä¸­æ·»åŠ æ–‡æœ¬æ ‡ç­¾æˆä¸ºå¯èƒ½ã€‚\næ ‡ç­¾æœ‰ä¸¤ä¸ªå¯èƒ½çš„æ¥æºã€‚é¦–å…ˆï¼Œä½ å¯èƒ½æœ‰ä¸€ä¸ªæä¾›æ ‡ç­¾çš„ tibbleã€‚åœ¨ä¸‹é¢çš„å›¾è¡¨ä¸­ï¼Œæˆ‘ä»¬ç­›é€‰å‡ºæ¯ç§é©±åŠ¨ç±»å‹ä¸­å‘åŠ¨æœºå°ºå¯¸æœ€å¤§çš„æ±½è½¦ï¼Œå¹¶å°†å…¶ä¿¡æ¯ä¿å­˜ä¸ºä¸€ä¸ªåä¸º label_info çš„æ–°æ•°æ®æ¡†ã€‚\n\nlabel_info &lt;- mpg |&gt;\n  group_by(drv) |&gt;\n  arrange(desc(displ)) |&gt;\n  slice_head(n = 1) |&gt;\n  mutate(\n    drive_type = case_when(\n      drv == \"f\" ~ \"å‰è½®é©±åŠ¨\",\n      drv == \"r\" ~ \"åè½®é©±åŠ¨\",\n      drv == \"4\" ~ \"å››è½®é©±åŠ¨\"\n    )\n  ) |&gt;\n  select(displ, hwy, drv, drive_type)\n\nlabel_info\n#&gt; # A tibble: 3 Ã— 4\n#&gt; # Groups:   drv [3]\n#&gt;   displ   hwy drv   drive_type\n#&gt;   &lt;dbl&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;     \n#&gt; 1   6.5    17 4     å››è½®é©±åŠ¨  \n#&gt; 2   5.3    25 f     å‰è½®é©±åŠ¨  \n#&gt; 3   7      24 r     åè½®é©±åŠ¨\n\nç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªæ–°çš„æ•°æ®æ¡†ç›´æ¥æ ‡è®°è¿™ä¸‰ä¸ªç»„ï¼Œç”¨ç›´æ¥æ”¾ç½®åœ¨å›¾ä¸Šçš„æ ‡ç­¾æ¥æ›¿æ¢å›¾ä¾‹ã€‚é€šè¿‡ä½¿ç”¨ fontface å’Œ size å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰æ–‡æœ¬æ ‡ç­¾çš„å¤–è§‚ã€‚å®ƒä»¬æ¯”å›¾ä¸Šçš„å…¶ä»–æ–‡æœ¬æ›´å¤§ï¼Œå¹¶ä¸”æ˜¯ç²—ä½“çš„ã€‚ï¼ˆtheme(legend.position = \"none\") ä¼šå…³é—­æ‰€æœ‰å›¾ä¾‹ â€”â€” æˆ‘ä»¬ç¨åä¼šæ›´è¯¦ç»†åœ°è®¨è®ºå®ƒã€‚ï¼‰\n\nggplot(mpg, aes(x = displ, y = hwy, color = drv)) +\n  geom_point(alpha = 0.3) +\n  geom_smooth(se = FALSE) +\n  geom_text(\n    data = label_info, \n    aes(x = displ, y = hwy, label = drive_type),\n    fontface = \"bold\", size = 5, hjust = \"right\", vjust = \"bottom\"\n  ) +\n  theme(legend.position = \"none\")\n#&gt; `geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n\n\n\n\n\n\n\næ³¨æ„ä½¿ç”¨ hjust (æ°´å¹³å¯¹é½) å’Œ vjust (å‚ç›´å¯¹é½) æ¥æ§åˆ¶æ ‡ç­¾çš„å¯¹é½æ–¹å¼ã€‚\nç„¶è€Œï¼Œæˆ‘ä»¬ä¸Šé¢åˆ¶ä½œçš„å¸¦æ³¨é‡Šçš„å›¾è¡¨å¾ˆéš¾é˜…è¯»ï¼Œå› ä¸ºæ ‡ç­¾ä¹‹é—´ä»¥åŠæ ‡ç­¾ä¸ç‚¹ä¹‹é—´å­˜åœ¨é‡å ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ggrepel åŒ…ä¸­çš„ geom_label_repel() å‡½æ•°æ¥è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ã€‚è¿™ä¸ªæœ‰ç”¨çš„åŒ…ä¼šè‡ªåŠ¨è°ƒæ•´æ ‡ç­¾ï¼Œä½¿å…¶ä¸é‡å ï¼š\n\nggplot(mpg, aes(x = displ, y = hwy, color = drv)) +\n  geom_point(alpha = 0.3) +\n  geom_smooth(se = FALSE) +\n  geom_label_repel(\n    data = label_info, \n    aes(x = displ, y = hwy, label = drive_type),\n    fontface = \"bold\", size = 5, nudge_y = 2\n  ) +\n  theme(legend.position = \"none\")\n#&gt; `geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n\n\n\n\n\n\n\nä½ ä¹Ÿå¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•ï¼Œä½¿ç”¨ ggrepel åŒ…ä¸­çš„ geom_text_repel() æ¥çªå‡ºå›¾ä¸Šçš„æŸäº›ç‚¹ã€‚æ³¨æ„è¿™é‡Œä½¿ç”¨çš„å¦ä¸€ä¸ªä¾¿æ·æŠ€å·§ï¼šæˆ‘ä»¬æ·»åŠ äº†ç¬¬äºŒå±‚å¤§çš„ç©ºå¿ƒç‚¹ï¼Œä»¥è¿›ä¸€æ­¥çªå‡ºè¢«æ ‡è®°çš„ç‚¹ã€‚\n\npotential_outliers &lt;- mpg |&gt;\n  filter(hwy &gt; 40 | (hwy &gt; 20 & displ &gt; 5))\n  \nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point() +\n  geom_text_repel(data = potential_outliers, aes(label = model)) +\n  geom_point(data = potential_outliers, color = \"red\") +\n  geom_point(\n    data = potential_outliers,\n    color = \"red\", size = 3, shape = \"circle open\"\n  )\n\n\n\n\n\n\n\nè®°ä½ï¼Œé™¤äº† geom_text() å’Œ geom_label()ï¼Œggplot2 ä¸­è¿˜æœ‰è®¸å¤šå…¶ä»–å‡ ä½•å¯¹è±¡å¯ä»¥å¸®åŠ©ä½ æ³¨é‡Šå›¾è¡¨ã€‚ä¸€äº›æƒ³æ³•ï¼š\n\nä½¿ç”¨ geom_hline() å’Œ geom_vline() æ·»åŠ å‚è€ƒçº¿ã€‚æˆ‘ä»¬é€šå¸¸è®©å®ƒä»¬å˜ç²— (linewidth = 2) å¹¶ä¸”æ˜¯ç™½è‰²çš„ (color = white)ï¼Œç„¶åå°†å®ƒä»¬ç»˜åˆ¶åœ¨ä¸»æ•°æ®å±‚çš„ä¸‹æ–¹ã€‚è¿™æ ·å®ƒä»¬å¾ˆå®¹æ˜“çœ‹åˆ°ï¼Œåˆä¸ä¼šåˆ†æ•£å¯¹æ•°æ®çš„æ³¨æ„åŠ›ã€‚\nä½¿ç”¨ geom_rect() åœ¨æ„Ÿå…´è¶£çš„ç‚¹å‘¨å›´ç»˜åˆ¶ä¸€ä¸ªçŸ©å½¢ã€‚çŸ©å½¢çš„è¾¹ç•Œç”±ç¾å­¦å±æ€§ xminã€xmaxã€yminã€ymax å®šä¹‰ã€‚æˆ–è€…ï¼Œå¯ä»¥ç ”ç©¶ä¸€ä¸‹ ggforce åŒ…ï¼Œç‰¹åˆ«æ˜¯ geom_mark_hull()ï¼Œå®ƒå…è®¸ä½ ç”¨å‡¸åŒ…æ¥æ³¨é‡Šç‚¹çš„å­é›†ã€‚\nä½¿ç”¨å¸¦ arrow å‚æ•°çš„ geom_segment()ï¼Œç”¨ç®­å¤´æ¥å¸å¼•å¯¹æŸä¸ªç‚¹çš„æ³¨æ„ã€‚ä½¿ç”¨ç¾å­¦å±æ€§ x å’Œ y å®šä¹‰èµ·å§‹ä½ç½®ï¼Œxend å’Œ yend å®šä¹‰ç»“æŸä½ç½®ã€‚\n\nå¦ä¸€ä¸ªç”¨äºå‘å›¾è¡¨æ·»åŠ æ³¨é‡Šçš„ä¾¿æ·å‡½æ•°æ˜¯ annotate()ã€‚æ ¹æ®ç»éªŒï¼Œå‡ ä½•å¯¹è±¡ (geom) é€šå¸¸ç”¨äºé«˜äº®æ•°æ®çš„å­é›†ï¼Œè€Œ annotate() åˆ™ç”¨äºå‘å›¾è¡¨æ·»åŠ ä¸€ä¸ªæˆ–å°‘æ•°å‡ ä¸ªæ³¨é‡Šå…ƒç´ ã€‚\nä¸ºäº†æ¼”ç¤º annotate() çš„ç”¨æ³•ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€äº›è¦æ·»åŠ åˆ°å›¾è¡¨ä¸­çš„æ–‡æœ¬ã€‚è¿™æ®µæ–‡æœ¬æœ‰ç‚¹é•¿ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†ä½¿ç”¨ stringr::str_wrap()ï¼Œæ ¹æ®ä½ æƒ³è¦çš„æ¯è¡Œå­—ç¬¦æ•°æ¥è‡ªåŠ¨ä¸ºå…¶æ·»åŠ æ¢è¡Œç¬¦ï¼š\n\ntrend_text &lt;- \"Larger engine sizes tend to have lower fuel economy.\" |&gt;\n  str_wrap(width = 30)\ntrend_text\n#&gt; [1] \"Larger engine sizes tend to\\nhave lower fuel economy.\"\n\nç„¶åï¼Œæˆ‘ä»¬æ·»åŠ ä¸¤å±‚æ³¨é‡Šï¼šä¸€å±‚ä½¿ç”¨æ ‡ç­¾å‡ ä½•å¯¹è±¡ (label geom)ï¼Œå¦ä¸€å±‚ä½¿ç”¨çº¿æ®µå‡ ä½•å¯¹è±¡ (segment geom)ã€‚ä¸¤è€…ä¸­çš„ x å’Œ y ç¾å­¦å±æ€§å®šä¹‰äº†æ³¨é‡Šçš„èµ·å§‹ä½ç½®ï¼Œè€Œçº¿æ®µæ³¨é‡Šä¸­çš„ xend å’Œ yend ç¾å­¦å±æ€§å®šä¹‰äº†çº¿æ®µçš„ç»“æŸä½ç½®ã€‚å¦è¯·æ³¨æ„ï¼Œè¯¥çº¿æ®µè¢«æ ·å¼åŒ–ä¸ºç®­å¤´ã€‚\n\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point() +\n  annotate(\n    geom = \"label\", x = 3.5, y = 38,\n    label = trend_text,\n    hjust = \"left\", color = \"red\"\n  ) +\n  annotate(\n    geom = \"segment\",\n    x = 3, y = 35, xend = 5, yend = 25, color = \"red\",\n    arrow = arrow(type = \"closed\")\n  )\n\n\n\n\n\n\n\næ³¨é‡Šæ˜¯ä¼ è¾¾å¯è§†åŒ–ä¸»è¦ç»“è®ºå’Œæœ‰è¶£ç‰¹å¾çš„å¼ºå¤§å·¥å…·ã€‚å”¯ä¸€çš„é™åˆ¶æ˜¯ä½ çš„æƒ³è±¡åŠ›ï¼ˆä»¥åŠä½ ä¸ºä½¿æ³¨é‡Šç¾è§‚è€Œå®šä½å®ƒä»¬çš„è€å¿ƒï¼‰ï¼\n\n11.3.1 ç»ƒä¹ \n\nä½¿ç”¨ geom_text() å’Œæ— é™å¤§çš„ä½ç½®ï¼Œå°†æ–‡æœ¬æ”¾ç½®åœ¨å›¾è¡¨çš„å››ä¸ªè§’ä¸Šã€‚\nä½¿ç”¨ annotate() åœ¨ä½ ä¸Šä¸€å¼ å›¾çš„ä¸­é—´æ·»åŠ ä¸€ä¸ªç‚¹å‡ ä½•å¯¹è±¡ï¼Œè€Œæ— éœ€åˆ›å»ºä¸€ä¸ª tibbleã€‚è‡ªå®šä¹‰è¯¥ç‚¹çš„å½¢çŠ¶ã€å¤§å°æˆ–é¢œè‰²ã€‚\ngeom_text() çš„æ ‡ç­¾å¦‚ä½•ä¸åˆ†é¢ (faceting) äº¤äº’ï¼Ÿä½ å¦‚ä½•ä¸ºä¸€ä¸ªå•ç‹¬çš„åˆ†é¢æ·»åŠ æ ‡ç­¾ï¼Ÿä½ å¦‚ä½•åœ¨æ¯ä¸ªåˆ†é¢ä¸­æ”¾ç½®ä¸åŒçš„æ ‡ç­¾ï¼Ÿï¼ˆæç¤ºï¼šè€ƒè™‘ä¼ é€’ç»™ geom_text() çš„æ•°æ®é›†ã€‚ï¼‰\ngeom_label() çš„å“ªäº›å‚æ•°æ§åˆ¶èƒŒæ™¯æ¡†çš„å¤–è§‚ï¼Ÿ\narrow() çš„å››ä¸ªå‚æ•°æ˜¯ä»€ä¹ˆï¼Ÿå®ƒä»¬å¦‚ä½•å·¥ä½œï¼Ÿåˆ›å»ºä¸€ç³»åˆ—å›¾è¡¨æ¥æ¼”ç¤ºæœ€é‡è¦çš„é€‰é¡¹ã€‚",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>11</span>Â  <span class='chapter-title'>æ²Ÿé€š</span>"
    ]
  },
  {
    "objectID": "communication.html#æ ‡åº¦",
    "href": "communication.html#æ ‡åº¦",
    "title": "11Â  æ²Ÿé€š",
    "section": "\n11.4 æ ‡åº¦",
    "text": "11.4 æ ‡åº¦\nè®©ä½ çš„å›¾è¡¨æ›´é€‚åˆæ²Ÿé€šçš„ç¬¬ä¸‰ç§æ–¹æ³•æ˜¯è°ƒæ•´æ ‡åº¦ (scales)ã€‚æ ‡åº¦æ§åˆ¶äº†ç¾å­¦æ˜ å°„å¦‚ä½•ä»¥è§†è§‰æ–¹å¼å‘ˆç°ã€‚\n\n11.4.1 é»˜è®¤æ ‡åº¦\né€šå¸¸ï¼Œggplot2 ä¼šè‡ªåŠ¨ä¸ºä½ æ·»åŠ æ ‡åº¦ã€‚ä¾‹å¦‚ï¼Œå½“ä½ è¾“å…¥ï¼š\n\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point(aes(color = class))\n\nggplot2 ä¼šåœ¨åå°è‡ªåŠ¨æ·»åŠ é»˜è®¤æ ‡åº¦ï¼š\n\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point(aes(color = class)) +\n  scale_x_continuous() +\n  scale_y_continuous() +\n  scale_color_discrete()\n\næ³¨æ„æ ‡åº¦çš„å‘½åæ–¹æ¡ˆï¼šscale_ åè·Ÿç¾å­¦åç§°ï¼Œç„¶åæ˜¯ _ï¼Œå†åè·Ÿæ ‡åº¦åç§°ã€‚é»˜è®¤æ ‡åº¦æ ¹æ®å®ƒä»¬æ‰€å¯¹åº”çš„å˜é‡ç±»å‹æ¥å‘½åï¼šè¿ç»­å‹ (continuous)ã€ç¦»æ•£å‹ (discrete)ã€æ—¥æœŸæ—¶é—´å‹ (datetime) æˆ–æ—¥æœŸå‹ (date)ã€‚scale_x_continuous() å°† displ çš„æ•°å€¼æ”¾åœ¨ x è½´çš„è¿ç»­æ•°è½´ä¸Šï¼Œscale_color_discrete() ä¸ºæ¯ç§æ±½è½¦çš„ class é€‰æ‹©é¢œè‰²ï¼Œç­‰ç­‰ã€‚ä¸‹é¢ä½ å°†å­¦åˆ°è®¸å¤šéé»˜è®¤çš„æ ‡åº¦ã€‚\né»˜è®¤æ ‡åº¦ç»è¿‡ç²¾å¿ƒæŒ‘é€‰ï¼Œèƒ½åœ¨å„ç§è¾“å…¥ä¸‹è¡¨ç°è‰¯å¥½ã€‚å°½ç®¡å¦‚æ­¤ï¼Œä½ å¯èƒ½è¿˜æ˜¯æƒ³è¦†ç›–é»˜è®¤è®¾ç½®ï¼ŒåŸå› æœ‰äºŒï¼š\n\nä½ å¯èƒ½æƒ³å¾®è°ƒé»˜è®¤æ ‡åº¦çš„ä¸€äº›å‚æ•°ã€‚è¿™å…è®¸ä½ åšä¸€äº›äº‹æƒ…ï¼Œæ¯”å¦‚æ”¹å˜åæ ‡è½´ä¸Šçš„åˆ»åº¦ï¼Œæˆ–è€…å›¾ä¾‹ä¸Šçš„é”®æ ‡ç­¾ã€‚\nä½ å¯èƒ½æƒ³å®Œå…¨æ›¿æ¢æ‰æ ‡åº¦ï¼Œä½¿ç”¨ä¸€ç§å®Œå…¨ä¸åŒçš„ç®—æ³•ã€‚é€šå¸¸ä½ å¯ä»¥åšå¾—æ¯”é»˜è®¤æ›´å¥½ï¼Œå› ä¸ºä½ å¯¹æ•°æ®æœ‰æ›´å¤šçš„äº†è§£ã€‚\n\n11.4.2 åæ ‡è½´åˆ»åº¦å’Œå›¾ä¾‹é”®\nåæ ‡è½´å’Œå›¾ä¾‹ç»Ÿç§°ä¸ºå¼•å¯¼ (guides)ã€‚åæ ‡è½´ç”¨äº x å’Œ y ç¾å­¦ï¼›å›¾ä¾‹ç”¨äºå…¶ä»–æ‰€æœ‰ç¾å­¦ã€‚\næœ‰ä¸¤ä¸ªä¸»è¦å‚æ•°ä¼šå½±å“åæ ‡è½´ä¸Šåˆ»åº¦çš„å¤–è§‚å’Œå›¾ä¾‹ä¸Šé”®çš„å¤–è§‚ï¼šbreaks å’Œ labelsã€‚Breaks æ§åˆ¶åˆ»åº¦çš„ä½ç½®ï¼Œæˆ–ä¸é”®ç›¸å…³è”çš„å€¼ã€‚Labels æ§åˆ¶ä¸æ¯ä¸ªåˆ»åº¦/é”®ç›¸å…³è”çš„æ–‡æœ¬æ ‡ç­¾ã€‚breaks æœ€å¸¸è§çš„ç”¨é€”æ˜¯è¦†ç›–é»˜è®¤é€‰æ‹©ï¼š\n\nggplot(mpg, aes(x = displ, y = hwy, color = drv)) +\n  geom_point() +\n  scale_y_continuous(breaks = seq(15, 40, by = 5)) \n\n\n\n\n\n\n\nä½ å¯ä»¥ç”¨åŒæ ·çš„æ–¹å¼ä½¿ç”¨ labelsï¼ˆä¸€ä¸ªä¸ breaks é•¿åº¦ç›¸åŒçš„å­—ç¬¦å‘é‡ï¼‰ï¼Œä½†ä½ ä¹Ÿå¯ä»¥å°†å…¶è®¾ç½®ä¸º NULL æ¥å®Œå…¨æŠ‘åˆ¶æ ‡ç­¾ã€‚è¿™å¯¹äºåœ°å›¾ï¼Œæˆ–è€…åœ¨ä¸èƒ½åˆ†äº«ç»å¯¹æ•°å€¼çš„æƒ…å†µä¸‹å‘å¸ƒå›¾è¡¨æ—¶å¾ˆæœ‰ç”¨ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ breaks å’Œ labels æ¥æ§åˆ¶å›¾ä¾‹çš„å¤–è§‚ã€‚å¯¹äºåˆ†ç±»å˜é‡çš„ç¦»æ•£æ ‡åº¦ï¼Œlabels å¯ä»¥æ˜¯ä¸€ä¸ªå‘½ååˆ—è¡¨ï¼ŒåŒ…å«ç°æœ‰çš„çº§åˆ«åç§°å’Œå®ƒä»¬æœŸæœ›çš„æ ‡ç­¾ã€‚\n\nggplot(mpg, aes(x = displ, y = hwy, color = drv)) +\n  geom_point() +\n  scale_x_continuous(labels = NULL) +\n  scale_y_continuous(labels = NULL) +\n  scale_color_discrete(labels = c(\"4\" = \"å››è½®\", \"f\" = \"å‰è½®\", \"r\" = \"åè½®\"))\n\n\n\n\n\n\n\nlabels å‚æ•°ä¸ scales åŒ…ä¸­çš„æ ‡ç­¾å‡½æ•°ç›¸ç»“åˆï¼Œå¯¹äºå°†æ•°å­—æ ¼å¼åŒ–ä¸ºè´§å¸ã€ç™¾åˆ†æ¯”ç­‰ä¹Ÿå¾ˆæœ‰ç”¨ã€‚å·¦è¾¹çš„å›¾æ˜¾ç¤ºäº†ä½¿ç”¨ label_dollar() çš„é»˜è®¤æ ‡ç­¾ï¼Œå®ƒæ·»åŠ äº†ç¾å…ƒç¬¦å·ä»¥åŠåƒä½åˆ†éš”ç¬¦é€—å·ã€‚å³è¾¹çš„å›¾é€šè¿‡å°†ç¾å…ƒå€¼é™¤ä»¥ 1000 å¹¶æ·»åŠ åç¼€ â€œKâ€ï¼ˆä»£è¡¨ â€œåƒâ€ï¼‰ä»¥åŠæ·»åŠ è‡ªå®šä¹‰åˆ»åº¦ï¼Œè¿›è¡Œäº†è¿›ä¸€æ­¥çš„å®šåˆ¶ã€‚æ³¨æ„ breaks æ˜¯åœ¨æ•°æ®çš„åŸå§‹æ ‡åº¦ä¸Šã€‚\n# å·¦å›¾\nggplot(diamonds, aes(x = price, y = cut)) +\n  geom_boxplot(alpha = 0.05) +\n  scale_x_continuous(labels = label_dollar())\n\n# å³å›¾\nggplot(diamonds, aes(x = price, y = cut)) +\n  geom_boxplot(alpha = 0.05) +\n  scale_x_continuous(\n    labels = label_dollar(scale = 1/1000, suffix = \"K\"), \n    breaks = seq(1000, 19000, by = 6000)\n  )\n\n\n\n\n\n\n\n\n\n\nå¦ä¸€ä¸ªæ–¹ä¾¿çš„æ ‡ç­¾å‡½æ•°æ˜¯ label_percent():\n\nggplot(diamonds, aes(x = cut, fill = clarity)) +\n  geom_bar(position = \"fill\") +\n  scale_y_continuous(name = \"ç™¾åˆ†æ¯”\", labels = label_percent())\n\n\n\n\n\n\n\nbreaks çš„å¦ä¸€ä¸ªç”¨é€”æ˜¯å½“ä½ æ•°æ®ç‚¹ç›¸å¯¹è¾ƒå°‘ï¼Œå¹¶æƒ³ç¡®åˆ‡åœ°çªå‡ºæ˜¾ç¤ºè§‚æµ‹å‘ç”Ÿçš„ä½ç½®æ—¶ã€‚ä¾‹å¦‚ï¼Œçœ‹è¿™å¼ å›¾ï¼Œå®ƒæ˜¾ç¤ºäº†æ¯ä½ç¾å›½æ€»ç»Ÿä»»æœŸçš„å¼€å§‹å’Œç»“æŸæ—¶é—´ã€‚\n\npresidential |&gt;\n  mutate(id = 33 + row_number()) |&gt;\n  ggplot(aes(x = start, y = id)) +\n  geom_point() +\n  geom_segment(aes(xend = end, yend = id)) +\n  scale_x_date(name = NULL, breaks = presidential$start, date_labels = \"'%y\")\n\n\n\n\n\n\n\nè¯·æ³¨æ„ï¼Œå¯¹äº breaks å‚æ•°ï¼Œæˆ‘ä»¬ä½¿ç”¨ presidential$start æå–äº† start å˜é‡ä½œä¸ºå‘é‡ï¼Œå› ä¸ºæˆ‘ä»¬ä¸èƒ½ä¸ºè¿™ä¸ªå‚æ•°è¿›è¡Œç¾å­¦æ˜ å°„ã€‚å¦è¯·æ³¨æ„ï¼Œæ—¥æœŸå’Œæ—¥æœŸæ—¶é—´æ ‡åº¦çš„ breaks å’Œ labels çš„æŒ‡å®šæ–¹å¼ç•¥æœ‰ä¸åŒï¼š\n\ndate_labels æ¥å—ä¸€ä¸ªæ ¼å¼è¯´æ˜ï¼Œå…¶æ ¼å¼ä¸ parse_datetime() ç›¸åŒã€‚\ndate_breaksï¼ˆæ­¤å¤„æœªæ˜¾ç¤ºï¼‰æ¥å—ä¸€ä¸ªåƒ â€œ2 daysâ€ æˆ– â€œ1 monthâ€ è¿™æ ·çš„å­—ç¬¦ä¸²ã€‚\n\n11.4.3 å›¾ä¾‹å¸ƒå±€\nä½ æœ€å¸¸ä½¿ç”¨ breaks å’Œ labels æ¥è°ƒæ•´åæ ‡è½´ã€‚è™½ç„¶å®ƒä»¬ä¹Ÿå¯¹å›¾ä¾‹èµ·ä½œç”¨ï¼Œä½†ä½ æ›´å¯èƒ½ä½¿ç”¨å…¶ä»–ä¸€äº›æŠ€å·§ã€‚\nè¦æ§åˆ¶å›¾ä¾‹çš„æ•´ä½“ä½ç½®ï¼Œä½ éœ€è¦ä½¿ç”¨ theme() è®¾ç½®ã€‚æˆ‘ä»¬å°†åœ¨æœ¬ç« æœ«å°¾å›åˆ°ä¸»é¢˜ï¼Œä½†ç®€è€Œè¨€ä¹‹ï¼Œå®ƒä»¬æ§åˆ¶å›¾è¡¨çš„éæ•°æ®éƒ¨åˆ†ã€‚ä¸»é¢˜è®¾ç½® legend.position æ§åˆ¶å›¾ä¾‹çš„ç»˜åˆ¶ä½ç½®ï¼š\nbase &lt;- ggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point(aes(color = class))\n\nbase + theme(legend.position = \"right\") # é»˜è®¤\nbase + theme(legend.position = \"left\")\nbase + \n  theme(legend.position = \"top\") +\n  guides(color = guide_legend(nrow = 3))\nbase + \n  theme(legend.position = \"bottom\") +\n  guides(color = guide_legend(nrow = 3))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nå¦‚æœä½ çš„å›¾è¡¨åˆçŸ­åˆå®½ï¼Œå°±æŠŠå›¾ä¾‹æ”¾åœ¨é¡¶éƒ¨æˆ–åº•éƒ¨ï¼›å¦‚æœå®ƒåˆé«˜åˆçª„ï¼Œå°±æŠŠå›¾ä¾‹æ”¾åœ¨å·¦ä¾§æˆ–å³ä¾§ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ legend.position = \"none\" æ¥å®Œå…¨æŠ‘åˆ¶å›¾ä¾‹çš„æ˜¾ç¤ºã€‚\nè¦æ§åˆ¶å•ä¸ªå›¾ä¾‹çš„æ˜¾ç¤ºï¼Œè¯·ä½¿ç”¨ guides() ä»¥åŠ guide_legend() æˆ– guide_colorbar()ã€‚ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†ä¸¤ä¸ªé‡è¦çš„è®¾ç½®ï¼šä½¿ç”¨ nrow æ§åˆ¶å›¾ä¾‹ä½¿ç”¨çš„è¡Œæ•°ï¼Œä»¥åŠè¦†ç›–å…¶ä¸­ä¸€ä¸ªç¾å­¦å±æ€§ä½¿ç‚¹å˜å¤§ã€‚å¦‚æœä½ åœ¨ä¸€ä¸ªå›¾è¡¨ä¸Šä½¿ç”¨äº†è¾ƒä½çš„ alpha æ¥æ˜¾ç¤ºè®¸å¤šç‚¹ï¼Œè¿™å°¤å…¶æœ‰ç”¨ã€‚\n\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point(aes(color = class)) +\n  geom_smooth(se = FALSE) +\n  theme(legend.position = \"bottom\") +\n  guides(color = guide_legend(nrow = 2, override.aes = list(size = 4)))\n#&gt; `geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n\n\n\n\n\n\n\næ³¨æ„ï¼Œguides() ä¸­çš„å‚æ•°åç§°ä¸ç¾å­¦åç§°ç›¸åŒ¹é…ï¼Œå°±åƒåœ¨ labs() ä¸­ä¸€æ ·ã€‚\n\n11.4.4 æ›¿æ¢æ ‡åº¦\né™¤äº†ç¨å¾®è°ƒæ•´ç»†èŠ‚ï¼Œä½ è¿˜å¯ä»¥å®Œå…¨æ›¿æ¢æ ‡åº¦ã€‚ä½ æœ€å¯èƒ½æƒ³æ›¿æ¢çš„ä¸¤ç§æ ‡åº¦æ˜¯ï¼šè¿ç»­ä½ç½®æ ‡åº¦å’Œé¢œè‰²æ ‡åº¦ã€‚å¹¸è¿çš„æ˜¯ï¼ŒåŒæ ·çš„åŸåˆ™ä¹Ÿé€‚ç”¨äºæ‰€æœ‰å…¶ä»–ç¾å­¦ï¼Œæ‰€ä»¥ä¸€æ—¦ä½ æŒæ¡äº†ä½ç½®å’Œé¢œè‰²ï¼Œä½ å°±èƒ½å¾ˆå¿«å­¦ä¼šå…¶ä»–æ ‡åº¦çš„æ›¿æ¢ã€‚\nå¯¹ä½ çš„å˜é‡è¿›è¡Œå˜æ¢ç»˜å›¾éå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬å¯¹ carat å’Œ price è¿›è¡Œå¯¹æ•°å˜æ¢ï¼Œå°±æ›´å®¹æ˜“çœ‹å‡ºå®ƒä»¬ä¹‹é—´çš„ç²¾ç¡®å…³ç³»ï¼š\n# å·¦å›¾\nggplot(diamonds, aes(x = carat, y = price)) +\n  geom_bin2d()\n\n# å³å›¾\nggplot(diamonds, aes(x = log10(carat), y = log10(price))) +\n  geom_bin2d()\n\n\n\n\n\n\n\n\n\n\nç„¶è€Œï¼Œè¿™ç§å˜æ¢çš„ç¼ºç‚¹æ˜¯åæ ‡è½´ç°åœ¨ç”¨å˜æ¢åçš„å€¼æ¥æ ‡è®°ï¼Œè¿™ä½¿å¾—è§£è¯»å›¾è¡¨å˜å¾—å›°éš¾ã€‚æˆ‘ä»¬å¯ä»¥åœ¨æ ‡åº¦ä¸­è¿›è¡Œå˜æ¢ï¼Œè€Œä¸æ˜¯åœ¨ç¾å­¦æ˜ å°„ä¸­è¿›è¡Œã€‚è¿™åœ¨è§†è§‰ä¸Šæ˜¯å®Œå…¨ç›¸åŒçš„ï¼Œé™¤äº†åæ ‡è½´æ˜¯ç”¨åŸå§‹æ•°æ®æ ‡åº¦æ¥æ ‡è®°çš„ã€‚\n\nggplot(diamonds, aes(x = carat, y = price)) +\n  geom_bin2d() + \n  scale_x_log10() + \n  scale_y_log10()\n\n\n\n\n\n\n\nå¦ä¸€ä¸ªç»å¸¸è¢«å®šåˆ¶çš„æ ‡åº¦æ˜¯é¢œè‰²ã€‚é»˜è®¤çš„åˆ†ç±»æ ‡åº¦é€‰æ‹©çš„é¢œè‰²åœ¨è‰²è½®ä¸Šå‡åŒ€åˆ†å¸ƒã€‚æœ‰ç”¨çš„æ›¿ä»£æ–¹æ¡ˆæ˜¯ ColorBrewer æ ‡åº¦ï¼Œè¿™äº›æ ‡åº¦ç»è¿‡æ‰‹å·¥è°ƒæ•´ï¼Œå¯¹æœ‰å¸¸è§è‰²ç›²ç±»å‹çš„äººæ›´å‹å¥½ã€‚ä¸‹é¢çš„ä¸¤å¼ å›¾çœ‹èµ·æ¥ç›¸ä¼¼ï¼Œä½†çº¢è‰²å’Œç»¿è‰²çš„è‰²è°ƒæœ‰è¶³å¤Ÿçš„å·®å¼‚ï¼Œä½¿å¾—å³è¾¹çš„ç‚¹å³ä½¿å¯¹äºçº¢ç»¿è‰²ç›²çš„äººä¹Ÿèƒ½åŒºåˆ†ã€‚1\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point(aes(color = drv))\n\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point(aes(color = drv)) +\n  scale_color_brewer(palette = \"Set1\")\n\n\n\n\n\n\n\n\n\n\nåˆ«å¿˜äº†ä½¿ç”¨æ›´ç®€å•çš„æŠ€å·§æ¥æé«˜å¯è®¿é—®æ€§ã€‚å¦‚æœåªæœ‰å‡ ç§é¢œè‰²ï¼Œä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªå†—ä½™çš„å½¢çŠ¶æ˜ å°„ã€‚è¿™ä¹Ÿæœ‰åŠ©äºç¡®ä¿ä½ çš„å›¾è¡¨åœ¨é»‘ç™½æ¨¡å¼ä¸‹ä¹Ÿæ˜¯å¯è§£é‡Šçš„ã€‚\n\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point(aes(color = drv, shape = drv)) +\n  scale_color_brewer(palette = \"Set1\")\n\n\n\n\n\n\n\nColorBrewer æ ‡åº¦åœ¨ https://colorbrewer2.org/ ä¸Šæœ‰åœ¨çº¿æ–‡æ¡£ï¼Œå¹¶é€šè¿‡ Erich Neuwirth çš„ RColorBrewer åŒ…åœ¨ R ä¸­å¯ç”¨ã€‚FigureÂ 11.1 å±•ç¤ºäº†æ‰€æœ‰è°ƒè‰²æ¿çš„å®Œæ•´åˆ—è¡¨ã€‚å¦‚æœä½ çš„åˆ†ç±»å€¼æ˜¯æœ‰åºçš„ï¼Œæˆ–è€…æœ‰ä¸€ä¸ªâ€œä¸­é—´å€¼â€ï¼Œé‚£ä¹ˆé¡ºåºï¼ˆé¡¶éƒ¨ï¼‰å’Œå‘æ•£ï¼ˆåº•éƒ¨ï¼‰è°ƒè‰²æ¿ç‰¹åˆ«æœ‰ç”¨ã€‚è¿™ç§æƒ…å†µé€šå¸¸åœ¨ä½ ä½¿ç”¨ cut() å°†è¿ç»­å˜é‡è½¬æ¢ä¸ºåˆ†ç±»å˜é‡æ—¶å‡ºç°ã€‚\n\n\n\n\n\n\n\nFigureÂ 11.1: æ‰€æœ‰çš„ ColorBrewer æ ‡åº¦ã€‚\n\n\n\n\nå½“ä½ æœ‰ä¸€ä¸ªé¢„å®šä¹‰çš„å€¼ä¸é¢œè‰²ä¹‹é—´çš„æ˜ å°„æ—¶ï¼Œä½¿ç”¨ scale_color_manual()ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬å°†æ€»ç»Ÿå…šæ´¾æ˜ å°„åˆ°é¢œè‰²ï¼Œæˆ‘ä»¬å¸Œæœ›ä½¿ç”¨æ ‡å‡†çš„æ˜ å°„ï¼Œå³çº¢è‰²ä»£è¡¨å…±å’Œå…šï¼Œè“è‰²ä»£è¡¨æ°‘ä¸»å…šã€‚åˆ†é…è¿™äº›é¢œè‰²çš„ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨åå…­è¿›åˆ¶é¢œè‰²ä»£ç ï¼š\n\npresidential |&gt;\n  mutate(id = 33 + row_number()) |&gt;\n  ggplot(aes(x = start, y = id, color = party)) +\n  geom_point() +\n  geom_segment(aes(xend = end, yend = id)) +\n  scale_color_manual(values = c(Republican = \"#E81B23\", Democratic = \"#00AEF3\"))\n\n\n\n\n\n\n\nå¯¹äºè¿ç»­é¢œè‰²ï¼Œä½ å¯ä»¥ä½¿ç”¨å†…ç½®çš„ scale_color_gradient() æˆ– scale_fill_gradient()ã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªå‘æ•£æ ‡åº¦ï¼Œä½ å¯ä»¥ä½¿ç”¨ scale_color_gradient2()ã€‚è¿™å…è®¸ä½ ï¼Œä¾‹å¦‚ï¼Œç»™æ­£å€¼å’Œè´Ÿå€¼ä¸åŒçš„é¢œè‰²ã€‚å¦‚æœä½ æƒ³åŒºåˆ†é«˜äºæˆ–ä½äºå¹³å‡å€¼çš„ç‚¹ï¼Œè¿™æœ‰æ—¶ä¹Ÿå¾ˆæœ‰ç”¨ã€‚\nå¦ä¸€ä¸ªé€‰æ‹©æ˜¯ä½¿ç”¨ viridis é¢œè‰²æ ‡åº¦ã€‚å…¶è®¾è®¡è€… Nathaniel Smith å’Œ StÃ©fan van der Walt ç²¾å¿ƒå®šåˆ¶äº†è¿ç»­é¢œè‰²æ–¹æ¡ˆï¼Œè¿™äº›æ–¹æ¡ˆå¯¹äºå„ç§å½¢å¼è‰²ç›²çš„äººæ¥è¯´éƒ½æ˜¯å¯æ„ŸçŸ¥çš„ï¼Œå¹¶ä¸”åœ¨é¢œè‰²å’Œé»‘ç™½æ¨¡å¼ä¸‹éƒ½æ˜¯æ„ŸçŸ¥å‡åŒ€çš„ã€‚è¿™äº›æ ‡åº¦åœ¨ ggplot2 ä¸­ä»¥è¿ç»­ (c)ã€ç¦»æ•£ (d) å’Œåˆ†ç®± (b) è°ƒè‰²æ¿çš„å½¢å¼æä¾›ã€‚\ndf &lt;- tibble(\n  x = rnorm(10000),\n  y = rnorm(10000)\n)\n\nggplot(df, aes(x, y)) +\n  geom_hex() +\n  coord_fixed() +\n  labs(title = \"é»˜è®¤ï¼Œè¿ç»­\", x = NULL, y = NULL)\n\nggplot(df, aes(x, y)) +\n  geom_hex() +\n  coord_fixed() +\n  scale_fill_viridis_c() +\n  labs(title = \"Viridis, è¿ç»­\", x = NULL, y = NULL)\n\nggplot(df, aes(x, y)) +\n  geom_hex() +\n  coord_fixed() +\n  scale_fill_viridis_b() +\n  labs(title = \"Viridis, åˆ†ç®±\", x = NULL, y = NULL)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nè¯·æ³¨æ„ï¼Œæ‰€æœ‰é¢œè‰²æ ‡åº¦éƒ½æœ‰ä¸¤ç§å˜ä½“ï¼šscale_color_*() å’Œ scale_fill_*()ï¼Œåˆ†åˆ«ç”¨äº color å’Œ fill ç¾å­¦ï¼ˆé¢œè‰²æ ‡åº¦åŒæ—¶æä¾›è‹±å¼å’Œç¾å¼æ‹¼å†™ï¼‰ã€‚\n\n11.4.5 ç¼©æ”¾\næœ‰ä¸‰ç§æ–¹æ³•å¯ä»¥æ§åˆ¶å›¾è¡¨çš„é™åˆ¶èŒƒå›´ï¼š\n\nè°ƒæ•´ç»˜åˆ¶çš„æ•°æ®ã€‚\nåœ¨æ¯ä¸ªæ ‡åº¦ä¸­è®¾ç½®é™åˆ¶ã€‚\nåœ¨ coord_cartesian() ä¸­è®¾ç½® xlim å’Œ ylimã€‚\n\næˆ‘ä»¬å°†åœ¨ç³»åˆ—å›¾è¡¨ä¸­æ¼”ç¤ºè¿™äº›é€‰é¡¹ã€‚å·¦è¾¹çš„å›¾æ˜¾ç¤ºäº†å‘åŠ¨æœºå°ºå¯¸å’Œç‡ƒæ²¹æ•ˆç‡ä¹‹é—´çš„å…³ç³»ï¼ŒæŒ‰é©±åŠ¨ç³»ç»Ÿç±»å‹ç€è‰²ã€‚å³è¾¹çš„å›¾æ˜¾ç¤ºäº†ç›¸åŒçš„å˜é‡ï¼Œä½†å¯¹ç»˜åˆ¶çš„æ•°æ®è¿›è¡Œäº†å­é›†åŒ–ã€‚å¯¹æ•°æ®è¿›è¡Œå­é›†åŒ–å½±å“äº† x å’Œ y è½´çš„æ ‡åº¦ä»¥åŠå¹³æ»‘æ›²çº¿ã€‚\n# å·¦å›¾\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point(aes(color = drv)) +\n  geom_smooth()\n\n# å³å›¾\nmpg |&gt;\n  filter(displ &gt;= 5 & displ &lt;= 6 & hwy &gt;= 10 & hwy &lt;= 25) |&gt;\n  ggplot(aes(x = displ, y = hwy)) +\n  geom_point(aes(color = drv)) +\n  geom_smooth()\n\n\n\n\n\n\n\n\n\n\nè®©æˆ‘ä»¬å°†è¿™äº›ä¸ä¸‹é¢çš„ä¸¤å¼ å›¾è¿›è¡Œæ¯”è¾ƒï¼Œå…¶ä¸­å·¦è¾¹çš„å›¾åœ¨å•ä¸ªæ ‡åº¦ä¸Šè®¾ç½®äº† limitsï¼Œè€Œå³è¾¹çš„å›¾åœ¨ coord_cartesian() ä¸­è®¾ç½®äº†å®ƒä»¬ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç¼©å° limits ç­‰åŒäºå¯¹æ•°æ®è¿›è¡Œå­é›†åŒ–ã€‚å› æ­¤ï¼Œè¦æ”¾å¤§å›¾è¡¨çš„æŸä¸ªåŒºåŸŸï¼Œé€šå¸¸æœ€å¥½ä½¿ç”¨ coord_cartesian()ã€‚\n# å·¦å›¾\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point(aes(color = drv)) +\n  geom_smooth() +\n  scale_x_continuous(limits = c(5, 6)) +\n  scale_y_continuous(limits = c(10, 25))\n\n# å³å›¾\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point(aes(color = drv)) +\n  geom_smooth() +\n  coord_cartesian(xlim = c(5, 6), ylim = c(10, 25))\n\n\n\n\n\n\n\n\n\n\nå¦ä¸€æ–¹é¢ï¼Œå¦‚æœä½ æƒ³ æ‰©å±• é™åˆ¶èŒƒå›´ï¼Œä¾‹å¦‚ï¼Œä¸ºäº†åœ¨ä¸åŒå›¾è¡¨é—´åŒ¹é…æ ‡åº¦ï¼Œåœ¨å•ä¸ªæ ‡åº¦ä¸Šè®¾ç½® limits é€šå¸¸æ›´æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æå–ä¸¤ç§ç±»å‹çš„æ±½è½¦å¹¶åˆ†åˆ«ç»˜åˆ¶å®ƒä»¬ï¼Œå¾ˆéš¾æ¯”è¾ƒè¿™äº›å›¾è¡¨ï¼Œå› ä¸ºæ‰€æœ‰ä¸‰ä¸ªæ ‡åº¦ï¼ˆx è½´ã€y è½´å’Œé¢œè‰²ç¾å­¦ï¼‰çš„èŒƒå›´éƒ½ä¸åŒã€‚\nsuv &lt;- mpg |&gt; filter(class == \"suv\")\ncompact &lt;- mpg |&gt; filter(class == \"compact\")\n\n# å·¦å›¾\nggplot(suv, aes(x = displ, y = hwy, color = drv)) +\n  geom_point()\n\n# å³å›¾\nggplot(compact, aes(x = displ, y = hwy, color = drv)) +\n  geom_point()\n\n\n\n\n\n\n\n\n\n\nå…‹æœè¿™ä¸ªé—®é¢˜çš„ä¸€ç§æ–¹æ³•æ˜¯åœ¨å¤šä¸ªå›¾è¡¨ä¹‹é—´å…±äº«æ ‡åº¦ï¼Œä½¿ç”¨å®Œæ•´æ•°æ®çš„ limits æ¥è®­ç»ƒæ ‡åº¦ã€‚\nx_scale &lt;- scale_x_continuous(limits = range(mpg$displ))\ny_scale &lt;- scale_y_continuous(limits = range(mpg$hwy))\ncol_scale &lt;- scale_color_discrete(limits = unique(mpg$drv))\n\n# å·¦å›¾\nggplot(suv, aes(x = displ, y = hwy, color = drv)) +\n  geom_point() +\n  x_scale +\n  y_scale +\n  col_scale\n\n# å³å›¾\nggplot(compact, aes(x = displ, y = hwy, color = drv)) +\n  geom_point() +\n  x_scale +\n  y_scale +\n  col_scale\n\n\n\n\n\n\n\n\n\n\nåœ¨è¿™ç§ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ç®€å•åœ°ä½¿ç”¨åˆ†é¢ï¼Œä½†è¿™ç§æŠ€æœ¯åœ¨æ›´ä¸€èˆ¬çš„æƒ…å†µä¸‹ä¹Ÿå¾ˆæœ‰ç”¨ï¼Œä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³å°†å›¾è¡¨åˆ†å¸ƒåœ¨æŠ¥å‘Šçš„å¤šä¸ªé¡µé¢ä¸Šã€‚\n\n11.4.6 ç»ƒä¹ \n\n\nä¸ºä»€ä¹ˆä¸‹é¢çš„ä»£ç æ²¡æœ‰è¦†ç›–é»˜è®¤çš„æ ‡åº¦ï¼Ÿ\n\ndf &lt;- tibble(\n  x = rnorm(10000),\n  y = rnorm(10000)\n)\n\nggplot(df, aes(x, y)) +\n  geom_hex() +\n  scale_color_gradient(low = \"white\", high = \"red\") +\n  coord_fixed()\n\n\næ¯ä¸ªæ ‡åº¦çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä»€ä¹ˆï¼Ÿå®ƒä¸ labs() æœ‰ä½•ä¸åŒï¼Ÿ\n\né€šè¿‡ä»¥ä¸‹æ–¹å¼æ›´æ”¹æ€»ç»Ÿä»»æœŸçš„æ˜¾ç¤ºï¼š\n\nç»“åˆå®šåˆ¶é¢œè‰²å’Œ x è½´åˆ»åº¦çš„ä¸¤ä¸ªå˜ä½“ã€‚\næ”¹è¿› y è½´çš„æ˜¾ç¤ºã€‚\nç”¨æ€»ç»Ÿçš„åå­—æ ‡è®°æ¯ä¸ªä»»æœŸã€‚\næ·»åŠ ä¿¡æ¯ä¸°å¯Œçš„å›¾è¡¨æ ‡ç­¾ã€‚\næ¯ 4 å¹´è®¾ç½®ä¸€ä¸ªåˆ»åº¦ï¼ˆè¿™æ¯”çœ‹èµ·æ¥è¦æ£˜æ‰‹ï¼ï¼‰ã€‚\n\n\n\né¦–å…ˆï¼Œåˆ›å»ºä»¥ä¸‹å›¾è¡¨ã€‚ç„¶åï¼Œä½¿ç”¨ override.aes ä¿®æ”¹ä»£ç ï¼Œä½¿å›¾ä¾‹æ›´å®¹æ˜“çœ‹æ¸…ã€‚\n\nggplot(diamonds, aes(x = carat, y = price)) +\n  geom_point(aes(color = cut), alpha = 1/20)",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>11</span>Â  <span class='chapter-title'>æ²Ÿé€š</span>"
    ]
  },
  {
    "objectID": "communication.html#sec-themes",
    "href": "communication.html#sec-themes",
    "title": "11Â  æ²Ÿé€š",
    "section": "\n11.5 ä¸»é¢˜",
    "text": "11.5 ä¸»é¢˜\næœ€åï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸»é¢˜ (theme) æ¥è‡ªå®šä¹‰å›¾è¡¨çš„éæ•°æ®å…ƒç´ ï¼š\n\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point(aes(color = class)) +\n  geom_smooth(se = FALSE) +\n  theme_bw()\n\n\n\n\n\n\n\nggplot2 åŒ…å«äº† FigureÂ 11.2 ä¸­æ˜¾ç¤ºçš„å…«ä¸ªä¸»é¢˜ï¼Œå…¶ä¸­ theme_gray() æ˜¯é»˜è®¤ä¸»é¢˜ã€‚2 æ›´å¤šçš„ä¸»é¢˜åŒ…å«åœ¨é™„åŠ åŒ…ä¸­ï¼Œå¦‚ Jeffrey Arnold çš„ ggthemes (https://jrnold.github.io/ggthemes)ã€‚å¦‚æœä½ è¯•å›¾åŒ¹é…ç‰¹å®šçš„å…¬å¸æˆ–æœŸåˆŠé£æ ¼ï¼Œä½ ä¹Ÿå¯ä»¥åˆ›å»ºè‡ªå·±çš„ä¸»é¢˜ã€‚\n\n\n\n\n\n\n\nFigureÂ 11.2: ggplot2 å†…ç½®çš„å…«ä¸ªä¸»é¢˜ã€‚\n\n\n\n\nä¹Ÿå¯ä»¥æ§åˆ¶æ¯ä¸ªä¸»é¢˜çš„å•ä¸ªç»„ä»¶ï¼Œæ¯”å¦‚ y è½´ä½¿ç”¨çš„å­—ä½“å¤§å°å’Œé¢œè‰²ã€‚æˆ‘ä»¬å·²ç»çœ‹åˆ° legend.position æ§åˆ¶å›¾ä¾‹çš„ç»˜åˆ¶ä½ç½®ã€‚è¿˜æœ‰è®¸å¤šå…¶ä»–å›¾ä¾‹æ–¹é¢å¯ä»¥é€šè¿‡ theme() è¿›è¡Œè‡ªå®šä¹‰ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„å›¾ä¸­ï¼Œæˆ‘ä»¬æ”¹å˜äº†å›¾ä¾‹çš„æ–¹å‘ï¼Œå¹¶ç»™å®ƒåŠ ä¸Šäº†é»‘è‰²çš„è¾¹æ¡†ã€‚æ³¨æ„ï¼Œå›¾ä¾‹æ¡†å’Œå›¾è¡¨æ ‡é¢˜å…ƒç´ çš„è‡ªå®šä¹‰æ˜¯é€šè¿‡ element_*() å‡½æ•°å®Œæˆçš„ã€‚è¿™äº›å‡½æ•°æŒ‡å®šäº†éæ•°æ®ç»„ä»¶çš„æ ·å¼ï¼Œä¾‹å¦‚ï¼Œæ ‡é¢˜æ–‡æœ¬åœ¨ element_text() çš„ face å‚æ•°ä¸­è¢«åŠ ç²—ï¼Œå›¾ä¾‹è¾¹æ¡†é¢œè‰²åœ¨ element_rect() çš„ color å‚æ•°ä¸­å®šä¹‰ã€‚æ§åˆ¶æ ‡é¢˜å’Œè„šæ³¨ä½ç½®çš„ä¸»é¢˜å…ƒç´ åˆ†åˆ«æ˜¯ plot.title.position å’Œ plot.caption.positionã€‚åœ¨ä¸‹é¢çš„å›¾ä¸­ï¼Œè¿™äº›è¢«è®¾ç½®ä¸º \"plot\"ï¼Œè¡¨ç¤ºè¿™äº›å…ƒç´ ä¸æ•´ä¸ªç»˜å›¾åŒºåŸŸå¯¹é½ï¼Œè€Œä¸æ˜¯ç»˜å›¾é¢æ¿ï¼ˆé»˜è®¤ï¼‰ã€‚è¿˜ä½¿ç”¨äº†ä¸€äº›å…¶ä»–æœ‰ç”¨çš„ theme() ç»„ä»¶æ¥æ›´æ”¹æ ‡é¢˜å’Œè„šæ³¨æ–‡æœ¬çš„ä½ç½®æˆ–æ ¼å¼ã€‚\n\nggplot(mpg, aes(x = displ, y = hwy, color = drv)) +\n  geom_point() +\n  labs(\n    title = \"å‘åŠ¨æœºå°ºå¯¸è¶Šå¤§ï¼Œç‡ƒæ²¹ç»æµæ€§è¶Šä½\",\n    caption = \"æ¥æº: https://fueleconomy.gov.\"\n  ) +\n  theme(\n    legend.position = c(0.6, 0.7),\n    legend.direction = \"horizontal\",\n    legend.box.background = element_rect(color = \"black\"),\n    plot.title = element_text(face = \"bold\"),\n    plot.title.position = \"plot\",\n    plot.caption.position = \"plot\",\n    plot.caption = element_text(hjust = 0)\n  )\n#&gt; Warning: A numeric `legend.position` argument in `theme()` was deprecated in ggplot2\n#&gt; 3.5.0.\n#&gt; â„¹ Please use the `legend.position.inside` argument of `theme()` instead.\n\n\n\n\n\n\n\næœ‰å…³æ‰€æœ‰ theme() ç»„ä»¶çš„æ¦‚è¿°ï¼Œè¯·å‚é˜… ?theme çš„å¸®åŠ©æ–‡æ¡£ã€‚ggplot2 book ä¹Ÿæ˜¯äº†è§£ä¸»é¢˜å…¨éƒ¨ç»†èŠ‚çš„å¥½å»å¤„ã€‚\n\n11.5.1 ç»ƒä¹ \n\nä» ggthemes åŒ…ä¸­é€‰æ‹©ä¸€ä¸ªä¸»é¢˜ï¼Œå¹¶å°†å…¶åº”ç”¨äºä½ åˆ¶ä½œçš„æœ€åä¸€å¼ å›¾ã€‚\nå°†ä½ çš„å›¾è¡¨çš„åæ ‡è½´æ ‡ç­¾è®¾ç½®ä¸ºè“è‰²å’Œç²—ä½“ã€‚",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>11</span>Â  <span class='chapter-title'>æ²Ÿé€š</span>"
    ]
  },
  {
    "objectID": "communication.html#å¸ƒå±€",
    "href": "communication.html#å¸ƒå±€",
    "title": "11Â  æ²Ÿé€š",
    "section": "\n11.6 å¸ƒå±€",
    "text": "11.6 å¸ƒå±€\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬è®¨è®ºäº†å¦‚ä½•åˆ›å»ºå’Œä¿®æ”¹å•ä¸ªå›¾è¡¨ã€‚å¦‚æœä½ æœ‰å¤šä¸ªå›¾è¡¨ï¼Œå¹¶å¸Œæœ›ä»¥æŸç§æ–¹å¼å°†å®ƒä»¬å¸ƒå±€ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿpatchwork åŒ…å…è®¸ä½ å°†å•ç‹¬çš„å›¾è¡¨ç»„åˆæˆåŒä¸€ä¸ªå›¾å½¢ã€‚æˆ‘ä»¬åœ¨æœ¬ç« å‰é¢åŠ è½½äº†è¿™ä¸ªåŒ…ã€‚\nè¦å°†ä¸¤ä¸ªå›¾è¡¨å¹¶æ’æ”¾ç½®ï¼Œä½ å¯ä»¥ç®€å•åœ°å°†å®ƒä»¬ç›¸åŠ ã€‚æ³¨æ„ï¼Œä½ é¦–å…ˆéœ€è¦åˆ›å»ºå›¾è¡¨å¹¶å°†å®ƒä»¬ä¿å­˜ä¸ºå¯¹è±¡ï¼ˆåœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œå®ƒä»¬è¢«ç§°ä¸º p1 å’Œ p2ï¼‰ã€‚ç„¶åï¼Œä½ ç”¨ + å°†å®ƒä»¬å¹¶æ’ã€‚\n\np1 &lt;- ggplot(mpg, aes(x = displ, y = hwy)) + \n  geom_point() + \n  labs(title = \"å›¾ 1\")\np2 &lt;- ggplot(mpg, aes(x = drv, y = hwy)) + \n  geom_boxplot() + \n  labs(title = \"å›¾ 2\")\np1 + p2\n\n\n\n\n\n\n\nå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä¸Šé¢çš„ä»£ç å—ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨ patchwork åŒ…çš„æ–°å‡½æ•°ã€‚ç›¸åï¼Œè¯¥åŒ…ä¸º + è¿ç®—ç¬¦æ·»åŠ äº†æ–°åŠŸèƒ½ã€‚\nä½ ä¹Ÿå¯ä»¥ç”¨ patchwork åˆ›å»ºå¤æ‚çš„å›¾è¡¨å¸ƒå±€ã€‚åœ¨ä¸‹é¢ï¼Œ| å°† p1 å’Œ p3 å¹¶æ’æ”¾ç½®ï¼Œè€Œ / å°† p2 ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œã€‚\n\np3 &lt;- ggplot(mpg, aes(x = cty, y = hwy)) + \n  geom_point() + \n  labs(title = \"å›¾ 3\")\n(p1 | p3) / p2\n\n\n\n\n\n\n\næ­¤å¤–ï¼Œpatchwork å…è®¸ä½ å°†å¤šä¸ªå›¾è¡¨çš„å›¾ä¾‹æ”¶é›†åˆ°ä¸€ä¸ªå…¬å…±å›¾ä¾‹ä¸­ï¼Œè‡ªå®šä¹‰å›¾ä¾‹çš„ä½ç½®ä»¥åŠå›¾è¡¨çš„å°ºå¯¸ï¼Œå¹¶ä¸ºä½ çš„å›¾è¡¨æ·»åŠ ä¸€ä¸ªå…±åŒçš„æ ‡é¢˜ã€å‰¯æ ‡é¢˜ã€è„šæ³¨ç­‰ã€‚ä¸‹é¢æˆ‘ä»¬åˆ›å»º 5 å¼ å›¾ã€‚æˆ‘ä»¬å…³é—­äº†ç®±çº¿å›¾å’Œæ•£ç‚¹å›¾çš„å›¾ä¾‹ï¼Œå¹¶ç”¨ & theme(legend.position = \"top\") å°†å¯†åº¦å›¾çš„å›¾ä¾‹æ”¶é›†åˆ°å›¾è¡¨çš„é¡¶éƒ¨ã€‚æ³¨æ„è¿™é‡Œä½¿ç”¨äº† & è¿ç®—ç¬¦è€Œä¸æ˜¯é€šå¸¸çš„ +ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ­£åœ¨ä¿®æ”¹ patchwork å›¾çš„ä¸»é¢˜ï¼Œè€Œä¸æ˜¯å•ä¸ª ggplot å¯¹è±¡ã€‚å›¾ä¾‹è¢«æ”¾ç½®åœ¨é¡¶éƒ¨ï¼Œåœ¨ guide_area() å†…éƒ¨ã€‚æœ€åï¼Œæˆ‘ä»¬è¿˜è‡ªå®šä¹‰äº† patchwork ä¸­å„ä¸ªç»„ä»¶çš„é«˜åº¦â€”â€”å¼•å¯¼åŒºé«˜åº¦ä¸º 1ï¼Œç®±çº¿å›¾ä¸º 3ï¼Œå¯†åº¦å›¾ä¸º 2ï¼Œåˆ†é¢æ•£ç‚¹å›¾ä¸º 4ã€‚Patchwork ä½¿ç”¨è¿™ä¸ªæ¯”ä¾‹æ¥åˆ’åˆ†ä½ ä¸ºå›¾è¡¨åˆ†é…çš„åŒºåŸŸï¼Œå¹¶ç›¸åº”åœ°æ”¾ç½®ç»„ä»¶ã€‚\n\np1 &lt;- ggplot(mpg, aes(x = drv, y = cty, color = drv)) + \n  geom_boxplot(show.legend = FALSE) + \n  labs(title = \"å›¾ 1\")\n\np2 &lt;- ggplot(mpg, aes(x = drv, y = hwy, color = drv)) + \n  geom_boxplot(show.legend = FALSE) + \n  labs(title = \"å›¾ 2\")\n\np3 &lt;- ggplot(mpg, aes(x = cty, color = drv, fill = drv)) + \n  geom_density(alpha = 0.5) + \n  labs(title = \"å›¾ 3\")\n\np4 &lt;- ggplot(mpg, aes(x = hwy, color = drv, fill = drv)) + \n  geom_density(alpha = 0.5) + \n  labs(title = \"å›¾ 4\")\n\np5 &lt;- ggplot(mpg, aes(x = cty, y = hwy, color = drv)) + \n  geom_point(show.legend = FALSE) + \n  facet_wrap(~drv) +\n  labs(title = \"å›¾ 5\")\n\n(guide_area() / (p1 + p2) / (p3 + p4) / p5) +\n  plot_annotation(\n    title = \"ä¸åŒé©±åŠ¨æ–¹å¼æ±½è½¦çš„åŸå¸‚å’Œé«˜é€Ÿå…¬è·¯é‡Œç¨‹\",\n    caption = \"æ¥æº: https://fueleconomy.gov.\"\n  ) +\n  plot_layout(\n    guides = \"collect\",\n    heights = c(1, 3, 2, 4)\n    ) &\n  theme(legend.position = \"top\")\n\n\n\n\n\n\n\nå¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºç”¨ patchwork ç»„åˆå’Œå¸ƒå±€å¤šä¸ªå›¾è¡¨çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬å»ºè®®ä½ æµè§ˆè¯¥åŒ…ç½‘ç«™ä¸Šçš„æŒ‡å—ï¼šhttps://patchwork.data-imaginist.comã€‚\n\n11.6.1 ç»ƒä¹ \n\n\nå¦‚æœåœ¨ä¸‹é¢çš„å›¾è¡¨å¸ƒå±€ä¸­çœç•¥æ‹¬å·ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿä½ èƒ½è§£é‡Šä¸ºä»€ä¹ˆä¼šè¿™æ ·å—ï¼Ÿ\n\np1 &lt;- ggplot(mpg, aes(x = displ, y = hwy)) + \n  geom_point() + \n  labs(title = \"å›¾ 1\")\np2 &lt;- ggplot(mpg, aes(x = drv, y = hwy)) + \n  geom_boxplot() + \n  labs(title = \"å›¾ 2\")\np3 &lt;- ggplot(mpg, aes(x = cty, y = hwy)) + \n  geom_point() + \n  labs(title = \"å›¾ 3\")\n\n(p1 | p2) / p3\n\n\n\nä½¿ç”¨ä¸Šä¸€ä¸ªç»ƒä¹ ä¸­çš„ä¸‰å¼ å›¾ï¼Œé‡æ–°åˆ›å»ºä¸‹é¢çš„ patchworkã€‚",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>11</span>Â  <span class='chapter-title'>æ²Ÿé€š</span>"
    ]
  },
  {
    "objectID": "communication.html#æ€»ç»“",
    "href": "communication.html#æ€»ç»“",
    "title": "11Â  æ²Ÿé€š",
    "section": "\n11.7 æ€»ç»“",
    "text": "11.7 æ€»ç»“\nåœ¨æœ¬ç« ä¸­ï¼Œä½ å­¦ä¹ äº†å¦‚ä½•æ·»åŠ å›¾è¡¨æ ‡ç­¾ï¼Œå¦‚æ ‡é¢˜ã€å‰¯æ ‡é¢˜ã€è„šæ³¨ï¼Œä»¥åŠå¦‚ä½•ä¿®æ”¹é»˜è®¤çš„åæ ‡è½´æ ‡ç­¾ï¼Œå¦‚ä½•ä½¿ç”¨æ³¨é‡Šä¸ºä½ çš„å›¾è¡¨æ·»åŠ ä¿¡æ¯æ€§æ–‡æœ¬æˆ–çªå‡ºæ˜¾ç¤ºç‰¹å®šæ•°æ®ç‚¹ï¼Œå¦‚ä½•è‡ªå®šä¹‰åæ ‡è½´æ ‡åº¦ï¼Œä»¥åŠå¦‚ä½•æ›´æ”¹å›¾è¡¨çš„ä¸»é¢˜ã€‚ä½ è¿˜å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨ç®€å•å’Œå¤æ‚çš„å›¾è¡¨å¸ƒå±€å°†å¤šä¸ªå›¾è¡¨ç»„åˆæˆä¸€ä¸ªå•ä¸€çš„å›¾å½¢ã€‚\nè™½ç„¶åˆ°ç›®å‰ä¸ºæ­¢ä½ å·²ç»å­¦ä¼šäº†å¦‚ä½•åˆ¶ä½œè®¸å¤šä¸åŒç±»å‹çš„å›¾è¡¨ä»¥åŠå¦‚ä½•ä½¿ç”¨å„ç§æŠ€æœ¯æ¥å®šåˆ¶å®ƒä»¬ï¼Œä½†æˆ‘ä»¬ä»…ä»…è§¦åŠäº†ä½ èƒ½ç”¨ ggplot2 åˆ›é€ çš„ä¸œè¥¿çš„çš®æ¯›ã€‚å¦‚æœä½ æƒ³å…¨é¢äº†è§£ ggplot2ï¼Œæˆ‘ä»¬æ¨èé˜…è¯» ggplot2: Elegant Graphics for Data Analysis è¿™æœ¬ä¹¦ã€‚å…¶ä»–æœ‰ç”¨çš„èµ„æºåŒ…æ‹¬ Winston Chang çš„ R Graphics Cookbook å’Œ Claus Wilke çš„ Fundamentals of Data Visualizationã€‚",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>11</span>Â  <span class='chapter-title'>æ²Ÿé€š</span>"
    ]
  },
  {
    "objectID": "communication.html#footnotes",
    "href": "communication.html#footnotes",
    "title": "11Â  æ²Ÿé€š",
    "section": "",
    "text": "ä½ å¯ä»¥ä½¿ç”¨åƒ SimDaltonism è¿™æ ·çš„å·¥å…·æ¥æ¨¡æ‹Ÿè‰²ç›²ï¼Œä»¥æµ‹è¯•è¿™äº›å›¾åƒã€‚â†©ï¸\nå¾ˆå¤šäººæƒ³çŸ¥é“ä¸ºä»€ä¹ˆé»˜è®¤ä¸»é¢˜æœ‰ä¸€ä¸ªç°è‰²çš„èƒŒæ™¯ã€‚è¿™æ˜¯ä¸€ä¸ªæ•…æ„çš„é€‰æ‹©ï¼Œå› ä¸ºå®ƒæ—¢çªå‡ºäº†æ•°æ®ï¼Œåˆä½¿ç½‘æ ¼çº¿å¯è§ã€‚ç™½è‰²çš„ç½‘æ ¼çº¿æ˜¯å¯è§çš„ï¼ˆè¿™å¾ˆé‡è¦ï¼Œå› ä¸ºå®ƒä»¬æ˜¾è‘—åœ°è¾…åŠ©äº†ä½ç½®åˆ¤æ–­ï¼‰ï¼Œä½†å®ƒä»¬çš„è§†è§‰å½±å“å¾ˆå°ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ˜“åœ°å¿½ç•¥å®ƒä»¬ã€‚ç°è‰²çš„èƒŒæ™¯ä½¿å›¾è¡¨å…·æœ‰ä¸æ–‡æœ¬ç›¸ä¼¼çš„æ’ç‰ˆé¢œè‰²ï¼Œç¡®ä¿å›¾å½¢ä¸æ–‡æ¡£çš„æµç¨‹èä¸ºä¸€ä½“ï¼Œè€Œä¸ä¼šå› ä¸ºæ˜äº®çš„ç™½è‰²èƒŒæ™¯è€Œè·³è„±å‡ºæ¥ã€‚æœ€åï¼Œç°è‰²çš„èƒŒæ™¯åˆ›é€ äº†ä¸€ä¸ªè¿ç»­çš„é¢œè‰²åŒºåŸŸï¼Œç¡®ä¿å›¾è¡¨è¢«æ„ŸçŸ¥ä¸ºä¸€ä¸ªå•ä¸€çš„è§†è§‰å®ä½“ã€‚â†©ï¸",
    "crumbs": [
      "å¯è§†åŒ–",
      "<span class='chapter-number'>11</span>Â  <span class='chapter-title'>æ²Ÿé€š</span>"
    ]
  },
  {
    "objectID": "transform.html",
    "href": "transform.html",
    "title": "æ•°æ®è½¬æ¢",
    "section": "",
    "text": "æœ¬ä¹¦çš„ç¬¬äºŒéƒ¨åˆ†æ·±å…¥æ¢è®¨äº†æ•°æ®å¯è§†åŒ–ã€‚åœ¨æœ¬ä¹¦çš„è¿™ä¸€éƒ¨åˆ†ï¼Œä½ å°†å­¦ä¹ æ•°æ®æ¡† (data frame) ä¸­ä¼šé‡åˆ°çš„æœ€é‡è¦å˜é‡ç±»å‹ï¼Œä»¥åŠå¯ä»¥ç”¨æ¥å¤„ç†å®ƒä»¬çš„å·¥å…·ã€‚\n\n\n\n\n\n\n\nFigureÂ 1: æ•°æ®è½¬æ¢çš„é€‰é¡¹åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºæ‰€æ¶‰åŠçš„æ•°æ®ç±»å‹ï¼Œè¿™ä¹Ÿæ˜¯æœ¬ä¹¦è¿™ä¸€éƒ¨åˆ†çš„ä¸»é¢˜ã€‚\n\n\n\n\nä½ å¯ä»¥æ ¹æ®éœ€è¦é˜…è¯»è¿™äº›ç« èŠ‚ï¼›å®ƒä»¬çš„è®¾è®¡åˆè¡·æ˜¯ä½¿å…¶åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šä¿æŒç‹¬ç«‹ï¼Œå› æ­¤å¯ä»¥ä¸æŒ‰é¡ºåºé˜…è¯»ã€‚\n\n12Â  é€»è¾‘å‘é‡ å°†æ•™ä½ æœ‰å…³é€»è¾‘å‘é‡çš„çŸ¥è¯†ã€‚è¿™æ˜¯æœ€ç®€å•çš„å‘é‡ç±»å‹ï¼Œä½†åŠŸèƒ½å´æå…¶å¼ºå¤§ã€‚ä½ å°†å­¦ä¹ å¦‚ä½•é€šè¿‡æ•°å€¼æ¯”è¾ƒæ¥åˆ›å»ºå®ƒä»¬ï¼Œå¦‚ä½•ç”¨å¸ƒå°”ä»£æ•° (Boolean algebra) æ¥ç»„åˆå®ƒä»¬ï¼Œå¦‚ä½•åœ¨æ±‡æ€»æ‘˜è¦ä¸­ä½¿ç”¨å®ƒä»¬ï¼Œä»¥åŠå¦‚ä½•åˆ©ç”¨å®ƒä»¬è¿›è¡Œæ¡ä»¶è½¬æ¢ã€‚\n13Â  æ•°å€¼ æ·±å…¥æ¢è®¨äº†å¤„ç†æ•°å€¼å‘é‡çš„å·¥å…·ï¼Œæ•°å€¼å‘é‡æ˜¯æ•°æ®ç§‘å­¦çš„åŠ¨åŠ›æºæ³‰ã€‚ä½ å°†å­¦åˆ°æ›´å¤šå…³äºè®¡æ•°ä»¥åŠä¸€ç³»åˆ—é‡è¦çš„è½¬æ¢å’Œæ±‡æ€»å‡½æ•°çš„çŸ¥è¯†ã€‚\n14Â  å­—ç¬¦ä¸² å°†ä¸ºä½ æä¾›å¤„ç†å­—ç¬¦ä¸²çš„å·¥å…·ï¼šä½ å°†å¯¹å®ƒä»¬è¿›è¡Œåˆ‡ç‰‡ã€åˆ†å‰²ï¼Œç„¶åå†å°†å®ƒä»¬ç²˜åˆåœ¨ä¸€èµ·ã€‚æœ¬ç« ä¸»è¦å…³æ³¨ stringr åŒ…ï¼Œä½†ä½ ä¹Ÿä¼šå­¦åˆ°ä¸€äº›ç”¨äºä»å­—ç¬¦ä¸²ä¸­æå–æ•°æ®çš„ tidyr å‡½æ•°ã€‚\n15Â  æ­£åˆ™è¡¨è¾¾å¼ å‘ä½ ä»‹ç»æ­£åˆ™è¡¨è¾¾å¼ (regular expressions)ï¼Œè¿™æ˜¯ä¸€ç§å¼ºå¤§çš„å­—ç¬¦ä¸²å¤„ç†å·¥å…·ã€‚æœ¬ç« å°†å¸¦ä½ ä»çœ‹åˆ°å®ƒä»¬å°±è§‰å¾—åƒæ˜¯çŒ«è¸©è¿‡é”®ç›˜ä¸€æ ·ï¼Œåˆ°èƒ½å¤Ÿè¯»æ‡‚å¹¶ç¼–å†™å¤æ‚çš„å­—ç¬¦ä¸²æ¨¡å¼ã€‚\n16Â  å› å­ ä»‹ç»å› å­ (factor)ï¼šR ç”¨æ¥å­˜å‚¨åˆ†ç±»æ•°æ®çš„ç±»å‹ã€‚å½“ä¸€ä¸ªå˜é‡å…·æœ‰å›ºå®šçš„å¯èƒ½å€¼é›†åˆæ—¶ï¼Œæˆ–è€…å½“ä½ å¸Œæœ›ä½¿ç”¨éå­—æ¯é¡ºåºå¯¹å­—ç¬¦ä¸²è¿›è¡Œæ’åºæ—¶ï¼Œä½ å°±ä¼šä½¿ç”¨å› å­ã€‚\n17Â  æ—¥æœŸå’Œæ—¶é—´ å°†ä¸ºä½ æä¾›å¤„ç†æ—¥æœŸå’Œæ—¥æœŸæ—¶é—´çš„å…³é”®å·¥å…·ã€‚ä¸å¹¸çš„æ˜¯ï¼Œä½ å¯¹æ—¥æœŸæ—¶é—´äº†è§£å¾—è¶Šå¤šï¼Œå®ƒä»¬ä¼¼ä¹å°±å˜å¾—è¶Šå¤æ‚ï¼Œä½†åœ¨ lubridate åŒ…çš„å¸®åŠ©ä¸‹ï¼Œä½ å°†å­¦ä¼šå¦‚ä½•å…‹æœæœ€å¸¸è§çš„æŒ‘æˆ˜ã€‚\n18Â  ç¼ºå¤±å€¼ æ·±å…¥è®¨è®ºç¼ºå¤±å€¼ã€‚æˆ‘ä»¬å·²ç»å•ç‹¬è®¨è®ºè¿‡å‡ æ¬¡ç¼ºå¤±å€¼ï¼Œä½†ç°åœ¨æ˜¯æ—¶å€™å…¨é¢åœ°è®¨è®ºå®ƒä»¬äº†ï¼Œå¸®åŠ©ä½ æŒæ¡éšå¼å’Œæ˜¾å¼ç¼ºå¤±å€¼ä¹‹é—´çš„åŒºåˆ«ï¼Œä»¥åŠå¦‚ä½•åœ¨å®ƒä»¬ä¹‹é—´è¿›è¡Œè½¬æ¢ä»¥åŠä¸ºä»€ä¹ˆè¦è¿™æ ·åšã€‚\n19Â  è¿æ¥ ä½œä¸ºæœ¬ä¹¦è¿™ä¸€éƒ¨åˆ†çš„æ”¶å°¾ï¼Œä¸ºä½ æä¾›äº†å°†ä¸¤ä¸ª (æˆ–å¤šä¸ª) æ•°æ®æ¡†è¿æ¥åœ¨ä¸€èµ·çš„å·¥å…·ã€‚å­¦ä¹ è¿æ¥æ“ä½œå°†è¿«ä½¿ä½ æ·±å…¥ç†è§£â€œé”®â€ (key) çš„æ¦‚å¿µï¼Œå¹¶æ€è€ƒå¦‚ä½•è¯†åˆ«æ•°æ®é›†ä¸­çš„æ¯ä¸€è¡Œã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢"
    ]
  },
  {
    "objectID": "logicals.html",
    "href": "logicals.html",
    "title": "12Â  é€»è¾‘å‘é‡",
    "section": "",
    "text": "12.1 å¼•è¨€\nåœ¨æœ¬ç« ä¸­ï¼Œä½ å°†å­¦ä¹ å¤„ç†é€»è¾‘å‘é‡çš„å·¥å…·ã€‚é€»è¾‘å‘é‡æ˜¯æœ€ç®€å•çš„å‘é‡ç±»å‹ï¼Œå› ä¸ºæ¯ä¸ªå…ƒç´ åªèƒ½æ˜¯ä¸‰ä¸ªå¯èƒ½çš„å€¼ä¹‹ä¸€ï¼šTRUEã€FALSE å’Œ NAã€‚åœ¨åŸå§‹æ•°æ®ä¸­å¾ˆå°‘ä¼šé‡åˆ°é€»è¾‘å‘é‡ï¼Œä½†åœ¨å‡ ä¹æ¯ä¸€æ¬¡åˆ†æçš„è¿‡ç¨‹ä¸­ï¼Œä½ éƒ½ä¼šåˆ›å»ºå’Œæ“ä½œå®ƒä»¬ã€‚\næˆ‘ä»¬å°†é¦–å…ˆè®¨è®ºåˆ›å»ºé€»è¾‘å‘é‡æœ€å¸¸ç”¨çš„æ–¹æ³•ï¼šä½¿ç”¨æ•°å€¼æ¯”è¾ƒã€‚ç„¶åï¼Œä½ å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨å¸ƒå°”ä»£æ•°æ¥ç»„åˆä¸åŒçš„é€»è¾‘å‘é‡ï¼Œä»¥åŠä¸€äº›æœ‰ç”¨çš„æ±‡æ€»æ–¹æ³•ã€‚æœ€åï¼Œæˆ‘ä»¬å°†ä»‹ç» if_else() å’Œ case_when()ï¼Œè¿™æ˜¯ä¸¤ä¸ªéå¸¸æœ‰ç”¨çš„å‡½æ•°ï¼Œå¯ä»¥åˆ©ç”¨é€»è¾‘å‘é‡è¿›è¡Œæ¡ä»¶æ€§æ›´æ”¹ã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>12</span>Â  <span class='chapter-title'>é€»è¾‘å‘é‡</span>"
    ]
  },
  {
    "objectID": "logicals.html#å¼•è¨€",
    "href": "logicals.html#å¼•è¨€",
    "title": "12Â  é€»è¾‘å‘é‡",
    "section": "",
    "text": "12.1.1 å…ˆå†³æ¡ä»¶\næœ¬ç« ä¸­ä½ å°†å­¦åˆ°çš„å¤§éƒ¨åˆ†å‡½æ•°éƒ½ç”± R base æä¾›ï¼Œæ‰€ä»¥æˆ‘ä»¬å¹¶ä¸éœ€è¦ tidyverseï¼Œä½†æˆ‘ä»¬ä»ç„¶ä¼šåŠ è½½å®ƒï¼Œä»¥ä¾¿ä½¿ç”¨ mutate()ã€filter() ç­‰å‡½æ•°æ¥å¤„ç†æ•°æ®æ¡†ã€‚æˆ‘ä»¬ä¹Ÿå°†ç»§ç»­ä½¿ç”¨ nycflights13::flights æ•°æ®é›†ä¸­çš„ç¤ºä¾‹ã€‚\n\nlibrary(tidyverse)\nlibrary(nycflights13)\n\nç„¶è€Œï¼Œéšç€æˆ‘ä»¬å¼€å§‹æ¶‰åŠæ›´å¤šçš„å·¥å…·ï¼Œå¹¶ä¸æ€»èƒ½æ‰¾åˆ°ä¸€ä¸ªå®Œç¾çš„çœŸå®ç¤ºä¾‹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†å¼€å§‹ä½¿ç”¨ c() æ¥åˆ›å»ºä¸€äº›è™šæ‹Ÿæ•°æ®ï¼š\n\nx &lt;- c(1, 2, 3, 5, 7, 11, 13)\nx * 2\n#&gt; [1]  2  4  6 10 14 22 26\n\nè¿™æ ·åšè™½ç„¶æ›´å®¹æ˜“è§£é‡Šå•ä¸ªå‡½æ•°ï¼Œä½†ä»£ä»·æ˜¯æ›´éš¾çœ‹å‡ºå®ƒå¦‚ä½•åº”ç”¨äºä½ çš„æ•°æ®é—®é¢˜ã€‚åªéœ€è®°ä½ï¼Œæˆ‘ä»¬å¯¹ä¸€ä¸ªç‹¬ç«‹å‘é‡è¿›è¡Œçš„ä»»ä½•æ“ä½œï¼Œä½ éƒ½å¯ä»¥é€šè¿‡ mutate() åŠç›¸å…³å‡½æ•°å¯¹æ•°æ®æ¡†ä¸­çš„å˜é‡è¿›è¡ŒåŒæ ·çš„æ“ä½œã€‚\n\ndf &lt;- tibble(x)\ndf |&gt; \n  mutate(y = x * 2)\n#&gt; # A tibble: 7 Ã— 2\n#&gt;       x     y\n#&gt;   &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1     1     2\n#&gt; 2     2     4\n#&gt; 3     3     6\n#&gt; 4     5    10\n#&gt; 5     7    14\n#&gt; 6    11    22\n#&gt; # â„¹ 1 more row",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>12</span>Â  <span class='chapter-title'>é€»è¾‘å‘é‡</span>"
    ]
  },
  {
    "objectID": "logicals.html#æ¯”è¾ƒ",
    "href": "logicals.html#æ¯”è¾ƒ",
    "title": "12Â  é€»è¾‘å‘é‡",
    "section": "\n12.2 æ¯”è¾ƒ",
    "text": "12.2 æ¯”è¾ƒ\nåˆ›å»ºé€»è¾‘å‘é‡çš„ä¸€ç§éå¸¸å¸¸è§çš„æ–¹æ³•æ˜¯é€šè¿‡æ•°å€¼æ¯”è¾ƒè¿ç®—ç¬¦ï¼š&lt;ã€&lt;=ã€&gt;ã€&gt;=ã€!= å’Œ ==ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸»è¦æ˜¯åœ¨ filter() ä¸­ä¸´æ—¶åˆ›å»ºé€»è¾‘å˜é‡â€”â€”å®ƒä»¬è¢«è®¡ç®—ã€ä½¿ç”¨ï¼Œç„¶åè¢«ä¸¢å¼ƒã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ç­›é€‰å™¨ä¼šæ‰¾å‡ºæ‰€æœ‰åœ¨ç™½å¤©å‡ºå‘ä¸”å¤§è‡´å‡†ç‚¹åˆ°è¾¾çš„èˆªç­ï¼š\n\nflights |&gt; \n  filter(dep_time &gt; 600 & dep_time &lt; 2000 & abs(arr_delay) &lt; 20)\n#&gt; # A tibble: 172,286 Ã— 19\n#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1  2013     1     1      601            600         1      844            850\n#&gt; 2  2013     1     1      602            610        -8      812            820\n#&gt; 3  2013     1     1      602            605        -3      821            805\n#&gt; 4  2013     1     1      606            610        -4      858            910\n#&gt; 5  2013     1     1      606            610        -4      837            845\n#&gt; 6  2013     1     1      607            607         0      858            915\n#&gt; # â„¹ 172,280 more rows\n#&gt; # â„¹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, â€¦\n\nçŸ¥é“è¿™å…¶å®æ˜¯ä¸€ç§ç®€ä¾¿å†™æ³•æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œä½ å®Œå…¨å¯ä»¥ä½¿ç”¨ mutate() æ˜¾å¼åœ°åˆ›å»ºåº•å±‚çš„é€»è¾‘å˜é‡ï¼š\n\nflights |&gt; \n  mutate(\n    daytime = dep_time &gt; 600 & dep_time &lt; 2000,\n    approx_ontime = abs(arr_delay) &lt; 20,\n    .keep = \"used\"\n  )\n#&gt; # A tibble: 336,776 Ã— 4\n#&gt;   dep_time arr_delay daytime approx_ontime\n#&gt;      &lt;int&gt;     &lt;dbl&gt; &lt;lgl&gt;   &lt;lgl&gt;        \n#&gt; 1      517        11 FALSE   TRUE         \n#&gt; 2      533        20 FALSE   FALSE        \n#&gt; 3      542        33 FALSE   FALSE        \n#&gt; 4      544       -18 FALSE   TRUE         \n#&gt; 5      554       -25 FALSE   FALSE        \n#&gt; 6      554        12 FALSE   TRUE         \n#&gt; # â„¹ 336,770 more rows\n\nè¿™å¯¹äºæ›´å¤æ‚çš„é€»è¾‘å°¤å…¶æœ‰ç”¨ï¼Œå› ä¸ºç»™ä¸­é—´æ­¥éª¤å‘½åèƒ½è®©ä½ çš„ä»£ç æ›´æ˜“äºé˜…è¯»ï¼Œä¹Ÿæ›´å®¹æ˜“æ£€æŸ¥æ¯ä¸€æ­¥æ˜¯å¦è®¡ç®—æ­£ç¡®ã€‚\næ€»è€Œè¨€ä¹‹ï¼Œæœ€åˆçš„ç­›é€‰å™¨ç­‰åŒäºï¼š\n\nflights |&gt; \n  mutate(\n    daytime = dep_time &gt; 600 & dep_time &lt; 2000,\n    approx_ontime = abs(arr_delay) &lt; 20,\n  ) |&gt; \n  filter(daytime & approx_ontime)\n\n\n12.2.1 æµ®ç‚¹æ•°æ¯”è¾ƒ\næ³¨æ„ä¸è¦å¯¹æ•°å€¼ä½¿ç”¨ ==ã€‚ä¾‹å¦‚ï¼Œçœ‹èµ·æ¥è¿™ä¸ªå‘é‡åŒ…å«äº†æ•°å­— 1 å’Œ 2ï¼š\n\nx &lt;- c(1 / 49 * 49, sqrt(2) ^ 2)\nx\n#&gt; [1] 1 2\n\nä½†å¦‚æœä½ æµ‹è¯•å®ƒä»¬æ˜¯å¦ç›¸ç­‰ï¼Œä¼šå¾—åˆ° FALSEï¼š\n\nx == c(1, 2)\n#&gt; [1] FALSE FALSE\n\nè¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿè®¡ç®—æœºä½¿ç”¨å›ºå®šçš„å°æ•°ä½æ•°æ¥å­˜å‚¨æ•°å­—ï¼Œæ‰€ä»¥æ— æ³•ç²¾ç¡®è¡¨ç¤º 1/49 æˆ– sqrt(2)ï¼Œåç»­çš„è®¡ç®—ä¼šæœ‰éå¸¸å¾®å°çš„åå·®ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨ print() å¹¶ä½¿ç”¨ digits1 å‚æ•°æ¥æŸ¥çœ‹ç¡®åˆ‡çš„å€¼ï¼š\n\nprint(x, digits = 16)\n#&gt; [1] 0.9999999999999999 2.0000000000000004\n\nä½ å¯ä»¥çœ‹åˆ°ä¸ºä»€ä¹ˆ R é»˜è®¤ä¼šå¯¹è¿™äº›æ•°å­—è¿›è¡Œå››èˆäº”å…¥ï¼›å®ƒä»¬ç¡®å®éå¸¸æ¥è¿‘ä½ æœŸæœ›çš„å€¼ã€‚\næ—¢ç„¶ä½ å·²ç»æ˜ç™½äº† == ä¸ºä»€ä¹ˆä¼šå¤±æ•ˆï¼Œé‚£ä½ è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿä¸€ä¸ªé€‰é¡¹æ˜¯ä½¿ç”¨ dplyr::near()ï¼Œå®ƒä¼šå¿½ç•¥å¾®å°çš„å·®å¼‚ï¼š\n\nnear(x, c(1, 2))\n#&gt; [1] TRUE TRUE\n\n\n12.2.2 ç¼ºå¤±å€¼\nç¼ºå¤±å€¼ä»£è¡¨æœªçŸ¥ï¼Œæ‰€ä»¥å®ƒä»¬æ˜¯â€œä¼šä¼ æŸ“çš„â€ï¼šå‡ ä¹ä»»ä½•æ¶‰åŠæœªçŸ¥å€¼çš„æ“ä½œï¼Œå…¶ç»“æœä¹Ÿå°†æ˜¯æœªçŸ¥çš„ï¼š\n\nNA &gt; 5\n#&gt; [1] NA\n10 == NA\n#&gt; [1] NA\n\næœ€ä»¤äººå›°æƒ‘çš„ç»“æœæ˜¯è¿™ä¸€ä¸ªï¼š\n\nNA == NA\n#&gt; [1] NA\n\nå¦‚æœæˆ‘ä»¬äººä¸ºåœ°æä¾›ä¸€äº›ä¸Šä¸‹æ–‡ï¼Œå°±æœ€å®¹æ˜“ç†è§£ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼š\n\n# æˆ‘ä»¬ä¸çŸ¥é“ Mary çš„å¹´é¾„\nage_mary &lt;- NA\n\n# æˆ‘ä»¬ä¸çŸ¥é“ John çš„å¹´é¾„\nage_john &lt;- NA\n\n# Mary å’Œ John åŒé¾„å—ï¼Ÿ\nage_mary == age_john\n#&gt; [1] NA\n# æˆ‘ä»¬ä¸çŸ¥é“ï¼\n\næ‰€ä»¥ï¼Œå¦‚æœä½ æƒ³æ‰¾å‡º dep_time ç¼ºå¤±çš„æ‰€æœ‰èˆªç­ï¼Œä¸‹é¢çš„ä»£ç æ˜¯è¡Œä¸é€šçš„ï¼Œå› ä¸º dep_time == NA å¯¹æ¯ä¸€è¡Œéƒ½ä¼šäº§ç”Ÿ NAï¼Œè€Œ filter() ä¼šè‡ªåŠ¨ä¸¢å¼ƒç¼ºå¤±å€¼ï¼š\n\nflights |&gt; \n  filter(dep_time == NA)\n#&gt; # A tibble: 0 Ã— 19\n#&gt; # â„¹ 19 variables: year &lt;int&gt;, month &lt;int&gt;, day &lt;int&gt;, dep_time &lt;int&gt;,\n#&gt; #   sched_dep_time &lt;int&gt;, dep_delay &lt;dbl&gt;, arr_time &lt;int&gt;, â€¦\n\nä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–°å·¥å…·ï¼šis.na()ã€‚\n\n12.2.3 is.na()\n\nis.na(x) é€‚ç”¨äºä»»ä½•ç±»å‹çš„å‘é‡ï¼Œå®ƒå¯¹ç¼ºå¤±å€¼è¿”å› TRUEï¼Œå¯¹å…¶ä»–æ‰€æœ‰å€¼è¿”å› FALSEï¼š\n\nis.na(c(TRUE, NA, FALSE))\n#&gt; [1] FALSE  TRUE FALSE\nis.na(c(1, NA, 3))\n#&gt; [1] FALSE  TRUE FALSE\nis.na(c(\"a\", NA, \"b\"))\n#&gt; [1] FALSE  TRUE FALSE\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨ is.na() æ¥æ‰¾åˆ° dep_time ç¼ºå¤±çš„æ‰€æœ‰è¡Œï¼š\n\nflights |&gt; \n  filter(is.na(dep_time))\n#&gt; # A tibble: 8,255 Ã— 19\n#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1  2013     1     1       NA           1630        NA       NA           1815\n#&gt; 2  2013     1     1       NA           1935        NA       NA           2240\n#&gt; 3  2013     1     1       NA           1500        NA       NA           1825\n#&gt; 4  2013     1     1       NA            600        NA       NA            901\n#&gt; 5  2013     1     2       NA           1540        NA       NA           1747\n#&gt; 6  2013     1     2       NA           1620        NA       NA           1746\n#&gt; # â„¹ 8,249 more rows\n#&gt; # â„¹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, â€¦\n\nis.na() åœ¨ arrange() ä¸­ä¹Ÿå¾ˆæœ‰ç”¨ã€‚arrange() é€šå¸¸å°†æ‰€æœ‰ç¼ºå¤±å€¼æ”¾åœ¨æœ«å°¾ï¼Œä½†ä½ å¯ä»¥é€šè¿‡å…ˆæŒ‰ is.na() æ’åºæ¥è¦†ç›–è¿™ä¸ªé»˜è®¤è¡Œä¸ºï¼š\n\nflights |&gt; \n  filter(month == 1, day == 1) |&gt; \n  arrange(dep_time)\n#&gt; # A tibble: 842 Ã— 19\n#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1  2013     1     1      517            515         2      830            819\n#&gt; 2  2013     1     1      533            529         4      850            830\n#&gt; 3  2013     1     1      542            540         2      923            850\n#&gt; 4  2013     1     1      544            545        -1     1004           1022\n#&gt; 5  2013     1     1      554            600        -6      812            837\n#&gt; 6  2013     1     1      554            558        -4      740            728\n#&gt; # â„¹ 836 more rows\n#&gt; # â„¹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, â€¦\n\nflights |&gt; \n  filter(month == 1, day == 1) |&gt; \n  arrange(desc(is.na(dep_time)), dep_time)\n#&gt; # A tibble: 842 Ã— 19\n#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1  2013     1     1       NA           1630        NA       NA           1815\n#&gt; 2  2013     1     1       NA           1935        NA       NA           2240\n#&gt; 3  2013     1     1       NA           1500        NA       NA           1825\n#&gt; 4  2013     1     1       NA            600        NA       NA            901\n#&gt; 5  2013     1     1      517            515         2      830            819\n#&gt; 6  2013     1     1      533            529         4      850            830\n#&gt; # â„¹ 836 more rows\n#&gt; # â„¹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, â€¦\n\næˆ‘ä»¬å°†åœ¨ Chapter 18 ä¸­æ›´æ·±å…¥åœ°æ¢è®¨ç¼ºå¤±å€¼ã€‚\n\n12.2.4 ç»ƒä¹ \n\n\ndplyr::near() æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿè¾“å…¥ near æŸ¥çœ‹æºä»£ç ã€‚sqrt(2)^2 æ˜¯å¦æ¥è¿‘ 2ï¼Ÿ\nç»“åˆä½¿ç”¨ mutate()ã€is.na() å’Œ count() æ¥æè¿° dep_timeã€sched_dep_time å’Œ dep_delay ä¸­çš„ç¼ºå¤±å€¼æ˜¯å¦‚ä½•ç›¸äº’å…³è”çš„ã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>12</span>Â  <span class='chapter-title'>é€»è¾‘å‘é‡</span>"
    ]
  },
  {
    "objectID": "logicals.html#å¸ƒå°”ä»£æ•°",
    "href": "logicals.html#å¸ƒå°”ä»£æ•°",
    "title": "12Â  é€»è¾‘å‘é‡",
    "section": "\n12.3 å¸ƒå°”ä»£æ•°",
    "text": "12.3 å¸ƒå°”ä»£æ•°\nä¸€æ—¦ä½ æœ‰äº†å¤šä¸ªé€»è¾‘å‘é‡ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨å¸ƒå°”ä»£æ•°å°†å®ƒä»¬ç»„åˆèµ·æ¥ã€‚åœ¨ R ä¸­ï¼Œ& æ˜¯â€œä¸â€ï¼Œ| æ˜¯â€œæˆ–â€ï¼Œ! æ˜¯â€œéâ€ï¼Œè€Œ xor() æ˜¯â€œå¼‚æˆ–â€2ã€‚ä¾‹å¦‚ï¼Œdf |&gt; filter(!is.na(x)) ä¼šæ‰¾å‡º x ä¸ç¼ºå¤±çš„æ‰€æœ‰è¡Œï¼Œè€Œ df |&gt; filter(x &lt; -10 | x &gt; 0) ä¼šæ‰¾å‡º x å°äº -10 æˆ–å¤§äº 0 çš„æ‰€æœ‰è¡Œã€‚FigureÂ 12.1 å±•ç¤ºäº†å®Œæ•´çš„å¸ƒå°”è¿ç®—é›†åˆåŠå…¶å·¥ä½œæ–¹å¼ã€‚\n\n\n\n\n\n\n\nFigureÂ 12.1: å®Œæ•´çš„å¸ƒå°”è¿ç®—é›†åˆã€‚x æ˜¯å·¦è¾¹çš„åœ†ï¼Œy æ˜¯å³è¾¹çš„åœ†ï¼Œ é˜´å½±åŒºåŸŸæ˜¾ç¤ºäº†æ¯ä¸ªè¿ç®—ç¬¦é€‰æ‹©çš„éƒ¨åˆ†ã€‚\n\n\n\n\né™¤äº† & å’Œ |ï¼ŒR è¿˜æœ‰ && å’Œ ||ã€‚ä¸è¦åœ¨ dplyr å‡½æ•°ä¸­ä½¿ç”¨å®ƒä»¬ï¼è¿™äº›è¢«ç§°ä¸ºçŸ­è·¯è¿ç®—ç¬¦ï¼Œå®ƒä»¬åªè¿”å›å•ä¸ª TRUE æˆ– FALSEã€‚å®ƒä»¬å¯¹äºç¼–ç¨‹å¾ˆé‡è¦ï¼Œä½†å¯¹äºæ•°æ®ç§‘å­¦åˆ™ä¸ç„¶ã€‚\n\n12.3.1 ç¼ºå¤±å€¼\nå¸ƒå°”ä»£æ•°ä¸­å…³äºç¼ºå¤±å€¼çš„è§„åˆ™è§£é‡Šèµ·æ¥æœ‰ç‚¹æ£˜æ‰‹ï¼Œå› ä¸ºå®ƒä»¬åˆçœ‹èµ·æ¥ä¼¼ä¹ä¸ä¸€è‡´ï¼š\n\ndf &lt;- tibble(x = c(TRUE, FALSE, NA))\n\ndf |&gt; \n  mutate(\n    and = x & NA,\n    or = x | NA\n  )\n#&gt; # A tibble: 3 Ã— 3\n#&gt;   x     and   or   \n#&gt;   &lt;lgl&gt; &lt;lgl&gt; &lt;lgl&gt;\n#&gt; 1 TRUE  NA    TRUE \n#&gt; 2 FALSE FALSE NA   \n#&gt; 3 NA    NA    NA\n\nè¦ç†è§£å‘ç”Ÿäº†ä»€ä¹ˆï¼Œå¯ä»¥æ€è€ƒä¸€ä¸‹ NA | TRUEï¼ˆNA æˆ– TRUEï¼‰ã€‚é€»è¾‘å‘é‡ä¸­çš„ä¸€ä¸ªç¼ºå¤±å€¼æ„å‘³ç€è¿™ä¸ªå€¼å¯èƒ½æ˜¯ TRUE æˆ– FALSEã€‚TRUE | TRUE å’Œ FALSE | TRUE éƒ½ä¸º TRUEï¼Œå› ä¸ºè‡³å°‘æœ‰ä¸€ä¸ªæ˜¯ TRUEã€‚å› æ­¤ NA | TRUE ä¹Ÿå¿…é¡»æ˜¯ TRUEï¼Œå› ä¸º NA å¯èƒ½æ˜¯ TRUE æˆ– FALSEã€‚ç„¶è€Œï¼ŒNA | FALSE çš„ç»“æœæ˜¯ NAï¼Œå› ä¸ºæˆ‘ä»¬ä¸çŸ¥é“ NA æ˜¯ TRUE è¿˜æ˜¯ FALSEã€‚ç±»ä¼¼çš„æ¨ç†ä¹Ÿé€‚ç”¨äº &ï¼Œè€ƒè™‘åˆ° & è¦æ±‚ä¸¤ä¸ªæ¡ä»¶éƒ½å¿…é¡»æ»¡è¶³ã€‚å› æ­¤ï¼ŒNA & TRUE çš„ç»“æœæ˜¯ NAï¼Œå› ä¸º NA å¯èƒ½æ˜¯ TRUE æˆ– FALSEï¼›è€Œ NA & FALSE çš„ç»“æœæ˜¯ FALSEï¼Œå› ä¸ºè‡³å°‘æœ‰ä¸€ä¸ªæ¡ä»¶æ˜¯ FALSEã€‚\n\n12.3.2 è¿ç®—é¡ºåº\nè¯·æ³¨æ„ï¼Œè¿ç®—é¡ºåºä¸åƒè‹±è¯­é‚£æ ·ã€‚çœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼Œå®ƒç”¨äºæŸ¥æ‰¾æ‰€æœ‰åœ¨åä¸€æœˆæˆ–åäºŒæœˆå‡ºå‘çš„èˆªç­ï¼š\n\nflights |&gt; \n   filter(month == 11 | month == 12)\n\nä½ å¯èƒ½ä¼šæƒ³å½“ç„¶åœ°åƒè¯´è‹±è¯­ä¸€æ ·å†™å®ƒï¼šâ€œæŸ¥æ‰¾æ‰€æœ‰åœ¨åä¸€æœˆæˆ–åäºŒæœˆå‡ºå‘çš„èˆªç­ã€‚â€ï¼š\n\nflights |&gt; \n   filter(month == 11 | 12)\n#&gt; # A tibble: 336,776 Ã— 19\n#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1  2013     1     1      517            515         2      830            819\n#&gt; 2  2013     1     1      533            529         4      850            830\n#&gt; 3  2013     1     1      542            540         2      923            850\n#&gt; 4  2013     1     1      544            545        -1     1004           1022\n#&gt; 5  2013     1     1      554            600        -6      812            837\n#&gt; 6  2013     1     1      554            558        -4      740            728\n#&gt; # â„¹ 336,770 more rows\n#&gt; # â„¹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, â€¦\n\nè¿™æ®µä»£ç ä¸ä¼šæŠ¥é”™ï¼Œä½†ä¼¼ä¹ä¹Ÿæ²¡æœ‰èµ·ä½œç”¨ã€‚è¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿåœ¨è¿™é‡Œï¼ŒR é¦–å…ˆè¯„ä¼° month == 11ï¼Œåˆ›å»ºäº†ä¸€ä¸ªæˆ‘ä»¬ç§°ä¹‹ä¸º nov çš„é€»è¾‘å‘é‡ã€‚ç„¶åå®ƒè®¡ç®— nov | 12ã€‚å½“ä½ å¯¹ä¸€ä¸ªé€»è¾‘è¿ç®—ç¬¦ä½¿ç”¨æ•°å­—æ—¶ï¼Œå®ƒä¼šæŠŠé™¤äº† 0 ä¹‹å¤–çš„æ‰€æœ‰æ•°éƒ½è½¬æ¢ä¸º TRUEï¼Œæ‰€ä»¥è¿™ç­‰ä»·äº nov | TRUEï¼Œç»“æœå°†æ°¸è¿œæ˜¯ TRUEï¼Œå› æ­¤æ¯ä¸€è¡Œéƒ½ä¼šè¢«é€‰ä¸­ï¼š\n\nflights |&gt; \n  mutate(\n    nov = month == 11,\n    final = nov | 12,\n    .keep = \"used\"\n  )\n#&gt; # A tibble: 336,776 Ã— 3\n#&gt;   month nov   final\n#&gt;   &lt;int&gt; &lt;lgl&gt; &lt;lgl&gt;\n#&gt; 1     1 FALSE TRUE \n#&gt; 2     1 FALSE TRUE \n#&gt; 3     1 FALSE TRUE \n#&gt; 4     1 FALSE TRUE \n#&gt; 5     1 FALSE TRUE \n#&gt; 6     1 FALSE TRUE \n#&gt; # â„¹ 336,770 more rows\n\n\n12.3.3 %in%\n\né¿å… == å’Œ | é¡ºåºå‡ºé”™çš„ä¸€ä¸ªç®€å•æ–¹æ³•æ˜¯ä½¿ç”¨ %in%ã€‚x %in% y è¿”å›ä¸€ä¸ªä¸ x é•¿åº¦ç›¸åŒçš„é€»è¾‘å‘é‡ï¼Œå½“ x ä¸­çš„å€¼å‡ºç°åœ¨ y ä¸­çš„ä»»ä½•ä½ç½®æ—¶ï¼Œè¯¥å‘é‡å¯¹åº”ä½ç½®çš„å€¼ä¸º TRUEã€‚\n\n1:12 %in% c(1, 5, 11)\n#&gt;  [1]  TRUE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE\nletters[1:10] %in% c(\"a\", \"e\", \"i\", \"o\", \"u\")\n#&gt;  [1]  TRUE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE\n\nå› æ­¤ï¼Œè¦æŸ¥æ‰¾æ‰€æœ‰åä¸€æœˆå’ŒåäºŒæœˆçš„èˆªç­ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š\n\nflights |&gt; \n  filter(month %in% c(11, 12))\n\næ³¨æ„ï¼Œ%in% å¯¹äº NA çš„å¤„ç†è§„åˆ™ä¸ == ä¸åŒï¼Œå› ä¸º NA %in% NA çš„ç»“æœæ˜¯ TRUEã€‚\n\nc(1, 2, NA) == NA\n#&gt; [1] NA NA NA\nc(1, 2, NA) %in% NA\n#&gt; [1] FALSE FALSE  TRUE\n\nè¿™å¯ä»¥æˆä¸ºä¸€ä¸ªæœ‰ç”¨çš„ç®€ä¾¿å†™æ³•ï¼š\n\nflights |&gt; \n  filter(dep_time %in% c(NA, 0800))\n#&gt; # A tibble: 8,803 Ã— 19\n#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1  2013     1     1      800            800         0     1022           1014\n#&gt; 2  2013     1     1      800            810       -10      949            955\n#&gt; 3  2013     1     1       NA           1630        NA       NA           1815\n#&gt; 4  2013     1     1       NA           1935        NA       NA           2240\n#&gt; 5  2013     1     1       NA           1500        NA       NA           1825\n#&gt; 6  2013     1     1       NA            600        NA       NA            901\n#&gt; # â„¹ 8,797 more rows\n#&gt; # â„¹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, â€¦\n\n\n12.3.4 ç»ƒä¹ \n\næ‰¾å‡ºæ‰€æœ‰ arr_delay ç¼ºå¤±ä½† dep_delay ä¸ç¼ºå¤±çš„èˆªç­ã€‚æ‰¾å‡ºæ‰€æœ‰ arr_time å’Œ sched_arr_time éƒ½ä¸ç¼ºå¤±ï¼Œä½† arr_delay ç¼ºå¤±çš„èˆªç­ã€‚\næœ‰å¤šå°‘èˆªç­çš„ dep_time æ˜¯ç¼ºå¤±çš„ï¼Ÿè¿™äº›è¡Œä¸­è¿˜æœ‰å“ªäº›å…¶ä»–å˜é‡æ˜¯ç¼ºå¤±çš„ï¼Ÿè¿™äº›è¡Œå¯èƒ½ä»£è¡¨ä»€ä¹ˆï¼Ÿ\nå‡è®¾ç¼ºå¤±çš„ dep_time æ„å‘³ç€èˆªç­è¢«å–æ¶ˆäº†ï¼ŒæŸ¥çœ‹æ¯å¤©è¢«å–æ¶ˆèˆªç­çš„æ•°é‡ã€‚æ˜¯å¦å­˜åœ¨æŸç§æ¨¡å¼ï¼Ÿè¢«å–æ¶ˆèˆªç­çš„æ¯”ä¾‹ä¸æœªå–æ¶ˆèˆªç­çš„å¹³å‡å»¶è¯¯ä¹‹é—´æ˜¯å¦å­˜åœ¨è”ç³»ï¼Ÿ",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>12</span>Â  <span class='chapter-title'>é€»è¾‘å‘é‡</span>"
    ]
  },
  {
    "objectID": "logicals.html#sec-logical-summaries",
    "href": "logicals.html#sec-logical-summaries",
    "title": "12Â  é€»è¾‘å‘é‡",
    "section": "\n12.4 æ±‡æ€»",
    "text": "12.4 æ±‡æ€»\nä»¥ä¸‹å„èŠ‚æè¿°äº†ä¸€äº›ç”¨äºæ±‡æ€»é€»è¾‘å‘é‡çš„æœ‰ç”¨æŠ€æœ¯ã€‚é™¤äº†ä¸“é—¨ç”¨äºé€»è¾‘å‘é‡çš„å‡½æ•°å¤–ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨é‚£äº›é€‚ç”¨äºæ•°å€¼å‘é‡çš„å‡½æ•°ã€‚\n\n12.4.1 é€»è¾‘æ±‡æ€»\næœ‰ä¸¤ä¸ªä¸»è¦çš„é€»è¾‘æ±‡æ€»å‡½æ•°ï¼šany() å’Œ all()ã€‚any(x) ç›¸å½“äº |ï¼›å¦‚æœ x ä¸­æœ‰ä»»ä½• TRUEï¼Œå®ƒå°†è¿”å› TRUEã€‚all(x) ç›¸å½“äº &ï¼›åªæœ‰å½“ x çš„æ‰€æœ‰å€¼éƒ½æ˜¯ TRUE æ—¶ï¼Œå®ƒæ‰ä¼šè¿”å› TRUEã€‚ä¸å¤§å¤šæ•°æ±‡æ€»å‡½æ•°ä¸€æ ·ï¼Œä½ å¯ä»¥é€šè¿‡ na.rm = TRUE æ¥å¿½ç•¥ç¼ºå¤±å€¼ã€‚\nä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ all() å’Œ any() æ¥æŸ¥çœ‹æ˜¯å¦æ¯å¤©çš„æ‰€æœ‰èˆªç­å‡ºå‘å»¶è¯¯éƒ½ä¸è¶…è¿‡ä¸€å°æ—¶ï¼Œæˆ–è€…æ˜¯å¦æœ‰ä»»ä½•èˆªç­åˆ°è¾¾å»¶è¯¯è¾¾åˆ°äº”å°æ—¶æˆ–æ›´é•¿ã€‚å¹¶ä¸”ï¼Œä½¿ç”¨ group_by() å…è®¸æˆ‘ä»¬æŒ‰å¤©æ¥è¿›è¡Œè¿™ç§åˆ†æï¼š\n\nflights |&gt; \n  group_by(year, month, day) |&gt; \n  summarize(\n    all_delayed = all(dep_delay &lt;= 60, na.rm = TRUE),\n    any_long_delay = any(arr_delay &gt;= 300, na.rm = TRUE),\n    .groups = \"drop\"\n  )\n#&gt; # A tibble: 365 Ã— 5\n#&gt;    year month   day all_delayed any_long_delay\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;lgl&gt;       &lt;lgl&gt;         \n#&gt; 1  2013     1     1 FALSE       TRUE          \n#&gt; 2  2013     1     2 FALSE       TRUE          \n#&gt; 3  2013     1     3 FALSE       FALSE         \n#&gt; 4  2013     1     4 FALSE       FALSE         \n#&gt; 5  2013     1     5 FALSE       TRUE          \n#&gt; 6  2013     1     6 FALSE       FALSE         \n#&gt; # â„¹ 359 more rows\n\nç„¶è€Œï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œany() å’Œ all() æœ‰ç‚¹è¿‡äºç²—ç•¥ï¼Œå¦‚æœèƒ½è·å¾—æ›´å¤šå…³äºæœ‰å¤šå°‘å€¼æ˜¯ TRUE æˆ– FALSE çš„ç»†èŠ‚ä¼šæ›´å¥½ã€‚è¿™å°±å¼•å‡ºäº†æ•°å€¼æ±‡æ€»ã€‚\n\n12.4.2 é€»è¾‘å‘é‡çš„æ•°å€¼æ±‡æ€»\nå½“ä½ åœ¨æ•°å€¼ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨é€»è¾‘å‘é‡æ—¶ï¼ŒTRUE ä¼šå˜æˆ 1ï¼ŒFALSE ä¼šå˜æˆ 0ã€‚è¿™ä½¿å¾— sum() å’Œ mean() åœ¨å¤„ç†é€»è¾‘å‘é‡æ—¶éå¸¸æœ‰ç”¨ï¼Œå› ä¸º sum(x) ç»™å‡º TRUE çš„æ•°é‡ï¼Œè€Œ mean(x) ç»™å‡º TRUE çš„æ¯”ä¾‹ï¼ˆå› ä¸º mean() å°±æ˜¯ sum() é™¤ä»¥ length()ï¼‰ã€‚\nä¾‹å¦‚ï¼Œè¿™å¯ä»¥è®©æˆ‘ä»¬çœ‹åˆ°å‡ºå‘å»¶è¯¯ä¸è¶…è¿‡ä¸€å°æ—¶çš„èˆªç­æ¯”ä¾‹ï¼Œä»¥åŠåˆ°è¾¾å»¶è¯¯äº”å°æ—¶æˆ–æ›´é•¿æ—¶é—´çš„èˆªç­æ•°é‡ï¼š\n\nflights |&gt; \n  group_by(year, month, day) |&gt; \n  summarize(\n    proportion_delayed = mean(dep_delay &lt;= 60, na.rm = TRUE),\n    count_long_delay = sum(arr_delay &gt;= 300, na.rm = TRUE),\n    .groups = \"drop\"\n  )\n#&gt; # A tibble: 365 Ã— 5\n#&gt;    year month   day proportion_delayed count_long_delay\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;              &lt;dbl&gt;            &lt;int&gt;\n#&gt; 1  2013     1     1              0.939                3\n#&gt; 2  2013     1     2              0.914                3\n#&gt; 3  2013     1     3              0.941                0\n#&gt; 4  2013     1     4              0.953                0\n#&gt; 5  2013     1     5              0.964                1\n#&gt; 6  2013     1     6              0.959                0\n#&gt; # â„¹ 359 more rows\n\n\n12.4.3 é€»è¾‘å­é›†\nåœ¨æ±‡æ€»ä¸­ï¼Œé€»è¾‘å‘é‡è¿˜æœ‰æœ€åä¸€ä¸ªç”¨é€”ï¼šä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªé€»è¾‘å‘é‡æ¥å°†å•ä¸ªå˜é‡ç­›é€‰åˆ°æ„Ÿå…´è¶£çš„å­é›†ã€‚è¿™åˆ©ç”¨äº† R base çš„ [ï¼ˆè¯»ä½œ subsetï¼‰è¿ç®—ç¬¦ï¼Œä½ å°†åœ¨ Section 27.2 ä¸­å­¦åˆ°æ›´å¤šç›¸å…³å†…å®¹ã€‚\nå‡è®¾æˆ‘ä»¬æƒ³æŸ¥çœ‹ä»…ä»…æ˜¯é‚£äº›å®é™…å»¶è¯¯äº†çš„èˆªç­çš„å¹³å‡å»¶è¯¯ã€‚ä¸€ç§æ–¹æ³•æ˜¯å…ˆç­›é€‰å‡ºèˆªç­ï¼Œç„¶åè®¡ç®—å¹³å‡å»¶è¯¯ï¼š\n\nflights |&gt; \n  filter(arr_delay &gt; 0) |&gt; \n  group_by(year, month, day) |&gt; \n  summarize(\n    behind = mean(arr_delay),\n    n = n(),\n    .groups = \"drop\"\n  )\n#&gt; # A tibble: 365 Ã— 5\n#&gt;    year month   day behind     n\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;  &lt;dbl&gt; &lt;int&gt;\n#&gt; 1  2013     1     1   32.5   461\n#&gt; 2  2013     1     2   32.0   535\n#&gt; 3  2013     1     3   27.7   460\n#&gt; 4  2013     1     4   28.3   297\n#&gt; 5  2013     1     5   22.6   238\n#&gt; 6  2013     1     6   24.4   381\n#&gt; # â„¹ 359 more rows\n\nè¿™è¡Œå¾—é€šï¼Œä½†å¦‚æœæˆ‘ä»¬è¿˜æƒ³è®¡ç®—é‚£äº›ææ—©åˆ°è¾¾èˆªç­çš„å¹³å‡å»¶è¯¯å‘¢ï¼Ÿæˆ‘ä»¬å°±éœ€è¦æ‰§è¡Œä¸€ä¸ªå•ç‹¬çš„ç­›é€‰æ­¥éª¤ï¼Œç„¶åæƒ³åŠæ³•å°†è¿™ä¸¤ä¸ªæ•°æ®æ¡†åˆå¹¶åœ¨ä¸€èµ·3ã€‚ç›¸åï¼Œä½ å¯ä»¥ä½¿ç”¨ [ æ¥æ‰§è¡Œå†…è”ç­›é€‰ï¼šarr_delay[arr_delay &gt; 0] å°†åªäº§ç”Ÿæ­£çš„åˆ°è¾¾å»¶è¯¯å€¼ã€‚\nè¿™æ ·å°±ä¼šå¾—åˆ°ï¼š\n\nflights |&gt; \n  group_by(year, month, day) |&gt; \n  summarize(\n    behind = mean(arr_delay[arr_delay &gt; 0], na.rm = TRUE),\n    ahead = mean(arr_delay[arr_delay &lt; 0], na.rm = TRUE),\n    n = n(),\n    .groups = \"drop\"\n  )\n#&gt; # A tibble: 365 Ã— 6\n#&gt;    year month   day behind ahead     n\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;\n#&gt; 1  2013     1     1   32.5 -12.5   842\n#&gt; 2  2013     1     2   32.0 -14.3   943\n#&gt; 3  2013     1     3   27.7 -18.2   914\n#&gt; 4  2013     1     4   28.3 -17.0   915\n#&gt; 5  2013     1     5   22.6 -14.0   720\n#&gt; 6  2013     1     6   24.4 -13.6   832\n#&gt; # â„¹ 359 more rows\n\nåŒæ—¶è¯·æ³¨æ„ç»„å¤§å°çš„å·®å¼‚ï¼šåœ¨ç¬¬ä¸€ä¸ªä»£ç å—ä¸­ï¼Œn() ç»™å‡ºçš„æ˜¯æ¯å¤©å»¶è¯¯çš„èˆªç­æ•°é‡ï¼›åœ¨ç¬¬äºŒä¸ªä»£ç å—ä¸­ï¼Œn() ç»™å‡ºçš„æ˜¯æ€»èˆªç­æ•°ã€‚\n\n12.4.4 ç»ƒä¹ \n\n\nsum(is.na(x)) ä¼šå‘Šè¯‰ä½ ä»€ä¹ˆï¼Ÿmean(is.na(x)) å‘¢ï¼Ÿ\nå½“ prod() åº”ç”¨äºé€»è¾‘å‘é‡æ—¶è¿”å›ä»€ä¹ˆï¼Ÿå®ƒç­‰åŒäºå“ªä¸ªé€»è¾‘æ±‡æ€»å‡½æ•°ï¼Ÿå½“ min() åº”ç”¨äºé€»è¾‘å‘é‡æ—¶è¿”å›ä»€ä¹ˆï¼Ÿå®ƒç­‰åŒäºå“ªä¸ªé€»è¾‘æ±‡æ€»å‡½æ•°ï¼Ÿé˜…è¯»æ–‡æ¡£å¹¶è¿›è¡Œä¸€äº›å®éªŒã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>12</span>Â  <span class='chapter-title'>é€»è¾‘å‘é‡</span>"
    ]
  },
  {
    "objectID": "logicals.html#æ¡ä»¶è½¬æ¢",
    "href": "logicals.html#æ¡ä»¶è½¬æ¢",
    "title": "12Â  é€»è¾‘å‘é‡",
    "section": "\n12.5 æ¡ä»¶è½¬æ¢",
    "text": "12.5 æ¡ä»¶è½¬æ¢\né€»è¾‘å‘é‡æœ€å¼ºå¤§çš„ç‰¹æ€§ä¹‹ä¸€æ˜¯å®ƒä»¬åœ¨æ¡ä»¶è½¬æ¢ä¸­çš„åº”ç”¨ï¼Œå³å¯¹æ¡ä»¶ x åšä¸€ä»¶äº‹ï¼Œå¯¹æ¡ä»¶ y åšå¦ä¸€ä»¶äº‹ã€‚æœ‰ä¸¤ä¸ªé‡è¦çš„å·¥å…·å¯ä»¥å®ç°è¿™ä¸€ç‚¹ï¼šif_else() å’Œ case_when()ã€‚\n\n12.5.1 if_else()\n\nå¦‚æœä½ æƒ³åœ¨æ¡ä»¶ä¸º TRUE æ—¶ä½¿ç”¨ä¸€ä¸ªå€¼ï¼Œè€Œåœ¨æ¡ä»¶ä¸º FALSE æ—¶ä½¿ç”¨å¦ä¸€ä¸ªå€¼ï¼Œä½ å¯ä»¥ä½¿ç”¨ dplyr::if_else()4ã€‚ä½ æ€»æ˜¯ä¼šä½¿ç”¨ if_else() çš„å‰ä¸‰ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•° condition æ˜¯ä¸€ä¸ªé€»è¾‘å‘é‡ï¼›ç¬¬äºŒä¸ªå‚æ•° true ç»™å‡ºæ¡ä»¶ä¸ºçœŸæ—¶çš„è¾“å‡ºï¼›ç¬¬ä¸‰ä¸ªå‚æ•° false ç»™å‡ºæ¡ä»¶ä¸ºå‡æ—¶çš„è¾“å‡ºã€‚\næˆ‘ä»¬ä»ä¸€ä¸ªç®€å•çš„ä¾‹å­å¼€å§‹ï¼Œå°†ä¸€ä¸ªæ•°å€¼å‘é‡æ ‡è®°ä¸º â€œ+veâ€ (æ­£æ•°) æˆ– â€œ-veâ€ (è´Ÿæ•°)ï¼š\n\nx &lt;- c(-3:3, NA)\nif_else(x &gt; 0, \"+ve\", \"-ve\")\n#&gt; [1] \"-ve\" \"-ve\" \"-ve\" \"-ve\" \"+ve\" \"+ve\" \"+ve\" NA\n\nè¿˜æœ‰ä¸€ä¸ªå¯é€‰çš„ç¬¬å››ä¸ªå‚æ•° missingï¼Œå¦‚æœè¾“å…¥æ˜¯ NAï¼Œå°±ä¼šä½¿ç”¨è¿™ä¸ªå€¼ï¼š\n\nif_else(x &gt; 0, \"+ve\", \"-ve\", \"???\")\n#&gt; [1] \"-ve\" \"-ve\" \"-ve\" \"-ve\" \"+ve\" \"+ve\" \"+ve\" \"???\"\n\nä½ ä¹Ÿå¯ä»¥ä¸º true å’Œ false å‚æ•°ä½¿ç”¨å‘é‡ã€‚ä¾‹å¦‚ï¼Œè¿™å…è®¸æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª abs() çš„æœ€å°åŒ–å®ç°ï¼š\n\nif_else(x &lt; 0, -x, x)\n#&gt; [1]  3  2  1  0  1  2  3 NA\n\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ‰€æœ‰çš„å‚æ•°éƒ½ä½¿ç”¨äº†ç›¸åŒçš„å‘é‡ï¼Œä½†ä½ å½“ç„¶å¯ä»¥æ··åˆæ­é…ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åƒè¿™æ ·å®ç°ä¸€ä¸ª coalesce() çš„ç®€å•ç‰ˆæœ¬ï¼š\n\nx1 &lt;- c(NA, 1, 2, NA)\ny1 &lt;- c(3, NA, 4, 6)\nif_else(is.na(x1), y1, x1)\n#&gt; [1] 3 1 2 6\n\nä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°æˆ‘ä»¬ä¸Šé¢æ ‡ç­¾ç¤ºä¾‹ä¸­çš„ä¸€ä¸ªå°ç‘•ç–µï¼šé›¶æ—¢ä¸æ˜¯æ­£æ•°ä¹Ÿä¸æ˜¯è´Ÿæ•°ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ ä¸€ä¸ªé¢å¤–çš„ if_else() æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š\n\nif_else(x == 0, \"0\", if_else(x &lt; 0, \"-ve\", \"+ve\"), \"???\")\n#&gt; [1] \"-ve\" \"-ve\" \"-ve\" \"0\"   \"+ve\" \"+ve\" \"+ve\" \"???\"\n\nè¿™å·²ç»æœ‰ç‚¹éš¾è¯»äº†ï¼Œä½ å¯ä»¥æƒ³è±¡å¦‚æœä½ æœ‰æ›´å¤šçš„æ¡ä»¶ï¼Œæƒ…å†µåªä¼šå˜å¾—æ›´ç³Ÿã€‚æ­¤æ—¶ï¼Œä½ å¯ä»¥è½¬è€Œä½¿ç”¨ dplyr::case_when()ã€‚\n\n12.5.2 case_when()\n\ndplyr çš„ case_when() å—åˆ° SQL çš„ CASE è¯­å¥çš„å¯å‘ï¼Œæä¾›äº†ä¸€ç§ä¸ºä¸åŒæ¡ä»¶æ‰§è¡Œä¸åŒè®¡ç®—çš„çµæ´»æ–¹å¼ã€‚å®ƒæœ‰ä¸€ç§ç‰¹æ®Šçš„è¯­æ³•ï¼Œä¸å¹¸çš„æ˜¯ï¼Œå®ƒçœ‹èµ·æ¥ä¸ä½ åœ¨ tidyverse ä¸­ä½¿ç”¨çš„å…¶ä»–ä»»ä½•ä¸œè¥¿éƒ½ä¸ä¸€æ ·ã€‚å®ƒæ¥å—å½¢å¦‚ condition ~ output çš„é…å¯¹ã€‚condition å¿…é¡»æ˜¯ä¸€ä¸ªé€»è¾‘å‘é‡ï¼›å½“å®ƒä¸º TRUE æ—¶ï¼Œå°†ä½¿ç”¨ outputã€‚\nè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åƒä¸‹é¢è¿™æ ·é‡æ–°åˆ›å»ºæˆ‘ä»¬ä¹‹å‰çš„åµŒå¥— if_else()ï¼š\n\nx &lt;- c(-3:3, NA)\ncase_when(\n  x == 0   ~ \"0\",\n  x &lt; 0    ~ \"-ve\", \n  x &gt; 0    ~ \"+ve\",\n  is.na(x) ~ \"???\"\n)\n#&gt; [1] \"-ve\" \"-ve\" \"-ve\" \"0\"   \"+ve\" \"+ve\" \"+ve\" \"???\"\n\nè¿™ä»£ç é‡æ›´å¤šï¼Œä½†ä¹Ÿæ›´æ˜ç¡®ã€‚\nä¸ºäº†è§£é‡Š case_when() çš„å·¥ä½œåŸç†ï¼Œè®©æˆ‘ä»¬æ¥æ¢è®¨ä¸€äº›æ›´ç®€å•çš„æƒ…å†µã€‚å¦‚æœæ²¡æœ‰ä¸€ä¸ªæ¡ä»¶åŒ¹é…ï¼Œè¾“å‡ºä¼šå¾—åˆ°ä¸€ä¸ª NAï¼š\n\ncase_when(\n  x &lt; 0 ~ \"-ve\",\n  x &gt; 0 ~ \"+ve\"\n)\n#&gt; [1] \"-ve\" \"-ve\" \"-ve\" NA    \"+ve\" \"+ve\" \"+ve\" NA\n\nå¦‚æœä½ æƒ³åˆ›å»ºä¸€ä¸ªâ€œé»˜è®¤â€æˆ–â€œå…¨æ”¶â€çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨ .defaultï¼š\n\ncase_when(\n  x &lt; 0 ~ \"-ve\",\n  x &gt; 0 ~ \"+ve\",\n  .default = \"???\"\n)\n#&gt; [1] \"-ve\" \"-ve\" \"-ve\" \"???\" \"+ve\" \"+ve\" \"+ve\" \"???\"\n\nå¹¶ä¸”è¯·æ³¨æ„ï¼Œå¦‚æœå¤šä¸ªæ¡ä»¶åŒ¹é…ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªä¼šè¢«ä½¿ç”¨ï¼š\n\ncase_when(\n  x &gt; 0 ~ \"+ve\",\n  x &gt; 2 ~ \"big\"\n)\n#&gt; [1] NA    NA    NA    NA    \"+ve\" \"+ve\" \"+ve\" NA\n\nå°±åƒ if_else() ä¸€æ ·ï¼Œä½ å¯ä»¥åœ¨ ~ çš„ä¸¤è¾¹éƒ½ä½¿ç”¨å˜é‡ï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®ä½ çš„é—®é¢˜éœ€è¦æ··åˆæ­é…å˜é‡ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ case_when() ä¸ºåˆ°è¾¾å»¶è¯¯æä¾›ä¸€äº›äººç±»å¯è¯»çš„æ ‡ç­¾ï¼š\n\nflights |&gt; \n  mutate(\n    status = case_when(\n      is.na(arr_delay)    ~ \"cancelled\",\n      arr_delay &lt; -30     ~ \"very early\",\n      arr_delay &lt; -15     ~ \"early\",\n      abs(arr_delay) &lt;= 15 ~ \"on time\",\n      arr_delay &lt; 60      ~ \"late\",\n      arr_delay &lt; Inf     ~ \"very late\",\n    ),\n    .keep = \"used\"\n  )\n#&gt; # A tibble: 336,776 Ã— 2\n#&gt;   arr_delay status \n#&gt;       &lt;dbl&gt; &lt;chr&gt;  \n#&gt; 1        11 on time\n#&gt; 2        20 late   \n#&gt; 3        33 late   \n#&gt; 4       -18 early  \n#&gt; 5       -25 early  \n#&gt; 6        12 on time\n#&gt; # â„¹ 336,770 more rows\n\nåœ¨ç¼–å†™è¿™ç±»å¤æ‚çš„ case_when() è¯­å¥æ—¶è¦å°å¿ƒï¼›æˆ‘å‰ä¸¤æ¬¡çš„å°è¯•æ··åˆä½¿ç”¨äº† &lt; å’Œ &gt;ï¼Œç»“æœä¸å°å¿ƒåˆ›å»ºäº†é‡å çš„æ¡ä»¶ã€‚\n\n12.5.3 å…¼å®¹çš„ç±»å‹\nè¯·æ³¨æ„ï¼Œif_else() å’Œ case_when() éƒ½è¦æ±‚è¾“å‡ºä¸­çš„ç±»å‹æ˜¯å…¼å®¹çš„ã€‚å¦‚æœå®ƒä»¬ä¸å…¼å®¹ï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„é”™è¯¯ï¼š\n\nif_else(TRUE, \"a\", 1)\n#&gt; Error in `if_else()`:\n#&gt; ! Can't combine `true` &lt;character&gt; and `false` &lt;double&gt;.\n\ncase_when(\n  x &lt; -1 ~ TRUE,  \n  x &gt; 0  ~ now()\n)\n#&gt; Error in `case_when()`:\n#&gt; ! Can't combine `..1 (right)` &lt;logical&gt; and `..2 (right)` &lt;datetime&lt;local&gt;&gt;.\n\næ€»çš„æ¥è¯´ï¼Œç›¸å¯¹è¾ƒå°‘çš„ç±»å‹æ˜¯å…¼å®¹çš„ï¼Œå› ä¸ºè‡ªåŠ¨å°†ä¸€ç§ç±»å‹çš„å‘é‡è½¬æ¢ä¸ºå¦ä¸€ç§æ˜¯å¸¸è§çš„é”™è¯¯æ¥æºã€‚ä»¥ä¸‹æ˜¯å…¼å®¹çš„æœ€é‡è¦çš„å‡ ç§æƒ…å†µï¼š\n\næ•°å€¼å’Œé€»è¾‘å‘é‡æ˜¯å…¼å®¹çš„ï¼Œæ­£å¦‚æˆ‘ä»¬åœ¨ Section 12.4.2 ä¸­è®¨è®ºçš„é‚£æ ·ã€‚\nå­—ç¬¦ä¸²å’Œå› å­ (Chapter 16) æ˜¯å…¼å®¹çš„ï¼Œå› ä¸ºä½ å¯ä»¥æŠŠå› å­çœ‹ä½œæ˜¯å…·æœ‰ä¸€ç»„å—é™å€¼çš„å­—ç¬¦ä¸²ã€‚\næ—¥æœŸå’Œæ—¥æœŸæ—¶é—´ï¼Œæˆ‘ä»¬å°†åœ¨ Chapter 17 ä¸­è®¨è®ºï¼Œæ˜¯å…¼å®¹çš„ï¼Œå› ä¸ºä½ å¯ä»¥æŠŠæ—¥æœŸçœ‹ä½œæ˜¯æ—¥æœŸæ—¶é—´çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µã€‚\n\nNAï¼ŒæŠ€æœ¯ä¸Šæ˜¯ä¸€ä¸ªé€»è¾‘å‘é‡ï¼Œä¸æ‰€æœ‰ç±»å‹éƒ½å…¼å®¹ï¼Œå› ä¸ºæ¯ä¸ªå‘é‡éƒ½æœ‰æŸç§æ–¹å¼æ¥è¡¨ç¤ºç¼ºå¤±å€¼ã€‚\n\næˆ‘ä»¬ä¸æœŸæœ›ä½ è®°ä½è¿™äº›è§„åˆ™ï¼Œä½†å®ƒä»¬åº”è¯¥ä¼šéšç€æ—¶é—´çš„æ¨ç§»æˆä¸ºä½ çš„ç¬¬äºŒå¤©æ€§ï¼Œå› ä¸ºå®ƒä»¬åœ¨æ•´ä¸ª tidyverse ä¸­éƒ½æ˜¯ä¸€è‡´åº”ç”¨çš„ã€‚\n\n12.5.4 ç»ƒä¹ \n\nä¸€ä¸ªæ•°å¦‚æœæ˜¯å¶æ•°ï¼Œé‚£ä¹ˆå®ƒèƒ½è¢« 2 æ•´é™¤ï¼Œåœ¨ R ä¸­ä½ å¯ä»¥ç”¨ x %% 2 == 0 æ¥åˆ¤æ–­ã€‚åˆ©ç”¨è¿™ä¸ªäº‹å®å’Œ if_else() æ¥åˆ¤æ–­ 0 åˆ° 20 ä¹‹é—´çš„æ¯ä¸ªæ•°æ˜¯å¥‡æ•°è¿˜æ˜¯å¶æ•°ã€‚\nç»™å®šä¸€ä¸ªåƒ x &lt;- c(\"Monday\", \"Saturday\", \"Wednesday\") è¿™æ ·çš„æ—¥æœŸå‘é‡ï¼Œä½¿ç”¨ä¸€ä¸ª if_else() è¯­å¥å°†å®ƒä»¬æ ‡è®°ä¸ºå‘¨æœ«æˆ–å·¥ä½œæ—¥ã€‚\nä½¿ç”¨ if_else() æ¥è®¡ç®—ä¸€ä¸ªåä¸º x çš„æ•°å€¼å‘é‡çš„ç»å¯¹å€¼ã€‚\nç¼–å†™ä¸€ä¸ª case_when() è¯­å¥ï¼Œä½¿ç”¨ flights æ•°æ®é›†ä¸­çš„ month å’Œ day åˆ—æ¥æ ‡è®°ä¸€äº›é‡è¦çš„ç¾å›½èŠ‚æ—¥ï¼ˆä¾‹å¦‚ï¼Œå…ƒæ—¦ã€7æœˆ4æ—¥ç‹¬ç«‹æ—¥ã€æ„Ÿæ©èŠ‚å’Œåœ£è¯èŠ‚ï¼‰ã€‚é¦–å…ˆåˆ›å»ºä¸€ä¸ªå€¼ä¸º TRUE æˆ– FALSE çš„é€»è¾‘åˆ—ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªå­—ç¬¦åˆ—ï¼Œè¯¥åˆ—è¦ä¹ˆç»™å‡ºèŠ‚æ—¥çš„åç§°ï¼Œè¦ä¹ˆæ˜¯ NAã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>12</span>Â  <span class='chapter-title'>é€»è¾‘å‘é‡</span>"
    ]
  },
  {
    "objectID": "logicals.html#æ€»ç»“",
    "href": "logicals.html#æ€»ç»“",
    "title": "12Â  é€»è¾‘å‘é‡",
    "section": "\n12.6 æ€»ç»“",
    "text": "12.6 æ€»ç»“\né€»è¾‘å‘é‡çš„å®šä¹‰å¾ˆç®€å•ï¼Œå› ä¸ºæ¯ä¸ªå€¼å¿…é¡»æ˜¯ TRUEã€FALSE æˆ– NA ä¹‹ä¸€ã€‚ä½†é€»è¾‘å‘é‡æä¾›äº†å·¨å¤§çš„èƒ½åŠ›ã€‚åœ¨æœ¬ç« ä¸­ï¼Œä½ å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨ &gt;ã€&lt;ã€&lt;=ã€&gt;=ã€==ã€!= å’Œ is.na() åˆ›å»ºé€»è¾‘å‘é‡ï¼Œå¦‚ä½•ä½¿ç”¨ !ã€& å’Œ | ç»„åˆå®ƒä»¬ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ any()ã€all()ã€sum() å’Œ mean() æ±‡æ€»å®ƒä»¬ã€‚ä½ è¿˜å­¦ä¹ äº†å¼ºå¤§çš„ if_else() å’Œ case_when() å‡½æ•°ï¼Œå®ƒä»¬å…è®¸ä½ æ ¹æ®é€»è¾‘å‘é‡çš„å€¼è¿”å›ä¸åŒçš„ç»“æœã€‚\nåœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä¸€æ¬¡åˆä¸€æ¬¡åœ°çœ‹åˆ°é€»è¾‘å‘é‡ã€‚ä¾‹å¦‚ï¼Œåœ¨ Chapter 14 ä¸­ï¼Œä½ å°†å­¦ä¹  str_detect(x, pattern)ï¼Œå®ƒè¿”å›ä¸€ä¸ªé€»è¾‘å‘é‡ï¼Œå¯¹äº x ä¸­åŒ¹é… pattern çš„å…ƒç´ ä¸º TRUEï¼›åœ¨ Chapter 17 ä¸­ï¼Œä½ å°†é€šè¿‡æ¯”è¾ƒæ—¥æœŸå’Œæ—¶é—´æ¥åˆ›å»ºé€»è¾‘å‘é‡ã€‚ä½†ç°åœ¨ï¼Œæˆ‘ä»¬å°†è½¬å‘ä¸‹ä¸€ä¸ªæœ€é‡è¦çš„å‘é‡ç±»å‹ï¼šæ•°å€¼å‘é‡ã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>12</span>Â  <span class='chapter-title'>é€»è¾‘å‘é‡</span>"
    ]
  },
  {
    "objectID": "logicals.html#footnotes",
    "href": "logicals.html#footnotes",
    "title": "12Â  é€»è¾‘å‘é‡",
    "section": "",
    "text": "R é€šå¸¸ä¼šä¸ºä½ è°ƒç”¨ printï¼ˆå³ x æ˜¯ print(x) çš„ç®€å†™ï¼‰ï¼Œä½†å¦‚æœä½ æƒ³æä¾›å…¶ä»–å‚æ•°ï¼Œæ˜¾å¼è°ƒç”¨å®ƒä¼šå¾ˆæœ‰ç”¨ã€‚â†©ï¸\nä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœ x ä¸ºçœŸï¼Œæˆ–è€… y ä¸ºçœŸï¼Œä½†ä¸æ˜¯ä¸¤è€…éƒ½ä¸ºçœŸï¼Œé‚£ä¹ˆ xor(x, y) å°±ä¸ºçœŸã€‚è¿™ä¸æˆ‘ä»¬åœ¨è‹±è¯­ä¸­é€šå¸¸ä½¿ç”¨â€œorâ€çš„æ–¹å¼ç±»ä¼¼ã€‚â€œä¸¤è€…éƒ½â€é€šå¸¸ä¸æ˜¯â€œä½ æƒ³è¦å†°æ·‡æ·‹è¿˜æ˜¯è›‹ç³•ï¼Ÿâ€è¿™ä¸ªé—®é¢˜çš„å¯æ¥å—ç­”æ¡ˆã€‚â†©ï¸\næˆ‘ä»¬å°†åœ¨ Chapter 19 ä¸­è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚â†©ï¸\ndplyr çš„ if_else() ä¸ R base çš„ ifelse() éå¸¸ç›¸ä¼¼ã€‚if_else() ç›¸å¯¹äº ifelse() æœ‰ä¸¤ä¸ªä¸»è¦ä¼˜ç‚¹ï¼šä½ å¯ä»¥é€‰æ‹©å¦‚ä½•å¤„ç†ç¼ºå¤±å€¼ï¼Œå¹¶ä¸”å¦‚æœä½ çš„å˜é‡ç±»å‹ä¸å…¼å®¹ï¼Œif_else() æ›´æœ‰å¯èƒ½ç»™å‡ºæœ‰æ„ä¹‰çš„é”™è¯¯ä¿¡æ¯ã€‚â†©ï¸",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>12</span>Â  <span class='chapter-title'>é€»è¾‘å‘é‡</span>"
    ]
  },
  {
    "objectID": "numbers.html",
    "href": "numbers.html",
    "title": "13Â  æ•°å€¼",
    "section": "",
    "text": "13.1 å¼•è¨€\næ•°å€¼å‘é‡æ˜¯æ•°æ®ç§‘å­¦çš„æ”¯æŸ±ï¼Œåœ¨æœ¬ä¹¦çš„å‰é¢éƒ¨åˆ†ä½ å·²ç»å¤šæ¬¡ä½¿ç”¨è¿‡å®ƒä»¬ã€‚ç°åœ¨æ˜¯æ—¶å€™ç³»ç»Ÿåœ°å®¡è§†ä¸€ä¸‹åœ¨ R ä¸­ä½ èƒ½ç”¨å®ƒä»¬åšä»€ä¹ˆï¼Œä»¥ç¡®ä¿ä½ èƒ½å¤Ÿå¾ˆå¥½åœ°åº”å¯¹æœªæ¥ä»»ä½•æ¶‰åŠæ•°å€¼å‘é‡çš„é—®é¢˜ã€‚\næˆ‘ä»¬å°†é¦–å…ˆä¸ºä½ æä¾›ä¸€äº›å·¥å…·ï¼Œä»¥ä¾¿åœ¨ä½ æœ‰å­—ç¬¦ä¸²çš„æƒ…å†µä¸‹åˆ›å»ºæ•°å€¼ï¼Œç„¶åæ›´è¯¦ç»†åœ°ä»‹ç» count()ã€‚æ¥ç€ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ä¸ mutate() æ­é…ä½¿ç”¨çš„å„ç§æ•°å€¼è½¬æ¢ï¼ŒåŒ…æ‹¬é‚£äº›å¯ä»¥åº”ç”¨äºå…¶ä»–ç±»å‹å‘é‡ä½†å¸¸ç”¨äºæ•°å€¼å‘é‡çš„æ›´é€šç”¨çš„è½¬æ¢ã€‚æœ€åï¼Œæˆ‘ä»¬å°†ä»‹ç»ä¸ summarize() æ­é…ä½¿ç”¨çš„æ±‡æ€»å‡½æ•°ï¼Œå¹¶å‘ä½ å±•ç¤ºå®ƒä»¬å¦‚ä½•ä¹Ÿèƒ½ä¸ mutate() ä¸€èµ·ä½¿ç”¨ã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>13</span>Â  <span class='chapter-title'>æ•°å€¼</span>"
    ]
  },
  {
    "objectID": "numbers.html#å¼•è¨€",
    "href": "numbers.html#å¼•è¨€",
    "title": "13Â  æ•°å€¼",
    "section": "",
    "text": "13.1.1 å…ˆå†³æ¡ä»¶\næœ¬ç« ä¸»è¦ä½¿ç”¨ R base ä¸­çš„å‡½æ•°ï¼Œè¿™äº›å‡½æ•°æ— éœ€åŠ è½½ä»»ä½•åŒ…å³å¯ä½¿ç”¨ã€‚ä½†æˆ‘ä»¬ä»ç„¶éœ€è¦ tidyverseï¼Œå› ä¸ºæˆ‘ä»¬å°†åœ¨ mutate() å’Œ filter() ç­‰ tidyverse å‡½æ•°å†…éƒ¨ä½¿ç”¨è¿™äº› R base å‡½æ•°ã€‚ä¸ä¸Šä¸€ç« ä¸€æ ·ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ nycflights13 ä¸­çš„çœŸå®ç¤ºä¾‹ï¼Œä»¥åŠç”¨ c() å’Œ tribble() åˆ›å»ºçš„ç©å…·ç¤ºä¾‹ã€‚\n\nlibrary(tidyverse)\nlibrary(nycflights13)",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>13</span>Â  <span class='chapter-title'>æ•°å€¼</span>"
    ]
  },
  {
    "objectID": "numbers.html#åˆ›å»ºæ•°å€¼",
    "href": "numbers.html#åˆ›å»ºæ•°å€¼",
    "title": "13Â  æ•°å€¼",
    "section": "\n13.2 åˆ›å»ºæ•°å€¼",
    "text": "13.2 åˆ›å»ºæ•°å€¼\nåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ å¾—åˆ°çš„æ•°å€¼å·²ç»æ˜¯ R çš„æ•°å€¼ç±»å‹ä¹‹ä¸€ï¼šæ•´æ•°ï¼ˆintegerï¼‰æˆ–åŒç²¾åº¦æµ®ç‚¹æ•°ï¼ˆdoubleï¼‰ã€‚ç„¶è€Œï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ ä¼šé‡åˆ°ä»¥å­—ç¬¦ä¸²å½¢å¼å­˜åœ¨çš„æ•°å€¼ï¼Œè¿™å¯èƒ½æ˜¯å› ä¸ºä½ é€šè¿‡åˆ—æ ‡é¢˜è¿›è¡Œé€è§†æ“ä½œåˆ›å»ºäº†å®ƒä»¬ï¼Œæˆ–è€…æ˜¯åœ¨æ•°æ®å¯¼å…¥è¿‡ç¨‹ä¸­å‡ºäº†é—®é¢˜ã€‚\nreadr æä¾›äº†ä¸¤ä¸ªæœ‰ç”¨çš„å‡½æ•°æ¥å°†å­—ç¬¦ä¸²è§£æä¸ºæ•°å€¼ï¼šparse_double() å’Œ parse_number()ã€‚å½“ä½ æœ‰åä¸ºå­—ç¬¦ä¸²çš„æ•°å­—æ—¶ï¼Œä½¿ç”¨ parse_double()ï¼š\n\nx &lt;- c(\"1.2\", \"5.6\", \"1e3\")\nparse_double(x)\n#&gt; [1]    1.2    5.6 1000.0\n\nå½“å­—ç¬¦ä¸²ä¸­åŒ…å«ä½ æƒ³è¦å¿½ç•¥çš„éæ•°å€¼æ–‡æœ¬æ—¶ï¼Œä½¿ç”¨ parse_number()ã€‚è¿™å¯¹äºå¤„ç†è´§å¸æ•°æ®å’Œç™¾åˆ†æ¯”ç‰¹åˆ«æœ‰ç”¨ï¼š\n\nx &lt;- c(\"$1,234\", \"USD 3,513\", \"59%\")\nparse_number(x)\n#&gt; [1] 1234 3513   59",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>13</span>Â  <span class='chapter-title'>æ•°å€¼</span>"
    ]
  },
  {
    "objectID": "numbers.html#sec-counts",
    "href": "numbers.html#sec-counts",
    "title": "13Â  æ•°å€¼",
    "section": "\n13.3 è®¡æ•°",
    "text": "13.3 è®¡æ•°\nä»…å‡­è®¡æ•°å’Œä¸€äº›åŸºæœ¬ç®—æœ¯å°±èƒ½å®Œæˆå¦‚æ­¤å¤šçš„æ•°æ®ç§‘å­¦å·¥ä½œï¼Œè¿™ç€å®ä»¤äººæƒŠè®¶ï¼Œå› æ­¤ dplyr è‡´åŠ›äºé€šè¿‡ count() ä½¿è®¡æ•°å°½å¯èƒ½ç®€å•ã€‚è¿™ä¸ªå‡½æ•°éå¸¸é€‚åˆåœ¨åˆ†æè¿‡ç¨‹ä¸­è¿›è¡Œå¿«é€Ÿæ¢ç´¢å’Œæ£€æŸ¥ï¼š\n\nflights |&gt; count(dest)\n#&gt; # A tibble: 105 Ã— 2\n#&gt;   dest      n\n#&gt;   &lt;chr&gt; &lt;int&gt;\n#&gt; 1 ABQ     254\n#&gt; 2 ACK     265\n#&gt; 3 ALB     439\n#&gt; 4 ANC       8\n#&gt; 5 ATL   17215\n#&gt; 6 AUS    2439\n#&gt; # â„¹ 99 more rows\n\nï¼ˆå°½ç®¡åœ¨ Chapter 4 ä¸­æœ‰ç›¸å…³å»ºè®®ï¼Œæˆ‘ä»¬é€šå¸¸å°† count() å†™åœ¨å•è¡Œä¸Šï¼Œå› ä¸ºå®ƒé€šå¸¸åœ¨æ§åˆ¶å°ä¸­ä½¿ç”¨ï¼Œç”¨äºå¿«é€Ÿæ£€æŸ¥è®¡ç®—æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œã€‚ï¼‰\nå¦‚æœä½ æƒ³æŸ¥çœ‹æœ€å¸¸è§çš„å€¼ï¼Œå¯ä»¥æ·»åŠ  sort = TRUEï¼š\n\nflights |&gt; count(dest, sort = TRUE)\n#&gt; # A tibble: 105 Ã— 2\n#&gt;   dest      n\n#&gt;   &lt;chr&gt; &lt;int&gt;\n#&gt; 1 ORD   17283\n#&gt; 2 ATL   17215\n#&gt; 3 LAX   16174\n#&gt; 4 BOS   15508\n#&gt; 5 MCO   14082\n#&gt; 6 CLT   14064\n#&gt; # â„¹ 99 more rows\n\nè¯·è®°ä½ï¼Œå¦‚æœä½ æƒ³æŸ¥çœ‹æ‰€æœ‰å€¼ï¼Œå¯ä»¥ä½¿ç”¨ |&gt; View() æˆ– |&gt; print(n = Inf)ã€‚\nä½ å¯ä»¥ä½¿ç”¨ group_by()ã€summarize() å’Œ n() æ¥â€œæ‰‹åŠ¨â€æ‰§è¡Œç›¸åŒçš„è®¡ç®—ã€‚è¿™å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºå®ƒå…è®¸ä½ åŒæ—¶è®¡ç®—å…¶ä»–æ±‡æ€»ç»Ÿè®¡é‡ï¼š\n\nflights |&gt; \n  group_by(dest) |&gt; \n  summarize(\n    n = n(),\n    delay = mean(arr_delay, na.rm = TRUE)\n  )\n#&gt; # A tibble: 105 Ã— 3\n#&gt;   dest      n delay\n#&gt;   &lt;chr&gt; &lt;int&gt; &lt;dbl&gt;\n#&gt; 1 ABQ     254  4.38\n#&gt; 2 ACK     265  4.85\n#&gt; 3 ALB     439 14.4 \n#&gt; 4 ANC       8 -2.5 \n#&gt; 5 ATL   17215 11.3 \n#&gt; 6 AUS    2439  6.02\n#&gt; # â„¹ 99 more rows\n\nn() æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ±‡æ€»å‡½æ•°ï¼Œå®ƒä¸æ¥å—ä»»ä½•å‚æ•°ï¼Œè€Œæ˜¯è®¿é—®å…³äºâ€œå½“å‰â€ç»„çš„ä¿¡æ¯ã€‚è¿™æ„å‘³ç€å®ƒåªèƒ½åœ¨ dplyr çš„åŠ¨è¯ï¼ˆverbï¼‰å†…éƒ¨å·¥ä½œï¼š\n\nn()\n#&gt; Error in `n()`:\n#&gt; ! Must only be used inside data-masking verbs like `mutate()`,\n#&gt;   `filter()`, and `group_by()`.\n\nn() å’Œ count() æœ‰å‡ ä¸ªä½ å¯èƒ½ä¼šè§‰å¾—æœ‰ç”¨çš„å˜ä½“ï¼š\n\n\nn_distinct(x) è®¡ç®—ä¸€ä¸ªæˆ–å¤šä¸ªå˜é‡çš„ä¸åŒï¼ˆå”¯ä¸€ï¼‰å€¼çš„æ•°é‡ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾å‡ºå“ªäº›ç›®çš„åœ°ç”±æœ€å¤šçš„èˆªç©ºå…¬å¸æä¾›æœåŠ¡ï¼š\n\nflights |&gt; \n  group_by(dest) |&gt; \n  summarize(carriers = n_distinct(carrier)) |&gt; \n  arrange(desc(carriers))\n#&gt; # A tibble: 105 Ã— 2\n#&gt;   dest  carriers\n#&gt;   &lt;chr&gt;    &lt;int&gt;\n#&gt; 1 ATL          7\n#&gt; 2 BOS          7\n#&gt; 3 CLT          7\n#&gt; 4 ORD          7\n#&gt; 5 TPA          7\n#&gt; 6 AUS          6\n#&gt; # â„¹ 99 more rows\n\n\n\nåŠ æƒè®¡æ•°å°±æ˜¯æ±‚å’Œã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥â€œè®¡ç®—â€æ¯æ¶é£æœºé£è¡Œçš„æ€»è‹±é‡Œæ•°ï¼š\n\nflights |&gt; \n  group_by(tailnum) |&gt; \n  summarize(miles = sum(distance))\n#&gt; # A tibble: 4,044 Ã— 2\n#&gt;   tailnum  miles\n#&gt;   &lt;chr&gt;    &lt;dbl&gt;\n#&gt; 1 D942DN    3418\n#&gt; 2 N0EGMQ  250866\n#&gt; 3 N10156  115966\n#&gt; 4 N102UW   25722\n#&gt; 5 N103US   24619\n#&gt; 6 N104UW   25157\n#&gt; # â„¹ 4,038 more rows\n\nåŠ æƒè®¡æ•°æ˜¯ä¸€ä¸ªå¸¸è§çš„é—®é¢˜ï¼Œæ‰€ä»¥ count() æœ‰ä¸€ä¸ª wt å‚æ•°å¯ä»¥åšåŒæ ·çš„äº‹æƒ…ï¼š\n\nflights |&gt; count(tailnum, wt = distance)\n\n\n\nä½ å¯ä»¥é€šè¿‡ç»„åˆ sum() å’Œ is.na() æ¥è®¡ç®—ç¼ºå¤±å€¼çš„æ•°é‡ã€‚åœ¨ flights æ•°æ®é›†ä¸­ï¼Œè¿™ä»£è¡¨äº†è¢«å–æ¶ˆçš„èˆªç­ï¼š\n\nflights |&gt; \n  group_by(dest) |&gt; \n  summarize(n_cancelled = sum(is.na(dep_time))) \n#&gt; # A tibble: 105 Ã— 2\n#&gt;   dest  n_cancelled\n#&gt;   &lt;chr&gt;       &lt;int&gt;\n#&gt; 1 ABQ             0\n#&gt; 2 ACK             0\n#&gt; 3 ALB            20\n#&gt; 4 ANC             0\n#&gt; 5 ATL           317\n#&gt; 6 AUS            21\n#&gt; # â„¹ 99 more rows\n\n\n\n\n13.3.1 ç»ƒä¹ \n\nä½ å¦‚ä½•ä½¿ç”¨ count() æ¥è®¡ç®—ç»™å®šå˜é‡ä¸­å«æœ‰ç¼ºå¤±å€¼çš„è¡Œæ•°ï¼Ÿ\nå°†ä»¥ä¸‹ count() è°ƒç”¨å±•å¼€ï¼Œæ”¹ç”¨ group_by()ã€summarize() å’Œ arrange() æ¥å®ç°ï¼š\n\nflights |&gt; count(dest, sort = TRUE)\nflights |&gt; count(tailnum, wt = distance)",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>13</span>Â  <span class='chapter-title'>æ•°å€¼</span>"
    ]
  },
  {
    "objectID": "numbers.html#æ•°å€¼è½¬æ¢",
    "href": "numbers.html#æ•°å€¼è½¬æ¢",
    "title": "13Â  æ•°å€¼",
    "section": "\n13.4 æ•°å€¼è½¬æ¢",
    "text": "13.4 æ•°å€¼è½¬æ¢\nè½¬æ¢å‡½æ•°ä¸ mutate() é…åˆå¾—å¾ˆå¥½ï¼Œå› ä¸ºå®ƒä»¬çš„è¾“å‡ºä¸è¾“å…¥é•¿åº¦ç›¸åŒã€‚ç»å¤§å¤šæ•°è½¬æ¢å‡½æ•°å·²ç»å†…ç½®äº R base ä¸­ã€‚åˆ—å‡ºæ‰€æœ‰è¿™äº›å‡½æ•°æ˜¯ä¸åˆ‡å®é™…çš„ï¼Œæ‰€ä»¥æœ¬èŠ‚å°†å±•ç¤ºæœ€æœ‰ç”¨çš„é‚£äº›ã€‚ä¾‹å¦‚ï¼Œè™½ç„¶ R æä¾›äº†ä½ å¯èƒ½æ¢¦æƒ³åˆ°çš„æ‰€æœ‰ä¸‰è§’å‡½æ•°ï¼Œä½†æˆ‘ä»¬åœ¨è¿™é‡Œä¸åˆ—å‡ºå®ƒä»¬ï¼Œå› ä¸ºå®ƒä»¬åœ¨æ•°æ®ç§‘å­¦ä¸­å¾ˆå°‘éœ€è¦ã€‚\n\n13.4.1 ç®—æœ¯å’Œå¾ªç¯è¡¥é½è§„åˆ™\næˆ‘ä»¬åœ¨ Chapter 2 ä¸­ä»‹ç»äº†ç®—æœ¯ï¼ˆ+, -, *, /, ^ï¼‰çš„åŸºç¡€çŸ¥è¯†ï¼Œå¹¶ä¸”ä»é‚£ä»¥åå·²ç»å¤šæ¬¡ä½¿ç”¨å®ƒä»¬ã€‚è¿™äº›å‡½æ•°ä¸éœ€è¦å¤ªå¤šçš„è§£é‡Šï¼Œå› ä¸ºå®ƒä»¬åšçš„å°±æ˜¯ä½ åœ¨å°å­¦å­¦åˆ°çš„ä¸œè¥¿ã€‚ä½†æ˜¯æˆ‘ä»¬éœ€è¦ç®€è¦åœ°è°ˆè°ˆå¾ªç¯è¡¥é½è§„åˆ™ï¼ˆrecycling rulesï¼‰ï¼Œå®ƒå†³å®šäº†å½“å·¦å³ä¸¤è¾¹çš„é•¿åº¦ä¸åŒæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚è¿™å¯¹äºåƒ flights |&gt; mutate(air_time = air_time / 60) è¿™æ ·çš„æ“ä½œå¾ˆé‡è¦ï¼Œå› ä¸º / çš„å·¦è¾¹æœ‰ 336,776 ä¸ªæ•°å­—ï¼Œè€Œå³è¾¹åªæœ‰ä¸€ä¸ªã€‚\nR é€šè¿‡å¾ªç¯è¡¥é½ï¼ˆrecyclingï¼‰æˆ–é‡å¤è¾ƒçŸ­çš„å‘é‡æ¥å¤„ç†é•¿åº¦ä¸åŒ¹é…çš„é—®é¢˜ã€‚å¦‚æœæˆ‘ä»¬åœ¨æ•°æ®æ¡†ä¹‹å¤–åˆ›å»ºä¸€äº›å‘é‡ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å®¹æ˜“åœ°çœ‹åˆ°è¿™ä¸ªæ“ä½œï¼š\n\nx &lt;- c(1, 2, 10, 20)\nx / 5\n#&gt; [1] 0.2 0.4 2.0 4.0\n# æ˜¯ä¸‹é¢å†™æ³•çš„ç®€å†™\nx / c(5, 5, 5, 5)\n#&gt; [1] 0.2 0.4 2.0 4.0\n\né€šå¸¸ï¼Œä½ åªæƒ³å¾ªç¯è¡¥é½å•ä¸ªæ•°å­—ï¼ˆå³é•¿åº¦ä¸º 1 çš„å‘é‡ï¼‰ï¼Œä½† R ä¼šå¾ªç¯è¡¥é½ä»»ä½•è¾ƒçŸ­é•¿åº¦çš„å‘é‡ã€‚å¦‚æœè¾ƒé•¿çš„å‘é‡ä¸æ˜¯è¾ƒçŸ­å‘é‡çš„å€æ•°ï¼Œå®ƒé€šå¸¸ï¼ˆä½†å¹¶éæ€»æ˜¯ï¼‰ä¼šç»™ä½ ä¸€ä¸ªè­¦å‘Šï¼š\n\nx * c(1, 2)\n#&gt; [1]  1  4 10 40\nx * c(1, 2, 3)\n#&gt; Warning in x * c(1, 2, 3): longer object length is not a multiple of shorter\n#&gt; object length\n#&gt; [1]  1  4 30 20\n\nè¿™äº›å¾ªç¯è¡¥é½è§„åˆ™ä¹Ÿé€‚ç”¨äºé€»è¾‘æ¯”è¾ƒï¼ˆ==, &lt;, &lt;=, &gt;, &gt;=, !=ï¼‰ï¼Œå¦‚æœä½ ä¸å°å¿ƒç”¨äº† == è€Œä¸æ˜¯ %in%ï¼Œå¹¶ä¸”æ•°æ®æ¡†çš„è¡Œæ•°ç¢°å·§å¾ˆå‡‘å·§ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä»¤äººæƒŠè®¶çš„ç»“æœã€‚ä¾‹å¦‚ï¼Œçœ‹è¿™æ®µè¯•å›¾æ‰¾å‡ºæ‰€æœ‰ä¸€æœˆå’ŒäºŒæœˆèˆªç­çš„ä»£ç ï¼š\n\nflights |&gt; \n  filter(month == c(1, 2))\n#&gt; # A tibble: 25,977 Ã— 19\n#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1  2013     1     1      517            515         2      830            819\n#&gt; 2  2013     1     1      542            540         2      923            850\n#&gt; 3  2013     1     1      554            600        -6      812            837\n#&gt; 4  2013     1     1      555            600        -5      913            854\n#&gt; 5  2013     1     1      557            600        -3      838            846\n#&gt; 6  2013     1     1      558            600        -2      849            851\n#&gt; # â„¹ 25,971 more rows\n#&gt; # â„¹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, â€¦\n\nè¿™æ®µä»£ç è¿è¡Œæ²¡æœ‰é”™è¯¯ï¼Œä½†å®ƒæ²¡æœ‰è¿”å›ä½ æƒ³è¦çš„ç»“æœã€‚ç”±äºå¾ªç¯è¡¥é½è§„åˆ™ï¼Œå®ƒæ‰¾åˆ°äº†å¥‡æ•°è¡Œä¸­ä¸€æœˆä»½å‡ºå‘çš„èˆªç­å’Œå¶æ•°è¡Œä¸­äºŒæœˆä»½å‡ºå‘çš„èˆªç­ã€‚è€Œä¸”ä¸å¹¸çš„æ˜¯ï¼Œå› ä¸º flights çš„è¡Œæ•°æ˜¯å¶æ•°ï¼Œæ‰€ä»¥æ²¡æœ‰è­¦å‘Šã€‚\nä¸ºäº†ä¿æŠ¤ä½ å…å—è¿™ç§é™é»˜å¤±è´¥çš„å½±å“ï¼Œå¤§å¤šæ•° tidyverse å‡½æ•°ä½¿ç”¨ä¸€ç§æ›´ä¸¥æ ¼çš„å¾ªç¯è¡¥é½å½¢å¼ï¼Œåªå¾ªç¯è¡¥é½å•ä¸ªå€¼ã€‚ä¸å¹¸çš„æ˜¯ï¼Œè¿™åœ¨è¿™é‡Œæˆ–è®¸å¤šå…¶ä»–æƒ…å†µä¸‹æ²¡æœ‰å¸®åŠ©ï¼Œå› ä¸ºå…³é”®çš„è®¡ç®—æ˜¯ç”± R base å‡½æ•° == æ‰§è¡Œçš„ï¼Œè€Œä¸æ˜¯ filter()ã€‚\n\n13.4.2 æœ€å°å€¼å’Œæœ€å¤§å€¼\nç®—æœ¯å‡½æ•°å¤„ç†æˆå¯¹çš„å˜é‡ã€‚ä¸¤ä¸ªå¯†åˆ‡ç›¸å…³çš„å‡½æ•°æ˜¯ pmin() å’Œ pmax()ï¼Œå½“ç»™å®šä¸¤ä¸ªæˆ–æ›´å¤šå˜é‡æ—¶ï¼Œå®ƒä»¬å°†è¿”å›æ¯è¡Œä¸­çš„æœ€å°å€¼æˆ–æœ€å¤§å€¼ï¼š\n\ndf &lt;- tribble(\n  ~x, ~y,\n  1,  3,\n  5,  2,\n  7, NA,\n)\n\ndf |&gt; \n  mutate(\n    min = pmin(x, y, na.rm = TRUE),\n    max = pmax(x, y, na.rm = TRUE)\n  )\n#&gt; # A tibble: 3 Ã— 4\n#&gt;       x     y   min   max\n#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1     1     3     1     3\n#&gt; 2     5     2     2     5\n#&gt; 3     7    NA     7     7\n\nè¯·æ³¨æ„ï¼Œè¿™äº›ä¸åŒäºæ±‡æ€»å‡½æ•° min() å’Œ max()ï¼Œåè€…æ¥å—å¤šä¸ªè§‚æµ‹å€¼å¹¶è¿”å›å•ä¸ªå€¼ã€‚å½“ä½ å‘ç°æ‰€æœ‰çš„æœ€å°å€¼å’Œæ‰€æœ‰çš„æœ€å¤§å€¼éƒ½ç›¸åŒæ—¶ï¼Œä½ å°±çŸ¥é“ä½ ç”¨é”™äº†å½¢å¼ï¼š\n\ndf |&gt; \n  mutate(\n    min = min(x, y, na.rm = TRUE),\n    max = max(x, y, na.rm = TRUE)\n  )\n#&gt; # A tibble: 3 Ã— 4\n#&gt;       x     y   min   max\n#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1     1     3     1     7\n#&gt; 2     5     2     1     7\n#&gt; 3     7    NA     1     7\n\n\n13.4.3 æ¨¡è¿ç®—\næ¨¡è¿ç®—ï¼ˆModular arithmeticï¼‰æ˜¯ä½ å­¦ä¼šå°æ•°ä¹‹å‰æ‰€åšçš„é‚£ç§æ•°å­¦çš„ä¸“ä¸šåç§°ï¼Œå³äº§ç”Ÿä¸€ä¸ªæ•´æ•°å’Œä¸€ä¸ªä½™æ•°çš„é™¤æ³•ã€‚åœ¨ R ä¸­ï¼Œ%/% è¿›è¡Œæ•´é™¤ï¼Œ%% è®¡ç®—ä½™æ•°ï¼š\n\n1:10 %/% 3\n#&gt;  [1] 0 0 1 1 1 2 2 2 3 3\n1:10 %% 3\n#&gt;  [1] 1 2 0 1 2 0 1 2 0 1\n\næ¨¡è¿ç®—å¯¹ flights æ•°æ®é›†å¾ˆæ–¹ä¾¿ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥å°† sched_dep_time å˜é‡åˆ†è§£ä¸º hour å’Œ minuteï¼š\n\nflights |&gt; \n  mutate(\n    hour = sched_dep_time %/% 100,\n    minute = sched_dep_time %% 100,\n    .keep = \"used\"\n  )\n#&gt; # A tibble: 336,776 Ã— 3\n#&gt;   sched_dep_time  hour minute\n#&gt;            &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt;\n#&gt; 1            515     5     15\n#&gt; 2            529     5     29\n#&gt; 3            540     5     40\n#&gt; 4            545     5     45\n#&gt; 5            600     6      0\n#&gt; 6            558     5     58\n#&gt; # â„¹ 336,770 more rows\n\næˆ‘ä»¬å¯ä»¥å°†å…¶ä¸ Section 12.4 ä¸­çš„ mean(is.na(x)) æŠ€å·§ç»“åˆèµ·æ¥ï¼Œçœ‹çœ‹å–æ¶ˆèˆªç­çš„æ¯”ä¾‹åœ¨ä¸€å¤©ä¸­æ˜¯å¦‚ä½•å˜åŒ–çš„ã€‚ç»“æœæ˜¾ç¤ºåœ¨ FigureÂ 13.1 ä¸­ã€‚\n\nflights |&gt; \n  group_by(hour = sched_dep_time %/% 100) |&gt; \n  summarize(prop_cancelled = mean(is.na(dep_time)), n = n()) |&gt; \n  filter(hour &gt; 1) |&gt; \n  ggplot(aes(x = hour, y = prop_cancelled)) +\n  geom_line(color = \"grey50\") + \n  geom_point(aes(size = n))\n\n\n\n\n\n\nFigureÂ 13.1: ä¸€å¼ çº¿å›¾ï¼Œx è½´ä¸ºè®¡åˆ’å‡ºå‘å°æ—¶ï¼Œy è½´ä¸ºå–æ¶ˆèˆªç­çš„æ¯”ä¾‹ã€‚ å–æ¶ˆä¼¼ä¹åœ¨ä¸€å¤©ä¸­ä¸æ–­ç´¯ç§¯ï¼Œç›´åˆ°æ™šä¸Š 8 ç‚¹ï¼Œå¾ˆæ™šçš„èˆªç­ è¢«å–æ¶ˆçš„å¯èƒ½æ€§è¦å°å¾—å¤šã€‚\n\n\n\n\n\n13.4.4 å¯¹æ•°\nå¯¹æ•°æ˜¯ä¸€ç§éå¸¸æœ‰ç”¨çš„è½¬æ¢ï¼Œç”¨äºå¤„ç†è·¨è¶Šå¤šä¸ªæ•°é‡çº§çš„æ•°æ®ï¼Œå¹¶å°†æŒ‡æ•°å¢é•¿è½¬æ¢ä¸ºçº¿æ€§å¢é•¿ã€‚åœ¨ R ä¸­ï¼Œä½ å¯ä»¥é€‰æ‹©ä¸‰ç§å¯¹æ•°ï¼šlog()ï¼ˆè‡ªç„¶å¯¹æ•°ï¼Œä»¥ e ä¸ºåº•ï¼‰ã€log2()ï¼ˆä»¥ 2 ä¸ºåº•ï¼‰å’Œ log10()ï¼ˆä»¥ 10 ä¸ºåº•ï¼‰ã€‚æˆ‘ä»¬å»ºè®®ä½¿ç”¨ log2() æˆ– log10()ã€‚log2() å¾ˆå®¹æ˜“è§£é‡Šï¼Œå› ä¸ºå¯¹æ•°å°ºåº¦ä¸Š 1 çš„å·®å¼‚å¯¹åº”äºåŸå§‹å°ºåº¦ä¸Šçš„åŠ å€ï¼Œè€Œ -1 çš„å·®å¼‚å¯¹åº”äºå‡åŠï¼›è€Œ log10() å¾ˆå®¹æ˜“åå‘è½¬æ¢ï¼Œå› ä¸ºï¼ˆä¾‹å¦‚ï¼‰3 æ˜¯ 10^3 = 1000ã€‚log() çš„é€†è¿ç®—æ˜¯ exp()ï¼›è¦è®¡ç®— log2() æˆ– log10() çš„é€†è¿ç®—ï¼Œä½ éœ€è¦ä½¿ç”¨ 2^ æˆ– 10^ã€‚\n\n13.4.5 å››èˆäº”å…¥\nä½¿ç”¨ round(x) å°†ä¸€ä¸ªæ•°å››èˆäº”å…¥åˆ°æœ€è¿‘çš„æ•´æ•°ï¼š\n\nround(123.456)\n#&gt; [1] 123\n\nä½ å¯ä»¥ç”¨ç¬¬äºŒä¸ªå‚æ•° digits æ¥æ§åˆ¶å››èˆäº”å…¥çš„ç²¾åº¦ã€‚round(x, digits) å››èˆäº”å…¥åˆ°æœ€è¿‘çš„ 10^-nï¼Œæ‰€ä»¥ digits = 2 ä¼šå››èˆäº”å…¥åˆ°æœ€è¿‘çš„ 0.01ã€‚è¿™ä¸ªå®šä¹‰å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºå®ƒæ„å‘³ç€ round(x, -3) ä¼šå››èˆäº”å…¥åˆ°æœ€è¿‘çš„åƒä½ï¼Œäº‹å®ä¹Ÿç¡®å®å¦‚æ­¤ï¼š\n\nround(123.456, 2)  # ä¸¤ä½å°æ•°\n#&gt; [1] 123.46\nround(123.456, 1)  # ä¸€ä½å°æ•°\n#&gt; [1] 123.5\nround(123.456, -1) # å››èˆäº”å…¥åˆ°æœ€è¿‘çš„åä½\n#&gt; [1] 120\nround(123.456, -2) # å››èˆäº”å…¥åˆ°æœ€è¿‘çš„ç™¾ä½\n#&gt; [1] 100\n\nround() æœ‰ä¸€ä¸ªåˆçœ‹èµ·æ¥å¾ˆå¥‡æ€ªçš„ç‰¹æ€§ï¼š\n\nround(c(1.5, 2.5))\n#&gt; [1] 2 2\n\nround() ä½¿ç”¨çš„æ˜¯æ‰€è°“çš„â€œå››èˆäº”å…¥åˆ°å¶æ•°â€æˆ–â€œé“¶è¡Œå®¶èˆå…¥æ³•â€ï¼ˆBankerâ€™s roundingï¼‰ï¼šå¦‚æœä¸€ä¸ªæ•°æ°å¥½åœ¨ä¸¤ä¸ªæ•´æ•°çš„ä¸­é—´ï¼Œå®ƒå°†è¢«èˆå…¥åˆ°å¶æ•°ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç­–ç•¥ï¼Œå› ä¸ºå®ƒèƒ½ä¿æŒèˆå…¥çš„æ— åæ€§ï¼šæ‰€æœ‰ 0.5 çš„ä¸€åŠå‘ä¸Šèˆå…¥ï¼Œä¸€åŠå‘ä¸‹èˆå…¥ã€‚\nround() ä¸ floor()ï¼ˆæ€»æ˜¯å‘ä¸‹å–æ•´ï¼‰å’Œ ceiling()ï¼ˆæ€»æ˜¯å‘ä¸Šå–æ•´ï¼‰é…å¯¹ä½¿ç”¨ï¼š\n\nx &lt;- 123.456\n\nfloor(x)\n#&gt; [1] 123\nceiling(x)\n#&gt; [1] 124\n\nè¿™äº›å‡½æ•°æ²¡æœ‰ digits å‚æ•°ï¼Œæ‰€ä»¥ä½ å¯ä»¥å…ˆç¼©å°ï¼Œå†å–æ•´ï¼Œç„¶åå†æ”¾å¤§å›å»ï¼š\n\n# å‘ä¸‹å–æ•´åˆ°æœ€è¿‘çš„ä¸¤ä½å°æ•°\nfloor(x / 0.01) * 0.01\n#&gt; [1] 123.45\n# å‘ä¸Šå–æ•´åˆ°æœ€è¿‘çš„ä¸¤ä½å°æ•°\nceiling(x / 0.01) * 0.01\n#&gt; [1] 123.46\n\nå¦‚æœä½ æƒ³å°†æ•°å­— round() åˆ°æŸä¸ªå…¶ä»–æ•°çš„å€æ•°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åŒæ ·çš„æŠ€æœ¯ï¼š\n\n# å››èˆäº”å…¥åˆ°æœ€è¿‘çš„ 4 çš„å€æ•°\nround(x / 4) * 4\n#&gt; [1] 124\n\n# å››èˆäº”å…¥åˆ°æœ€è¿‘çš„ 0.25\nround(x / 0.25) * 0.25\n#&gt; [1] 123.5\n\n\n13.4.6 å°†æ•°å€¼åˆ‡å‰²æˆèŒƒå›´\nä½¿ç”¨ cut()1 å°†ä¸€ä¸ªæ•°å€¼å‘é‡åˆ†å‰²ï¼ˆå³åˆ†ç®±ï¼‰æˆç¦»æ•£çš„æ¡¶ï¼š\n\nx &lt;- c(1, 2, 5, 10, 15, 20)\ncut(x, breaks = c(0, 5, 10, 15, 20))\n#&gt; [1] (0,5]   (0,5]   (0,5]   (5,10]  (10,15] (15,20]\n#&gt; Levels: (0,5] (5,10] (10,15] (15,20]\n\nåˆ†å‰²ç‚¹ä¸å¿…æ˜¯ç­‰è·çš„ï¼š\n\ncut(x, breaks = c(0, 5, 10, 100))\n#&gt; [1] (0,5]    (0,5]    (0,5]    (5,10]   (10,100] (10,100]\n#&gt; Levels: (0,5] (5,10] (10,100]\n\nä½ å¯ä»¥é€‰æ‹©æ€§åœ°æä¾›è‡ªå·±çš„ labelsã€‚æ³¨æ„ labels çš„æ•°é‡åº”è¯¥æ¯” breaks å°‘ä¸€ä¸ªã€‚\n\ncut(x, \n  breaks = c(0, 5, 10, 15, 20), \n  labels = c(\"sm\", \"md\", \"lg\", \"xl\")\n)\n#&gt; [1] sm sm sm md lg xl\n#&gt; Levels: sm md lg xl\n\nä»»ä½•è¶…å‡ºåˆ†å‰²ç‚¹èŒƒå›´çš„å€¼éƒ½ä¼šå˜æˆ NAï¼š\n\ny &lt;- c(NA, -10, 5, 10, 30)\ncut(y, breaks = c(0, 5, 10, 15, 20))\n#&gt; [1] &lt;NA&gt;   &lt;NA&gt;   (0,5]  (5,10] &lt;NA&gt;  \n#&gt; Levels: (0,5] (5,10] (10,15] (15,20]\n\nè¯·å‚é˜…æ–‡æ¡£ä»¥äº†è§£å…¶ä»–æœ‰ç”¨çš„å‚æ•°ï¼Œå¦‚ right å’Œ include.lowestï¼Œå®ƒä»¬æ§åˆ¶åŒºé—´æ˜¯ [a, b) è¿˜æ˜¯ (a, b]ï¼Œä»¥åŠæœ€ä½çš„åŒºé—´æ˜¯å¦åº”ä¸º [a, b]ã€‚\n\n13.4.7 ç´¯ç§¯å’Œæ»šåŠ¨èšåˆ\nR base æä¾›äº† cumsum()ã€cumprod()ã€cummin()ã€cummax() ç”¨äºè¿è¡Œæˆ–ç´¯ç§¯çš„æ±‚å’Œã€æ±‚ç§¯ã€æœ€å°å€¼å’Œæœ€å¤§å€¼ã€‚dplyr æä¾›äº† cummean() ç”¨äºç´¯ç§¯å‡å€¼ã€‚ç´¯ç§¯å’Œåœ¨å®è·µä¸­æœ€ä¸ºå¸¸è§ï¼š\n\nx &lt;- 1:10\ncumsum(x)\n#&gt;  [1]  1  3  6 10 15 21 28 36 45 55\n\nå¦‚æœä½ éœ€è¦æ›´å¤æ‚çš„æ»šåŠ¨æˆ–æ»‘åŠ¨èšåˆï¼Œå¯ä»¥è¯•è¯• slider åŒ…ã€‚\n\n13.4.8 ç»ƒä¹ \n\nç”¨è¯­è¨€è§£é‡Šç”¨äºç”Ÿæˆ FigureÂ 13.1 çš„ä»£ç æ¯ä¸€è¡Œéƒ½åœ¨åšä»€ä¹ˆã€‚\nR æä¾›äº†å“ªäº›ä¸‰è§’å‡½æ•°ï¼ŸçŒœä¸€äº›åå­—å¹¶æŸ¥é˜…æ–‡æ¡£ã€‚å®ƒä»¬æ˜¯ä½¿ç”¨åº¦è¿˜æ˜¯å¼§åº¦ï¼Ÿ\n\nç›®å‰ dep_time å’Œ sched_dep_time ä¾¿äºæŸ¥çœ‹ï¼Œä½†éš¾ä»¥è¿›è¡Œè®¡ç®—ï¼Œå› ä¸ºå®ƒä»¬å¹¶ä¸æ˜¯çœŸæ­£çš„è¿ç»­æ•°å€¼ã€‚ä½ å¯ä»¥é€šè¿‡è¿è¡Œä¸‹é¢çš„ä»£ç çœ‹åˆ°åŸºæœ¬é—®é¢˜ï¼šæ¯ä¸ªå°æ—¶ä¹‹é—´éƒ½å­˜åœ¨ä¸€ä¸ªé—´éš™ã€‚\n\nflights |&gt; \n  filter(month == 1, day == 1) |&gt; \n  ggplot(aes(x = sched_dep_time, y = dep_delay)) +\n  geom_point()\n\nå°†å®ƒä»¬è½¬æ¢ä¸ºæ›´çœŸå®çš„æ—¶é—´è¡¨ç¤ºï¼ˆå¯ä»¥æ˜¯å°æ•°å°æ—¶æˆ–è‡ªåˆå¤œä»¥æ¥çš„åˆ†é’Ÿæ•°ï¼‰ã€‚\n\nå°† dep_time å’Œ arr_time å››èˆäº”å…¥åˆ°æœ€è¿‘çš„äº”åˆ†é’Ÿã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>13</span>Â  <span class='chapter-title'>æ•°å€¼</span>"
    ]
  },
  {
    "objectID": "numbers.html#é€šç”¨è½¬æ¢",
    "href": "numbers.html#é€šç”¨è½¬æ¢",
    "title": "13Â  æ•°å€¼",
    "section": "\n13.5 é€šç”¨è½¬æ¢",
    "text": "13.5 é€šç”¨è½¬æ¢\nä»¥ä¸‹å„èŠ‚æè¿°äº†ä¸€äº›é€šå¸¸ç”¨äºæ•°å€¼å‘é‡ä½†ä¹Ÿé€‚ç”¨äºæ‰€æœ‰å…¶ä»–åˆ—ç±»å‹çš„é€šç”¨è½¬æ¢ã€‚\n\n13.5.1 æ’å\ndplyr æä¾›äº†è®¸å¤šå— SQL å¯å‘çš„æ’åå‡½æ•°ï¼Œä½†ä½ åº”å§‹ç»ˆä» dplyr::min_rank() å¼€å§‹ã€‚å®ƒä½¿ç”¨å¤„ç†å¹¶åˆ—åæ¬¡çš„å…¸å‹æ–¹æ³•ï¼Œä¾‹å¦‚ï¼Œç¬¬ 1 åã€ç¬¬ 2 åã€ç¬¬ 2 åã€ç¬¬ 4 åã€‚\n\nx &lt;- c(1, 2, 2, 3, 4, NA)\nmin_rank(x)\n#&gt; [1]  1  2  2  4  5 NA\n\næ³¨æ„ï¼Œæœ€å°å€¼è·å¾—æœ€ä½çš„æ’åï¼›ä½¿ç”¨ desc(x) å¯ä»¥è®©æœ€å¤§å€¼è·å¾—æœ€ä½çš„æ’åï¼š\n\nmin_rank(desc(x))\n#&gt; [1]  5  3  3  2  1 NA\n\nå¦‚æœ min_rank() ä¸èƒ½æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œå¯ä»¥çœ‹çœ‹å®ƒçš„å˜ä½“ dplyr::row_number()ã€dplyr::dense_rank()ã€dplyr::percent_rank() å’Œ dplyr::cume_dist()ã€‚è¯¦æƒ…è¯·å‚é˜…æ–‡æ¡£ã€‚\n\ndf &lt;- tibble(x = x)\ndf |&gt; \n  mutate(\n    row_number = row_number(x),\n    dense_rank = dense_rank(x),\n    percent_rank = percent_rank(x),\n    cume_dist = cume_dist(x)\n  )\n#&gt; # A tibble: 6 Ã— 5\n#&gt;       x row_number dense_rank percent_rank cume_dist\n#&gt;   &lt;dbl&gt;      &lt;int&gt;      &lt;int&gt;        &lt;dbl&gt;     &lt;dbl&gt;\n#&gt; 1     1          1          1         0          0.2\n#&gt; 2     2          2          2         0.25       0.6\n#&gt; 3     2          3          2         0.25       0.6\n#&gt; 4     3          4          3         0.75       0.8\n#&gt; 5     4          5          4         1          1  \n#&gt; 6    NA         NA         NA        NA         NA\n\nä½ å¯ä»¥é€šè¿‡ä¸º R base çš„ rank() å‡½æ•°é€‰æ‹©åˆé€‚çš„ ties.method å‚æ•°æ¥è¾¾åˆ°è®¸å¤šç›¸åŒçš„ç»“æœï¼›ä½ å¯èƒ½è¿˜æƒ³è®¾ç½® na.last = \"keep\" ä»¥å°† NA ä¿ç•™ä¸º NAã€‚\nrow_number() ä¹Ÿå¯ä»¥åœ¨ dplyr åŠ¨è¯å†…éƒ¨ä¸å¸¦ä»»ä½•å‚æ•°ä½¿ç”¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒä¼šç»™å‡ºâ€œå½“å‰â€è¡Œçš„è¡Œå·ã€‚å½“ä¸ %% æˆ– %/% ç»“åˆä½¿ç”¨æ—¶ï¼Œè¿™å¯ä»¥æˆä¸ºå°†æ•°æ®åˆ†æˆå¤§å°ç›¸ä¼¼çš„ç»„çš„æœ‰ç”¨å·¥å…·ï¼š\n\ndf &lt;- tibble(id = 1:10)\n\ndf |&gt; \n  mutate(\n    row0 = row_number() - 1,\n    three_groups = row0 %% 3,\n    three_in_each_group = row0 %/% 3\n  )\n#&gt; # A tibble: 10 Ã— 4\n#&gt;      id  row0 three_groups three_in_each_group\n#&gt;   &lt;int&gt; &lt;dbl&gt;        &lt;dbl&gt;               &lt;dbl&gt;\n#&gt; 1     1     0            0                   0\n#&gt; 2     2     1            1                   0\n#&gt; 3     3     2            2                   0\n#&gt; 4     4     3            0                   1\n#&gt; 5     5     4            1                   1\n#&gt; 6     6     5            2                   1\n#&gt; # â„¹ 4 more rows\n\n\n13.5.2 åç§»\ndplyr::lead() å’Œ dplyr::lag() å…è®¸ä½ å¼•ç”¨â€œå½“å‰â€å€¼ä¹‹å‰æˆ–ä¹‹åçš„å€¼ã€‚å®ƒä»¬è¿”å›ä¸€ä¸ªä¸è¾“å…¥é•¿åº¦ç›¸åŒçš„å‘é‡ï¼Œåœ¨å¼€å¤´æˆ–ç»“å°¾ç”¨ NA å¡«å……ï¼š\n\nx &lt;- c(2, 5, 11, 11, 19, 35)\nlag(x)\n#&gt; [1] NA  2  5 11 11 19\nlead(x)\n#&gt; [1]  5 11 11 19 35 NA\n\n\n\nx - lag(x) ç»™å‡ºå½“å‰å€¼ä¸å‰ä¸€ä¸ªå€¼ä¹‹é—´çš„å·®å€¼ã€‚\n\nx - lag(x)\n#&gt; [1] NA  3  6  0  8 16\n\n\n\nx == lag(x) å‘Šè¯‰ä½ å½“å‰å€¼ä½•æ—¶å‘ç”Ÿå˜åŒ–ã€‚\n\nx == lag(x)\n#&gt; [1]    NA FALSE FALSE  TRUE FALSE FALSE\n\n\n\nä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•° n æ¥å‘å‰æˆ–å‘ååç§»è¶…è¿‡ä¸€ä¸ªä½ç½®ã€‚\n\n13.5.3 è¿ç»­æ ‡è¯†ç¬¦\næœ‰æ—¶ä½ å¸Œæœ›åœ¨æ¯æ¬¡æŸä¸ªäº‹ä»¶å‘ç”Ÿæ—¶å¼€å§‹ä¸€ä¸ªæ–°çš„ç»„ã€‚ä¾‹å¦‚ï¼Œåœ¨æŸ¥çœ‹ç½‘ç«™æ•°æ®æ—¶ï¼Œé€šå¸¸å¸Œæœ›å°†äº‹ä»¶åˆ†æˆä¼šè¯ï¼ˆsessionï¼‰ï¼Œå³åœ¨è·ç¦»ä¸Šæ¬¡æ´»åŠ¨è¶…è¿‡ x åˆ†é’Ÿçš„é—´éš™åå¼€å§‹ä¸€ä¸ªæ–°çš„ä¼šè¯ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ æœ‰ä¸€ä¸ªäººè®¿é—®ç½‘ç«™çš„æ—¶é—´è®°å½•ï¼š\n\nevents &lt;- tibble(\n  time = c(0, 1, 2, 3, 5, 10, 12, 15, 17, 19, 20, 27, 28, 30)\n)\n\nå¹¶ä¸”ä½ å·²ç»è®¡ç®—äº†æ¯ä¸ªäº‹ä»¶ä¹‹é—´çš„æ—¶é—´ï¼Œå¹¶åˆ¤æ–­æ˜¯å¦å­˜åœ¨è¶³å¤Ÿå¤§çš„é—´éš™ï¼š\n\nevents &lt;- events |&gt; \n  mutate(\n    diff = time - lag(time, default = first(time)),\n    has_gap = diff &gt;= 5\n  )\nevents\n#&gt; # A tibble: 14 Ã— 3\n#&gt;    time  diff has_gap\n#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;  \n#&gt; 1     0     0 FALSE  \n#&gt; 2     1     1 FALSE  \n#&gt; 3     2     1 FALSE  \n#&gt; 4     3     1 FALSE  \n#&gt; 5     5     2 FALSE  \n#&gt; 6    10     5 TRUE   \n#&gt; # â„¹ 8 more rows\n\nä½†æ˜¯æˆ‘ä»¬å¦‚ä½•ä»é‚£ä¸ªé€»è¾‘å‘é‡å¾—åˆ°ä¸€ä¸ªå¯ä»¥ç”¨äº group_by() çš„ä¸œè¥¿å‘¢ï¼Ÿæ¥è‡ª Section 13.4.7 çš„ cumsum() æ´¾ä¸Šäº†ç”¨åœºï¼Œå› ä¸ºé—´éš™ï¼Œå³ has_gap ä¸º TRUEæ—¶ï¼Œä¼šå°† group å¢åŠ ä¸€ï¼ˆSection 12.4.2ï¼‰ï¼š\n\nevents |&gt; mutate(\n  group = cumsum(has_gap)\n)\n#&gt; # A tibble: 14 Ã— 4\n#&gt;    time  diff has_gap group\n#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;   &lt;int&gt;\n#&gt; 1     0     0 FALSE       0\n#&gt; 2     1     1 FALSE       0\n#&gt; 3     2     1 FALSE       0\n#&gt; 4     3     1 FALSE       0\n#&gt; 5     5     2 FALSE       0\n#&gt; 6    10     5 TRUE        1\n#&gt; # â„¹ 8 more rows\n\nå¦ä¸€ç§åˆ›å»ºåˆ†ç»„å˜é‡çš„æ–¹æ³•æ˜¯ consecutive_id()ï¼Œå®ƒåœ¨æ¯æ¬¡å…¶å‚æ•°ä¹‹ä¸€å‘ç”Ÿå˜åŒ–æ—¶å¼€å§‹ä¸€ä¸ªæ–°ç»„ã€‚ä¾‹å¦‚ï¼Œå— è¿™ä¸ª Stack Overflow é—®é¢˜ çš„å¯å‘ï¼Œå‡è®¾ä½ æœ‰ä¸€ä¸ªåŒ…å«å¤§é‡é‡å¤å€¼çš„æ•°æ®æ¡†ï¼š\n\ndf &lt;- tibble(\n  x = c(\"a\", \"a\", \"a\", \"b\", \"c\", \"c\", \"d\", \"e\", \"a\", \"a\", \"b\", \"b\"),\n  y = c(1, 2, 3, 2, 4, 1, 3, 9, 4, 8, 10, 199)\n)\n\nå¦‚æœä½ æƒ³ä¿ç•™æ¯ä¸ªé‡å¤çš„ x çš„ç¬¬ä¸€è¡Œï¼Œä½ å¯ä»¥ä½¿ç”¨ group_by()ã€consecutive_id() å’Œ slice_head()ï¼š\n\ndf |&gt; \n  group_by(id = consecutive_id(x)) |&gt; \n  slice_head(n = 1)\n#&gt; # A tibble: 7 Ã— 3\n#&gt; # Groups:   id [7]\n#&gt;   x         y    id\n#&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;int&gt;\n#&gt; 1 a         1     1\n#&gt; 2 b         2     2\n#&gt; 3 c         4     3\n#&gt; 4 d         3     4\n#&gt; 5 e         9     5\n#&gt; 6 a         4     6\n#&gt; # â„¹ 1 more row\n\n\n13.5.4 ç»ƒä¹ \n\nä½¿ç”¨æ’åå‡½æ•°æ‰¾å‡ºå»¶è¯¯æœ€ä¸¥é‡çš„ 10 ä¸ªèˆªç­ã€‚ä½ å¸Œæœ›å¦‚ä½•å¤„ç†å¹¶åˆ—æ’åï¼Ÿä»”ç»†é˜…è¯» min_rank() çš„æ–‡æ¡£ã€‚\nå“ªæ¶é£æœºï¼ˆtailnumï¼‰çš„å‡†ç‚¹è®°å½•æœ€å·®ï¼Ÿ\nå¦‚æœä½ æƒ³å°½å¯èƒ½é¿å…å»¶è¯¯ï¼Œåº”è¯¥åœ¨ä¸€å¤©ä¸­çš„ä»€ä¹ˆæ—¶é—´é£è¡Œï¼Ÿ\nflights |&gt; group_by(dest) |&gt; filter(row_number() &lt; 4) ä¼šåšä»€ä¹ˆï¼Ÿflights |&gt; group_by(dest) |&gt; filter(row_number(dep_delay) &lt; 4) åˆä¼šåšä»€ä¹ˆï¼Ÿ\nå¯¹äºæ¯ä¸ªç›®çš„åœ°ï¼Œè®¡ç®—æ€»çš„å»¶è¯¯åˆ†é’Ÿæ•°ã€‚å¯¹äºæ¯ä¸ªèˆªç­ï¼Œè®¡ç®—å…¶å»¶è¯¯å å…¶ç›®çš„åœ°æ€»å»¶è¯¯çš„æ¯”ä¾‹ã€‚\n\nå»¶è¯¯é€šå¸¸åœ¨æ—¶é—´ä¸Šæ˜¯ç›¸å…³çš„ï¼šå³ä½¿å¯¼è‡´åˆå§‹å»¶è¯¯çš„é—®é¢˜å·²ç»è§£å†³ï¼Œåç»­çš„èˆªç­ä¹Ÿä¼šè¢«å»¶è¯¯ï¼Œä»¥ä¾¿è®©è¾ƒæ—©çš„èˆªç­å…ˆè¡Œç¦»å¼€ã€‚ä½¿ç”¨ lag()ï¼Œæ¢è®¨ä¸€ä¸ªå°æ—¶çš„å¹³å‡èˆªç­å»¶è¯¯ä¸å‰ä¸€ä¸ªå°æ—¶çš„å¹³å‡å»¶è¯¯ä¹‹é—´çš„å…³ç³»ã€‚\n\nflights |&gt; \n  mutate(hour = dep_time %/% 100) |&gt; \n  group_by(year, month, day, hour) |&gt; \n  summarize(\n    dep_delay = mean(dep_delay, na.rm = TRUE),\n    n = n(),\n    .groups = \"drop\"\n  ) |&gt; \n  filter(n &gt; 5)\n\n\næŸ¥çœ‹æ¯ä¸ªç›®çš„åœ°ã€‚ä½ èƒ½æ‰¾åˆ°é£è¡Œé€Ÿåº¦å¯ç–‘çš„èˆªç­å—ï¼ˆå³å¯èƒ½ä»£è¡¨æ•°æ®è¾“å…¥é”™è¯¯çš„èˆªç­ï¼‰ï¼Ÿè®¡ç®—ä¸€ä¸ªèˆªç­çš„é£è¡Œæ—¶é—´ç›¸å¯¹äºåˆ°è¯¥ç›®çš„åœ°çš„æœ€çŸ­é£è¡Œæ—¶é—´çš„æ¯”ä¾‹ã€‚å“ªäº›èˆªç­åœ¨ç©ºä¸­å»¶è¯¯æœ€ä¸¥é‡ï¼Ÿ\næ‰¾å‡ºæ‰€æœ‰ç”±è‡³å°‘ä¸¤å®¶èˆªç©ºå…¬å¸æ‰§é£çš„ç›®çš„åœ°ã€‚ä½¿ç”¨è¿™äº›ç›®çš„åœ°ï¼Œæ ¹æ®å®ƒä»¬åœ¨åŒä¸€ç›®çš„åœ°çš„è¡¨ç°ï¼Œä¸ºèˆªç©ºå…¬å¸åˆ›å»ºä¸€ä¸ªç›¸å¯¹æ’åã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>13</span>Â  <span class='chapter-title'>æ•°å€¼</span>"
    ]
  },
  {
    "objectID": "numbers.html#æ•°å€¼æ±‡æ€»",
    "href": "numbers.html#æ•°å€¼æ±‡æ€»",
    "title": "13Â  æ•°å€¼",
    "section": "\n13.6 æ•°å€¼æ±‡æ€»",
    "text": "13.6 æ•°å€¼æ±‡æ€»\nä»…ä½¿ç”¨æˆ‘ä»¬å·²ç»ä»‹ç»è¿‡çš„è®¡æ•°ã€å‡å€¼å’Œæ€»å’Œå°±å¯ä»¥è®©ä½ èµ°å¾—å¾ˆè¿œï¼Œä½† R æä¾›äº†è®¸å¤šå…¶ä»–æœ‰ç”¨çš„æ±‡æ€»å‡½æ•°ã€‚è¿™é‡Œæ˜¯ä¸€äº›ä½ å¯èƒ½ä¼šè§‰å¾—æœ‰ç”¨çš„é€‰æ‹©ã€‚\n\n13.6.1 ä¸­å¿ƒä½ç½®\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸»è¦ä½¿ç”¨ mean() æ¥æ¦‚æ‹¬ä¸€ä¸ªæ•°å€¼å‘é‡çš„ä¸­å¿ƒä½ç½®ã€‚æ­£å¦‚æˆ‘ä»¬åœ¨ Section 3.6 ä¸­çœ‹åˆ°çš„ï¼Œå› ä¸ºå‡å€¼æ˜¯æ€»å’Œé™¤ä»¥è®¡æ•°ï¼Œæ‰€ä»¥å®ƒå¯¹å°‘æ•°å¼‚å¸¸é«˜æˆ–ä½çš„å€¼å¾ˆæ•æ„Ÿã€‚ä¸€ä¸ªæ›¿ä»£æ–¹æ³•æ˜¯ä½¿ç”¨ median()ï¼Œå®ƒæ‰¾åˆ°ä¸€ä¸ªä½äºå‘é‡â€œä¸­é—´â€çš„å€¼ï¼Œå³ 50% çš„å€¼åœ¨å®ƒä¹‹ä¸Šï¼Œ50% çš„å€¼åœ¨å®ƒä¹‹ä¸‹ã€‚æ ¹æ®ä½ æ„Ÿå…´è¶£çš„å˜é‡çš„åˆ†å¸ƒå½¢çŠ¶ï¼Œå‡å€¼æˆ–ä¸­ä½æ•°å¯èƒ½æ˜¯è¡¡é‡ä¸­å¿ƒä½ç½®çš„æ›´å¥½æŒ‡æ ‡ã€‚ä¾‹å¦‚ï¼Œå¯¹äºå¯¹ç§°åˆ†å¸ƒï¼Œæˆ‘ä»¬é€šå¸¸æŠ¥å‘Šå‡å€¼ï¼Œè€Œå¯¹äºåæ€åˆ†å¸ƒï¼Œæˆ‘ä»¬é€šå¸¸æŠ¥å‘Šä¸­ä½æ•°ã€‚\nFigureÂ 13.2 æ¯”è¾ƒäº†æ¯ä¸ªç›®çš„åœ°å‡ºå‘å»¶è¯¯ï¼ˆåˆ†é’Ÿï¼‰çš„å‡å€¼ä¸ä¸­ä½æ•°ã€‚ä¸­ä½æ•°å»¶è¯¯æ€»æ˜¯å°äºå‡å€¼å»¶è¯¯ï¼Œå› ä¸ºèˆªç­æœ‰æ—¶ä¼šæ™šç‚¹æ•°å°æ—¶ï¼Œä½†ä»ä¸ä¼šææ—©æ•°å°æ—¶å‡ºå‘ã€‚\n\nflights |&gt;\n  group_by(year, month, day) |&gt;\n  summarize(\n    mean = mean(dep_delay, na.rm = TRUE),\n    median = median(dep_delay, na.rm = TRUE),\n    n = n(),\n    .groups = \"drop\"\n  ) |&gt; \n  ggplot(aes(x = mean, y = median)) + \n  geom_abline(slope = 1, intercept = 0, color = \"white\", linewidth = 2) +\n  geom_point()\n\n\n\n\n\n\nFigureÂ 13.2: ä¸€å¼ æ•£ç‚¹å›¾ï¼Œæ˜¾ç¤ºäº†ç”¨ä¸­ä½æ•°ä»£æ›¿å‡å€¼æ¥æ±‡æ€»æ¯æ—¥å‡ºå‘å»¶è¯¯çš„å·®å¼‚ã€‚\n\n\n\n\nä½ å¯èƒ½ä¹Ÿæƒ³çŸ¥é“ä¼—æ•°ï¼ˆmodeï¼‰ï¼Œå³æœ€å¸¸è§çš„å€¼ã€‚è¿™æ˜¯ä¸€ä¸ªåªåœ¨éå¸¸ç®€å•çš„æƒ…å†µä¸‹æ‰å¥½ç”¨çš„æ±‡æ€»ç»Ÿè®¡é‡ï¼ˆè¿™å¯èƒ½æ˜¯ä½ åœ¨é«˜ä¸­å­¦åˆ°å®ƒçš„åŸå› ï¼‰ï¼Œä½†å®ƒå¯¹è®¸å¤šçœŸå®æ•°æ®é›†æ•ˆæœä¸ä½³ã€‚å¦‚æœæ•°æ®æ˜¯ç¦»æ•£çš„ï¼Œå¯èƒ½ä¼šæœ‰å¤šä¸ªæœ€å¸¸è§çš„å€¼ï¼›å¦‚æœæ•°æ®æ˜¯è¿ç»­çš„ï¼Œå¯èƒ½æ ¹æœ¬æ²¡æœ‰æœ€å¸¸è§çš„å€¼ï¼Œå› ä¸ºæ¯ä¸ªå€¼éƒ½ç•¥æœ‰ä¸åŒã€‚ç”±äºè¿™äº›åŸå› ï¼Œç»Ÿè®¡å­¦å®¶å€¾å‘äºä¸ä½¿ç”¨ä¼—æ•°ï¼ŒR base ä¸­ä¹Ÿæ²¡æœ‰åŒ…å«ä¼—æ•°å‡½æ•°2ã€‚\n\n13.6.2 æœ€å°å€¼ã€æœ€å¤§å€¼å’Œåˆ†ä½æ•°\nå¦‚æœä½ æ„Ÿå…´è¶£çš„ä¸æ˜¯ä¸­å¿ƒä½ç½®å‘¢ï¼Ÿmin() å’Œ max() ä¼šç»™ä½ æœ€å¤§å€¼å’Œæœ€å°å€¼ã€‚å¦ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·æ˜¯ quantile()ï¼Œå®ƒæ˜¯ä¸­ä½æ•°çš„æ¨å¹¿ï¼šquantile(x, 0.25) ä¼šæ‰¾åˆ° x ä¸­å¤§äº 25% å€¼çš„å€¼ï¼Œquantile(x, 0.5) ç­‰åŒäºä¸­ä½æ•°ï¼Œè€Œ quantile(x, 0.95) ä¼šæ‰¾åˆ°å¤§äº 95% å€¼çš„å€¼ã€‚\nå¯¹äº flights æ•°æ®ï¼Œä½ å¯èƒ½æƒ³æŸ¥çœ‹å»¶è¯¯çš„ 95% åˆ†ä½æ•°ï¼Œè€Œä¸æ˜¯æœ€å¤§å€¼ï¼Œå› ä¸ºå®ƒä¼šå¿½ç•¥é‚£ 5% æœ€ä¸ºæç«¯çš„å»¶è¯¯èˆªç­ã€‚\n\nflights |&gt;\n  group_by(year, month, day) |&gt;\n  summarize(\n    max = max(dep_delay, na.rm = TRUE),\n    q95 = quantile(dep_delay, 0.95, na.rm = TRUE),\n    .groups = \"drop\"\n  )\n#&gt; # A tibble: 365 Ã— 5\n#&gt;    year month   day   max   q95\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1  2013     1     1   853  70.1\n#&gt; 2  2013     1     2   379  85  \n#&gt; 3  2013     1     3   291  68  \n#&gt; 4  2013     1     4   288  60  \n#&gt; 5  2013     1     5   327  41  \n#&gt; 6  2013     1     6   202  51  \n#&gt; # â„¹ 359 more rows\n\n\n13.6.3 ç¦»æ•£ç¨‹åº¦\næœ‰æ—¶ä½ ä¸å¤ªå…³å¿ƒæ•°æ®çš„ä¸»ä½“åœ¨å“ªé‡Œï¼Œè€Œæ˜¯å…³å¿ƒå®ƒæ˜¯å¦‚ä½•åˆ†å¸ƒçš„ã€‚ä¸¤ä¸ªå¸¸ç”¨çš„æ±‡æ€»ç»Ÿè®¡é‡æ˜¯æ ‡å‡†å·® sd(x) å’Œå››åˆ†ä½è· IQR()ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œä¸è§£é‡Š sd()ï¼Œå› ä¸ºä½ å¯èƒ½å·²ç»ç†Ÿæ‚‰å®ƒäº†ï¼Œä½† IQR() å¯èƒ½å¯¹ä½ æ¥è¯´æ˜¯æ–°çš„â€”â€”å®ƒæ˜¯ quantile(x, 0.75) - quantile(x, 0.25)ï¼Œå¹¶å‘Šè¯‰ä½ åŒ…å«ä¸­é—´ 50% æ•°æ®çš„èŒƒå›´ã€‚\næˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥æ­ç¤º flights æ•°æ®ä¸­çš„ä¸€ä¸ªå°å°çš„å¥‡ç‰¹ä¹‹å¤„ã€‚ä½ å¯èƒ½æœŸæœ›å§‹å‘åœ°å’Œç›®çš„åœ°ä¹‹é—´çš„è·ç¦»ç¦»æ•£ç¨‹åº¦ä¸ºé›¶ï¼Œå› ä¸ºæœºåœºæ€»æ˜¯åœ¨åŒä¸€ä¸ªåœ°æ–¹ã€‚ä½†ä¸‹é¢çš„ä»£ç æ­ç¤ºäº†æœºåœº EGE çš„ä¸€ä¸ªæ•°æ®å¥‡ç‰¹ä¹‹å¤„ï¼š\n\nflights |&gt; \n  group_by(origin, dest) |&gt; \n  summarize(\n    distance_iqr = IQR(distance), \n    n = n(),\n    .groups = \"drop\"\n  ) |&gt; \n  filter(distance_iqr &gt; 0)\n#&gt; # A tibble: 2 Ã— 4\n#&gt;   origin dest  distance_iqr     n\n#&gt;   &lt;chr&gt;  &lt;chr&gt;        &lt;dbl&gt; &lt;int&gt;\n#&gt; 1 EWR    EGE              1   110\n#&gt; 2 JFK    EGE              1   103\n\n\n13.6.4 åˆ†å¸ƒ\nå€¼å¾—è®°ä½çš„æ˜¯ï¼Œä¸Šé¢æè¿°çš„æ‰€æœ‰æ±‡æ€»ç»Ÿè®¡é‡éƒ½æ˜¯å°†åˆ†å¸ƒç®€åŒ–ä¸ºå•ä¸ªæ•°å­—çš„ä¸€ç§æ–¹å¼ã€‚è¿™æ„å‘³ç€å®ƒä»¬ä»æ ¹æœ¬ä¸Šæ˜¯ç®€åŒ–çš„ï¼Œå¦‚æœä½ é€‰æ‹©äº†é”™è¯¯çš„æ±‡æ€»ç»Ÿè®¡é‡ï¼Œä½ å¾ˆå®¹æ˜“ä¼šå¿½ç•¥ç»„é—´çš„é‡è¦å·®å¼‚ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨ç¡®å®šä½ çš„æ±‡æ€»ç»Ÿè®¡é‡ä¹‹å‰ï¼Œæ€»æ˜¯å…ˆå°†åˆ†å¸ƒå¯è§†åŒ–æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚\nFigureÂ 13.3 æ˜¾ç¤ºäº†å‡ºå‘å»¶è¯¯çš„æ€»ä½“åˆ†å¸ƒã€‚åˆ†å¸ƒéå¸¸åæ–œï¼Œä»¥è‡³äºæˆ‘ä»¬å¿…é¡»æ”¾å¤§æ‰èƒ½çœ‹åˆ°æ•°æ®çš„ä¸»ä½“éƒ¨åˆ†ã€‚è¿™è¡¨æ˜å‡å€¼ä¸å¤ªå¯èƒ½æ˜¯ä¸€ä¸ªå¥½çš„æ±‡æ€»æŒ‡æ ‡ï¼Œæˆ‘ä»¬å¯èƒ½æ›´å€¾å‘äºä½¿ç”¨ä¸­ä½æ•°ã€‚\n\n\n\n\n\n\n\nFigureÂ 13.3: ï¼ˆå·¦å›¾ï¼‰å®Œæ•´æ•°æ®çš„ç›´æ–¹å›¾æåº¦åæ–œï¼Œå¾ˆéš¾çœ‹æ¸…ä»»ä½•ç»†èŠ‚ã€‚ ï¼ˆå³å›¾ï¼‰æ”¾å¤§åˆ°å»¶è¯¯å°äºä¸¤å°æ—¶çš„èŒƒå›´ï¼Œå¯ä»¥çœ‹æ¸…å¤§éƒ¨åˆ†è§‚æµ‹å€¼çš„æƒ…å†µã€‚\n\n\n\n\næ£€æŸ¥å­ç»„çš„åˆ†å¸ƒæ˜¯å¦ä¸æ•´ä½“ç›¸ä¼¼ä¹Ÿæ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚åœ¨ä¸‹é¢çš„å›¾ä¸­ï¼Œå åŠ äº† 365 ä¸ª dep_delay çš„é¢‘ç‡å¤šè¾¹å½¢å›¾ï¼Œæ¯å¤©ä¸€ä¸ªã€‚è¿™äº›åˆ†å¸ƒä¼¼ä¹éµå¾ªä¸€ä¸ªå…±åŒçš„æ¨¡å¼ï¼Œè¿™è¡¨æ˜å¯¹æ¯å¤©ä½¿ç”¨ç›¸åŒçš„æ±‡æ€»ç»Ÿè®¡é‡æ˜¯å¯ä»¥çš„ã€‚\n\nflights |&gt;\n  filter(dep_delay &lt; 120) |&gt; \n  ggplot(aes(x = dep_delay, group = interaction(day, month))) + \n  geom_freqpoly(binwidth = 5, alpha = 1/5)\n\n\n\n\n\n\n\nä¸è¦å®³æ€•æ¢ç´¢ä¸“é—¨ä¸ºä½ æ­£åœ¨å¤„ç†çš„æ•°æ®é‡èº«å®šåˆ¶çš„è‡ªå®šä¹‰æ±‡æ€»ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™å¯èƒ½æ„å‘³ç€åˆ†åˆ«æ±‡æ€»ææ—©å‡ºå‘çš„èˆªç­å’Œæ™šç‚¹å‡ºå‘çš„èˆªç­ï¼Œæˆ–è€…é‰´äºæ•°å€¼åæ–œä¸¥é‡ï¼Œä½ å¯èƒ½ä¼šå°è¯•å¯¹æ•°è½¬æ¢ã€‚æœ€åï¼Œä¸è¦å¿˜è®°ä½ åœ¨ Section 3.6 ä¸­å­¦åˆ°çš„ï¼šåœ¨åˆ›å»ºæ•°å€¼æ±‡æ€»æ—¶ï¼Œæœ€å¥½åŒ…å«æ¯ä¸ªç»„ä¸­çš„è§‚æµ‹æ•°é‡ã€‚\n\n13.6.5 ä½ç½®\nè¿˜æœ‰æœ€åä¸€ç§å¯¹æ•°å€¼å‘é‡å¾ˆæœ‰ç”¨ï¼Œä½†ä¹Ÿé€‚ç”¨äºæ‰€æœ‰å…¶ä»–ç±»å‹å€¼çš„æ±‡æ€»ï¼šæå–ç‰¹å®šä½ç½®çš„å€¼ï¼šfirst(x)ã€last(x) å’Œ nth(x, n)ã€‚\nä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°æ¯å¤©çš„ç¬¬ä¸€æ¬¡ã€ç¬¬äº”æ¬¡å’Œæœ€åä¸€æ¬¡å‡ºå‘ï¼š\n\nflights |&gt; \n  group_by(year, month, day) |&gt; \n  summarize(\n    first_dep = first(dep_time, na_rm = TRUE), \n    fifth_dep = nth(dep_time, 5, na_rm = TRUE),\n    last_dep = last(dep_time, na_rm = TRUE)\n  )\n#&gt; `summarise()` has grouped output by 'year', 'month'. You can override using\n#&gt; the `.groups` argument.\n#&gt; # A tibble: 365 Ã— 6\n#&gt; # Groups:   year, month [12]\n#&gt;    year month   day first_dep fifth_dep last_dep\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;int&gt;     &lt;int&gt;    &lt;int&gt;\n#&gt; 1  2013     1     1       517       554     2356\n#&gt; 2  2013     1     2        42       535     2354\n#&gt; 3  2013     1     3        32       520     2349\n#&gt; 4  2013     1     4        25       531     2358\n#&gt; 5  2013     1     5        14       534     2357\n#&gt; 6  2013     1     6        16       555     2355\n#&gt; # â„¹ 359 more rows\n\nï¼ˆæ³¨æ„ï¼šå› ä¸º dplyr å‡½æ•°ä½¿ç”¨ _ æ¥åˆ†éš”å‡½æ•°å’Œå‚æ•°åç§°çš„ç»„æˆéƒ¨åˆ†ï¼Œæ‰€ä»¥è¿™äº›å‡½æ•°ä½¿ç”¨ na_rm è€Œä¸æ˜¯ na.rmã€‚ï¼‰\nå¦‚æœä½ ç†Ÿæ‚‰ [ï¼ˆæˆ‘ä»¬å°†åœ¨ Section 27.2 ä¸­å›è¿‡å¤´æ¥è®¨è®ºï¼‰ï¼Œä½ å¯èƒ½ä¼šæƒ³çŸ¥é“ä½ æ˜¯å¦çœŸçš„éœ€è¦è¿™äº›å‡½æ•°ã€‚æœ‰ä¸‰ä¸ªåŸå› ï¼šdefault å‚æ•°å…è®¸ä½ åœ¨æŒ‡å®šä½ç½®ä¸å­˜åœ¨æ—¶æä¾›ä¸€ä¸ªé»˜è®¤å€¼ï¼Œorder_by å‚æ•°å…è®¸ä½ å±€éƒ¨è¦†ç›–è¡Œçš„é¡ºåºï¼Œè€Œ na_rm å‚æ•°å…è®¸ä½ åˆ é™¤ç¼ºå¤±å€¼ã€‚\næå–ä½ç½®ä¸Šçš„å€¼ä¸æŒ‰æ’åç­›é€‰æ˜¯äº’è¡¥çš„ã€‚ç­›é€‰ä¼šç»™ä½ æ‰€æœ‰çš„å˜é‡ï¼Œæ¯ä¸ªè§‚æµ‹å€¼å ä¸€è¡Œï¼š\n\nflights |&gt; \n  group_by(year, month, day) |&gt; \n  mutate(r = min_rank(sched_dep_time)) |&gt; \n  filter(r %in% c(1, max(r)))\n#&gt; # A tibble: 1,195 Ã— 20\n#&gt; # Groups:   year, month, day [365]\n#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1  2013     1     1      517            515         2      830            819\n#&gt; 2  2013     1     1     2353           2359        -6      425            445\n#&gt; 3  2013     1     1     2353           2359        -6      418            442\n#&gt; 4  2013     1     1     2356           2359        -3      425            437\n#&gt; 5  2013     1     2       42           2359        43      518            442\n#&gt; 6  2013     1     2      458            500        -2      703            650\n#&gt; # â„¹ 1,189 more rows\n#&gt; # â„¹ 12 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, â€¦\n\n\n13.6.6 ä¸ mutate() ç»“åˆä½¿ç”¨\né¡¾åæ€ä¹‰ï¼Œæ±‡æ€»å‡½æ•°é€šå¸¸ä¸ summarize() é…å¯¹ä½¿ç”¨ã€‚ç„¶è€Œï¼Œç”±äºæˆ‘ä»¬åœ¨ Section 13.4.1 ä¸­è®¨è®ºçš„å¾ªç¯è¡¥é½è§„åˆ™ï¼Œå®ƒä»¬ä¹Ÿå¯ä»¥ä¸ mutate() æœ‰æ•ˆåœ°é…å¯¹ä½¿ç”¨ï¼Œç‰¹åˆ«æ˜¯å½“ä½ æƒ³è¦è¿›è¡ŒæŸç§åˆ†ç»„æ ‡å‡†åŒ–æ—¶ã€‚ä¾‹å¦‚ï¼š\n\n\nx / sum(x) è®¡ç®—å æ€»æ•°çš„æ¯”ä¾‹ã€‚\n\n(x - mean(x)) / sd(x) è®¡ç®—ä¸€ä¸ª Z åˆ†æ•°ï¼ˆæ ‡å‡†åŒ–ä¸ºå‡å€¼ä¸º 0ï¼Œæ ‡å‡†å·®ä¸º 1ï¼‰ã€‚\n\n(x - min(x)) / (max(x) - min(x)) æ ‡å‡†åŒ–åˆ° [0, 1] çš„èŒƒå›´ã€‚\n\nx / first(x) è®¡ç®—ä¸€ä¸ªåŸºäºç¬¬ä¸€ä¸ªè§‚æµ‹å€¼çš„æŒ‡æ•°ã€‚\n\n13.6.7 ç»ƒä¹ \n\né›†æ€å¹¿ç›Šï¼Œæƒ³å‡ºè‡³å°‘ 5 ç§ä¸åŒçš„æ–¹æ³•æ¥è¯„ä¼°ä¸€ç»„èˆªç­çš„å…¸å‹å»¶è¯¯ç‰¹å¾ã€‚ä»€ä¹ˆæ—¶å€™ mean() æœ‰ç”¨ï¼Ÿä»€ä¹ˆæ—¶å€™ median() æœ‰ç”¨ï¼Ÿä»€ä¹ˆæ—¶å€™ä½ å¯èƒ½æƒ³ç”¨åˆ«çš„æ–¹æ³•ï¼Ÿä½ åº”è¯¥ä½¿ç”¨åˆ°è¾¾å»¶è¯¯è¿˜æ˜¯å‡ºå‘å»¶è¯¯ï¼Ÿä¸ºä»€ä¹ˆä½ å¯èƒ½æƒ³ä½¿ç”¨æ¥è‡ª planes çš„æ•°æ®ï¼Ÿ\nå“ªäº›ç›®çš„åœ°çš„ç©ºé€Ÿå˜åŒ–æœ€å¤§ï¼Ÿ\nåˆ›å»ºä¸€ä¸ªå›¾è¡¨æ¥è¿›ä¸€æ­¥æ¢ç´¢ EGE çš„å¥‡é‡ã€‚ä½ èƒ½æ‰¾åˆ°ä»»ä½•è¯æ®è¡¨æ˜æœºåœºæ¬è¿äº†å—ï¼Ÿä½ èƒ½æ‰¾åˆ°å¦ä¸€ä¸ªå¯èƒ½è§£é‡Šè¿™ç§å·®å¼‚çš„å˜é‡å—ï¼Ÿ",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>13</span>Â  <span class='chapter-title'>æ•°å€¼</span>"
    ]
  },
  {
    "objectID": "numbers.html#æ€»ç»“",
    "href": "numbers.html#æ€»ç»“",
    "title": "13Â  æ•°å€¼",
    "section": "\n13.7 æ€»ç»“",
    "text": "13.7 æ€»ç»“\nä½ å·²ç»ç†Ÿæ‚‰äº†è®¸å¤šå¤„ç†æ•°å€¼çš„å·¥å…·ï¼Œåœ¨é˜…è¯»æœ¬ç« åï¼Œä½ ç°åœ¨çŸ¥é“å¦‚ä½•åœ¨ R ä¸­ä½¿ç”¨å®ƒä»¬ã€‚ä½ è¿˜å­¦åˆ°äº†ä¸€äº›æœ‰ç”¨çš„é€šç”¨è½¬æ¢ï¼Œè¿™äº›è½¬æ¢é€šå¸¸ï¼ˆä½†ä¸ä»…é™äºï¼‰åº”ç”¨äºæ•°å€¼å‘é‡ï¼Œå¦‚æ’åå’Œåç§»ã€‚æœ€åï¼Œä½ è¯¦ç»†ç ”ç©¶äº†ä¸€äº›æ•°å€¼æ±‡æ€»æ–¹æ³•ï¼Œå¹¶è®¨è®ºäº†ä½ åº”è¯¥è€ƒè™‘çš„ä¸€äº›ç»Ÿè®¡æŒ‘æˆ˜ã€‚\nåœ¨æ¥ä¸‹æ¥çš„ä¸¤ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ä½¿ç”¨ stringr åŒ…å¤„ç†å­—ç¬¦ä¸²ã€‚å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„ä¸»é¢˜ï¼Œæ‰€ä»¥å®ƒä»¬å äº†ä¸¤ç« ï¼Œä¸€ç« æ˜¯å…³äºå­—ç¬¦ä¸²çš„åŸºç¡€çŸ¥è¯†ï¼Œå¦ä¸€ç« æ˜¯å…³äºæ­£åˆ™è¡¨è¾¾å¼ã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>13</span>Â  <span class='chapter-title'>æ•°å€¼</span>"
    ]
  },
  {
    "objectID": "numbers.html#footnotes",
    "href": "numbers.html#footnotes",
    "title": "13Â  æ•°å€¼",
    "section": "",
    "text": "ggplot2 åœ¨ cut_interval()ã€cut_number() å’Œ cut_width() ä¸­ä¸ºå¸¸è§æƒ…å†µæä¾›äº†ä¸€äº›è¾…åŠ©å‡½æ•°ã€‚æ‰¿è®¤ ggplot2 æ˜¯è¿™äº›å‡½æ•°å­˜åœ¨çš„ä¸€ä¸ªå¥‡æ€ªçš„åœ°æ–¹ï¼Œä½†å®ƒä»¬ä½œä¸ºç›´æ–¹å›¾è®¡ç®—çš„ä¸€éƒ¨åˆ†å¾ˆæœ‰ç”¨ï¼Œå¹¶ä¸”åœ¨ tidyverse çš„ä»»ä½•å…¶ä»–éƒ¨åˆ†å­˜åœ¨ä¹‹å‰å°±å·²ç»ç¼–å†™å¥½äº†ã€‚â†©ï¸\nmode() å‡½æ•°åšçš„æ˜¯å®Œå…¨ä¸åŒçš„äº‹æƒ…ï¼â†©ï¸",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>13</span>Â  <span class='chapter-title'>æ•°å€¼</span>"
    ]
  },
  {
    "objectID": "strings.html",
    "href": "strings.html",
    "title": "14Â  å­—ç¬¦ä¸²",
    "section": "",
    "text": "14.1 å¼•è¨€\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ å·²ç»ä½¿ç”¨äº†å¾ˆå¤šå­—ç¬¦ä¸²ï¼Œä½†å¯¹ç»†èŠ‚çŸ¥ä¹‹ç”šå°‘ã€‚ç°åœ¨æ˜¯æ—¶å€™æ·±å…¥äº†è§£å®ƒä»¬ï¼Œå­¦ä¹ å­—ç¬¦ä¸²çš„è¿ä½œåŸç†ï¼Œå¹¶æŒæ¡ä¸€äº›ä½ å¯ä»¥ä½¿ç”¨çš„å¼ºå¤§å­—ç¬¦ä¸²å¤„ç†å·¥å…·ã€‚\næˆ‘ä»¬å°†ä»åˆ›å»ºå­—ç¬¦ä¸²å’Œå­—ç¬¦å‘é‡çš„ç»†èŠ‚å¼€å§‹ã€‚ç„¶åï¼Œä½ å°†æ·±å…¥å­¦ä¹ å¦‚ä½•ä»æ•°æ®åˆ›å»ºå­—ç¬¦ä¸²ï¼Œä»¥åŠåè¿‡æ¥ï¼šå¦‚ä½•ä»æ•°æ®ä¸­æå–å­—ç¬¦ä¸²ã€‚æ¥ç€ï¼Œæˆ‘ä»¬å°†è®¨è®ºå¤„ç†å•ä¸ªå­—æ¯çš„å·¥å…·ã€‚æœ¬ç« æœ€åä¼šä»‹ç»å¤„ç†å•ä¸ªå­—æ¯çš„å‡½æ•°ï¼Œå¹¶ç®€è¦è®¨è®ºåœ¨å¤„ç†å…¶ä»–è¯­è¨€æ—¶ï¼Œä½ ä»è‹±è¯­ä¸­è·å¾—çš„æœŸæœ›å¯èƒ½ä¼šå¦‚ä½•è¯¯å¯¼ä½ ã€‚\næˆ‘ä»¬å°†åœ¨ä¸‹ä¸€ç« ç»§ç»­å­¦ä¹ å­—ç¬¦ä¸²ï¼Œå±Šæ—¶ä½ å°†å­¦åˆ°æ›´å¤šå…³äºæ­£åˆ™è¡¨è¾¾å¼çš„å¼ºå¤§åŠŸèƒ½ã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>14</span>Â  <span class='chapter-title'>å­—ç¬¦ä¸²</span>"
    ]
  },
  {
    "objectID": "strings.html#å¼•è¨€",
    "href": "strings.html#å¼•è¨€",
    "title": "14Â  å­—ç¬¦ä¸²",
    "section": "",
    "text": "14.1.1 å…ˆå†³æ¡ä»¶\nåœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ stringr åŒ…ä¸­çš„å‡½æ•°ï¼Œå®ƒæ˜¯æ ¸å¿ƒ tidyverse çš„ä¸€éƒ¨åˆ†ã€‚æˆ‘ä»¬è¿˜å°†ä½¿ç”¨ babynames æ•°æ®ï¼Œå› ä¸ºå®ƒæä¾›äº†ä¸€äº›æœ‰è¶£çš„å­—ç¬¦ä¸²ä¾›æˆ‘ä»¬æ“ä½œã€‚\n\nlibrary(tidyverse)\nlibrary(babynames)\n\nä½ å¯ä»¥å¾ˆå¿«åˆ†è¾¨å‡ºä½ æ­£åœ¨ä½¿ç”¨çš„æ˜¯ä¸€ä¸ª stringr å‡½æ•°ï¼Œå› ä¸ºæ‰€æœ‰ stringr å‡½æ•°éƒ½ä»¥ str_ å¼€å¤´ã€‚å¦‚æœä½ ä½¿ç”¨ RStudioï¼Œè¿™ä¸€ç‚¹ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºè¾“å…¥ str_ ä¼šè§¦å‘è‡ªåŠ¨è¡¥å…¨ï¼Œè®©ä½ å›æƒ³èµ·å¯ç”¨çš„å‡½æ•°ã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>14</span>Â  <span class='chapter-title'>å­—ç¬¦ä¸²</span>"
    ]
  },
  {
    "objectID": "strings.html#åˆ›å»ºå­—ç¬¦ä¸²",
    "href": "strings.html#åˆ›å»ºå­—ç¬¦ä¸²",
    "title": "14Â  å­—ç¬¦ä¸²",
    "section": "\n14.2 åˆ›å»ºå­—ç¬¦ä¸²",
    "text": "14.2 åˆ›å»ºå­—ç¬¦ä¸²\næˆ‘ä»¬åœ¨æœ¬ä¹¦çš„å‰é¢éƒ¨åˆ†å·²ç»é¡ºä¾¿åˆ›å»ºè¿‡å­—ç¬¦ä¸²ï¼Œä½†æ²¡æœ‰è®¨è®ºç»†èŠ‚ã€‚é¦–å…ˆï¼Œä½ å¯ä»¥ä½¿ç”¨å•å¼•å· (') æˆ–åŒå¼•å· (\") æ¥åˆ›å»ºå­—ç¬¦ä¸²ã€‚è¿™ä¸¤è€…åœ¨è¡Œä¸ºä¸Šæ²¡æœ‰åŒºåˆ«ï¼Œå› æ­¤ä¸ºäº†ä¿æŒä¸€è‡´æ€§ï¼Œtidyverse é£æ ¼æŒ‡å— å»ºè®®ä½¿ç”¨ \"ï¼Œé™¤éå­—ç¬¦ä¸²ä¸­åŒ…å«å¤šä¸ª \"ã€‚\n\nstring1 &lt;- \"This is a string\"\nstring2 &lt;- 'If I want to include a \"quote\" inside a string, I use single quotes'\n\nå¦‚æœä½ å¿˜è®°å…³é—­å¼•å·ï¼Œä½ ä¼šçœ‹åˆ° +ï¼Œå³ç»­è¡Œæç¤ºç¬¦ï¼š\n&gt; \"This is a string without a closing quote\n+ \n+ \n+ HELP I'M STUCK IN A STRING\nå¦‚æœå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œè€Œä½ åˆä¸çŸ¥é“è¯¥å…³é—­å“ªä¸ªå¼•å·ï¼Œå¯ä»¥æŒ‰ Escape é”®å–æ¶ˆå¹¶é‡è¯•ã€‚\n\n14.2.1 è½¬ä¹‰\nè¦åœ¨å­—ç¬¦ä¸²ä¸­åŒ…å«å­—é¢æ„ä¹‰ä¸Šçš„å•å¼•å·æˆ–åŒå¼•å·ï¼Œä½ å¯ä»¥ä½¿ç”¨ \\ æ¥â€œè½¬ä¹‰â€å®ƒï¼š\n\ndouble_quote &lt;- \"\\\"\" # æˆ–è€… '\"'\nsingle_quote &lt;- '\\'' # æˆ–è€… \"'\"\n\næ‰€ä»¥ï¼Œå¦‚æœä½ æƒ³åœ¨å­—ç¬¦ä¸²ä¸­åŒ…å«ä¸€ä¸ªå­—é¢æ„ä¹‰ä¸Šçš„åæ–œæ ï¼Œä½ éœ€è¦å¯¹å®ƒè¿›è¡Œè½¬ä¹‰ï¼š\"\\\\\"ï¼š\n\nbackslash &lt;- \"\\\\\"\n\nè¯·æ³¨æ„ï¼Œå­—ç¬¦ä¸²çš„æ‰“å°è¡¨ç¤ºå½¢å¼ä¸å­—ç¬¦ä¸²æœ¬èº«ä¸åŒï¼Œå› ä¸ºæ‰“å°è¡¨ç¤ºå½¢å¼ä¼šæ˜¾ç¤ºè½¬ä¹‰ç¬¦ï¼ˆæ¢å¥è¯è¯´ï¼Œå½“ä½ æ‰“å°ä¸€ä¸ªå­—ç¬¦ä¸²æ—¶ï¼Œä½ å¯ä»¥å¤åˆ¶å¹¶ç²˜è´´è¾“å‡ºæ¥é‡æ–°åˆ›å»ºé‚£ä¸ªå­—ç¬¦ä¸²ï¼‰ã€‚è¦æŸ¥çœ‹å­—ç¬¦ä¸²çš„åŸå§‹å†…å®¹ï¼Œè¯·ä½¿ç”¨ str_view()1ï¼š\n\nx &lt;- c(single_quote, double_quote, backslash)\nx\n#&gt; [1] \"'\"  \"\\\"\" \"\\\\\"\nstr_view(x)\n#&gt; [1] â”‚ '\n#&gt; [2] â”‚ \"\n#&gt; [3] â”‚ \\\n\n\n14.2.2 åŸå§‹å­—ç¬¦ä¸²\nåˆ›å»ºä¸€ä¸ªåŒ…å«å¤šä¸ªå¼•å·æˆ–åæ–œæ çš„å­—ç¬¦ä¸²å¾ˆå¿«å°±ä¼šå˜å¾—æ··ä¹±ã€‚ä¸ºäº†è¯´æ˜è¿™ä¸ªé—®é¢˜ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå®ƒåŒ…å«æˆ‘ä»¬å®šä¹‰ double_quote å’Œ single_quote å˜é‡çš„ä»£ç å—çš„å†…å®¹ï¼š\n\ntricky &lt;- \"double_quote &lt;- \\\"\\\\\\\"\\\" # or '\\\"'\nsingle_quote &lt;- '\\\\'' # or \\\"'\\\"\"\nstr_view(tricky)\n#&gt; [1] â”‚ double_quote &lt;- \"\\\"\" # or '\"'\n#&gt;     â”‚ single_quote &lt;- '\\'' # or \"'\"\n\nè¿™å¯çœŸæ˜¯ä¸€å¤§å †åæ–œæ ï¼ï¼ˆè¿™æœ‰æ—¶è¢«ç§°ä¸ºå€¾æ–œçš„ç‰™ç­¾ç»¼åˆç—‡ (leaning toothpick syndrome)ã€‚ï¼‰ä¸ºäº†æ¶ˆé™¤è½¬ä¹‰ï¼Œä½ å¯ä»¥æ”¹ç”¨åŸå§‹å­—ç¬¦ä¸² (raw string)2ï¼š\n\ntricky &lt;- r\"(double_quote &lt;- \"\\\"\" # or '\"'\nsingle_quote &lt;- '\\'' # or \"'\")\"\nstr_view(tricky)\n#&gt; [1] â”‚ double_quote &lt;- \"\\\"\" # or '\"'\n#&gt;     â”‚ single_quote &lt;- '\\'' # or \"'\"\n\nåŸå§‹å­—ç¬¦ä¸²é€šå¸¸ä»¥ r\"( å¼€å§‹ï¼Œä»¥ )\" ç»“æŸã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ çš„å­—ç¬¦ä¸²åŒ…å« )\"ï¼Œä½ å¯ä»¥æ”¹ç”¨ r\"[]\" æˆ– r\"{}\"ï¼Œå¦‚æœè¿™è¿˜ä¸å¤Ÿï¼Œä½ å¯ä»¥æ’å…¥ä»»æ„æ•°é‡çš„ç ´æŠ˜å·æ¥ä½¿å¼€å§‹å’Œç»“æŸå¯¹å”¯ä¸€ï¼Œä¾‹å¦‚ r\"--()--\"ã€r\"---()---\" ç­‰ã€‚åŸå§‹å­—ç¬¦ä¸²è¶³å¤Ÿçµæ´»ï¼Œå¯ä»¥å¤„ç†ä»»ä½•æ–‡æœ¬ã€‚\n\n14.2.3 å…¶ä»–ç‰¹æ®Šå­—ç¬¦\né™¤äº† \\\"ã€\\' å’Œ \\\\ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–ç‰¹æ®Šå­—ç¬¦å¯èƒ½ä¼šæ´¾ä¸Šç”¨åœºã€‚æœ€å¸¸è§çš„æ˜¯ \\nï¼ˆæ¢è¡Œç¬¦ï¼‰å’Œ \\tï¼ˆåˆ¶è¡¨ç¬¦ï¼‰ã€‚ä½ æœ‰æ—¶è¿˜ä¼šçœ‹åˆ°åŒ…å«ä»¥ \\u æˆ– \\U å¼€å¤´çš„ Unicode è½¬ä¹‰çš„å­—ç¬¦ä¸²ã€‚è¿™æ˜¯ä¸€ç§ä¹¦å†™éè‹±æ–‡å­—ç¬¦çš„æ–¹æ³•ï¼Œèƒ½åœ¨æ‰€æœ‰ç³»ç»Ÿä¸Šå·¥ä½œã€‚ä½ å¯ä»¥åœ¨ ?Quotes ä¸­çœ‹åˆ°å…¶ä»–ç‰¹æ®Šå­—ç¬¦çš„å®Œæ•´åˆ—è¡¨ã€‚\n\nx &lt;- c(\"one\\ntwo\", \"one\\ttwo\", \"\\u00b5\", \"\\U0001f604\")\nx\n#&gt; [1] \"one\\ntwo\" \"one\\ttwo\" \"Âµ\"        \"ğŸ˜„\"\nstr_view(x)\n#&gt; [1] â”‚ one\n#&gt;     â”‚ two\n#&gt; [2] â”‚ one{\\t}two\n#&gt; [3] â”‚ Âµ\n#&gt; [4] â”‚ ğŸ˜„\n\nè¯·æ³¨æ„ï¼Œstr_view() å¯¹åˆ¶è¡¨ç¬¦ä½¿ç”¨èŠ±æ‹¬å·ï¼Œä»¥ä¾¿æ›´å®¹æ˜“å‘ç°å®ƒä»¬3ã€‚å¤„ç†æ–‡æœ¬çš„æŒ‘æˆ˜ä¹‹ä¸€æ˜¯ï¼Œç©ºç™½å­—ç¬¦æœ‰å¤šç§æ–¹å¼è¿›å…¥æ–‡æœ¬ï¼Œæ‰€ä»¥è¿™ä¸ªèƒŒæ™¯èƒ½å¸®åŠ©ä½ è¯†åˆ«å‡ºæœ‰å¼‚å¸¸æƒ…å†µæ­£åœ¨å‘ç”Ÿã€‚\n\n14.2.4 ç»ƒä¹ \n\n\nåˆ›å»ºåŒ…å«ä»¥ä¸‹å€¼çš„å­—ç¬¦ä¸²ï¼š\n\nHe said \"That's amazing!\"\n\\a\\b\\c\\d\n\\\\\\\\\\\\\n\n\n\nåœ¨ä½ çš„ R ä¼šè¯ä¸­åˆ›å»ºä»¥ä¸‹å­—ç¬¦ä¸²å¹¶æ‰“å°å®ƒã€‚ç‰¹æ®Šçš„ \\u00a0 å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿstr_view() å¦‚ä½•æ˜¾ç¤ºå®ƒï¼Ÿä½ èƒ½ç”¨ Google æœç´¢ä¸€ä¸‹ï¼Œæ‰¾å‡ºè¿™ä¸ªç‰¹æ®Šå­—ç¬¦æ˜¯ä»€ä¹ˆå—ï¼Ÿ\n\nx &lt;- \"This\\u00a0is\\u00a0tricky\"",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>14</span>Â  <span class='chapter-title'>å­—ç¬¦ä¸²</span>"
    ]
  },
  {
    "objectID": "strings.html#ä»æ•°æ®åˆ›å»ºå¤šä¸ªå­—ç¬¦ä¸²",
    "href": "strings.html#ä»æ•°æ®åˆ›å»ºå¤šä¸ªå­—ç¬¦ä¸²",
    "title": "14Â  å­—ç¬¦ä¸²",
    "section": "\n14.3 ä»æ•°æ®åˆ›å»ºå¤šä¸ªå­—ç¬¦ä¸²",
    "text": "14.3 ä»æ•°æ®åˆ›å»ºå¤šä¸ªå­—ç¬¦ä¸²\nç°åœ¨ä½ å·²ç»å­¦ä¼šäº†â€œæ‰‹åŠ¨â€åˆ›å»ºä¸€ä¸ªæˆ–ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åŸºç¡€çŸ¥è¯†ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ä»å…¶ä»–å­—ç¬¦ä¸²åˆ›å»ºå­—ç¬¦ä¸²çš„ç»†èŠ‚ã€‚è¿™å°†å¸®åŠ©ä½ è§£å†³ä¸€ä¸ªå¸¸è§é—®é¢˜ï¼šä½ æœ‰ä¸€äº›è‡ªå·±å†™çš„æ–‡æœ¬ï¼Œæƒ³æŠŠå®ƒä¸æ•°æ®æ¡†ä¸­çš„å­—ç¬¦ä¸²ç»“åˆèµ·æ¥ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½ä¼šå°† â€œHelloâ€ ä¸ä¸€ä¸ª name å˜é‡ç»“åˆèµ·æ¥ï¼Œåˆ›å»ºä¸€ä¸ªé—®å€™è¯­ã€‚æˆ‘ä»¬å°†å‘ä½ å±•ç¤ºå¦‚ä½•ä½¿ç”¨ str_c() å’Œ str_glue() æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œä»¥åŠå¦‚ä½•å°†å®ƒä»¬ä¸ mutate() ä¸€èµ·ä½¿ç”¨ã€‚è¿™è‡ªç„¶ä¼šå¼•å‡ºä¸€ä¸ªé—®é¢˜ï¼šä½ å¯èƒ½ä¼šåœ¨ summarize() ä¸­ä½¿ç”¨å“ªäº› stringr å‡½æ•°ï¼Ÿå› æ­¤ï¼Œæˆ‘ä»¬å°†åœ¨æœ¬èŠ‚æœ€åè®¨è®º str_flatten()ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºå­—ç¬¦ä¸²çš„æ±‡æ€»å‡½æ•°ã€‚\n\n14.3.1 str_c()\n\nstr_c() æ¥å—ä»»æ„æ•°é‡çš„å‘é‡ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå­—ç¬¦å‘é‡ï¼š\n\nstr_c(\"x\", \"y\")\n#&gt; [1] \"xy\"\nstr_c(\"x\", \"y\", \"z\")\n#&gt; [1] \"xyz\"\nstr_c(\"Hello \", c(\"John\", \"Susan\"))\n#&gt; [1] \"Hello John\"  \"Hello Susan\"\n\nstr_c() ä¸ R base çš„ paste0() éå¸¸ç›¸ä¼¼ï¼Œä½†å®ƒè¢«è®¾è®¡ä¸ºä¸ mutate() ä¸€èµ·ä½¿ç”¨ï¼Œéµå¾ªäº† tidyverse çš„å¸¸è§„è§„åˆ™ï¼Œå³å¾ªç¯è¡¥é½å’Œä¼ æ’­ç¼ºå¤±å€¼ï¼š\n\ndf &lt;- tibble(name = c(\"Flora\", \"David\", \"Terra\", NA))\ndf |&gt; mutate(greeting = str_c(\"Hi \", name, \"!\"))\n#&gt; # A tibble: 4 Ã— 2\n#&gt;   name  greeting \n#&gt;   &lt;chr&gt; &lt;chr&gt;    \n#&gt; 1 Flora Hi Flora!\n#&gt; 2 David Hi David!\n#&gt; 3 Terra Hi Terra!\n#&gt; 4 &lt;NA&gt;  &lt;NA&gt;\n\nå¦‚æœä½ å¸Œæœ›ç¼ºå¤±å€¼ä»¥å¦ä¸€ç§æ–¹å¼æ˜¾ç¤ºï¼Œå¯ä»¥ä½¿ç”¨ coalesce() æ¥æ›¿æ¢å®ƒä»¬ã€‚æ ¹æ®ä½ çš„éœ€æ±‚ï¼Œä½ å¯ä»¥åœ¨ str_c() å†…éƒ¨æˆ–å¤–éƒ¨ä½¿ç”¨å®ƒï¼š\n\ndf |&gt; \n  mutate(\n    greeting1 = str_c(\"Hi \", coalesce(name, \"you\"), \"!\"),\n    greeting2 = coalesce(str_c(\"Hi \", name, \"!\"), \"Hi!\")\n  )\n#&gt; # A tibble: 4 Ã— 3\n#&gt;   name  greeting1 greeting2\n#&gt;   &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt;    \n#&gt; 1 Flora Hi Flora! Hi Flora!\n#&gt; 2 David Hi David! Hi David!\n#&gt; 3 Terra Hi Terra! Hi Terra!\n#&gt; 4 &lt;NA&gt;  Hi you!   Hi!\n\n\n14.3.2 str_glue()\n\nå¦‚æœä½ ç”¨ str_c() æ··åˆè®¸å¤šå›ºå®šçš„å’Œå¯å˜çš„å­—ç¬¦ä¸²ï¼Œä½ ä¼šæ³¨æ„åˆ°ä½ è¾“å…¥äº†å¤§é‡çš„ \"ï¼Œè¿™ä½¿å¾—ä»£ç çš„æ•´ä½“ç›®æ ‡éš¾ä»¥çœ‹æ¸…ã€‚å¦ä¸€ç§æ–¹æ³•æ˜¯ç”± glue åŒ… é€šè¿‡ str_glue()4 æä¾›çš„ã€‚ä½ ç»™å®ƒä¸€ä¸ªå…·æœ‰ç‰¹æ®ŠåŠŸèƒ½çš„å•ä¸€å­—ç¬¦ä¸²ï¼š{} é‡Œçš„ä»»ä½•ä¸œè¥¿éƒ½ä¼šåƒåœ¨å¼•å·å¤–é¢ä¸€æ ·è¢«æ±‚å€¼ï¼š\n\ndf |&gt; mutate(greeting = str_glue(\"Hi {name}!\"))\n#&gt; # A tibble: 4 Ã— 2\n#&gt;   name  greeting \n#&gt;   &lt;chr&gt; &lt;glue&gt;   \n#&gt; 1 Flora Hi Flora!\n#&gt; 2 David Hi David!\n#&gt; 3 Terra Hi Terra!\n#&gt; 4 &lt;NA&gt;  Hi NA!\n\nå¦‚ä½ æ‰€è§ï¼Œstr_glue() ç›®å‰å°†ç¼ºå¤±å€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸² \"NA\"ï¼Œä¸å¹¸çš„æ˜¯ï¼Œè¿™ä¸ str_c() ä¸ä¸€è‡´ã€‚\nä½ å¯èƒ½è¿˜ä¼šæƒ³ï¼Œå¦‚æœéœ€è¦åœ¨å­—ç¬¦ä¸²ä¸­åŒ…å«ä¸€ä¸ªå¸¸è§„çš„ { æˆ– }ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆã€‚å¦‚æœä½ çŒœåˆ°éœ€è¦ä»¥æŸç§æ–¹å¼è½¬ä¹‰å®ƒï¼Œé‚£ä½ çš„æ€è·¯æ˜¯æ­£ç¡®çš„ã€‚è¯€çªåœ¨äº glue ä½¿ç”¨äº†ä¸€ç§ç¨å¾®ä¸åŒçš„è½¬ä¹‰æŠ€æœ¯ï¼šä¸æ˜¯ç”¨åƒ \\ è¿™æ ·çš„ç‰¹æ®Šå­—ç¬¦ä½œä¸ºå‰ç¼€ï¼Œè€Œæ˜¯å°†ç‰¹æ®Šå­—ç¬¦åŠ å€ï¼š\n\ndf |&gt; mutate(greeting = str_glue(\"{{Hi {name}!}}\"))\n#&gt; # A tibble: 4 Ã— 2\n#&gt;   name  greeting   \n#&gt;   &lt;chr&gt; &lt;glue&gt;     \n#&gt; 1 Flora {Hi Flora!}\n#&gt; 2 David {Hi David!}\n#&gt; 3 Terra {Hi Terra!}\n#&gt; 4 &lt;NA&gt;  {Hi NA!}\n\n\n14.3.3 str_flatten()\n\nstr_c() å’Œ str_glue() ä¸ mutate() é…åˆå¾—å¾ˆå¥½ï¼Œå› ä¸ºå®ƒä»¬çš„è¾“å‡ºä¸è¾“å…¥é•¿åº¦ç›¸åŒã€‚å¦‚æœä½ æƒ³è¦ä¸€ä¸ªèƒ½ä¸ summarize() å¾ˆå¥½é…åˆçš„å‡½æ•°ï¼Œå³ä¸€ä¸ªæ€»æ˜¯è¿”å›å•ä¸ªå­—ç¬¦ä¸²çš„ä¸œè¥¿å‘¢ï¼Ÿè¿™å°±æ˜¯ str_flatten()5 çš„å·¥ä½œï¼šå®ƒæ¥å—ä¸€ä¸ªå­—ç¬¦å‘é‡ï¼Œå¹¶å°†å‘é‡çš„æ¯ä¸ªå…ƒç´ ç»„åˆæˆä¸€ä¸ªå•ä¸€çš„å­—ç¬¦ä¸²ï¼š\n\nstr_flatten(c(\"x\", \"y\", \"z\"))\n#&gt; [1] \"xyz\"\nstr_flatten(c(\"x\", \"y\", \"z\"), \", \")\n#&gt; [1] \"x, y, z\"\nstr_flatten(c(\"x\", \"y\", \"z\"), \", \", last = \", and \")\n#&gt; [1] \"x, y, and z\"\n\nè¿™ä½¿å¾—å®ƒèƒ½ä¸ summarize() å¾ˆå¥½åœ°é…åˆå·¥ä½œï¼š\n\ndf &lt;- tribble(\n  ~ name, ~ fruit,\n  \"Carmen\", \"banana\",\n  \"Carmen\", \"apple\",\n  \"Marvin\", \"nectarine\",\n  \"Terence\", \"cantaloupe\",\n  \"Terence\", \"papaya\",\n  \"Terence\", \"mandarin\"\n)\ndf |&gt;\n  group_by(name) |&gt; \n  summarize(fruits = str_flatten(fruit, \", \"))\n#&gt; # A tibble: 3 Ã— 2\n#&gt;   name    fruits                      \n#&gt;   &lt;chr&gt;   &lt;chr&gt;                       \n#&gt; 1 Carmen  banana, apple               \n#&gt; 2 Marvin  nectarine                   \n#&gt; 3 Terence cantaloupe, papaya, mandarin\n\n\n14.3.4 ç»ƒä¹ \n\n\nå¯¹äºä»¥ä¸‹è¾“å…¥ï¼Œæ¯”è¾ƒå¹¶å¯¹æ¯” paste0() ä¸ str_c() çš„ç»“æœï¼š\n\nstr_c(\"hi \", NA)\nstr_c(letters[1:2], letters[1:3])\n\n\npaste() å’Œ paste0() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä½ å¦‚ä½•ç”¨ str_c() é‡ç°ä¸ paste() ç­‰ä»·çš„åŠŸèƒ½ï¼Ÿ\n\nå°†ä»¥ä¸‹è¡¨è¾¾å¼ä» str_c() è½¬æ¢ä¸º str_glue()ï¼Œæˆ–åä¹‹ï¼š\n\nstr_c(\"The price of \", food, \" is \", price)\nstr_glue(\"I'm {age} years old and live in {country}\")\nstr_c(\"\\\\section{\", title, \"}\")",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>14</span>Â  <span class='chapter-title'>å­—ç¬¦ä¸²</span>"
    ]
  },
  {
    "objectID": "strings.html#ä»å­—ç¬¦ä¸²ä¸­æå–æ•°æ®",
    "href": "strings.html#ä»å­—ç¬¦ä¸²ä¸­æå–æ•°æ®",
    "title": "14Â  å­—ç¬¦ä¸²",
    "section": "\n14.4 ä»å­—ç¬¦ä¸²ä¸­æå–æ•°æ®",
    "text": "14.4 ä»å­—ç¬¦ä¸²ä¸­æå–æ•°æ®\nå°†å¤šä¸ªå˜é‡å¡è¿›ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æ˜¯å¾ˆå¸¸è§çš„ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨å››ä¸ª tidyr å‡½æ•°æ¥æå–å®ƒä»¬ï¼š\n\ndf |&gt; separate_longer_delim(col, delim)\ndf |&gt; separate_longer_position(col, width)\ndf |&gt; separate_wider_delim(col, delim, names)\ndf |&gt; separate_wider_position(col, widths)\n\nå¦‚æœä½ ä»”ç»†è§‚å¯Ÿï¼Œä½ ä¼šå‘ç°è¿™é‡Œæœ‰ä¸€ä¸ªå…±åŒçš„æ¨¡å¼ï¼šseparate_ï¼Œç„¶åæ˜¯ longer æˆ– widerï¼Œç„¶åæ˜¯ _ï¼Œç„¶åæ˜¯ delim æˆ– positionã€‚è¿™æ˜¯å› ä¸ºè¿™å››ä¸ªå‡½æ•°æ˜¯ç”±ä¸¤ä¸ªæ›´ç®€å•çš„åŸè¯­ç»„æˆçš„ï¼š\n\nå°±åƒ pivot_longer() å’Œ pivot_wider() ä¸€æ ·ï¼Œ_longer å‡½æ•°é€šè¿‡åˆ›å»ºæ–°è¡Œæ¥ä½¿è¾“å…¥çš„æ•°æ®æ¡†å˜é•¿ï¼Œè€Œ _wider å‡½æ•°é€šè¿‡ç”Ÿæˆæ–°åˆ—æ¥ä½¿è¾“å…¥çš„æ•°æ®æ¡†å˜å®½ã€‚\n\ndelim ç”¨åƒ \", \" æˆ– \" \" è¿™æ ·çš„åˆ†éš”ç¬¦æ¥åˆ†å‰²å­—ç¬¦ä¸²ï¼›position åœ¨æŒ‡å®šçš„å®½åº¦å¤„åˆ†å‰²ï¼Œæ¯”å¦‚ c(3, 5, 2)ã€‚\n\næˆ‘ä»¬å°†åœ¨ Chapter 15 ä¸­å›åˆ°è¿™ä¸ªå®¶æ—çš„æœ€åä¸€ä¸ªæˆå‘˜ï¼Œseparate_wider_regex()ã€‚å®ƒæ˜¯ wider å‡½æ•°ä¸­æœ€çµæ´»çš„ä¸€ä¸ªï¼Œä½†åœ¨ä½¿ç”¨å®ƒä¹‹å‰ï¼Œä½ éœ€è¦å¯¹æ­£åˆ™è¡¨è¾¾å¼æœ‰æ‰€äº†è§£ã€‚\næ¥ä¸‹æ¥çš„ä¸¤èŠ‚å°†ä¸ºä½ ä»‹ç»è¿™äº› separate å‡½æ•°èƒŒåçš„åŸºæœ¬æ€æƒ³ï¼Œé¦–å…ˆæ˜¯åˆ†æˆè¡Œï¼ˆè¿™ç¨å¾®ç®€å•ä¸€äº›ï¼‰ï¼Œç„¶åæ˜¯åˆ†æˆåˆ—ã€‚æœ€åï¼Œæˆ‘ä»¬å°†è®¨è®º wider å‡½æ•°ä¸ºä½ æä¾›çš„è¯Šæ–­é—®é¢˜çš„å·¥å…·ã€‚\n\n14.4.1 åˆ†æˆè¡Œ\nå½“ä¸åŒè¡Œä¸­ç»„ä»¶çš„æ•°é‡ä¸åŒæ—¶ï¼Œå°†å­—ç¬¦ä¸²åˆ†æˆè¡Œé€šå¸¸æœ€æœ‰ç”¨ã€‚æœ€å¸¸è§çš„æƒ…å†µæ˜¯éœ€è¦ separate_longer_delim() æ ¹æ®åˆ†éš”ç¬¦è¿›è¡Œåˆ†å‰²ï¼š\n\ndf1 &lt;- tibble(x = c(\"a,b,c\", \"d,e\", \"f\"))\ndf1 |&gt; \n  separate_longer_delim(x, delim = \",\")\n#&gt; # A tibble: 6 Ã— 1\n#&gt;   x    \n#&gt;   &lt;chr&gt;\n#&gt; 1 a    \n#&gt; 2 b    \n#&gt; 3 c    \n#&gt; 4 d    \n#&gt; 5 e    \n#&gt; 6 f\n\nseparate_longer_position() åœ¨å®è·µä¸­æ¯”è¾ƒå°‘è§ï¼Œä½†ä¸€äº›è¾ƒè€çš„æ•°æ®é›†ç¡®å®ä½¿ç”¨ä¸€ç§éå¸¸ç´§å‡‘çš„æ ¼å¼ï¼Œå…¶ä¸­æ¯ä¸ªå­—ç¬¦éƒ½ç”¨æ¥è®°å½•ä¸€ä¸ªå€¼ï¼š\n\ndf2 &lt;- tibble(x = c(\"1211\", \"131\", \"21\"))\ndf2 |&gt; \n  separate_longer_position(x, width = 1)\n#&gt; # A tibble: 9 Ã— 1\n#&gt;   x    \n#&gt;   &lt;chr&gt;\n#&gt; 1 1    \n#&gt; 2 2    \n#&gt; 3 1    \n#&gt; 4 1    \n#&gt; 5 1    \n#&gt; 6 3    \n#&gt; # â„¹ 3 more rows\n\n\n14.4.2 åˆ†æˆåˆ—\nå½“æ¯ä¸ªå­—ç¬¦ä¸²ä¸­éƒ½æœ‰å›ºå®šæ•°é‡çš„ç»„ä»¶ï¼Œå¹¶ä¸”ä½ å¸Œæœ›å°†å®ƒä»¬åˆ†æ•£åˆ°åˆ—ä¸­æ—¶ï¼Œå°†å­—ç¬¦ä¸²åˆ†æˆåˆ—é€šå¸¸æœ€æœ‰ç”¨ã€‚å®ƒä»¬æ¯”å®ƒä»¬çš„ longer ç­‰ä»·ç‰©ç¨å¾®å¤æ‚ä¸€äº›ï¼Œå› ä¸ºä½ éœ€è¦å‘½åè¿™äº›åˆ—ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„æ•°æ®é›†ä¸­ï¼Œx ç”±ä¸€ä¸ªä»£ç ã€ä¸€ä¸ªç‰ˆæœ¬å·å’Œä¸€ä¸ªå¹´ä»½ç»„æˆï¼Œç”¨ . åˆ†éš”ã€‚è¦ä½¿ç”¨ separate_wider_delim()ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä¸¤ä¸ªå‚æ•°ä¸­æä¾›åˆ†éš”ç¬¦å’Œåç§°ï¼š\n\ndf3 &lt;- tibble(x = c(\"a10.1.2022\", \"b10.2.2011\", \"e15.1.2015\"))\ndf3 |&gt; \n  separate_wider_delim(\n    x,\n    delim = \".\",\n    names = c(\"code\", \"edition\", \"year\")\n  )\n#&gt; # A tibble: 3 Ã— 3\n#&gt;   code  edition year \n#&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;\n#&gt; 1 a10   1       2022 \n#&gt; 2 b10   2       2011 \n#&gt; 3 e15   1       2015\n\nå¦‚æœæŸä¸ªç‰¹å®šçš„éƒ¨åˆ†æ²¡æœ‰ç”¨ï¼Œä½ å¯ä»¥ä½¿ç”¨ NA åç§°æ¥ä»ç»“æœä¸­çœç•¥å®ƒï¼š\n\ndf3 |&gt; \n  separate_wider_delim(\n    x,\n    delim = \".\",\n    names = c(\"code\", NA, \"year\")\n  )\n#&gt; # A tibble: 3 Ã— 2\n#&gt;   code  year \n#&gt;   &lt;chr&gt; &lt;chr&gt;\n#&gt; 1 a10   2022 \n#&gt; 2 b10   2011 \n#&gt; 3 e15   2015\n\nseparate_wider_position() çš„å·¥ä½œæ–¹å¼ç•¥æœ‰ä¸åŒï¼Œå› ä¸ºä½ é€šå¸¸éœ€è¦æŒ‡å®šæ¯åˆ—çš„å®½åº¦ã€‚æ‰€ä»¥ä½ ç»™å®ƒä¸€ä¸ªå‘½åçš„æ•´æ•°å‘é‡ï¼Œå…¶ä¸­åç§°ç»™å‡ºæ–°åˆ—çš„åç§°ï¼Œå€¼æ˜¯å®ƒå ç”¨çš„å­—ç¬¦æ•°ã€‚ä½ å¯ä»¥é€šè¿‡ä¸å‘½åæ¥ä»è¾“å‡ºä¸­çœç•¥å€¼ï¼š\n\ndf4 &lt;- tibble(x = c(\"202215TX\", \"202122LA\", \"202325CA\")) \ndf4 |&gt; \n  separate_wider_position(\n    x,\n    widths = c(year = 4, age = 2, state = 2)\n  )\n#&gt; # A tibble: 3 Ã— 3\n#&gt;   year  age   state\n#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;\n#&gt; 1 2022  15    TX   \n#&gt; 2 2021  22    LA   \n#&gt; 3 2023  25    CA\n\n\n14.4.3 è¯Šæ–­å˜å®½é—®é¢˜\nseparate_wider_delim()6 éœ€è¦ä¸€ä¸ªå›ºå®šçš„ã€å·²çŸ¥çš„åˆ—é›†åˆã€‚å¦‚æœæŸäº›è¡Œæ²¡æœ‰é¢„æœŸçš„ç‰‡æ®µæ•°é‡ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿå¯èƒ½å­˜åœ¨ä¸¤ç§é—®é¢˜ï¼šç‰‡æ®µå¤ªå°‘æˆ–å¤ªå¤šï¼Œæ‰€ä»¥ separate_wider_delim() æä¾›äº†ä¸¤ä¸ªå‚æ•°æ¥å¸®åŠ©è§£å†³ï¼štoo_few å’Œ too_manyã€‚æˆ‘ä»¬é¦–å…ˆç”¨ä¸‹é¢çš„ç¤ºä¾‹æ•°æ®é›†æ¥çœ‹ä¸€ä¸‹ too_few çš„æƒ…å†µï¼š\n\ndf &lt;- tibble(x = c(\"1-1-1\", \"1-1-2\", \"1-3\", \"1-3-2\", \"1\"))\n\ndf |&gt; \n  separate_wider_delim(\n    x,\n    delim = \"-\",\n    names = c(\"x\", \"y\", \"z\")\n  )\n#&gt; Error in `separate_wider_delim()`:\n#&gt; ! Expected 3 pieces in each element of `x`.\n#&gt; ! 2 values were too short.\n#&gt; â„¹ Use `too_few = \"debug\"` to diagnose the problem.\n#&gt; â„¹ Use `too_few = \"align_start\"/\"align_end\"` to silence this message.\n\nä½ ä¼šæ³¨æ„åˆ°æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªé”™è¯¯ï¼Œä½†é”™è¯¯ä¿¡æ¯ç»™äº†æˆ‘ä»¬ä¸€äº›å…³äºå¦‚ä½•ç»§ç»­çš„å»ºè®®ã€‚è®©æˆ‘ä»¬ä»è°ƒè¯•é—®é¢˜å¼€å§‹ï¼š\n\ndebug &lt;- df |&gt; \n  separate_wider_delim(\n    x,\n    delim = \"-\",\n    names = c(\"x\", \"y\", \"z\"),\n    too_few = \"debug\"\n  )\n#&gt; Warning: Debug mode activated: adding variables `x_ok`, `x_pieces`, and\n#&gt; `x_remainder`.\ndebug\n#&gt; # A tibble: 5 Ã— 6\n#&gt;   x     y     z     x_ok  x_pieces x_remainder\n#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;lgl&gt;    &lt;int&gt; &lt;chr&gt;      \n#&gt; 1 1-1-1 1     1     TRUE         3 \"\"         \n#&gt; 2 1-1-2 1     2     TRUE         3 \"\"         \n#&gt; 3 1-3   3     &lt;NA&gt;  FALSE        2 \"\"         \n#&gt; 4 1-3-2 3     2     TRUE         3 \"\"         \n#&gt; 5 1     &lt;NA&gt;  &lt;NA&gt;  FALSE        1 \"\"\n\nå½“ä½ ä½¿ç”¨è°ƒè¯•æ¨¡å¼æ—¶ï¼Œè¾“å‡ºä¸­ä¼šå¢åŠ ä¸‰åˆ—ï¼šx_okã€x_pieces å’Œ x_remainderï¼ˆå¦‚æœä½ åˆ†ç¦»ä¸€ä¸ªä¸åŒåç§°çš„å˜é‡ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªä¸åŒçš„å‰ç¼€ï¼‰ã€‚åœ¨è¿™é‡Œï¼Œx_ok è®©ä½ èƒ½å¤Ÿå¿«é€Ÿæ‰¾åˆ°å¤±è´¥çš„è¾“å…¥ï¼š\n\ndebug |&gt; filter(!x_ok)\n#&gt; # A tibble: 2 Ã— 6\n#&gt;   x     y     z     x_ok  x_pieces x_remainder\n#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;lgl&gt;    &lt;int&gt; &lt;chr&gt;      \n#&gt; 1 1-3   3     &lt;NA&gt;  FALSE        2 \"\"         \n#&gt; 2 1     &lt;NA&gt;  &lt;NA&gt;  FALSE        1 \"\"\n\nx_pieces å‘Šè¯‰æˆ‘ä»¬æ‰¾åˆ°äº†å¤šå°‘ä¸ªç‰‡æ®µï¼Œè€Œé¢„æœŸæ˜¯ 3 ä¸ªï¼ˆnames çš„é•¿åº¦ï¼‰ã€‚å½“ç‰‡æ®µå¤ªå°‘æ—¶ï¼Œx_remainder æ²¡æœ‰ç”¨ï¼Œä½†æˆ‘ä»¬å¾ˆå¿«ä¼šå†æ¬¡çœ‹åˆ°å®ƒã€‚\næœ‰æ—¶ï¼ŒæŸ¥çœ‹è¿™äº›è°ƒè¯•ä¿¡æ¯ä¼šæ­ç¤ºä½ çš„åˆ†éš”ç¬¦ç­–ç•¥å­˜åœ¨é—®é¢˜ï¼Œæˆ–è€…è¡¨æ˜ä½ éœ€è¦åœ¨åˆ†ç¦»å‰è¿›è¡Œæ›´å¤šçš„é¢„å¤„ç†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¿®å¤ä¸Šæ¸¸çš„é—®é¢˜ï¼Œå¹¶ç¡®ä¿ç§»é™¤ too_few = \"debug\"ï¼Œä»¥ç¡®ä¿æ–°é—®é¢˜ä¼šå˜æˆé”™è¯¯ã€‚\nåœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½å¸Œæœ›ç”¨ NA å¡«å……ç¼ºå¤±çš„ç‰‡æ®µç„¶åç»§ç»­ã€‚è¿™å°±æ˜¯ too_few = \"align_start\" å’Œ too_few = \"align_end\" çš„å·¥ä½œï¼Œå®ƒä»¬å…è®¸ä½ æ§åˆ¶ NA åº”è¯¥æ”¾åœ¨å“ªé‡Œï¼š\n\ndf |&gt; \n  separate_wider_delim(\n    x,\n    delim = \"-\",\n    names = c(\"x\", \"y\", \"z\"),\n    too_few = \"align_start\"\n  )\n#&gt; # A tibble: 5 Ã— 3\n#&gt;   x     y     z    \n#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;\n#&gt; 1 1     1     1    \n#&gt; 2 1     1     2    \n#&gt; 3 1     3     &lt;NA&gt; \n#&gt; 4 1     3     2    \n#&gt; 5 1     &lt;NA&gt;  &lt;NA&gt;\n\nå¦‚æœä½ æœ‰å¤ªå¤šçš„ç‰‡æ®µï¼ŒåŒæ ·çš„åŸåˆ™ä¹Ÿé€‚ç”¨ï¼š\n\ndf &lt;- tibble(x = c(\"1-1-1\", \"1-1-2\", \"1-3-5-6\", \"1-3-2\", \"1-3-5-7-9\"))\n\ndf |&gt; \n  separate_wider_delim(\n    x,\n    delim = \"-\",\n    names = c(\"x\", \"y\", \"z\")\n  )\n#&gt; Error in `separate_wider_delim()`:\n#&gt; ! Expected 3 pieces in each element of `x`.\n#&gt; ! 2 values were too long.\n#&gt; â„¹ Use `too_many = \"debug\"` to diagnose the problem.\n#&gt; â„¹ Use `too_many = \"drop\"/\"merge\"` to silence this message.\n\nä½†æ˜¯ç°åœ¨ï¼Œå½“æˆ‘ä»¬è°ƒè¯•ç»“æœæ—¶ï¼Œä½ å¯ä»¥çœ‹åˆ° x_remainder çš„ç”¨é€”ï¼š\n\ndebug &lt;- df |&gt; \n  separate_wider_delim(\n    x,\n    delim = \"-\",\n    names = c(\"x\", \"y\", \"z\"),\n    too_many = \"debug\"\n  )\n#&gt; Warning: Debug mode activated: adding variables `x_ok`, `x_pieces`, and\n#&gt; `x_remainder`.\ndebug |&gt; filter(!x_ok)\n#&gt; # A tibble: 2 Ã— 6\n#&gt;   x         y     z     x_ok  x_pieces x_remainder\n#&gt;   &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt; &lt;lgl&gt;    &lt;int&gt; &lt;chr&gt;      \n#&gt; 1 1-3-5-6   3     5     FALSE        4 -6         \n#&gt; 2 1-3-5-7-9 3     5     FALSE        5 -7-9\n\nå¯¹äºå¤„ç†è¿‡å¤šçš„ç‰‡æ®µï¼Œä½ æœ‰ä¸€å¥—ç•¥æœ‰ä¸åŒçš„é€‰é¡¹ï¼šä½ å¯ä»¥é™é»˜åœ°â€œdropâ€ï¼ˆä¸¢å¼ƒï¼‰ä»»ä½•é¢å¤–çš„ç‰‡æ®µï¼Œæˆ–è€…å°†å®ƒä»¬å…¨éƒ¨â€œmergeâ€ï¼ˆåˆå¹¶ï¼‰åˆ°æœ€åä¸€åˆ—ï¼š\n\ndf |&gt; \n  separate_wider_delim(\n    x,\n    delim = \"-\",\n    names = c(\"x\", \"y\", \"z\"),\n    too_many = \"drop\"\n  )\n#&gt; # A tibble: 5 Ã— 3\n#&gt;   x     y     z    \n#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;\n#&gt; 1 1     1     1    \n#&gt; 2 1     1     2    \n#&gt; 3 1     3     5    \n#&gt; 4 1     3     2    \n#&gt; 5 1     3     5\n\n\ndf |&gt; \n  separate_wider_delim(\n    x,\n    delim = \"-\",\n    names = c(\"x\", \"y\", \"z\"),\n    too_many = \"merge\"\n  )\n#&gt; # A tibble: 5 Ã— 3\n#&gt;   x     y     z    \n#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;\n#&gt; 1 1     1     1    \n#&gt; 2 1     1     2    \n#&gt; 3 1     3     5-6  \n#&gt; 4 1     3     2    \n#&gt; 5 1     3     5-7-9",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>14</span>Â  <span class='chapter-title'>å­—ç¬¦ä¸²</span>"
    ]
  },
  {
    "objectID": "strings.html#å­—æ¯",
    "href": "strings.html#å­—æ¯",
    "title": "14Â  å­—ç¬¦ä¸²",
    "section": "\n14.5 å­—æ¯",
    "text": "14.5 å­—æ¯\nåœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å‘ä½ ä»‹ç»ä¸€äº›å‡½æ•°ï¼Œè®©ä½ èƒ½å¤Ÿå¤„ç†å­—ç¬¦ä¸²ä¸­çš„å•ä¸ªå­—æ¯ã€‚ä½ å°†å­¦ä¹ å¦‚ä½•æ‰¾åˆ°å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œæå–å­å­—ç¬¦ä¸²ï¼Œä»¥åŠåœ¨å›¾è¡¨å’Œè¡¨æ ¼ä¸­å¤„ç†é•¿å­—ç¬¦ä¸²ã€‚\n\n14.5.1 é•¿åº¦\nstr_length() å‘Šè¯‰ä½ å­—ç¬¦ä¸²ä¸­æœ‰å¤šå°‘ä¸ªå­—æ¯ï¼š\n\nstr_length(c(\"a\", \"R for data science\", NA))\n#&gt; [1]  1 18 NA\n\nä½ å¯ä»¥å°†æ­¤ä¸ count() ä¸€èµ·ä½¿ç”¨ï¼Œä»¥æ‰¾å‡ºç¾å›½å©´å„¿å§“åé•¿åº¦çš„åˆ†å¸ƒï¼Œç„¶åç”¨ filter() æŸ¥çœ‹æœ€é•¿çš„åå­—ï¼Œè¿™äº›åå­—æ°å¥½æœ‰ 15 ä¸ªå­—æ¯7ï¼š\n\nbabynames |&gt;\n  count(length = str_length(name), wt = n)\n#&gt; # A tibble: 14 Ã— 2\n#&gt;   length        n\n#&gt;    &lt;int&gt;    &lt;int&gt;\n#&gt; 1      2   338150\n#&gt; 2      3  8589596\n#&gt; 3      4 48506739\n#&gt; 4      5 87011607\n#&gt; 5      6 90749404\n#&gt; 6      7 72120767\n#&gt; # â„¹ 8 more rows\n\nbabynames |&gt; \n  filter(str_length(name) == 15) |&gt; \n  count(name, wt = n, sort = TRUE)\n#&gt; # A tibble: 34 Ã— 2\n#&gt;   name                n\n#&gt;   &lt;chr&gt;           &lt;int&gt;\n#&gt; 1 Franciscojavier   123\n#&gt; 2 Christopherjohn   118\n#&gt; 3 Johnchristopher   118\n#&gt; 4 Christopherjame   108\n#&gt; 5 Christophermich    52\n#&gt; 6 Ryanchristopher    45\n#&gt; # â„¹ 28 more rows\n\n\n14.5.2 å­é›†\nä½ å¯ä»¥ä½¿ç”¨ str_sub(string, start, end) æ¥æå–å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†ï¼Œå…¶ä¸­ start å’Œ end æ˜¯å­å­—ç¬¦ä¸²åº”è¯¥å¼€å§‹å’Œç»“æŸçš„ä½ç½®ã€‚start å’Œ end å‚æ•°æ˜¯åŒ…å«æ€§çš„ï¼Œæ‰€ä»¥è¿”å›çš„å­—ç¬¦ä¸²é•¿åº¦å°†æ˜¯ end - start + 1ï¼š\n\nx &lt;- c(\"Apple\", \"Banana\", \"Pear\")\nstr_sub(x, 1, 3)\n#&gt; [1] \"App\" \"Ban\" \"Pea\"\n\nä½ å¯ä»¥ä½¿ç”¨è´Ÿå€¼ä»å­—ç¬¦ä¸²çš„æœ«å°¾å‘å‰è®¡æ•°ï¼š-1 æ˜¯æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œ-2 æ˜¯å€’æ•°ç¬¬äºŒä¸ªå­—ç¬¦ï¼Œä¾æ­¤ç±»æ¨ã€‚\n\nstr_sub(x, -3, -1)\n#&gt; [1] \"ple\" \"ana\" \"ear\"\n\nè¯·æ³¨æ„ï¼Œå¦‚æœå­—ç¬¦ä¸²å¤ªçŸ­ï¼Œstr_sub() ä¸ä¼šå¤±è´¥ï¼šå®ƒåªä¼šè¿”å›å°½å¯èƒ½å¤šçš„å†…å®¹ï¼š\n\nstr_sub(\"a\", 1, 5)\n#&gt; [1] \"a\"\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨ str_sub() å’Œ mutate() æ¥æ‰¾å‡ºæ¯ä¸ªåå­—çš„é¦–å­—æ¯å’Œæœ«å°¾å­—æ¯ï¼š\n\nbabynames |&gt; \n  mutate(\n    first = str_sub(name, 1, 1),\n    last = str_sub(name, -1, -1)\n  )\n#&gt; # A tibble: 1,924,665 Ã— 7\n#&gt;    year sex   name          n   prop first last \n#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;\n#&gt; 1  1880 F     Mary       7065 0.0724 M     y    \n#&gt; 2  1880 F     Anna       2604 0.0267 A     a    \n#&gt; 3  1880 F     Emma       2003 0.0205 E     a    \n#&gt; 4  1880 F     Elizabeth  1939 0.0199 E     h    \n#&gt; 5  1880 F     Minnie     1746 0.0179 M     e    \n#&gt; 6  1880 F     Margaret   1578 0.0162 M     t    \n#&gt; # â„¹ 1,924,659 more rows\n\n\n14.5.3 ç»ƒä¹ \n\nåœ¨è®¡ç®—å©´å„¿å§“åé•¿åº¦çš„åˆ†å¸ƒæ—¶ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆä½¿ç”¨ wt = nï¼Ÿ\nä½¿ç”¨ str_length() å’Œ str_sub() ä»æ¯ä¸ªå©´å„¿åå­—ä¸­æå–ä¸­é—´çš„å­—æ¯ã€‚å¦‚æœå­—ç¬¦ä¸²æœ‰å¶æ•°ä¸ªå­—ç¬¦ï¼Œä½ è¯¥æ€ä¹ˆåŠï¼Ÿ\nå©´å„¿å§“åçš„é•¿åº¦éšæ—¶é—´å˜åŒ–æœ‰ä»»ä½•ä¸»è¦è¶‹åŠ¿å—ï¼Ÿé¦–å­—æ¯å’Œæœ«å°¾å­—æ¯çš„æµè¡Œåº¦å‘¢ï¼Ÿ",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>14</span>Â  <span class='chapter-title'>å­—ç¬¦ä¸²</span>"
    ]
  },
  {
    "objectID": "strings.html#sec-other-languages",
    "href": "strings.html#sec-other-languages",
    "title": "14Â  å­—ç¬¦ä¸²",
    "section": "\n14.6 éè‹±æ–‡æ–‡æœ¬",
    "text": "14.6 éè‹±æ–‡æ–‡æœ¬\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸»è¦å…³æ³¨è‹±æ–‡æ–‡æœ¬ï¼Œå¤„ç†è‹±æ–‡æ–‡æœ¬ç‰¹åˆ«å®¹æ˜“ï¼ŒåŸå› æœ‰äºŒã€‚é¦–å…ˆï¼Œè‹±æ–‡å­—æ¯ç›¸å¯¹ç®€å•ï¼šåªæœ‰ 26 ä¸ªå­—æ¯ã€‚å…¶æ¬¡ï¼ˆä¹Ÿè®¸æ›´é‡è¦ï¼‰ï¼Œæˆ‘ä»¬ä»Šå¤©ä½¿ç”¨çš„è®¡ç®—åŸºç¡€è®¾æ–½ä¸»è¦æ˜¯ç”±è¯´è‹±è¯­çš„äººè®¾è®¡çš„ã€‚ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘ä»¬æ²¡æœ‰è¶³å¤Ÿçš„ç¯‡å¹…æ¥å…¨é¢å¤„ç†éè‹±æ–‡è¯­è¨€ã€‚å°½ç®¡å¦‚æ­¤ï¼Œæˆ‘ä»¬è¿˜æ˜¯æƒ³æé†’ä½ æ³¨æ„ä¸€äº›ä½ å¯èƒ½ä¼šé‡åˆ°çš„æœ€å¤§æŒ‘æˆ˜ï¼šç¼–ç ã€å­—æ¯å˜ä½“å’Œä¾èµ–äºåŒºåŸŸè®¾ç½®çš„å‡½æ•°ã€‚\n\n14.6.1 ç¼–ç \nåœ¨å¤„ç†éè‹±æ–‡æ–‡æœ¬æ—¶ï¼Œç¬¬ä¸€ä¸ªæŒ‘æˆ˜é€šå¸¸æ˜¯ç¼–ç  (encoding)ã€‚è¦ç†è§£å‘ç”Ÿäº†ä»€ä¹ˆï¼Œæˆ‘ä»¬éœ€è¦æ·±å…¥äº†è§£è®¡ç®—æœºæ˜¯å¦‚ä½•è¡¨ç¤ºå­—ç¬¦ä¸²çš„ã€‚åœ¨ R ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ charToRaw() æ¥è·å–å­—ç¬¦ä¸²çš„åº•å±‚è¡¨ç¤ºï¼š\n\ncharToRaw(\"Hadley\")\n#&gt; [1] 48 61 64 6c 65 79\n\nè¿™å…­ä¸ªåå…­è¿›åˆ¶æ•°ä¸­çš„æ¯ä¸€ä¸ªéƒ½ä»£è¡¨ä¸€ä¸ªå­—æ¯ï¼š48 æ˜¯ Hï¼Œ61 æ˜¯ aï¼Œä¾æ­¤ç±»æ¨ã€‚ä»åå…­è¿›åˆ¶æ•°åˆ°å­—ç¬¦çš„æ˜ å°„ç§°ä¸ºç¼–ç ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¼–ç è¢«ç§°ä¸º ASCIIã€‚ASCII åœ¨è¡¨ç¤ºè‹±æ–‡å­—ç¬¦æ–¹é¢åšå¾—å¾ˆå¥½ï¼Œå› ä¸ºå®ƒæ˜¯ç¾å›½ä¿¡æ¯äº¤æ¢æ ‡å‡†ä»£ç ã€‚\nå¯¹äºéè‹±è¯­è¯­è¨€æ¥è¯´ï¼Œäº‹æƒ…å°±æ²¡é‚£ä¹ˆç®€å•äº†ã€‚åœ¨è®¡ç®—çš„æ—©æœŸï¼Œæœ‰è®¸å¤šç«äº‰æ€§çš„æ ‡å‡†ç”¨äºç¼–ç éè‹±æ–‡å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œæ¬§æ´²æœ‰ä¸¤ç§ä¸åŒçš„ç¼–ç ï¼šLatin1ï¼ˆåˆå ISO-8859-1ï¼‰ç”¨äºè¥¿æ¬§è¯­è¨€ï¼Œè€Œ Latin2ï¼ˆåˆå ISO-8859-2ï¼‰ç”¨äºä¸­æ¬§è¯­è¨€ã€‚åœ¨ Latin1 ä¸­ï¼Œå­—èŠ‚ b1 æ˜¯ â€œÂ±â€ï¼Œä½†åœ¨ Latin2 ä¸­ï¼Œå®ƒæ˜¯ â€œÄ…â€ï¼å¹¸è¿çš„æ˜¯ï¼Œä»Šå¤©æœ‰ä¸€ä¸ªå‡ ä¹åœ¨ä»»ä½•åœ°æ–¹éƒ½æ”¯æŒçš„æ ‡å‡†ï¼šUTF-8ã€‚UTF-8 å‡ ä¹å¯ä»¥ç¼–ç å½“ä»Šäººç±»ä½¿ç”¨çš„æ‰€æœ‰å­—ç¬¦ï¼Œä»¥åŠè®¸å¤šé¢å¤–çš„ç¬¦å·ï¼Œå¦‚è¡¨æƒ…ç¬¦å·ã€‚\nreadr å¤„å¤„ä½¿ç”¨ UTF-8ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é»˜è®¤è®¾ç½®ï¼Œä½†å¯¹äºç”±ä¸ä½¿ç”¨ UTF-8 çš„æ—§ç³»ç»Ÿäº§ç”Ÿçš„æ•°æ®æ¥è¯´ï¼Œè¿™ä¼šå¤±è´¥ã€‚å¦‚æœå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œä½ çš„å­—ç¬¦ä¸²åœ¨æ‰“å°æ—¶ä¼šçœ‹èµ·æ¥å¾ˆå¥‡æ€ªã€‚æœ‰æ—¶å¯èƒ½åªæœ‰ä¸€ä¸¤ä¸ªå­—ç¬¦å‡ºé”™ï¼›å…¶ä»–æ—¶å€™ï¼Œä½ ä¼šå¾—åˆ°å®Œå…¨çš„ä¹±ç ã€‚ä¾‹å¦‚ï¼Œè¿™é‡Œæ˜¯ä¸¤ä¸ªå¸¦æœ‰ä¸å¯»å¸¸ç¼–ç çš„å†…è” CSV8ï¼š\n\nx1 &lt;- \"text\\nEl Ni\\xf1o was particularly bad this year\"\nread_csv(x1)$text\n#&gt; [1] \"El Ni\\xf1o was particularly bad this year\"\n\nx2 &lt;- \"text\\n\\x82\\xb1\\x82\\xf1\\x82\\xc9\\x82\\xbf\\x82\\xcd\"\nread_csv(x2)$text\n#&gt; [1] \"\\x82\\xb1\\x82\\xf1\\x82É‚\\xbf\\x82\\xcd\"\n\nè¦æ­£ç¡®è¯»å–è¿™äº›å†…å®¹ï¼Œä½ éœ€è¦é€šè¿‡ locale å‚æ•°æŒ‡å®šç¼–ç ï¼š\n\nread_csv(x1, locale = locale(encoding = \"Latin1\"))$text\n#&gt; [1] \"El NiÃ±o was particularly bad this year\"\n\nread_csv(x2, locale = locale(encoding = \"Shift-JIS\"))$text\n#&gt; [1] \"ã“ã‚“ã«ã¡ã¯\"\n\nä½ å¦‚ä½•æ‰¾åˆ°æ­£ç¡®çš„ç¼–ç ï¼Ÿå¦‚æœå¹¸è¿çš„è¯ï¼Œå®ƒä¼šåŒ…å«åœ¨æ•°æ®æ–‡æ¡£çš„æŸä¸ªåœ°æ–¹ã€‚ä¸å¹¸çš„æ˜¯ï¼Œè¿™ç§æƒ…å†µå¾ˆå°‘è§ï¼Œæ‰€ä»¥ readr æä¾›äº† guess_encoding() æ¥å¸®åŠ©ä½ æ‰¾å‡ºå®ƒã€‚å®ƒä¸æ˜¯ä¸‡æ— ä¸€å¤±çš„ï¼Œå¹¶ä¸”åœ¨ä½ æœ‰å¾ˆå¤šæ–‡æœ¬æ—¶æ•ˆæœæ›´å¥½ï¼ˆä¸åƒè¿™é‡Œï¼‰ï¼Œä½†å®ƒæ˜¯ä¸€ä¸ªåˆç†çš„èµ·ç‚¹ã€‚é¢„è®¡ä½ éœ€è¦å°è¯•å‡ ç§ä¸åŒçš„ç¼–ç æ‰èƒ½æ‰¾åˆ°æ­£ç¡®çš„é‚£ä¸ªã€‚\nç¼–ç æ˜¯ä¸€ä¸ªä¸°å¯Œè€Œå¤æ‚çš„ä¸»é¢˜ï¼›æˆ‘ä»¬åœ¨è¿™é‡Œåªè§¦åŠäº†çš®æ¯›ã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šï¼Œæˆ‘ä»¬å»ºè®®é˜…è¯» http://kunststube.net/encoding/ ä¸Šçš„è¯¦ç»†è§£é‡Šã€‚\n\n14.6.2 å­—æ¯å˜ä½“\nåœ¨å¤„ç†å¸¦é‡éŸ³çš„è¯­è¨€æ—¶ï¼Œç¡®å®šå­—æ¯çš„ä½ç½®ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨ str_length() å’Œ str_sub()ï¼‰ä¼šå¸¦æ¥ä¸€ä¸ªé‡å¤§æŒ‘æˆ˜ï¼Œå› ä¸ºå¸¦é‡éŸ³çš„å­—æ¯å¯èƒ½è¢«ç¼–ç ä¸ºå•ä¸ªç‹¬ç«‹çš„å­—ç¬¦ï¼ˆä¾‹å¦‚ï¼ŒÃ¼ï¼‰ï¼Œæˆ–è€…é€šè¿‡ç»„åˆä¸€ä¸ªä¸å¸¦é‡éŸ³çš„å­—æ¯ï¼ˆä¾‹å¦‚ï¼Œuï¼‰å’Œä¸€ä¸ªå˜éŸ³ç¬¦å·ï¼ˆä¾‹å¦‚ï¼ŒÂ¨ï¼‰æ¥ç¼–ç ä¸ºä¸¤ä¸ªå­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œè¿™æ®µä»£ç æ˜¾ç¤ºäº†ä¸¤ç§çœ‹èµ·æ¥ç›¸åŒçš„ Ã¼ çš„è¡¨ç¤ºæ–¹æ³•ï¼š\n\nu &lt;- c(\"\\u00fc\", \"u\\u0308\")\nstr_view(u)\n#&gt; [1] â”‚ Ã¼\n#&gt; [2] â”‚ uÌˆ\n\nä½†è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ä¸åŒï¼Œå¹¶ä¸”å®ƒä»¬çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¹Ÿä¸åŒï¼š\n\nstr_length(u)\n#&gt; [1] 1 2\nstr_sub(u, 1, 1)\n#&gt; [1] \"Ã¼\" \"u\"\n\næœ€åï¼Œè¯·æ³¨æ„ï¼Œä½¿ç”¨ == æ¯”è¾ƒè¿™äº›å­—ç¬¦ä¸²ä¼šå°†å®ƒä»¬è§£é‡Šä¸ºä¸åŒçš„ï¼Œè€Œ stringr ä¸­æ–¹ä¾¿çš„ str_equal() å‡½æ•°åˆ™èƒ½è¯†åˆ«å‡ºå®ƒä»¬ä¿©å…·æœ‰ç›¸åŒçš„å¤–è§‚ï¼š\n\nu[[1]] == u[[2]]\n#&gt; [1] FALSE\n\nstr_equal(u[[1]], u[[2]])\n#&gt; [1] TRUE\n\n\n14.6.3 ä¾èµ–äºåŒºåŸŸè®¾ç½®çš„å‡½æ•°\næœ€åï¼Œè¿˜æœ‰ä¸€äº› stringr å‡½æ•°çš„è¡Œä¸ºå–å†³äºä½ çš„åŒºåŸŸè®¾ç½® (locale)ã€‚åŒºåŸŸè®¾ç½®ç±»ä¼¼äºä¸€ç§è¯­è¨€ï¼Œä½†åŒ…å«ä¸€ä¸ªå¯é€‰çš„åœ°åŒºè¯´æ˜ç¬¦ï¼Œä»¥å¤„ç†ä¸€ç§è¯­è¨€å†…éƒ¨çš„åœ°åŒºå·®å¼‚ã€‚åŒºåŸŸè®¾ç½®ç”±ä¸€ä¸ªå°å†™çš„è¯­è¨€ç¼©å†™æŒ‡å®šï¼Œåé¢å¯ä»¥é€‰æ‹©æ€§åœ°è·Ÿä¸€ä¸ª _ å’Œä¸€ä¸ªå¤§å†™çš„åœ°åŒºæ ‡è¯†ç¬¦ã€‚ä¾‹å¦‚ï¼Œâ€œenâ€ æ˜¯è‹±è¯­ï¼Œâ€œen_GBâ€ æ˜¯è‹±å¼è‹±è¯­ï¼Œâ€œen_USâ€ æ˜¯ç¾å¼è‹±è¯­ã€‚å¦‚æœä½ è¿˜ä¸çŸ¥é“ä½ è¯­è¨€çš„ä»£ç ï¼Œç»´åŸºç™¾ç§‘ æœ‰ä¸€ä¸ªå¾ˆå¥½çš„åˆ—è¡¨ï¼Œä½ å¯ä»¥é€šè¿‡æŸ¥çœ‹ stringi::stri_locale_list() æ¥çœ‹çœ‹ stringr æ”¯æŒå“ªäº›ã€‚\nR base çš„å­—ç¬¦ä¸²å‡½æ•°ä¼šè‡ªåŠ¨ä½¿ç”¨ä½ çš„æ“ä½œç³»ç»Ÿè®¾ç½®çš„åŒºåŸŸè®¾ç½®ã€‚è¿™æ„å‘³ç€ R base çš„å­—ç¬¦ä¸²å‡½æ•°ä¼šæŒ‰ç…§ä½ æœŸæœ›çš„æ–¹å¼å¯¹ä½ çš„è¯­è¨€è¿›è¡Œæ“ä½œï¼Œä½†å¦‚æœä½ çš„ä»£ç ä¸ç”Ÿæ´»åœ¨ä¸åŒå›½å®¶çš„äººå…±äº«ï¼Œå®ƒå¯èƒ½ä¼šæœ‰ä¸åŒçš„è¡¨ç°ã€‚ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œstringr é»˜è®¤ä½¿ç”¨ â€œenâ€ åŒºåŸŸè®¾ç½®çš„è‹±è¯­è§„åˆ™ï¼Œå¹¶è¦æ±‚ä½ æŒ‡å®š locale å‚æ•°æ¥è¦†ç›–å®ƒã€‚å¹¸è¿çš„æ˜¯ï¼Œåªæœ‰ä¸¤ç»„å‡½æ•°çš„åŒºåŸŸè®¾ç½®çœŸæ­£é‡è¦ï¼šæ”¹å˜å¤§å°å†™å’Œæ’åºã€‚\næ”¹å˜å¤§å°å†™çš„è§„åˆ™åœ¨ä¸åŒè¯­è¨€ä¸­æœ‰æ‰€ä¸åŒã€‚ä¾‹å¦‚ï¼ŒåœŸè€³å…¶è¯­ä¸­æœ‰ä¸¤ä¸ª iï¼šå¸¦ç‚¹å’Œä¸å¸¦ç‚¹çš„ã€‚ç”±äºå®ƒä»¬æ˜¯ä¸¤ä¸ªä¸åŒçš„å­—æ¯ï¼Œå®ƒä»¬çš„å¤§å°å†™è½¬æ¢ä¹Ÿä¸åŒï¼š\n\nstr_to_upper(c(\"i\", \"Ä±\"))\n#&gt; [1] \"I\" \"I\"\nstr_to_upper(c(\"i\", \"Ä±\"), locale = \"tr\")\n#&gt; [1] \"Ä°\" \"I\"\n\nå¯¹å­—ç¬¦ä¸²è¿›è¡Œæ’åºå–å†³äºå­—æ¯è¡¨çš„é¡ºåºï¼Œè€Œå­—æ¯è¡¨çš„é¡ºåºåœ¨æ¯ç§è¯­è¨€ä¸­éƒ½ä¸å°½ç›¸åŒ9ï¼è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­ï¼šåœ¨æ·å…‹è¯­ä¸­ï¼Œâ€œchâ€ æ˜¯ä¸€ä¸ªå¤åˆå­—æ¯ï¼Œå®ƒåœ¨å­—æ¯è¡¨ä¸­å‡ºç°åœ¨ h ä¹‹åã€‚\n\nstr_sort(c(\"a\", \"c\", \"ch\", \"h\", \"z\"))\n#&gt; [1] \"a\"  \"c\"  \"ch\" \"h\"  \"z\"\nstr_sort(c(\"a\", \"c\", \"ch\", \"h\", \"z\"), locale = \"cs\")\n#&gt; [1] \"a\"  \"c\"  \"h\"  \"ch\" \"z\"\n\nè¿™åœ¨ä½¿ç”¨ dplyr::arrange() å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ’åºæ—¶ä¹Ÿä¼šå‡ºç°ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå®ƒä¹Ÿæœ‰ä¸€ä¸ª locale å‚æ•°ã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>14</span>Â  <span class='chapter-title'>å­—ç¬¦ä¸²</span>"
    ]
  },
  {
    "objectID": "strings.html#æ€»ç»“",
    "href": "strings.html#æ€»ç»“",
    "title": "14Â  å­—ç¬¦ä¸²",
    "section": "\n14.7 æ€»ç»“",
    "text": "14.7 æ€»ç»“\nåœ¨æœ¬ç« ä¸­ï¼Œä½ å·²ç»äº†è§£äº† stringr åŒ…çš„ä¸€äº›å¼ºå¤§åŠŸèƒ½ï¼šå¦‚ä½•åˆ›å»ºã€ç»„åˆå’Œæå–å­—ç¬¦ä¸²ï¼Œä»¥åŠåœ¨å¤„ç†éè‹±è¯­å­—ç¬¦ä¸²æ—¶å¯èƒ½é¢ä¸´çš„ä¸€äº›æŒ‘æˆ˜ã€‚ç°åœ¨æ˜¯æ—¶å€™å­¦ä¹ ä¸€ä¸ªå¤„ç†å­—ç¬¦ä¸²æœ€é‡è¦ã€æœ€å¼ºå¤§çš„å·¥å…·ä¹‹ä¸€äº†ï¼šæ­£åˆ™è¡¨è¾¾å¼ã€‚æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä¸€ç§éå¸¸ç®€æ´ä½†è¡¨è¾¾èƒ½åŠ›æå¼ºçš„è¯­è¨€ï¼Œç”¨äºæè¿°å­—ç¬¦ä¸²å†…çš„æ¨¡å¼ï¼Œå®ƒæ˜¯ä¸‹ä¸€ç« çš„ä¸»é¢˜ã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>14</span>Â  <span class='chapter-title'>å­—ç¬¦ä¸²</span>"
    ]
  },
  {
    "objectID": "strings.html#footnotes",
    "href": "strings.html#footnotes",
    "title": "14Â  å­—ç¬¦ä¸²",
    "section": "",
    "text": "æˆ–è€…ä½¿ç”¨ R base å‡½æ•° writeLines()ã€‚â†©ï¸\nR 4.0.0 åŠä»¥ä¸Šç‰ˆæœ¬å¯ç”¨ã€‚â†©ï¸\nstr_view() è¿˜ä½¿ç”¨é¢œè‰²æ¥æè¯·ä½ æ³¨æ„åˆ¶è¡¨ç¬¦ã€ç©ºæ ¼ã€åŒ¹é…é¡¹ç­‰ã€‚è¿™äº›é¢œè‰²ç›®å‰åœ¨ä¹¦ä¸­ä¸æ˜¾ç¤ºï¼Œä½†ä½ åœ¨äº¤äº’å¼è¿è¡Œä»£ç æ—¶ä¼šæ³¨æ„åˆ°å®ƒä»¬ã€‚â†©ï¸\nå¦‚æœä½ æ²¡æœ‰ä½¿ç”¨ stringrï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥ç”¨ glue::glue() æ¥è®¿é—®å®ƒã€‚â†©ï¸\nR base ä¸­ä¸ä¹‹ç­‰ä»·çš„æ˜¯ä½¿ç”¨ collapse å‚æ•°çš„ paste()ã€‚â†©ï¸\nåŒæ ·çš„åŸåˆ™ä¹Ÿé€‚ç”¨äº separate_wider_position() å’Œ separate_wider_regex()ã€‚â†©ï¸\næŸ¥çœ‹è¿™äº›æ¡ç›®ï¼Œæˆ‘ä»¬çŒœæµ‹ babynames æ•°æ®ä¸¢å¼ƒäº†ç©ºæ ¼æˆ–è¿å­—ç¬¦ï¼Œå¹¶åœ¨ 15 ä¸ªå­—æ¯åæˆªæ–­ã€‚â†©ï¸\nåœ¨è¿™é‡Œï¼Œæˆ‘ä½¿ç”¨ç‰¹æ®Šçš„ \\x å°†äºŒè¿›åˆ¶æ•°æ®ç›´æ¥ç¼–ç åˆ°å­—ç¬¦ä¸²ä¸­ã€‚â†©ï¸\nåœ¨æ²¡æœ‰å­—æ¯è¡¨çš„è¯­è¨€ï¼ˆå¦‚ä¸­æ–‡ï¼‰ä¸­æ’åºåˆ™æ›´ä¸ºå¤æ‚ã€‚â†©ï¸",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>14</span>Â  <span class='chapter-title'>å­—ç¬¦ä¸²</span>"
    ]
  },
  {
    "objectID": "regexps.html",
    "href": "regexps.html",
    "title": "15Â  æ­£åˆ™è¡¨è¾¾å¼",
    "section": "",
    "text": "15.1 å¼•è¨€\nåœ¨ Chapter 14 ä¸­ï¼Œä½ å­¦ä¹ äº†è®¸å¤šå¤„ç†å­—ç¬¦ä¸²çš„æœ‰ç”¨å‡½æ•°ã€‚æœ¬ç« å°†é‡ç‚¹ä»‹ç»ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„å‡½æ•°ï¼Œè¿™æ˜¯ä¸€ç§ç”¨äºæè¿°å­—ç¬¦ä¸²å†…æ¨¡å¼çš„ç®€æ´è€Œå¼ºå¤§çš„è¯­è¨€ã€‚æœ¯è¯­â€œregular expressionâ€æœ‰ç‚¹æ‹—å£ï¼Œæ‰€ä»¥å¤§å¤šæ•°äººå°†å…¶ç¼©å†™ä¸ºâ€œregexâ€1 æˆ–â€œregexpâ€ã€‚\næœ¬ç« é¦–å…ˆä»‹ç»æ­£åˆ™è¡¨è¾¾å¼çš„åŸºç¡€çŸ¥è¯†å’Œç”¨äºæ•°æ®åˆ†æçš„æœ€æœ‰ç”¨çš„ stringr å‡½æ•°ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†æ‰©å±•ä½ å¯¹æ¨¡å¼çš„çŸ¥è¯†ï¼Œå¹¶æ¶µç›–ä¸ƒä¸ªé‡è¦çš„æ–°ä¸»é¢˜ï¼ˆè½¬ä¹‰ã€é”šç‚¹ã€å­—ç¬¦ç±»ã€ç®€å†™ç±»ã€é‡è¯ã€ä¼˜å…ˆçº§å’Œåˆ†ç»„ï¼‰ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è®¨è®º stringr å‡½æ•°å¯ä»¥å¤„ç†çš„å…¶ä»–ç±»å‹çš„æ¨¡å¼ä»¥åŠå…è®¸ä½ è°ƒæ•´æ­£åˆ™è¡¨è¾¾å¼æ“ä½œçš„å„ç§â€œæ ‡å¿—â€ã€‚æœ€åï¼Œæˆ‘ä»¬å°†æ¦‚è¿°åœ¨ tidyverse å’Œ R base ä¸­å¯èƒ½ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„å…¶ä»–åœ°æ–¹ã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>15</span>Â  <span class='chapter-title'>æ­£åˆ™è¡¨è¾¾å¼</span>"
    ]
  },
  {
    "objectID": "regexps.html#å¼•è¨€",
    "href": "regexps.html#å¼•è¨€",
    "title": "15Â  æ­£åˆ™è¡¨è¾¾å¼",
    "section": "",
    "text": "15.1.1 å…ˆå†³æ¡ä»¶\nåœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ stringr å’Œ tidyr ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼å‡½æ•°ï¼Œå®ƒä»¬éƒ½æ˜¯ tidyverse çš„æ ¸å¿ƒæˆå‘˜ï¼Œä»¥åŠæ¥è‡ª babynames åŒ…çš„æ•°æ®ã€‚\n\nlibrary(tidyverse)\nlibrary(babynames)\n\nåœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ··åˆä½¿ç”¨éå¸¸ç®€å•çš„å†…è”ç¤ºä¾‹ä»¥ä¾¿ä½ æŒæ¡åŸºæœ¬æ¦‚å¿µï¼ŒåŒæ—¶ä¹Ÿä¼šä½¿ç”¨ babynames æ•°æ®ä»¥åŠæ¥è‡ª stringr çš„ä¸‰ä¸ªå­—ç¬¦å‘é‡ï¼š\n\n\nfruit åŒ…å«äº† 80 ç§æ°´æœçš„åç§°ã€‚\n\nwords åŒ…å«äº† 980 ä¸ªå¸¸è§çš„è‹±è¯­å•è¯ã€‚\n\nsentences åŒ…å«äº† 720 ä¸ªç®€çŸ­çš„å¥å­ã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>15</span>Â  <span class='chapter-title'>æ­£åˆ™è¡¨è¾¾å¼</span>"
    ]
  },
  {
    "objectID": "regexps.html#sec-reg-basics",
    "href": "regexps.html#sec-reg-basics",
    "title": "15Â  æ­£åˆ™è¡¨è¾¾å¼",
    "section": "\n15.2 æ¨¡å¼åŸºç¡€",
    "text": "15.2 æ¨¡å¼åŸºç¡€\næˆ‘ä»¬å°†ä½¿ç”¨ str_view() æ¥å­¦ä¹ æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚åœ¨ä¸Šä¸€ç« ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ str_view() æ¥æ›´å¥½åœ°ç†è§£å­—ç¬¦ä¸²ä¸å…¶æ‰“å°è¡¨ç¤ºå½¢å¼çš„åŒºåˆ«ï¼Œç°åœ¨æˆ‘ä»¬å°†ä½¿ç”¨å®ƒçš„ç¬¬äºŒä¸ªå‚æ•°â€”â€”ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ã€‚å½“æä¾›è¿™ä¸ªå‚æ•°æ—¶ï¼Œstr_view() å°†åªæ˜¾ç¤ºå­—ç¬¦ä¸²å‘é‡ä¸­åŒ¹é…çš„å…ƒç´ ï¼Œç”¨ &lt;&gt; åŒ…å›´æ¯ä¸ªåŒ¹é…é¡¹ï¼Œå¹¶åœ¨å¯èƒ½çš„æƒ…å†µä¸‹ç”¨è“è‰²é«˜äº®æ˜¾ç¤ºåŒ¹é…é¡¹ã€‚\næœ€ç®€å•çš„æ¨¡å¼ç”±å­—æ¯å’Œæ•°å­—ç»„æˆï¼Œå®ƒä»¬ç²¾ç¡®åŒ¹é…é‚£äº›å­—ç¬¦ï¼š\n\nstr_view(fruit, \"berry\")\n#&gt;  [6] â”‚ bil&lt;berry&gt;\n#&gt;  [7] â”‚ black&lt;berry&gt;\n#&gt; [10] â”‚ blue&lt;berry&gt;\n#&gt; [11] â”‚ boysen&lt;berry&gt;\n#&gt; [19] â”‚ cloud&lt;berry&gt;\n#&gt; [21] â”‚ cran&lt;berry&gt;\n#&gt; ... and 8 more\n\nå­—æ¯å’Œæ•°å­—ç²¾ç¡®åŒ¹é…ï¼Œè¢«ç§°ä¸ºå­—é¢é‡å­—ç¬¦ (literal characters)ã€‚å¤§å¤šæ•°æ ‡ç‚¹ç¬¦å·ï¼Œå¦‚ .ã€+ã€*ã€[ã€] å’Œ ?ï¼Œå…·æœ‰ç‰¹æ®Šå«ä¹‰2ï¼Œè¢«ç§°ä¸ºå…ƒå­—ç¬¦ (metacharacters)ã€‚ä¾‹å¦‚ï¼Œ. å°†åŒ¹é…ä»»ä½•å­—ç¬¦3ï¼Œæ‰€ä»¥ \"a.\" å°†åŒ¹é…ä»»ä½•åŒ…å«ä¸€ä¸ª â€œaâ€ åè·Ÿå¦ä¸€ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²ï¼š\n\nstr_view(c(\"a\", \"ab\", \"ae\", \"bd\", \"ea\", \"eab\"), \"a.\")\n#&gt; [2] â”‚ &lt;ab&gt;\n#&gt; [3] â”‚ &lt;ae&gt;\n#&gt; [6] â”‚ e&lt;ab&gt;\n\næˆ–è€…æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°æ‰€æœ‰åŒ…å«ä¸€ä¸ª â€œaâ€ï¼Œåè·Ÿä¸‰ä¸ªå­—æ¯ï¼Œå†åè·Ÿä¸€ä¸ª â€œeâ€ çš„æ°´æœï¼š\n\nstr_view(fruit, \"a...e\")\n#&gt;  [1] â”‚ &lt;apple&gt;\n#&gt;  [7] â”‚ bl&lt;ackbe&gt;rry\n#&gt; [48] â”‚ mand&lt;arine&gt;\n#&gt; [51] â”‚ nect&lt;arine&gt;\n#&gt; [62] â”‚ pine&lt;apple&gt;\n#&gt; [64] â”‚ pomegr&lt;anate&gt;\n#&gt; ... and 2 more\n\né‡è¯ (Quantifiers) æ§åˆ¶ä¸€ä¸ªæ¨¡å¼å¯ä»¥åŒ¹é…å¤šå°‘æ¬¡ï¼š\n\n\n? ä½¿ä¸€ä¸ªæ¨¡å¼æˆä¸ºå¯é€‰çš„ï¼ˆå³å®ƒåŒ¹é… 0 æ¬¡æˆ– 1 æ¬¡ï¼‰\n\n+ è®©ä¸€ä¸ªæ¨¡å¼é‡å¤ï¼ˆå³å®ƒè‡³å°‘åŒ¹é…ä¸€æ¬¡ï¼‰\n\n* è®©ä¸€ä¸ªæ¨¡å¼æ—¢æ˜¯å¯é€‰çš„åˆå¯ä»¥é‡å¤ï¼ˆå³å®ƒåŒ¹é…ä»»æ„æ¬¡æ•°ï¼ŒåŒ…æ‹¬ 0 æ¬¡ï¼‰ã€‚\n\n\n# ab? åŒ¹é…ä¸€ä¸ª \"a\"ï¼Œåé¢å¯é€‰åœ°è·Ÿç€ä¸€ä¸ª \"b\"ã€‚\nstr_view(c(\"a\", \"ab\", \"abb\"), \"ab?\")\n#&gt; [1] â”‚ &lt;a&gt;\n#&gt; [2] â”‚ &lt;ab&gt;\n#&gt; [3] â”‚ &lt;ab&gt;b\n\n# ab+ åŒ¹é…ä¸€ä¸ª \"a\"ï¼Œåé¢è·Ÿç€è‡³å°‘ä¸€ä¸ª \"b\"ã€‚\nstr_view(c(\"a\", \"ab\", \"abb\"), \"ab+\")\n#&gt; [2] â”‚ &lt;ab&gt;\n#&gt; [3] â”‚ &lt;abb&gt;\n\n# ab* åŒ¹é…ä¸€ä¸ª \"a\"ï¼Œåé¢è·Ÿç€ä»»æ„æ•°é‡çš„ \"b\"ã€‚\nstr_view(c(\"a\", \"ab\", \"abb\"), \"ab*\")\n#&gt; [1] â”‚ &lt;a&gt;\n#&gt; [2] â”‚ &lt;ab&gt;\n#&gt; [3] â”‚ &lt;abb&gt;\n\nå­—ç¬¦ç±» (Character classes) ç”± [] å®šä¹‰ï¼Œè®©ä½ åŒ¹é…ä¸€ç»„å­—ç¬¦ä¸­çš„ä»»æ„ä¸€ä¸ªï¼Œä¾‹å¦‚ [abcd] åŒ¹é… â€œaâ€ã€â€œbâ€ã€â€œcâ€ æˆ– â€œdâ€ã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ ^ å¼€å¤´æ¥åè½¬åŒ¹é…ï¼š[^abcd] åŒ¹é…é™¤äº† â€œaâ€ã€â€œbâ€ã€â€œcâ€ æˆ– â€œdâ€ ä¹‹å¤–çš„ä»»ä½•ä¸œè¥¿ã€‚æˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªæ€æƒ³æ¥æ‰¾åˆ°åŒ…å«ä¸€ä¸ªè¢«å…ƒéŸ³åŒ…å›´çš„ â€œxâ€ çš„å•è¯ï¼Œæˆ–è€…ä¸€ä¸ªè¢«è¾…éŸ³åŒ…å›´çš„ â€œyâ€ çš„å•è¯ï¼š\n\nstr_view(words, \"[aeiou]x[aeiou]\")\n#&gt; [284] â”‚ &lt;exa&gt;ct\n#&gt; [285] â”‚ &lt;exa&gt;mple\n#&gt; [288] â”‚ &lt;exe&gt;rcise\n#&gt; [289] â”‚ &lt;exi&gt;st\nstr_view(words, \"[^aeiou]y[^aeiou]\")\n#&gt; [836] â”‚ &lt;sys&gt;tem\n#&gt; [901] â”‚ &lt;typ&gt;e\n\nä½ å¯ä»¥ä½¿ç”¨äº¤æ›¿ (alternation)ï¼Œå³ |ï¼Œæ¥åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªå¤‡é€‰æ¨¡å¼ä¹‹é—´è¿›è¡Œé€‰æ‹©ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„æ¨¡å¼æŸ¥æ‰¾åŒ…å« â€œappleâ€ã€â€œmelonâ€ æˆ– â€œnutâ€ çš„æ°´æœï¼Œæˆ–è€…åŒ…å«é‡å¤å…ƒéŸ³çš„æ°´æœã€‚\n\nstr_view(fruit, \"apple|melon|nut\")\n#&gt;  [1] â”‚ &lt;apple&gt;\n#&gt; [13] â”‚ canary &lt;melon&gt;\n#&gt; [20] â”‚ coco&lt;nut&gt;\n#&gt; [52] â”‚ &lt;nut&gt;\n#&gt; [62] â”‚ pine&lt;apple&gt;\n#&gt; [72] â”‚ rock &lt;melon&gt;\n#&gt; ... and 1 more\nstr_view(fruit, \"aa|ee|ii|oo|uu\")\n#&gt;  [9] â”‚ bl&lt;oo&gt;d orange\n#&gt; [33] â”‚ g&lt;oo&gt;seberry\n#&gt; [47] â”‚ lych&lt;ee&gt;\n#&gt; [66] â”‚ purple mangost&lt;ee&gt;n\n\næ­£åˆ™è¡¨è¾¾å¼éå¸¸ç´§å‡‘ï¼Œä½¿ç”¨äº†å¤§é‡çš„æ ‡ç‚¹ç¬¦å·ï¼Œæ‰€ä»¥åˆçœ‹èµ·æ¥å¯èƒ½ä¼šè®©äººä¸çŸ¥æ‰€æªï¼Œéš¾ä»¥é˜…è¯»ã€‚åˆ«æ‹…å¿ƒï¼Œå¤šåŠ ç»ƒä¹ ä½ å°±ä¼šè¶Šæ¥è¶Šå¥½ï¼Œç®€å•çš„æ¨¡å¼å¾ˆå¿«å°±ä¼šæˆä¸ºä½ çš„ç¬¬äºŒå¤©æ€§ã€‚è®©æˆ‘ä»¬é€šè¿‡ä¸€äº›æœ‰ç”¨çš„ stringr å‡½æ•°æ¥å¼€å§‹è¿™ä¸ªè¿‡ç¨‹å§ã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>15</span>Â  <span class='chapter-title'>æ­£åˆ™è¡¨è¾¾å¼</span>"
    ]
  },
  {
    "objectID": "regexps.html#sec-stringr-regex-funs",
    "href": "regexps.html#sec-stringr-regex-funs",
    "title": "15Â  æ­£åˆ™è¡¨è¾¾å¼",
    "section": "\n15.3 å…³é”®å‡½æ•°",
    "text": "15.3 å…³é”®å‡½æ•°\næ—¢ç„¶ä½ å·²ç»æŒæ¡äº†æ­£åˆ™è¡¨è¾¾å¼çš„åŸºç¡€çŸ¥è¯†ï¼Œè®©æˆ‘ä»¬å°†å®ƒä»¬ä¸ä¸€äº› stringr å’Œ tidyr å‡½æ•°ä¸€èµ·ä½¿ç”¨ã€‚åœ¨æ¥ä¸‹æ¥çš„éƒ¨åˆ†ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•æ£€æµ‹åŒ¹é…çš„å­˜åœ¨ä¸å¦ï¼Œå¦‚ä½•è®¡ç®—åŒ¹é…çš„æ•°é‡ï¼Œå¦‚ä½•ç”¨å›ºå®šçš„æ–‡æœ¬æ›¿æ¢åŒ¹é…é¡¹ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨æ¨¡å¼æå–æ–‡æœ¬ã€‚\n\n15.3.1 æ£€æµ‹åŒ¹é…\nstr_detect() è¿”å›ä¸€ä¸ªé€»è¾‘å‘é‡ï¼Œå¦‚æœæ¨¡å¼åŒ¹é…å­—ç¬¦å‘é‡ä¸­çš„æŸä¸ªå…ƒç´ ï¼Œåˆ™ä¸º TRUEï¼Œå¦åˆ™ä¸º FALSEï¼š\n\nstr_detect(c(\"a\", \"b\", \"c\"), \"[aeiou]\")\n#&gt; [1]  TRUE FALSE FALSE\n\nç”±äº str_detect() è¿”å›ä¸€ä¸ªä¸åˆå§‹å‘é‡é•¿åº¦ç›¸åŒçš„é€»è¾‘å‘é‡ï¼Œå®ƒä¸ filter() é…åˆå¾—å¾ˆå¥½ã€‚ä¾‹å¦‚ï¼Œè¿™æ®µä»£ç æ‰¾åˆ°äº†æ‰€æœ‰åŒ…å«å°å†™å­—æ¯ â€œxâ€ çš„æœ€å—æ¬¢è¿çš„åå­—ï¼š\n\nbabynames |&gt; \n  filter(str_detect(name, \"x\")) |&gt; \n  count(name, wt = n, sort = TRUE)\n#&gt; # A tibble: 974 Ã— 2\n#&gt;   name           n\n#&gt;   &lt;chr&gt;      &lt;int&gt;\n#&gt; 1 Alexander 665492\n#&gt; 2 Alexis    399551\n#&gt; 3 Alex      278705\n#&gt; 4 Alexandra 232223\n#&gt; 5 Max       148787\n#&gt; 6 Alexa     123032\n#&gt; # â„¹ 968 more rows\n\næˆ‘ä»¬ä¹Ÿå¯ä»¥å°† str_detect() ä¸ summarize() ä¸€èµ·ä½¿ç”¨ï¼Œæ–¹æ³•æ˜¯å°†å…¶ä¸ sum() æˆ– mean() é…å¯¹ï¼šsum(str_detect(x, pattern)) å‘Šè¯‰ä½ åŒ¹é…çš„è§‚æµ‹æ•°é‡ï¼Œè€Œ mean(str_detect(x, pattern)) å‘Šè¯‰ä½ åŒ¹é…çš„æ¯”ä¾‹ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç ç‰‡æ®µè®¡ç®—å¹¶å¯è§†åŒ–äº†åŒ…å« â€œxâ€ çš„å©´å„¿åå­—4çš„æ¯”ä¾‹ï¼Œå¹¶æŒ‰å¹´ä»½è¿›è¡Œäº†åˆ†è§£ã€‚çœ‹èµ·æ¥å®ƒä»¬æœ€è¿‘çš„å—æ¬¢è¿ç¨‹åº¦æ€¥å‰§ä¸Šå‡äº†ï¼\n\nbabynames |&gt; \n  group_by(year) |&gt; \n  summarize(prop_x = mean(str_detect(name, \"x\"))) |&gt; \n  ggplot(aes(x = year, y = prop_x)) + \n  geom_line()\n\n\n\n\n\n\n\næœ‰ä¸¤ä¸ªä¸ str_detect() å¯†åˆ‡ç›¸å…³çš„å‡½æ•°ï¼šstr_subset() å’Œ str_which()ã€‚str_subset() è¿”å›ä¸€ä¸ªå­—ç¬¦å‘é‡ï¼Œä»…åŒ…å«åŒ¹é…çš„å­—ç¬¦ä¸²ã€‚str_which() è¿”å›ä¸€ä¸ªæ•´æ•°å‘é‡ï¼Œç»™å‡ºåŒ¹é…å­—ç¬¦ä¸²çš„ä½ç½®ã€‚\n\n15.3.2 è®¡æ•°åŒ¹é…\næ¯” str_detect() å¤æ‚ä¸€æ­¥çš„æ˜¯ str_count()ï¼šå®ƒä¸æ˜¯è¿”å› TRUE æˆ– FALSEï¼Œè€Œæ˜¯å‘Šè¯‰ä½ æ¯ä¸ªå­—ç¬¦ä¸²ä¸­æœ‰å¤šå°‘ä¸ªåŒ¹é…é¡¹ã€‚\n\nx &lt;- c(\"apple\", \"banana\", \"pear\")\nstr_count(x, \"p\")\n#&gt; [1] 2 0 1\n\nè¯·æ³¨æ„ï¼Œæ¯ä¸ªåŒ¹é…éƒ½ä»å‰ä¸€ä¸ªåŒ¹é…çš„æœ«å°¾å¼€å§‹ï¼Œå³æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…ä»ä¸é‡å ã€‚ä¾‹å¦‚ï¼Œåœ¨ \"abababa\" ä¸­ï¼Œæ¨¡å¼ \"aba\" ä¼šåŒ¹é…å¤šå°‘æ¬¡ï¼Ÿæ­£åˆ™è¡¨è¾¾å¼ä¼šè¯´ä¸¤æ¬¡ï¼Œè€Œä¸æ˜¯ä¸‰æ¬¡ï¼š\n\nstr_count(\"abababa\", \"aba\")\n#&gt; [1] 2\nstr_view(\"abababa\", \"aba\")\n#&gt; [1] â”‚ &lt;aba&gt;b&lt;aba&gt;\n\nå¾ˆè‡ªç„¶åœ°ï¼Œstr_count() ä¼šä¸ mutate() ä¸€èµ·ä½¿ç”¨ã€‚ä¸‹é¢çš„ä¾‹å­ä½¿ç”¨ str_count() å’Œå­—ç¬¦ç±»æ¥è®¡ç®—æ¯ä¸ªåå­—ä¸­å…ƒéŸ³å’Œè¾…éŸ³çš„æ•°é‡ã€‚\n\nbabynames |&gt; \n  count(name) |&gt; \n  mutate(\n    vowels = str_count(name, \"[aeiou]\"),\n    consonants = str_count(name, \"[^aeiou]\")\n  )\n#&gt; # A tibble: 97,310 Ã— 4\n#&gt;   name          n vowels consonants\n#&gt;   &lt;chr&gt;     &lt;int&gt;  &lt;int&gt;      &lt;int&gt;\n#&gt; 1 Aaban        10      2          3\n#&gt; 2 Aabha         5      2          3\n#&gt; 3 Aabid         2      2          3\n#&gt; 4 Aabir         1      2          3\n#&gt; 5 Aabriella     5      4          5\n#&gt; 6 Aada          1      2          2\n#&gt; # â„¹ 97,304 more rows\n\nå¦‚æœä½ ä»”ç»†è§‚å¯Ÿï¼Œä½ ä¼šå‘ç°æˆ‘ä»¬çš„è®¡ç®—æœ‰äº›é—®é¢˜ï¼šâ€œAabanâ€ åŒ…å«ä¸‰ä¸ª â€œaâ€ï¼Œä½†æˆ‘ä»¬çš„æ‘˜è¦åªæŠ¥å‘Šäº†ä¸¤ä¸ªå…ƒéŸ³ã€‚è¿™æ˜¯å› ä¸ºæ­£åˆ™è¡¨è¾¾å¼æ˜¯åŒºåˆ†å¤§å°å†™çš„ã€‚æˆ‘ä»¬æœ‰ä¸‰ç§æ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š\n\nå°†å¤§å†™å…ƒéŸ³æ·»åŠ åˆ°å­—ç¬¦ç±»ä¸­ï¼šstr_count(name, \"[aeiouAEIOU]\")ã€‚\nå‘Šè¯‰æ­£åˆ™è¡¨è¾¾å¼å¿½ç•¥å¤§å°å†™ï¼šstr_count(name, regex(\"[aeiou]\", ignore_case = TRUE))ã€‚æˆ‘ä»¬å°†åœ¨ Section 15.5.1 ä¸­è¯¦ç»†è®¨è®ºã€‚\nä½¿ç”¨ str_to_lower() å°†åå­—è½¬æ¢ä¸ºå°å†™ï¼šstr_count(str_to_lower(name), \"[aeiou]\")ã€‚\n\nè¿™ç§å¤šæ ·åŒ–çš„æ–¹æ³•åœ¨å¤„ç†å­—ç¬¦ä¸²æ—¶éå¸¸å…¸å‹â€”â€”é€šå¸¸æœ‰å¤šç§æ–¹æ³•å¯ä»¥è¾¾åˆ°ä½ çš„ç›®æ ‡ï¼Œè¦ä¹ˆä½¿ä½ çš„æ¨¡å¼æ›´å¤æ‚ï¼Œè¦ä¹ˆå¯¹ä½ çš„å­—ç¬¦ä¸²è¿›è¡Œä¸€äº›é¢„å¤„ç†ã€‚å¦‚æœä½ åœ¨å°è¯•ä¸€ç§æ–¹æ³•æ—¶é‡åˆ°å›°éš¾ï¼Œè½¬æ¢æ€è·¯ä»ä¸åŒçš„è§’åº¦è§£å†³é—®é¢˜é€šå¸¸ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚\nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç”±äºæˆ‘ä»¬å¯¹åå­—åº”ç”¨äº†ä¸¤ä¸ªå‡½æ•°ï¼Œæˆ‘è®¤ä¸ºå…ˆè½¬æ¢å®ƒä¼šæ›´å®¹æ˜“ï¼š\n\nbabynames |&gt; \n  count(name) |&gt; \n  mutate(\n    name = str_to_lower(name),\n    vowels = str_count(name, \"[aeiou]\"),\n    consonants = str_count(name, \"[^aeiou]\")\n  )\n#&gt; # A tibble: 97,310 Ã— 4\n#&gt;   name          n vowels consonants\n#&gt;   &lt;chr&gt;     &lt;int&gt;  &lt;int&gt;      &lt;int&gt;\n#&gt; 1 aaban        10      3          2\n#&gt; 2 aabha         5      3          2\n#&gt; 3 aabid         2      3          2\n#&gt; 4 aabir         1      3          2\n#&gt; 5 aabriella     5      5          4\n#&gt; 6 aada          1      3          1\n#&gt; # â„¹ 97,304 more rows\n\n\n15.3.3 æ›¿æ¢å€¼\né™¤äº†æ£€æµ‹å’Œè®¡æ•°åŒ¹é…ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨ str_replace() å’Œ str_replace_all() æ¥ä¿®æ”¹å®ƒä»¬ã€‚str_replace() æ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ï¼Œè€Œé¡¾åæ€ä¹‰ï¼Œstr_replace_all() æ›¿æ¢æ‰€æœ‰åŒ¹é…é¡¹ã€‚\n\nx &lt;- c(\"apple\", \"pear\", \"banana\")\nstr_replace_all(x, \"[aeiou]\", \"-\")\n#&gt; [1] \"-ppl-\"  \"p--r\"   \"b-n-n-\"\n\nstr_remove() å’Œ str_remove_all() æ˜¯ str_replace(x, pattern, \"\") çš„ä¾¿æ·å¿«æ·æ–¹å¼ï¼š\n\nx &lt;- c(\"apple\", \"pear\", \"banana\")\nstr_remove_all(x, \"[aeiou]\")\n#&gt; [1] \"ppl\" \"pr\"  \"bnn\"\n\nåœ¨è¿›è¡Œæ•°æ®æ¸…ç†æ—¶ï¼Œè¿™äº›å‡½æ•°å¾ˆè‡ªç„¶åœ°ä¸ mutate() é…å¯¹ä½¿ç”¨ï¼Œä½ é€šå¸¸ä¼šåå¤åº”ç”¨å®ƒä»¬æ¥å‰¥ç¦»ä¸ä¸€è‡´çš„æ ¼å¼å±‚ã€‚\n\n15.3.4 æå–å˜é‡\næˆ‘ä»¬è¦è®¨è®ºçš„æœ€åä¸€ä¸ªå‡½æ•°ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å°†æ•°æ®ä»ä¸€åˆ—æå–åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªæ–°åˆ—ä¸­ï¼šseparate_wider_regex()ã€‚å®ƒæ˜¯ä½ åœ¨ Section 14.4.2 ä¸­å­¦åˆ°çš„ separate_wider_position() å’Œ separate_wider_delim() å‡½æ•°çš„åŒç±»ã€‚è¿™äº›å‡½æ•°ä½äº tidyr ä¸­ï¼Œå› ä¸ºå®ƒä»¬æ“ä½œçš„æ˜¯ï¼ˆæ•°æ®æ¡†çš„ï¼‰åˆ—ï¼Œè€Œä¸æ˜¯å•ä¸ªå‘é‡ã€‚\nè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•çš„æ•°æ®é›†æ¥å±•ç¤ºå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚è¿™é‡Œæˆ‘ä»¬æœ‰ä¸€äº›æºè‡ª babynames çš„æ•°æ®ï¼Œå…¶ä¸­æˆ‘ä»¬ä»¥ä¸€ç§ç›¸å½“å¥‡æ€ªçš„æ ¼å¼è®°å½•äº†ä¸€ç¾¤äººçš„åå­—ã€æ€§åˆ«å’Œå¹´é¾„5ï¼š\n\ndf &lt;- tribble(\n  ~str,\n  \"&lt;Sheryl&gt;-F_34\",\n  \"&lt;Kisha&gt;-F_45\", \n  \"&lt;Brandon&gt;-N_33\",\n  \"&lt;Sharon&gt;-F_38\", \n  \"&lt;Penny&gt;-F_58\",\n  \"&lt;Justin&gt;-M_41\", \n  \"&lt;Patricia&gt;-F_84\", \n)\n\nè¦ä½¿ç”¨ separate_wider_regex() æå–è¿™äº›æ•°æ®ï¼Œæˆ‘ä»¬åªéœ€è¦æ„å»ºä¸€ä¸ªåŒ¹é…æ¯ä¸ªéƒ¨åˆ†çš„æ­£åˆ™è¡¨è¾¾å¼åºåˆ—ã€‚å¦‚æœæˆ‘ä»¬å¸Œæœ›è¯¥éƒ¨åˆ†çš„å†…å®¹å‡ºç°åœ¨è¾“å‡ºä¸­ï¼Œæˆ‘ä»¬å°±ç»™å®ƒä¸€ä¸ªåå­—ï¼š\n\ndf |&gt; \n  separate_wider_regex(\n    str,\n    patterns = c(\n      \"&lt;\", \n      name = \"[A-Za-z]+\", \n      \"&gt;-\", \n      gender = \".\",\n      \"_\",\n      age = \"[0-9]+\"\n    )\n  )\n#&gt; # A tibble: 7 Ã— 3\n#&gt;   name    gender age  \n#&gt;   &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;\n#&gt; 1 Sheryl  F      34   \n#&gt; 2 Kisha   F      45   \n#&gt; 3 Brandon N      33   \n#&gt; 4 Sharon  F      38   \n#&gt; 5 Penny   F      58   \n#&gt; 6 Justin  M      41   \n#&gt; # â„¹ 1 more row\n\nå¦‚æœåŒ¹é…å¤±è´¥ï¼Œä½ å¯ä»¥ä½¿ç”¨ too_few = \"debug\" æ¥æ‰¾å‡ºé—®é¢˜æ‰€åœ¨ï¼Œå°±åƒ separate_wider_delim() å’Œ separate_wider_position() ä¸€æ ·ã€‚\n\n15.3.5 ç»ƒä¹ \n\nå“ªä¸ªå©´å„¿åå­—çš„å…ƒéŸ³æœ€å¤šï¼Ÿå“ªä¸ªåå­—çš„å…ƒéŸ³æ¯”ä¾‹æœ€é«˜ï¼Ÿï¼ˆæç¤ºï¼šåˆ†æ¯æ˜¯ä»€ä¹ˆï¼Ÿï¼‰\nå°† \"a/b/c/d/e\" ä¸­æ‰€æœ‰çš„æ­£æ–œæ æ›¿æ¢ä¸ºåæ–œæ ã€‚å¦‚æœä½ è¯•å›¾é€šè¿‡å°†æ‰€æœ‰åæ–œæ æ›¿æ¢ä¸ºæ­£æ–œæ æ¥æ’¤é”€è½¬æ¢ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿï¼ˆæˆ‘ä»¬å¾ˆå¿«å°±ä¼šè®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚ï¼‰\nä½¿ç”¨ str_replace_all() å®ç°ä¸€ä¸ªç®€å•ç‰ˆæœ¬çš„ str_to_lower()ã€‚\nåˆ›å»ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œä»¥åŒ¹é…ä½ æ‰€åœ¨å›½å®¶é€šå¸¸ä¹¦å†™çš„ç”µè¯å·ç ã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>15</span>Â  <span class='chapter-title'>æ­£åˆ™è¡¨è¾¾å¼</span>"
    ]
  },
  {
    "objectID": "regexps.html#æ¨¡å¼ç»†èŠ‚",
    "href": "regexps.html#æ¨¡å¼ç»†èŠ‚",
    "title": "15Â  æ­£åˆ™è¡¨è¾¾å¼",
    "section": "\n15.4 æ¨¡å¼ç»†èŠ‚",
    "text": "15.4 æ¨¡å¼ç»†èŠ‚\næ—¢ç„¶ä½ å·²ç»äº†è§£äº†æ¨¡å¼è¯­è¨€çš„åŸºç¡€çŸ¥è¯†ï¼Œä»¥åŠå¦‚ä½•å°†å®ƒä¸ä¸€äº› stringr å’Œ tidyr å‡½æ•°ä¸€èµ·ä½¿ç”¨ï¼Œç°åœ¨æ˜¯æ—¶å€™æ·±å…¥äº†è§£æ›´å¤šç»†èŠ‚äº†ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†ä»è½¬ä¹‰ (escaping) å¼€å§‹ï¼Œå®ƒå…è®¸ä½ åŒ¹é…é‚£äº›åŸæœ¬ä¼šè¢«ç‰¹æ®Šå¤„ç†çš„å…ƒå­—ç¬¦ã€‚æ¥ä¸‹æ¥ï¼Œä½ å°†å­¦ä¹ é”šç‚¹ (anchors)ï¼Œå®ƒå…è®¸ä½ åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å¤´æˆ–ç»“å°¾ã€‚ç„¶åï¼Œä½ å°†å­¦ä¹ æ›´å¤šå…³äºå­—ç¬¦ç±» (character classes) å’Œå®ƒä»¬çš„å¿«æ·æ–¹å¼ï¼Œè¿™ä½¿ä½ èƒ½å¤ŸåŒ¹é…ä¸€ä¸ªé›†åˆä¸­çš„ä»»ä½•å­—ç¬¦ã€‚æ¥ä¸‹æ¥ï¼Œä½ å°†å­¦ä¹ é‡è¯ (quantifiers) çš„æœ€åç»†èŠ‚ï¼Œå®ƒæ§åˆ¶ä¸€ä¸ªæ¨¡å¼å¯ä»¥åŒ¹é…å¤šå°‘æ¬¡ã€‚ç„¶åï¼Œæˆ‘ä»¬å¿…é¡»æ¶µç›–é‡è¦ï¼ˆä½†å¤æ‚ï¼‰çš„æ“ä½œç¬¦ä¼˜å…ˆçº§ (operator precedence) å’Œæ‹¬å·ã€‚æœ€åï¼Œæˆ‘ä»¬å°†ä»¥åˆ†ç»„ (grouping) æ¨¡å¼ç»„ä»¶çš„ä¸€äº›ç»†èŠ‚æ¥ç»“æŸã€‚\næˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨çš„æœ¯è¯­æ˜¯æ¯ä¸ªç»„ä»¶çš„ä¸“ä¸šåç§°ã€‚å®ƒä»¬å¹¶ä¸æ€»æ˜¯æœ€èƒ½è¯´æ˜å…¶ç”¨é€”ï¼Œä½†å¦‚æœä½ ä»¥åæƒ³ç”¨è°·æ­Œæœç´¢æ›´å¤šç»†èŠ‚ï¼Œäº†è§£æ­£ç¡®çš„æœ¯è¯­ä¼šéå¸¸æœ‰å¸®åŠ©ã€‚\n\n15.4.1 è½¬ä¹‰\nä¸ºäº†åŒ¹é…ä¸€ä¸ªå­—é¢æ„ä¹‰ä¸Šçš„ .ï¼Œä½ éœ€è¦ä¸€ä¸ªè½¬ä¹‰ (escape)ï¼Œå®ƒå‘Šè¯‰æ­£åˆ™è¡¨è¾¾å¼è¦å­—é¢åŒ¹é…å…ƒå­—ç¬¦6ã€‚åƒå­—ç¬¦ä¸²ä¸€æ ·ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¹Ÿä½¿ç”¨åæ–œæ è¿›è¡Œè½¬ä¹‰ã€‚æ‰€ä»¥ï¼Œè¦åŒ¹é…ä¸€ä¸ª .ï¼Œä½ éœ€è¦æ­£åˆ™è¡¨è¾¾å¼ \\.ã€‚ä¸å¹¸çš„æ˜¯ï¼Œè¿™å¸¦æ¥äº†ä¸€ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬ç”¨å­—ç¬¦ä¸²æ¥è¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼ï¼Œè€Œ \\ åœ¨å­—ç¬¦ä¸²ä¸­ä¹Ÿç”¨ä½œè½¬ä¹‰ç¬¦å·ã€‚æ‰€ä»¥è¦åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼ \\.ï¼Œæˆ‘ä»¬éœ€è¦å­—ç¬¦ä¸² \"\\\\.\"ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºã€‚\n\n# è¦åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼ \\.ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ \\\\.\ndot &lt;- \"\\\\.\"\n\n# ä½†è¡¨è¾¾å¼æœ¬èº«åªåŒ…å«ä¸€ä¸ª \\\nstr_view(dot)\n#&gt; [1] â”‚ \\.\n\n# è¿™å‘Šè¯‰ R æŸ¥æ‰¾ä¸€ä¸ªæ˜ç¡®çš„ .\nstr_view(c(\"abc\", \"a.c\", \"bef\"), \"a\\\\.c\")\n#&gt; [2] â”‚ &lt;a.c&gt;\n\nåœ¨æœ¬ä¹¦ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä¸å¸¦å¼•å·åœ°å†™æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ¯”å¦‚ \\.ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦å¼ºè°ƒä½ å®é™…ä¼šè¾“å…¥ä»€ä¹ˆï¼Œæˆ‘ä»¬ä¼šç”¨å¼•å·æŠŠå®ƒæ‹¬èµ·æ¥ï¼Œå¹¶åŠ ä¸Šé¢å¤–çš„è½¬ä¹‰ï¼Œæ¯”å¦‚ \"\\\\.\"ã€‚\nå¦‚æœ \\ åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ç”¨ä½œè½¬ä¹‰å­—ç¬¦ï¼Œé‚£ä¹ˆä½ å¦‚ä½•åŒ¹é…ä¸€ä¸ªå­—é¢æ„ä¹‰ä¸Šçš„ \\ å‘¢ï¼Ÿå—¯ï¼Œä½ éœ€è¦å¯¹å®ƒè¿›è¡Œè½¬ä¹‰ï¼Œåˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼ \\\\ã€‚è¦åˆ›å»ºé‚£ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œä½ éœ€è¦ä½¿ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œå­—ç¬¦ä¸²ä¹Ÿéœ€è¦å¯¹ \\ è¿›è¡Œè½¬ä¹‰ã€‚è¿™æ„å‘³ç€è¦åŒ¹é…ä¸€ä¸ªå­—é¢æ„ä¹‰ä¸Šçš„ \\ï¼Œä½ éœ€è¦å†™ \"\\\\\\\\\" â€”â€” ä½ éœ€è¦å››ä¸ªåæ–œæ æ¥åŒ¹é…ä¸€ä¸ªï¼\n\nx &lt;- \"a\\\\b\"\nstr_view(x)\n#&gt; [1] â”‚ a\\b\nstr_view(x, \"\\\\\\\\\")\n#&gt; [1] â”‚ a&lt;\\&gt;b\n\næˆ–è€…ï¼Œä½ å¯èƒ½ä¼šå‘ç°ä½¿ç”¨ä½ åœ¨ Section 14.2.2 ä¸­å­¦åˆ°çš„åŸå§‹å­—ç¬¦ä¸²æ›´å®¹æ˜“ã€‚é‚£æ ·å¯ä»¥è®©ä½ é¿å…ä¸€å±‚è½¬ä¹‰ï¼š\n\nstr_view(x, r\"{\\\\}\")\n#&gt; [1] â”‚ a&lt;\\&gt;b\n\nå¦‚æœä½ æƒ³åŒ¹é…ä¸€ä¸ªå­—é¢æ„ä¹‰ä¸Šçš„ .ã€$ã€|ã€*ã€+ã€?ã€{ã€}ã€(ã€)ï¼Œé™¤äº†ä½¿ç”¨åæ–œæ è½¬ä¹‰å¤–ï¼Œè¿˜æœ‰ä¸€ç§æ›¿ä»£æ–¹æ³•ï¼šä½ å¯ä»¥ä½¿ç”¨å­—ç¬¦ç±»ï¼š[.]ã€[$]ã€[|]â€¦â€¦å®ƒä»¬éƒ½åŒ¹é…å­—é¢å€¼ã€‚\n\nstr_view(c(\"abc\", \"a.c\", \"a*c\", \"a c\"), \"a[.]c\")\n#&gt; [2] â”‚ &lt;a.c&gt;\nstr_view(c(\"abc\", \"a.c\", \"a*c\", \"a c\"), \".[*]c\")\n#&gt; [3] â”‚ &lt;a*c&gt;\n\n\n15.4.2 é”šç‚¹\né»˜è®¤æƒ…å†µä¸‹ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¼šåŒ¹é…å­—ç¬¦ä¸²çš„ä»»ä½•éƒ¨åˆ†ã€‚å¦‚æœä½ æƒ³åœ¨å¼€å¤´æˆ–ç»“å°¾è¿›è¡ŒåŒ¹é…ï¼Œä½ éœ€è¦ä½¿ç”¨é”šç‚¹ (anchor) æ¥å›ºå®šæ­£åˆ™è¡¨è¾¾å¼ï¼Œä½¿ç”¨ ^ åŒ¹é…å¼€å¤´ï¼Œæˆ– $ åŒ¹é…ç»“å°¾ï¼š\n\nstr_view(fruit, \"^a\")\n#&gt; [1] â”‚ &lt;a&gt;pple\n#&gt; [2] â”‚ &lt;a&gt;pricot\n#&gt; [3] â”‚ &lt;a&gt;vocado\nstr_view(fruit, \"a$\")\n#&gt;  [4] â”‚ banan&lt;a&gt;\n#&gt; [15] â”‚ cherimoy&lt;a&gt;\n#&gt; [30] â”‚ feijo&lt;a&gt;\n#&gt; [36] â”‚ guav&lt;a&gt;\n#&gt; [56] â”‚ papay&lt;a&gt;\n#&gt; [74] â”‚ satsum&lt;a&gt;\n\näººä»¬å¾ˆå®¹æ˜“è®¤ä¸º $ åº”è¯¥åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å¤´ï¼Œå› ä¸ºæˆ‘ä»¬å°±æ˜¯è¿™æ ·å†™ç¾å…ƒé‡‘é¢çš„ï¼Œä½†è¿™å¹¶ä¸æ˜¯æ­£åˆ™è¡¨è¾¾å¼çš„æ„å›¾ã€‚\nè¦å¼ºåˆ¶ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼åªåŒ¹é…å®Œæ•´çš„å­—ç¬¦ä¸²ï¼Œç”¨ ^ å’Œ $ å°†å®ƒé”šå®šï¼š\n\nstr_view(fruit, \"apple\")\n#&gt;  [1] â”‚ &lt;apple&gt;\n#&gt; [62] â”‚ pine&lt;apple&gt;\nstr_view(fruit, \"^apple$\")\n#&gt; [1] â”‚ &lt;apple&gt;\n\nä½ ä¹Ÿå¯ä»¥ç”¨ \\b æ¥åŒ¹é…å•è¯è¾¹ç•Œï¼ˆå³å•è¯çš„å¼€å¤´æˆ–ç»“å°¾ï¼‰ã€‚è¿™åœ¨ RStudio çš„æŸ¥æ‰¾å’Œæ›¿æ¢å·¥å…·ä¸­ç‰¹åˆ«æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œè¦æŸ¥æ‰¾ sum() çš„æ‰€æœ‰ç”¨æ³•ï¼Œä½ å¯ä»¥æœç´¢ \\bsum\\b æ¥é¿å…åŒ¹é… summarizeã€summaryã€rowsum ç­‰ç­‰ï¼š\n\nx &lt;- c(\"summary(x)\", \"summarize(df)\", \"rowsum(x)\", \"sum(x)\")\nstr_view(x, \"sum\")\n#&gt; [1] â”‚ &lt;sum&gt;mary(x)\n#&gt; [2] â”‚ &lt;sum&gt;marize(df)\n#&gt; [3] â”‚ row&lt;sum&gt;(x)\n#&gt; [4] â”‚ &lt;sum&gt;(x)\nstr_view(x, \"\\\\bsum\\\\b\")\n#&gt; [4] â”‚ &lt;sum&gt;(x)\n\nå½“å•ç‹¬ä½¿ç”¨æ—¶ï¼Œé”šç‚¹ä¼šäº§ç”Ÿä¸€ä¸ªé›¶å®½åº¦çš„åŒ¹é…ï¼š\n\nstr_view(\"abc\", c(\"$\", \"^\", \"\\\\b\"))\n#&gt; [1] â”‚ abc&lt;&gt;\n#&gt; [2] â”‚ &lt;&gt;abc\n#&gt; [3] â”‚ &lt;&gt;abc&lt;&gt;\n\nè¿™æœ‰åŠ©äºä½ ç†è§£å½“ä½ æ›¿æ¢ä¸€ä¸ªç‹¬ç«‹çš„é”šç‚¹æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼š\n\nstr_replace_all(\"abc\", c(\"$\", \"^\", \"\\\\b\"), \"--\")\n#&gt; [1] \"abc--\"   \"--abc\"   \"--abc--\"\n\n\n15.4.3 å­—ç¬¦ç±»\nå­—ç¬¦ç±» (character class)ï¼Œæˆ–ç§°å­—ç¬¦é›† (set)ï¼Œå…è®¸ä½ åŒ¹é…é›†åˆä¸­çš„ä»»ä½•ä¸€ä¸ªå­—ç¬¦ã€‚æ­£å¦‚æˆ‘ä»¬ä¸Šé¢è®¨è®ºçš„ï¼Œä½ å¯ä»¥ç”¨ [] æ¥æ„å»ºè‡ªå·±çš„é›†åˆï¼Œå…¶ä¸­ [abc] åŒ¹é… â€œaâ€ã€â€œbâ€ æˆ– â€œcâ€ï¼Œè€Œ [^abc] åŒ¹é…é™¤äº† â€œaâ€ã€â€œbâ€ æˆ– â€œcâ€ ä¹‹å¤–çš„ä»»ä½•å­—ç¬¦ã€‚é™¤äº† ^ï¼Œ[] å†…éƒ¨è¿˜æœ‰ä¸¤ä¸ªå…¶ä»–å…·æœ‰ç‰¹æ®Šå«ä¹‰çš„å­—ç¬¦ï¼š\n\n\n- å®šä¹‰ä¸€ä¸ªèŒƒå›´ï¼Œä¾‹å¦‚ [a-z] åŒ¹é…ä»»ä½•å°å†™å­—æ¯ï¼Œ[0-9] åŒ¹é…ä»»ä½•æ•°å­—ã€‚\n\n\\ å¯¹ç‰¹æ®Šå­—ç¬¦è¿›è¡Œè½¬ä¹‰ï¼Œæ‰€ä»¥ [\\^\\-\\]] åŒ¹é… ^ã€- æˆ– ]ã€‚\n\nè¿™é‡Œæœ‰å‡ ä¸ªä¾‹å­ï¼š\n\nx &lt;- \"abcd ABCD 12345 -!@#%.\"\nstr_view(x, \"[abc]+\")\n#&gt; [1] â”‚ &lt;abc&gt;d ABCD 12345 -!@#%.\nstr_view(x, \"[a-z]+\")\n#&gt; [1] â”‚ &lt;abcd&gt; ABCD 12345 -!@#%.\nstr_view(x, \"[^a-z0-9]+\")\n#&gt; [1] â”‚ abcd&lt; ABCD &gt;12345&lt; -!@#%.&gt;\n\n# ä½ éœ€è¦è½¬ä¹‰æ‰èƒ½åŒ¹é…åœ¨ [] ä¸­æœ‰ç‰¹æ®Šå«ä¹‰çš„å­—ç¬¦\nstr_view(\"a-b-c\", \"[a-c]\")\n#&gt; [1] â”‚ &lt;a&gt;-&lt;b&gt;-&lt;c&gt;\nstr_view(\"a-b-c\", \"[a\\\\-c]\")\n#&gt; [1] â”‚ &lt;a&gt;&lt;-&gt;b&lt;-&gt;&lt;c&gt;\n\nä¸€äº›å­—ç¬¦ç±»éå¸¸å¸¸ç”¨ï¼Œä»¥è‡³äºå®ƒä»¬æœ‰è‡ªå·±çš„å¿«æ·æ–¹å¼ã€‚ä½ å·²ç»è§è¿‡äº† .ï¼Œå®ƒåŒ¹é…é™¤äº†æ¢è¡Œç¬¦ä¹‹å¤–çš„ä»»ä½•å­—ç¬¦ã€‚è¿˜æœ‰ä¸‰å¯¹ç‰¹åˆ«æœ‰ç”¨çš„å¿«æ·æ–¹å¼7ï¼š\n\n\n\\d åŒ¹é…ä»»ä½•æ•°å­—ï¼› \\D åŒ¹é…ä»»ä½•éæ•°å­—çš„å­—ç¬¦ã€‚\n\n\\s åŒ¹é…ä»»ä½•ç©ºç™½å­—ç¬¦ï¼ˆä¾‹å¦‚ï¼Œç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦ï¼‰ï¼› \\S åŒ¹é…ä»»ä½•éç©ºç™½å­—ç¬¦çš„å­—ç¬¦ã€‚\n\n\\w åŒ¹é…ä»»ä½•â€œå•è¯â€å­—ç¬¦ï¼Œå³å­—æ¯å’Œæ•°å­—ï¼› \\W åŒ¹é…ä»»ä½•â€œéå•è¯â€å­—ç¬¦ã€‚\n\nä¸‹é¢çš„ä»£ç ç”¨ä¸€ç³»åˆ—å­—æ¯ã€æ•°å­—å’Œæ ‡ç‚¹ç¬¦å·æ¼”ç¤ºäº†è¿™å…­ä¸ªå¿«æ·æ–¹å¼ã€‚\n\nx &lt;- \"abcd ABCD 12345 -!@#%.\"\nstr_view(x, \"\\\\d+\")\n#&gt; [1] â”‚ abcd ABCD &lt;12345&gt; -!@#%.\nstr_view(x, \"\\\\D+\")\n#&gt; [1] â”‚ &lt;abcd ABCD &gt;12345&lt; -!@#%.&gt;\nstr_view(x, \"\\\\s+\")\n#&gt; [1] â”‚ abcd&lt; &gt;ABCD&lt; &gt;12345&lt; &gt;-!@#%.\nstr_view(x, \"\\\\S+\")\n#&gt; [1] â”‚ &lt;abcd&gt; &lt;ABCD&gt; &lt;12345&gt; &lt;-!@#%.&gt;\nstr_view(x, \"\\\\w+\")\n#&gt; [1] â”‚ &lt;abcd&gt; &lt;ABCD&gt; &lt;12345&gt; -!@#%.\nstr_view(x, \"\\\\W+\")\n#&gt; [1] â”‚ abcd&lt; &gt;ABCD&lt; &gt;12345&lt; -!@#%.&gt;\n\n\n15.4.4 é‡è¯\né‡è¯ (Quantifiers) æ§åˆ¶ä¸€ä¸ªæ¨¡å¼åŒ¹é…çš„æ¬¡æ•°ã€‚åœ¨ Section 15.2 ä¸­ï¼Œä½ å­¦ä¹ äº† ?ï¼ˆ0 æˆ– 1 æ¬¡åŒ¹é…ï¼‰ã€+ï¼ˆ1 æ¬¡æˆ–å¤šæ¬¡åŒ¹é…ï¼‰å’Œ *ï¼ˆ0 æ¬¡æˆ–å¤šæ¬¡åŒ¹é…ï¼‰ã€‚ä¾‹å¦‚ï¼Œcolou?r ä¼šåŒ¹é…ç¾å¼æˆ–è‹±å¼æ‹¼å†™ï¼Œ\\d+ ä¼šåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—ï¼Œ\\s? ä¼šå¯é€‰åœ°åŒ¹é…ä¸€ä¸ªç©ºç™½å­—ç¬¦ã€‚ä½ ä¹Ÿå¯ä»¥ç”¨ {} æ¥ç²¾ç¡®æŒ‡å®šåŒ¹é…çš„æ¬¡æ•°ï¼š\n\n\n{n} ç²¾ç¡®åŒ¹é… n æ¬¡ã€‚\n\n{n,} è‡³å°‘åŒ¹é… n æ¬¡ã€‚\n\n{n,m} åŒ¹é… n åˆ° m æ¬¡ä¹‹é—´ã€‚\n\n15.4.5 æ“ä½œç¬¦ä¼˜å…ˆçº§å’Œæ‹¬å·\nab+ åŒ¹é…ä»€ä¹ˆï¼Ÿæ˜¯åŒ¹é…ä¸€ä¸ª â€œaâ€ åé¢è·Ÿç€ä¸€ä¸ªæˆ–å¤šä¸ª â€œbâ€ï¼Œè¿˜æ˜¯åŒ¹é… â€œabâ€ é‡å¤ä»»æ„æ¬¡æ•°ï¼Ÿ^a|b$ åŒ¹é…ä»€ä¹ˆï¼Ÿæ˜¯åŒ¹é…å®Œæ•´çš„å­—ç¬¦ä¸² a æˆ–å®Œæ•´çš„å­—ç¬¦ä¸² bï¼Œè¿˜æ˜¯åŒ¹é…ä»¥ a å¼€å¤´çš„å­—ç¬¦ä¸²æˆ–ä»¥ b ç»“å°¾çš„å­—ç¬¦ä¸²ï¼Ÿ\nè¿™äº›é—®é¢˜çš„ç­”æ¡ˆç”±æ“ä½œç¬¦ä¼˜å…ˆçº§å†³å®šï¼Œç±»ä¼¼äºä½ åœ¨å­¦æ ¡å¯èƒ½å­¦è¿‡çš„ PEMDAS æˆ– BEDMAS è§„åˆ™ã€‚ä½ çŸ¥é“ a + b * c ç­‰åŒäº a + (b * c) è€Œä¸æ˜¯ (a + b) * cï¼Œå› ä¸º * çš„ä¼˜å…ˆçº§é«˜äº +ï¼šä½ å…ˆè®¡ç®— * å†è®¡ç®— +ã€‚\nåŒæ ·ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¹Ÿæœ‰è‡ªå·±çš„ä¼˜å…ˆçº§è§„åˆ™ï¼šé‡è¯çš„ä¼˜å…ˆçº§é«˜ï¼Œè€Œäº¤æ›¿çš„ä¼˜å…ˆçº§ä½ï¼Œè¿™æ„å‘³ç€ ab+ ç­‰åŒäº a(b+)ï¼Œ^a|b$ ç­‰åŒäº (^a)|(b$)ã€‚å°±åƒä»£æ•°ä¸€æ ·ï¼Œä½ å¯ä»¥ä½¿ç”¨æ‹¬å·æ¥è¦†ç›–å¸¸è§„é¡ºåºã€‚ä½†ä¸ä»£æ•°ä¸åŒçš„æ˜¯ï¼Œä½ ä¸å¤ªå¯èƒ½è®°ä½æ­£åˆ™è¡¨è¾¾å¼çš„ä¼˜å…ˆçº§è§„åˆ™ï¼Œæ‰€ä»¥è¯·éšæ„å¤§é‡ä½¿ç”¨æ‹¬å·ã€‚\n\n15.4.6 åˆ†ç»„å’Œæ•è·\né™¤äº†è¦†ç›–æ“ä½œç¬¦ä¼˜å…ˆçº§ï¼Œæ‹¬å·è¿˜æœ‰å¦ä¸€ä¸ªé‡è¦ä½œç”¨ï¼šå®ƒä»¬åˆ›å»ºæ•è·ç»„ (capturing groups)ï¼Œå…è®¸ä½ ä½¿ç”¨åŒ¹é…çš„å­ç»„ä»¶ã€‚\nä½¿ç”¨æ•è·ç»„çš„ç¬¬ä¸€ç§æ–¹æ³•æ˜¯åœ¨åŒ¹é…å†…éƒ¨é€šè¿‡åå‘å¼•ç”¨ (back reference) æ¥å¼•ç”¨å®ƒï¼š\\1 å¼•ç”¨ç¬¬ä¸€ä¸ªæ‹¬å·ä¸­åŒ…å«çš„åŒ¹é…ï¼Œ\\2 å¼•ç”¨ç¬¬äºŒä¸ªæ‹¬å·ä¸­çš„åŒ¹é…ï¼Œä¾æ­¤ç±»æ¨ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„æ¨¡å¼æ‰¾åˆ°æ‰€æœ‰å…·æœ‰é‡å¤å­—æ¯å¯¹çš„æ°´æœï¼š\n\nstr_view(fruit, \"(..)\\\\1\")\n#&gt;  [4] â”‚ b&lt;anan&gt;a\n#&gt; [20] â”‚ &lt;coco&gt;nut\n#&gt; [22] â”‚ &lt;cucu&gt;mber\n#&gt; [41] â”‚ &lt;juju&gt;be\n#&gt; [56] â”‚ &lt;papa&gt;ya\n#&gt; [73] â”‚ s&lt;alal&gt; berry\n\nè€Œè¿™ä¸ªæ¨¡å¼æ‰¾åˆ°æ‰€æœ‰ä»¥ç›¸åŒå­—æ¯å¯¹å¼€å¤´å’Œç»“å°¾çš„å•è¯ï¼š\n\nstr_view(words, \"^(..).*\\\\1$\")\n#&gt; [152] â”‚ &lt;church&gt;\n#&gt; [217] â”‚ &lt;decide&gt;\n#&gt; [617] â”‚ &lt;photograph&gt;\n#&gt; [699] â”‚ &lt;require&gt;\n#&gt; [739] â”‚ &lt;sense&gt;\n\nä½ ä¹Ÿå¯ä»¥åœ¨ str_replace() ä¸­ä½¿ç”¨åå‘å¼•ç”¨ã€‚ä¾‹å¦‚ï¼Œè¿™æ®µä»£ç äº¤æ¢äº† sentences ä¸­ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå•è¯çš„é¡ºåºï¼š\n\nsentences |&gt; \n  str_replace(\"(\\\\w+) (\\\\w+) (\\\\w+)\", \"\\\\1 \\\\3 \\\\2\") |&gt; \n  str_view()\n#&gt; [1] â”‚ The canoe birch slid on the smooth planks.\n#&gt; [2] â”‚ Glue sheet the to the dark blue background.\n#&gt; [3] â”‚ It's to easy tell the depth of a well.\n#&gt; [4] â”‚ These a days chicken leg is a rare dish.\n#&gt; [5] â”‚ Rice often is served in round bowls.\n#&gt; [6] â”‚ The of juice lemons makes fine punch.\n#&gt; ... and 714 more\n\nå¦‚æœä½ æƒ³æå–æ¯ä¸ªç»„çš„åŒ¹é…é¡¹ï¼Œä½ å¯ä»¥ä½¿ç”¨ str_match()ã€‚ä½†æ˜¯ str_match() è¿”å›ä¸€ä¸ªçŸ©é˜µï¼Œæ‰€ä»¥å¤„ç†èµ·æ¥ä¸æ˜¯ç‰¹åˆ«å®¹æ˜“8ï¼š\n\nsentences |&gt; \n  str_match(\"the (\\\\w+) (\\\\w+)\") |&gt; \n  head()\n#&gt;      [,1]                [,2]     [,3]    \n#&gt; [1,] \"the smooth planks\" \"smooth\" \"planks\"\n#&gt; [2,] \"the sheet to\"      \"sheet\"  \"to\"    \n#&gt; [3,] \"the depth of\"      \"depth\"  \"of\"    \n#&gt; [4,] NA                  NA       NA      \n#&gt; [5,] NA                  NA       NA      \n#&gt; [6,] NA                  NA       NA\n\nä½ å¯ä»¥å°†å®ƒè½¬æ¢ä¸ºä¸€ä¸ª tibble å¹¶å‘½ååˆ—ï¼š\n\nsentences |&gt; \n  str_match(\"the (\\\\w+) (\\\\w+)\") |&gt; \n  as_tibble(.name_repair = \"minimal\") |&gt; \n  set_names(\"match\", \"word1\", \"word2\")\n#&gt; # A tibble: 720 Ã— 3\n#&gt;   match             word1  word2 \n#&gt;   &lt;chr&gt;             &lt;chr&gt;  &lt;chr&gt; \n#&gt; 1 the smooth planks smooth planks\n#&gt; 2 the sheet to      sheet  to    \n#&gt; 3 the depth of      depth  of    \n#&gt; 4 &lt;NA&gt;              &lt;NA&gt;   &lt;NA&gt;  \n#&gt; 5 &lt;NA&gt;              &lt;NA&gt;   &lt;NA&gt;  \n#&gt; 6 &lt;NA&gt;              &lt;NA&gt;   &lt;NA&gt;  \n#&gt; # â„¹ 714 more rows\n\nä½†è¿™æ ·ä¸€æ¥ï¼Œä½ åŸºæœ¬ä¸Šæ˜¯è‡ªå·±é‡æ–°åˆ›å»ºäº† separate_wider_regex() çš„ä¸€ä¸ªç‰ˆæœ¬ã€‚å®é™…ä¸Šï¼Œåœ¨å¹•åï¼Œseparate_wider_regex() å°†ä½ çš„æ¨¡å¼å‘é‡è½¬æ¢ä¸ºä¸€ä¸ªä½¿ç”¨åˆ†ç»„æ¥æ•è·å‘½åç»„ä»¶çš„å•ä¸€æ­£åˆ™è¡¨è¾¾å¼ã€‚\nå¶å°”ï¼Œä½ ä¼šæƒ³ä½¿ç”¨æ‹¬å·è€Œä¸åˆ›å»ºåŒ¹é…ç»„ã€‚ä½ å¯ä»¥ç”¨ (?:) åˆ›å»ºä¸€ä¸ªéæ•è·ç»„ã€‚\n\nx &lt;- c(\"a gray cat\", \"a grey dog\")\nstr_match(x, \"gr(e|a)y\")\n#&gt;      [,1]   [,2]\n#&gt; [1,] \"gray\" \"a\" \n#&gt; [2,] \"grey\" \"e\"\nstr_match(x, \"gr(?:e|a)y\")\n#&gt;      [,1]  \n#&gt; [1,] \"gray\"\n#&gt; [2,] \"grey\"\n\n\n15.4.7 ç»ƒä¹ \n\nä½ å°†å¦‚ä½•åŒ¹é…å­—é¢å­—ç¬¦ä¸² \"'\\\"ï¼Ÿ\"$^$\" å‘¢ï¼Ÿ\nè§£é‡Šä¸ºä»€ä¹ˆè¿™äº›æ¨¡å¼ä¸­çš„æ¯ä¸€ä¸ªéƒ½ä¸åŒ¹é… \\ï¼š\"\\\"ã€\"\\\\\"ã€\"\\\\\\\"ã€‚\n\nç»™å®š stringr::words ä¸­çš„å¸¸ç”¨è¯è¯­æ–™åº“ï¼Œåˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼ä»¥æ‰¾åˆ°æ‰€æœ‰æ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„å•è¯ï¼š\n\nä»¥ â€œyâ€ å¼€å¤´ã€‚\nä¸ä»¥ â€œyâ€ å¼€å¤´ã€‚\nä»¥ â€œxâ€ ç»“å°¾ã€‚\né•¿åº¦æ°å¥½ä¸ºä¸‰ä¸ªå­—æ¯ã€‚ï¼ˆä¸è¦ç”¨ str_length() ä½œå¼Šï¼ï¼‰\næœ‰ä¸ƒä¸ªæˆ–æ›´å¤šå­—æ¯ã€‚\nåŒ…å«ä¸€ä¸ªå…ƒéŸ³-è¾…éŸ³å¯¹ã€‚\nè¿ç»­åŒ…å«è‡³å°‘ä¸¤ä¸ªå…ƒéŸ³-è¾…éŸ³å¯¹ã€‚\nä»…ç”±é‡å¤çš„å…ƒéŸ³-è¾…éŸ³å¯¹ç»„æˆã€‚\n\n\nä¸ºä»¥ä¸‹æ¯ä¸ªå•è¯åˆ›å»º 11 ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œä»¥åŒ¹é…å®ƒä»¬çš„è‹±å¼æˆ–ç¾å¼æ‹¼å†™ï¼šairplane/aeroplane, aluminum/aluminium, analog/analogue, ass/arse, center/centre, defense/defence, donut/doughnut, gray/grey, modeling/modelling, skeptic/sceptic, summarize/summariseã€‚å°è¯•åˆ¶ä½œå¯èƒ½çš„æœ€çŸ­çš„æ­£åˆ™è¡¨è¾¾å¼ï¼\näº¤æ¢ words ä¸­çš„é¦–å­—æ¯å’Œå°¾å­—æ¯ã€‚è¿™äº›å­—ç¬¦ä¸²ä¸­æœ‰å“ªäº›ä»ç„¶æ˜¯ words ä¸­çš„å•è¯ï¼Ÿ\n\nç”¨æ–‡å­—æè¿°è¿™äº›æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ä»€ä¹ˆï¼šï¼ˆä»”ç»†é˜…è¯»ä»¥åˆ¤æ–­æ¯ä¸ªæ¡ç›®æ˜¯æ­£åˆ™è¡¨è¾¾å¼è¿˜æ˜¯å®šä¹‰æ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²ã€‚ï¼‰\n\n^.*$\n\"\\\\{.+\\\\}\"\n\\d{4}-\\d{2}-\\d{2}\n\"\\\\\\\\{4}\"\n\\..\\..\\..\n(.)\\1\\1\n\"(..)\\\\1\"\n\n\nè§£å†³ https://regexcrossword.com/challenges/beginner ä¸Šçš„åˆå­¦è€…æ­£åˆ™è¡¨è¾¾å¼å¡«å­—æ¸¸æˆã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>15</span>Â  <span class='chapter-title'>æ­£åˆ™è¡¨è¾¾å¼</span>"
    ]
  },
  {
    "objectID": "regexps.html#æ¨¡å¼æ§åˆ¶",
    "href": "regexps.html#æ¨¡å¼æ§åˆ¶",
    "title": "15Â  æ­£åˆ™è¡¨è¾¾å¼",
    "section": "\n15.5 æ¨¡å¼æ§åˆ¶",
    "text": "15.5 æ¨¡å¼æ§åˆ¶\né€šè¿‡ä½¿ç”¨æ¨¡å¼å¯¹è±¡è€Œä¸æ˜¯ä»…ä»…ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ä»¥å¯¹åŒ¹é…çš„ç»†èŠ‚è¿›è¡Œé¢å¤–çš„æ§åˆ¶ã€‚è¿™å…è®¸ä½ æ§åˆ¶æ‰€è°“çš„æ­£åˆ™è¡¨è¾¾å¼æ ‡å¿—ï¼Œå¹¶åŒ¹é…å„ç§ç±»å‹çš„å›ºå®šå­—ç¬¦ä¸²ï¼Œå¦‚ä¸‹æ‰€è¿°ã€‚\n\n15.5.1 æ­£åˆ™è¡¨è¾¾å¼æ ‡å¿—\næœ‰è®¸å¤šè®¾ç½®å¯ä»¥ç”¨æ¥æ§åˆ¶æ­£åˆ™è¡¨è¾¾å¼çš„ç»†èŠ‚ã€‚è¿™äº›è®¾ç½®åœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­é€šå¸¸è¢«ç§°ä¸ºæ ‡å¿— (flags)ã€‚åœ¨ stringr ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡å°†æ¨¡å¼åŒ…è£…åœ¨å¯¹ regex() çš„è°ƒç”¨ä¸­æ¥ä½¿ç”¨è¿™äº›è®¾ç½®ã€‚æœ€æœ‰ç”¨çš„æ ‡å¿—å¯èƒ½å°±æ˜¯ ignore_case = TRUEï¼Œå› ä¸ºå®ƒå…è®¸å­—ç¬¦åŒ¹é…å…¶å¤§å†™æˆ–å°å†™å½¢å¼ï¼š\n\nbananas &lt;- c(\"banana\", \"Banana\", \"BANANA\")\nstr_view(bananas, \"banana\")\n#&gt; [1] â”‚ &lt;banana&gt;\nstr_view(bananas, regex(\"banana\", ignore_case = TRUE))\n#&gt; [1] â”‚ &lt;banana&gt;\n#&gt; [2] â”‚ &lt;Banana&gt;\n#&gt; [3] â”‚ &lt;BANANA&gt;\n\nå¦‚æœä½ æ­£åœ¨å¤„ç†å¤§é‡å¤šè¡Œå­—ç¬¦ä¸²ï¼ˆå³åŒ…å« \\n çš„å­—ç¬¦ä¸²ï¼‰ï¼Œdotall å’Œ multiline å¯èƒ½ä¹Ÿå¾ˆæœ‰ç”¨ï¼š\n\n\ndotall = TRUE è®© . åŒ¹é…æ‰€æœ‰ä¸œè¥¿ï¼ŒåŒ…æ‹¬ \\nï¼š\n\nx &lt;- \"Line 1\\nLine 2\\nLine 3\"\nstr_view(x, \".Line\")\nstr_view(x, regex(\".Line\", dotall = TRUE))\n#&gt; [1] â”‚ Line 1&lt;\n#&gt;     â”‚ Line&gt; 2&lt;\n#&gt;     â”‚ Line&gt; 3\n\n\n\nmultiline = TRUE ä½¿ ^ å’Œ $ åŒ¹é…æ¯è¡Œçš„å¼€å§‹å’Œç»“æŸï¼Œè€Œä¸æ˜¯æ•´ä¸ªå­—ç¬¦ä¸²çš„å¼€å§‹å’Œç»“æŸï¼š\n\nx &lt;- \"Line 1\\nLine 2\\nLine 3\"\nstr_view(x, \"^Line\")\n#&gt; [1] â”‚ &lt;Line&gt; 1\n#&gt;     â”‚ Line 2\n#&gt;     â”‚ Line 3\nstr_view(x, regex(\"^Line\", multiline = TRUE))\n#&gt; [1] â”‚ &lt;Line&gt; 1\n#&gt;     â”‚ &lt;Line&gt; 2\n#&gt;     â”‚ &lt;Line&gt; 3\n\n\n\næœ€åï¼Œå¦‚æœä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªå¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¹¶ä¸”æ‹…å¿ƒå°†æ¥å¯èƒ½æ— æ³•ç†è§£å®ƒï¼Œä½ å¯èƒ½ä¼šå°è¯• comments = TRUEã€‚å®ƒä¼šè°ƒæ•´æ¨¡å¼è¯­è¨€ï¼Œä»¥å¿½ç•¥ç©ºæ ¼å’Œæ¢è¡Œç¬¦ï¼Œä»¥åŠ # ä¹‹åçš„æ‰€æœ‰å†…å®¹ã€‚è¿™å…è®¸ä½ ä½¿ç”¨æ³¨é‡Šå’Œç©ºç™½æ¥ä½¿å¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼æ›´æ˜“äºç†è§£9ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š\n\nphone &lt;- regex(\n  r\"(\n    \\(?      # å¯é€‰çš„å·¦æ‹¬å·\n    (\\d{3})  # åŒºå·\n    [)\\-]?   # å¯é€‰çš„å³æ‹¬å·æˆ–ç ´æŠ˜å·\n    \\ ?      # å¯é€‰çš„ç©ºæ ¼\n    (\\d{3})  # å¦å¤–ä¸‰ä¸ªæ•°å­—\n    [\\ -]?   # å¯é€‰çš„ç©ºæ ¼æˆ–ç ´æŠ˜å·\n    (\\d{4})  # å¦å¤–å››ä¸ªæ•°å­—\n  )\", \n  comments = TRUE\n)\n\nstr_extract(c(\"514-791-8141\", \"(123) 456 7890\", \"123456\"), phone)\n#&gt; [1] \"514-791-8141\"   \"(123) 456 7890\" NA\n\nå¦‚æœä½ ä½¿ç”¨æ³¨é‡Šï¼Œå¹¶ä¸”æƒ³è¦åŒ¹é…ç©ºæ ¼ã€æ¢è¡Œç¬¦æˆ– #ï¼Œä½ éœ€è¦ç”¨ \\ æ¥è½¬ä¹‰å®ƒã€‚\n\n15.5.2 å›ºå®šåŒ¹é…\nä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ fixed() æ¥é€‰æ‹©ä¸ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è§„åˆ™ï¼š\n\nstr_view(c(\"\", \"a\", \".\"), fixed(\".\"))\n#&gt; [3] â”‚ &lt;.&gt;\n\nfixed() è¿˜è®©ä½ èƒ½å¤Ÿå¿½ç•¥å¤§å°å†™ï¼š\n\nstr_view(\"x X\", \"X\")\n#&gt; [1] â”‚ x &lt;X&gt;\nstr_view(\"x X\", fixed(\"X\", ignore_case = TRUE))\n#&gt; [1] â”‚ &lt;x&gt; &lt;X&gt;\n\nå¦‚æœä½ æ­£åœ¨å¤„ç†éè‹±è¯­æ–‡æœ¬ï¼Œä½ å¯èƒ½æ›´æƒ³è¦ coll() è€Œä¸æ˜¯ fixed()ï¼Œå› ä¸ºå®ƒå®ç°äº†ä½ æŒ‡å®šçš„ locale æ‰€ä½¿ç”¨çš„å®Œæ•´å¤§å†™è§„åˆ™ã€‚æœ‰å…³åŒºåŸŸè®¾ç½®çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ Section 14.6ã€‚\n\nstr_view(\"i Ä° Ä± I\", fixed(\"Ä°\", ignore_case = TRUE))\n#&gt; [1] â”‚ i &lt;Ä°&gt; Ä± I\nstr_view(\"i Ä° Ä± I\", coll(\"Ä°\", ignore_case = TRUE, locale = \"tr\"))\n#&gt; [1] â”‚ &lt;i&gt; &lt;Ä°&gt; Ä± I",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>15</span>Â  <span class='chapter-title'>æ­£åˆ™è¡¨è¾¾å¼</span>"
    ]
  },
  {
    "objectID": "regexps.html#å®è·µ",
    "href": "regexps.html#å®è·µ",
    "title": "15Â  æ­£åˆ™è¡¨è¾¾å¼",
    "section": "\n15.6 å®è·µ",
    "text": "15.6 å®è·µ\nä¸ºäº†å°†è¿™äº›æƒ³æ³•ä»˜è¯¸å®è·µï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å°†è§£å†³ä¸€äº›åŠçœŸå®çš„é—®é¢˜ã€‚æˆ‘ä»¬å°†è®¨è®ºä¸‰ç§é€šç”¨æŠ€æœ¯ï¼š\n\né€šè¿‡åˆ›å»ºç®€å•çš„æ­£å‘å’Œåå‘æ§åˆ¶æ¥æ£€æŸ¥ä½ çš„å·¥ä½œ\nå°†æ­£åˆ™è¡¨è¾¾å¼ä¸å¸ƒå°”ä»£æ•°ç»„åˆ\nä½¿ç”¨å­—ç¬¦ä¸²æ“ä½œåˆ›å»ºå¤æ‚çš„æ¨¡å¼\n\n\n15.6.1 æ£€æŸ¥ä½ çš„å·¥ä½œ\né¦–å…ˆï¼Œè®©æˆ‘ä»¬æ‰¾åˆ°æ‰€æœ‰ä»¥ â€œTheâ€ å¼€å¤´çš„å¥å­ã€‚ä»…ä»…ä½¿ç”¨ ^ é”šç‚¹æ˜¯ä¸å¤Ÿçš„ï¼š\n\nstr_view(sentences, \"^The\")\n#&gt;  [1] â”‚ &lt;The&gt; birch canoe slid on the smooth planks.\n#&gt;  [4] â”‚ &lt;The&gt;se days a chicken leg is a rare dish.\n#&gt;  [6] â”‚ &lt;The&gt; juice of lemons makes fine punch.\n#&gt;  [7] â”‚ &lt;The&gt; box was thrown beside the parked truck.\n#&gt;  [8] â”‚ &lt;The&gt; hogs were fed chopped corn and garbage.\n#&gt; [11] â”‚ &lt;The&gt; boy was there when the sun rose.\n#&gt; ... and 271 more\n\nå› ä¸ºé‚£ä¸ªæ¨¡å¼ä¹ŸåŒ¹é…äº†ä»¥ They æˆ– These ç­‰å•è¯å¼€å¤´çš„å¥å­ã€‚æˆ‘ä»¬éœ€è¦ç¡®ä¿ â€œeâ€ æ˜¯å•è¯ä¸­çš„æœ€åä¸€ä¸ªå­—æ¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ ä¸€ä¸ªå•è¯è¾¹ç•Œæ¥å®ç°ï¼š\n\nstr_view(sentences, \"^The\\\\b\")\n#&gt;  [1] â”‚ &lt;The&gt; birch canoe slid on the smooth planks.\n#&gt;  [6] â”‚ &lt;The&gt; juice of lemons makes fine punch.\n#&gt;  [7] â”‚ &lt;The&gt; box was thrown beside the parked truck.\n#&gt;  [8] â”‚ &lt;The&gt; hogs were fed chopped corn and garbage.\n#&gt; [11] â”‚ &lt;The&gt; boy was there when the sun rose.\n#&gt; [13] â”‚ &lt;The&gt; source of the huge river is the clear spring.\n#&gt; ... and 250 more\n\né‚£ä¹ˆï¼Œæ‰¾åˆ°æ‰€æœ‰ä»¥ä»£è¯å¼€å¤´çš„å¥å­å‘¢ï¼Ÿ\n\nstr_view(sentences, \"^She|He|It|They\\\\b\")\n#&gt;  [3] â”‚ &lt;It&gt;'s easy to tell the depth of a well.\n#&gt; [15] â”‚ &lt;He&gt;lp the woman get back to her feet.\n#&gt; [27] â”‚ &lt;He&gt;r purse was full of useless trash.\n#&gt; [29] â”‚ &lt;It&gt; snowed, rained, and hailed the same morning.\n#&gt; [63] â”‚ &lt;He&gt; ran half way to the hardware store.\n#&gt; [90] â”‚ &lt;He&gt; lay prone and hardly moved a limb.\n#&gt; ... and 57 more\n\nå¿«é€Ÿæ£€æŸ¥ç»“æœæ˜¾ç¤ºæˆ‘ä»¬å¾—åˆ°äº†ä¸€äº›é”™è¯¯çš„åŒ¹é…ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬å¿˜è®°äº†ä½¿ç”¨æ‹¬å·ï¼š\n\nstr_view(sentences, \"^(She|He|It|They)\\\\b\")\n#&gt;   [3] â”‚ &lt;It&gt;'s easy to tell the depth of a well.\n#&gt;  [29] â”‚ &lt;It&gt; snowed, rained, and hailed the same morning.\n#&gt;  [63] â”‚ &lt;He&gt; ran half way to the hardware store.\n#&gt;  [90] â”‚ &lt;He&gt; lay prone and hardly moved a limb.\n#&gt; [116] â”‚ &lt;He&gt; ordered peach pie with ice cream.\n#&gt; [127] â”‚ &lt;It&gt; caught its hind paw in a rusty trap.\n#&gt; ... and 51 more\n\nä½ å¯èƒ½ä¼šæƒ³ï¼Œå¦‚æœè¿™æ ·çš„é”™è¯¯æ²¡æœ‰å‡ºç°åœ¨å‰å‡ ä¸ªåŒ¹é…ä¸­ï¼Œä½ è¯¥å¦‚ä½•å‘ç°å®ƒã€‚ä¸€ä¸ªå¥½çš„æŠ€æœ¯æ˜¯åˆ›å»ºä¸€äº›æ­£å‘å’Œåå‘çš„åŒ¹é…ï¼Œå¹¶ç”¨å®ƒä»¬æ¥æµ‹è¯•ä½ çš„æ¨¡å¼æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œï¼š\n\npos &lt;- c(\"He is a boy\", \"She had a good time\")\nneg &lt;- c(\"Shells come from the sea\", \"Hadley said 'It's a great day'\")\n\npattern &lt;- \"^(She|He|It|They)\\\\b\"\nstr_detect(pos, pattern)\n#&gt; [1] TRUE TRUE\nstr_detect(neg, pattern)\n#&gt; [1] FALSE FALSE\n\né€šå¸¸ï¼Œæƒ³å‡ºå¥½çš„æ­£å‘ä¾‹å­æ¯”æƒ³å‡ºåå‘ä¾‹å­è¦å®¹æ˜“å¾—å¤šï¼Œå› ä¸ºåœ¨ä½ å¯¹æ­£åˆ™è¡¨è¾¾å¼è¶³å¤Ÿç†Ÿç»ƒä»¥é¢„æµ‹ä½ çš„å¼±ç‚¹åœ¨å“ªé‡Œä¹‹å‰ï¼Œéœ€è¦ä¸€æ®µæ—¶é—´ã€‚å°½ç®¡å¦‚æ­¤ï¼Œå®ƒä»¬ä»ç„¶å¾ˆæœ‰ç”¨ï¼šåœ¨ä½ è§£å†³é—®é¢˜çš„è¿‡ç¨‹ä¸­ï¼Œä½ å¯ä»¥æ…¢æ…¢ç§¯ç´¯ä½ çš„é”™è¯¯é›†åˆï¼Œç¡®ä¿ä½ æ°¸è¿œä¸ä¼šçŠ¯åŒæ ·çš„é”™è¯¯ä¸¤æ¬¡ã€‚\n\n15.6.2 å¸ƒå°”è¿ç®—\nå‡è®¾æˆ‘ä»¬æƒ³æ‰¾åˆ°åªåŒ…å«è¾…éŸ³çš„å•è¯ã€‚ä¸€ç§æŠ€æœ¯æ˜¯åˆ›å»ºä¸€ä¸ªåŒ…å«é™¤å…ƒéŸ³å¤–çš„æ‰€æœ‰å­—æ¯çš„å­—ç¬¦ç±»ï¼ˆ[^aeiou]ï¼‰ï¼Œç„¶åè®©å®ƒåŒ¹é…ä»»æ„æ•°é‡çš„å­—æ¯ï¼ˆ[^aeiou]+ï¼‰ï¼Œæœ€åé€šè¿‡é”šå®šåˆ°å¼€å¤´å’Œç»“å°¾æ¥å¼ºåˆ¶å®ƒåŒ¹é…æ•´ä¸ªå­—ç¬¦ä¸²ï¼ˆ^[^aeiou]+$ï¼‰ï¼š\n\nstr_view(words, \"^[^aeiou]+$\")\n#&gt; [123] â”‚ &lt;by&gt;\n#&gt; [249] â”‚ &lt;dry&gt;\n#&gt; [328] â”‚ &lt;fly&gt;\n#&gt; [538] â”‚ &lt;mrs&gt;\n#&gt; [895] â”‚ &lt;try&gt;\n#&gt; [952] â”‚ &lt;why&gt;\n\nä½†æ˜¯ä½ å¯ä»¥é€šè¿‡åå‘æ€è€ƒæ¥ä½¿è¿™ä¸ªé—®é¢˜å˜å¾—ç®€å•ä¸€äº›ã€‚ä¸å…¶å¯»æ‰¾åªåŒ…å«è¾…éŸ³çš„å•è¯ï¼Œæˆ‘ä»¬å¯ä»¥å¯»æ‰¾ä¸åŒ…å«ä»»ä½•å…ƒéŸ³çš„å•è¯ï¼š\n\nstr_view(words[!str_detect(words, \"[aeiou]\")])\n#&gt; [1] â”‚ by\n#&gt; [2] â”‚ dry\n#&gt; [3] â”‚ fly\n#&gt; [4] â”‚ mrs\n#&gt; [5] â”‚ try\n#&gt; [6] â”‚ why\n\næ¯å½“ä½ å¤„ç†é€»è¾‘ç»„åˆæ—¶ï¼Œè¿™éƒ½æ˜¯ä¸€ç§æœ‰ç”¨çš„æŠ€æœ¯ï¼Œç‰¹åˆ«æ˜¯é‚£äº›æ¶‰åŠâ€œä¸â€æˆ–â€œéâ€çš„ç»„åˆã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ æƒ³æ‰¾åˆ°æ‰€æœ‰åŒ…å« â€œaâ€ å’Œ â€œbâ€ çš„å•è¯ã€‚æ­£åˆ™è¡¨è¾¾å¼ä¸­æ²¡æœ‰å†…ç½®çš„â€œä¸â€æ“ä½œç¬¦ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»é€šè¿‡å¯»æ‰¾æ‰€æœ‰åŒ…å«ä¸€ä¸ª â€œaâ€ åé¢è·Ÿç€ä¸€ä¸ª â€œbâ€ çš„å•è¯ï¼Œæˆ–è€…ä¸€ä¸ª â€œbâ€ åé¢è·Ÿç€ä¸€ä¸ª â€œaâ€ çš„å•è¯æ¥è§£å†³å®ƒï¼š\n\nstr_view(words, \"a.*b|b.*a\")\n#&gt;  [2] â”‚ &lt;ab&gt;le\n#&gt;  [3] â”‚ &lt;ab&gt;out\n#&gt;  [4] â”‚ &lt;ab&gt;solute\n#&gt; [62] â”‚ &lt;availab&gt;le\n#&gt; [66] â”‚ &lt;ba&gt;by\n#&gt; [67] â”‚ &lt;ba&gt;ck\n#&gt; ... and 24 more\n\nå°†ä¸¤æ¬¡ str_detect() è°ƒç”¨çš„ç»“æœç»„åˆèµ·æ¥æ›´ç®€å•ï¼š\n\nwords[str_detect(words, \"a\") & str_detect(words, \"b\")]\n#&gt;  [1] \"able\"      \"about\"     \"absolute\"  \"available\" \"baby\"      \"back\"     \n#&gt;  [7] \"bad\"       \"bag\"       \"balance\"   \"ball\"      \"bank\"      \"bar\"      \n#&gt; [13] \"base\"      \"basis\"     \"bear\"      \"beat\"      \"beauty\"    \"because\"  \n#&gt; [19] \"black\"     \"board\"     \"boat\"      \"break\"     \"brilliant\" \"britain\"  \n#&gt; [25] \"debate\"    \"husband\"   \"labour\"    \"maybe\"     \"probable\"  \"table\"\n\nå¦‚æœæˆ‘ä»¬æƒ³çœ‹çœ‹æ˜¯å¦æœ‰åŒ…å«æ‰€æœ‰å…ƒéŸ³çš„å•è¯å‘¢ï¼Ÿå¦‚æœæˆ‘ä»¬ç”¨æ¨¡å¼æ¥åšï¼Œæˆ‘ä»¬éœ€è¦ç”Ÿæˆ 5!ï¼ˆ120ï¼‰ç§ä¸åŒçš„æ¨¡å¼ï¼š\n\nwords[str_detect(words, \"a.*e.*i.*o.*u\")]\n# ...\nwords[str_detect(words, \"u.*o.*i.*e.*a\")]\n\nå°†äº”æ¬¡ str_detect() è°ƒç”¨çš„ç»“æœç»„åˆèµ·æ¥è¦ç®€å•å¾—å¤šï¼š\n\nwords[\n  str_detect(words, \"a\") &\n  str_detect(words, \"e\") &\n  str_detect(words, \"i\") &\n  str_detect(words, \"o\") &\n  str_detect(words, \"u\")\n]\n#&gt; character(0)\n\næ€»çš„æ¥è¯´ï¼Œå¦‚æœä½ åœ¨å°è¯•åˆ›å»ºä¸€ä¸ªå•ä¸€çš„æ­£åˆ™è¡¨è¾¾å¼æ¥è§£å†³é—®é¢˜æ—¶é‡åˆ°å›°éš¾ï¼Œé€€ä¸€æ­¥æ€è€ƒä¸€ä¸‹ï¼Œä½ æ˜¯å¦å¯ä»¥æŠŠé—®é¢˜åˆ†è§£æˆæ›´å°çš„éƒ¨åˆ†ï¼Œåœ¨è§£å†³ä¸‹ä¸€ä¸ªæŒ‘æˆ˜ä¹‹å‰å…ˆè§£å†³æ¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚\n\n15.6.3 ç”¨ä»£ç åˆ›å»ºæ¨¡å¼\nå¦‚æœæˆ‘ä»¬æƒ³æ‰¾åˆ°æ‰€æœ‰æåˆ°æŸç§é¢œè‰²çš„ sentences å‘¢ï¼ŸåŸºæœ¬æ€æƒ³å¾ˆç®€å•ï¼šæˆ‘ä»¬åªéœ€å°†äº¤æ›¿ä¸å•è¯è¾¹ç•Œç»“åˆèµ·æ¥ã€‚\n\nstr_view(sentences, \"\\\\b(red|green|blue)\\\\b\")\n#&gt;   [2] â”‚ Glue the sheet to the dark &lt;blue&gt; background.\n#&gt;  [26] â”‚ Two &lt;blue&gt; fish swam in the tank.\n#&gt;  [92] â”‚ A wisp of cloud hung in the &lt;blue&gt; air.\n#&gt; [148] â”‚ The spot on the blotter was made by &lt;green&gt; ink.\n#&gt; [160] â”‚ The sofa cushion is &lt;red&gt; and of light weight.\n#&gt; [174] â”‚ The sky that morning was clear and bright &lt;blue&gt;.\n#&gt; ... and 20 more\n\nä½†éšç€é¢œè‰²æ•°é‡çš„å¢åŠ ï¼Œæ‰‹åŠ¨æ„å»ºè¿™ä¸ªæ¨¡å¼ä¼šå¾ˆå¿«å˜å¾—ä¹å‘³ã€‚å¦‚æœæˆ‘ä»¬èƒ½æŠŠé¢œè‰²å­˜å‚¨åœ¨ä¸€ä¸ªå‘é‡é‡Œï¼Œé‚£ä¸æ˜¯å¾ˆå¥½å—ï¼Ÿ\n\nrgb &lt;- c(\"red\", \"green\", \"blue\")\n\nå—¯ï¼Œæˆ‘ä»¬å¯ä»¥ï¼æˆ‘ä»¬åªéœ€è¦ç”¨ str_c() å’Œ str_flatten() ä»å‘é‡åˆ›å»ºæ¨¡å¼ï¼š\n\nstr_c(\"\\\\b(\", str_flatten(rgb, \"|\"), \")\\\\b\")\n#&gt; [1] \"\\\\b(red|green|blue)\\\\b\"\n\nå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªå¥½çš„é¢œè‰²åˆ—è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿è¿™ä¸ªæ¨¡å¼æ›´å…¨é¢ã€‚æˆ‘ä»¬å¯ä»¥ä» R ä¸­å¯ç”¨äºç»˜å›¾çš„å†…ç½®é¢œè‰²åˆ—è¡¨å¼€å§‹ï¼š\n\nstr_view(colors())\n#&gt; [1] â”‚ white\n#&gt; [2] â”‚ aliceblue\n#&gt; [3] â”‚ antiquewhite\n#&gt; [4] â”‚ antiquewhite1\n#&gt; [5] â”‚ antiquewhite2\n#&gt; [6] â”‚ antiquewhite3\n#&gt; ... and 651 more\n\nä½†è®©æˆ‘ä»¬é¦–å…ˆæ¶ˆé™¤å¸¦ç¼–å·çš„å˜ä½“ï¼š\n\ncols &lt;- colors()\ncols &lt;- cols[!str_detect(cols, \"\\\\d\")]\nstr_view(cols)\n#&gt; [1] â”‚ white\n#&gt; [2] â”‚ aliceblue\n#&gt; [3] â”‚ antiquewhite\n#&gt; [4] â”‚ aquamarine\n#&gt; [5] â”‚ azure\n#&gt; [6] â”‚ beige\n#&gt; ... and 137 more\n\nç„¶åæˆ‘ä»¬å¯ä»¥æŠŠå®ƒå˜æˆä¸€ä¸ªå·¨å¤§çš„æ¨¡å¼ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œä¸æ˜¾ç¤ºè¿™ä¸ªæ¨¡å¼ï¼Œå› ä¸ºå®ƒå¤ªå¤§äº†ï¼Œä½†ä½ å¯ä»¥çœ‹åˆ°å®ƒçš„å·¥ä½œæ•ˆæœï¼š\n\npattern &lt;- str_c(\"\\\\b(\", str_flatten(cols, \"|\"), \")\\\\b\")\nstr_view(sentences, pattern)\n#&gt;   [2] â”‚ Glue the sheet to the dark &lt;blue&gt; background.\n#&gt;  [12] â”‚ A rod is used to catch &lt;pink&gt; &lt;salmon&gt;.\n#&gt;  [26] â”‚ Two &lt;blue&gt; fish swam in the tank.\n#&gt;  [66] â”‚ Cars and busses stalled in &lt;snow&gt; drifts.\n#&gt;  [92] â”‚ A wisp of cloud hung in the &lt;blue&gt; air.\n#&gt; [112] â”‚ Leaves turn &lt;brown&gt; and &lt;yellow&gt; in the fall.\n#&gt; ... and 57 more\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œcols åªåŒ…å«æ•°å­—å’Œå­—æ¯ï¼Œæ‰€ä»¥ä½ ä¸éœ€è¦æ‹…å¿ƒå…ƒå­—ç¬¦ã€‚ä½†æ€»çš„æ¥è¯´ï¼Œæ¯å½“ä½ ä»ç°æœ‰å­—ç¬¦ä¸²åˆ›å»ºæ¨¡å¼æ—¶ï¼Œæ˜æ™ºçš„åšæ³•æ˜¯å…ˆç”¨ str_escape() å¤„ç†å®ƒä»¬ï¼Œä»¥ç¡®ä¿å®ƒä»¬æ˜¯å­—é¢åŒ¹é…ã€‚\n\n15.6.4 ç»ƒä¹ \n\n\nå¯¹äºä»¥ä¸‹æ¯ä¸ªæŒ‘æˆ˜ï¼Œå°è¯•ä½¿ç”¨å•ä¸€çš„æ­£åˆ™è¡¨è¾¾å¼å’Œå¤šä¸ª str_detect() è°ƒç”¨çš„ç»„åˆæ¥è§£å†³å®ƒã€‚\n\næ‰¾åˆ°æ‰€æœ‰ä»¥ x å¼€å¤´æˆ–ç»“å°¾çš„ wordsã€‚\næ‰¾åˆ°æ‰€æœ‰ä»¥å…ƒéŸ³å¼€å¤´å¹¶ä»¥è¾…éŸ³ç»“å°¾çš„ wordsã€‚\næ˜¯å¦æœ‰ä»»ä½• words è‡³å°‘åŒ…å«æ¯ç§ä¸åŒå…ƒéŸ³ä¸­çš„ä¸€ä¸ªï¼Ÿ\n\n\næ„å»ºæ¨¡å¼æ¥å¯»æ‰¾æ”¯æŒå’Œåå¯¹â€œi before e except after câ€ï¼ˆi åœ¨ e å‰ï¼Œc åé™¤å¤–ï¼‰è¿™ä¸€è§„åˆ™çš„è¯æ®ã€‚\ncolors() åŒ…å«ä¸€äº›ä¿®é¥°è¯ï¼Œå¦‚ â€œlightgrayâ€ å’Œ â€œdarkblueâ€ã€‚ä½ å¦‚ä½•èƒ½è‡ªåŠ¨è¯†åˆ«è¿™äº›ä¿®é¥°è¯ï¼Ÿï¼ˆæƒ³æƒ³ä½ å¯èƒ½å¦‚ä½•æ£€æµ‹ç„¶åç§»é™¤è¢«ä¿®é¥°çš„é¢œè‰²ï¼‰ã€‚\nåˆ›å»ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œä»¥æŸ¥æ‰¾ä»»ä½• R base æ•°æ®é›†ã€‚ä½ å¯ä»¥é€šè¿‡ data() å‡½æ•°çš„ä¸€ç§ç‰¹æ®Šç”¨æ³•è·å–è¿™äº›æ•°æ®é›†çš„åˆ—è¡¨ï¼šdata(package = \"datasets\")$results[, \"Item\"]ã€‚æ³¨æ„ï¼Œä¸€äº›æ—§çš„æ•°æ®é›†æ˜¯å•ä¸ªå‘é‡ï¼›å®ƒä»¬åœ¨æ‹¬å·ä¸­åŒ…å«äº†åˆ†ç»„â€œæ•°æ®æ¡†â€çš„åç§°ï¼Œæ‰€ä»¥ä½ éœ€è¦æŠŠé‚£äº›å»æ‰ã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>15</span>Â  <span class='chapter-title'>æ­£åˆ™è¡¨è¾¾å¼</span>"
    ]
  },
  {
    "objectID": "regexps.html#å…¶ä»–åœ°æ–¹çš„æ­£åˆ™è¡¨è¾¾å¼",
    "href": "regexps.html#å…¶ä»–åœ°æ–¹çš„æ­£åˆ™è¡¨è¾¾å¼",
    "title": "15Â  æ­£åˆ™è¡¨è¾¾å¼",
    "section": "\n15.7 å…¶ä»–åœ°æ–¹çš„æ­£åˆ™è¡¨è¾¾å¼",
    "text": "15.7 å…¶ä»–åœ°æ–¹çš„æ­£åˆ™è¡¨è¾¾å¼\nå°±åƒåœ¨ stringr å’Œ tidyr å‡½æ•°ä¸­ä¸€æ ·ï¼ŒR ä¸­è¿˜æœ‰è®¸å¤šå…¶ä»–åœ°æ–¹å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ã€‚ä»¥ä¸‹å„èŠ‚æè¿°äº†åœ¨æ›´å¹¿æ³›çš„ tidyverse å’Œ R base ä¸­çš„ä¸€äº›å…¶ä»–æœ‰ç”¨å‡½æ•°ã€‚\n\n15.7.1 tidyverse\nè¿˜æœ‰ä¸‰ä¸ªç‰¹åˆ«æœ‰ç”¨çš„åœ°æ–¹ï¼Œä½ å¯èƒ½æƒ³ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼š\n\nmatches(pattern) ä¼šé€‰æ‹©æ‰€æœ‰åç§°ä¸æ‰€æä¾›æ¨¡å¼åŒ¹é…çš„å˜é‡ã€‚å®ƒæ˜¯ä¸€ä¸ªâ€œtidyselectâ€å‡½æ•°ï¼Œä½ å¯ä»¥åœ¨ä»»ä½•é€‰æ‹©å˜é‡çš„ tidyverse å‡½æ•°ä¸­ä½¿ç”¨ï¼ˆä¾‹å¦‚ï¼Œselect()ã€rename_with() å’Œ across()ï¼‰ã€‚\npivot_longer() çš„ names_pattern å‚æ•°æ¥å—ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å‘é‡ï¼Œå°±åƒ separate_wider_regex() ä¸€æ ·ã€‚å½“ä»å…·æœ‰å¤æ‚ç»“æ„çš„å˜é‡åä¸­æå–æ•°æ®æ—¶ï¼Œå®ƒå¾ˆæœ‰ç”¨ã€‚\nseparate_longer_delim() å’Œ separate_wider_delim() ä¸­çš„ delim å‚æ•°é€šå¸¸åŒ¹é…ä¸€ä¸ªå›ºå®šçš„å­—ç¬¦ä¸²ï¼Œä½†ä½ å¯ä»¥ä½¿ç”¨ regex() ä½¿å…¶åŒ¹é…ä¸€ä¸ªæ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³åŒ¹é…ä¸€ä¸ªé€—å·ï¼Œåé¢å¯é€‰åœ°è·Ÿç€ä¸€ä¸ªç©ºæ ¼ï¼Œå³ regex(\", ?\")ï¼Œè¿™å°±å¾ˆæœ‰ç”¨ã€‚\n\n15.7.2 Base R\napropos(pattern) åœ¨å…¨å±€ç¯å¢ƒä¸­æœç´¢æ‰€æœ‰ä¸ç»™å®šæ¨¡å¼åŒ¹é…çš„å¯ç”¨å¯¹è±¡ã€‚å¦‚æœä½ ä¸å¤ªè®°å¾—ä¸€ä¸ªå‡½æ•°çš„åå­—ï¼Œè¿™å¾ˆæœ‰ç”¨ï¼š\n\napropos(\"replace\")\n#&gt; [1] \"%+replace%\"       \"replace\"          \"replace_na\"      \n#&gt; [4] \"setReplaceMethod\" \"str_replace\"      \"str_replace_all\" \n#&gt; [7] \"str_replace_na\"   \"theme_replace\"\n\nlist.files(path, pattern) åˆ—å‡º path ä¸­æ‰€æœ‰ä¸æ­£åˆ™è¡¨è¾¾å¼ pattern åŒ¹é…çš„æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ç”¨ä»¥ä¸‹æ–¹å¼æ‰¾åˆ°å½“å‰ç›®å½•ä¸­æ‰€æœ‰çš„ R Markdown æ–‡ä»¶ï¼š\n\nhead(list.files(pattern = \"\\\\.Rmd$\"))\n#&gt; character(0)\n\nå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œbase R ä½¿ç”¨çš„æ¨¡å¼è¯­è¨€ä¸ stringr ä½¿ç”¨çš„ç•¥æœ‰ä¸åŒã€‚è¿™æ˜¯å› ä¸º stringr æ˜¯å»ºç«‹åœ¨ stringi åŒ…ä¹‹ä¸Šçš„ï¼Œè€Œ stringi åˆæ˜¯å»ºç«‹åœ¨ ICU å¼•æ“ä¹‹ä¸Šçš„ï¼Œè€Œ base R å‡½æ•°åˆ™ä½¿ç”¨ TRE å¼•æ“æˆ– PCRE å¼•æ“ï¼Œè¿™å–å†³äºä½ æ˜¯å¦è®¾ç½®äº† perl = TRUEã€‚å¹¸è¿çš„æ˜¯ï¼Œæ­£åˆ™è¡¨è¾¾å¼çš„åŸºç¡€çŸ¥è¯†å·²ç»éå¸¸æˆç†Ÿï¼Œå½“ä½¿ç”¨ä½ åœ¨æœ¬ä¹¦ä¸­å­¦åˆ°çš„æ¨¡å¼æ—¶ï¼Œä½ å‡ ä¹ä¸ä¼šé‡åˆ°ä»€ä¹ˆå˜åŒ–ã€‚åªæœ‰å½“ä½ å¼€å§‹ä¾èµ–é«˜çº§åŠŸèƒ½ï¼Œå¦‚å¤æ‚çš„ Unicode å­—ç¬¦èŒƒå›´æˆ–ä½¿ç”¨ (?â€¦) è¯­æ³•çš„ç‰¹æ®ŠåŠŸèƒ½æ—¶ï¼Œä½ æ‰éœ€è¦æ³¨æ„è¿™ç§å·®å¼‚ã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>15</span>Â  <span class='chapter-title'>æ­£åˆ™è¡¨è¾¾å¼</span>"
    ]
  },
  {
    "objectID": "regexps.html#æ€»ç»“",
    "href": "regexps.html#æ€»ç»“",
    "title": "15Â  æ­£åˆ™è¡¨è¾¾å¼",
    "section": "\n15.8 æ€»ç»“",
    "text": "15.8 æ€»ç»“\nç”±äºæ¯ä¸ªæ ‡ç‚¹ç¬¦å·éƒ½å¯èƒ½è¢«èµ‹äºˆäº†å¤šé‡å«ä¹‰ï¼Œæ­£åˆ™è¡¨è¾¾å¼æ˜¯ç°å­˜æœ€ç´§å‡‘çš„è¯­è¨€ä¹‹ä¸€ã€‚å®ƒä»¬èµ·åˆç¡®å®ä»¤äººå›°æƒ‘ï¼Œä½†éšç€ä½ è®­ç»ƒä½ çš„çœ¼ç›å»é˜…è¯»å®ƒä»¬ï¼Œä½ çš„å¤§è„‘å»ç†è§£å®ƒä»¬ï¼Œä½ å°±è§£é”äº†ä¸€é¡¹å¼ºå¤§çš„æŠ€èƒ½ï¼Œå¯ä»¥åœ¨ R å’Œè®¸å¤šå…¶ä»–åœ°æ–¹ä½¿ç”¨ã€‚\nåœ¨æœ¬ç« ä¸­ï¼Œä½ é€šè¿‡å­¦ä¹ æœ€æœ‰ç”¨çš„ stringr å‡½æ•°å’Œæ­£åˆ™è¡¨è¾¾å¼è¯­è¨€æœ€é‡è¦çš„ç»„æˆéƒ¨åˆ†ï¼Œå¼€å§‹äº†æˆä¸ºæ­£åˆ™è¡¨è¾¾å¼å¤§å¸ˆçš„æ—…ç¨‹ã€‚è€Œä¸”è¿˜æœ‰å¤§é‡çš„èµ„æºå¯ä»¥è®©ä½ å­¦åˆ°æ›´å¤šã€‚\nä¸€ä¸ªå¥½çš„èµ·ç‚¹æ˜¯ vignette(\"regular-expressions\", package = \"stringr\")ï¼šå®ƒè®°å½•äº† stringr æ”¯æŒçš„å…¨éƒ¨è¯­æ³•ã€‚å¦ä¸€ä¸ªæœ‰ç”¨çš„å‚è€ƒæ˜¯ https://www.regular-expressions.info/ã€‚å®ƒä¸æ˜¯ R ç‰¹æœ‰çš„ï¼Œä½†ä½ å¯ä»¥ç”¨å®ƒæ¥å­¦ä¹ æ­£åˆ™è¡¨è¾¾å¼æœ€é«˜çº§çš„åŠŸèƒ½ä»¥åŠå®ƒä»¬åœ¨å¹•åæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚\nåŒæ ·å€¼å¾—äº†è§£çš„æ˜¯ï¼Œstringr æ˜¯åœ¨ Marek Gagolewski çš„ stringi åŒ…ä¹‹ä¸Šå®ç°çš„ã€‚å¦‚æœä½ åœ¨ stringr ä¸­æ‰¾ä¸åˆ°èƒ½æ»¡è¶³ä½ éœ€è¦çš„åŠŸèƒ½ï¼Œä¸è¦å®³æ€•å» stringi ä¸­å¯»æ‰¾ã€‚ä½ ä¼šå‘ç° stringi å¾ˆå®¹æ˜“ä¸Šæ‰‹ï¼Œå› ä¸ºå®ƒéµå¾ªäº†è®¸å¤šä¸ stringr ç›¸åŒçš„çº¦å®šã€‚\nåœ¨ä¸‹ä¸€ç« ï¼Œæˆ‘ä»¬å°†è®¨è®ºä¸€ä¸ªä¸å­—ç¬¦ä¸²å¯†åˆ‡ç›¸å…³çš„æ•°æ®ç»“æ„ï¼šå› å­ã€‚å› å­åœ¨ R ä¸­ç”¨äºè¡¨ç¤ºåˆ†ç±»æ•°æ®ï¼Œå³å…·æœ‰å›ºå®šçš„ã€å·²çŸ¥çš„å¯èƒ½å€¼é›†åˆçš„æ•°æ®ï¼Œè¿™äº›å€¼ç”±ä¸€ä¸ªå­—ç¬¦ä¸²å‘é‡æ¥æ ‡è¯†ã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>15</span>Â  <span class='chapter-title'>æ­£åˆ™è¡¨è¾¾å¼</span>"
    ]
  },
  {
    "objectID": "regexps.html#footnotes",
    "href": "regexps.html#footnotes",
    "title": "15Â  æ­£åˆ™è¡¨è¾¾å¼",
    "section": "",
    "text": "ä½ å¯ä»¥è¯»ä½œç¡¬ gï¼ˆreg-xï¼‰æˆ–è½¯ gï¼ˆrej-xï¼‰ã€‚â†©ï¸\nä½ å°†åœ¨ Section 15.4.1 ä¸­å­¦ä¹ å¦‚ä½•è½¬ä¹‰è¿™äº›ç‰¹æ®Šå«ä¹‰ã€‚â†©ï¸\nå—¯ï¼Œé™¤äº† \\n ä¹‹å¤–çš„ä»»ä½•å­—ç¬¦ã€‚â†©ï¸\nè¿™ç»™äº†æˆ‘ä»¬åŒ…å« â€œxâ€ çš„åå­—çš„æ¯”ä¾‹ï¼›å¦‚æœä½ æƒ³è¦çš„æ˜¯åå­—ä¸­å« x çš„å©´å„¿çš„æ¯”ä¾‹ï¼Œä½ éœ€è¦è¿›è¡ŒåŠ æƒå¹³å‡ã€‚â†©ï¸\næˆ‘ä»¬å¸Œæœ›å¯ä»¥å‘ä½ ä¿è¯ï¼Œåœ¨ç°å®ç”Ÿæ´»ä¸­ä½ æ°¸è¿œä¸ä¼šçœ‹åˆ°è¿™ä¹ˆå¥‡æ€ªçš„ä¸œè¥¿ï¼Œä½†ä¸å¹¸çš„æ˜¯ï¼Œåœ¨ä½ çš„èŒä¸šç”Ÿæ¶¯ä¸­ï¼Œä½ å¾ˆå¯èƒ½ä¼šçœ‹åˆ°æ›´å¥‡æ€ªçš„ï¼â†©ï¸\nå…ƒå­—ç¬¦çš„å®Œæ•´é›†åˆæ˜¯ .^$\\|*+?{}[]()â†©ï¸\nè®°ä½ï¼Œè¦åˆ›å»ºä¸€ä¸ªåŒ…å« \\d æˆ– \\s çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œä½ éœ€è¦ä¸ºå­—ç¬¦ä¸²è½¬ä¹‰ \\ï¼Œæ‰€ä»¥ä½ ä¼šè¾“å…¥ \"\\\\d\" æˆ– \"\\\\s\"ã€‚â†©ï¸\nä¸»è¦æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨æœ¬ä¹¦ä¸­ä»æœªè®¨è®ºè¿‡çŸ©é˜µï¼â†©ï¸\ncomments = TRUE ä¸åŸå§‹å­—ç¬¦ä¸²ç»“åˆä½¿ç”¨å°¤å…¶æœ‰æ•ˆï¼Œå°±åƒæˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨çš„é‚£æ ·ã€‚â†©ï¸",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>15</span>Â  <span class='chapter-title'>æ­£åˆ™è¡¨è¾¾å¼</span>"
    ]
  },
  {
    "objectID": "factors.html",
    "href": "factors.html",
    "title": "16Â  å› å­",
    "section": "",
    "text": "16.1 å¼•è¨€\nå› å­ (factor) ç”¨äºå¤„ç†åˆ†ç±»å˜é‡ï¼Œå³é‚£äº›å…·æœ‰å›ºå®šä¸”å·²çŸ¥çš„ä¸€ç»„å¯èƒ½å€¼çš„å˜é‡ã€‚å½“ä½ å¸Œæœ›ä»¥éå­—æ¯é¡ºåºæ˜¾ç¤ºå­—ç¬¦å‘é‡æ—¶ï¼Œå› å­ä¹Ÿå¾ˆæœ‰ç”¨ã€‚\næˆ‘ä»¬å°†é¦–å…ˆé˜è¿°ä¸ºä»€ä¹ˆæ•°æ®åˆ†æéœ€è¦å› å­1ï¼Œä»¥åŠä½ å¦‚ä½•ç”¨ factor() åˆ›å»ºå®ƒä»¬ã€‚æ¥ç€ï¼Œæˆ‘ä»¬å°†å‘ä½ ä»‹ç» gss_cat æ•°æ®é›†ï¼Œå…¶ä¸­åŒ…å«å¤§é‡åˆ†ç±»å˜é‡ä¾›ä½ è¯•éªŒã€‚ç„¶åï¼Œä½ å°†ä½¿ç”¨è¯¥æ•°æ®é›†ç»ƒä¹ ä¿®æ”¹å› å­çš„é¡ºåºå’Œå€¼ï¼Œæœ€åæˆ‘ä»¬ä»¥è®¨è®ºæœ‰åºå› å­ä½œä¸ºç»“æŸã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>16</span>Â  <span class='chapter-title'>å› å­</span>"
    ]
  },
  {
    "objectID": "factors.html#å¼•è¨€",
    "href": "factors.html#å¼•è¨€",
    "title": "16Â  å› å­",
    "section": "",
    "text": "16.1.1 å…ˆå†³æ¡ä»¶\nR base æä¾›äº†ä¸€äº›åˆ›å»ºå’Œæ“ä½œå› å­çš„åŸºæœ¬å·¥å…·ã€‚æˆ‘ä»¬å°†ç”¨ forcats åŒ…æ¥è¡¥å……è¿™äº›å·¥å…·ï¼Œè¯¥åŒ…æ˜¯æ ¸å¿ƒ tidyverse çš„ä¸€éƒ¨åˆ†ã€‚å®ƒæä¾›äº†ä¸€ç³»åˆ—å¤„ç†åˆ†ç±»å˜é‡ (categorical variables) çš„å·¥å…·ï¼ˆå¹¶ä¸”å®ƒä¹Ÿæ˜¯ factors çš„ä¸€ä¸ªå­—æ¯é‡ç»„è¯ï¼ï¼‰ï¼ŒåŒ…å«äº†å¤§é‡ç”¨äºå¤„ç†å› å­çš„è¾…åŠ©å‡½æ•°ã€‚\n\nlibrary(tidyverse)",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>16</span>Â  <span class='chapter-title'>å› å­</span>"
    ]
  },
  {
    "objectID": "factors.html#å› å­åŸºç¡€",
    "href": "factors.html#å› å­åŸºç¡€",
    "title": "16Â  å› å­",
    "section": "\n16.2 å› å­åŸºç¡€",
    "text": "16.2 å› å­åŸºç¡€\nå‡è®¾ä½ æœ‰ä¸€ä¸ªè®°å½•æœˆä»½çš„å˜é‡ï¼š\n\nx1 &lt;- c(\"Dec\", \"Apr\", \"Jan\", \"Mar\")\n\nä½¿ç”¨å­—ç¬¦ä¸²æ¥è®°å½•è¿™ä¸ªå˜é‡æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š\n\n\nåªæœ‰åäºŒä¸ªå¯èƒ½çš„æœˆä»½ï¼Œä½†æ²¡æœ‰ä»»ä½•ä¸œè¥¿èƒ½é˜²æ­¢ä½ æ‰“å­—é”™è¯¯ï¼š\n\nx2 &lt;- c(\"Dec\", \"Apr\", \"Jam\", \"Mar\")\n\n\n\nå®ƒçš„æ’åºæ–¹å¼æ²¡æœ‰ç”¨å¤„ï¼š\n\nsort(x1)\n#&gt; [1] \"Apr\" \"Dec\" \"Jan\" \"Mar\"\n\n\n\nä½ å¯ä»¥ç”¨å› å­æ¥è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ã€‚è¦åˆ›å»ºä¸€ä¸ªå› å­ï¼Œä½ å¿…é¡»é¦–å…ˆåˆ›å»ºä¸€ä¸ªæœ‰æ•ˆæ°´å¹³ (levels) çš„åˆ—è¡¨ï¼š\n\nmonth_levels &lt;- c(\n  \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \n  \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"\n)\n\nç°åœ¨ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªå› å­ï¼š\n\ny1 &lt;- factor(x1, levels = month_levels)\ny1\n#&gt; [1] Dec Apr Jan Mar\n#&gt; Levels: Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec\n\nsort(y1)\n#&gt; [1] Jan Mar Apr Dec\n#&gt; Levels: Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec\n\nä»»ä½•ä¸åœ¨æ°´å¹³ä¸­çš„å€¼éƒ½ä¼šè¢«é™é»˜åœ°è½¬æ¢ä¸º NAï¼š\n\ny2 &lt;- factor(x2, levels = month_levels)\ny2\n#&gt; [1] Dec  Apr  &lt;NA&gt; Mar \n#&gt; Levels: Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec\n\nè¿™çœ‹èµ·æ¥æœ‰é£é™©ï¼Œæ‰€ä»¥ä½ å¯èƒ½æƒ³æ”¹ç”¨ forcats::fct()ï¼š\n\ny2 &lt;- fct(x2, levels = month_levels)\n#&gt; Error in `fct()`:\n#&gt; ! All values of `x` must appear in `levels` or `na`\n#&gt; â„¹ Missing level: \"Jam\"\n\nå¦‚æœä½ çœç•¥äº†æ°´å¹³ï¼Œå®ƒä»¬å°†ä»æ•°æ®ä¸­æŒ‰å­—æ¯é¡ºåºæå–ï¼š\n\nfactor(x1)\n#&gt; [1] Dec Apr Jan Mar\n#&gt; Levels: Apr Dec Jan Mar\n\næŒ‰å­—æ¯é¡ºåºæ’åºæœ‰ç‚¹é£é™©ï¼Œå› ä¸ºå¹¶éæ¯å°è®¡ç®—æœºéƒ½ä¼šä»¥ç›¸åŒçš„æ–¹å¼å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ’åºã€‚æ‰€ä»¥ forcats::fct() ä¼šæŒ‰é¦–æ¬¡å‡ºç°çš„é¡ºåºæ’åºï¼š\n\nfct(x1)\n#&gt; [1] Dec Apr Jan Mar\n#&gt; Levels: Dec Apr Jan Mar\n\nå¦‚æœä½ éœ€è¦ç›´æ¥è®¿é—®æœ‰æ•ˆçš„æ°´å¹³é›†ï¼Œä½ å¯ä»¥ä½¿ç”¨ levels()ï¼š\n\nlevels(y2)\n#&gt;  [1] \"Jan\" \"Feb\" \"Mar\" \"Apr\" \"May\" \"Jun\" \"Jul\" \"Aug\" \"Sep\" \"Oct\" \"Nov\" \"Dec\"\n\nä½ ä¹Ÿå¯ä»¥åœ¨ä½¿ç”¨ readr è¯»å–æ•°æ®æ—¶ï¼Œé€šè¿‡ col_factor() åˆ›å»ºä¸€ä¸ªå› å­ï¼š\n\ncsv &lt;- \"\nmonth,value\nJan,12\nFeb,56\nMar,12\"\n\ndf &lt;- read_csv(csv, col_types = cols(month = col_factor(month_levels)))\ndf$month\n#&gt; [1] Jan Feb Mar\n#&gt; Levels: Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>16</span>Â  <span class='chapter-title'>å› å­</span>"
    ]
  },
  {
    "objectID": "factors.html#ç»¼åˆç¤¾ä¼šè°ƒæŸ¥",
    "href": "factors.html#ç»¼åˆç¤¾ä¼šè°ƒæŸ¥",
    "title": "16Â  å› å­",
    "section": "\n16.3 ç»¼åˆç¤¾ä¼šè°ƒæŸ¥",
    "text": "16.3 ç»¼åˆç¤¾ä¼šè°ƒæŸ¥\nåœ¨æœ¬ç« çš„å…¶ä½™éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ forcats::gss_catã€‚è¿™æ˜¯æ¥è‡ªç»¼åˆç¤¾ä¼šè°ƒæŸ¥ (General Social Survey) çš„æ•°æ®æ ·æœ¬ï¼Œè¯¥è°ƒæŸ¥æ˜¯ç”±èŠåŠ å“¥å¤§å­¦çš„ç‹¬ç«‹ç ”ç©¶æœºæ„ NORC è¿›è¡Œçš„ä¸€é¡¹é•¿æœŸç¾å›½è°ƒæŸ¥ã€‚è¯¥è°ƒæŸ¥æœ‰æ•°åƒä¸ªé—®é¢˜ï¼Œåœ¨ gss_cat ä¸­ï¼ŒHadley é€‰æ‹©äº†ä¸€å°éƒ¨åˆ†ï¼Œç”¨ä»¥è¯´æ˜ä½ åœ¨å¤„ç†å› å­æ—¶ä¼šé‡åˆ°çš„ä¸€äº›å¸¸è§æŒ‘æˆ˜ã€‚\n\ngss_cat\n#&gt; # A tibble: 21,483 Ã— 9\n#&gt;    year marital         age race  rincome        partyid           \n#&gt;   &lt;int&gt; &lt;fct&gt;         &lt;int&gt; &lt;fct&gt; &lt;fct&gt;          &lt;fct&gt;             \n#&gt; 1  2000 Never married    26 White $8000 to 9999  Ind,near rep      \n#&gt; 2  2000 Divorced         48 White $8000 to 9999  Not str republican\n#&gt; 3  2000 Widowed          67 White Not applicable Independent       \n#&gt; 4  2000 Never married    39 White Not applicable Ind,near rep      \n#&gt; 5  2000 Divorced         25 White Not applicable Not str democrat  \n#&gt; 6  2000 Married          25 White $20000 - 24999 Strong democrat   \n#&gt; # â„¹ 21,477 more rows\n#&gt; # â„¹ 3 more variables: relig &lt;fct&gt;, denom &lt;fct&gt;, tvhours &lt;int&gt;\n\nï¼ˆè¯·è®°ä½ï¼Œç”±äºè¿™ä¸ªæ•°æ®é›†æ˜¯ç”±ä¸€ä¸ªåŒ…æä¾›çš„ï¼Œä½ å¯ä»¥ä½¿ç”¨ ?gss_cat è·å–æ›´å¤šå…³äºå˜é‡çš„ä¿¡æ¯ã€‚ï¼‰\nå½“å› å­å­˜å‚¨åœ¨ tibble ä¸­æ—¶ï¼Œä½ æ— æ³•è½»æ˜“çœ‹åˆ°å®ƒä»¬çš„æ°´å¹³ã€‚ä¸€ç§æŸ¥çœ‹å®ƒä»¬çš„æ–¹æ³•æ˜¯ä½¿ç”¨ count()ï¼š\n\ngss_cat |&gt;\n  count(race)\n#&gt; # A tibble: 3 Ã— 2\n#&gt;   race      n\n#&gt;   &lt;fct&gt; &lt;int&gt;\n#&gt; 1 Other  1959\n#&gt; 2 Black  3129\n#&gt; 3 White 16395\n\nåœ¨å¤„ç†å› å­æ—¶ï¼Œä¸¤ä¸ªæœ€å¸¸è§çš„æ“ä½œæ˜¯æ”¹å˜æ°´å¹³çš„é¡ºåºå’Œæ”¹å˜æ°´å¹³çš„å€¼ã€‚è¿™äº›æ“ä½œå°†åœ¨ä¸‹é¢çš„ç« èŠ‚ä¸­æè¿°ã€‚\n\n16.3.1 ç»ƒä¹ \n\næ¢ç´¢ rincomeï¼ˆæŠ¥å‘Šçš„æ”¶å…¥ï¼‰çš„åˆ†å¸ƒã€‚æ˜¯ä»€ä¹ˆä½¿å¾—é»˜è®¤çš„æ¡å½¢å›¾éš¾ä»¥ç†è§£ï¼Ÿä½ å¦‚ä½•æ”¹è¿›è¿™ä¸ªå›¾ï¼Ÿ\nåœ¨è¿™æ¬¡è°ƒæŸ¥ä¸­ï¼Œæœ€å¸¸è§çš„ religï¼ˆå®—æ•™ï¼‰æ˜¯ä»€ä¹ˆï¼Ÿæœ€å¸¸è§çš„ partyidï¼ˆæ”¿å…šè®¤åŒï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ\ndenomï¼ˆæ•™æ´¾ï¼‰é€‚ç”¨äºå“ªä¸ª religï¼Ÿä½ å¦‚ä½•é€šè¿‡è¡¨æ ¼æ‰¾å‡ºç­”æ¡ˆï¼Ÿä½ å¦‚ä½•é€šè¿‡å¯è§†åŒ–æ‰¾å‡ºç­”æ¡ˆï¼Ÿ",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>16</span>Â  <span class='chapter-title'>å› å­</span>"
    ]
  },
  {
    "objectID": "factors.html#sec-modifying-factor-order",
    "href": "factors.html#sec-modifying-factor-order",
    "title": "16Â  å› å­",
    "section": "\n16.4 ä¿®æ”¹å› å­é¡ºåº",
    "text": "16.4 ä¿®æ”¹å› å­é¡ºåº\nåœ¨å¯è§†åŒ–ä¸­æ”¹å˜å› å­æ°´å¹³çš„é¡ºåºé€šå¸¸å¾ˆæœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ æƒ³æ¢ç´¢ä¸åŒå®—æ•™æ¯å¤©å¹³å‡è§‚çœ‹ç”µè§†çš„å°æ—¶æ•°ï¼š\n\nrelig_summary &lt;- gss_cat |&gt;\n  group_by(relig) |&gt;\n  summarize(\n    tvhours = mean(tvhours, na.rm = TRUE),\n    n = n()\n  )\n\nggplot(relig_summary, aes(x = tvhours, y = relig)) +\n  geom_point()\n\n\n\n\n\n\n\nè¿™ä¸ªå›¾å¾ˆéš¾è¯»ï¼Œå› ä¸ºæ²¡æœ‰æ•´ä½“æ¨¡å¼ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ fct_reorder() æ¥é‡æ–°æ’åº relig çš„æ°´å¹³æ¥æ”¹è¿›å®ƒã€‚fct_reorder() æ¥å—ä¸‰ä¸ªå‚æ•°ï¼š\n\n\n.fï¼Œä½ æƒ³è¦ä¿®æ”¹å…¶æ°´å¹³çš„å› å­ã€‚\n\n.xï¼Œä½ æƒ³è¦ç”¨æ¥é‡æ–°æ’åºæ°´å¹³çš„æ•°å€¼å‘é‡ã€‚\nå¯é€‰çš„ .funï¼Œä¸€ä¸ªå‡½æ•°ï¼Œå¦‚æœ .f çš„æ¯ä¸ªå€¼å¯¹åº”å¤šä¸ª .x çš„å€¼ï¼Œåˆ™ä½¿ç”¨è¯¥å‡½æ•°ã€‚é»˜è®¤å€¼æ˜¯ medianã€‚\n\n\nggplot(relig_summary, aes(x = tvhours, y = fct_reorder(relig, tvhours))) +\n  geom_point()\n\n\n\n\n\n\n\né‡æ–°æ’åºå®—æ•™ä½¿å¾—æ›´å®¹æ˜“çœ‹å‡ºâ€œä¸çŸ¥é“â€ç±»åˆ«çš„äººçœ‹ç”µè§†çš„æ—¶é—´è¦å¤šå¾—å¤šï¼Œè€Œå°åº¦æ•™å’Œå…¶ä»–ä¸œæ–¹å®—æ•™çš„äººçœ‹ç”µè§†çš„æ—¶é—´è¦å°‘å¾—å¤šã€‚\nå½“ä½ å¼€å§‹è¿›è¡Œæ›´å¤æ‚çš„è½¬æ¢æ—¶ï¼Œæˆ‘ä»¬å»ºè®®å°†å®ƒä»¬ä» aes() ä¸­ç§»å‡ºï¼Œæ”¾åˆ°ä¸€ä¸ªå•ç‹¬çš„ mutate() æ­¥éª¤ä¸­ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åƒä¸‹é¢è¿™æ ·é‡å†™ä¸Šé¢çš„å›¾ï¼š\n\nrelig_summary |&gt;\n  mutate(\n    relig = fct_reorder(relig, tvhours)\n  ) |&gt;\n  ggplot(aes(x = tvhours, y = relig)) +\n  geom_point()\n\nå¦‚æœæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç±»ä¼¼çš„å›¾ï¼Œçœ‹çœ‹å¹³å‡å¹´é¾„åœ¨ä¸åŒæŠ¥å‘Šæ”¶å…¥æ°´å¹³ä¸Šæ˜¯å¦‚ä½•å˜åŒ–çš„å‘¢ï¼Ÿ\n\nrincome_summary &lt;- gss_cat |&gt;\n  group_by(rincome) |&gt;\n  summarize(\n    age = mean(age, na.rm = TRUE),\n    n = n()\n  )\n\nggplot(rincome_summary, aes(x = age, y = fct_reorder(rincome, age))) +\n  geom_point()\n\n\n\n\n\n\n\nåœ¨è¿™é‡Œï¼Œä»»æ„é‡æ–°æ’åºæ°´å¹³ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼è¿™æ˜¯å› ä¸º rincome å·²ç»æœ‰äº†ä¸€ä¸ªæˆ‘ä»¬ä¸åº”è¯¥æ‰“ä¹±çš„åŸåˆ™æ€§é¡ºåºã€‚è¯·å°† fct_reorder() ä¿ç•™ç»™é‚£äº›æ°´å¹³æ˜¯ä»»æ„æ’åºçš„å› å­ã€‚\nç„¶è€Œï¼Œå°†â€œä¸é€‚ç”¨ (Not applicable)â€å’Œå…¶ä»–ç‰¹æ®Šæ°´å¹³ä¸€èµ·ç§»åˆ°å‰é¢æ˜¯æœ‰æ„ä¹‰çš„ã€‚ä½ å¯ä»¥ä½¿ç”¨ fct_relevel()ã€‚å®ƒæ¥å—ä¸€ä¸ªå› å­ .fï¼Œç„¶åæ˜¯ä»»æ„æ•°é‡çš„ä½ æƒ³è¦ç§»åˆ°æœ€å‰é¢çš„æ°´å¹³ã€‚\n\nggplot(rincome_summary, aes(x = age, y = fct_relevel(rincome, \"Not applicable\"))) +\n  geom_point()\n\n\n\n\n\n\n\nä½ è®¤ä¸ºä¸ºä»€ä¹ˆâ€œä¸é€‚ç”¨â€çš„å¹³å‡å¹´é¾„è¿™ä¹ˆé«˜ï¼Ÿ\nå½“ä½ åœ¨å›¾ä¸Šä¸ºçº¿æ¡ç€è‰²æ—¶ï¼Œå¦ä¸€ç§ç±»å‹çš„é‡æ–°æ’åºä¹Ÿå¾ˆæœ‰ç”¨ã€‚fct_reorder2(.f, .x, .y) é€šè¿‡ä¸æœ€å¤§ .x å€¼ç›¸å…³è”çš„ .y å€¼æ¥é‡æ–°æ’åºå› å­ .fã€‚è¿™ä½¿å¾—å›¾æ›´å®¹æ˜“é˜…è¯»ï¼Œå› ä¸ºå›¾å³ä¾§çš„çº¿æ¡é¢œè‰²å°†ä¸å›¾ä¾‹å¯¹é½ã€‚\nby_age &lt;- gss_cat |&gt;\n  filter(!is.na(age)) |&gt;\n  count(age, marital) |&gt;\n  group_by(age) |&gt;\n  mutate(\n    prop = n / sum(n)\n  )\n\nggplot(by_age, aes(x = age, y = prop, color = marital)) +\n  geom_line(linewidth = 1) +\n  scale_color_brewer(palette = \"Set1\")\n\nggplot(by_age, aes(x = age, y = prop, color = fct_reorder2(marital, age, prop))) +\n  geom_line(linewidth = 1) +\n  scale_color_brewer(palette = \"Set1\") +\n  labs(color = \"marital\")\n\n\n\n\n\n\n\n\n\n\næœ€åï¼Œå¯¹äºæ¡å½¢å›¾ï¼Œä½ å¯ä»¥ä½¿ç”¨ fct_infreq() æŒ‰é¢‘ç‡é™åºæ’åˆ—æ°´å¹³ï¼šè¿™æ˜¯æœ€ç®€å•çš„é‡æ–°æ’åºç±»å‹ï¼Œå› ä¸ºå®ƒä¸éœ€è¦ä»»ä½•é¢å¤–çš„å˜é‡ã€‚å¦‚æœä½ å¸Œæœ›å®ƒä»¬æŒ‰é¢‘ç‡å‡åºæ’åˆ—ï¼Œå¯ä»¥ä¸ fct_rev() ç»“åˆä½¿ç”¨ï¼Œè¿™æ ·åœ¨æ¡å½¢å›¾ä¸­æœ€å¤§çš„å€¼å°±ä¼šåœ¨å³è¾¹ï¼Œè€Œä¸æ˜¯å·¦è¾¹ã€‚\n\ngss_cat |&gt;\n  mutate(marital = marital |&gt; fct_infreq() |&gt; fct_rev()) |&gt;\n  ggplot(aes(x = marital)) +\n  geom_bar()\n\n\n\n\n\n\n\n\n16.4.1 ç»ƒä¹ \n\ntvhours ä¸­æœ‰ä¸€äº›å¯ç–‘çš„é«˜æ•°å€¼ã€‚å‡å€¼æ˜¯ä¸€ä¸ªå¥½çš„æ±‡æ€»ç»Ÿè®¡é‡å—ï¼Ÿ\nå¯¹äº gss_cat ä¸­çš„æ¯ä¸ªå› å­ï¼Œåˆ¤æ–­å…¶æ°´å¹³çš„é¡ºåºæ˜¯ä»»æ„çš„è¿˜æ˜¯æœ‰åŸåˆ™çš„ã€‚\nä¸ºä»€ä¹ˆå°†â€œä¸é€‚ç”¨ (Not applicable)â€ç§»åˆ°æ°´å¹³çš„å‰é¢ä¼šä½¿å®ƒç§»åŠ¨åˆ°å›¾çš„åº•éƒ¨ï¼Ÿ",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>16</span>Â  <span class='chapter-title'>å› å­</span>"
    ]
  },
  {
    "objectID": "factors.html#ä¿®æ”¹å› å­æ°´å¹³",
    "href": "factors.html#ä¿®æ”¹å› å­æ°´å¹³",
    "title": "16Â  å› å­",
    "section": "\n16.5 ä¿®æ”¹å› å­æ°´å¹³",
    "text": "16.5 ä¿®æ”¹å› å­æ°´å¹³\næ¯”æ”¹å˜æ°´å¹³é¡ºåºæ›´å¼ºå¤§çš„æ˜¯æ”¹å˜å®ƒä»¬çš„å€¼ã€‚è¿™å¯ä»¥è®©ä½ ä¸ºå‡ºç‰ˆç‰©æ¾„æ¸…æ ‡ç­¾ï¼Œå¹¶ä¸ºé«˜å±‚æ¬¡çš„å±•ç¤ºæŠ˜å æ°´å¹³ã€‚æœ€é€šç”¨å’Œæœ€å¼ºå¤§çš„å·¥å…·æ˜¯ fct_recode()ã€‚å®ƒå…è®¸ä½ é‡ç¼–ç æˆ–æ›´æ”¹æ¯ä¸ªæ°´å¹³çš„å€¼ã€‚ä¾‹å¦‚ï¼Œä»¥ gss_cat æ•°æ®æ¡†ä¸­çš„ partyid å˜é‡ä¸ºä¾‹ï¼š\n\ngss_cat |&gt; count(partyid)\n#&gt; # A tibble: 10 Ã— 2\n#&gt;   partyid                n\n#&gt;   &lt;fct&gt;              &lt;int&gt;\n#&gt; 1 No answer            154\n#&gt; 2 Don't know             1\n#&gt; 3 Other party          393\n#&gt; 4 Strong republican   2314\n#&gt; 5 Not str republican  3032\n#&gt; 6 Ind,near rep        1791\n#&gt; # â„¹ 4 more rows\n\nè¿™äº›æ°´å¹³å¾ˆç®€çŸ­ä¸”ä¸ä¸€è‡´ã€‚è®©æˆ‘ä»¬è°ƒæ•´å®ƒä»¬ï¼Œè®©å®ƒä»¬æ›´é•¿å¹¶ä½¿ç”¨å¹³è¡Œçš„ç»“æ„ã€‚åƒ tidyverse ä¸­å¤§å¤šæ•°é‡å‘½åå’Œé‡ç¼–ç å‡½æ•°ä¸€æ ·ï¼Œæ–°å€¼åœ¨å·¦è¾¹ï¼Œæ—§å€¼åœ¨å³è¾¹ï¼š\n\ngss_cat |&gt;\n  mutate(\n    partyid = fct_recode(partyid,\n      \"Republican, strong\"    = \"Strong republican\",\n      \"Republican, weak\"      = \"Not str republican\",\n      \"Independent, near rep\" = \"Ind,near rep\",\n      \"Independent, near dem\" = \"Ind,near dem\",\n      \"Democrat, weak\"        = \"Not str democrat\",\n      \"Democrat, strong\"      = \"Strong democrat\"\n    )\n  ) |&gt;\n  count(partyid)\n#&gt; # A tibble: 10 Ã— 2\n#&gt;   partyid                   n\n#&gt;   &lt;fct&gt;                 &lt;int&gt;\n#&gt; 1 No answer               154\n#&gt; 2 Don't know                1\n#&gt; 3 Other party             393\n#&gt; 4 Republican, strong     2314\n#&gt; 5 Republican, weak       3032\n#&gt; 6 Independent, near rep  1791\n#&gt; # â„¹ 4 more rows\n\nfct_recode() ä¼šä¿æŒæœªæ˜ç¡®æåŠçš„æ°´å¹³ä¸å˜ï¼Œå¹¶ä¸”å¦‚æœä½ æ„å¤–åœ°å¼•ç”¨äº†ä¸å­˜åœ¨çš„æ°´å¹³ï¼Œå®ƒä¼šè­¦å‘Šä½ ã€‚\nè¦ç»„åˆç»„åˆ«ï¼Œä½ å¯ä»¥å°†å¤šä¸ªæ—§æ°´å¹³åˆ†é…ç»™åŒä¸€ä¸ªæ–°æ°´å¹³ï¼š\n\ngss_cat |&gt;\n  mutate(\n    partyid = fct_recode(partyid,\n      \"Republican, strong\"    = \"Strong republican\",\n      \"Republican, weak\"      = \"Not str republican\",\n      \"Independent, near rep\" = \"Ind,near rep\",\n      \"Independent, near dem\" = \"Ind,near dem\",\n      \"Democrat, weak\"        = \"Not str democrat\",\n      \"Democrat, strong\"      = \"Strong democrat\",\n      \"Other\"                 = \"No answer\",\n      \"Other\"                 = \"Don't know\",\n      \"Other\"                 = \"Other party\"\n    )\n  )\n\nè¯·è°¨æ…ä½¿ç”¨è¿™ç§æŠ€æœ¯ï¼šå¦‚æœä½ å°†çœŸæ­£ä¸åŒçš„ç±»åˆ«ç»„åˆåœ¨ä¸€èµ·ï¼Œä½ æœ€ç»ˆä¼šå¾—åˆ°è¯¯å¯¼æ€§çš„ç»“æœã€‚\nå¦‚æœä½ æƒ³æŠ˜å å¾ˆå¤šæ°´å¹³ï¼Œfct_collapse() æ˜¯ fct_recode() çš„ä¸€ä¸ªæœ‰ç”¨å˜ä½“ã€‚å¯¹äºæ¯ä¸ªæ–°å˜é‡ï¼Œä½ å¯ä»¥æä¾›ä¸€ä¸ªæ—§æ°´å¹³çš„å‘é‡ï¼š\n\ngss_cat |&gt;\n  mutate(\n    partyid = fct_collapse(partyid,\n      \"other\" = c(\"No answer\", \"Don't know\", \"Other party\"),\n      \"rep\" = c(\"Strong republican\", \"Not str republican\"),\n      \"ind\" = c(\"Ind,near rep\", \"Independent\", \"Ind,near dem\"),\n      \"dem\" = c(\"Not str democrat\", \"Strong democrat\")\n    )\n  ) |&gt;\n  count(partyid)\n#&gt; # A tibble: 4 Ã— 2\n#&gt;   partyid     n\n#&gt;   &lt;fct&gt;   &lt;int&gt;\n#&gt; 1 other     548\n#&gt; 2 rep      5346\n#&gt; 3 ind      8409\n#&gt; 4 dem      7180\n\næœ‰æ—¶ä½ åªæ˜¯æƒ³æŠŠå°çš„ç»„åˆ«é›†ä¸­åœ¨ä¸€èµ·ï¼Œä»¥ç®€åŒ–å›¾è¡¨æˆ–è¡¨æ ¼ã€‚è¿™å°±æ˜¯ fct_lump_*() ç³»åˆ—å‡½æ•°çš„å·¥ä½œã€‚fct_lump_lowfreq() æ˜¯ä¸€ä¸ªç®€å•çš„èµ·ç‚¹ï¼Œå®ƒé€æ­¥å°†æœ€å°çš„ç»„åˆ«ç±»åˆ«å½’å…¥â€œOtherâ€ï¼Œå¹¶å§‹ç»ˆä¿æŒâ€œOtherâ€ä¸ºæœ€å°çš„ç±»åˆ«ã€‚\n\ngss_cat |&gt;\n  mutate(relig = fct_lump_lowfreq(relig)) |&gt;\n  count(relig)\n#&gt; # A tibble: 2 Ã— 2\n#&gt;   relig          n\n#&gt;   &lt;fct&gt;      &lt;int&gt;\n#&gt; 1 Protestant 10846\n#&gt; 2 Other      10637\n\nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒä¸æ˜¯å¾ˆæœ‰å¸®åŠ©ï¼šè¿™æ¬¡è°ƒæŸ¥ä¸­å¤§å¤šæ•°ç¾å›½äººç¡®å®æ˜¯æ–°æ•™å¾’ï¼Œä½†æˆ‘ä»¬å¯èƒ½æƒ³çœ‹åˆ°æ›´å¤šç»†èŠ‚ï¼ç›¸åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ fct_lump_n() æ¥æŒ‡å®šæˆ‘ä»¬æƒ³è¦æ°å¥½ 10 ä¸ªç»„åˆ«ï¼š\n\ngss_cat |&gt;\n  mutate(relig = fct_lump_n(relig, n = 10)) |&gt;\n  count(relig, sort = TRUE)\n#&gt; # A tibble: 10 Ã— 2\n#&gt;   relig          n\n#&gt;   &lt;fct&gt;      &lt;int&gt;\n#&gt; 1 Protestant 10846\n#&gt; 2 Catholic    5124\n#&gt; 3 None        3523\n#&gt; 4 Christian    689\n#&gt; 5 Other        458\n#&gt; 6 Jewish       388\n#&gt; # â„¹ 4 more rows\n\né˜…è¯»æ–‡æ¡£ä»¥äº†è§£ fct_lump_min() å’Œ fct_lump_prop()ï¼Œå®ƒä»¬åœ¨å…¶ä»–æƒ…å†µä¸‹å¾ˆæœ‰ç”¨ã€‚\n\n16.5.1 ç»ƒä¹ \n\nè®¤åŒä¸ºæ°‘ä¸»å…šã€å…±å’Œå…šå’Œç‹¬ç«‹æ´¾çš„äººçš„æ¯”ä¾‹éšæ—¶é—´æœ‰ä½•å˜åŒ–ï¼Ÿ\nä½ å¦‚ä½•å°† rincome æŠ˜å æˆä¸€å°ç»„ç±»åˆ«ï¼Ÿ\næ³¨æ„åœ¨ä¸Šé¢çš„ fct_lump ç¤ºä¾‹ä¸­æœ‰ 9 ä¸ªç»„ï¼ˆä¸åŒ…æ‹¬ otherï¼‰ã€‚ä¸ºä»€ä¹ˆä¸æ˜¯ 10 ä¸ªï¼Ÿï¼ˆæç¤ºï¼šè¾“å…¥ ?fct_lumpï¼Œæ‰¾åˆ° other_level å‚æ•°çš„é»˜è®¤å€¼æ˜¯ â€œOtherâ€ã€‚ï¼‰",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>16</span>Â  <span class='chapter-title'>å› å­</span>"
    ]
  },
  {
    "objectID": "factors.html#sec-ordered-factors",
    "href": "factors.html#sec-ordered-factors",
    "title": "16Â  å› å­",
    "section": "\n16.6 æœ‰åºå› å­",
    "text": "16.6 æœ‰åºå› å­\nåœ¨ç»§ç»­ä¹‹å‰ï¼Œæœ‰å¿…è¦ç®€è¦æåŠä¸€ç§ç‰¹æ®Šç±»å‹çš„å› å­ï¼šæœ‰åºå› å­ (ordered factors)ã€‚ç”¨ ordered() å‡½æ•°åˆ›å»ºçš„æœ‰åºå› å­æ„å‘³ç€æ°´å¹³ä¹‹é—´å­˜åœ¨ä¸¥æ ¼çš„é¡ºåºï¼Œä½†æ²¡æœ‰æŒ‡å®šæ°´å¹³ä¹‹é—´å·®å¼‚çš„å¤§å°ã€‚å½“ä½ çŸ¥é“æ°´å¹³æœ‰æ’åï¼Œä½†æ²¡æœ‰ç²¾ç¡®çš„æ•°å€¼æ’åæ—¶ï¼Œä½ ä¼šä½¿ç”¨æœ‰åºå› å­ã€‚\nå½“ä¸€ä¸ªæœ‰åºå› å­è¢«æ‰“å°æ—¶ï¼Œä½ å¯ä»¥è¯†åˆ«å®ƒï¼Œå› ä¸ºå®ƒåœ¨å› å­æ°´å¹³ä¹‹é—´ä½¿ç”¨ &lt; ç¬¦å·ï¼š\n\nordered(c(\"a\", \"b\", \"c\"))\n#&gt; [1] a b c\n#&gt; Levels: a &lt; b &lt; c\n\nåœ¨ R base å’Œ tidyverse ä¸­ï¼Œæœ‰åºå› å­çš„è¡Œä¸ºä¸å¸¸è§„å› å­éå¸¸ç›¸ä¼¼ã€‚åªæœ‰åœ¨ä¸¤ä¸ªåœ°æ–¹ä½ å¯èƒ½ä¼šæ³¨æ„åˆ°ä¸åŒçš„è¡Œä¸ºï¼š\n\nå¦‚æœä½ åœ¨ ggplot2 ä¸­å°†ä¸€ä¸ªæœ‰åºå› å­æ˜ å°„åˆ°é¢œè‰²æˆ–å¡«å……ï¼Œå®ƒå°†é»˜è®¤ä¸º scale_color_viridis()/scale_fill_viridis()ï¼Œè¿™æ˜¯ä¸€ä¸ªæš—ç¤ºæ’åçš„é¢œè‰²æ ‡åº¦ã€‚\nå¦‚æœä½ åœ¨çº¿æ€§æ¨¡å‹ä¸­ä½¿ç”¨ä¸€ä¸ªæœ‰åºé¢„æµ‹å˜é‡ï¼Œå®ƒå°†ä½¿ç”¨â€œå¤šé¡¹å¼å¯¹æ¯”â€ã€‚è¿™äº›æœ‰ç‚¹ç”¨ï¼Œä½†é™¤éä½ æœ‰ç»Ÿè®¡å­¦åšå£«å­¦ä½ï¼Œå¦åˆ™ä½ ä¸å¤ªå¯èƒ½å¬è¯´è¿‡å®ƒä»¬ï¼Œå³ä½¿é‚£æ ·ï¼Œä½ å¯èƒ½ä¹Ÿä¸å¸¸è§£é‡Šå®ƒä»¬ã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šï¼Œæˆ‘ä»¬æ¨è Lisa DeBruine çš„ vignette(\"contrasts\", package = \"faux\")ã€‚\n\nå°±æœ¬ä¹¦è€Œè¨€ï¼Œæ­£ç¡®åŒºåˆ†å¸¸è§„å› å­å’Œæœ‰åºå› å­å¹¶ä¸æ˜¯ç‰¹åˆ«é‡è¦ã€‚ç„¶è€Œï¼Œåœ¨æ›´å¹¿æ³›çš„èŒƒå›´å†…ï¼ŒæŸäº›é¢†åŸŸï¼ˆç‰¹åˆ«æ˜¯ç¤¾ä¼šç§‘å­¦ï¼‰ç¡®å®å¹¿æ³›ä½¿ç”¨æœ‰åºå› å­ã€‚åœ¨è¿™äº›èƒŒæ™¯ä¸‹ï¼Œæ­£ç¡®è¯†åˆ«å®ƒä»¬å¾ˆé‡è¦ï¼Œä»¥ä¾¿å…¶ä»–åˆ†æåŒ…å¯ä»¥æä¾›é€‚å½“çš„è¡Œä¸ºã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>16</span>Â  <span class='chapter-title'>å› å­</span>"
    ]
  },
  {
    "objectID": "factors.html#æ€»ç»“",
    "href": "factors.html#æ€»ç»“",
    "title": "16Â  å› å­",
    "section": "\n16.7 æ€»ç»“",
    "text": "16.7 æ€»ç»“\næœ¬ç« å‘ä½ ä»‹ç»äº†ç”¨äºå¤„ç†å› å­çš„ä¾¿æ· forcats åŒ…ï¼Œå¹¶ä»‹ç»äº†æœ€å¸¸ç”¨çš„å‡½æ•°ã€‚forcats åŒ…å«äº†æˆ‘ä»¬æ²¡æœ‰ç¯‡å¹…åœ¨è¿™é‡Œè®¨è®ºçš„å„ç§å…¶ä»–è¾…åŠ©å‡½æ•°ï¼Œæ‰€ä»¥æ¯å½“ä½ é‡åˆ°ä»¥å‰æ²¡æœ‰é‡åˆ°è¿‡çš„å› å­åˆ†ææŒ‘æˆ˜æ—¶ï¼Œæˆ‘å¼ºçƒˆå»ºè®®ä½ æµè§ˆä¸€ä¸‹å‚è€ƒç´¢å¼•ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰ç°æˆçš„å‡½æ•°å¯ä»¥å¸®åŠ©è§£å†³ä½ çš„é—®é¢˜ã€‚\nå¦‚æœä½ åœ¨é˜…è¯»æœ¬ç« åæƒ³äº†è§£æ›´å¤šå…³äºå› å­çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬æ¨èé˜…è¯» Amelia McNamara å’Œ Nicholas Horton çš„è®ºæ–‡ Wrangling categorical data in Rã€‚è¿™ç¯‡è®ºæ–‡é˜è¿°äº†åœ¨ stringsAsFactors: An unauthorized biography å’Œ stringsAsFactors = &lt;sigh&gt; ä¸­è®¨è®ºçš„ä¸€äº›å†å²ï¼Œå¹¶æ¯”è¾ƒäº†æœ¬ä¹¦ä¸­æ¦‚è¿°çš„ tidyverse åˆ†ç±»æ•°æ®å¤„ç†æ–¹æ³•ä¸ R base æ–¹æ³•ã€‚è¯¥è®ºæ–‡çš„æ—©æœŸç‰ˆæœ¬å¸®åŠ©æ¿€å‘å’Œç¡®å®šäº† forcats åŒ…çš„èŒƒå›´ï¼›æ„Ÿè°¢ Amelia å’Œ Nickï¼\nåœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†è½¬æ¢æ–¹å‘ï¼Œå¼€å§‹å­¦ä¹  R ä¸­çš„æ—¥æœŸå’Œæ—¶é—´ã€‚æ—¥æœŸå’Œæ—¶é—´çœ‹èµ·æ¥ deceptively ç®€å•ï¼Œä½†ä½ å¾ˆå¿«å°±ä¼šçœ‹åˆ°ï¼Œä½ å¯¹å®ƒä»¬äº†è§£å¾—è¶Šå¤šï¼Œå®ƒä»¬ä¼¼ä¹å°±å˜å¾—è¶Šå¤æ‚ï¼",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>16</span>Â  <span class='chapter-title'>å› å­</span>"
    ]
  },
  {
    "objectID": "factors.html#footnotes",
    "href": "factors.html#footnotes",
    "title": "16Â  å› å­",
    "section": "",
    "text": "å®ƒä»¬å¯¹äºå»ºæ¨¡ä¹Ÿéå¸¸é‡è¦ã€‚â†©ï¸",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>16</span>Â  <span class='chapter-title'>å› å­</span>"
    ]
  },
  {
    "objectID": "datetimes.html",
    "href": "datetimes.html",
    "title": "17Â  æ—¥æœŸå’Œæ—¶é—´",
    "section": "",
    "text": "17.1 å¼•è¨€\næœ¬ç« å°†å‘ä½ å±•ç¤ºå¦‚ä½•åœ¨ R ä¸­å¤„ç†æ—¥æœŸå’Œæ—¶é—´ã€‚ä¹ä¸€çœ‹ï¼Œæ—¥æœŸå’Œæ—¶é—´ä¼¼ä¹å¾ˆç®€å•ã€‚ä½ åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ä¸€ç›´åœ¨ä½¿ç”¨å®ƒä»¬ï¼Œå¹¶ä¸”å®ƒä»¬ä¼¼ä¹æ²¡æœ‰å¼•èµ·å¤ªå¤šå›°æƒ‘ã€‚ç„¶è€Œï¼Œä½ å¯¹æ—¥æœŸå’Œæ—¶é—´äº†è§£å¾—è¶Šå¤šï¼Œå®ƒä»¬ä¼¼ä¹å°±å˜å¾—è¶Šå¤æ‚ï¼\nä¸ºäº†çƒ­èº«ï¼Œè¯·æ€è€ƒä¸€ä¸‹ä¸€å¹´æœ‰å¤šå°‘å¤©ï¼Œä¸€å¤©æœ‰å¤šå°‘å°æ—¶ã€‚ä½ å¯èƒ½è®°å¾—å¤§å¤šæ•°å¹´ä»½æœ‰ 365 å¤©ï¼Œä½†é—°å¹´æœ‰ 366 å¤©ã€‚ä½ çŸ¥é“åˆ¤æ–­ä¸€å¹´æ˜¯å¦ä¸ºé—°å¹´çš„å®Œæ•´è§„åˆ™å—1ï¼Ÿä¸€å¤©ä¸­çš„å°æ—¶æ•°åˆ™ä¸é‚£ä¹ˆæ˜æ˜¾ï¼šå¤§å¤šæ•°æ—¥å­æœ‰ 24 å°æ—¶ï¼Œä½†åœ¨ä½¿ç”¨å¤ä»¤æ—¶ (Daylight Saving Time, DST) çš„åœ°æ–¹ï¼Œæ¯å¹´æœ‰ä¸€å¤©æ˜¯ 23 å°æ—¶ï¼Œå¦ä¸€å¤©æ˜¯ 25 å°æ—¶ã€‚\næ—¥æœŸå’Œæ—¶é—´ä¹‹æ‰€ä»¥å›°éš¾ï¼Œæ˜¯å› ä¸ºå®ƒä»¬å¿…é¡»è°ƒå’Œä¸¤ç§ç‰©ç†ç°è±¡ï¼ˆåœ°çƒçš„è‡ªè½¬å’Œå®ƒå›´ç»•å¤ªé˜³çš„å…¬è½¬ï¼‰ä¸ä¸€ç³»åˆ—åœ°ç¼˜æ”¿æ²»ç°è±¡ï¼ŒåŒ…æ‹¬æœˆä»½ã€æ—¶åŒºå’Œå¤ä»¤æ—¶ã€‚æœ¬ç« ä¸ä¼šæ•™ä½ å…³äºæ—¥æœŸå’Œæ—¶é—´çš„æ¯ä¸€ä¸ªç»†èŠ‚ï¼Œä½†å®ƒä¼šä¸ºä½ æä¾›åšå®çš„å®è·µæŠ€èƒ½åŸºç¡€ï¼Œå¸®åŠ©ä½ åº”å¯¹å¸¸è§çš„æ•°æ®åˆ†ææŒ‘æˆ˜ã€‚\næˆ‘ä»¬å°†é¦–å…ˆå‘ä½ å±•ç¤ºå¦‚ä½•ä»å„ç§è¾“å…¥åˆ›å»ºæ—¥æœŸæ—¶é—´ï¼Œç„¶åä¸€æ—¦ä½ æœ‰äº†ä¸€ä¸ªæ—¥æœŸæ—¶é—´ï¼Œä½ å¦‚ä½•å¯ä»¥æå–å¹´ã€æœˆã€æ—¥ç­‰ç»„æˆéƒ¨åˆ†ã€‚æ¥ç€ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨å¤„ç†æ—¶é—´è·¨åº¦çš„æ£˜æ‰‹è¯é¢˜ï¼Œæ ¹æ®ä½ çš„ä¸åŒéœ€æ±‚ï¼Œæ—¶é—´è·¨åº¦æœ‰å¤šç§å½¢å¼ã€‚æœ€åï¼Œæˆ‘ä»¬å°†ç®€è¦è®¨è®ºæ—¶åŒºå¸¦æ¥çš„é¢å¤–æŒ‘æˆ˜ã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>17</span>Â  <span class='chapter-title'>æ—¥æœŸå’Œæ—¶é—´</span>"
    ]
  },
  {
    "objectID": "datetimes.html#å¼•è¨€",
    "href": "datetimes.html#å¼•è¨€",
    "title": "17Â  æ—¥æœŸå’Œæ—¶é—´",
    "section": "",
    "text": "17.1.1 å‰ææ¡ä»¶\næœ¬ç« å°†é‡ç‚¹ä»‹ç» lubridate åŒ…ï¼Œå®ƒä½¿å¾—åœ¨ R ä¸­å¤„ç†æ—¥æœŸå’Œæ—¶é—´å˜å¾—æ›´åŠ å®¹æ˜“ã€‚è‡ªæœ€æ–°çš„ tidyverse ç‰ˆæœ¬å‘å¸ƒä»¥æ¥ï¼Œlubridate å·²æˆä¸ºæ ¸å¿ƒ tidyverse çš„ä¸€éƒ¨åˆ†ã€‚æˆ‘ä»¬è¿˜éœ€è¦ nycflights13 æ¥è·å–ç»ƒä¹ æ•°æ®ã€‚\n\nlibrary(tidyverse)\nlibrary(nycflights13)",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>17</span>Â  <span class='chapter-title'>æ—¥æœŸå’Œæ—¶é—´</span>"
    ]
  },
  {
    "objectID": "datetimes.html#sec-creating-datetimes",
    "href": "datetimes.html#sec-creating-datetimes",
    "title": "17Â  æ—¥æœŸå’Œæ—¶é—´",
    "section": "\n17.2 åˆ›å»ºæ—¥æœŸ/æ—¶é—´",
    "text": "17.2 åˆ›å»ºæ—¥æœŸ/æ—¶é—´\næœ‰ä¸‰ç§ç±»å‹çš„æ—¥æœŸ/æ—¶é—´æ•°æ®æŒ‡ä»£ä¸€ä¸ªæ—¶é—´ç‚¹ï¼š\n\næ—¥æœŸ (date)ã€‚Tibble å°†å…¶æ‰“å°ä¸º &lt;date&gt;ã€‚\nä¸€å¤©ä¸­çš„æ—¶é—´ (time)ã€‚Tibble å°†å…¶æ‰“å°ä¸º &lt;time&gt;ã€‚\næ—¥æœŸæ—¶é—´ (date-time) æ˜¯æ—¥æœŸåŠ ä¸Šæ—¶é—´ï¼šå®ƒå”¯ä¸€åœ°æ ‡è¯†äº†ä¸€ä¸ªæ—¶é—´ç‚¹ï¼ˆé€šå¸¸ç²¾ç¡®åˆ°ç§’ï¼‰ã€‚Tibble å°†å…¶æ‰“å°ä¸º &lt;dttm&gt;ã€‚åŸºç¡€ R ç§°ä¹‹ä¸º POSIXctï¼Œä½†è¿™åå­—å¹¶ä¸ä¸Šå£ã€‚\n\nåœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†é‡ç‚¹å…³æ³¨æ—¥æœŸå’Œæ—¥æœŸæ—¶é—´ï¼Œå› ä¸º R æ²¡æœ‰ç”¨äºå­˜å‚¨æ—¶é—´çš„åŸç”Ÿç±»ã€‚å¦‚æœä½ éœ€è¦ä¸€ä¸ªï¼Œå¯ä»¥ä½¿ç”¨ hms åŒ…ã€‚\nä½ åº”è¯¥å§‹ç»ˆä½¿ç”¨èƒ½æ»¡è¶³ä½ éœ€æ±‚çš„æœ€ç®€å•çš„æ•°æ®ç±»å‹ã€‚è¿™æ„å‘³ç€å¦‚æœä½ å¯ä»¥ä½¿ç”¨æ—¥æœŸè€Œä¸æ˜¯æ—¥æœŸæ—¶é—´ï¼Œä½ å°±åº”è¯¥è¿™æ ·åšã€‚æ—¥æœŸæ—¶é—´è¦å¤æ‚å¾—å¤šï¼Œå› ä¸ºéœ€è¦å¤„ç†æ—¶åŒºé—®é¢˜ï¼Œæˆ‘ä»¬å°†åœ¨æœ¬ç« æœ«å°¾å†å›åˆ°è¿™ä¸ªé—®é¢˜ã€‚\nè¦è·å–å½“å‰æ—¥æœŸæˆ–æ—¥æœŸæ—¶é—´ï¼Œä½ å¯ä»¥ä½¿ç”¨ today() æˆ– now()ï¼š\n\ntoday()\n#&gt; [1] \"2025-07-10\"\nnow()\n#&gt; [1] \"2025-07-10 17:58:54 CST\"\n\næ­¤å¤–ï¼Œä»¥ä¸‹å„èŠ‚æè¿°äº†ä½ å¯èƒ½åˆ›å»ºæ—¥æœŸ/æ—¶é—´çš„å››ç§æ–¹å¼ï¼š\n\nä½¿ç”¨ readr è¯»å–æ–‡ä»¶æ—¶ã€‚\nä»å­—ç¬¦ä¸²ã€‚\nä»å•ç‹¬çš„æ—¥æœŸæ—¶é—´ç»„ä»¶ã€‚\nä»ç°æœ‰çš„æ—¥æœŸ/æ—¶é—´å¯¹è±¡ã€‚\n\n\n17.2.1 åœ¨å¯¼å…¥æœŸé—´\nå¦‚æœä½ çš„ CSV æ–‡ä»¶åŒ…å« ISO8601 æ ¼å¼çš„æ—¥æœŸæˆ–æ—¥æœŸæ—¶é—´ï¼Œä½ æ— éœ€åšä»»ä½•äº‹æƒ…ï¼›readr ä¼šè‡ªåŠ¨è¯†åˆ«å®ƒï¼š\n\ncsv &lt;- \"\n  date,datetime\n  2022-01-02,2022-01-02 05:12\n\"\nread_csv(csv)\n#&gt; # A tibble: 1 Ã— 2\n#&gt;   date       datetime           \n#&gt;   &lt;date&gt;     &lt;dttm&gt;             \n#&gt; 1 2022-01-02 2022-01-02 05:12:00\n\nå¦‚æœä½ ä¹‹å‰æ²¡æœ‰å¬è¯´è¿‡ ISO8601ï¼Œå®ƒæ˜¯ä¸€ä¸ªä¹¦å†™æ—¥æœŸçš„å›½é™…æ ‡å‡†2ï¼Œå…¶ä¸­æ—¥æœŸçš„å„ä¸ªéƒ¨åˆ†ä»å¤§åˆ°å°æ’åˆ—ï¼Œå¹¶ç”¨ - åˆ†éš”ã€‚ä¾‹å¦‚ï¼Œåœ¨ ISO8601 ä¸­ï¼Œ2022 å¹´ 5 æœˆ 3 æ—¥å†™ä½œ 2022-05-03ã€‚ISO8601 æ—¥æœŸä¹Ÿå¯ä»¥åŒ…å«æ—¶é—´ï¼Œå…¶ä¸­å°æ—¶ã€åˆ†é’Ÿå’Œç§’ç”¨ : åˆ†éš”ï¼Œæ—¥æœŸå’Œæ—¶é—´éƒ¨åˆ†ç”¨ T æˆ–ç©ºæ ¼åˆ†éš”ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥å°† 2022 å¹´ 5 æœˆ 3 æ—¥ä¸‹åˆ 4:26 å†™æˆ 2022-05-03 16:26 æˆ– 2022-05-03T16:26ã€‚\nå¯¹äºå…¶ä»–æ—¥æœŸæ—¶é—´æ ¼å¼ï¼Œä½ éœ€è¦ä½¿ç”¨ col_types åŠ ä¸Š col_date() æˆ– col_datetime() ä»¥åŠä¸€ä¸ªæ—¥æœŸæ—¶é—´æ ¼å¼ã€‚readr ä½¿ç”¨çš„æ—¥æœŸæ—¶é—´æ ¼å¼æ˜¯è®¸å¤šç¼–ç¨‹è¯­è¨€é€šç”¨çš„æ ‡å‡†ï¼Œç”¨ä¸€ä¸ª % åè·Ÿä¸€ä¸ªå­—ç¬¦æ¥æè¿°æ—¥æœŸç»„ä»¶ã€‚ä¾‹å¦‚ï¼Œ%Y-%m-%d æŒ‡å®šä¸€ä¸ªç”±å¹´ã€-ã€æœˆï¼ˆæ•°å­—ï¼‰ã€-ã€æ—¥ç»„æˆçš„æ—¥æœŸã€‚è¡¨ TableÂ 17.1 åˆ—å‡ºäº†æ‰€æœ‰é€‰é¡¹ã€‚\n\n\nTableÂ 17.1: readr èƒ½ç†è§£çš„æ‰€æœ‰æ—¥æœŸæ ¼å¼\n\n\n\nç±»å‹\nä»£ç \nå«ä¹‰\nç¤ºä¾‹\n\n\n\nå¹´\n%Y\n4 ä½æ•°å¹´ä»½\n2021\n\n\n\n%y\n2 ä½æ•°å¹´ä»½\n21\n\n\næœˆ\n%m\næ•°å­—\n2\n\n\n\n%b\nç¼©å†™åç§°\nFeb\n\n\n\n%B\nå®Œæ•´åç§°\nFebruary\n\n\næ—¥\n%d\nä¸€ä½æˆ–ä¸¤ä½æ•°\n2\n\n\n\n%e\nä¸¤ä½æ•°\n02\n\n\næ—¶é—´\n%H\n24 å°æ—¶åˆ¶å°æ—¶\n13\n\n\n\n%I\n12 å°æ—¶åˆ¶å°æ—¶\n1\n\n\n\n%p\nAM/PM\npm\n\n\n\n%M\nåˆ†é’Ÿ\n35\n\n\n\n%S\nç§’\n45\n\n\n\n%OS\nå¸¦å°æ•°çš„ç§’\n45.35\n\n\n\n%Z\næ—¶åŒºåç§°\nAmerica/Chicago\n\n\n\n%z\nä¸ UTC çš„åç§»é‡\n+0800\n\n\nå…¶ä»–\n%.\nè·³è¿‡ä¸€ä¸ªéæ•°å­—å­—ç¬¦\n:\n\n\n\n%*\nè·³è¿‡ä»»æ„æ•°é‡çš„éæ•°å­—å­—ç¬¦\n\n\n\n\n\n\n\nä¸‹é¢çš„ä»£ç å±•ç¤ºäº†å‡ ä¸ªåº”ç”¨äºä¸€ä¸ªéå¸¸æ¨¡ç³Šçš„æ—¥æœŸçš„é€‰é¡¹ï¼š\n\ncsv &lt;- \"\n  date\n  01/02/15\n\"\n\nread_csv(csv, col_types = cols(date = col_date(\"%m/%d/%y\")))\n#&gt; # A tibble: 1 Ã— 1\n#&gt;   date      \n#&gt;   &lt;date&gt;    \n#&gt; 1 2015-01-02\n\nread_csv(csv, col_types = cols(date = col_date(\"%d/%m/%y\")))\n#&gt; # A tibble: 1 Ã— 1\n#&gt;   date      \n#&gt;   &lt;date&gt;    \n#&gt; 1 2015-02-01\n\nread_csv(csv, col_types = cols(date = col_date(\"%y/%m/%d\")))\n#&gt; # A tibble: 1 Ã— 1\n#&gt;   date      \n#&gt;   &lt;date&gt;    \n#&gt; 1 2001-02-15\n\nè¯·æ³¨æ„ï¼Œæ— è®ºä½ å¦‚ä½•æŒ‡å®šæ—¥æœŸæ ¼å¼ï¼Œä¸€æ—¦å°†å…¶å¯¼å…¥ Rï¼Œå®ƒæ€»æ˜¯ä»¥ç›¸åŒçš„æ–¹å¼æ˜¾ç¤ºã€‚\nå¦‚æœä½ ä½¿ç”¨ %b æˆ– %B å¹¶ä¸”å¤„ç†éè‹±è¯­æ—¥æœŸï¼Œä½ è¿˜éœ€è¦æä¾›ä¸€ä¸ª locale()ã€‚è¯·å‚é˜… date_names_langs() ä¸­çš„å†…ç½®è¯­è¨€åˆ—è¡¨ï¼Œæˆ–ä½¿ç”¨ date_names() åˆ›å»ºä½ è‡ªå·±çš„ã€‚\n\n17.2.2 ä»å­—ç¬¦ä¸²\næ—¥æœŸæ—¶é—´æ ¼å¼è§„èŒƒè¯­è¨€åŠŸèƒ½å¼ºå¤§ï¼Œä½†éœ€è¦ä»”ç»†åˆ†ææ—¥æœŸæ ¼å¼ã€‚å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ lubridate çš„è¾…åŠ©å‡½æ•°ï¼Œè¿™äº›å‡½æ•°åœ¨ä½ æŒ‡å®šäº†ç»„ä»¶é¡ºåºåä¼šå°è¯•è‡ªåŠ¨ç¡®å®šæ ¼å¼ã€‚è¦ä½¿ç”¨å®ƒä»¬ï¼Œè¯·ç¡®å®šå¹´ã€æœˆã€æ—¥åœ¨ä½ çš„æ—¥æœŸä¸­å‡ºç°çš„é¡ºåºï¼Œç„¶åæŒ‰ç›¸åŒçš„é¡ºåºæ’åˆ— â€œyâ€ã€â€œmâ€ å’Œ â€œdâ€ã€‚è¿™å°±å¾—åˆ°äº†å°†è§£æä½ æ—¥æœŸçš„ lubridate å‡½æ•°çš„åç§°ã€‚ä¾‹å¦‚ï¼š\n\nymd(\"2017-01-31\")\n#&gt; [1] \"2017-01-31\"\nmdy(\"January 31st, 2017\")\n#&gt; [1] \"2017-01-31\"\ndmy(\"31-Jan-2017\")\n#&gt; [1] \"2017-01-31\"\n\nymd() å’Œç±»ä¼¼çš„å‡½æ•°åˆ›å»ºæ—¥æœŸã€‚è¦åˆ›å»ºä¸€ä¸ªæ—¥æœŸæ—¶é—´ï¼Œè¯·åœ¨è§£æå‡½æ•°åç§°çš„æœ«å°¾åŠ ä¸Šä¸€ä¸ªä¸‹åˆ’çº¿å’Œ â€œhâ€ã€â€œmâ€ã€â€œsâ€ ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªï¼š\n\nymd_hms(\"2017-01-31 20:11:59\")\n#&gt; [1] \"2017-01-31 20:11:59 UTC\"\nmdy_hm(\"01/31/2017 08:01\")\n#&gt; [1] \"2017-01-31 08:01:00 UTC\"\n\nä½ ä¹Ÿå¯ä»¥é€šè¿‡æä¾›ä¸€ä¸ªæ—¶åŒºæ¥å¼ºåˆ¶ä»ä¸€ä¸ªæ—¥æœŸåˆ›å»ºä¸€ä¸ªæ—¥æœŸæ—¶é—´ï¼š\n\nymd(\"2017-01-31\", tz = \"UTC\")\n#&gt; [1] \"2017-01-31 UTC\"\n\nè¿™é‡Œæˆ‘ä½¿ç”¨äº† UTC3 æ—¶åŒºï¼Œä½ å¯èƒ½ä¹ŸçŸ¥é“å®ƒæ˜¯ GMTï¼Œå³æ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´ (Greenwich Mean Time)ï¼Œæ˜¯ 0Â° ç»åº¦çš„æ—¶é—´4ã€‚å®ƒä¸ä½¿ç”¨å¤ä»¤æ—¶ï¼Œè¿™ä½¿å¾—è®¡ç®—èµ·æ¥ç¨å¾®å®¹æ˜“ä¸€äº›ã€‚\n\n17.2.3 ä»å•ä¸ªç»„ä»¶\næœ‰æ—¶ï¼Œä½ ä¸ä¼šæœ‰ä¸€ä¸ªå•ä¸€çš„å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯å°†æ—¥æœŸæ—¶é—´çš„å„ä¸ªç»„ä»¶åˆ†å¸ƒåœ¨å¤šä¸ªåˆ—ä¸­ã€‚è¿™å°±æ˜¯æˆ‘ä»¬åœ¨ flights æ•°æ®ä¸­é‡åˆ°çš„æƒ…å†µï¼š\n\nflights |&gt; \n  select(year, month, day, hour, minute)\n#&gt; # A tibble: 336,776 Ã— 5\n#&gt;    year month   day  hour minute\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt;\n#&gt; 1  2013     1     1     5     15\n#&gt; 2  2013     1     1     5     29\n#&gt; 3  2013     1     1     5     40\n#&gt; 4  2013     1     1     5     45\n#&gt; 5  2013     1     1     6      0\n#&gt; 6  2013     1     1     5     58\n#&gt; # â„¹ 336,770 more rows\n\nè¦ä»è¿™ç±»è¾“å…¥åˆ›å»ºä¸€ä¸ªæ—¥æœŸ/æ—¶é—´ï¼Œå¯¹æ—¥æœŸä½¿ç”¨ make_date()ï¼Œå¯¹æ—¥æœŸæ—¶é—´ä½¿ç”¨ make_datetime()ï¼š\n\nflights |&gt; \n  select(year, month, day, hour, minute) |&gt; \n  mutate(departure = make_datetime(year, month, day, hour, minute))\n#&gt; # A tibble: 336,776 Ã— 6\n#&gt;    year month   day  hour minute departure          \n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dttm&gt;             \n#&gt; 1  2013     1     1     5     15 2013-01-01 05:15:00\n#&gt; 2  2013     1     1     5     29 2013-01-01 05:29:00\n#&gt; 3  2013     1     1     5     40 2013-01-01 05:40:00\n#&gt; 4  2013     1     1     5     45 2013-01-01 05:45:00\n#&gt; 5  2013     1     1     6      0 2013-01-01 06:00:00\n#&gt; 6  2013     1     1     5     58 2013-01-01 05:58:00\n#&gt; # â„¹ 336,770 more rows\n\nè®©æˆ‘ä»¬å¯¹ flights ä¸­çš„å››ä¸ªæ—¶é—´åˆ—åšåŒæ ·çš„äº‹æƒ…ã€‚è¿™äº›æ—¶é—´çš„è¡¨ç¤ºæ ¼å¼æœ‰ç‚¹å¥‡ç‰¹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨æ¨¡è¿ç®—æ¥æå–å°æ—¶å’Œåˆ†é’Ÿç»„ä»¶ã€‚ä¸€æ—¦æˆ‘ä»¬åˆ›å»ºäº†æ—¥æœŸæ—¶é—´å˜é‡ï¼Œæˆ‘ä»¬å°±ä¸“æ³¨äºæœ¬ç« å…¶ä½™éƒ¨åˆ†å°†è¦æ¢è®¨çš„å˜é‡ã€‚\n\nmake_datetime_100 &lt;- function(year, month, day, time) {\n  make_datetime(year, month, day, time %/% 100, time %% 100)\n}\n\nflights_dt &lt;- flights |&gt; \n  filter(!is.na(dep_time), !is.na(arr_time)) |&gt; \n  mutate(\n    dep_time = make_datetime_100(year, month, day, dep_time),\n    arr_time = make_datetime_100(year, month, day, arr_time),\n    sched_dep_time = make_datetime_100(year, month, day, sched_dep_time),\n    sched_arr_time = make_datetime_100(year, month, day, sched_arr_time)\n  ) |&gt; \n  select(origin, dest, ends_with(\"delay\"), ends_with(\"time\"))\n\nflights_dt\n#&gt; # A tibble: 328,063 Ã— 9\n#&gt;   origin dest  dep_delay arr_delay dep_time            sched_dep_time     \n#&gt;   &lt;chr&gt;  &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;dttm&gt;              &lt;dttm&gt;             \n#&gt; 1 EWR    IAH           2        11 2013-01-01 05:17:00 2013-01-01 05:15:00\n#&gt; 2 LGA    IAH           4        20 2013-01-01 05:33:00 2013-01-01 05:29:00\n#&gt; 3 JFK    MIA           2        33 2013-01-01 05:42:00 2013-01-01 05:40:00\n#&gt; 4 JFK    BQN          -1       -18 2013-01-01 05:44:00 2013-01-01 05:45:00\n#&gt; 5 LGA    ATL          -6       -25 2013-01-01 05:54:00 2013-01-01 06:00:00\n#&gt; 6 EWR    ORD          -4        12 2013-01-01 05:54:00 2013-01-01 05:58:00\n#&gt; # â„¹ 328,057 more rows\n#&gt; # â„¹ 3 more variables: arr_time &lt;dttm&gt;, sched_arr_time &lt;dttm&gt;, â€¦\n\næœ‰äº†è¿™äº›æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥å¯è§†åŒ–ä¸€å¹´ä¸­å‡ºå‘æ—¶é—´çš„åˆ†å¸ƒæƒ…å†µï¼š\n\nflights_dt |&gt; \n  ggplot(aes(x = dep_time)) + \n  geom_freqpoly(binwidth = 86400) # 86400 ç§’ = 1 å¤©\n\n\n\n\n\n\n\næˆ–è€…åœ¨ä¸€å¤©ä¹‹å†…ï¼š\n\nflights_dt |&gt; \n  filter(dep_time &lt; ymd(20130102)) |&gt; \n  ggplot(aes(x = dep_time)) + \n  geom_freqpoly(binwidth = 600) # 600 ç§’ = 10 åˆ†é’Ÿ\n\n\n\n\n\n\n\nè¯·æ³¨æ„ï¼Œå½“ä½ åœ¨æ•°å€¼ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨æ—¥æœŸæ—¶é—´ï¼ˆå¦‚åœ¨ç›´æ–¹å›¾ä¸­ï¼‰ï¼Œ1 è¡¨ç¤º 1 ç§’ï¼Œæ‰€ä»¥ binwidth ä¸º 86400 æ„å‘³ç€ä¸€å¤©ã€‚å¯¹äºæ—¥æœŸï¼Œ1 è¡¨ç¤º 1 å¤©ã€‚\n\n17.2.4 ä»å…¶ä»–ç±»å‹\nä½ å¯èƒ½æƒ³è¦åœ¨æ—¥æœŸæ—¶é—´å’Œæ—¥æœŸä¹‹é—´åˆ‡æ¢ã€‚è¿™æ˜¯ as_datetime() å’Œ as_date() çš„å·¥ä½œï¼š\n\nas_datetime(today())\n#&gt; [1] \"2025-07-10 UTC\"\nas_date(now())\n#&gt; [1] \"2025-07-10\"\n\næœ‰æ—¶ä½ ä¼šå¾—åˆ°ä»¥è·ç¦»â€œUnix çºªå…ƒâ€ï¼ˆ1970-01-01ï¼‰çš„æ•°å€¼åç§»é‡è¡¨ç¤ºçš„æ—¥æœŸ/æ—¶é—´ã€‚å¦‚æœåç§»é‡ä»¥ç§’ä¸ºå•ä½ï¼Œä½¿ç”¨ as_datetime()ï¼›å¦‚æœä»¥å¤©ä¸ºå•ä½ï¼Œä½¿ç”¨ as_date()ã€‚\n\nas_datetime(60 * 60 * 10)\n#&gt; [1] \"1970-01-01 10:00:00 UTC\"\nas_date(365 * 10 + 2)\n#&gt; [1] \"1980-01-01\"\n\n\n17.2.5 ç»ƒä¹ \n\n\nå¦‚æœä½ è§£æä¸€ä¸ªåŒ…å«æ— æ•ˆæ—¥æœŸçš„å­—ç¬¦ä¸²ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ\n\nymd(c(\"2010-10-10\", \"bananas\"))\n\n\ntoday() çš„ tzone å‚æ•°æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿä¸ºä»€ä¹ˆå®ƒå¾ˆé‡è¦ï¼Ÿ\n\nå¯¹äºä»¥ä¸‹æ¯ä¸€ä¸ªæ—¥æœŸæ—¶é—´ï¼Œå±•ç¤ºä½ å°†å¦‚ä½•ä½¿ç”¨ readr çš„åˆ—è§„èŒƒå’Œ lubridate å‡½æ•°æ¥è§£æå®ƒã€‚\n\nd1 &lt;- \"January 1, 2010\"\nd2 &lt;- \"2015-Mar-07\"\nd3 &lt;- \"06-Jun-2017\"\nd4 &lt;- c(\"August 19 (2015)\", \"July 1 (2015)\")\nd5 &lt;- \"12/30/14\" # 2014 å¹´ 12 æœˆ 30 æ—¥\nt1 &lt;- \"1705\"\nt2 &lt;- \"11:15:10.12 PM\"",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>17</span>Â  <span class='chapter-title'>æ—¥æœŸå’Œæ—¶é—´</span>"
    ]
  },
  {
    "objectID": "datetimes.html#æ—¥æœŸæ—¶é—´ç»„ä»¶",
    "href": "datetimes.html#æ—¥æœŸæ—¶é—´ç»„ä»¶",
    "title": "17Â  æ—¥æœŸå’Œæ—¶é—´",
    "section": "\n17.3 æ—¥æœŸæ—¶é—´ç»„ä»¶",
    "text": "17.3 æ—¥æœŸæ—¶é—´ç»„ä»¶\næ—¢ç„¶ä½ çŸ¥é“äº†å¦‚ä½•å°†æ—¥æœŸæ—¶é—´æ•°æ®å¯¼å…¥ R çš„æ—¥æœŸæ—¶é—´æ•°æ®ç»“æ„ä¸­ï¼Œè®©æˆ‘ä»¬æ¥æ¢ç´¢ä¸€ä¸‹ä½ å¯ä»¥ç”¨å®ƒä»¬åšä»€ä¹ˆã€‚æœ¬èŠ‚å°†é‡ç‚¹ä»‹ç»è®©ä½ è·å–å’Œè®¾ç½®å•ä¸ªç»„ä»¶çš„è®¿é—®å™¨å‡½æ•°ã€‚ä¸‹ä¸€èŠ‚å°†æ¢è®¨æ—¥æœŸæ—¶é—´çš„ç®—æœ¯è¿ç®—å¦‚ä½•å·¥ä½œã€‚\n\n17.3.1 è·å–ç»„ä»¶\nä½ å¯ä»¥ä½¿ç”¨è®¿é—®å™¨å‡½æ•° year()ã€month()ã€mday() (æœˆä¸­çš„å¤©)ã€yday() (å¹´ä¸­çš„å¤©)ã€wday() (å‘¨ä¸­çš„å¤©)ã€hour()ã€minute() å’Œ second() æ¥æå–æ—¥æœŸçš„å„ä¸ªéƒ¨åˆ†ã€‚è¿™äº›å‡½æ•°å®é™…ä¸Šæ˜¯ make_datetime() çš„åå‘æ“ä½œã€‚\n\ndatetime &lt;- ymd_hms(\"2026-07-08 12:34:56\")\n\nyear(datetime)\n#&gt; [1] 2026\nmonth(datetime)\n#&gt; [1] 7\nmday(datetime)\n#&gt; [1] 8\n\nyday(datetime)\n#&gt; [1] 189\nwday(datetime)\n#&gt; [1] 4\n\nå¯¹äº month() å’Œ wday()ï¼Œä½ å¯ä»¥è®¾ç½® label = TRUE æ¥è¿”å›æœˆä»½æˆ–æ˜ŸæœŸå‡ çš„ç¼©å†™åç§°ã€‚è®¾ç½® abbr = FALSE æ¥è¿”å›å®Œæ•´åç§°ã€‚\n\nmonth(datetime, label = TRUE)\n#&gt; [1] 7æœˆ\n#&gt; 12 Levels: 1æœˆ &lt; 2æœˆ &lt; 3æœˆ &lt; 4æœˆ &lt; 5æœˆ &lt; 6æœˆ &lt; 7æœˆ &lt; 8æœˆ &lt; 9æœˆ &lt; ... &lt; 12æœˆ\nwday(datetime, label = TRUE, abbr = FALSE)\n#&gt; [1] æ˜ŸæœŸä¸‰\n#&gt; 7 Levels: æ˜ŸæœŸæ—¥ &lt; æ˜ŸæœŸä¸€ &lt; æ˜ŸæœŸäºŒ &lt; æ˜ŸæœŸä¸‰ &lt; æ˜ŸæœŸå›› &lt; ... &lt; æ˜ŸæœŸå…­\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨ wday() çœ‹åˆ°ï¼Œå·¥ä½œæ—¥èµ·é£çš„èˆªç­æ¯”å‘¨æœ«å¤šï¼š\n\nflights_dt |&gt; \n  mutate(wday = wday(dep_time, label = TRUE)) |&gt; \n  ggplot(aes(x = wday)) +\n  geom_bar()\n\n\n\n\n\n\n\næˆ‘ä»¬è¿˜å¯ä»¥æŸ¥çœ‹ä¸€å°æ—¶å†…æŒ‰åˆ†é’Ÿåˆ’åˆ†çš„å¹³å‡å‡ºå‘å»¶è¯¯ã€‚æœ‰ä¸€ä¸ªæœ‰è¶£çš„æ¨¡å¼ï¼šåœ¨ 20-30 åˆ†é’Ÿå’Œ 50-60 åˆ†é’Ÿä¹‹é—´èµ·é£çš„èˆªç­å»¶è¯¯æ—¶é—´è¿œä½äºè¯¥å°æ—¶çš„å…¶ä»–æ—¶é—´ï¼\n\nflights_dt |&gt; \n  mutate(minute = minute(dep_time)) |&gt; \n  group_by(minute) |&gt; \n  summarize(\n    avg_delay = mean(dep_delay, na.rm = TRUE),\n    n = n()\n  ) |&gt; \n  ggplot(aes(x = minute, y = avg_delay)) +\n  geom_line()\n\n\n\n\n\n\n\næœ‰è¶£çš„æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬çœ‹è®¡åˆ’å‡ºå‘æ—¶é—´ï¼Œæˆ‘ä»¬æ²¡æœ‰çœ‹åˆ°è¿™ä¹ˆå¼ºçš„æ¨¡å¼ï¼š\n\nsched_dep &lt;- flights_dt |&gt; \n  mutate(minute = minute(sched_dep_time)) |&gt; \n  group_by(minute) |&gt; \n  summarize(\n    avg_delay = mean(arr_delay, na.rm = TRUE),\n    n = n()\n  )\n\nggplot(sched_dep, aes(x = minute, y = avg_delay)) +\n  geom_line()\n\n\n\n\n\n\n\né‚£ä¹ˆä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨å®é™…å‡ºå‘æ—¶é—´ä¸Šçœ‹åˆ°äº†é‚£ç§æ¨¡å¼å‘¢ï¼Ÿå—¯ï¼Œå°±åƒè®¸å¤šç”±äººç±»æ”¶é›†çš„æ•°æ®ä¸€æ ·ï¼Œèˆªç­å€¾å‘äºåœ¨â€œæ•´ç‚¹â€å‡ºå‘æ—¶é—´èµ·é£ï¼Œå­˜åœ¨ç€å¼ºçƒˆçš„åå¥½ï¼Œå¦‚ FigureÂ 17.1 æ‰€ç¤ºã€‚æ¯å½“ä½ å¤„ç†æ¶‰åŠäººç±»åˆ¤æ–­çš„æ•°æ®æ—¶ï¼Œéƒ½è¦è­¦æƒ•è¿™ç§æ¨¡å¼ï¼\n\n\n\n\n\n\n\nFigureÂ 17.1: ä¸€ä¸ªé¢‘ç‡å¤šè¾¹å½¢å›¾ï¼Œæ˜¾ç¤ºäº†æ¯å°æ—¶è®¡åˆ’èµ·é£çš„èˆªç­æ•°é‡ã€‚ ä½ å¯ä»¥çœ‹åˆ°å¯¹åƒ 0 å’Œ 30 è¿™æ ·çš„æ•´æ•°æ—¶é—´ç‚¹çš„å¼ºçƒˆåå¥½ï¼Œä»¥åŠé€šå¸¸å¯¹äº”çš„å€æ•°çš„æ—¶é—´ç‚¹çš„åå¥½ã€‚\n\n\n\n\n\n17.3.2 å–æ•´\nç»˜åˆ¶å•ä¸ªç»„ä»¶çš„å¦ä¸€ç§æ–¹æ³•æ˜¯å°†æ—¥æœŸå–æ•´åˆ°é™„è¿‘çš„æ—¶é—´å•ä½ï¼Œä½¿ç”¨ floor_date()ã€round_date() å’Œ ceiling_date()ã€‚æ¯ä¸ªå‡½æ•°éƒ½æ¥å—ä¸€ä¸ªè¦è°ƒæ•´çš„æ—¥æœŸå‘é‡ï¼Œç„¶åæ˜¯è¦å‘ä¸‹å–æ•´ (floor)ã€å‘ä¸Šå–æ•´ (ceiling) æˆ–å››èˆäº”å…¥çš„å•ä½åç§°ã€‚ä¾‹å¦‚ï¼Œè¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿç»˜åˆ¶æ¯å‘¨çš„èˆªç­æ•°é‡ï¼š\n\nflights_dt |&gt; \n  count(week = floor_date(dep_time, \"week\")) |&gt; \n  ggplot(aes(x = week, y = n)) +\n  geom_line() + \n  geom_point()\n\n\n\n\n\n\n\nä½ å¯ä»¥é€šè¿‡è®¡ç®— dep_time ä¸å½“å¤©æœ€æ—©æ—¶åˆ»ä¹‹é—´çš„å·®å€¼ï¼Œæ¥å±•ç¤ºä¸€å¤©ä¸­èˆªç­çš„åˆ†å¸ƒæƒ…å†µï¼š\n\nflights_dt |&gt; \n  mutate(dep_hour = dep_time - floor_date(dep_time, \"day\")) |&gt; \n  ggplot(aes(x = dep_hour)) +\n  geom_freqpoly(binwidth = 60 * 30)\n#&gt; Don't know how to automatically pick scale for object of type &lt;difftime&gt;.\n#&gt; Defaulting to continuous.\n\n\n\n\n\n\n\nè®¡ç®—ä¸€å¯¹æ—¥æœŸæ—¶é—´ä¹‹é—´çš„å·®å€¼ä¼šå¾—åˆ°ä¸€ä¸ª difftime å¯¹è±¡ï¼ˆæ›´å¤šå†…å®¹è§ Section 17.4.3ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥å°†å…¶è½¬æ¢ä¸º hms å¯¹è±¡ï¼Œä»¥è·å¾—æ›´æœ‰ç”¨çš„ x è½´ï¼š\n\nflights_dt |&gt; \n  mutate(dep_hour = hms::as_hms(dep_time - floor_date(dep_time, \"day\"))) |&gt; \n  ggplot(aes(x = dep_hour)) +\n  geom_freqpoly(binwidth = 60 * 30)\n\n\n\n\n\n\n\n\n17.3.3 ä¿®æ”¹ç»„ä»¶\nä½ ä¹Ÿå¯ä»¥ä½¿ç”¨æ¯ä¸ªè®¿é—®å™¨å‡½æ•°æ¥ä¿®æ”¹æ—¥æœŸ/æ—¶é—´çš„ç»„ä»¶ã€‚è¿™åœ¨æ•°æ®åˆ†æä¸­ä¸å¸¸ç”¨ï¼Œä½†åœ¨æ¸…ç†æœ‰æ˜æ˜¾é”™è¯¯æ—¥æœŸçš„æ•°æ®æ—¶å¯èƒ½å¾ˆæœ‰ç”¨ã€‚\n\n(datetime &lt;- ymd_hms(\"2026-07-08 12:34:56\"))\n#&gt; [1] \"2026-07-08 12:34:56 UTC\"\n\nyear(datetime) &lt;- 2030\ndatetime\n#&gt; [1] \"2030-07-08 12:34:56 UTC\"\nmonth(datetime) &lt;- 01\ndatetime\n#&gt; [1] \"2030-01-08 12:34:56 UTC\"\nhour(datetime) &lt;- hour(datetime) + 1\ndatetime\n#&gt; [1] \"2030-01-08 13:34:56 UTC\"\n\næˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥ä¸ä¿®æ”¹ç°æœ‰å˜é‡ï¼Œè€Œæ˜¯ä½¿ç”¨ update() åˆ›å»ºä¸€ä¸ªæ–°çš„æ—¥æœŸæ—¶é—´ã€‚è¿™ä¹Ÿå…è®¸ä½ ä¸€æ­¥è®¾ç½®å¤šä¸ªå€¼ï¼š\n\nupdate(datetime, year = 2030, month = 2, mday = 2, hour = 2)\n#&gt; [1] \"2030-02-02 02:34:56 UTC\"\n\nå¦‚æœå€¼è¿‡å¤§ï¼Œå®ƒä»¬ä¼šâ€œæ»šåŠ¨â€åˆ°ä¸‹ä¸€ä¸ªå•ä½ï¼š\n\nupdate(ymd(\"2023-02-01\"), mday = 30)\n#&gt; [1] \"2023-03-02\"\nupdate(ymd(\"2023-02-01\"), hour = 400)\n#&gt; [1] \"2023-02-17 16:00:00 UTC\"\n\n\n17.3.4 ç»ƒä¹ \n\nä¸€å¤©ä¸­èˆªç­æ—¶é—´çš„åˆ†å¸ƒå¦‚ä½•éšç€å¹´ä»½çš„æ¨ç§»è€Œå˜åŒ–ï¼Ÿ\næ¯”è¾ƒ dep_timeã€sched_dep_time å’Œ dep_delayã€‚å®ƒä»¬æ˜¯å¦ä¸€è‡´ï¼Ÿè§£é‡Šä½ çš„å‘ç°ã€‚\næ¯”è¾ƒ air_time ä¸å‡ºå‘å’Œåˆ°è¾¾ä¹‹é—´çš„æ—¶é—´å·®ã€‚è§£é‡Šä½ çš„å‘ç°ã€‚ï¼ˆæç¤ºï¼šè€ƒè™‘æœºåœºçš„ä½ç½®ã€‚ï¼‰\nå¹³å‡å»¶è¯¯æ—¶é—´åœ¨ä¸€å¤©ä¸­æ˜¯å¦‚ä½•å˜åŒ–çš„ï¼Ÿä½ åº”è¯¥ä½¿ç”¨ dep_time è¿˜æ˜¯ sched_dep_timeï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ\nå¦‚æœä½ æƒ³æœ€å°åŒ–å»¶è¯¯çš„å‡ ç‡ï¼Œåº”è¯¥é€‰æ‹©æ˜ŸæœŸå‡ å‡ºå‘ï¼Ÿ\næ˜¯ä»€ä¹ˆä½¿å¾— diamonds$carat å’Œ flights$sched_dep_time çš„åˆ†å¸ƒç›¸ä¼¼ï¼Ÿ\nè¯å®æˆ‘ä»¬çš„å‡è®¾ï¼š20-30 åˆ†é’Ÿå’Œ 50-60 åˆ†é’Ÿå†…èˆªç­çš„ææ—©å‡ºå‘æ˜¯ç”±è®¡åˆ’èˆªç­ææ—©èµ·é£é€ æˆçš„ã€‚æç¤ºï¼šåˆ›å»ºä¸€ä¸ªäºŒå…ƒå˜é‡ï¼Œå‘Šè¯‰ä½ ä¸€ä¸ªèˆªç­æ˜¯å¦å»¶è¯¯ã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>17</span>Â  <span class='chapter-title'>æ—¥æœŸå’Œæ—¶é—´</span>"
    ]
  },
  {
    "objectID": "datetimes.html#æ—¶é—´è·¨åº¦",
    "href": "datetimes.html#æ—¶é—´è·¨åº¦",
    "title": "17Â  æ—¥æœŸå’Œæ—¶é—´",
    "section": "\n17.4 æ—¶é—´è·¨åº¦",
    "text": "17.4 æ—¶é—´è·¨åº¦\næ¥ä¸‹æ¥ä½ å°†å­¦ä¹ æ—¥æœŸçš„ç®—æœ¯è¿ç®—ï¼ŒåŒ…æ‹¬å‡æ³•ã€åŠ æ³•å’Œé™¤æ³•ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œä½ å°†å­¦ä¹ åˆ°ä¸‰ä¸ªè¡¨ç¤ºæ—¶é—´è·¨åº¦çš„é‡è¦ç±»ï¼š\n\n\ndurationsï¼ˆæ—¶é•¿ï¼‰ï¼Œè¡¨ç¤ºç²¾ç¡®çš„ç§’æ•°ã€‚\n\nperiodsï¼ˆå‘¨æœŸï¼‰ï¼Œè¡¨ç¤ºäººç±»çš„å•ä½ï¼Œå¦‚å‘¨å’Œæœˆã€‚\n\nintervalsï¼ˆåŒºé—´ï¼‰ï¼Œè¡¨ç¤ºä¸€ä¸ªèµ·ç‚¹å’Œä¸€ä¸ªç»ˆç‚¹ã€‚\n\nä½ å¦‚ä½•åœ¨æ—¶é•¿ (duration)ã€å‘¨æœŸ (period) å’ŒåŒºé—´ (interval) ä¹‹é—´é€‰æ‹©ï¼Ÿä¸€å¦‚æ—¢å¾€ï¼Œé€‰æ‹©èƒ½è§£å†³ä½ é—®é¢˜çš„æœ€ç®€å•çš„æ•°æ®ç»“æ„ã€‚å¦‚æœä½ åªå…³å¿ƒç‰©ç†æ—¶é—´ï¼Œä½¿ç”¨æ—¶é•¿ï¼›å¦‚æœä½ éœ€è¦åŠ ä¸Šäººç±»çš„æ—¶é—´å•ä½ï¼Œä½¿ç”¨å‘¨æœŸï¼›å¦‚æœä½ éœ€è¦è®¡ç®—ä¸€ä¸ªè·¨åº¦åœ¨äººç±»å•ä½ä¸­æœ‰å¤šé•¿ï¼Œä½¿ç”¨åŒºé—´ã€‚\n\n17.4.1 æ—¶é•¿ (Durations)\nåœ¨ R ä¸­ï¼Œå½“ä½ ç”¨ä¸€ä¸ªæ—¥æœŸå‡å»å¦ä¸€ä¸ªæ—¥æœŸæ—¶ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ª difftime å¯¹è±¡ï¼š\n\n# Hadley å¤šå¤§äº†ï¼Ÿ\nh_age &lt;- today() - ymd(\"1979-10-14\")\nh_age\n#&gt; Time difference of 16706 days\n\nä¸€ä¸ª difftime ç±»çš„å¯¹è±¡è®°å½•äº†ä¸€ä¸ªä»¥ç§’ã€åˆ†é’Ÿã€å°æ—¶ã€å¤©æˆ–å‘¨ä¸ºå•ä½çš„æ—¶é—´è·¨åº¦ã€‚è¿™ç§æ¨¡ç³Šæ€§å¯èƒ½ä¼šè®© difftime çš„ä½¿ç”¨æœ‰äº›ç—›è‹¦ï¼Œæ‰€ä»¥ lubridate æä¾›äº†ä¸€ä¸ªæ€»æ˜¯ä½¿ç”¨ç§’çš„æ›¿ä»£æ–¹æ¡ˆï¼šdurationï¼ˆæ—¶é•¿ï¼‰ã€‚\n\nas.duration(h_age)\n#&gt; [1] \"1443398400s (~45.74 years)\"\n\nDurationsï¼ˆæ—¶é•¿ï¼‰é™„å¸¦äº†ä¸€ç³»åˆ—æ–¹ä¾¿çš„æ„é€ å‡½æ•°ï¼š\n\ndseconds(15)\n#&gt; [1] \"15s\"\ndminutes(10)\n#&gt; [1] \"600s (~10 minutes)\"\ndhours(c(12, 24))\n#&gt; [1] \"43200s (~12 hours)\" \"86400s (~1 days)\"\nddays(0:5)\n#&gt; [1] \"0s\"                \"86400s (~1 days)\"  \"172800s (~2 days)\"\n#&gt; [4] \"259200s (~3 days)\" \"345600s (~4 days)\" \"432000s (~5 days)\"\ndweeks(3)\n#&gt; [1] \"1814400s (~3 weeks)\"\ndyears(1)\n#&gt; [1] \"31557600s (~1 years)\"\n\næ—¶é•¿æ€»æ˜¯ä»¥ç§’ä¸ºå•ä½è®°å½•æ—¶é—´è·¨åº¦ã€‚æ›´å¤§çš„å•ä½æ˜¯é€šè¿‡å°†åˆ†é’Ÿã€å°æ—¶ã€å¤©ã€å‘¨å’Œå¹´è½¬æ¢ä¸ºç§’æ¥åˆ›å»ºçš„ï¼š1 åˆ†é’Ÿ 60 ç§’ï¼Œ1 å°æ—¶ 60 åˆ†é’Ÿï¼Œ1 å¤© 24 å°æ—¶ï¼Œ1 å‘¨ 7 å¤©ã€‚æ›´å¤§çš„æ—¶é—´å•ä½é—®é¢˜æ›´å¤šã€‚ä¸€å¹´ä½¿ç”¨ä¸€å¹´ä¸­çš„â€œå¹³å‡â€å¤©æ•°ï¼Œå³ 365.25 å¤©ã€‚æ²¡æœ‰åŠæ³•å°†ä¸€ä¸ªæœˆè½¬æ¢ä¸ºæ—¶é•¿ï¼Œå› ä¸ºå˜æ•°å¤ªå¤šäº†ã€‚\nä½ å¯ä»¥å¯¹æ—¶é•¿è¿›è¡ŒåŠ æ³•å’Œä¹˜æ³•è¿ç®—ï¼š\n\n2 * dyears(1)\n#&gt; [1] \"63115200s (~2 years)\"\ndyears(1) + dweeks(12) + dhours(15)\n#&gt; [1] \"38869200s (~1.23 years)\"\n\nä½ å¯ä»¥å°†æ—¶é•¿åŠ åˆ°æ—¥æœŸä¸Šæˆ–ä»æ—¥æœŸä¸­å‡å»ï¼š\n\ntomorrow &lt;- today() + ddays(1)\nlast_year &lt;- today() - dyears(1)\n\nç„¶è€Œï¼Œå› ä¸ºæ—¶é•¿ä»£è¡¨çš„æ˜¯ä¸€ä¸ªç²¾ç¡®çš„ç§’æ•°ï¼Œæœ‰æ—¶ä½ å¯èƒ½ä¼šå¾—åˆ°ä¸€ä¸ªæ„æƒ³ä¸åˆ°çš„ç»“æœï¼š\n\none_am &lt;- ymd_hms(\"2026-03-08 01:00:00\", tz = \"America/New_York\")\n\none_am\n#&gt; [1] \"2026-03-08 01:00:00 EST\"\none_am + ddays(1)\n#&gt; [1] \"2026-03-09 02:00:00 EDT\"\n\nä¸ºä»€ä¹ˆ 3 æœˆ 8 æ—¥å‡Œæ™¨ 1 ç‚¹ä¹‹åçš„ä¸€å¤©æ˜¯ 3 æœˆ 9 æ—¥å‡Œæ™¨ 2 ç‚¹ï¼Ÿå¦‚æœä½ ä»”ç»†çœ‹æ—¥æœŸï¼Œä½ å¯èƒ½è¿˜ä¼šæ³¨æ„åˆ°æ—¶åŒºå·²ç»æ”¹å˜äº†ã€‚3 æœˆ 8 æ—¥åªæœ‰ 23 ä¸ªå°æ—¶ï¼Œå› ä¸ºé‚£å¤©æ˜¯å¤ä»¤æ—¶å¼€å§‹çš„æ—¶å€™ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬åŠ ä¸Šä¸€æ•´å¤©çš„ç§’æ•°ï¼Œæˆ‘ä»¬æœ€ç»ˆä¼šå¾—åˆ°ä¸€ä¸ªä¸åŒçš„æ—¶é—´ã€‚\n\n17.4.2 å‘¨æœŸ (Periods)\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œlubridate æä¾›äº† periodsï¼ˆå‘¨æœŸï¼‰ã€‚å‘¨æœŸä¹Ÿæ˜¯æ—¶é—´è·¨åº¦ï¼Œä½†æ²¡æœ‰å›ºå®šçš„ç§’æ•°é•¿åº¦ï¼Œè€Œæ˜¯ä½¿ç”¨â€œäººç±»â€çš„æ—¶é—´å•ä½ï¼Œæ¯”å¦‚å¤©å’Œæœˆã€‚è¿™ä½¿å¾—å®ƒä»¬èƒ½ä»¥æ›´ç›´è§‚çš„æ–¹å¼å·¥ä½œï¼š\n\none_am\n#&gt; [1] \"2026-03-08 01:00:00 EST\"\none_am + days(1)\n#&gt; [1] \"2026-03-09 01:00:00 EDT\"\n\nå’Œæ—¶é•¿ä¸€æ ·ï¼Œå‘¨æœŸä¹Ÿå¯ä»¥é€šè¿‡ä¸€äº›æ–¹ä¾¿çš„æ„é€ å‡½æ•°åˆ›å»ºã€‚\n\nhours(c(12, 24))\n#&gt; [1] \"12H 0M 0S\" \"24H 0M 0S\"\ndays(7)\n#&gt; [1] \"7d 0H 0M 0S\"\nmonths(1:6)\n#&gt; [1] \"1m 0d 0H 0M 0S\" \"2m 0d 0H 0M 0S\" \"3m 0d 0H 0M 0S\" \"4m 0d 0H 0M 0S\"\n#&gt; [5] \"5m 0d 0H 0M 0S\" \"6m 0d 0H 0M 0S\"\n\nä½ å¯ä»¥å¯¹å‘¨æœŸè¿›è¡ŒåŠ æ³•å’Œä¹˜æ³•è¿ç®—ï¼š\n\n10 * (months(6) + days(1))\n#&gt; [1] \"60m 10d 0H 0M 0S\"\ndays(50) + hours(25) + minutes(2)\n#&gt; [1] \"50d 25H 2M 0S\"\n\nå½“ç„¶ï¼Œè¿˜å¯ä»¥æŠŠå®ƒä»¬åŠ åˆ°æ—¥æœŸä¸Šã€‚ä¸æ—¶é•¿ç›¸æ¯”ï¼Œå‘¨æœŸæ›´å¯èƒ½åšåˆ°ä½ æ‰€æœŸæœ›çš„ï¼š\n\n# é—°å¹´\nymd(\"2024-01-01\") + dyears(1)\n#&gt; [1] \"2024-12-31 06:00:00 UTC\"\nymd(\"2024-01-01\") + years(1)\n#&gt; [1] \"2025-01-01\"\n\n# å¤ä»¤æ—¶\none_am + ddays(1)\n#&gt; [1] \"2026-03-09 02:00:00 EDT\"\none_am + days(1)\n#&gt; [1] \"2026-03-09 01:00:00 EDT\"\n\nè®©æˆ‘ä»¬ç”¨å‘¨æœŸæ¥ä¿®æ­£ä¸€ä¸ªä¸æˆ‘ä»¬èˆªç­æ—¥æœŸæœ‰å…³çš„å¥‡æ€ªç°è±¡ã€‚ä¸€äº›é£æœºä¼¼ä¹åœ¨ä»çº½çº¦å¸‚èµ·é£ä¹‹å‰å°±åˆ°è¾¾äº†ç›®çš„åœ°ã€‚\n\nflights_dt |&gt; \n  filter(arr_time &lt; dep_time) \n#&gt; # A tibble: 10,633 Ã— 9\n#&gt;   origin dest  dep_delay arr_delay dep_time            sched_dep_time     \n#&gt;   &lt;chr&gt;  &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;dttm&gt;              &lt;dttm&gt;             \n#&gt; 1 EWR    BQN           9        -4 2013-01-01 19:29:00 2013-01-01 19:20:00\n#&gt; 2 JFK    DFW          59        NA 2013-01-01 19:39:00 2013-01-01 18:40:00\n#&gt; 3 EWR    TPA          -2         9 2013-01-01 20:58:00 2013-01-01 21:00:00\n#&gt; 4 EWR    SJU          -6       -12 2013-01-01 21:02:00 2013-01-01 21:08:00\n#&gt; 5 EWR    SFO          11       -14 2013-01-01 21:08:00 2013-01-01 20:57:00\n#&gt; 6 LGA    FLL         -10        -2 2013-01-01 21:20:00 2013-01-01 21:30:00\n#&gt; # â„¹ 10,627 more rows\n#&gt; # â„¹ 3 more variables: arr_time &lt;dttm&gt;, sched_arr_time &lt;dttm&gt;, â€¦\n\nè¿™äº›æ˜¯è¿‡å¤œèˆªç­ã€‚æˆ‘ä»¬å¯¹å‡ºå‘å’Œåˆ°è¾¾æ—¶é—´ä½¿ç”¨äº†ç›¸åŒçš„æ—¥æœŸä¿¡æ¯ï¼Œä½†è¿™äº›èˆªç­æ˜¯åœ¨ç¬¬äºŒå¤©åˆ°è¾¾çš„ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ç»™æ¯ä¸ªè¿‡å¤œèˆªç­çš„åˆ°è¾¾æ—¶é—´åŠ ä¸Š days(1) æ¥ä¿®æ­£è¿™ä¸ªé—®é¢˜ã€‚\n\nflights_dt &lt;- flights_dt |&gt; \n  mutate(\n    overnight = arr_time &lt; dep_time,\n    arr_time = arr_time + days(overnight),\n    sched_arr_time = sched_arr_time + days(overnight)\n  )\n\nç°åœ¨æˆ‘ä»¬æ‰€æœ‰çš„èˆªç­éƒ½éµå®ˆç‰©ç†å®šå¾‹äº†ã€‚\n\nflights_dt |&gt; \n  filter(arr_time &lt; dep_time) \n#&gt; # A tibble: 0 Ã— 10\n#&gt; # â„¹ 10 variables: origin &lt;chr&gt;, dest &lt;chr&gt;, dep_delay &lt;dbl&gt;,\n#&gt; #   arr_delay &lt;dbl&gt;, dep_time &lt;dttm&gt;, sched_dep_time &lt;dttm&gt;, â€¦\n\n\n17.4.3 åŒºé—´ (Intervals)\ndyears(1) / ddays(365) è¿”å›ä»€ä¹ˆï¼Ÿå®ƒä¸å®Œå…¨æ˜¯ 1ï¼Œå› ä¸º dyears() è¢«å®šä¹‰ä¸ºå¹³å‡æ¯å¹´æ‰€å«çš„ç§’æ•°ï¼Œä¹Ÿå°±æ˜¯ 365.25 å¤©ã€‚\nyears(1) / days(1) è¿”å›ä»€ä¹ˆï¼Ÿå—¯ï¼Œå¦‚æœå¹´ä»½æ˜¯ 2015 å¹´ï¼Œå®ƒåº”è¯¥è¿”å› 365ï¼Œä½†å¦‚æœæ˜¯ 2016 å¹´ï¼Œå®ƒåº”è¯¥è¿”å› 366ï¼lubridate æ²¡æœ‰è¶³å¤Ÿçš„ä¿¡æ¯æ¥ç»™å‡ºä¸€ä¸ªæ˜ç¡®çš„ç­”æ¡ˆã€‚å®ƒæ‰€åšçš„æ˜¯ç»™å‡ºä¸€ä¸ªä¼°è®¡å€¼ï¼š\n\nyears(1) / days(1)\n#&gt; [1] 365.25\n\nå¦‚æœä½ æƒ³è¦ä¸€ä¸ªæ›´ç²¾ç¡®çš„åº¦é‡ï¼Œä½ å°†éœ€è¦ä½¿ç”¨ interval (åŒºé—´)ã€‚ä¸€ä¸ªåŒºé—´æ˜¯ä¸€å¯¹å¼€å§‹å’Œç»“æŸçš„æ—¥æœŸæ—¶é—´ï¼Œæˆ–è€…ä½ å¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯ä¸€ä¸ªæœ‰èµ·ç‚¹çš„æ—¶é•¿ã€‚\nä½ å¯ä»¥é€šè¿‡ start %--% end æ¥åˆ›å»ºä¸€ä¸ªåŒºé—´ï¼š\n\ny2023 &lt;- ymd(\"2023-01-01\") %--% ymd(\"2024-01-01\")\ny2024 &lt;- ymd(\"2024-01-01\") %--% ymd(\"2025-01-01\")\n\ny2023\n#&gt; [1] 2023-01-01 UTC--2024-01-01 UTC\ny2024\n#&gt; [1] 2024-01-01 UTC--2025-01-01 UTC\n\nç„¶åä½ å¯ä»¥ç”¨ days() æ¥é™¤å®ƒï¼Œä»¥æ‰¾å‡ºä¸€å¹´ä¸­åŒ…å«å¤šå°‘å¤©ï¼š\n\ny2023 / days(1)\n#&gt; [1] 365\ny2024 / days(1)\n#&gt; [1] 366\n\n\n17.4.4 ç»ƒä¹ \n\nå‘ä¸€ä¸ªåˆšå¼€å§‹å­¦ä¹  R çš„äººè§£é‡Š days(!overnight) å’Œ days(overnight)ã€‚ä½ éœ€è¦çŸ¥é“çš„å…³é”®äº‹å®æ˜¯ä»€ä¹ˆï¼Ÿ\nåˆ›å»ºä¸€ä¸ªæ—¥æœŸå‘é‡ï¼Œç»™å‡º 2015 å¹´æ¯ä¸ªæœˆçš„ç¬¬ä¸€å¤©ã€‚åˆ›å»ºä¸€ä¸ªæ—¥æœŸå‘é‡ï¼Œç»™å‡ºå½“å‰å¹´ä»½æ¯ä¸ªæœˆçš„ç¬¬ä¸€å¤©ã€‚\nç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œç»™å®šä½ çš„ç”Ÿæ—¥ï¼ˆä½œä¸ºæ—¥æœŸï¼‰ï¼Œè¿”å›ä½ çš„å¹´é¾„ï¼ˆä»¥å¹´ä¸ºå•ä½ï¼‰ã€‚\nä¸ºä»€ä¹ˆ (today() %--% (today() + years(1))) / months(1) ä¸èµ·ä½œç”¨ï¼Ÿ",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>17</span>Â  <span class='chapter-title'>æ—¥æœŸå’Œæ—¶é—´</span>"
    ]
  },
  {
    "objectID": "datetimes.html#æ—¶åŒº",
    "href": "datetimes.html#æ—¶åŒº",
    "title": "17Â  æ—¥æœŸå’Œæ—¶é—´",
    "section": "\n17.5 æ—¶åŒº",
    "text": "17.5 æ—¶åŒº\næ—¶åŒºæ˜¯ä¸€ä¸ªæå…¶å¤æ‚çš„è¯é¢˜ï¼Œå› ä¸ºå®ƒä¸åœ°ç¼˜æ”¿æ²»å®ä½“ç›¸äº’ä½œç”¨ã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬ä¸éœ€è¦æ·±å…¥äº†è§£æ‰€æœ‰ç»†èŠ‚ï¼Œå› ä¸ºå®ƒä»¬å¯¹æ•°æ®åˆ†æå¹¶ééƒ½é‡è¦ï¼Œä½†æˆ‘ä»¬ç¡®å®éœ€è¦æ­£é¢åº”å¯¹ä¸€äº›æŒ‘æˆ˜ã€‚\nç¬¬ä¸€ä¸ªæŒ‘æˆ˜æ˜¯æ—¶åŒºçš„æ—¥å¸¸åç§°å¾€å¾€æ˜¯æ¨¡æ£±ä¸¤å¯çš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æ˜¯ç¾å›½äººï¼Œä½ å¯èƒ½ç†Ÿæ‚‰ ESTï¼Œå³ä¸œéƒ¨æ ‡å‡†æ—¶é—´ (Eastern Standard Time)ã€‚ç„¶è€Œï¼Œæ¾³å¤§åˆ©äºšå’ŒåŠ æ‹¿å¤§ä¹Ÿæœ‰ ESTï¼ä¸ºäº†é¿å…æ··æ·†ï¼ŒR ä½¿ç”¨å›½é™…æ ‡å‡†çš„ IANA æ—¶åŒºã€‚è¿™äº›æ—¶åŒºä½¿ç”¨ä¸€è‡´çš„å‘½åæ–¹æ¡ˆ {åœ°åŒº}/{ä½ç½®}ï¼Œé€šå¸¸å½¢å¼ä¸º {å¤§æ´²}/{åŸå¸‚} æˆ– {å¤§æ´‹}/{åŸå¸‚}ã€‚ä¾‹å¦‚ â€œAmerica/New_Yorkâ€, â€œEurope/Parisâ€ å’Œ â€œPacific/Aucklandâ€ã€‚\nä½ å¯èƒ½ä¼šå¥½å¥‡ä¸ºä»€ä¹ˆæ—¶åŒºä½¿ç”¨åŸå¸‚åç§°ï¼Œè€Œé€šå¸¸ä½ è®¤ä¸ºæ—¶åŒºæ˜¯ä¸ä¸€ä¸ªå›½å®¶æˆ–å›½å®¶å†…çš„æŸä¸ªåŒºåŸŸç›¸å…³è”çš„ã€‚è¿™æ˜¯å› ä¸º IANA æ•°æ®åº“å¿…é¡»è®°å½•æ•°åå¹´çš„æ—¶åŒºè§„åˆ™ã€‚å‡ åå¹´æ¥ï¼Œå›½å®¶åç§°ï¼ˆæˆ–åˆ†è£‚ï¼‰å˜æ›´ç›¸å½“é¢‘ç¹ï¼Œä½†åŸå¸‚åç§°å¾€å¾€ä¿æŒä¸å˜ã€‚å¦ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œåç§°ä¸ä»…éœ€è¦åæ˜ å½“å‰çš„è¡Œä¸ºï¼Œè¿˜éœ€è¦åæ˜ å®Œæ•´çš„å†å²ã€‚ä¾‹å¦‚ï¼Œâ€œAmerica/New_Yorkâ€ å’Œ â€œAmerica/Detroitâ€ éƒ½æœ‰æ—¶åŒºã€‚è¿™ä¸¤ä¸ªåŸå¸‚ç›®å‰éƒ½ä½¿ç”¨ä¸œéƒ¨æ ‡å‡†æ—¶é—´ï¼Œä½†åœ¨ 1969-1972 å¹´ï¼Œå¯†æ­‡æ ¹å·ï¼ˆåº•ç‰¹å¾‹æ‰€åœ¨çš„å·ï¼‰æ²¡æœ‰éµå¾ªå¤ä»¤æ—¶ï¼Œæ‰€ä»¥å®ƒéœ€è¦ä¸€ä¸ªä¸åŒçš„åç§°ã€‚å€¼å¾—ä¸€è¯»åŸå§‹çš„æ—¶åŒºæ•°æ®åº“ï¼ˆå¯åœ¨ https://www.iana.org/time-zones è·å–ï¼‰ï¼Œä»…ä»…ä¸ºäº†è¯»ä¸€äº›è¿™æ ·çš„æ•…äº‹ï¼\nä½ å¯ä»¥ç”¨ Sys.timezone() æ¥æŸ¥çœ‹ R è®¤ä¸ºä½ å½“å‰çš„æ—¶åŒºæ˜¯ä»€ä¹ˆï¼š\n\nSys.timezone()\n#&gt; [1] \"Asia/Shanghai\"\n\nï¼ˆå¦‚æœ R ä¸çŸ¥é“ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ª NAã€‚ï¼‰\nå¹¶ç”¨ OlsonNames() æŸ¥çœ‹æ‰€æœ‰æ—¶åŒºåç§°çš„å®Œæ•´åˆ—è¡¨ï¼š\n\nlength(OlsonNames())\n#&gt; [1] 597\nhead(OlsonNames())\n#&gt; [1] \"Africa/Abidjan\"     \"Africa/Accra\"       \"Africa/Addis_Ababa\"\n#&gt; [4] \"Africa/Algiers\"     \"Africa/Asmara\"      \"Africa/Asmera\"\n\nåœ¨ R ä¸­ï¼Œæ—¶åŒºæ˜¯æ—¥æœŸæ—¶é—´çš„ä¸€ä¸ªå±æ€§ï¼Œåªæ§åˆ¶æ‰“å°æ˜¾ç¤ºã€‚ä¾‹å¦‚ï¼Œä¸‹é¢è¿™ä¸‰ä¸ªå¯¹è±¡ä»£è¡¨åŒä¸€æ—¶åˆ»ï¼š\n\nx1 &lt;- ymd_hms(\"2024-06-01 12:00:00\", tz = \"America/New_York\")\nx1\n#&gt; [1] \"2024-06-01 12:00:00 EDT\"\n\nx2 &lt;- ymd_hms(\"2024-06-01 18:00:00\", tz = \"Europe/Copenhagen\")\nx2\n#&gt; [1] \"2024-06-01 18:00:00 CEST\"\n\nx3 &lt;- ymd_hms(\"2024-06-02 04:00:00\", tz = \"Pacific/Auckland\")\nx3\n#&gt; [1] \"2024-06-02 04:00:00 NZST\"\n\nä½ å¯ä»¥ç”¨å‡æ³•æ¥éªŒè¯å®ƒä»¬æ˜¯åŒä¸€æ—¶é—´ï¼š\n\nx1 - x2\n#&gt; Time difference of 0 secs\nx1 - x3\n#&gt; Time difference of 0 secs\n\né™¤éå¦æœ‰è¯´æ˜ï¼Œlubridate æ€»æ˜¯ä½¿ç”¨ UTCã€‚UTCï¼ˆåè°ƒä¸–ç•Œæ—¶ï¼‰æ˜¯ç§‘å­¦ç•Œä½¿ç”¨çš„æ ‡å‡†æ—¶åŒºï¼Œå¤§è‡´ç›¸å½“äº GMTï¼ˆæ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´ï¼‰ã€‚å®ƒæ²¡æœ‰å¤ä»¤æ—¶ï¼Œè¿™ä½¿å…¶æˆä¸ºä¸€ä¸ªæ–¹ä¾¿çš„è®¡ç®—è¡¨ç¤ºã€‚ç»“åˆæ—¥æœŸæ—¶é—´çš„è¿ç®—ï¼Œæ¯”å¦‚ c()ï¼Œé€šå¸¸ä¼šä¸¢æ‰æ—¶åŒºã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ—¥æœŸæ—¶é—´å°†ä»¥ç¬¬ä¸€ä¸ªå…ƒç´ çš„æ—¶åŒºæ˜¾ç¤ºï¼š\n\nx4 &lt;- c(x1, x2, x3)\nx4\n#&gt; [1] \"2024-06-01 12:00:00 EDT\" \"2024-06-01 12:00:00 EDT\"\n#&gt; [3] \"2024-06-01 12:00:00 EDT\"\n\nä½ å¯ä»¥ç”¨ä¸¤ç§æ–¹å¼æ”¹å˜æ—¶åŒºï¼š\n\n\nä¿æŒæ—¶é—´ç‚¹ä¸å˜ï¼Œæ”¹å˜å®ƒçš„æ˜¾ç¤ºæ–¹å¼ã€‚å½“æ—¶é—´ç‚¹æ˜¯æ­£ç¡®çš„ï¼Œä½†ä½ æƒ³è¦ä¸€ä¸ªæ›´è‡ªç„¶çš„æ˜¾ç¤ºæ—¶ï¼Œä½¿ç”¨è¿™ç§æ–¹å¼ã€‚\n\nx4a &lt;- with_tz(x4, tzone = \"Australia/Lord_Howe\")\nx4a\n#&gt; [1] \"2024-06-02 02:30:00 +1030\" \"2024-06-02 02:30:00 +1030\"\n#&gt; [3] \"2024-06-02 02:30:00 +1030\"\nx4a - x4\n#&gt; Time differences in secs\n#&gt; [1] 0 0 0\n\nï¼ˆè¿™ä¹Ÿè¯´æ˜äº†æ—¶åŒºçš„å¦ä¸€ä¸ªæŒ‘æˆ˜ï¼šå®ƒä»¬å¹¶ééƒ½æ˜¯æ•´æ•°å°æ—¶çš„åç§»ï¼ï¼‰\n\n\næ”¹å˜åº•å±‚çš„æ—¶é—´ç‚¹ã€‚å½“ä¸€ä¸ªæ—¶é—´ç‚¹è¢«æ ‡è®°äº†é”™è¯¯çš„æ—¶åŒºï¼Œè€Œä½ éœ€è¦ä¿®æ­£å®ƒæ—¶ï¼Œä½¿ç”¨è¿™ç§æ–¹å¼ã€‚\n\nx4b &lt;- force_tz(x4, tzone = \"Australia/Lord_Howe\")\nx4b\n#&gt; [1] \"2024-06-01 12:00:00 +1030\" \"2024-06-01 12:00:00 +1030\"\n#&gt; [3] \"2024-06-01 12:00:00 +1030\"\nx4b - x4\n#&gt; Time differences in hours\n#&gt; [1] -14.5 -14.5 -14.5",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>17</span>Â  <span class='chapter-title'>æ—¥æœŸå’Œæ—¶é—´</span>"
    ]
  },
  {
    "objectID": "datetimes.html#æ€»ç»“",
    "href": "datetimes.html#æ€»ç»“",
    "title": "17Â  æ—¥æœŸå’Œæ—¶é—´",
    "section": "\n17.6 æ€»ç»“",
    "text": "17.6 æ€»ç»“\næœ¬ç« å‘ä½ ä»‹ç»äº† lubridate æä¾›çš„å¸®åŠ©ä½ å¤„ç†æ—¥æœŸæ—¶é—´æ•°æ®çš„å·¥å…·ã€‚å¤„ç†æ—¥æœŸå’Œæ—¶é—´ä¼¼ä¹æ¯”å¿…è¦çš„è¦å›°éš¾ï¼Œä½†å¸Œæœ›æœ¬ç« èƒ½å¸®åŠ©ä½ ç†è§£åŸå› â€”â€”æ—¥æœŸæ—¶é—´æ¯”åˆçœ‹èµ·æ¥è¦å¤æ‚å¾—å¤šï¼Œå¤„ç†æ¯ä¸€ç§å¯èƒ½çš„æƒ…å†µéƒ½å¢åŠ äº†å¤æ‚æ€§ã€‚å³ä½¿ä½ çš„æ•°æ®ä»æœªè·¨è¶Šå¤ä»¤æ—¶è¾¹ç•Œæˆ–æ¶‰åŠé—°å¹´ï¼Œå‡½æ•°ä¹Ÿéœ€è¦èƒ½å¤Ÿå¤„ç†è¿™äº›æƒ…å†µã€‚\nä¸‹ä¸€ç« å°†æ€»ç»“ç¼ºå¤±å€¼ã€‚ä½ å·²ç»åœ¨ä¸€äº›åœ°æ–¹çœ‹åˆ°è¿‡å®ƒä»¬ï¼Œå¹¶ä¸”æ— ç–‘åœ¨è‡ªå·±çš„åˆ†æä¸­é‡åˆ°è¿‡ï¼Œç°åœ¨æ˜¯æ—¶å€™æä¾›ä¸€ç³»åˆ—å¤„ç†å®ƒä»¬çš„æœ‰ç”¨æŠ€å·§äº†ã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>17</span>Â  <span class='chapter-title'>æ—¥æœŸå’Œæ—¶é—´</span>"
    ]
  },
  {
    "objectID": "datetimes.html#footnotes",
    "href": "datetimes.html#footnotes",
    "title": "17Â  æ—¥æœŸå’Œæ—¶é—´",
    "section": "",
    "text": "å¦‚æœä¸€ä¸ªå¹´ä»½èƒ½è¢« 4 æ•´é™¤ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯é—°å¹´ï¼Œé™¤éå®ƒä¹Ÿèƒ½è¢« 100 æ•´é™¤ï¼Œä½†å¦‚æœå®ƒåŒæ—¶èƒ½è¢« 400 æ•´é™¤ï¼Œé‚£å®ƒä»ç„¶æ˜¯é—°å¹´ã€‚æ¢å¥è¯è¯´ï¼Œæ¯ 400 å¹´ä¸­ï¼Œæœ‰ 97 ä¸ªé—°å¹´ã€‚â†©ï¸\nhttps://xkcd.com/1179/â†©ï¸\nä½ å¯èƒ½ä¼šæƒ³ UTC ä»£è¡¨ä»€ä¹ˆã€‚å®ƒæ˜¯è‹±è¯­ â€œCoordinated Universal Timeâ€ï¼ˆåè°ƒä¸–ç•Œæ—¶ï¼‰å’Œæ³•è¯­ â€œTemps Universel CoordonnÃ©â€ ä¹‹é—´çš„ä¸€ä¸ªå¦¥åã€‚â†©ï¸\nçŒœçŒœæ˜¯å“ªä¸ªå›½å®¶æå‡ºäº†ç»åº¦ç³»ç»Ÿï¼Œæ²¡æœ‰å¥–å“ã€‚â†©ï¸",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>17</span>Â  <span class='chapter-title'>æ—¥æœŸå’Œæ—¶é—´</span>"
    ]
  },
  {
    "objectID": "missing-values.html",
    "href": "missing-values.html",
    "title": "18Â  ç¼ºå¤±å€¼",
    "section": "",
    "text": "18.1 å¼•è¨€\nä½ åœ¨æœ¬ä¹¦çš„å‰é¢éƒ¨åˆ†å·²ç»å­¦ä¹ äº†å…³äºç¼ºå¤±å€¼çš„åŸºç¡€çŸ¥è¯†ã€‚ä½ ç¬¬ä¸€æ¬¡è§åˆ°å®ƒä»¬æ˜¯åœ¨ Chapter 1ï¼Œå½“æ—¶å®ƒä»¬åœ¨ç»˜å›¾æ—¶å¯¼è‡´äº†ä¸€ä¸ªè­¦å‘Šï¼›åœ¨ Section 3.5.2ï¼Œå®ƒä»¬å¹²æ‰°äº†æ±‡æ€»ç»Ÿè®¡çš„è®¡ç®—ï¼›åœ¨ Section 12.2.2ï¼Œä½ äº†è§£äº†å®ƒä»¬çš„ä¼ æŸ“æ€§ä»¥åŠå¦‚ä½•æ£€æŸ¥å®ƒä»¬çš„å­˜åœ¨ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°†æ›´æ·±å…¥åœ°æ¢è®¨å®ƒä»¬ï¼Œä»¥ä¾¿ä½ å­¦ä¹ æ›´å¤šç»†èŠ‚ã€‚\næˆ‘ä»¬å°†é¦–å…ˆè®¨è®ºä¸€äº›å¤„ç†è®°å½•ä¸º NA çš„ç¼ºå¤±å€¼çš„é€šç”¨å·¥å…·ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†æ¢è®¨éšå¼ç¼ºå¤±å€¼çš„æ¦‚å¿µï¼Œå³é‚£äº›ä»…ä»…åœ¨ä½ çš„æ•°æ®ä¸­ä¸å­˜åœ¨çš„å€¼ï¼Œå¹¶å±•ç¤ºä¸€äº›ä½ å¯ä»¥ç”¨æ¥ä½¿å®ƒä»¬æ˜¾å¼åŒ–çš„å·¥å…·ã€‚æœ€åï¼Œæˆ‘ä»¬å°†ä»¥ä¸€ä¸ªç›¸å…³çš„è¯é¢˜â€”â€”ç©ºç»„æ¥ç»“æŸï¼Œè¿™æ˜¯ç”±æ•°æ®ä¸­æœªå‡ºç°çš„å› å­æ°´å¹³å¼•èµ·çš„ã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>18</span>Â  <span class='chapter-title'>ç¼ºå¤±å€¼</span>"
    ]
  },
  {
    "objectID": "missing-values.html#å¼•è¨€",
    "href": "missing-values.html#å¼•è¨€",
    "title": "18Â  ç¼ºå¤±å€¼",
    "section": "",
    "text": "18.1.1 å‰ææ¡ä»¶\nå¤„ç†ç¼ºå¤±æ•°æ®çš„å‡½æ•°ä¸»è¦æ¥è‡ª dplyr å’Œ tidyrï¼Œå®ƒä»¬æ˜¯ tidyverse çš„æ ¸å¿ƒæˆå‘˜ã€‚\n\nlibrary(tidyverse)",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>18</span>Â  <span class='chapter-title'>ç¼ºå¤±å€¼</span>"
    ]
  },
  {
    "objectID": "missing-values.html#æ˜¾å¼ç¼ºå¤±å€¼",
    "href": "missing-values.html#æ˜¾å¼ç¼ºå¤±å€¼",
    "title": "18Â  ç¼ºå¤±å€¼",
    "section": "\n18.2 æ˜¾å¼ç¼ºå¤±å€¼",
    "text": "18.2 æ˜¾å¼ç¼ºå¤±å€¼\né¦–å…ˆï¼Œè®©æˆ‘ä»¬æ¢è®¨ä¸€äº›ç”¨äºåˆ›å»ºæˆ–æ¶ˆé™¤æ˜¾å¼ç¼ºå¤±å€¼ï¼ˆå³ä½ çœ‹åˆ° NA çš„å•å…ƒæ ¼ï¼‰çš„ä¾¿æ·å·¥å…·ã€‚\n\n18.2.1 æœ«æ¬¡è§‚æµ‹å€¼ç»“è½¬\nç¼ºå¤±å€¼çš„ä¸€ä¸ªå¸¸è§ç”¨é€”æ˜¯ä½œä¸ºæ•°æ®å½•å…¥çš„ä¾¿åˆ©æ‰‹æ®µã€‚å½“æ•°æ®æ˜¯æ‰‹åŠ¨è¾“å…¥æ—¶ï¼Œç¼ºå¤±å€¼æœ‰æ—¶è¡¨ç¤ºå‰ä¸€è¡Œä¸­çš„å€¼è¢«é‡å¤ï¼ˆæˆ–ç»“è½¬ï¼‰äº†ï¼š\n\ntreatment &lt;- tribble(\n  ~person,          ~treatment, ~response,\n  \"Derrick Whitmore\", 1,          7,\n  NA,                 2,          10,\n  NA,                 3,          NA,\n  \"Katherine Burke\",  1,          4\n)\n\nä½ å¯ä»¥ä½¿ç”¨ tidyr::fill() æ¥å¡«å……è¿™äº›ç¼ºå¤±å€¼ã€‚å®ƒçš„å·¥ä½œæ–¹å¼ç±»ä¼¼äº select()ï¼Œæ¥å—ä¸€ç»„åˆ—ï¼š\n\ntreatment |&gt;\n  fill(everything())\n#&gt; # A tibble: 4 Ã— 3\n#&gt;   person           treatment response\n#&gt;   &lt;chr&gt;                &lt;dbl&gt;    &lt;dbl&gt;\n#&gt; 1 Derrick Whitmore         1        7\n#&gt; 2 Derrick Whitmore         2       10\n#&gt; 3 Derrick Whitmore         3       10\n#&gt; 4 Katherine Burke          1        4\n\nè¿™ç§å¤„ç†æ–¹æ³•æœ‰æ—¶è¢«ç§°ä¸ºâ€œæœ«æ¬¡è§‚æµ‹å€¼ç»“è½¬â€(last observation carried forward)ï¼Œç®€ç§° locfã€‚ä½ å¯ä»¥ä½¿ç”¨ .direction å‚æ•°æ¥å¡«å……ä»¥æ›´å¥‡ç‰¹æ–¹å¼äº§ç”Ÿçš„ç¼ºå¤±å€¼ã€‚\n\n18.2.2 å›ºå®šå€¼\næœ‰æ—¶ç¼ºå¤±å€¼ä»£è¡¨æŸä¸ªå›ºå®šçš„å·²çŸ¥å€¼ï¼Œæœ€å¸¸è§çš„æ˜¯ 0ã€‚ä½ å¯ä»¥ä½¿ç”¨ dplyr::coalesce() æ¥æ›¿æ¢å®ƒä»¬ï¼š\n\nx &lt;- c(1, 4, 5, 7, NA)\ncoalesce(x, 0)\n#&gt; [1] 1 4 5 7 0\n\næœ‰æ—¶ä½ ä¼šé‡åˆ°ç›¸åçš„é—®é¢˜ï¼Œå³æŸä¸ªå…·ä½“å€¼å®é™…ä¸Šä»£è¡¨ä¸€ä¸ªç¼ºå¤±å€¼ã€‚è¿™é€šå¸¸å‡ºç°åœ¨ç”±æ²¡æœ‰é€‚å½“æ–¹å¼è¡¨ç¤ºç¼ºå¤±å€¼çš„æ—§è½¯ä»¶ç”Ÿæˆçš„æ•°æ®ä¸­ï¼Œå› æ­¤å®ƒå¿…é¡»ä½¿ç”¨ä¸€äº›ç‰¹æ®Šå€¼ï¼Œå¦‚ 99 æˆ– -999ã€‚\nå¦‚æœå¯èƒ½ï¼Œåœ¨è¯»å…¥æ•°æ®æ—¶å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œä¾‹å¦‚ï¼Œä½¿ç”¨ readr::read_csv() çš„ na å‚æ•°ï¼Œä¾‹å¦‚ read_csv(path, na = \"99\")ã€‚å¦‚æœä½ åæ¥æ‰å‘ç°è¿™ä¸ªé—®é¢˜ï¼Œæˆ–è€…ä½ çš„æ•°æ®æºæ²¡æœ‰æä¾›åœ¨è¯»å–æ—¶å¤„ç†å®ƒçš„æ–¹æ³•ï¼Œä½ å¯ä»¥ä½¿ç”¨ dplyr::na_if()ï¼š\n\nx &lt;- c(1, 4, 5, 7, -99)\nna_if(x, -99)\n#&gt; [1]  1  4  5  7 NA\n\n\n18.2.3 NaN\nåœ¨æˆ‘ä»¬ç»§ç»­ä¹‹å‰ï¼Œæœ‰ä¸€ç§ç‰¹æ®Šç±»å‹çš„ç¼ºå¤±å€¼ä½ å¶å°”ä¼šé‡åˆ°ï¼šNaNï¼ˆè¯»ä½œ â€œnanâ€ï¼‰ï¼Œå³éæ•°å€¼ (not a number)ã€‚äº†è§£å®ƒå¹¶ä¸é‚£ä¹ˆé‡è¦ï¼Œå› ä¸ºå®ƒé€šå¸¸çš„è¡Œä¸ºå°±åƒ NA ä¸€æ ·ï¼š\n\nx &lt;- c(NA, NaN)\nx * 10\n#&gt; [1]  NA NaN\nx == 1\n#&gt; [1] NA NA\nis.na(x)\n#&gt; [1] TRUE TRUE\n\nåœ¨æå°‘æ•°æƒ…å†µä¸‹ï¼Œå¦‚æœä½ éœ€è¦åŒºåˆ† NA å’Œ NaNï¼Œä½ å¯ä»¥ä½¿ç”¨ is.nan(x)ã€‚\nå½“ä½ æ‰§è¡Œä¸€ä¸ªç»“æœä¸ç¡®å®šçš„æ•°å­¦è¿ç®—æ—¶ï¼Œé€šå¸¸ä¼šé‡åˆ° NaNï¼š\n\n0 / 0 \n#&gt; [1] NaN\n0 * Inf\n#&gt; [1] NaN\nInf - Inf\n#&gt; [1] NaN\nsqrt(-1)\n#&gt; Warning in sqrt(-1): NaNs produced\n#&gt; [1] NaN",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>18</span>Â  <span class='chapter-title'>ç¼ºå¤±å€¼</span>"
    ]
  },
  {
    "objectID": "missing-values.html#sec-missing-implicit",
    "href": "missing-values.html#sec-missing-implicit",
    "title": "18Â  ç¼ºå¤±å€¼",
    "section": "\n18.3 éšå¼ç¼ºå¤±å€¼",
    "text": "18.3 éšå¼ç¼ºå¤±å€¼\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬è®¨è®ºçš„ç¼ºå¤±å€¼éƒ½æ˜¯æ˜¾å¼ç¼ºå¤±çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¯ä»¥åœ¨æ•°æ®ä¸­çœ‹åˆ°ä¸€ä¸ª NAã€‚ä½†ç¼ºå¤±å€¼ä¹Ÿå¯èƒ½æ˜¯éšå¼ç¼ºå¤±çš„ï¼Œå¦‚æœä¸€æ•´è¡Œæ•°æ®æ ¹æœ¬å°±ä¸å­˜åœ¨äºæ•°æ®ä¸­ã€‚è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªè®°å½•æŸæ”¯è‚¡ç¥¨æ¯ä¸ªå­£åº¦ä»·æ ¼çš„ç®€å•æ•°æ®é›†æ¥è¯´æ˜è¿™ä¸¤è€…çš„åŒºåˆ«ï¼š\n\nstocks &lt;- tibble(\n  year  = c(2020, 2020, 2020, 2020, 2021, 2021, 2021),\n  qtr   = c(   1,    2,    3,    4,    2,    3,    4),\n  price = c(1.88, 0.59, 0.35,   NA, 0.92, 0.17, 2.66)\n)\n\nè¿™ä¸ªæ•°æ®é›†ä¸­æœ‰ä¸¤ä¸ªç¼ºå¤±çš„è§‚æµ‹å€¼ï¼š\n\n2020 å¹´ç¬¬å››å­£åº¦çš„ price æ˜¯æ˜¾å¼ç¼ºå¤±çš„ï¼Œå› ä¸ºå®ƒçš„å€¼æ˜¯ NAã€‚\n2021 å¹´ç¬¬ä¸€å­£åº¦çš„ price æ˜¯éšå¼ç¼ºå¤±çš„ï¼Œå› ä¸ºå®ƒæ ¹æœ¬æ²¡æœ‰å‡ºç°åœ¨æ•°æ®é›†ä¸­ã€‚\n\næ€è€ƒè¿™ä¸¤è€…åŒºåˆ«çš„ä¸€ç§æ–¹å¼æ˜¯è¿™ä¸ªå¯Œæœ‰ç¦…æ„çš„å…¬æ¡ˆï¼š\n\næ˜¾å¼ç¼ºå¤±å€¼æ˜¯ä¸€ç§å­˜åœ¨ç€çš„â€œç¼ºå¤±â€ã€‚\néšå¼ç¼ºå¤±å€¼æ˜¯ä¸€ç§ä¸å­˜åœ¨ç€çš„â€œå­˜åœ¨â€ã€‚\n\næœ‰æ—¶ä½ æƒ³è®©éšå¼ç¼ºå¤±å˜å¾—æ˜¾å¼ï¼Œä»¥ä¾¿æœ‰ä¸€ä¸ªå¯ä»¥æ“ä½œçš„å®ä½“ã€‚åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œæ˜¾å¼ç¼ºå¤±æ˜¯ç”±æ•°æ®ç»“æ„å¼ºåŠ ç»™ä½ çš„ï¼Œè€Œä½ æƒ³æ‘†è„±å®ƒä»¬ã€‚ä»¥ä¸‹å„èŠ‚è®¨è®ºäº†ä¸€äº›åœ¨éšå¼å’Œæ˜¾å¼ç¼ºå¤±ä¹‹é—´è½¬æ¢çš„å·¥å…·ã€‚\n\n18.3.1 æ•°æ®é‡å¡‘ (Pivoting)\nä½ å·²ç»è§è¿‡ä¸€ä¸ªå¯ä»¥ä½¿éšå¼ç¼ºå¤±å˜æ˜¾å¼ä»¥åŠåä¹‹äº¦ç„¶çš„å·¥å…·ï¼šæ•°æ®é‡å¡‘ (pivoting)ã€‚å°†æ•°æ®å˜å®½å¯ä»¥ä½¿éšå¼ç¼ºå¤±å€¼å˜å¾—æ˜¾å¼ï¼Œå› ä¸ºè¡Œå’Œæ–°åˆ—çš„æ¯ç§ç»„åˆéƒ½å¿…é¡»æœ‰æŸä¸ªå€¼ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬é‡å¡‘ stocks æ•°æ®ï¼ŒæŠŠ quarter æ”¾åˆ°åˆ—ä¸­ï¼Œä¸¤ä¸ªç¼ºå¤±å€¼éƒ½å˜å¾—æ˜¾å¼äº†ï¼š\n\nstocks |&gt;\n  pivot_wider(\n    names_from = qtr, \n    values_from = price\n  )\n#&gt; # A tibble: 2 Ã— 5\n#&gt;    year   `1`   `2`   `3`   `4`\n#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1  2020  1.88  0.59  0.35 NA   \n#&gt; 2  2021 NA     0.92  0.17  2.66\n\né»˜è®¤æƒ…å†µä¸‹ï¼Œå°†æ•°æ®å˜é•¿ä¼šä¿ç•™æ˜¾å¼ç¼ºå¤±å€¼ï¼Œä½†å¦‚æœå®ƒä»¬æ˜¯ä»…å› æ•°æ®ä¸æ•´æ´è€Œå­˜åœ¨çš„ç»“æ„æ€§ç¼ºå¤±å€¼ï¼Œä½ å¯ä»¥é€šè¿‡è®¾ç½® values_drop_na = TRUE æ¥ä¸¢å¼ƒå®ƒä»¬ï¼ˆä½¿å®ƒä»¬å˜ä¸ºéšå¼ï¼‰ã€‚æ›´å¤šç»†èŠ‚è¯·å‚è§ Section 5.2 ä¸­çš„ç¤ºä¾‹ã€‚\n\n18.3.2 è¡¥å…¨ (Complete)\ntidyr::complete() å…è®¸ä½ é€šè¿‡æä¾›ä¸€ç»„å®šä¹‰äº†åº”è¯¥å­˜åœ¨çš„è¡Œç»„åˆçš„å˜é‡æ¥ç”Ÿæˆæ˜¾å¼ç¼ºå¤±å€¼ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬çŸ¥é“ year å’Œ qtr çš„æ‰€æœ‰ç»„åˆéƒ½åº”è¯¥å­˜åœ¨äº stocks æ•°æ®ä¸­ï¼š\n\nstocks |&gt;\n  complete(year, qtr)\n#&gt; # A tibble: 8 Ã— 3\n#&gt;    year   qtr price\n#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1  2020     1  1.88\n#&gt; 2  2020     2  0.59\n#&gt; 3  2020     3  0.35\n#&gt; 4  2020     4 NA   \n#&gt; 5  2021     1 NA   \n#&gt; 6  2021     2  0.92\n#&gt; # â„¹ 2 more rows\n\né€šå¸¸ï¼Œä½ ä¼šç”¨ç°æœ‰å˜é‡çš„åç§°æ¥è°ƒç”¨ complete()ï¼Œä»¥å¡«å……ç¼ºå¤±çš„ç»„åˆã€‚ç„¶è€Œï¼Œæœ‰æ—¶å•ä¸ªå˜é‡æœ¬èº«å°±æ˜¯ä¸å®Œæ•´çš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥æä¾›è‡ªå·±çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½çŸ¥é“ stocks æ•°æ®é›†åº”è¯¥ä» 2019 å¹´åˆ° 2021 å¹´ï¼Œæ‰€ä»¥ä½ å¯ä»¥ä¸º year æ˜ç¡®æä¾›è¿™äº›å€¼ï¼š\n\nstocks |&gt;\n  complete(year = 2019:2021, qtr)\n#&gt; # A tibble: 12 Ã— 3\n#&gt;    year   qtr price\n#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1  2019     1 NA   \n#&gt; 2  2019     2 NA   \n#&gt; 3  2019     3 NA   \n#&gt; 4  2019     4 NA   \n#&gt; 5  2020     1  1.88\n#&gt; 6  2020     2  0.59\n#&gt; # â„¹ 6 more rows\n\nå¦‚æœä¸€ä¸ªå˜é‡çš„èŒƒå›´æ˜¯æ­£ç¡®çš„ï¼Œä½†å¹¶éæ‰€æœ‰å€¼éƒ½å­˜åœ¨ï¼Œä½ å¯ä»¥ä½¿ç”¨ full_seq(x, 1) æ¥ç”Ÿæˆä» min(x) åˆ° max(x) ä¹‹é—´ä»¥ 1 ä¸ºé—´éš”çš„æ‰€æœ‰å€¼ã€‚\nåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå®Œæ•´çš„è§‚æµ‹é›†åˆä¸èƒ½é€šè¿‡å˜é‡çš„ç®€å•ç»„åˆç”Ÿæˆã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥æ‰‹åŠ¨å®Œæˆ complete() ä¸ºä½ åšçš„äº‹æƒ…ï¼šåˆ›å»ºä¸€ä¸ªåŒ…å«æ‰€æœ‰åº”è¯¥å­˜åœ¨çš„è¡Œçš„æ•°æ®æ¡†ï¼ˆä½¿ç”¨ä½ éœ€è¦çš„ä»»ä½•æŠ€æœ¯ç»„åˆï¼‰ï¼Œç„¶åç”¨ dplyr::full_join() å°†å®ƒä¸ä½ çš„åŸå§‹æ•°æ®é›†ç»“åˆèµ·æ¥ã€‚\n\n18.3.3 è¿æ¥ (Joins)\nè¿™å¼•å‡ºäº†æ­ç¤ºéšå¼ç¼ºå¤±è§‚æµ‹å€¼çš„å¦ä¸€ç§é‡è¦æ–¹å¼ï¼šè¿æ¥ (joins)ã€‚ä½ å°†åœ¨ Chapter 19 ä¸­å­¦ä¹ æ›´å¤šå…³äºè¿æ¥çš„çŸ¥è¯†ï¼Œä½†æˆ‘ä»¬æƒ³åœ¨è¿™é‡Œå¿«é€ŸæåŠå®ƒä»¬ï¼Œå› ä¸ºä½ é€šå¸¸åªæœ‰åœ¨å°†ä¸€ä¸ªæ•°æ®é›†ä¸å¦ä¸€ä¸ªæ•°æ®é›†è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œæ‰èƒ½çŸ¥é“å€¼æ˜¯ç¼ºå¤±çš„ã€‚\ndplyr::anti_join(x, y) åœ¨è¿™é‡Œæ˜¯ä¸€ä¸ªç‰¹åˆ«æœ‰ç”¨çš„å·¥å…·ï¼Œå› ä¸ºå®ƒåªé€‰æ‹© x ä¸­åœ¨ y ä¸­æ²¡æœ‰åŒ¹é…çš„è¡Œã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸¤ä¸ª anti_join() æ¥æ­ç¤ºæˆ‘ä»¬ç¼ºå°‘ flights ä¸­æåˆ°çš„å››ä¸ªæœºåœºå’Œ 722 æ¶é£æœºçš„ä¿¡æ¯ï¼š\n\nlibrary(nycflights13)\n\nflights |&gt; \n  distinct(faa = dest) |&gt; \n  anti_join(airports)\n#&gt; Joining with `by = join_by(faa)`\n#&gt; # A tibble: 4 Ã— 1\n#&gt;   faa  \n#&gt;   &lt;chr&gt;\n#&gt; 1 BQN  \n#&gt; 2 SJU  \n#&gt; 3 STT  \n#&gt; 4 PSE\n\nflights |&gt; \n  distinct(tailnum) |&gt; \n  anti_join(planes)\n#&gt; Joining with `by = join_by(tailnum)`\n#&gt; # A tibble: 722 Ã— 1\n#&gt;   tailnum\n#&gt;   &lt;chr&gt;  \n#&gt; 1 N3ALAA \n#&gt; 2 N3DUAA \n#&gt; 3 N542MQ \n#&gt; 4 N730MQ \n#&gt; 5 N9EAMQ \n#&gt; 6 N532UA \n#&gt; # â„¹ 716 more rows\n\n\n18.3.4 ç»ƒä¹ \n\nä½ èƒ½æ‰¾åˆ°èˆªç©ºå…¬å¸å’Œé‚£äº›ä¼¼ä¹ä» planes æ•°æ®é›†ä¸­ç¼ºå¤±çš„è¡Œä¹‹é—´çš„ä»»ä½•å…³ç³»å—ï¼Ÿ",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>18</span>Â  <span class='chapter-title'>ç¼ºå¤±å€¼</span>"
    ]
  },
  {
    "objectID": "missing-values.html#å› å­å’Œç©ºç»„",
    "href": "missing-values.html#å› å­å’Œç©ºç»„",
    "title": "18Â  ç¼ºå¤±å€¼",
    "section": "\n18.4 å› å­å’Œç©ºç»„",
    "text": "18.4 å› å­å’Œç©ºç»„\næœ€åä¸€ç§ç¼ºå¤±ç±»å‹æ˜¯ç©ºç»„ (empty group)ï¼Œå³ä¸åŒ…å«ä»»ä½•è§‚æµ‹å€¼çš„ç»„ï¼Œè¿™åœ¨å¤„ç†å› å­æ—¶å¯èƒ½å‡ºç°ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåŒ…å«ä¸€äº›äººå¥åº·ä¿¡æ¯çš„æ•°æ®é›†ï¼š\n\nhealth &lt;- tibble(\n  name   = c(\"Ikaia\", \"Oletta\", \"Leriah\", \"Dashay\", \"Tresaun\"),\n  smoker = factor(c(\"no\", \"no\", \"no\", \"no\", \"no\"), levels = c(\"yes\", \"no\")),\n  age    = c(34, 88, 75, 47, 56),\n)\n\næˆ‘ä»¬æƒ³ç”¨ dplyr::count() æ¥è®¡ç®—å¸çƒŸè€…çš„æ•°é‡ï¼š\n\nhealth |&gt; count(smoker)\n#&gt; # A tibble: 1 Ã— 2\n#&gt;   smoker     n\n#&gt;   &lt;fct&gt;  &lt;int&gt;\n#&gt; 1 no         5\n\nè¿™ä¸ªæ•°æ®é›†åªåŒ…å«éå¸çƒŸè€…ï¼Œä½†æˆ‘ä»¬çŸ¥é“å¸çƒŸè€…æ˜¯å­˜åœ¨çš„ï¼›éå¸çƒŸè€…ç»„æ˜¯ç©ºçš„ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ .drop = FALSE æ¥è¦æ±‚ count() ä¿ç•™æ‰€æœ‰çš„ç»„ï¼Œå³ä½¿æ˜¯é‚£äº›åœ¨æ•°æ®ä¸­æœªè§åˆ°çš„ç»„ï¼š\n\nhealth |&gt; count(smoker, .drop = FALSE)\n#&gt; # A tibble: 2 Ã— 2\n#&gt;   smoker     n\n#&gt;   &lt;fct&gt;  &lt;int&gt;\n#&gt; 1 yes        0\n#&gt; 2 no         5\n\nåŒæ ·çš„åŸåˆ™ä¹Ÿé€‚ç”¨äº ggplot2 çš„ç¦»æ•£åæ ‡è½´ï¼Œå®ƒä¹Ÿä¼šä¸¢å¼ƒæ²¡æœ‰ä»»ä½•å€¼çš„æ°´å¹³ã€‚ä½ å¯ä»¥é€šè¿‡å‘ç›¸åº”çš„ç¦»æ•£åæ ‡è½´æä¾› drop = FALSE æ¥å¼ºåˆ¶å®ƒä»¬æ˜¾ç¤ºï¼š\nggplot(health, aes(x = smoker)) +\n  geom_bar() +\n  scale_x_discrete()\n\nggplot(health, aes(x = smoker)) +\n  geom_bar() +\n  scale_x_discrete(drop = FALSE)\n\n\n\n\n\n\n\n\n\n\nåŒæ ·çš„é—®é¢˜åœ¨ dplyr::group_by() ä¸­ä¹Ÿæ›´æ™®éåœ°å‡ºç°ã€‚ä½ åŒæ ·å¯ä»¥ä½¿ç”¨ .drop = FALSE æ¥ä¿ç•™æ‰€æœ‰å› å­æ°´å¹³ï¼š\n\nhealth |&gt; \n  group_by(smoker, .drop = FALSE) |&gt; \n  summarize(\n    n = n(),\n    mean_age = mean(age),\n    min_age = min(age),\n    max_age = max(age),\n    sd_age = sd(age)\n  )\n#&gt; # A tibble: 2 Ã— 6\n#&gt;   smoker     n mean_age min_age max_age sd_age\n#&gt;   &lt;fct&gt;  &lt;int&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;\n#&gt; 1 yes        0      NaN     Inf    -Inf   NA  \n#&gt; 2 no         5       60      34      88   21.6\n\næˆ‘ä»¬åœ¨è¿™é‡Œå¾—åˆ°äº†ä¸€äº›æœ‰è¶£çš„ç»“æœï¼Œå› ä¸ºå½“å¯¹ä¸€ä¸ªç©ºç»„è¿›è¡Œæ±‡æ€»æ—¶ï¼Œæ±‡æ€»å‡½æ•°è¢«åº”ç”¨äºé›¶é•¿åº¦çš„å‘é‡ã€‚ç©ºå‘é‡ï¼ˆé•¿åº¦ä¸º 0ï¼‰å’Œç¼ºå¤±å€¼ï¼ˆæ¯ä¸ªé•¿åº¦ä¸º 1ï¼‰ä¹‹é—´æœ‰ä¸€ä¸ªé‡è¦çš„åŒºåˆ«ã€‚\n\n# ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªç¼ºå¤±å€¼çš„å‘é‡\nx1 &lt;- c(NA, NA)\nlength(x1)\n#&gt; [1] 2\n\n# ä¸€ä¸ªä¸åŒ…å«ä»»ä½•ä¸œè¥¿çš„å‘é‡\nx2 &lt;- numeric()\nlength(x2)\n#&gt; [1] 0\n\næ‰€æœ‰æ±‡æ€»å‡½æ•°éƒ½é€‚ç”¨äºé›¶é•¿åº¦å‘é‡ï¼Œä½†å®ƒä»¬å¯èƒ½è¿”å›ä¹ä¸€çœ‹ä»¤äººæƒŠè®¶çš„ç»“æœã€‚è¿™é‡Œæˆ‘ä»¬çœ‹åˆ° mean(age) è¿”å› NaNï¼Œå› ä¸º mean(age) = sum(age)/length(age)ï¼Œåœ¨è¿™é‡Œæ˜¯ 0/0ã€‚max() å’Œ min() å¯¹ç©ºå‘é‡è¿”å› -Inf å’Œ Infï¼Œæ‰€ä»¥å¦‚æœä½ å°†ç»“æœä¸ä¸€ä¸ªéç©ºçš„æ–°æ•°æ®å‘é‡ç»“åˆå¹¶é‡æ–°è®¡ç®—ï¼Œä½ å°†å¾—åˆ°æ–°æ•°æ®çš„æœ€å°å€¼æˆ–æœ€å¤§å€¼1ã€‚\næœ‰æ—¶ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³•æ˜¯å…ˆæ‰§è¡Œæ±‡æ€»ï¼Œç„¶åç”¨ complete() ä½¿éšå¼ç¼ºå¤±å˜å¾—æ˜¾å¼ã€‚\n\nhealth |&gt; \n  group_by(smoker) |&gt; \n  summarize(\n    n = n(),\n    mean_age = mean(age),\n    min_age = min(age),\n    max_age = max(age),\n    sd_age = sd(age)\n  ) |&gt; \n  complete(smoker)\n#&gt; # A tibble: 2 Ã— 6\n#&gt;   smoker     n mean_age min_age max_age sd_age\n#&gt;   &lt;fct&gt;  &lt;int&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;\n#&gt; 1 yes       NA       NA      NA      NA   NA  \n#&gt; 2 no         5       60      34      88   21.6\n\nè¿™ç§æ–¹æ³•çš„ä¸»è¦ç¼ºç‚¹æ˜¯ï¼Œä½ å¾—åˆ°çš„è®¡æ•°æ˜¯ NAï¼Œå³ä½¿ä½ çŸ¥é“å®ƒåº”è¯¥æ˜¯é›¶ã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>18</span>Â  <span class='chapter-title'>ç¼ºå¤±å€¼</span>"
    ]
  },
  {
    "objectID": "missing-values.html#æ€»ç»“",
    "href": "missing-values.html#æ€»ç»“",
    "title": "18Â  ç¼ºå¤±å€¼",
    "section": "\n18.5 æ€»ç»“",
    "text": "18.5 æ€»ç»“\nç¼ºå¤±å€¼å¾ˆå¥‡æ€ªï¼æœ‰æ—¶å®ƒä»¬è¢«è®°å½•ä¸ºæ˜¾å¼çš„ NAï¼Œä½†å…¶ä»–æ—¶å€™ä½ åªèƒ½é€šè¿‡å®ƒä»¬çš„ç¼ºå¸­æ¥æ³¨æ„åˆ°å®ƒä»¬ã€‚æœ¬ç« ä¸ºä½ æä¾›äº†ä¸€äº›å¤„ç†æ˜¾å¼ç¼ºå¤±å€¼çš„å·¥å…·ï¼Œæ­ç¤ºéšå¼ç¼ºå¤±å€¼çš„å·¥å…·ï¼Œå¹¶è®¨è®ºäº†éšå¼å¦‚ä½•å˜ä¸ºæ˜¾å¼ä»¥åŠåä¹‹äº¦ç„¶çš„ä¸€äº›æ–¹æ³•ã€‚\nåœ¨ä¸‹ä¸€ç« ï¼Œæˆ‘ä»¬å°† affrontare æœ¬ä¹¦è¿™ä¸€éƒ¨åˆ†çš„æœ€åä¸€ç« ï¼šè¿æ¥ (joins)ã€‚è¿™ä¸åˆ°ç›®å‰ä¸ºæ­¢çš„ç« èŠ‚æœ‰äº›ä¸åŒï¼Œå› ä¸ºæˆ‘ä»¬å°†è®¨è®ºä½œç”¨äºæ•´ä¸ªæ•°æ®æ¡†çš„å·¥å…·ï¼Œè€Œä¸æ˜¯ä½ æ”¾åœ¨æ•°æ®æ¡†å†…éƒ¨çš„ä¸œè¥¿ã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>18</span>Â  <span class='chapter-title'>ç¼ºå¤±å€¼</span>"
    ]
  },
  {
    "objectID": "missing-values.html#footnotes",
    "href": "missing-values.html#footnotes",
    "title": "18Â  ç¼ºå¤±å€¼",
    "section": "",
    "text": "æ¢å¥è¯è¯´ï¼Œmin(c(x, y)) æ€»æ˜¯ç­‰äº min(min(x), min(y))ã€‚â†©ï¸",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>18</span>Â  <span class='chapter-title'>ç¼ºå¤±å€¼</span>"
    ]
  },
  {
    "objectID": "joins.html",
    "href": "joins.html",
    "title": "19Â  è¿æ¥",
    "section": "",
    "text": "19.1 å¼•è¨€\næ•°æ®åˆ†æå¾ˆå°‘åªæ¶‰åŠå•ä¸ªæ•°æ®æ¡†ã€‚é€šå¸¸ä½ ä¼šæœ‰å¤šä¸ªæ•°æ®æ¡†ï¼Œå¹¶ä¸”å¿…é¡»å°†å®ƒä»¬è¿æ¥ (join) åœ¨ä¸€èµ·ä»¥å›ç­”ä½ æ„Ÿå…´è¶£çš„é—®é¢˜ã€‚æœ¬ç« å°†å‘ä½ ä»‹ç»ä¸¤ç§é‡è¦çš„è¿æ¥ç±»å‹ï¼š\næˆ‘ä»¬å°†é¦–å…ˆè®¨è®ºé”® (keys)ï¼Œå³ç”¨äºåœ¨è¿æ¥ä¸­è¿æ¥ä¸€å¯¹æ•°æ®æ¡†çš„å˜é‡ã€‚æˆ‘ä»¬å°†é€šè¿‡æ£€æŸ¥ nycflights13 åŒ…ä¸­æ•°æ®é›†çš„é”®æ¥å·©å›ºç†è®ºï¼Œç„¶ååˆ©ç”¨è¿™äº›çŸ¥è¯†å¼€å§‹è¿æ¥æ•°æ®æ¡†ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è®¨è®ºè¿æ¥çš„å·¥ä½œåŸç†ï¼Œé‡ç‚¹å…³æ³¨å®ƒä»¬å¯¹è¡Œçš„æ“ä½œã€‚æœ€åï¼Œæˆ‘ä»¬å°†è®¨è®ºéç­‰å€¼è¿æ¥ (non-equi joins)ï¼Œè¿™æ˜¯ä¸€ç±»è¿æ¥ï¼Œå®ƒæä¾›äº†ä¸€ç§æ¯”é»˜è®¤çš„ç›¸ç­‰å…³ç³»æ›´çµæ´»çš„é”®åŒ¹é…æ–¹å¼ã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>19</span>Â  <span class='chapter-title'>è¿æ¥</span>"
    ]
  },
  {
    "objectID": "joins.html#å¼•è¨€",
    "href": "joins.html#å¼•è¨€",
    "title": "19Â  è¿æ¥",
    "section": "",
    "text": "å˜è¿æ¥ (Mutating joins)ï¼Œå®ƒå°†ä¸€ä¸ªæ•°æ®æ¡†ä¸­çš„åŒ¹é…è§‚æµ‹å€¼çš„æ–°å˜é‡æ·»åŠ åˆ°å¦ä¸€ä¸ªæ•°æ®æ¡†ä¸­ã€‚\nè¿‡æ»¤è¿æ¥ (Filtering joins)ï¼Œå®ƒæ ¹æ®ä¸€ä¸ªæ•°æ®æ¡†ä¸­çš„è§‚æµ‹å€¼æ˜¯å¦ä¸å¦ä¸€ä¸ªæ•°æ®æ¡†ä¸­çš„è§‚æµ‹å€¼åŒ¹é…æ¥è¿‡æ»¤è¯¥æ•°æ®æ¡†ä¸­çš„è§‚æµ‹å€¼ã€‚\n\n\n\n19.1.1 å‰ææ¡ä»¶\nåœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ dplyr ä¸­çš„è¿æ¥å‡½æ•°æ¥æ¢ç´¢ nycflights13 ä¸­çš„äº”ä¸ªç›¸å…³æ•°æ®é›†ã€‚\n\nlibrary(tidyverse)\nlibrary(nycflights13)",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>19</span>Â  <span class='chapter-title'>è¿æ¥</span>"
    ]
  },
  {
    "objectID": "joins.html#é”®",
    "href": "joins.html#é”®",
    "title": "19Â  è¿æ¥",
    "section": "\n19.2 é”®",
    "text": "19.2 é”®\nè¦ç†è§£è¿æ¥ï¼Œä½ é¦–å…ˆéœ€è¦äº†è§£ä¸¤ä¸ªè¡¨å¦‚ä½•é€šè¿‡æ¯ä¸ªè¡¨å†…çš„ä¸€å¯¹é”®è¿æ¥èµ·æ¥ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œä½ å°†å­¦ä¹ ä¸¤ç§ç±»å‹çš„é”®ï¼Œå¹¶åœ¨ nycflights13 åŒ…çš„æ•°æ®é›†ä¸­çœ‹åˆ°è¿™ä¸¤ç§é”®çš„ç¤ºä¾‹ã€‚ä½ è¿˜å°†å­¦ä¹ å¦‚ä½•æ£€æŸ¥ä½ çš„é”®æ˜¯å¦æœ‰æ•ˆï¼Œä»¥åŠå½“ä½ çš„è¡¨ç¼ºå°‘é”®æ—¶è¯¥æ€ä¹ˆåŠã€‚\n\n19.2.1 ä¸»é”®å’Œå¤–é”®\næ¯ä¸ªè¿æ¥éƒ½æ¶‰åŠä¸€å¯¹é”®ï¼šä¸€ä¸ªä¸»é”®å’Œä¸€ä¸ªå¤–é”®ã€‚ ä¸»é”® (primary key) æ˜¯ä¸€ä¸ªæˆ–ä¸€ç»„å”¯ä¸€æ ‡è¯†æ¯ä¸ªè§‚æµ‹å€¼çš„å˜é‡ã€‚å½“éœ€è¦å¤šä¸ªå˜é‡æ—¶ï¼Œè¯¥é”®ç§°ä¸ºå¤åˆé”® (compound key)ã€‚ä¾‹å¦‚ï¼Œåœ¨ nycflights13 ä¸­ï¼š\n\n\nairlines è®°å½•äº†å…³äºæ¯å®¶èˆªç©ºå…¬å¸çš„ä¸¤æ¡æ•°æ®ï¼šå…¶èˆªç©ºå…¬å¸ä»£ç å’Œå…¨åã€‚ä½ å¯ä»¥ç”¨å®ƒçš„ä¸¤ä¸ªå­—æ¯çš„èˆªç©ºå…¬å¸ä»£ç æ¥è¯†åˆ«ä¸€å®¶èˆªç©ºå…¬å¸ï¼Œè¿™ä½¿å¾— carrier æˆä¸ºä¸»é”®ã€‚\n\nairlines\n#&gt; # A tibble: 16 Ã— 2\n#&gt;   carrier name                    \n#&gt;   &lt;chr&gt;   &lt;chr&gt;                   \n#&gt; 1 9E      Endeavor Air Inc.       \n#&gt; 2 AA      American Airlines Inc.  \n#&gt; 3 AS      Alaska Airlines Inc.    \n#&gt; 4 B6      JetBlue Airways         \n#&gt; 5 DL      Delta Air Lines Inc.    \n#&gt; 6 EV      ExpressJet Airlines Inc.\n#&gt; # â„¹ 10 more rows\n\n\n\nairports è®°å½•äº†å…³äºæ¯ä¸ªæœºåœºçš„æ•°æ®ã€‚ä½ å¯ä»¥ç”¨å®ƒçš„ä¸‰ä¸ªå­—æ¯çš„æœºåœºä»£ç æ¥è¯†åˆ«æ¯ä¸ªæœºåœºï¼Œè¿™ä½¿å¾— faa æˆä¸ºä¸»é”®ã€‚\n\nairports\n#&gt; # A tibble: 1,458 Ã— 8\n#&gt;   faa   name                            lat   lon   alt    tz dst  \n#&gt;   &lt;chr&gt; &lt;chr&gt;                         &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;\n#&gt; 1 04G   Lansdowne Airport              41.1 -80.6  1044    -5 A    \n#&gt; 2 06A   Moton Field Municipal Airport  32.5 -85.7   264    -6 A    \n#&gt; 3 06C   Schaumburg Regional            42.0 -88.1   801    -6 A    \n#&gt; 4 06N   Randall Airport                41.4 -74.4   523    -5 A    \n#&gt; 5 09J   Jekyll Island Airport          31.1 -81.4    11    -5 A    \n#&gt; 6 0A9   Elizabethton Municipal Airpoâ€¦  36.4 -82.2  1593    -5 A    \n#&gt; # â„¹ 1,452 more rows\n#&gt; # â„¹ 1 more variable: tzone &lt;chr&gt;\n\n\n\nplanes è®°å½•äº†å…³äºæ¯æ¶é£æœºçš„æ•°æ®ã€‚ä½ å¯ä»¥ç”¨å®ƒçš„å°¾å·æ¥è¯†åˆ«ä¸€æ¶é£æœºï¼Œè¿™ä½¿å¾— tailnum æˆä¸ºä¸»é”®ã€‚\n\nplanes\n#&gt; # A tibble: 3,322 Ã— 9\n#&gt;   tailnum  year type              manufacturer    model     engines\n#&gt;   &lt;chr&gt;   &lt;int&gt; &lt;chr&gt;             &lt;chr&gt;           &lt;chr&gt;       &lt;int&gt;\n#&gt; 1 N10156   2004 Fixed wing multiâ€¦ EMBRAER         EMB-145XR       2\n#&gt; 2 N102UW   1998 Fixed wing multiâ€¦ AIRBUS INDUSTRâ€¦ A320-214        2\n#&gt; 3 N103US   1999 Fixed wing multiâ€¦ AIRBUS INDUSTRâ€¦ A320-214        2\n#&gt; 4 N104UW   1999 Fixed wing multiâ€¦ AIRBUS INDUSTRâ€¦ A320-214        2\n#&gt; 5 N10575   2002 Fixed wing multiâ€¦ EMBRAER         EMB-145LR       2\n#&gt; 6 N105UW   1999 Fixed wing multiâ€¦ AIRBUS INDUSTRâ€¦ A320-214        2\n#&gt; # â„¹ 3,316 more rows\n#&gt; # â„¹ 3 more variables: seats &lt;int&gt;, speed &lt;int&gt;, engine &lt;chr&gt;\n\n\n\nweather è®°å½•äº†å§‹å‘æœºåœºçš„å¤©æ°”æ•°æ®ã€‚ä½ å¯ä»¥é€šè¿‡ä½ç½®å’Œæ—¶é—´çš„ç»„åˆæ¥è¯†åˆ«æ¯ä¸ªè§‚æµ‹å€¼ï¼Œè¿™ä½¿å¾— origin å’Œ time_hour æˆä¸ºå¤åˆä¸»é”®ã€‚\n\nweather\n#&gt; # A tibble: 26,115 Ã— 15\n#&gt;   origin  year month   day  hour  temp  dewp humid wind_dir\n#&gt;   &lt;chr&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;\n#&gt; 1 EWR     2013     1     1     1  39.0  26.1  59.4      270\n#&gt; 2 EWR     2013     1     1     2  39.0  27.0  61.6      250\n#&gt; 3 EWR     2013     1     1     3  39.0  28.0  64.4      240\n#&gt; 4 EWR     2013     1     1     4  39.9  28.0  62.2      250\n#&gt; 5 EWR     2013     1     1     5  39.0  28.0  64.4      260\n#&gt; 6 EWR     2013     1     1     6  37.9  28.0  67.2      240\n#&gt; # â„¹ 26,109 more rows\n#&gt; # â„¹ 6 more variables: wind_speed &lt;dbl&gt;, wind_gust &lt;dbl&gt;, â€¦\n\n\n\nå¤–é”® (foreign key) æ˜¯ä¸€ä¸ªï¼ˆæˆ–ä¸€ç»„ï¼‰ä¸å¦ä¸€ä¸ªè¡¨ä¸­çš„ä¸»é”®ç›¸å¯¹åº”çš„å˜é‡ã€‚ä¾‹å¦‚ï¼š\n\n\nflights$tailnum æ˜¯ä¸€ä¸ªå¤–é”®ï¼Œå¯¹åº”äºä¸»é”® planes$tailnumã€‚\n\nflights$carrier æ˜¯ä¸€ä¸ªå¤–é”®ï¼Œå¯¹åº”äºä¸»é”® airlines$carrierã€‚\n\nflights$origin æ˜¯ä¸€ä¸ªå¤–é”®ï¼Œå¯¹åº”äºä¸»é”® airports$faaã€‚\n\nflights$dest æ˜¯ä¸€ä¸ªå¤–é”®ï¼Œå¯¹åº”äºä¸»é”® airports$faaã€‚\n\nflights$origin-flights$time_hour æ˜¯ä¸€ä¸ªå¤åˆå¤–é”®ï¼Œå¯¹åº”äºå¤åˆä¸»é”® weather$origin-weather$time_hourã€‚\n\nè¿™äº›å…³ç³»åœ¨ FigureÂ 19.1 ä¸­è¿›è¡Œäº†å¯è§†åŒ–æ€»ç»“ã€‚\n\n\n\n\n\n\n\nFigureÂ 19.1: nycflights13 åŒ…ä¸­æ‰€æœ‰äº”ä¸ªæ•°æ®æ¡†ä¹‹é—´çš„è¿æ¥ã€‚æ„æˆä¸»é”®çš„å˜é‡ç”¨ç°è‰²ç€è‰²ï¼Œå¹¶é€šè¿‡ç®­å¤´è¿æ¥åˆ°å®ƒä»¬å¯¹åº”çš„å¤–é”®ã€‚\n\n\n\n\nä½ ä¼šæ³¨æ„åˆ°è¿™äº›é”®çš„è®¾è®¡ä¸­æœ‰ä¸€ä¸ªå¾ˆå¥½çš„ç‰¹æ€§ï¼šä¸»é”®å’Œå¤–é”®å‡ ä¹æ€»æ˜¯æœ‰ç›¸åŒçš„åç§°ï¼Œæ­£å¦‚ä½ ç¨åå°†çœ‹åˆ°çš„ï¼Œè¿™å°†ä½¿ä½ çš„è¿æ¥å·¥ä½œå˜å¾—å®¹æ˜“å¾—å¤šã€‚åŒæ ·å€¼å¾—æ³¨æ„çš„æ˜¯ç›¸åçš„å…³ç³»ï¼šå‡ ä¹æ¯ä¸ªåœ¨å¤šä¸ªè¡¨ä¸­ä½¿ç”¨çš„å˜é‡ååœ¨æ¯ä¸ªåœ°æ–¹éƒ½æœ‰ç›¸åŒçš„å«ä¹‰ã€‚åªæœ‰ä¸€ä¸ªä¾‹å¤–ï¼šåœ¨ flights ä¸­ year è¡¨ç¤ºå‡ºå‘å¹´ä»½ï¼Œåœ¨ planes ä¸­è¡¨ç¤ºåˆ¶é€ å¹´ä»½ã€‚å½“æˆ‘ä»¬å¼€å§‹å®é™…è¿æ¥è¡¨æ—¶ï¼Œè¿™å°†å˜å¾—å¾ˆé‡è¦ã€‚\n\n19.2.2 æ£€æŸ¥ä¸»é”®\næ—¢ç„¶æˆ‘ä»¬å·²ç»ç¡®å®šäº†æ¯ä¸ªè¡¨ä¸­çš„ä¸»é”®ï¼Œä¸€ä¸ªå¥½çš„åšæ³•æ˜¯éªŒè¯å®ƒä»¬ç¡®å®å”¯ä¸€åœ°æ ‡è¯†äº†æ¯ä¸ªè§‚æµ‹å€¼ã€‚ä¸€ç§æ–¹æ³•æ˜¯ count() ä¸»é”®ï¼Œå¹¶æŸ¥æ‰¾ n å¤§äº 1 çš„æ¡ç›®ã€‚è¿™è¡¨æ˜ planes å’Œ weather éƒ½çœ‹èµ·æ¥ä¸é”™ï¼š\n\nplanes |&gt; \n  count(tailnum) |&gt; \n  filter(n &gt; 1)\n#&gt; # A tibble: 0 Ã— 2\n#&gt; # â„¹ 2 variables: tailnum &lt;chr&gt;, n &lt;int&gt;\n\nweather |&gt; \n  count(time_hour, origin) |&gt; \n  filter(n &gt; 1)\n#&gt; # A tibble: 0 Ã— 3\n#&gt; # â„¹ 3 variables: time_hour &lt;dttm&gt;, origin &lt;chr&gt;, n &lt;int&gt;\n\nä½ è¿˜åº”è¯¥æ£€æŸ¥ä¸»é”®ä¸­æ˜¯å¦æœ‰ç¼ºå¤±å€¼â€”â€”å¦‚æœä¸€ä¸ªå€¼æ˜¯ç¼ºå¤±çš„ï¼Œé‚£ä¹ˆå®ƒå°±ä¸èƒ½æ ‡è¯†ä¸€ä¸ªè§‚æµ‹å€¼ï¼\n\nplanes |&gt; \n  filter(is.na(tailnum))\n#&gt; # A tibble: 0 Ã— 9\n#&gt; # â„¹ 9 variables: tailnum &lt;chr&gt;, year &lt;int&gt;, type &lt;chr&gt;, manufacturer &lt;chr&gt;,\n#&gt; #   model &lt;chr&gt;, engines &lt;int&gt;, seats &lt;int&gt;, speed &lt;int&gt;, engine &lt;chr&gt;\n\nweather |&gt; \n  filter(is.na(time_hour) | is.na(origin))\n#&gt; # A tibble: 0 Ã— 15\n#&gt; # â„¹ 15 variables: origin &lt;chr&gt;, year &lt;int&gt;, month &lt;int&gt;, day &lt;int&gt;,\n#&gt; #   hour &lt;int&gt;, temp &lt;dbl&gt;, dewp &lt;dbl&gt;, humid &lt;dbl&gt;, wind_dir &lt;dbl&gt;, â€¦\n\n\n19.2.3 ä»£ç†é”®\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰è®¨è®º flights çš„ä¸»é”®ã€‚å®ƒåœ¨è¿™é‡Œä¸æ˜¯éå¸¸é‡è¦ï¼Œå› ä¸ºæ²¡æœ‰æ•°æ®æ¡†ä½¿ç”¨å®ƒä½œä¸ºå¤–é”®ï¼Œä½†è€ƒè™‘å®ƒä»ç„¶æ˜¯æœ‰ç”¨çš„ï¼Œå› ä¸ºå¦‚æœæˆ‘ä»¬æœ‰æŸç§æ–¹å¼å‘ä»–äººæè¿°è§‚æµ‹å€¼ï¼Œé‚£ä¹ˆå¤„ç†è§‚æµ‹å€¼ä¼šæ›´å®¹æ˜“ã€‚\nç»è¿‡ä¸€ç•ªæ€è€ƒå’Œå®éªŒï¼Œæˆ‘ä»¬ç¡®å®šæœ‰ä¸‰ä¸ªå˜é‡å¯ä»¥å…±åŒå”¯ä¸€åœ°æ ‡è¯†æ¯ä¸ªèˆªç­ï¼š\n\nflights |&gt; \n  count(time_hour, carrier, flight) |&gt; \n  filter(n &gt; 1)\n#&gt; # A tibble: 0 Ã— 4\n#&gt; # â„¹ 4 variables: time_hour &lt;dttm&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, n &lt;int&gt;\n\næ²¡æœ‰é‡å¤å€¼æ˜¯å¦è‡ªåŠ¨ä½¿ time_hour-carrier-flight æˆä¸ºä¸€ä¸ªä¸»é”®ï¼Ÿè¿™å½“ç„¶æ˜¯ä¸€ä¸ªå¥½çš„å¼€å§‹ï¼Œä½†å¹¶ä¸èƒ½ä¿è¯å®ƒã€‚ä¾‹å¦‚ï¼Œæµ·æ‹”å’Œçº¬åº¦æ˜¯ airports çš„ä¸€ä¸ªå¥½çš„ä¸»é”®å—ï¼Ÿ\n\nairports |&gt;\n  count(alt, lat) |&gt; \n  filter(n &gt; 1)\n#&gt; # A tibble: 1 Ã— 3\n#&gt;     alt   lat     n\n#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;\n#&gt; 1    13  40.6     2\n\né€šè¿‡æµ·æ‹”å’Œçº¬åº¦æ¥è¯†åˆ«ä¸€ä¸ªæœºåœºæ˜¾ç„¶æ˜¯ä¸€ä¸ªåä¸»æ„ï¼Œè€Œä¸”æ€»çš„æ¥è¯´ï¼Œä»…ä»æ•°æ®æœ¬èº«ä¸å¯èƒ½çŸ¥é“ä¸€ä¸ªå˜é‡ç»„åˆæ˜¯å¦æ„æˆä¸€ä¸ªå¥½çš„ä¸»é”®ã€‚ä½†å¯¹äºèˆªç­æ¥è¯´ï¼Œtime_hourã€carrier å’Œ flight çš„ç»„åˆä¼¼ä¹æ˜¯åˆç†çš„ï¼Œå› ä¸ºå¦‚æœåŒä¸€æ—¶é—´åŒä¸€å®¶èˆªç©ºå…¬å¸æœ‰å¤šä¸ªç›¸åŒèˆªç­å·çš„èˆªç­åœ¨ç©ºä¸­ï¼Œé‚£å¯¹èˆªç©ºå…¬å¸åŠå…¶å®¢æˆ·æ¥è¯´ä¼šéå¸¸æ··ä¹±ã€‚\nè¯è™½å¦‚æ­¤ï¼Œæˆ‘ä»¬æœ€å¥½è¿˜æ˜¯å¼•å…¥ä¸€ä¸ªç®€å•çš„æ•°å­—ä»£ç†é”®ï¼Œä½¿ç”¨è¡Œå·ï¼š\n\nflights2 &lt;- flights |&gt; \n  mutate(id = row_number(), .before = 1)\nflights2\n#&gt; # A tibble: 336,776 Ã— 20\n#&gt;      id  year month   day dep_time sched_dep_time dep_delay arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;\n#&gt; 1     1  2013     1     1      517            515         2      830\n#&gt; 2     2  2013     1     1      533            529         4      850\n#&gt; 3     3  2013     1     1      542            540         2      923\n#&gt; 4     4  2013     1     1      544            545        -1     1004\n#&gt; 5     5  2013     1     1      554            600        -6      812\n#&gt; 6     6  2013     1     1      554            558        -4      740\n#&gt; # â„¹ 336,770 more rows\n#&gt; # â„¹ 12 more variables: sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;, â€¦\n\nä»£ç†é”®åœ¨ä¸ä»–äººäº¤æµæ—¶ç‰¹åˆ«æœ‰ç”¨ï¼šå‘Šè¯‰æŸäººæŸ¥çœ‹èˆªç­ 2001 æ¯”å‘Šè¯‰ä»–ä»¬æŸ¥çœ‹ 2013 å¹´ 1 æœˆ 3 æ—¥ä¸Šåˆ 9 ç‚¹å‡ºå‘çš„ UA430 è¦å®¹æ˜“å¾—å¤šã€‚\n\n19.2.4 ç»ƒä¹ \n\næˆ‘ä»¬åœ¨ FigureÂ 19.1 ä¸­å¿˜è®°ç»˜åˆ¶ weather å’Œ airports ä¹‹é—´çš„å…³ç³»äº†ã€‚è¿™ä¸ªå…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿå®ƒåº”è¯¥å¦‚ä½•åœ¨å›¾ä¸­æ˜¾ç¤ºï¼Ÿ\nweather åªåŒ…å«çº½çº¦å¸‚ä¸‰ä¸ªå§‹å‘æœºåœºçš„ä¿¡æ¯ã€‚å¦‚æœå®ƒåŒ…å«äº†ç¾å›½æ‰€æœ‰æœºåœºçš„å¤©æ°”è®°å½•ï¼Œå®ƒä¼šä¸ flights å»ºç«‹ä»€ä¹ˆé¢å¤–çš„è¿æ¥ï¼Ÿ\nyearã€monthã€dayã€hour å’Œ origin å˜é‡å‡ ä¹æ„æˆäº† weather çš„ä¸€ä¸ªå¤åˆé”®ï¼Œä½†æœ‰ä¸€ä¸ªå°æ—¶æœ‰é‡å¤çš„è§‚æµ‹å€¼ã€‚ä½ èƒ½æ‰¾å‡ºé‚£ä¸ªå°æ—¶æœ‰ä»€ä¹ˆç‰¹åˆ«ä¹‹å¤„å—ï¼Ÿ\næˆ‘ä»¬çŸ¥é“ä¸€å¹´ä¸­çš„æŸäº›æ—¥å­æ˜¯ç‰¹æ®Šçš„ï¼Œé£è¡Œçš„äººæ¯”å¹³æ—¶å°‘ï¼ˆä¾‹å¦‚ï¼Œå¹³å®‰å¤œå’Œåœ£è¯èŠ‚ï¼‰ã€‚ä½ å¦‚ä½•å°†è¿™äº›æ•°æ®è¡¨ç¤ºä¸ºä¸€ä¸ªæ•°æ®æ¡†ï¼Ÿä¸»é”®ä¼šæ˜¯ä»€ä¹ˆï¼Ÿå®ƒå°†å¦‚ä½•ä¸ç°æœ‰çš„æ•°æ®æ¡†è¿æ¥ï¼Ÿ\nåœ¨ Lahman åŒ…ä¸­ï¼Œç»˜åˆ¶ä¸€ä¸ªå›¾è¡¨æ¥è¯´æ˜ Battingã€People å’Œ Salaries æ•°æ®æ¡†ä¹‹é—´çš„è¿æ¥ã€‚å†ç»˜åˆ¶ä¸€ä¸ªå›¾è¡¨æ¥æ˜¾ç¤º Peopleã€Managers å’Œ AwardsManagers ä¹‹é—´çš„å…³ç³»ã€‚ä½ å°†å¦‚ä½•æè¿° Battingã€Pitching å’Œ Fielding æ•°æ®æ¡†ä¹‹é—´çš„å…³ç³»ï¼Ÿ",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>19</span>Â  <span class='chapter-title'>è¿æ¥</span>"
    ]
  },
  {
    "objectID": "joins.html#sec-mutating-joins",
    "href": "joins.html#sec-mutating-joins",
    "title": "19Â  è¿æ¥",
    "section": "\n19.3 åŸºæœ¬è¿æ¥",
    "text": "19.3 åŸºæœ¬è¿æ¥\næ—¢ç„¶ä½ å·²ç»äº†è§£äº†æ•°æ®æ¡†å¦‚ä½•é€šè¿‡é”®è¿æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹ä½¿ç”¨è¿æ¥æ¥æ›´å¥½åœ°ç†è§£ flights æ•°æ®é›†äº†ã€‚dplyr æä¾›äº†å…­ä¸ªè¿æ¥å‡½æ•°ï¼šleft_join()ã€inner_join()ã€right_join()ã€full_join()ã€semi_join() å’Œ anti_join()ã€‚å®ƒä»¬éƒ½æœ‰ç›¸åŒçš„æ¥å£ï¼šå®ƒä»¬æ¥å—ä¸€å¯¹æ•°æ®æ¡†ï¼ˆx å’Œ yï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ•°æ®æ¡†ã€‚è¾“å‡ºçš„è¡Œå’Œåˆ—çš„é¡ºåºä¸»è¦ç”± x å†³å®šã€‚\nåœ¨æœ¬èŠ‚ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨ä¸€ä¸ªå˜è¿æ¥ left_join() å’Œä¸¤ä¸ªè¿‡æ»¤è¿æ¥ semi_join() å’Œ anti_join()ã€‚åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œä½ å°†ç¡®åˆ‡åœ°å­¦ä¹ è¿™äº›å‡½æ•°å¦‚ä½•å·¥ä½œï¼Œä»¥åŠå‰©ä¸‹çš„ inner_join()ã€right_join() å’Œ full_join()ã€‚\n\n19.3.1 å˜è¿æ¥\nå˜è¿æ¥ (mutating join) å…è®¸ä½ ç»„åˆä¸¤ä¸ªæ•°æ®æ¡†ä¸­çš„å˜é‡ï¼šå®ƒé¦–å…ˆé€šè¿‡å®ƒä»¬çš„é”®æ¥åŒ¹é…è§‚æµ‹å€¼ï¼Œç„¶åå°†ä¸€ä¸ªæ•°æ®æ¡†ä¸­çš„å˜é‡å¤åˆ¶åˆ°å¦ä¸€ä¸ªæ•°æ®æ¡†ä¸­ã€‚åƒ mutate() ä¸€æ ·ï¼Œè¿æ¥å‡½æ•°åœ¨å³ä¾§æ·»åŠ å˜é‡ï¼Œæ‰€ä»¥å¦‚æœä½ çš„æ•°æ®é›†æœ‰å¾ˆå¤šå˜é‡ï¼Œä½ å°†çœ‹ä¸åˆ°æ–°çš„å˜é‡ã€‚å¯¹äºè¿™äº›ä¾‹å­ï¼Œæˆ‘ä»¬å°†é€šè¿‡åˆ›å»ºä¸€ä¸ªåªæœ‰å…­ä¸ªå˜é‡çš„è¾ƒçª„çš„æ•°æ®é›†æ¥ä½¿å…¶æ›´å®¹æ˜“çœ‹æ¸…å‘ç”Ÿäº†ä»€ä¹ˆ1ï¼š\n\nflights2 &lt;- flights |&gt; \n  select(year, time_hour, origin, dest, tailnum, carrier)\nflights2\n#&gt; # A tibble: 336,776 Ã— 6\n#&gt;    year time_hour           origin dest  tailnum carrier\n#&gt;   &lt;int&gt; &lt;dttm&gt;              &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;  \n#&gt; 1  2013 2013-01-01 05:00:00 EWR    IAH   N14228  UA     \n#&gt; 2  2013 2013-01-01 05:00:00 LGA    IAH   N24211  UA     \n#&gt; 3  2013 2013-01-01 05:00:00 JFK    MIA   N619AA  AA     \n#&gt; 4  2013 2013-01-01 05:00:00 JFK    BQN   N804JB  B6     \n#&gt; 5  2013 2013-01-01 06:00:00 LGA    ATL   N668DN  DL     \n#&gt; 6  2013 2013-01-01 05:00:00 EWR    ORD   N39463  UA     \n#&gt; # â„¹ 336,770 more rows\n\næœ‰å››ç§ç±»å‹çš„å˜è¿æ¥ï¼Œä½†æœ‰ä¸€ç§ä½ å‡ ä¹æ€»æ˜¯ä¼šä½¿ç”¨ï¼šleft_join()ã€‚å®ƒå¾ˆç‰¹åˆ«ï¼Œå› ä¸ºè¾“å‡ºå°†å§‹ç»ˆä¸ xï¼ˆä½ æ­£åœ¨è¿æ¥çš„æ•°æ®æ¡†ï¼‰å…·æœ‰ç›¸åŒçš„è¡Œ2ã€‚left_join() çš„ä¸»è¦ç”¨é€”æ˜¯æ·»åŠ é¢å¤–çš„å…ƒæ•°æ®ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ left_join() å°†å®Œæ•´çš„èˆªç©ºå…¬å¸åç§°æ·»åŠ åˆ° flights2 æ•°æ®ä¸­ï¼š\n\nflights2 |&gt;\n  left_join(airlines)\n#&gt; Joining with `by = join_by(carrier)`\n#&gt; # A tibble: 336,776 Ã— 7\n#&gt;    year time_hour           origin dest  tailnum carrier name                \n#&gt;   &lt;int&gt; &lt;dttm&gt;              &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;               \n#&gt; 1  2013 2013-01-01 05:00:00 EWR    IAH   N14228  UA      United Air Lines Inâ€¦\n#&gt; 2  2013 2013-01-01 05:00:00 LGA    IAH   N24211  UA      United Air Lines Inâ€¦\n#&gt; 3  2013 2013-01-01 05:00:00 JFK    MIA   N619AA  AA      American Airlines Iâ€¦\n#&gt; 4  2013 2013-01-01 05:00:00 JFK    BQN   N804JB  B6      JetBlue Airways     \n#&gt; 5  2013 2013-01-01 06:00:00 LGA    ATL   N668DN  DL      Delta Air Lines Inc.\n#&gt; 6  2013 2013-01-01 05:00:00 EWR    ORD   N39463  UA      United Air Lines Inâ€¦\n#&gt; # â„¹ 336,770 more rows\n\næˆ–è€…æˆ‘ä»¬å¯ä»¥æ‰¾å‡ºæ¯æ¶é£æœºèµ·é£æ—¶çš„æ¸©åº¦å’Œé£é€Ÿï¼š\n\nflights2 |&gt; \n  left_join(weather |&gt; select(origin, time_hour, temp, wind_speed))\n#&gt; Joining with `by = join_by(time_hour, origin)`\n#&gt; # A tibble: 336,776 Ã— 8\n#&gt;    year time_hour           origin dest  tailnum carrier  temp wind_speed\n#&gt;   &lt;int&gt; &lt;dttm&gt;              &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;      &lt;dbl&gt;\n#&gt; 1  2013 2013-01-01 05:00:00 EWR    IAH   N14228  UA       39.0       12.7\n#&gt; 2  2013 2013-01-01 05:00:00 LGA    IAH   N24211  UA       39.9       15.0\n#&gt; 3  2013 2013-01-01 05:00:00 JFK    MIA   N619AA  AA       39.0       15.0\n#&gt; 4  2013 2013-01-01 05:00:00 JFK    BQN   N804JB  B6       39.0       15.0\n#&gt; 5  2013 2013-01-01 06:00:00 LGA    ATL   N668DN  DL       39.9       16.1\n#&gt; 6  2013 2013-01-01 05:00:00 EWR    ORD   N39463  UA       39.0       12.7\n#&gt; # â„¹ 336,770 more rows\n\næˆ–è€…æ˜¯ä»€ä¹ˆå°ºå¯¸çš„é£æœºåœ¨é£è¡Œï¼š\n\nflights2 |&gt; \n  left_join(planes |&gt; select(tailnum, type, engines, seats))\n#&gt; Joining with `by = join_by(tailnum)`\n#&gt; # A tibble: 336,776 Ã— 9\n#&gt;    year time_hour           origin dest  tailnum carrier type                \n#&gt;   &lt;int&gt; &lt;dttm&gt;              &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;               \n#&gt; 1  2013 2013-01-01 05:00:00 EWR    IAH   N14228  UA      Fixed wing multi enâ€¦\n#&gt; 2  2013 2013-01-01 05:00:00 LGA    IAH   N24211  UA      Fixed wing multi enâ€¦\n#&gt; 3  2013 2013-01-01 05:00:00 JFK    MIA   N619AA  AA      Fixed wing multi enâ€¦\n#&gt; 4  2013 2013-01-01 05:00:00 JFK    BQN   N804JB  B6      Fixed wing multi enâ€¦\n#&gt; 5  2013 2013-01-01 06:00:00 LGA    ATL   N668DN  DL      Fixed wing multi enâ€¦\n#&gt; 6  2013 2013-01-01 05:00:00 EWR    ORD   N39463  UA      Fixed wing multi enâ€¦\n#&gt; # â„¹ 336,770 more rows\n#&gt; # â„¹ 2 more variables: engines &lt;int&gt;, seats &lt;int&gt;\n\nå½“ left_join() æœªèƒ½ä¸º x ä¸­çš„æŸä¸€è¡Œæ‰¾åˆ°åŒ¹é…é¡¹æ—¶ï¼Œå®ƒä¼šç”¨ç¼ºå¤±å€¼å¡«å……æ–°å˜é‡ã€‚ä¾‹å¦‚ï¼Œæ²¡æœ‰å…³äºå°¾å·ä¸º N3ALAA çš„é£æœºçš„ä¿¡æ¯ï¼Œæ‰€ä»¥ typeã€engines å’Œ seats å°†æ˜¯ç¼ºå¤±çš„ï¼š\n\nflights2 |&gt; \n  filter(tailnum == \"N3ALAA\") |&gt; \n  left_join(planes |&gt; select(tailnum, type, engines, seats))\n#&gt; Joining with `by = join_by(tailnum)`\n#&gt; # A tibble: 63 Ã— 9\n#&gt;    year time_hour           origin dest  tailnum carrier type  engines seats\n#&gt;   &lt;int&gt; &lt;dttm&gt;              &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;int&gt; &lt;int&gt;\n#&gt; 1  2013 2013-01-01 06:00:00 LGA    ORD   N3ALAA  AA      &lt;NA&gt;       NA    NA\n#&gt; 2  2013 2013-01-02 18:00:00 LGA    ORD   N3ALAA  AA      &lt;NA&gt;       NA    NA\n#&gt; 3  2013 2013-01-03 06:00:00 LGA    ORD   N3ALAA  AA      &lt;NA&gt;       NA    NA\n#&gt; 4  2013 2013-01-07 19:00:00 LGA    ORD   N3ALAA  AA      &lt;NA&gt;       NA    NA\n#&gt; 5  2013 2013-01-08 17:00:00 JFK    ORD   N3ALAA  AA      &lt;NA&gt;       NA    NA\n#&gt; 6  2013 2013-01-16 06:00:00 LGA    ORD   N3ALAA  AA      &lt;NA&gt;       NA    NA\n#&gt; # â„¹ 57 more rows\n\næˆ‘ä»¬å°†åœ¨æœ¬ç« çš„å…¶ä½™éƒ¨åˆ†å‡ æ¬¡å›åˆ°è¿™ä¸ªé—®é¢˜ã€‚\n\n19.3.2 æŒ‡å®šè¿æ¥é”®\né»˜è®¤æƒ…å†µä¸‹ï¼Œleft_join() å°†ä½¿ç”¨åŒæ—¶å‡ºç°åœ¨ä¸¤ä¸ªæ•°æ®æ¡†ä¸­çš„æ‰€æœ‰å˜é‡ä½œä¸ºè¿æ¥é”®ï¼Œè¿™è¢«ç§°ä¸ºè‡ªç„¶ (natural) è¿æ¥ã€‚è¿™æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„å¯å‘å¼æ–¹æ³•ï¼Œä½†å®ƒå¹¶ä¸æ€»æ˜¯æœ‰æ•ˆã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬å°è¯•å°† flights2 ä¸å®Œæ•´çš„ planes æ•°æ®é›†è¿æ¥ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ\n\nflights2 |&gt; \n  left_join(planes)\n#&gt; Joining with `by = join_by(year, tailnum)`\n#&gt; # A tibble: 336,776 Ã— 13\n#&gt;    year time_hour           origin dest  tailnum carrier type  manufacturer\n#&gt;   &lt;int&gt; &lt;dttm&gt;              &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;       \n#&gt; 1  2013 2013-01-01 05:00:00 EWR    IAH   N14228  UA      &lt;NA&gt;  &lt;NA&gt;        \n#&gt; 2  2013 2013-01-01 05:00:00 LGA    IAH   N24211  UA      &lt;NA&gt;  &lt;NA&gt;        \n#&gt; 3  2013 2013-01-01 05:00:00 JFK    MIA   N619AA  AA      &lt;NA&gt;  &lt;NA&gt;        \n#&gt; 4  2013 2013-01-01 05:00:00 JFK    BQN   N804JB  B6      &lt;NA&gt;  &lt;NA&gt;        \n#&gt; 5  2013 2013-01-01 06:00:00 LGA    ATL   N668DN  DL      &lt;NA&gt;  &lt;NA&gt;        \n#&gt; 6  2013 2013-01-01 05:00:00 EWR    ORD   N39463  UA      &lt;NA&gt;  &lt;NA&gt;        \n#&gt; # â„¹ 336,770 more rows\n#&gt; # â„¹ 5 more variables: model &lt;chr&gt;, engines &lt;int&gt;, seats &lt;int&gt;, â€¦\n\næˆ‘ä»¬å¾—åˆ°äº†å¾ˆå¤šç¼ºå¤±çš„åŒ¹é…ï¼Œå› ä¸ºæˆ‘ä»¬çš„è¿æ¥æ­£åœ¨å°è¯•ä½¿ç”¨ tailnum å’Œ year ä½œä¸ºå¤åˆé”®ã€‚flights å’Œ planes éƒ½æœ‰ä¸€ä¸ª year åˆ—ï¼Œä½†å®ƒä»¬çš„å«ä¹‰ä¸åŒï¼šflights$year æ˜¯èˆªç­å‘ç”Ÿçš„å¹´ä»½ï¼Œè€Œ planes$year æ˜¯é£æœºåˆ¶é€ çš„å¹´ä»½ã€‚æˆ‘ä»¬åªæƒ³åœ¨ tailnumä¸Šè¿æ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨ join_by() æä¾›ä¸€ä¸ªæ˜ç¡®çš„è§„èŒƒï¼š\n\nflights2 |&gt; \n  left_join(planes, join_by(tailnum))\n#&gt; # A tibble: 336,776 Ã— 14\n#&gt;   year.x time_hour           origin dest  tailnum carrier year.y\n#&gt;    &lt;int&gt; &lt;dttm&gt;              &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;int&gt;\n#&gt; 1   2013 2013-01-01 05:00:00 EWR    IAH   N14228  UA        1999\n#&gt; 2   2013 2013-01-01 05:00:00 LGA    IAH   N24211  UA        1998\n#&gt; 3   2013 2013-01-01 05:00:00 JFK    MIA   N619AA  AA        1990\n#&gt; 4   2013 2013-01-01 05:00:00 JFK    BQN   N804JB  B6        2012\n#&gt; 5   2013 2013-01-01 06:00:00 LGA    ATL   N668DN  DL        1991\n#&gt; 6   2013 2013-01-01 05:00:00 EWR    ORD   N39463  UA        2012\n#&gt; # â„¹ 336,770 more rows\n#&gt; # â„¹ 7 more variables: type &lt;chr&gt;, manufacturer &lt;chr&gt;, model &lt;chr&gt;, â€¦\n\nè¯·æ³¨æ„ï¼Œyear å˜é‡åœ¨è¾“å‡ºä¸­é€šè¿‡åç¼€ï¼ˆyear.x å’Œ year.yï¼‰è¿›è¡Œäº†åŒºåˆ†ï¼Œè¿™å‘Šè¯‰ä½ å˜é‡æ˜¯æ¥è‡ª x å‚æ•°è¿˜æ˜¯ y å‚æ•°ã€‚ä½ å¯ä»¥ä½¿ç”¨ suffix å‚æ•°è¦†ç›–é»˜è®¤çš„åç¼€ã€‚\njoin_by(tailnum) æ˜¯ join_by(tailnum == tailnum) çš„ç®€å†™ã€‚äº†è§£è¿™ç§æ›´å®Œæ•´çš„å½¢å¼å¾ˆé‡è¦ï¼ŒåŸå› æœ‰äºŒã€‚é¦–å…ˆï¼Œå®ƒæè¿°äº†ä¸¤ä¸ªè¡¨ä¹‹é—´çš„å…³ç³»ï¼šé”®å¿…é¡»ç›¸ç­‰ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿™ç§ç±»å‹çš„è¿æ¥é€šå¸¸è¢«ç§°ä¸ºç­‰å€¼è¿æ¥ (equi join)ã€‚ä½ å°†åœ¨ Section 19.5 ä¸­å­¦ä¹ éç­‰å€¼è¿æ¥ã€‚\nå…¶æ¬¡ï¼Œè¿™æ˜¯ä½ åœ¨æ¯ä¸ªè¡¨ä¸­æŒ‡å®šä¸åŒè¿æ¥é”®çš„æ–¹å¼ã€‚ä¾‹å¦‚ï¼Œæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥è¿æ¥ flight2 å’Œ airports è¡¨ï¼šé€šè¿‡ dest æˆ– originï¼š\n\nflights2 |&gt; \n  left_join(airports, join_by(dest == faa))\n#&gt; # A tibble: 336,776 Ã— 13\n#&gt;    year time_hour           origin dest  tailnum carrier name                \n#&gt;   &lt;int&gt; &lt;dttm&gt;              &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;               \n#&gt; 1  2013 2013-01-01 05:00:00 EWR    IAH   N14228  UA      George Bush Intercoâ€¦\n#&gt; 2  2013 2013-01-01 05:00:00 LGA    IAH   N24211  UA      George Bush Intercoâ€¦\n#&gt; 3  2013 2013-01-01 05:00:00 JFK    MIA   N619AA  AA      Miami Intl          \n#&gt; 4  2013 2013-01-01 05:00:00 JFK    BQN   N804JB  B6      &lt;NA&gt;                \n#&gt; 5  2013 2013-01-01 06:00:00 LGA    ATL   N668DN  DL      Hartsfield Jackson â€¦\n#&gt; 6  2013 2013-01-01 05:00:00 EWR    ORD   N39463  UA      Chicago Ohare Intl  \n#&gt; # â„¹ 336,770 more rows\n#&gt; # â„¹ 6 more variables: lat &lt;dbl&gt;, lon &lt;dbl&gt;, alt &lt;dbl&gt;, tz &lt;dbl&gt;, â€¦\n\nflights2 |&gt; \n  left_join(airports, join_by(origin == faa))\n#&gt; # A tibble: 336,776 Ã— 13\n#&gt;    year time_hour           origin dest  tailnum carrier name               \n#&gt;   &lt;int&gt; &lt;dttm&gt;              &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;              \n#&gt; 1  2013 2013-01-01 05:00:00 EWR    IAH   N14228  UA      Newark Liberty Intl\n#&gt; 2  2013 2013-01-01 05:00:00 LGA    IAH   N24211  UA      La Guardia         \n#&gt; 3  2013 2013-01-01 05:00:00 JFK    MIA   N619AA  AA      John F Kennedy Intl\n#&gt; 4  2013 2013-01-01 05:00:00 JFK    BQN   N804JB  B6      John F Kennedy Intl\n#&gt; 5  2013 2013-01-01 06:00:00 LGA    ATL   N668DN  DL      La Guardia         \n#&gt; 6  2013 2013-01-01 05:00:00 EWR    ORD   N39463  UA      Newark Liberty Intl\n#&gt; # â„¹ 336,770 more rows\n#&gt; # â„¹ 6 more variables: lat &lt;dbl&gt;, lon &lt;dbl&gt;, alt &lt;dbl&gt;, tz &lt;dbl&gt;, â€¦\n\nåœ¨æ—§ä»£ç ä¸­ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ°ä¸€ç§ä¸åŒçš„æŒ‡å®šè¿æ¥é”®çš„æ–¹å¼ï¼Œä½¿ç”¨ä¸€ä¸ªå­—ç¬¦å‘é‡ï¼š\n\n\nby = \"x\" å¯¹åº”äº join_by(x)ã€‚\n\nby = c(\"a\" = \"x\") å¯¹åº”äº join_by(a == x)ã€‚\n\næ—¢ç„¶ join_by() å·²ç»å­˜åœ¨ï¼Œæˆ‘ä»¬æ›´å–œæ¬¢ä½¿ç”¨å®ƒï¼Œå› ä¸ºå®ƒæä¾›äº†æ›´æ¸…æ™°å’Œæ›´çµæ´»çš„è§„èŒƒã€‚\ninner_join()ã€right_join()ã€full_join() çš„æ¥å£ä¸ left_join() ç›¸åŒã€‚åŒºåˆ«åœ¨äºå®ƒä»¬ä¿ç•™å“ªäº›è¡Œï¼šå·¦è¿æ¥ä¿ç•™ x ä¸­çš„æ‰€æœ‰è¡Œï¼Œå³è¿æ¥ä¿ç•™ y ä¸­çš„æ‰€æœ‰è¡Œï¼Œå…¨è¿æ¥ä¿ç•™ x æˆ– y ä¸­çš„æ‰€æœ‰è¡Œï¼Œè€Œå†…è¿æ¥åªä¿ç•™åŒæ—¶å‡ºç°åœ¨ x å’Œ y ä¸­çš„è¡Œã€‚æˆ‘ä»¬ç¨åä¼šæ›´è¯¦ç»†åœ°å›åˆ°è¿™äº›ã€‚\n\n19.3.3 è¿‡æ»¤è¿æ¥\nä½ å¯èƒ½çŒœåˆ°ï¼Œè¿‡æ»¤è¿æ¥ (filtering join) çš„ä¸»è¦ä½œç”¨æ˜¯è¿‡æ»¤è¡Œã€‚æœ‰ä¸¤ç§ç±»å‹ï¼šåŠè¿æ¥ (semi-joins) å’Œåè¿æ¥ (anti-joins)ã€‚ åŠè¿æ¥ä¿ç•™ x ä¸­æ‰€æœ‰åœ¨ y ä¸­æœ‰åŒ¹é…çš„è¡Œã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŠè¿æ¥æ¥è¿‡æ»¤ airports æ•°æ®é›†ï¼Œåªæ˜¾ç¤ºå§‹å‘æœºåœºï¼š\n\nairports |&gt; \n  semi_join(flights2, join_by(faa == origin))\n#&gt; # A tibble: 3 Ã— 8\n#&gt;   faa   name                  lat   lon   alt    tz dst   tzone           \n#&gt;   &lt;chr&gt; &lt;chr&gt;               &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;           \n#&gt; 1 EWR   Newark Liberty Intl  40.7 -74.2    18    -5 A     America/New_York\n#&gt; 2 JFK   John F Kennedy Intl  40.6 -73.8    13    -5 A     America/New_York\n#&gt; 3 LGA   La Guardia           40.8 -73.9    22    -5 A     America/New_York\n\næˆ–è€…åªæ˜¾ç¤ºç›®çš„åœ°ï¼š\n\nairports |&gt; \n  semi_join(flights2, join_by(faa == dest))\n#&gt; # A tibble: 101 Ã— 8\n#&gt;   faa   name                     lat    lon   alt    tz dst   tzone          \n#&gt;   &lt;chr&gt; &lt;chr&gt;                  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;          \n#&gt; 1 ABQ   Albuquerque Internatiâ€¦  35.0 -107.   5355    -7 A     America/Denver \n#&gt; 2 ACK   Nantucket Mem           41.3  -70.1    48    -5 A     America/New_Yoâ€¦\n#&gt; 3 ALB   Albany Intl             42.7  -73.8   285    -5 A     America/New_Yoâ€¦\n#&gt; 4 ANC   Ted Stevens Anchorageâ€¦  61.2 -150.    152    -9 A     America/Anchorâ€¦\n#&gt; 5 ATL   Hartsfield Jackson Atâ€¦  33.6  -84.4  1026    -5 A     America/New_Yoâ€¦\n#&gt; 6 AUS   Austin Bergstrom Intl   30.2  -97.7   542    -6 A     America/Chicago\n#&gt; # â„¹ 95 more rows\n\nåè¿æ¥åˆ™ç›¸åï¼šå®ƒä»¬è¿”å› x ä¸­æ‰€æœ‰åœ¨ y ä¸­æ²¡æœ‰åŒ¹é…çš„è¡Œã€‚å®ƒä»¬å¯¹äºæŸ¥æ‰¾æ•°æ®ä¸­éšå¼çš„ç¼ºå¤±å€¼å¾ˆæœ‰ç”¨ï¼Œè¿™æ˜¯ Section 18.3 çš„ä¸»é¢˜ã€‚éšå¼ç¼ºå¤±å€¼ä¸ä¼šæ˜¾ç¤ºä¸º NAï¼Œè€Œæ˜¯ä»…ä»…ä»¥ç¼ºå¸­çš„å½¢å¼å­˜åœ¨ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥æ‰¾æ²¡æœ‰åŒ¹é…ç›®çš„åœ°æœºåœºçš„èˆªç­æ¥æ‰¾åˆ° airports ä¸­ç¼ºå¤±çš„è¡Œï¼š\n\nflights2 |&gt; \n  anti_join(airports, join_by(dest == faa)) |&gt; \n  distinct(dest)\n#&gt; # A tibble: 4 Ã— 1\n#&gt;   dest \n#&gt;   &lt;chr&gt;\n#&gt; 1 BQN  \n#&gt; 2 SJU  \n#&gt; 3 STT  \n#&gt; 4 PSE\n\næˆ–è€…æˆ‘ä»¬å¯ä»¥æ‰¾å‡ºå“ªäº› tailnum åœ¨ planes ä¸­æ˜¯ç¼ºå¤±çš„ï¼š\n\nflights2 |&gt;\n  anti_join(planes, join_by(tailnum)) |&gt; \n  distinct(tailnum)\n#&gt; # A tibble: 722 Ã— 1\n#&gt;   tailnum\n#&gt;   &lt;chr&gt;  \n#&gt; 1 N3ALAA \n#&gt; 2 N3DUAA \n#&gt; 3 N542MQ \n#&gt; 4 N730MQ \n#&gt; 5 N9EAMQ \n#&gt; 6 N532UA \n#&gt; # â„¹ 716 more rows\n\n\n19.3.4 ç»ƒä¹ \n\næ‰¾å‡ºï¼ˆå…¨å¹´ï¼‰å»¶è¯¯æœ€ä¸¥é‡çš„ 48 ä¸ªå°æ—¶ã€‚ä¸ weather æ•°æ®è¿›è¡Œäº¤å‰å¼•ç”¨ã€‚ä½ èƒ½çœ‹åˆ°ä»»ä½•æ¨¡å¼å—ï¼Ÿ\n\næƒ³è±¡ä½ å·²ç»ç”¨è¿™æ®µä»£ç æ‰¾åˆ°äº†æ’åå‰ 10 çš„æœ€å—æ¬¢è¿çš„ç›®çš„åœ°ï¼š\n\ntop_dest &lt;- flights2 |&gt;\n  count(dest, sort = TRUE) |&gt;\n  head(10)\n\nä½ å¦‚ä½•æ‰¾åˆ°æ‰€æœ‰é£å¾€è¿™äº›ç›®çš„åœ°çš„èˆªç­ï¼Ÿ\n\næ¯ä¸ªå‡ºå‘çš„èˆªç­éƒ½æœ‰å¯¹åº”é‚£ä¸ªå°æ—¶çš„å¤©æ°”æ•°æ®å—ï¼Ÿ\né‚£äº›åœ¨ planes ä¸­æ²¡æœ‰åŒ¹é…è®°å½•çš„å°¾å·æœ‰ä»€ä¹ˆå…±åŒç‚¹ï¼Ÿï¼ˆæç¤ºï¼šä¸€ä¸ªå˜é‡è§£é‡Šäº†çº¦ 90% çš„é—®é¢˜ã€‚ï¼‰\nå‘ planes æ·»åŠ ä¸€åˆ—ï¼Œåˆ—å‡ºé£è¿‡é‚£æ¶é£æœºçš„æ¯ä¸ª carrierã€‚ä½ å¯èƒ½æœŸæœ›é£æœºå’Œèˆªç©ºå…¬å¸ä¹‹é—´å­˜åœ¨ä¸€ç§éšå¼å…³ç³»ï¼Œå› ä¸ºæ¯æ¶é£æœºéƒ½ç”±ä¸€å®¶èˆªç©ºå…¬å¸è¿è¥ã€‚ä½¿ç”¨ä½ åœ¨å‰é¢ç« èŠ‚ä¸­å­¦åˆ°çš„å·¥å…·æ¥è¯å®æˆ–å¦å®šè¿™ä¸ªå‡è®¾ã€‚\nå°†å§‹å‘åœ°å’Œç›®çš„åœ°æœºåœºçš„çº¬åº¦å’Œç»åº¦æ·»åŠ åˆ° flights ä¸­ã€‚æ˜¯åœ¨è¿æ¥ä¹‹å‰è¿˜æ˜¯ä¹‹åé‡å‘½ååˆ—æ›´å®¹æ˜“ï¼Ÿ\n\næŒ‰ç›®çš„åœ°è®¡ç®—å¹³å‡å»¶è¯¯ï¼Œç„¶åä¸ airports æ•°æ®æ¡†è¿æ¥ï¼Œè¿™æ ·ä½ å°±å¯ä»¥æ˜¾ç¤ºå»¶è¯¯çš„ç©ºé—´åˆ†å¸ƒã€‚è¿™é‡Œæœ‰ä¸€ä¸ªç»˜åˆ¶ç¾å›½åœ°å›¾çš„ç®€å•æ–¹æ³•ï¼š\n\nairports |&gt;\n  semi_join(flights, join_by(faa == dest)) |&gt;\n  ggplot(aes(x = lon, y = lat)) +\n    borders(\"state\") +\n    geom_point() +\n    coord_quickmap()\n\nä½ å¯èƒ½æƒ³ç”¨ç‚¹çš„å¤§å°æˆ–é¢œè‰²æ¥æ˜¾ç¤ºæ¯ä¸ªæœºåœºçš„å¹³å‡å»¶è¯¯ã€‚\n\n2013 å¹´ 6 æœˆ 13 æ—¥å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿç»˜åˆ¶ä¸€å¼ å»¶è¯¯åœ°å›¾ï¼Œç„¶åç”¨è°·æ­Œä¸å¤©æ°”è¿›è¡Œäº¤å‰å¼•ç”¨ã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>19</span>Â  <span class='chapter-title'>è¿æ¥</span>"
    ]
  },
  {
    "objectID": "joins.html#è¿æ¥å¦‚ä½•å·¥ä½œ",
    "href": "joins.html#è¿æ¥å¦‚ä½•å·¥ä½œ",
    "title": "19Â  è¿æ¥",
    "section": "\n19.4 è¿æ¥å¦‚ä½•å·¥ä½œï¼Ÿ",
    "text": "19.4 è¿æ¥å¦‚ä½•å·¥ä½œï¼Ÿ\næ—¢ç„¶ä½ å·²ç»ä½¿ç”¨è¿‡å‡ æ¬¡è¿æ¥äº†ï¼Œæ˜¯æ—¶å€™å­¦ä¹ æ›´å¤šå…³äºå®ƒä»¬å¦‚ä½•å·¥ä½œçš„çŸ¥è¯†äº†ï¼Œé‡ç‚¹æ˜¯ x ä¸­çš„æ¯ä¸€è¡Œå¦‚ä½•ä¸ y ä¸­çš„è¡ŒåŒ¹é…ã€‚æˆ‘ä»¬å°†é¦–å…ˆä»‹ç»ä¸€ç§è¿æ¥çš„å¯è§†åŒ–è¡¨ç¤ºæ³•ï¼Œä½¿ç”¨ä¸‹é¢å®šä¹‰çš„ç®€å• tibbleï¼Œå¹¶å¦‚ FigureÂ 19.2 æ‰€ç¤ºã€‚åœ¨è¿™äº›ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªåä¸º key çš„å•ä¸ªé”®å’Œä¸€ä¸ªå•ä¸ªå€¼åˆ—ï¼ˆval_x å’Œ val_yï¼‰ï¼Œä½†è¿™äº›æ€æƒ³éƒ½é€‚ç”¨äºå¤šä¸ªé”®å’Œå¤šä¸ªå€¼ã€‚\n\nx &lt;- tribble(\n  ~key, ~val_x,\n     1, \"x1\",\n     2, \"x2\",\n     3, \"x3\"\n)\ny &lt;- tribble(\n  ~key, ~val_y,\n     1, \"y1\",\n     2, \"y2\",\n     4, \"y3\"\n)\n\n\n\n\n\n\n\n\nFigureÂ 19.2: ä¸¤ä¸ªç®€å•è¡¨æ ¼çš„å›¾å½¢è¡¨ç¤ºã€‚å¸¦é¢œè‰²çš„ key åˆ—å°†èƒŒæ™¯è‰²æ˜ å°„åˆ°é”®å€¼ã€‚ç°è‰²åˆ—ä»£è¡¨è¢«â€œæºå¸¦â€çš„å€¼åˆ—ã€‚\n\n\n\n\nFigureÂ 19.3 ä»‹ç»äº†æˆ‘ä»¬å¯è§†åŒ–è¡¨ç¤ºæ³•çš„åŸºç¡€ã€‚å®ƒå°† x å’Œ y ä¹‹é—´çš„æ‰€æœ‰æ½œåœ¨åŒ¹é…æ˜¾ç¤ºä¸ºä» x çš„æ¯ä¸€è¡Œå’Œ y çš„æ¯ä¸€è¡Œç”»å‡ºçš„çº¿çš„äº¤ç‚¹ã€‚è¾“å‡ºä¸­çš„è¡Œå’Œåˆ—ä¸»è¦ç”± x å†³å®šï¼Œæ‰€ä»¥ x è¡¨æ˜¯æ°´å¹³çš„ï¼Œå¹¶ä¸è¾“å‡ºå¯¹é½ã€‚\n\n\n\n\n\n\n\nFigureÂ 19.3: è¦ç†è§£è¿æ¥å¦‚ä½•å·¥ä½œï¼Œå°†æ¯ç§å¯èƒ½çš„åŒ¹é…éƒ½è€ƒè™‘è¿›å»æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚è¿™é‡Œæˆ‘ä»¬ç”¨ä¸€ä¸ªè¿æ¥çº¿çš„ç½‘æ ¼æ¥å±•ç¤ºè¿™ä¸€ç‚¹ã€‚\n\n\n\n\nä¸ºäº†æè¿°ä¸€ç§ç‰¹å®šç±»å‹çš„è¿æ¥ï¼Œæˆ‘ä»¬ç”¨ç‚¹æ¥è¡¨ç¤ºåŒ¹é…ã€‚åŒ¹é…å†³å®šäº†è¾“å‡ºä¸­çš„è¡Œï¼Œè¿™æ˜¯ä¸€ä¸ªæ–°çš„æ•°æ®æ¡†ï¼ŒåŒ…å«é”®ã€x å€¼å’Œ y å€¼ã€‚ä¾‹å¦‚ï¼ŒFigureÂ 19.4 å±•ç¤ºäº†ä¸€ä¸ªå†…è¿æ¥ï¼Œå½“ä¸”ä»…å½“é”®ç›¸ç­‰æ—¶ï¼Œè¡Œæ‰è¢«ä¿ç•™ã€‚\n\n\n\n\n\n\n\nFigureÂ 19.4: å†…è¿æ¥å°† x ä¸­çš„æ¯ä¸€è¡Œä¸ y ä¸­å…·æœ‰ç›¸åŒ key å€¼çš„è¡Œè¿›è¡ŒåŒ¹é…ã€‚æ¯ä¸ªåŒ¹é…éƒ½æˆä¸ºè¾“å‡ºä¸­çš„ä¸€è¡Œã€‚\n\n\n\n\næˆ‘ä»¬å¯ä»¥åº”ç”¨ç›¸åŒçš„åŸåˆ™æ¥è§£é‡Šå¤–è¿æ¥ (outer joins)ï¼Œå®ƒä¿ç•™å‡ºç°åœ¨è‡³å°‘ä¸€ä¸ªæ•°æ®æ¡†ä¸­çš„è§‚æµ‹å€¼ã€‚è¿™äº›è¿æ¥é€šè¿‡å‘æ¯ä¸ªæ•°æ®æ¡†æ·»åŠ ä¸€ä¸ªé¢å¤–çš„â€œè™šæ‹Ÿâ€è§‚æµ‹å€¼æ¥å·¥ä½œã€‚è¿™ä¸ªè§‚æµ‹å€¼æœ‰ä¸€ä¸ªåœ¨æ²¡æœ‰å…¶ä»–é”®åŒ¹é…æ—¶èƒ½å¤ŸåŒ¹é…çš„é”®ï¼Œå¹¶ä¸”å€¼ç”¨ NA å¡«å……ã€‚æœ‰ä¸‰ç§ç±»å‹çš„å¤–è¿æ¥ï¼š\n\n\nå·¦è¿æ¥ (left join) ä¿ç•™ x ä¸­çš„æ‰€æœ‰è§‚æµ‹å€¼ï¼ŒFigureÂ 19.5ã€‚x çš„æ¯ä¸€è¡Œéƒ½åœ¨è¾“å‡ºä¸­è¢«ä¿ç•™ï¼Œå› ä¸ºå®ƒå¯ä»¥å›é€€åˆ°åŒ¹é… y ä¸­çš„ä¸€è¡Œ NAã€‚\n\n\n\n\n\n\n\nFigureÂ 19.5: å·¦è¿æ¥çš„å¯è§†åŒ–è¡¨ç¤ºï¼Œå…¶ä¸­ x ä¸­çš„æ¯ä¸€è¡Œéƒ½å‡ºç°åœ¨è¾“å‡ºä¸­ã€‚\n\n\n\n\n\n\nå³è¿æ¥ (right join) ä¿ç•™ y ä¸­çš„æ‰€æœ‰è§‚æµ‹å€¼ï¼ŒFigureÂ 19.6ã€‚y çš„æ¯ä¸€è¡Œéƒ½åœ¨è¾“å‡ºä¸­è¢«ä¿ç•™ï¼Œå› ä¸ºå®ƒå¯ä»¥å›é€€åˆ°åŒ¹é… x ä¸­çš„ä¸€è¡Œ NAã€‚è¾“å‡ºä»ç„¶å°½å¯èƒ½åœ°ä¸ x åŒ¹é…ï¼›æ¥è‡ª y çš„ä»»ä½•å¤šä½™çš„è¡Œéƒ½è¢«æ·»åŠ åˆ°æœ«å°¾ã€‚\n\n\n\n\n\n\n\nFigureÂ 19.6: å³è¿æ¥çš„å¯è§†åŒ–è¡¨ç¤ºï¼Œå…¶ä¸­ y çš„æ¯ä¸€è¡Œéƒ½å‡ºç°åœ¨è¾“å‡ºä¸­ã€‚\n\n\n\n\n\n\nå…¨è¿æ¥ (full join) ä¿ç•™å‡ºç°åœ¨ x æˆ– y ä¸­çš„æ‰€æœ‰è§‚æµ‹å€¼ï¼ŒFigureÂ 19.7ã€‚x å’Œ y çš„æ¯ä¸€è¡Œéƒ½åŒ…å«åœ¨è¾“å‡ºä¸­ï¼Œå› ä¸º x å’Œ y éƒ½æœ‰ä¸€ä¸ªå›é€€çš„ NA è¡Œã€‚åŒæ ·ï¼Œè¾“å‡ºä»¥ x çš„æ‰€æœ‰è¡Œå¼€å§‹ï¼Œç„¶åæ˜¯å‰©ä½™çš„æœªåŒ¹é…çš„ y è¡Œã€‚\n\n\n\n\n\n\n\nFigureÂ 19.7: å…¨è¿æ¥çš„å¯è§†åŒ–è¡¨ç¤ºï¼Œå…¶ä¸­ x å’Œ y ä¸­çš„æ¯ä¸€è¡Œéƒ½å‡ºç°åœ¨è¾“å‡ºä¸­ã€‚\n\n\n\n\n\n\nå¦ä¸€ç§æ˜¾ç¤ºå¤–è¿æ¥ç±»å‹å·®å¼‚çš„æ–¹æ³•æ˜¯ä½¿ç”¨ç»´æ©å›¾ï¼Œå¦‚ FigureÂ 19.8 æ‰€ç¤ºã€‚ç„¶è€Œï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è¡¨ç¤ºæ–¹æ³•ï¼Œå› ä¸ºå°½ç®¡å®ƒå¯èƒ½ä¼šè®©ä½ è®°èµ·å“ªäº›è¡Œè¢«ä¿ç•™äº†ï¼Œä½†å®ƒæœªèƒ½è¯´æ˜åˆ—å‘ç”Ÿäº†ä»€ä¹ˆã€‚\n\n\n\n\n\n\n\nFigureÂ 19.8: ç»´æ©å›¾æ˜¾ç¤ºå†…è¿æ¥ã€å·¦è¿æ¥ã€å³è¿æ¥å’Œå…¨è¿æ¥ä¹‹é—´çš„å·®å¼‚ã€‚\n\n\n\n\nè¿™é‡Œæ˜¾ç¤ºçš„è¿æ¥æ˜¯æ‰€è°“çš„ç­‰å€¼ (equi) è¿æ¥ï¼Œå…¶ä¸­å¦‚æœé”®ç›¸ç­‰åˆ™è¡ŒåŒ¹é…ã€‚ç­‰å€¼è¿æ¥æ˜¯æœ€å¸¸è§çš„è¿æ¥ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šå¸¸ä¼šçœç•¥ç­‰å€¼å‰ç¼€ï¼Œåªè¯´â€œå†…è¿æ¥â€è€Œä¸æ˜¯â€œç­‰å€¼å†…è¿æ¥â€ã€‚æˆ‘ä»¬å°†åœ¨ Section 19.5 ä¸­å›åˆ°éç­‰å€¼è¿æ¥ã€‚\n\n19.4.1 è¡ŒåŒ¹é…\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»æ¢è®¨äº†å¦‚æœ x ä¸­çš„ä¸€è¡Œä¸ y ä¸­çš„é›¶è¡Œæˆ–ä¸€è¡ŒåŒ¹é…ä¼šå‘ç”Ÿä»€ä¹ˆã€‚å¦‚æœå®ƒåŒ¹é…å¤šäºä¸€è¡Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿè¦ç†è§£å‘ç”Ÿäº†ä»€ä¹ˆï¼Œè®©æˆ‘ä»¬é¦–å…ˆå°†ç„¦ç‚¹ç¼©å°åˆ° inner_join()ï¼Œç„¶åç”»ä¸€å¹…å›¾ï¼ŒFigureÂ 19.9ã€‚\n\n\n\n\n\n\n\nFigureÂ 19.9: x ä¸­çš„ä¸€è¡Œå¯ä»¥æœ‰ä¸‰ç§åŒ¹é…æ–¹å¼ã€‚x1 åŒ¹é… y ä¸­çš„ä¸€è¡Œï¼Œx2 åŒ¹é… y ä¸­çš„ä¸¤è¡Œï¼Œx3 åŒ¹é… y ä¸­çš„é›¶è¡Œã€‚æ³¨æ„ï¼Œè™½ç„¶ x ä¸­æœ‰ä¸‰è¡Œï¼Œè¾“å‡ºä¸­ä¹Ÿæœ‰ä¸‰è¡Œï¼Œä½†è¿™äº›è¡Œä¹‹é—´æ²¡æœ‰ç›´æ¥çš„å¯¹åº”å…³ç³»ã€‚\n\n\n\n\nx ä¸­çš„ä¸€è¡Œæœ‰ä¸‰ç§å¯èƒ½çš„ç»“æœï¼š\n\nå¦‚æœå®ƒä¸åŒ¹é…ä»»ä½•ä¸œè¥¿ï¼Œå®ƒå°±ä¼šè¢«ä¸¢å¼ƒã€‚\nå¦‚æœå®ƒåŒ¹é… y ä¸­çš„ 1 è¡Œï¼Œå®ƒå°±ä¼šè¢«ä¿ç•™ã€‚\nå¦‚æœå®ƒåŒ¹é… y ä¸­çš„å¤šäº 1 è¡Œï¼Œå®ƒä¼šä¸ºæ¯ä¸ªåŒ¹é…å¤åˆ¶ä¸€æ¬¡ã€‚\n\nåŸåˆ™ä¸Šï¼Œè¿™æ„å‘³ç€è¾“å‡ºä¸­çš„è¡Œä¸ x ä¸­çš„è¡Œä¹‹é—´æ²¡æœ‰ä¿è¯çš„å¯¹åº”å…³ç³»ï¼Œä½†åœ¨å®è·µä¸­ï¼Œè¿™å¾ˆå°‘å¼•èµ·é—®é¢˜ã€‚ç„¶è€Œï¼Œæœ‰ä¸€ä¸ªç‰¹åˆ«å±é™©çš„æƒ…å†µå¯èƒ½ä¼šå¯¼è‡´è¡Œçš„ç»„åˆçˆ†ç‚¸ã€‚æƒ³è±¡ä¸€ä¸‹è¿æ¥ä»¥ä¸‹ä¸¤ä¸ªè¡¨ï¼š\n\ndf1 &lt;- tibble(key = c(1, 2, 2), val_x = c(\"x1\", \"x2\", \"x3\"))\ndf2 &lt;- tibble(key = c(1, 2, 2), val_y = c(\"y1\", \"y2\", \"y3\"))\n\nè™½ç„¶ df1 ä¸­çš„ç¬¬ä¸€è¡ŒåªåŒ¹é… df2 ä¸­çš„ä¸€è¡Œï¼Œä½†ç¬¬äºŒè¡Œå’Œç¬¬ä¸‰è¡Œéƒ½åŒ¹é…ä¸¤è¡Œã€‚è¿™æœ‰æ—¶è¢«ç§°ä¸ºå¤šå¯¹å¤š (many-to-many)è¿æ¥ï¼Œå¹¶ä¸”ä¼šå¯¼è‡´ dplyr å‘å‡ºè­¦å‘Šï¼š\n\ndf1 |&gt; \n  inner_join(df2, join_by(key))\n#&gt; Warning in inner_join(df1, df2, join_by(key)): Detected an unexpected many-to-many relationship between `x` and `y`.\n#&gt; â„¹ Row 2 of `x` matches multiple rows in `y`.\n#&gt; â„¹ Row 2 of `y` matches multiple rows in `x`.\n#&gt; â„¹ If a many-to-many relationship is expected, set `relationship =\n#&gt;   \"many-to-many\"` to silence this warning.\n#&gt; # A tibble: 5 Ã— 3\n#&gt;     key val_x val_y\n#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;\n#&gt; 1     1 x1    y1   \n#&gt; 2     2 x2    y2   \n#&gt; 3     2 x2    y3   \n#&gt; 4     2 x3    y2   \n#&gt; 5     2 x3    y3\n\nå¦‚æœä½ æ˜¯æ•…æ„è¿™æ ·åšçš„ï¼Œä½ å¯ä»¥è®¾ç½® relationship = \"many-to-many\"ï¼Œæ­£å¦‚è­¦å‘Šæ‰€å»ºè®®çš„é‚£æ ·ã€‚\n\n19.4.2 è¿‡æ»¤è¿æ¥\nåŒ¹é…çš„æ•°é‡ä¹Ÿå†³å®šäº†è¿‡æ»¤è¿æ¥çš„è¡Œä¸ºã€‚åŠè¿æ¥ä¿ç•™ x ä¸­åœ¨ y ä¸­æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªåŒ¹é…çš„è¡Œï¼Œå¦‚ FigureÂ 19.10 æ‰€ç¤ºã€‚åè¿æ¥ä¿ç•™ x ä¸­åŒ¹é… y ä¸­é›¶è¡Œçš„è¡Œï¼Œå¦‚ FigureÂ 19.11 æ‰€ç¤ºã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œåªæœ‰åŒ¹é…çš„å­˜åœ¨æ˜¯é‡è¦çš„ï¼›å®ƒåŒ¹é…å¤šå°‘æ¬¡å¹¶ä¸é‡è¦ã€‚è¿™æ„å‘³ç€è¿‡æ»¤è¿æ¥ä»ä¸åƒå˜è¿æ¥é‚£æ ·å¤åˆ¶è¡Œã€‚\n\n\n\n\n\n\n\nFigureÂ 19.10: åœ¨åŠè¿æ¥ä¸­ï¼Œé‡è¦çš„æ˜¯å­˜åœ¨åŒ¹é…ï¼›å¦åˆ™ y ä¸­çš„å€¼ä¸ä¼šå½±å“è¾“å‡ºã€‚\n\n\n\n\n\n\n\n\n\n\n\nFigureÂ 19.11: åè¿æ¥æ˜¯åŠè¿æ¥çš„é€†æ“ä½œï¼Œä» x ä¸­åˆ é™¤åœ¨ y ä¸­æœ‰åŒ¹é…çš„è¡Œã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>19</span>Â  <span class='chapter-title'>è¿æ¥</span>"
    ]
  },
  {
    "objectID": "joins.html#sec-non-equi-joins",
    "href": "joins.html#sec-non-equi-joins",
    "title": "19Â  è¿æ¥",
    "section": "\n19.5 éç­‰å€¼è¿æ¥",
    "text": "19.5 éç­‰å€¼è¿æ¥\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ åªçœ‹åˆ°äº†ç­‰å€¼è¿æ¥ï¼Œå³å¦‚æœ x é”®ç­‰äº y é”®ï¼Œè¡Œå°±åŒ¹é…ã€‚ç°åœ¨æˆ‘ä»¬å°†æ”¾å®½è¿™ä¸ªé™åˆ¶ï¼Œè®¨è®ºç¡®å®šä¸€å¯¹è¡Œæ˜¯å¦åŒ¹é…çš„å…¶ä»–æ–¹æ³•ã€‚\nä½†åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°å®¡è§†æˆ‘ä»¬ä¸Šé¢åšçš„ä¸€ä¸ªç®€åŒ–ã€‚åœ¨ç­‰å€¼è¿æ¥ä¸­ï¼Œx é”®å’Œ y é”®æ€»æ˜¯ç›¸ç­‰çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦åœ¨è¾“å‡ºä¸­æ˜¾ç¤ºä¸€ä¸ªã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ keep = TRUE æ¥è¯·æ±‚ dplyr ä¿ç•™ä¸¤ä¸ªé”®ï¼Œè¿™å¯¼è‡´äº†ä¸‹é¢çš„ä»£ç å’Œ FigureÂ 19.12 ä¸­é‡æ–°ç»˜åˆ¶çš„ inner_join()ã€‚\n\nx |&gt; inner_join(y, join_by(key == key), keep = TRUE)\n#&gt; # A tibble: 2 Ã— 4\n#&gt;   key.x val_x key.y val_y\n#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;\n#&gt; 1     1 x1        1 y1   \n#&gt; 2     2 x2        2 y2\n\n\n\n\n\n\n\n\nFigureÂ 19.12: ä¸€ä¸ªå†…è¿æ¥ï¼Œåœ¨è¾“å‡ºä¸­æ˜¾ç¤º x å’Œ y çš„é”®ã€‚\n\n\n\n\nå½“æˆ‘ä»¬ä»ç­‰å€¼è¿æ¥è½¬å‘å…¶ä»–ç±»å‹æ—¶ï¼Œæˆ‘ä»¬å°†æ€»æ˜¯æ˜¾ç¤ºé”®ï¼Œå› ä¸ºé”®å€¼é€šå¸¸ä¼šä¸åŒã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä¸å†ä»…ä»…åœ¨ x$key å’Œ y$key ç›¸ç­‰æ—¶åŒ¹é…ï¼Œè€Œæ˜¯åœ¨ x$key å¤§äºæˆ–ç­‰äº y$key æ—¶åŒ¹é…ï¼Œè¿™å¯¼è‡´äº† FigureÂ 19.13ã€‚dplyr çš„è¿æ¥å‡½æ•°ç†è§£ç­‰å€¼è¿æ¥å’Œéç­‰å€¼è¿æ¥ä¹‹é—´çš„è¿™ç§åŒºåˆ«ï¼Œæ‰€ä»¥å½“ä½ æ‰§è¡Œéç­‰å€¼è¿æ¥æ—¶ï¼Œå®ƒæ€»æ˜¯ä¼šæ˜¾ç¤ºä¸¤ä¸ªé”®ã€‚\n\n\n\n\n\n\n\nFigureÂ 19.13: ä¸€ä¸ªéç­‰å€¼è¿æ¥ï¼Œå…¶ä¸­ x é”®å¿…é¡»å¤§äºæˆ–ç­‰äº y é”®ã€‚è®¸å¤šè¡Œä¼šäº§ç”Ÿå¤šä¸ªåŒ¹é…ã€‚\n\n\n\n\néç­‰å€¼è¿æ¥ä¸æ˜¯ä¸€ä¸ªç‰¹åˆ«æœ‰ç”¨çš„æœ¯è¯­ï¼Œå› ä¸ºå®ƒåªå‘Šè¯‰ä½ è¿æ¥ä¸æ˜¯ä»€ä¹ˆï¼Œè€Œä¸æ˜¯å®ƒæ˜¯ä»€ä¹ˆã€‚dplyr é€šè¿‡è¯†åˆ«å››ç§ç‰¹åˆ«æœ‰ç”¨çš„éç­‰å€¼è¿æ¥ç±»å‹æ¥æä¾›å¸®åŠ©ï¼š\n\n\näº¤å‰è¿æ¥ (Cross joins) åŒ¹é…æ¯ä¸€å¯¹è¡Œã€‚\n\nä¸ç­‰è¿æ¥ (Inequality joins) ä½¿ç”¨ &lt;ã€&lt;=ã€&gt; å’Œ &gt;= è€Œä¸æ˜¯ ==ã€‚\n\næ»šåŠ¨è¿æ¥ (Rolling joins) ç±»ä¼¼äºä¸ç­‰è¿æ¥ï¼Œä½†åªæ‰¾åˆ°æœ€æ¥è¿‘çš„åŒ¹é…ã€‚\n\né‡å è¿æ¥ (Overlap joins) æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„ä¸ç­‰è¿æ¥ï¼Œæ—¨åœ¨å¤„ç†èŒƒå›´ã€‚\n\nä»¥ä¸‹å„èŠ‚å°†æ›´è¯¦ç»†åœ°æè¿°è¿™äº›ç±»å‹ä¸­çš„æ¯ä¸€ç§ã€‚\n\n19.5.1 äº¤å‰è¿æ¥\näº¤å‰è¿æ¥åŒ¹é…æ‰€æœ‰å†…å®¹ï¼Œå¦‚ FigureÂ 19.14 æ‰€ç¤ºï¼Œç”Ÿæˆè¡Œçš„ç¬›å¡å°”ç§¯ã€‚è¿™æ„å‘³ç€è¾“å‡ºå°†æœ‰ nrow(x) * nrow(y) è¡Œã€‚\n\n\n\n\n\n\n\nFigureÂ 19.14: äº¤å‰è¿æ¥å°† x ä¸­çš„æ¯ä¸€è¡Œä¸ y ä¸­çš„æ¯ä¸€è¡Œè¿›è¡ŒåŒ¹é…ã€‚\n\n\n\n\näº¤å‰è¿æ¥åœ¨ç”Ÿæˆæ’åˆ—æ—¶å¾ˆæœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç ç”Ÿæˆäº†æ‰€æœ‰å¯èƒ½çš„åå­—å¯¹ã€‚ç”±äºæˆ‘ä»¬å°† df ä¸è‡ªèº«è¿æ¥ï¼Œè¿™æœ‰æ—¶è¢«ç§°ä¸ºè‡ªè¿æ¥ (self-join)ã€‚äº¤å‰è¿æ¥ä½¿ç”¨ä¸€ä¸ªä¸åŒçš„è¿æ¥å‡½æ•°ï¼Œå› ä¸ºå½“ä½ åŒ¹é…æ¯ä¸€è¡Œæ—¶ï¼Œå†…/å·¦/å³/å…¨è¿æ¥ä¹‹é—´æ²¡æœ‰åŒºåˆ«ã€‚\n\ndf &lt;- tibble(name = c(\"John\", \"Simon\", \"Tracy\", \"Max\"))\ndf |&gt; cross_join(df)\n#&gt; # A tibble: 16 Ã— 2\n#&gt;   name.x name.y\n#&gt;   &lt;chr&gt;  &lt;chr&gt; \n#&gt; 1 John   John  \n#&gt; 2 John   Simon \n#&gt; 3 John   Tracy \n#&gt; 4 John   Max   \n#&gt; 5 Simon  John  \n#&gt; 6 Simon  Simon \n#&gt; # â„¹ 10 more rows\n\n\n19.5.2 ä¸ç­‰è¿æ¥\nä¸ç­‰è¿æ¥ä½¿ç”¨ &lt;ã€&lt;=ã€&gt;= æˆ– &gt; æ¥é™åˆ¶å¯èƒ½çš„åŒ¹é…é›†ï¼Œå¦‚ FigureÂ 19.13 å’Œ FigureÂ 19.15 æ‰€ç¤ºã€‚\n\n\n\n\n\n\n\nFigureÂ 19.15: ä¸€ä¸ªä¸ç­‰è¿æ¥ï¼Œå…¶ä¸­ x ä¸ y åœ¨ x çš„é”®å°äº y çš„é”®çš„è¡Œä¸Šè¿æ¥ã€‚è¿™åœ¨å·¦ä¸Šè§’å½¢æˆäº†ä¸€ä¸ªä¸‰è§’å½¢ã€‚\n\n\n\n\nä¸ç­‰è¿æ¥éå¸¸é€šç”¨ï¼Œä»¥è‡³äºå¾ˆéš¾æƒ³å‡ºæœ‰æ„ä¹‰çš„å…·ä½“ç”¨ä¾‹ã€‚ä¸€ä¸ªæœ‰ç”¨çš„å°æŠ€å·§æ˜¯ä½¿ç”¨å®ƒä»¬æ¥é™åˆ¶äº¤å‰è¿æ¥ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç”Ÿæˆæ‰€æœ‰ç»„åˆè€Œä¸æ˜¯æ‰€æœ‰æ’åˆ—ï¼š\n\ndf &lt;- tibble(id = 1:4, name = c(\"John\", \"Simon\", \"Tracy\", \"Max\"))\n\ndf |&gt; inner_join(df, join_by(id &lt; id))\n#&gt; # A tibble: 6 Ã— 4\n#&gt;    id.x name.x  id.y name.y\n#&gt;   &lt;int&gt; &lt;chr&gt;  &lt;int&gt; &lt;chr&gt; \n#&gt; 1     1 John       2 Simon \n#&gt; 2     1 John       3 Tracy \n#&gt; 3     1 John       4 Max   \n#&gt; 4     2 Simon      3 Tracy \n#&gt; 5     2 Simon      4 Max   \n#&gt; 6     3 Tracy      4 Max\n\n\n19.5.3 æ»šåŠ¨è¿æ¥\næ»šåŠ¨è¿æ¥æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„ä¸ç­‰è¿æ¥ï¼Œåœ¨è¿™ç§è¿æ¥ä¸­ï¼Œä½ å¾—åˆ°çš„ä¸æ˜¯æ»¡è¶³ä¸ç­‰å¼çš„æ¯ä¸€è¡Œï¼Œè€Œåªæ˜¯æœ€æ¥è¿‘çš„é‚£ä¸€è¡Œï¼Œå¦‚ FigureÂ 19.16 æ‰€ç¤ºã€‚ä½ å¯ä»¥é€šè¿‡æ·»åŠ  closest() å°†ä»»ä½•ä¸ç­‰è¿æ¥å˜æˆæ»šåŠ¨è¿æ¥ã€‚ä¾‹å¦‚ï¼Œjoin_by(closest(x &lt;= y)) åŒ¹é…å¤§äºæˆ–ç­‰äº x çš„æœ€å°çš„ yï¼Œè€Œ join_by(closest(x &gt; y)) åŒ¹é…å°äº x çš„æœ€å¤§çš„ yã€‚\n\n\n\n\n\n\n\nFigureÂ 19.16: æ»šåŠ¨è¿æ¥ç±»ä¼¼äºå¤§äºæˆ–ç­‰äºçš„ä¸ç­‰è¿æ¥ï¼Œä½†åªåŒ¹é…ç¬¬ä¸€ä¸ªå€¼ã€‚\n\n\n\n\nå½“ä½ æœ‰ä¸¤ä¸ªæ—¥æœŸè¡¨ä¸èƒ½å®Œç¾å¯¹é½ï¼Œå¹¶ä¸”ä½ æƒ³æ‰¾åˆ°ï¼ˆä¾‹å¦‚ï¼‰è¡¨ 1 ä¸­åœ¨è¡¨ 2 ä¸­æŸä¸ªæ—¥æœŸä¹‹å‰ï¼ˆæˆ–ä¹‹åï¼‰çš„æœ€æ¥è¿‘çš„æ—¥æœŸæ—¶ï¼Œæ»šåŠ¨è¿æ¥ç‰¹åˆ«æœ‰ç”¨ã€‚\nä¾‹å¦‚ï¼Œå‡è®¾ä½ è´Ÿè´£ä½ åŠå…¬å®¤çš„æ´¾å¯¹ç­–åˆ’å§”å‘˜ä¼šã€‚ä½ çš„å…¬å¸ç›¸å½“åå•¬ï¼Œæ‰€ä»¥ä½ ä»¬ä¸æ˜¯ä¸¾åŠå•ç‹¬çš„æ´¾å¯¹ï¼Œè€Œæ˜¯æ¯ä¸ªå­£åº¦åªä¸¾åŠä¸€æ¬¡æ´¾å¯¹ã€‚ç¡®å®šæ´¾å¯¹ä½•æ—¶ä¸¾è¡Œçš„è§„åˆ™æœ‰ç‚¹å¤æ‚ï¼šæ´¾å¯¹æ€»æ˜¯åœ¨æ˜ŸæœŸä¸€ï¼Œä½ è·³è¿‡ä¸€æœˆçš„ç¬¬ä¸€å‘¨ï¼Œå› ä¸ºå¾ˆå¤šäººéƒ½åœ¨åº¦å‡ï¼Œè€Œ 2022 å¹´ç¬¬ä¸‰å­£åº¦çš„ç¬¬ä¸€ä¸ªæ˜ŸæœŸä¸€æ˜¯ 7 æœˆ 4 æ—¥ï¼Œæ‰€ä»¥é‚£å¿…é¡»æ¨è¿Ÿä¸€å‘¨ã€‚è¿™å¯¼è‡´äº†ä»¥ä¸‹çš„æ´¾å¯¹æ—¥æœŸï¼š\n\nparties &lt;- tibble(\n  q = 1:4,\n  party = ymd(c(\"2022-01-10\", \"2022-04-04\", \"2022-07-11\", \"2022-10-03\"))\n)\n\nç°åœ¨å‡è®¾ä½ æœ‰ä¸€å¼ å‘˜å·¥ç”Ÿæ—¥è¡¨ï¼š\n\nset.seed(123)\nemployees &lt;- tibble(\n  name = sample(babynames::babynames$name, 100),\n  birthday = ymd(\"2022-01-01\") + (sample(365, 100, replace = TRUE) - 1)\n)\nemployees\n#&gt; # A tibble: 100 Ã— 2\n#&gt;   name     birthday  \n#&gt;   &lt;chr&gt;    &lt;date&gt;    \n#&gt; 1 Kemba    2022-01-22\n#&gt; 2 Orean    2022-06-26\n#&gt; 3 Kirstyn  2022-02-11\n#&gt; 4 Amparo   2022-11-11\n#&gt; 5 Belen    2022-03-25\n#&gt; 6 Rayshaun 2022-01-11\n#&gt; # â„¹ 94 more rows\n\nå¯¹äºæ¯ä¸ªå‘˜å·¥ï¼Œæˆ‘ä»¬æƒ³æ‰¾åˆ°åœ¨ä»–ä»¬ç”Ÿæ—¥å‰ï¼ˆæˆ–ç”Ÿæ—¥å½“å¤©ï¼‰çš„æœ€åä¸€ä¸ªæ´¾å¯¹æ—¥æœŸã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªæ»šåŠ¨è¿æ¥æ¥è¡¨ç¤ºè¿™ä¸€ç‚¹ï¼š\n\nemployees |&gt; \n  left_join(parties, join_by(closest(birthday &gt;= party)))\n#&gt; # A tibble: 100 Ã— 4\n#&gt;   name     birthday       q party     \n#&gt;   &lt;chr&gt;    &lt;date&gt;     &lt;int&gt; &lt;date&gt;    \n#&gt; 1 Kemba    2022-01-22     1 2022-01-10\n#&gt; 2 Orean    2022-06-26     2 2022-04-04\n#&gt; 3 Kirstyn  2022-02-11     1 2022-01-10\n#&gt; 4 Amparo   2022-11-11     4 2022-10-03\n#&gt; 5 Belen    2022-03-25     1 2022-01-10\n#&gt; 6 Rayshaun 2022-01-11     1 2022-01-10\n#&gt; # â„¹ 94 more rows\n\nç„¶è€Œï¼Œè¿™ç§æ–¹æ³•æœ‰ä¸€ä¸ªé—®é¢˜ï¼šç”Ÿæ—¥åœ¨ 1 æœˆ 10 æ—¥ä¹‹å‰çš„å‘˜å·¥æ²¡æœ‰æ´¾å¯¹ï¼š\n\nemployees |&gt; \n  anti_join(parties, join_by(closest(birthday &gt;= party)))\n#&gt; # A tibble: 2 Ã— 2\n#&gt;   name   birthday  \n#&gt;   &lt;chr&gt;  &lt;date&gt;    \n#&gt; 1 Maks   2022-01-07\n#&gt; 2 Nalani 2022-01-04\n\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ä¸€ç§ä¸åŒçš„æ–¹å¼æ¥å¤„ç†é—®é¢˜ï¼Œå³ä½¿ç”¨é‡å è¿æ¥ã€‚\n\n19.5.4 é‡å è¿æ¥\né‡å è¿æ¥æä¾›äº†ä¸‰ä¸ªä½¿ç”¨ä¸ç­‰è¿æ¥æ¥ç®€åŒ–å¤„ç†åŒºé—´çš„è¾…åŠ©å‡½æ•°ï¼š\n\n\nbetween(x, y_lower, y_upper) æ˜¯ x &gt;= y_lower, x &lt;= y_upper çš„ç®€å†™ã€‚\n\nwithin(x_lower, x_upper, y_lower, y_upper) æ˜¯ x_lower &gt;= y_lower, x_upper &lt;= y_upper çš„ç®€å†™ã€‚\n\noverlaps(x_lower, x_upper, y_lower, y_upper) æ˜¯ x_lower &lt;= y_upper, x_upper &gt;= y_lower çš„ç®€å†™ã€‚\n\nè®©æˆ‘ä»¬ç»§ç»­ç”Ÿæ—¥çš„ä¾‹å­ï¼Œçœ‹çœ‹ä½ å¯èƒ½ä¼šå¦‚ä½•ä½¿ç”¨å®ƒä»¬ã€‚æˆ‘ä»¬ä¸Šé¢ä½¿ç”¨çš„ç­–ç•¥æœ‰ä¸€ä¸ªé—®é¢˜ï¼šåœ¨ 1 æœˆ 1-9 æ—¥çš„ç”Ÿæ—¥å‰æ²¡æœ‰æ´¾å¯¹ã€‚æ‰€ä»¥ï¼Œæ˜ç¡®æ¯ä¸ªæ´¾å¯¹è·¨è¶Šçš„æ—¥æœŸèŒƒå›´ï¼Œå¹¶ä¸ºé‚£äº›æ—©ç”Ÿçš„ç”Ÿæ—¥åšä¸€ä¸ªç‰¹æ®Šæƒ…å†µå¤„ç†å¯èƒ½ä¼šæ›´å¥½ï¼š\n\nparties &lt;- tibble(\n  q = 1:4,\n  party = ymd(c(\"2022-01-10\", \"2022-04-04\", \"2022-07-11\", \"2022-10-03\")),\n  start = ymd(c(\"2022-01-01\", \"2022-04-04\", \"2022-07-11\", \"2022-10-03\")),\n  end = ymd(c(\"2022-04-03\", \"2022-07-11\", \"2022-10-02\", \"2022-12-31\"))\n)\nparties\n#&gt; # A tibble: 4 Ã— 4\n#&gt;       q party      start      end       \n#&gt;   &lt;int&gt; &lt;date&gt;     &lt;date&gt;     &lt;date&gt;    \n#&gt; 1     1 2022-01-10 2022-01-01 2022-04-03\n#&gt; 2     2 2022-04-04 2022-04-04 2022-07-11\n#&gt; 3     3 2022-07-11 2022-07-11 2022-10-02\n#&gt; 4     4 2022-10-03 2022-10-03 2022-12-31\n\nHadley åœ¨æ•°æ®å½•å…¥æ–¹é¢éå¸¸ç³Ÿç³•ï¼Œæ‰€ä»¥ä»–è¿˜æƒ³æ£€æŸ¥æ´¾å¯¹æœŸé—´æ˜¯å¦æœ‰é‡å ã€‚ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨è‡ªè¿æ¥æ¥æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•å¼€å§‹-ç»“æŸåŒºé—´ä¸å¦ä¸€ä¸ªé‡å ï¼š\n\nparties |&gt; \n  inner_join(parties, join_by(overlaps(start, end, start, end), q &lt; q)) |&gt; \n  select(start.x, end.x, start.y, end.y)\n#&gt; # A tibble: 1 Ã— 4\n#&gt;   start.x    end.x      start.y    end.y     \n#&gt;   &lt;date&gt;     &lt;date&gt;     &lt;date&gt;     &lt;date&gt;    \n#&gt; 1 2022-04-04 2022-07-11 2022-07-11 2022-10-02\n\nå“å‘€ï¼Œæœ‰é‡å ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ç„¶åç»§ç»­ï¼š\n\nparties &lt;- tibble(\n  q = 1:4,\n  party = ymd(c(\"2022-01-10\", \"2022-04-04\", \"2022-07-11\", \"2022-10-03\")),\n  start = ymd(c(\"2022-01-01\", \"2022-04-04\", \"2022-07-11\", \"2022-10-03\")),\n  end = ymd(c(\"2022-04-03\", \"2022-07-10\", \"2022-10-02\", \"2022-12-31\"))\n)\n\nç°åœ¨æˆ‘ä»¬å¯ä»¥å°†æ¯ä¸ªå‘˜å·¥ä¸ä»–ä»¬çš„æ´¾å¯¹åŒ¹é…èµ·æ¥äº†ã€‚è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ unmatched = \"error\" çš„å¥½åœ°æ–¹ï¼Œå› ä¸ºæˆ‘ä»¬æƒ³å¿«é€Ÿå‘ç°æ˜¯å¦æœ‰ä»»ä½•å‘˜å·¥æ²¡æœ‰è¢«åˆ†é…åˆ°æ´¾å¯¹ã€‚\n\nemployees |&gt; \n  inner_join(parties, join_by(between(birthday, start, end)), unmatched = \"error\")\n#&gt; # A tibble: 100 Ã— 6\n#&gt;   name     birthday       q party      start      end       \n#&gt;   &lt;chr&gt;    &lt;date&gt;     &lt;int&gt; &lt;date&gt;     &lt;date&gt;     &lt;date&gt;    \n#&gt; 1 Kemba    2022-01-22     1 2022-01-10 2022-01-01 2022-04-03\n#&gt; 2 Orean    2022-06-26     2 2022-04-04 2022-04-04 2022-07-10\n#&gt; 3 Kirstyn  2022-02-11     1 2022-01-10 2022-01-01 2022-04-03\n#&gt; 4 Amparo   2022-11-11     4 2022-10-03 2022-10-03 2022-12-31\n#&gt; 5 Belen    2022-03-25     1 2022-01-10 2022-01-01 2022-04-03\n#&gt; 6 Rayshaun 2022-01-11     1 2022-01-10 2022-01-01 2022-04-03\n#&gt; # â„¹ 94 more rows\n\n\n19.5.5 ç»ƒä¹ \n\n\nä½ èƒ½è§£é‡Šä¸€ä¸‹åœ¨è¿™ä¸ªç­‰å€¼è¿æ¥ä¸­é”®å‘ç”Ÿäº†ä»€ä¹ˆå—ï¼Ÿä¸ºä»€ä¹ˆå®ƒä»¬ä¸åŒï¼Ÿ\n\nx |&gt; full_join(y, join_by(key == key))\n#&gt; # A tibble: 4 Ã— 3\n#&gt;     key val_x val_y\n#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;\n#&gt; 1     1 x1    y1   \n#&gt; 2     2 x2    y2   \n#&gt; 3     3 x3    &lt;NA&gt; \n#&gt; 4     4 &lt;NA&gt;  y3\n\nx |&gt; full_join(y, join_by(key == key), keep = TRUE)\n#&gt; # A tibble: 4 Ã— 4\n#&gt;   key.x val_x key.y val_y\n#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;\n#&gt; 1     1 x1        1 y1   \n#&gt; 2     2 x2        2 y2   \n#&gt; 3     3 x3       NA &lt;NA&gt; \n#&gt; 4    NA &lt;NA&gt;      4 y3\n\n\nåœ¨æŸ¥æ‰¾æ˜¯å¦æœ‰ä»»ä½•æ´¾å¯¹æœŸé—´ä¸å¦ä¸€ä¸ªæ´¾å¯¹æœŸé—´é‡å æ—¶ï¼Œæˆ‘ä»¬åœ¨ join_by() ä¸­ä½¿ç”¨äº† q &lt; qï¼Ÿä¸ºä»€ä¹ˆï¼Ÿå¦‚æœç§»é™¤è¿™ä¸ªä¸ç­‰å¼ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>19</span>Â  <span class='chapter-title'>è¿æ¥</span>"
    ]
  },
  {
    "objectID": "joins.html#æ€»ç»“",
    "href": "joins.html#æ€»ç»“",
    "title": "19Â  è¿æ¥",
    "section": "\n19.6 æ€»ç»“",
    "text": "19.6 æ€»ç»“\nåœ¨æœ¬ç« ä¸­ï¼Œä½ å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨å˜è¿æ¥å’Œè¿‡æ»¤è¿æ¥æ¥ç»„åˆæ¥è‡ªä¸€å¯¹æ•°æ®æ¡†çš„æ•°æ®ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œä½ å­¦ä¹ äº†å¦‚ä½•è¯†åˆ«é”®ï¼Œä»¥åŠä¸»é”®å’Œå¤–é”®ä¹‹é—´çš„åŒºåˆ«ã€‚ä½ ä¹Ÿç†è§£äº†è¿æ¥å¦‚ä½•å·¥ä½œä»¥åŠå¦‚ä½•è®¡ç®—è¾“å‡ºå°†æœ‰å¤šå°‘è¡Œã€‚æœ€åï¼Œä½ å¯¹éç­‰å€¼è¿æ¥çš„åŠ›é‡æœ‰äº†åˆæ­¥çš„äº†è§£ï¼Œå¹¶çœ‹åˆ°äº†ä¸€äº›æœ‰è¶£çš„ç”¨ä¾‹ã€‚\næœ¬ç« ç»“æŸäº†æœ¬ä¹¦çš„â€œè½¬æ¢â€éƒ¨åˆ†ï¼Œè¯¥éƒ¨åˆ†çš„é‡ç‚¹æ˜¯ä½ å¯ä»¥ç”¨äºå•ä¸ªåˆ—å’Œ tibble çš„å·¥å…·ã€‚ä½ å­¦ä¹ äº†ç”¨äºå¤„ç†é€»è¾‘å‘é‡ã€æ•°å­—å’Œå®Œæ•´è¡¨æ ¼çš„ dplyr å’ŒåŸºç¡€å‡½æ•°ï¼Œç”¨äºå¤„ç†å­—ç¬¦ä¸²çš„ stringr å‡½æ•°ï¼Œç”¨äºå¤„ç†æ—¥æœŸæ—¶é—´çš„ lubridate å‡½æ•°ï¼Œä»¥åŠç”¨äºå¤„ç†å› å­çš„ forcats å‡½æ•°ã€‚\nåœ¨æœ¬ä¹¦çš„ä¸‹ä¸€éƒ¨åˆ†ï¼Œä½ å°†å­¦ä¹ æ›´å¤šå…³äºå¦‚ä½•å°†å„ç§ç±»å‹çš„æ•°æ®ä»¥æ•´æ´çš„å½¢å¼å¯¼å…¥ R çš„çŸ¥è¯†ã€‚",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>19</span>Â  <span class='chapter-title'>è¿æ¥</span>"
    ]
  },
  {
    "objectID": "joins.html#footnotes",
    "href": "joins.html#footnotes",
    "title": "19Â  è¿æ¥",
    "section": "",
    "text": "è®°ä½ï¼Œåœ¨ RStudio ä¸­ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ View() æ¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚â†©ï¸\nè¿™å¹¶é 100% æ­£ç¡®ï¼Œä½†æ¯å½“ä¸æ˜¯è¿™æ ·æ—¶ä½ éƒ½ä¼šæ”¶åˆ°ä¸€ä¸ªè­¦å‘Šã€‚â†©ï¸",
    "crumbs": [
      "æ•°æ®è½¬æ¢",
      "<span class='chapter-number'>19</span>Â  <span class='chapter-title'>è¿æ¥</span>"
    ]
  },
  {
    "objectID": "import.html",
    "href": "import.html",
    "title": "å¯¼å…¥",
    "section": "",
    "text": "åœ¨æœ¬ä¹¦çš„è¿™ä¸€éƒ¨åˆ†ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•å°†æ›´å¹¿æ³›çš„æ•°æ®å¯¼å…¥ Rï¼Œä»¥åŠå¦‚ä½•å°†å…¶è½¬åŒ–ä¸ºå¯¹åˆ†ææœ‰ç”¨çš„å½¢å¼ã€‚æœ‰æ—¶ï¼Œè¿™åªæ˜¯è°ƒç”¨ç›¸åº”æ•°æ®å¯¼å…¥åŒ…ä¸­çš„ä¸€ä¸ªå‡½æ•°é‚£ä¹ˆç®€å•ã€‚ä½†åœ¨æ›´å¤æ‚çš„æƒ…å†µä¸‹ï¼Œä¸ºäº†å¾—åˆ°ä½ æ›´å–œæ¬¢ä½¿ç”¨çš„æ•´æ´çŸ©å½¢æ•°æ®ï¼Œå¯èƒ½éœ€è¦è¿›è¡Œæ•´ç†å’Œè½¬æ¢ã€‚\n\n\n\n\n\n\n\nFigureÂ 1: æ•°æ®å¯¼å…¥æ˜¯æ•°æ®ç§‘å­¦è¿‡ç¨‹çš„å¼€å§‹ï¼›æ²¡æœ‰æ•°æ®ä½ å°±æ— æ³•è¿›è¡Œæ•°æ®ç§‘å­¦ï¼\n\n\n\n\nåœ¨æœ¬ä¹¦çš„è¿™ä¸€éƒ¨åˆ†ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•è®¿é—®ä»¥ä¸‹åˆ—æ–¹å¼å­˜å‚¨çš„æ•°æ®ï¼š\n\nåœ¨ 20Â  ç”µå­è¡¨æ ¼ ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•ä» Excel ç”µå­è¡¨æ ¼å’Œè°·æ­Œè¡¨æ ¼ (Google Sheets) å¯¼å…¥æ•°æ®ã€‚\nåœ¨ 21Â  æ•°æ®åº“ ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•ä»æ•°æ®åº“ä¸­è·å–æ•°æ®å¹¶å¯¼å…¥ Rï¼ˆä½ è¿˜å°†å­¦åˆ°ä¸€ç‚¹å¦‚ä½•å°†æ•°æ®ä» R å¯¼å‡ºåˆ°æ•°æ®åº“ï¼‰ã€‚\nåœ¨ 22Â  Arrow ä¸­ï¼Œä½ å°†å­¦ä¹  Arrowï¼Œè¿™æ˜¯ä¸€ä¸ªå¤„ç†å†…å­˜å¤– (out-of-memory) æ•°æ®çš„å¼ºå¤§å·¥å…·ï¼Œç‰¹åˆ«æ˜¯å½“æ•°æ®å­˜å‚¨åœ¨ parquet æ ¼å¼ä¸­æ—¶ã€‚\nåœ¨ 23Â  å±‚çº§æ•°æ® ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•å¤„ç†å±‚çº§æ•°æ®ï¼ŒåŒ…æ‹¬ç”± JSON æ ¼å¼å­˜å‚¨çš„æ•°æ®äº§ç”Ÿçš„æ·±åº¦åµŒå¥—åˆ—è¡¨ã€‚\nåœ¨ 24Â  ç½‘ç»œæŠ“å– ä¸­ï¼Œä½ å°†å­¦ä¹ ç½‘é¡µâ€œæŠ“å–â€ (web scraping)ï¼Œå³ä»ç½‘é¡µä¸­æå–æ•°æ®çš„è‰ºæœ¯å’Œç§‘å­¦ã€‚\n\næˆ‘ä»¬åœ¨è¿™é‡Œæ²¡æœ‰è®¨è®ºä¸¤ä¸ªé‡è¦çš„ tidyverse åŒ…ï¼šhaven å’Œ xml2ã€‚å¦‚æœä½ æ­£åœ¨å¤„ç†æ¥è‡ª SPSSã€Stata å’Œ SAS æ–‡ä»¶çš„æ•°æ®ï¼Œè¯·æŸ¥çœ‹ haven åŒ…ï¼Œhttps://haven.tidyverse.orgã€‚å¦‚æœä½ æ­£åœ¨å¤„ç† XML æ•°æ®ï¼Œè¯·æŸ¥çœ‹ xml2 åŒ…ï¼Œhttps://xml2.r-lib.orgã€‚å¦åˆ™ï¼Œä½ éœ€è¦åšä¸€äº›ç ”ç©¶æ¥ç¡®å®šä½ éœ€è¦ä½¿ç”¨å“ªä¸ªåŒ…ï¼›è°·æ­Œæ˜¯ä½ çš„å¥½æœ‹å‹ ğŸ˜ƒã€‚",
    "crumbs": [
      "å¯¼å…¥"
    ]
  },
  {
    "objectID": "spreadsheets.html",
    "href": "spreadsheets.html",
    "title": "20Â  ç”µå­è¡¨æ ¼",
    "section": "",
    "text": "20.1 å¼•è¨€\nåœ¨ Chapter 7 ä¸­ï¼Œä½ å­¦ä¹ äº†å¦‚ä½•ä»åƒ .csv å’Œ .tsv è¿™æ ·çš„çº¯æ–‡æœ¬æ–‡ä»¶å¯¼å…¥æ•°æ®ã€‚ç°åœ¨æ˜¯æ—¶å€™å­¦ä¹ å¦‚ä½•ä»ç”µå­è¡¨æ ¼ä¸­è·å–æ•°æ®äº†ï¼Œæ— è®ºæ˜¯ Excel ç”µå­è¡¨æ ¼è¿˜æ˜¯è°·æ­Œè¡¨æ ¼ (Google Sheet)ã€‚è¿™å°†åœ¨ä½ äº Chapter 7 ä¸­å­¦åˆ°çš„è®¸å¤šçŸ¥è¯†çš„åŸºç¡€ä¸Šè¿›è¡Œï¼Œä½†æˆ‘ä»¬ä¹Ÿå°†è®¨è®ºå¤„ç†æ¥è‡ªç”µå­è¡¨æ ¼çš„æ•°æ®æ—¶éœ€è¦è€ƒè™‘çš„é¢å¤–å› ç´ å’Œå¤æ‚æ€§ã€‚\nå¦‚æœä½ æˆ–ä½ çš„åˆä½œè€…æ­£åœ¨ä½¿ç”¨ç”µå­è¡¨æ ¼æ¥ç»„ç»‡æ•°æ®ï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®é˜…è¯» Karl Broman å’Œ Kara Woo çš„è®ºæ–‡â€œç”µå­è¡¨æ ¼ä¸­çš„æ•°æ®ç»„ç»‡â€(Data Organization in Spreadsheets)ï¼šhttps://doi.org/10.1080/00031305.2017.1375989ã€‚è¿™ç¯‡è®ºæ–‡ä¸­æå‡ºçš„æœ€ä½³å®è·µå°†åœ¨ä½ å°†æ•°æ®ä»ç”µå­è¡¨æ ¼å¯¼å…¥ R è¿›è¡Œåˆ†æå’Œå¯è§†åŒ–æ—¶ä¸ºä½ çœå»å¾ˆå¤šéº»çƒ¦ã€‚",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>20</span>Â  <span class='chapter-title'>ç”µå­è¡¨æ ¼</span>"
    ]
  },
  {
    "objectID": "spreadsheets.html#excel",
    "href": "spreadsheets.html#excel",
    "title": "20Â  ç”µå­è¡¨æ ¼",
    "section": "\n20.2 Excel",
    "text": "20.2 Excel\nMicrosoft Excel æ˜¯ä¸€æ¬¾å¹¿æ³›ä½¿ç”¨çš„ç”µå­è¡¨æ ¼è½¯ä»¶ç¨‹åºï¼Œæ•°æ®åœ¨ç”µå­è¡¨æ ¼æ–‡ä»¶ä¸­çš„å·¥ä½œè¡¨ (worksheets) é‡Œè¿›è¡Œç»„ç»‡ã€‚\n\n20.2.1 å‰ææ¡ä»¶\nåœ¨æœ¬èŠ‚ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨ readxl åŒ…åœ¨ R ä¸­åŠ è½½æ¥è‡ª Excel ç”µå­è¡¨æ ¼çš„æ•°æ®ã€‚è¿™ä¸ªåŒ…ä¸æ˜¯ tidyverse çš„æ ¸å¿ƒåŒ…ï¼Œæ‰€ä»¥ä½ éœ€è¦æ˜¾å¼åœ°åŠ è½½å®ƒï¼Œä½†å½“ä½ å®‰è£… tidyverse åŒ…æ—¶å®ƒä¼šè‡ªåŠ¨è¢«å®‰è£…ã€‚ç¨åï¼Œæˆ‘ä»¬è¿˜å°†ä½¿ç”¨ writexl åŒ…ï¼Œå®ƒå…è®¸æˆ‘ä»¬åˆ›å»º Excel ç”µå­è¡¨æ ¼ã€‚\n\nlibrary(readxl)\nlibrary(tidyverse)\nlibrary(writexl)\n\n\n20.2.2 å…¥é—¨\nreadxl çš„å¤§éƒ¨åˆ†å‡½æ•°å…è®¸ä½ å°† Excel ç”µå­è¡¨æ ¼åŠ è½½åˆ° R ä¸­ï¼š\n\n\nread_xls() è¯»å– xls æ ¼å¼çš„ Excel æ–‡ä»¶ã€‚\n\nread_xlsx() è¯»å– xlsx æ ¼å¼çš„ Excel æ–‡ä»¶ã€‚\n\nread_excel() å¯ä»¥è¯»å– xls å’Œ xlsx ä¸¤ç§æ ¼å¼çš„æ–‡ä»¶ã€‚å®ƒä¼šæ ¹æ®è¾“å…¥æ¥çŒœæµ‹æ–‡ä»¶ç±»å‹ã€‚\n\nè¿™äº›å‡½æ•°çš„è¯­æ³•éƒ½ä¸æˆ‘ä»¬ä¹‹å‰ä»‹ç»çš„ç”¨äºè¯»å–å…¶ä»–ç±»å‹æ–‡ä»¶çš„å‡½æ•°ç±»ä¼¼ï¼Œä¾‹å¦‚ read_csv()ã€read_table() ç­‰ã€‚åœ¨æœ¬ç« çš„å…¶ä½™éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†é‡ç‚¹ä½¿ç”¨ read_excel()ã€‚\n\n20.2.3 è¯»å– Excel ç”µå­è¡¨æ ¼\nFigureÂ 20.1 å±•ç¤ºäº†æˆ‘ä»¬å³å°†è¯»å…¥ R çš„ç”µå­è¡¨æ ¼åœ¨ Excel ä¸­çš„æ ·å­ã€‚è¿™ä¸ªç”µå­è¡¨æ ¼å¯ä»¥ä» https://docs.google.com/spreadsheets/d/1V1nPp1tzOuutXFLb3G9Eyxi3qxeEhnOXUzL5_BcCQ0w/ ä¸‹è½½ä¸º Excel æ–‡ä»¶ã€‚\n\n\n\n\n\n\n\nFigureÂ 20.1: åœ¨ Excel ä¸­åä¸º students.xlsx çš„ç”µå­è¡¨æ ¼ã€‚\n\n\n\n\nread_excel() çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦è¯»å–çš„æ–‡ä»¶çš„è·¯å¾„ã€‚\n\nstudents &lt;- read_excel(\"data/students.xlsx\")\n\nread_excel() ä¼šå°†æ–‡ä»¶è¯»ä½œä¸€ä¸ª tibbleã€‚\n\nstudents\n#&gt; # A tibble: 6 Ã— 5\n#&gt;   `Student ID` `Full Name`      favourite.food     mealPlan            AGE  \n#&gt;          &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;chr&gt;               &lt;chr&gt;\n#&gt; 1            1 Sunil Huffmann   Strawberry yoghurt Lunch only          4    \n#&gt; 2            2 Barclay Lynn     French fries       Lunch only          5    \n#&gt; 3            3 Jayendra Lyne    N/A                Breakfast and lunch 7    \n#&gt; 4            4 Leon Rossini     Anchovies          Lunch only          &lt;NA&gt; \n#&gt; 5            5 Chidiegwu Dunkel Pizza              Breakfast and lunch five \n#&gt; 6            6 GÃ¼venÃ§ Attila    Ice cream          Lunch only          6\n\næ•°æ®ä¸­æœ‰å…­åå­¦ç”Ÿï¼Œæ¯åå­¦ç”Ÿæœ‰äº”ä¸ªå˜é‡ã€‚ç„¶è€Œï¼Œè¿™ä¸ªæ•°æ®é›†ä¸­æœ‰å‡ ä»¶äº‹æƒ…æˆ‘ä»¬å¯èƒ½æƒ³è¦å¤„ç†ï¼š\n\n\nåˆ—åå„å¼å„æ ·ï¼Œä¸ç»Ÿä¸€ã€‚ä½ å¯ä»¥æä¾›éµå¾ªä¸€è‡´æ ¼å¼çš„åˆ—åï¼›æˆ‘ä»¬æ¨èä½¿ç”¨ col_names å‚æ•°æ¥æŒ‡å®š snake_case (è›‡å½¢å‘½åæ³•) æ ¼å¼çš„åˆ—åã€‚\n\nread_excel(\n  \"data/students.xlsx\",\n  col_names = c(\"student_id\", \"full_name\", \"favourite_food\", \"meal_plan\", \"age\")\n)\n#&gt; # A tibble: 7 Ã— 5\n#&gt;   student_id full_name        favourite_food     meal_plan           age  \n#&gt;   &lt;chr&gt;      &lt;chr&gt;            &lt;chr&gt;              &lt;chr&gt;               &lt;chr&gt;\n#&gt; 1 Student ID Full Name        favourite.food     mealPlan            AGE  \n#&gt; 2 1          Sunil Huffmann   Strawberry yoghurt Lunch only          4    \n#&gt; 3 2          Barclay Lynn     French fries       Lunch only          5    \n#&gt; 4 3          Jayendra Lyne    N/A                Breakfast and lunch 7    \n#&gt; 5 4          Leon Rossini     Anchovies          Lunch only          &lt;NA&gt; \n#&gt; 6 5          Chidiegwu Dunkel Pizza              Breakfast and lunch five \n#&gt; 7 6          GÃ¼venÃ§ Attila    Ice cream          Lunch only          6\n\nä¸å¹¸çš„æ˜¯ï¼Œè¿™å¹¶æ²¡æœ‰å®Œå…¨è§£å†³é—®é¢˜ã€‚æˆ‘ä»¬ç°åœ¨æœ‰äº†æƒ³è¦çš„å˜é‡åï¼Œä½†ä¹‹å‰ä½œä¸ºæ ‡é¢˜è¡Œçš„é‚£ä¸€è¡Œç°åœ¨ä½œä¸ºç¬¬ä¸€ä¸ªè§‚æµ‹å€¼å‡ºç°åœ¨æ•°æ®ä¸­ã€‚ä½ å¯ä»¥ä½¿ç”¨ skip å‚æ•°æ˜ç¡®è·³è¿‡é‚£ä¸€è¡Œã€‚\n\nread_excel(\n  \"data/students.xlsx\",\n  col_names = c(\"student_id\", \"full_name\", \"favourite_food\", \"meal_plan\", \"age\"),\n  skip = 1\n)\n#&gt; # A tibble: 6 Ã— 5\n#&gt;   student_id full_name        favourite_food     meal_plan           age  \n#&gt;        &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;chr&gt;               &lt;chr&gt;\n#&gt; 1          1 Sunil Huffmann   Strawberry yoghurt Lunch only          4    \n#&gt; 2          2 Barclay Lynn     French fries       Lunch only          5    \n#&gt; 3          3 Jayendra Lyne    N/A                Breakfast and lunch 7    \n#&gt; 4          4 Leon Rossini     Anchovies          Lunch only          &lt;NA&gt; \n#&gt; 5          5 Chidiegwu Dunkel Pizza              Breakfast and lunch five \n#&gt; 6          6 GÃ¼venÃ§ Attila    Ice cream          Lunch only          6\n\n\n\nåœ¨ favourite_food åˆ—ä¸­ï¼Œå…¶ä¸­ä¸€ä¸ªè§‚æµ‹å€¼æ˜¯ N/Aï¼Œä»£è¡¨â€œä¸å¯ç”¨â€(not available)ï¼Œä½†å®ƒç›®å‰æ²¡æœ‰è¢«è¯†åˆ«ä¸º NAï¼ˆæ³¨æ„è¿™ä¸ª N/A å’Œåˆ—è¡¨ä¸­ç¬¬å››åå­¦ç”Ÿçš„å¹´é¾„ NA ä¹‹é—´çš„åŒºåˆ«ï¼‰ã€‚ä½ å¯ä»¥ä½¿ç”¨ na å‚æ•°æŒ‡å®šå“ªäº›å­—ç¬¦ä¸²åº”è¯¥è¢«è¯†åˆ«ä¸º NAã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰ \"\"ï¼ˆç©ºå­—ç¬¦ä¸²ï¼Œæˆ–è€…åœ¨ä»ç”µå­è¡¨æ ¼è¯»å–æ—¶ï¼Œæ˜¯ä¸€ä¸ªç©ºå•å…ƒæ ¼æˆ–å¸¦æœ‰å…¬å¼ =NA() çš„å•å…ƒæ ¼ï¼‰è¢«è¯†åˆ«ä¸º NAã€‚\n\nread_excel(\n  \"data/students.xlsx\",\n  col_names = c(\"student_id\", \"full_name\", \"favourite_food\", \"meal_plan\", \"age\"),\n  skip = 1,\n  na = c(\"\", \"N/A\")\n)\n#&gt; # A tibble: 6 Ã— 5\n#&gt;   student_id full_name        favourite_food     meal_plan           age  \n#&gt;        &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;chr&gt;               &lt;chr&gt;\n#&gt; 1          1 Sunil Huffmann   Strawberry yoghurt Lunch only          4    \n#&gt; 2          2 Barclay Lynn     French fries       Lunch only          5    \n#&gt; 3          3 Jayendra Lyne    &lt;NA&gt;               Breakfast and lunch 7    \n#&gt; 4          4 Leon Rossini     Anchovies          Lunch only          &lt;NA&gt; \n#&gt; 5          5 Chidiegwu Dunkel Pizza              Breakfast and lunch five \n#&gt; 6          6 GÃ¼venÃ§ Attila    Ice cream          Lunch only          6\n\n\n\nå¦ä¸€ä¸ªé—ç•™é—®é¢˜æ˜¯ age è¢«è¯»ä½œå­—ç¬¦å˜é‡ï¼Œä½†å®ƒçœŸçš„åº”è¯¥æ˜¯æ•°å€¼å‹ã€‚å°±åƒä½¿ç”¨ read_csv() åŠå…¶ç³»åˆ—å‡½æ•°ä»å¹³é¢æ–‡ä»¶è¯»å–æ•°æ®ä¸€æ ·ï¼Œä½ å¯ä»¥å‘ read_excel() æä¾›ä¸€ä¸ª col_types å‚æ•°ï¼Œå¹¶ä¸ºä½ è¯»å…¥çš„å˜é‡æŒ‡å®šåˆ—ç±»å‹ã€‚ä¸è¿‡ï¼Œè¯­æ³•æœ‰ç‚¹ä¸åŒã€‚ä½ çš„é€‰é¡¹æ˜¯ \"skip\"ã€\"guess\"ã€\"logical\"ã€\"numeric\"ã€\"date\"ã€\"text\" æˆ– \"list\"ã€‚\n\nread_excel(\n  \"data/students.xlsx\",\n  col_names = c(\"student_id\", \"full_name\", \"favourite_food\", \"meal_plan\", \"age\"),\n  skip = 1,\n  na = c(\"\", \"N/A\"),\n  col_types = c(\"numeric\", \"text\", \"text\", \"text\", \"numeric\")\n)\n#&gt; Warning: Expecting numeric in E6 / R6C5: got 'five'\n#&gt; # A tibble: 6 Ã— 5\n#&gt;   student_id full_name        favourite_food     meal_plan             age\n#&gt;        &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;chr&gt;               &lt;dbl&gt;\n#&gt; 1          1 Sunil Huffmann   Strawberry yoghurt Lunch only              4\n#&gt; 2          2 Barclay Lynn     French fries       Lunch only              5\n#&gt; 3          3 Jayendra Lyne    &lt;NA&gt;               Breakfast and lunch     7\n#&gt; 4          4 Leon Rossini     Anchovies          Lunch only             NA\n#&gt; 5          5 Chidiegwu Dunkel Pizza              Breakfast and lunch    NA\n#&gt; 6          6 GÃ¼venÃ§ Attila    Ice cream          Lunch only              6\n\nç„¶è€Œï¼Œè¿™ä¹Ÿæ²¡æœ‰äº§ç”Ÿæˆ‘ä»¬æœŸæœ›çš„ç»“æœã€‚é€šè¿‡æŒ‡å®š age åº”è¯¥æ˜¯æ•°å€¼å‹ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªå¸¦æœ‰éæ•°å€¼æ¡ç›®ï¼ˆå…¶å€¼ä¸º fiveï¼‰çš„å•å…ƒæ ¼å˜æˆäº† NAã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åº”è¯¥å°† age è¯»ä½œ \"text\"ï¼Œç„¶ååœ¨æ•°æ®åŠ è½½åˆ° R åå†è¿›è¡Œæ›´æ”¹ã€‚\n\nstudents &lt;- read_excel(\n  \"data/students.xlsx\",\n  col_names = c(\"student_id\", \"full_name\", \"favourite_food\", \"meal_plan\", \"age\"),\n  skip = 1,\n  na = c(\"\", \"N/A\"),\n  col_types = c(\"numeric\", \"text\", \"text\", \"text\", \"text\")\n)\n\nstudents &lt;- students |&gt;\n  mutate(\n    age = if_else(age == \"five\", \"5\", age),\n    age = parse_number(age)\n  )\n\nstudents\n#&gt; # A tibble: 6 Ã— 5\n#&gt;   student_id full_name        favourite_food     meal_plan             age\n#&gt;        &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;chr&gt;               &lt;dbl&gt;\n#&gt; 1          1 Sunil Huffmann   Strawberry yoghurt Lunch only              4\n#&gt; 2          2 Barclay Lynn     French fries       Lunch only              5\n#&gt; 3          3 Jayendra Lyne    &lt;NA&gt;               Breakfast and lunch     7\n#&gt; 4          4 Leon Rossini     Anchovies          Lunch only             NA\n#&gt; 5          5 Chidiegwu Dunkel Pizza              Breakfast and lunch     5\n#&gt; 6          6 GÃ¼venÃ§ Attila    Ice cream          Lunch only              6\n\n\n\næˆ‘ä»¬é€šè¿‡å¤šä¸ªæ­¥éª¤å’Œåå¤è¯•é”™æ‰å°†æ•°æ®åŠ è½½æˆæˆ‘ä»¬æƒ³è¦çš„ç¡®åˆ‡æ ¼å¼ï¼Œè¿™å¹¶ä¸æ„å¤–ã€‚æ•°æ®ç§‘å­¦æ˜¯ä¸€ä¸ªè¿­ä»£çš„è¿‡ç¨‹ï¼Œä¸ä»å…¶ä»–çº¯æ–‡æœ¬ã€çŸ©å½¢æ•°æ®æ–‡ä»¶è¯»å–æ•°æ®ç›¸æ¯”ï¼Œä»ç”µå­è¡¨æ ¼è¯»å–æ•°æ®æ—¶çš„è¿­ä»£è¿‡ç¨‹å¯èƒ½æ›´åŠ ç¹çï¼Œå› ä¸ºäººä»¬å€¾å‘äºå°†æ•°æ®è¾“å…¥ç”µå­è¡¨æ ¼ï¼Œå¹¶ä¸ä»…å°†å…¶ç”¨äºæ•°æ®å­˜å‚¨ï¼Œè¿˜ç”¨äºå…±äº«å’Œäº¤æµã€‚\né™¤éä½ åŠ è½½å¹¶æŸ¥çœ‹æ•°æ®ï¼Œå¦åˆ™æ²¡æœ‰åŠæ³•ç¡®åˆ‡çŸ¥é“æ•°æ®ä¼šæ˜¯ä»€ä¹ˆæ ·å­ã€‚å—¯ï¼Œå®é™…ä¸Šæœ‰ä¸€ç§æ–¹æ³•ã€‚ä½ å¯ä»¥åœ¨ Excel ä¸­æ‰“å¼€æ–‡ä»¶å¹¶çœ‹ä¸€çœ¼ã€‚å¦‚æœä½ æ‰“ç®—è¿™æ ·åšï¼Œæˆ‘ä»¬å»ºè®®å¤åˆ¶ä¸€ä»½ Excel æ–‡ä»¶è¿›è¡Œäº¤äº’å¼æ‰“å¼€å’Œæµè§ˆï¼ŒåŒæ—¶ä¿æŒåŸå§‹æ•°æ®æ–‡ä»¶ä¸å˜ï¼Œå¹¶ä»è¿™ä¸ªæœªåŠ¨è¿‡çš„æ–‡ä»¶ä¸­è¯»å–åˆ° Rã€‚è¿™å°†ç¡®ä¿ä½ åœ¨æ£€æŸ¥ç”µå­è¡¨æ ¼æ—¶ä¸ä¼šæ„å¤–è¦†ç›–ä»»ä½•å†…å®¹ã€‚ä½ ä¹Ÿä¸åº”è¯¥å®³æ€•åšæˆ‘ä»¬åœ¨è¿™é‡Œåšçš„äº‹æƒ…ï¼šåŠ è½½æ•°æ®ï¼Œçœ‹ä¸€çœ¼ï¼Œè°ƒæ•´ä½ çš„ä»£ç ï¼Œå†æ¬¡åŠ è½½ï¼Œé‡å¤è¿™ä¸ªè¿‡ç¨‹ç›´åˆ°ä½ å¯¹ç»“æœæ»¡æ„ä¸ºæ­¢ã€‚\n\n20.2.4 è¯»å–å·¥ä½œè¡¨\nç”µå­è¡¨æ ¼ä¸å¹³é¢æ–‡ä»¶çš„ä¸€ä¸ªé‡è¦åŒºåˆ«æ˜¯å¤šä¸ªå·¥ä½œè¡¨ (sheets) çš„æ¦‚å¿µã€‚FigureÂ 20.2 å±•ç¤ºäº†ä¸€ä¸ªåŒ…å«å¤šä¸ªå·¥ä½œè¡¨çš„ Excel ç”µå­è¡¨æ ¼ã€‚æ•°æ®æ¥è‡ª palmerpenguins åŒ…ï¼Œä½ å¯ä»¥ä» https://docs.google.com/spreadsheets/d/1aFu8lnD_g0yjF5O-K6SFgSEWiHPpgvFCF0NY9D6LXnY/ ä¸‹è½½è¿™ä¸ªç”µå­è¡¨æ ¼ä½œä¸º Excel æ–‡ä»¶ã€‚æ¯ä¸ªå·¥ä½œè¡¨åŒ…å«äº†æ¥è‡ªä¸åŒå²›å±¿çš„ä¼é¹…ä¿¡æ¯ï¼Œè¿™äº›å²›å±¿æ˜¯æ•°æ®æ”¶é›†çš„åœ°ç‚¹ã€‚\n\n\n\n\n\n\n\nFigureÂ 20.2: åœ¨ Excel ä¸­åä¸º penguins.xlsx çš„ç”µå­è¡¨æ ¼ï¼ŒåŒ…å«ä¸‰ä¸ªå·¥ä½œè¡¨ã€‚\n\n\n\n\nä½ å¯ä»¥ä½¿ç”¨ read_excel() ä¸­çš„ sheet å‚æ•°ä»ç”µå­è¡¨æ ¼ä¸­è¯»å–å•ä¸ªå·¥ä½œè¡¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åˆ°ç›®å‰ä¸ºæ­¢ä¸€ç›´ä¾èµ–çš„ï¼Œæ˜¯ç¬¬ä¸€ä¸ªå·¥ä½œè¡¨ã€‚\n\nread_excel(\"data/penguins.xlsx\", sheet = \"Torgersen Island\")\n#&gt; # A tibble: 52 Ã— 8\n#&gt;   species island    bill_length_mm     bill_depth_mm      flipper_length_mm\n#&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;              &lt;chr&gt;              &lt;chr&gt;            \n#&gt; 1 Adelie  Torgersen 39.1               18.7               181              \n#&gt; 2 Adelie  Torgersen 39.5               17.399999999999999 186              \n#&gt; 3 Adelie  Torgersen 40.299999999999997 18                 195              \n#&gt; 4 Adelie  Torgersen NA                 NA                 NA               \n#&gt; 5 Adelie  Torgersen 36.700000000000003 19.3               193              \n#&gt; 6 Adelie  Torgersen 39.299999999999997 20.6               190              \n#&gt; # â„¹ 46 more rows\n#&gt; # â„¹ 3 more variables: body_mass_g &lt;chr&gt;, sex &lt;chr&gt;, year &lt;dbl&gt;\n\nä¸€äº›çœ‹èµ·æ¥åŒ…å«æ•°å€¼æ•°æ®çš„å˜é‡è¢«è¯»ä½œå­—ç¬¦å‹ï¼Œå› ä¸ºå­—ç¬¦ä¸² \"NA\" æ²¡æœ‰è¢«è¯†åˆ«ä¸ºçœŸæ­£çš„ NAã€‚\n\npenguins_torgersen &lt;- read_excel(\"data/penguins.xlsx\", sheet = \"Torgersen Island\", na = \"NA\")\n\npenguins_torgersen\n#&gt; # A tibble: 52 Ã— 8\n#&gt;   species island    bill_length_mm bill_depth_mm flipper_length_mm\n#&gt;   &lt;chr&gt;   &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;\n#&gt; 1 Adelie  Torgersen           39.1          18.7               181\n#&gt; 2 Adelie  Torgersen           39.5          17.4               186\n#&gt; 3 Adelie  Torgersen           40.3          18                 195\n#&gt; 4 Adelie  Torgersen           NA            NA                  NA\n#&gt; 5 Adelie  Torgersen           36.7          19.3               193\n#&gt; 6 Adelie  Torgersen           39.3          20.6               190\n#&gt; # â„¹ 46 more rows\n#&gt; # â„¹ 3 more variables: body_mass_g &lt;dbl&gt;, sex &lt;chr&gt;, year &lt;dbl&gt;\n\næˆ–è€…ï¼Œä½ å¯ä»¥ä½¿ç”¨ excel_sheets() æ¥è·å– Excel ç”µå­è¡¨æ ¼ä¸­æ‰€æœ‰å·¥ä½œè¡¨çš„ä¿¡æ¯ï¼Œç„¶åè¯»å–ä½ æ„Ÿå…´è¶£çš„ä¸€ä¸ªæˆ–å¤šä¸ªã€‚\n\nexcel_sheets(\"data/penguins.xlsx\")\n#&gt; [1] \"Torgersen Island\" \"Biscoe Island\"    \"Dream Island\"\n\nä¸€æ—¦ä½ çŸ¥é“äº†å·¥ä½œè¡¨çš„åç§°ï¼Œä½ å°±å¯ä»¥ç”¨ read_excel() å•ç‹¬è¯»å–å®ƒä»¬ã€‚\n\npenguins_biscoe &lt;- read_excel(\"data/penguins.xlsx\", sheet = \"Biscoe Island\", na = \"NA\")\npenguins_dream  &lt;- read_excel(\"data/penguins.xlsx\", sheet = \"Dream Island\", na = \"NA\")\n\nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®Œæ•´çš„ä¼é¹…æ•°æ®é›†åˆ†å¸ƒåœ¨ç”µå­è¡¨æ ¼çš„ä¸‰ä¸ªå·¥ä½œè¡¨ä¸­ã€‚æ¯ä¸ªå·¥ä½œè¡¨æœ‰ç›¸åŒçš„åˆ—æ•°ï¼Œä½†è¡Œæ•°ä¸åŒã€‚\n\ndim(penguins_torgersen)\n#&gt; [1] 52  8\ndim(penguins_biscoe)\n#&gt; [1] 168   8\ndim(penguins_dream)\n#&gt; [1] 124   8\n\næˆ‘ä»¬å¯ä»¥ç”¨ bind_rows() å°†å®ƒä»¬åˆå¹¶åœ¨ä¸€èµ·ã€‚\n\npenguins &lt;- bind_rows(penguins_torgersen, penguins_biscoe, penguins_dream)\npenguins\n#&gt; # A tibble: 344 Ã— 8\n#&gt;   species island    bill_length_mm bill_depth_mm flipper_length_mm\n#&gt;   &lt;chr&gt;   &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;\n#&gt; 1 Adelie  Torgersen           39.1          18.7               181\n#&gt; 2 Adelie  Torgersen           39.5          17.4               186\n#&gt; 3 Adelie  Torgersen           40.3          18                 195\n#&gt; 4 Adelie  Torgersen           NA            NA                  NA\n#&gt; 5 Adelie  Torgersen           36.7          19.3               193\n#&gt; 6 Adelie  Torgersen           39.3          20.6               190\n#&gt; # â„¹ 338 more rows\n#&gt; # â„¹ 3 more variables: body_mass_g &lt;dbl&gt;, sex &lt;chr&gt;, year &lt;dbl&gt;\n\nåœ¨ Chapter 26 ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºå¦‚ä½•ç”¨ä¸é‡å¤çš„ä»£ç æ¥å®Œæˆè¿™ç±»ä»»åŠ¡ã€‚\n\n20.2.5 è¯»å–éƒ¨åˆ†å·¥ä½œè¡¨\nç”±äºè®¸å¤šäººä½¿ç”¨ Excel ç”µå­è¡¨æ ¼è¿›è¡Œå±•ç¤ºå’Œæ•°æ®å­˜å‚¨ï¼Œå› æ­¤åœ¨ç”µå­è¡¨æ ¼ä¸­å‘ç°ä¸å±äºä½ æƒ³è¯»å…¥ R çš„æ•°æ®çš„å•å…ƒæ ¼æ¡ç›®æ˜¯ç›¸å½“æ™®éçš„ã€‚FigureÂ 20.3 å±•ç¤ºäº†è¿™æ ·ä¸€ä¸ªç”µå­è¡¨æ ¼ï¼šåœ¨å·¥ä½œè¡¨çš„ä¸­é—´çœ‹èµ·æ¥åƒä¸€ä¸ªæ•°æ®æ¡†ï¼Œä½†åœ¨æ•°æ®ä¸Šæ–¹å’Œä¸‹æ–¹æœ‰æ— å…³çš„æ–‡æœ¬ã€‚\n\n\n\n\n\n\n\nFigureÂ 20.3: åœ¨ Excel ä¸­åä¸º deaths.xlsx çš„ç”µå­è¡¨æ ¼ã€‚\n\n\n\n\nè¿™ä¸ªç”µå­è¡¨æ ¼æ˜¯ readxl åŒ…ä¸­æä¾›çš„ç¤ºä¾‹ç”µå­è¡¨æ ¼ä¹‹ä¸€ã€‚ä½ å¯ä»¥ä½¿ç”¨ readxl_example() å‡½æ•°åœ¨ä½ ç³»ç»Ÿä¸Šè¯¥åŒ…å®‰è£…çš„ç›®å½•ä¸­æ‰¾åˆ°è¿™ä¸ªç”µå­è¡¨æ ¼ã€‚è¿™ä¸ªå‡½æ•°è¿”å›ç”µå­è¡¨æ ¼çš„è·¯å¾„ï¼Œä½ å¯ä»¥åƒå¾€å¸¸ä¸€æ ·åœ¨ read_excel() ä¸­ä½¿ç”¨å®ƒã€‚\n\ndeaths_path &lt;- readxl_example(\"deaths.xlsx\")\ndeaths &lt;- read_excel(deaths_path)\n#&gt; New names:\n#&gt; â€¢ `` -&gt; `...2`\n#&gt; â€¢ `` -&gt; `...3`\n#&gt; â€¢ `` -&gt; `...4`\n#&gt; â€¢ `` -&gt; `...5`\n#&gt; â€¢ `` -&gt; `...6`\ndeaths\n#&gt; # A tibble: 18 Ã— 6\n#&gt;   `Lots of people`    ...2       ...3  ...4     ...5          ...6           \n#&gt;   &lt;chr&gt;               &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;         &lt;chr&gt;          \n#&gt; 1 simply cannot resiâ€¦ &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;     &lt;NA&gt;          some notes     \n#&gt; 2 at                  the        top   &lt;NA&gt;     of            their spreadshâ€¦\n#&gt; 3 or                  merging    &lt;NA&gt;  &lt;NA&gt;     &lt;NA&gt;          cells          \n#&gt; 4 Name                Profession Age   Has kids Date of birth Date of death  \n#&gt; 5 David Bowie         musician   69    TRUE     17175         42379          \n#&gt; 6 Carrie Fisher       actor      60    TRUE     20749         42731          \n#&gt; # â„¹ 12 more rows\n\né¡¶éƒ¨ä¸‰è¡Œå’Œåº•éƒ¨å››è¡Œä¸å±äºæ•°æ®æ¡†ã€‚å¯ä»¥ä½¿ç”¨ skip å’Œ n_max å‚æ•°æ¥æ¶ˆé™¤è¿™äº›å¤šä½™çš„è¡Œï¼Œä½†æˆ‘ä»¬å»ºè®®ä½¿ç”¨å•å…ƒæ ¼èŒƒå›´ã€‚åœ¨ Excel ä¸­ï¼Œå·¦ä¸Šè§’çš„å•å…ƒæ ¼æ˜¯ A1ã€‚å½“ä½ å‘å³ç§»åŠ¨åˆ—æ—¶ï¼Œå•å…ƒæ ¼æ ‡ç­¾ä¼šæ²¿ç€å­—æ¯è¡¨å‘ä¸‹ç§»åŠ¨ï¼Œå³ B1ã€C1 ç­‰ã€‚å½“ä½ å‘ä¸‹ç§»åŠ¨ä¸€åˆ—æ—¶ï¼Œå•å…ƒæ ¼æ ‡ç­¾ä¸­çš„æ•°å­—ä¼šå¢åŠ ï¼Œå³ A2ã€A3 ç­‰ã€‚\nè¿™é‡Œæˆ‘ä»¬æƒ³è¦è¯»å…¥çš„æ•°æ®ä»å•å…ƒæ ¼ A5 å¼€å§‹ï¼Œåˆ°å•å…ƒæ ¼ F15 ç»“æŸã€‚åœ¨ç”µå­è¡¨æ ¼è¡¨ç¤ºæ³•ä¸­ï¼Œè¿™æ˜¯ A5:F15ï¼Œæˆ‘ä»¬å°†å…¶æä¾›ç»™ range å‚æ•°ï¼š\n\nread_excel(deaths_path, range = \"A5:F15\")\n#&gt; # A tibble: 10 Ã— 6\n#&gt;   Name          Profession   Age `Has kids` `Date of birth`    \n#&gt;   &lt;chr&gt;         &lt;chr&gt;      &lt;dbl&gt; &lt;lgl&gt;      &lt;dttm&gt;             \n#&gt; 1 David Bowie   musician      69 TRUE       1947-01-08 00:00:00\n#&gt; 2 Carrie Fisher actor         60 TRUE       1956-10-21 00:00:00\n#&gt; 3 Chuck Berry   musician      90 TRUE       1926-10-18 00:00:00\n#&gt; 4 Bill Paxton   actor         61 TRUE       1955-05-17 00:00:00\n#&gt; 5 Prince        musician      57 TRUE       1958-06-07 00:00:00\n#&gt; 6 Alan Rickman  actor         69 FALSE      1946-02-21 00:00:00\n#&gt; # â„¹ 4 more rows\n#&gt; # â„¹ 1 more variable: `Date of death` &lt;dttm&gt;\n\n\n20.2.6 æ•°æ®ç±»å‹\nåœ¨ CSV æ–‡ä»¶ä¸­ï¼Œæ‰€æœ‰å€¼éƒ½æ˜¯å­—ç¬¦ä¸²ã€‚è¿™å¹¶ä¸ç‰¹åˆ«å¿ å®äºæ•°æ®ï¼Œä½†å¾ˆç®€å•ï¼šä¸€åˆ‡éƒ½æ˜¯å­—ç¬¦ä¸²ã€‚\nExcel ç”µå­è¡¨æ ¼ä¸­çš„åº•å±‚æ•°æ®æ›´å¤æ‚ã€‚ä¸€ä¸ªå•å…ƒæ ¼å¯ä»¥æ˜¯ä»¥ä¸‹å››ç§ç±»å‹ä¹‹ä¸€ï¼š\n\nå¸ƒå°”å€¼ï¼Œå¦‚ TRUEã€FALSE æˆ– NAã€‚\næ•°å­—ï¼Œå¦‚ â€œ10â€ æˆ– â€œ10.5â€ã€‚\næ—¥æœŸæ—¶é—´ï¼Œä¹Ÿå¯ä»¥åŒ…å«æ—¶é—´ï¼Œå¦‚ â€œ11/1/21â€ æˆ– â€œ11/1/21 3:00 PMâ€ã€‚\næ–‡æœ¬å­—ç¬¦ä¸²ï¼Œå¦‚ â€œtenâ€ã€‚\n\nå¤„ç†ç”µå­è¡¨æ ¼æ•°æ®æ—¶ï¼Œé‡è¦çš„æ˜¯è¦è®°ä½ï¼Œåº•å±‚æ•°æ®å¯èƒ½ä¸ä½ åœ¨å•å…ƒæ ¼ä¸­çœ‹åˆ°çš„éå¸¸ä¸åŒã€‚ä¾‹å¦‚ï¼ŒExcel æ²¡æœ‰æ•´æ•°çš„æ¦‚å¿µã€‚æ‰€æœ‰æ•°å­—éƒ½å­˜å‚¨ä¸ºæµ®ç‚¹æ•°ï¼Œä½†ä½ å¯ä»¥é€‰æ‹©ä»¥å¯è‡ªå®šä¹‰çš„å°æ•°ä½æ•°æ¥æ˜¾ç¤ºæ•°æ®ã€‚åŒæ ·ï¼Œæ—¥æœŸå®é™…ä¸Šæ˜¯ä½œä¸ºæ•°å­—å­˜å‚¨çš„ï¼Œå…·ä½“æ¥è¯´æ˜¯ä» 1970 å¹´ 1 æœˆ 1 æ—¥ä»¥æ¥çš„ç§’æ•°ã€‚ä½ å¯ä»¥é€šè¿‡åœ¨ Excel ä¸­åº”ç”¨æ ¼å¼æ¥è‡ªå®šä¹‰æ—¥æœŸçš„æ˜¾ç¤ºæ–¹å¼ã€‚ä»¤äººå›°æƒ‘çš„æ˜¯ï¼Œä¹Ÿå¯èƒ½æœ‰ä¸€ä¸ªçœ‹èµ·æ¥åƒæ•°å­—ä½†å®é™…ä¸Šæ˜¯å­—ç¬¦ä¸²çš„ä¸œè¥¿ï¼ˆä¾‹å¦‚ï¼Œåœ¨ Excel å•å…ƒæ ¼ä¸­è¾“å…¥ '10ï¼‰ã€‚\nè¿™äº›åº•å±‚æ•°æ®å­˜å‚¨æ–¹å¼ä¸æ˜¾ç¤ºæ–¹å¼ä¹‹é—´çš„å·®å¼‚ï¼Œåœ¨æ•°æ®åŠ è½½åˆ° R æ—¶å¯èƒ½ä¼šå¯¼è‡´æ„å¤–ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œreadxl ä¼šçŒœæµ‹ç»™å®šåˆ—çš„æ•°æ®ç±»å‹ã€‚ä¸€ä¸ªæ¨èçš„å·¥ä½œæµç¨‹æ˜¯è®© readxl çŒœæµ‹åˆ—ç±»å‹ï¼Œç¡®è®¤ä½ å¯¹çŒœæµ‹çš„åˆ—ç±»å‹æ»¡æ„ï¼Œå¦‚æœä¸æ»¡æ„ï¼Œåˆ™è¿”å›å¹¶é‡æ–°å¯¼å…¥ï¼Œå¹¶æŒ‡å®š col_typesï¼Œå¦‚ Section 20.2.3 æ‰€ç¤ºã€‚\nå¦ä¸€ä¸ªæŒ‘æˆ˜æ˜¯å½“ä½ çš„ Excel ç”µå­è¡¨æ ¼ä¸­çš„ä¸€åˆ—æ··åˆäº†è¿™äº›ç±»å‹æ—¶ï¼Œä¾‹å¦‚ï¼Œä¸€äº›å•å…ƒæ ¼æ˜¯æ•°å€¼å‹ï¼Œä¸€äº›æ˜¯æ–‡æœ¬ï¼Œä¸€äº›æ˜¯æ—¥æœŸã€‚åœ¨å°†æ•°æ®å¯¼å…¥ R æ—¶ï¼Œreadxl å¿…é¡»åšå‡ºä¸€äº›å†³å®šã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥å°†è¯¥åˆ—çš„ç±»å‹è®¾ç½®ä¸º \"list\"ï¼Œè¿™ä¼šå°†è¯¥åˆ—åŠ è½½ä¸ºä¸€ä¸ªé•¿åº¦ä¸º 1 çš„å‘é‡åˆ—è¡¨ï¼Œå…¶ä¸­åˆ—è¡¨çš„æ¯ä¸ªå…ƒç´ çš„ç±»å‹éƒ½ä¼šè¢«çŒœæµ‹ã€‚\n\n\n\n\n\n\næœ‰æ—¶æ•°æ®ä»¥æ›´å¥‡ç‰¹çš„æ–¹å¼å­˜å‚¨ï¼Œæ¯”å¦‚å•å…ƒæ ¼èƒŒæ™¯çš„é¢œè‰²ï¼Œæˆ–è€…æ–‡æœ¬æ˜¯å¦åŠ ç²—ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½ä¼šå‘ç° tidyxl åŒ… å¾ˆæœ‰ç”¨ã€‚æœ‰å…³å¤„ç†æ¥è‡ª Excel çš„éè¡¨æ ¼æ•°æ®çš„ç­–ç•¥ï¼Œè¯·å‚è§ https://nacnudus.github.io/spreadsheet-munging-strategies/ã€‚\n\n\n\n\n20.2.7 å†™å…¥ Excel\nè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå°çš„æ•°æ®æ¡†ï¼Œç„¶åå¯ä»¥æŠŠå®ƒå†™å‡ºå»ã€‚æ³¨æ„ item æ˜¯ä¸€ä¸ªå› å­ï¼Œquantity æ˜¯ä¸€ä¸ªæ•´æ•°ã€‚\n\nbake_sale &lt;- tibble(\n  item       = factor(c(\"brownie\", \"cupcake\", \"cookie\")),\n  quantity = c(10, 5, 8)\n)\n\nbake_sale\n#&gt; # A tibble: 3 Ã— 2\n#&gt;   item    quantity\n#&gt;   &lt;fct&gt;      &lt;dbl&gt;\n#&gt; 1 brownie       10\n#&gt; 2 cupcake        5\n#&gt; 3 cookie         8\n\nä½ å¯ä»¥ä½¿ç”¨ writexl åŒ… ä¸­çš„ write_xlsx() å‡½æ•°å°†æ•°æ®å†™å›åˆ°ç£ç›˜ä¸Šçš„ Excel æ–‡ä»¶ä¸­ï¼š\n\nwrite_xlsx(bake_sale, path = \"data/bake-sale.xlsx\")\n\nFigureÂ 20.4 å±•ç¤ºäº†æ•°æ®åœ¨ Excel ä¸­çš„æ ·å­ã€‚æ³¨æ„åˆ—åè¢«åŒ…å«å¹¶åŠ ç²—äº†ã€‚å¯ä»¥é€šè¿‡å°† col_names å’Œ format_headers å‚æ•°è®¾ç½®ä¸º FALSE æ¥å…³é—­è¿™äº›åŠŸèƒ½ã€‚\n\n\n\n\n\n\n\nFigureÂ 20.4: åœ¨ Excel ä¸­åä¸º bake-sale.xlsx çš„ç”µå­è¡¨æ ¼ã€‚\n\n\n\n\nå°±åƒä» CSV è¯»å–ä¸€æ ·ï¼Œå½“æˆ‘ä»¬å†æ¬¡è¯»å…¥æ•°æ®æ—¶ï¼Œå…³äºæ•°æ®ç±»å‹çš„ä¿¡æ¯ä¼šä¸¢å¤±ã€‚è¿™ä¹Ÿä½¿å¾— Excel æ–‡ä»¶ä¸é€‚åˆç”¨äºç¼“å­˜ä¸­é—´ç»“æœã€‚æœ‰å…³æ›¿ä»£æ–¹æ¡ˆï¼Œè¯·å‚è§ Section 7.5ã€‚\n\nread_excel(\"data/bake-sale.xlsx\")\n#&gt; # A tibble: 3 Ã— 2\n#&gt;   item    quantity\n#&gt;   &lt;chr&gt;      &lt;dbl&gt;\n#&gt; 1 brownie       10\n#&gt; 2 cupcake        5\n#&gt; 3 cookie         8\n\n\n20.2.8 æ ¼å¼åŒ–è¾“å‡º\nwritexl åŒ…æ˜¯ä¸€ä¸ªç”¨äºå†™å…¥ç®€å• Excel ç”µå­è¡¨æ ¼çš„è½»é‡çº§è§£å†³æ–¹æ¡ˆï¼Œä½†å¦‚æœä½ å¯¹é¢å¤–çš„åŠŸèƒ½æ„Ÿå…´è¶£ï¼Œæ¯”å¦‚å†™å…¥ç”µå­è¡¨æ ¼ä¸­çš„å·¥ä½œè¡¨å’Œè®¾ç½®æ ·å¼ï¼Œä½ ä¼šæƒ³ä½¿ç”¨ openxlsx åŒ…ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œä¸ä¼šè¯¦ç»†ä»‹ç»ä½¿ç”¨è¿™ä¸ªåŒ…çš„ç»†èŠ‚ï¼Œä½†æˆ‘ä»¬å»ºè®®é˜…è¯» https://ycphs.github.io/openxlsx/articles/Formatting.htmlï¼Œé‚£é‡Œæœ‰å…³äºç”¨ openxlsx ä» R å†™å…¥ Excel çš„æ•°æ®çš„è¿›ä¸€æ­¥æ ¼å¼åŒ–åŠŸèƒ½çš„å¹¿æ³›è®¨è®ºã€‚\næ³¨æ„ï¼Œè¿™ä¸ªåŒ…ä¸æ˜¯ tidyverse çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥å‡½æ•°å’Œå·¥ä½œæµç¨‹å¯èƒ½ä¼šæ„Ÿè§‰ä¸ç†Ÿæ‚‰ã€‚ä¾‹å¦‚ï¼Œå‡½æ•°åæ˜¯é©¼å³°å¼å‘½åæ³• (camelCase)ï¼Œå¤šä¸ªå‡½æ•°ä¸èƒ½ç”¨ç®¡é“ç¬¦ç»„åˆï¼Œå¹¶ä¸”å‚æ•°çš„é¡ºåºå¯èƒ½ä¸ tidyverse ä¸­çš„ä¸åŒã€‚ç„¶è€Œï¼Œè¿™æ²¡å…³ç³»ã€‚éšç€ä½ çš„ R å­¦ä¹ å’Œä½¿ç”¨æ‰©å±•åˆ°æœ¬ä¹¦ä¹‹å¤–ï¼Œä½ ä¼šé‡åˆ°å„ç§ R åŒ…ä¸­ä½¿ç”¨çš„è®¸å¤šä¸åŒé£æ ¼ï¼Œä½ å¯èƒ½ä¼šç”¨å®ƒä»¬æ¥åœ¨ R ä¸­å®Œæˆç‰¹å®šçš„ç›®æ ‡ã€‚ç†Ÿæ‚‰ä¸€ä¸ªæ–°åŒ…çš„ç¼–ç é£æ ¼çš„ä¸€ä¸ªå¥½æ–¹æ³•æ˜¯è¿è¡Œå‡½æ•°æ–‡æ¡£ä¸­æä¾›çš„ç¤ºä¾‹ï¼Œä»¥æ„Ÿå—å…¶è¯­æ³•å’Œè¾“å‡ºæ ¼å¼ï¼Œä»¥åŠé˜…è¯»åŒ…å¯èƒ½é™„å¸¦çš„ä»»ä½•å°å“æ–‡ (vignettes)ã€‚\n\n20.2.9 ç»ƒä¹ \n\n\nåœ¨ä¸€ä¸ª Excel æ–‡ä»¶ä¸­ï¼Œåˆ›å»ºä»¥ä¸‹æ•°æ®é›†å¹¶å°†å…¶ä¿å­˜ä¸º survey.xlsxã€‚æˆ–è€…ï¼Œä½ å¯ä»¥ä»è¿™é‡Œä¸‹è½½ Excel æ–‡ä»¶ã€‚\n\n\n\n\n\n\n\n\nç„¶åï¼Œå°†å…¶è¯»å…¥ Rï¼Œå°† survey_id ä½œä¸ºå­—ç¬¦å˜é‡ï¼Œn_pets ä½œä¸ºæ•°å€¼å˜é‡ã€‚\n\n#&gt; # A tibble: 6 Ã— 2\n#&gt;   survey_id n_pets\n#&gt;   &lt;chr&gt;      &lt;dbl&gt;\n#&gt; 1 1              0\n#&gt; 2 2              1\n#&gt; 3 3             NA\n#&gt; 4 4              2\n#&gt; 5 5              2\n#&gt; 6 6             NA\n\n\n\nåœ¨å¦ä¸€ä¸ª Excel æ–‡ä»¶ä¸­ï¼Œåˆ›å»ºä»¥ä¸‹æ•°æ®é›†å¹¶å°†å…¶ä¿å­˜ä¸º roster.xlsxã€‚æˆ–è€…ï¼Œä½ å¯ä»¥ä»è¿™é‡Œä¸‹è½½ Excel æ–‡ä»¶ã€‚\n\n\n\n\n\n\n\n\nç„¶åï¼Œå°†å…¶è¯»å…¥ Rã€‚ç»“æœæ•°æ®æ¡†åº”å‘½åä¸º rosterï¼Œå¹¶åº”å¦‚ä¸‹æ‰€ç¤ºã€‚\n\n#&gt; # A tibble: 12 Ã— 3\n#&gt;    group subgroup    id\n#&gt;    &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;\n#&gt;  1     1 A            1\n#&gt;  2     1 A            2\n#&gt;  3     1 A            3\n#&gt;  4     1 B            4\n#&gt;  5     1 B            5\n#&gt;  6     1 B            6\n#&gt;  7     1 B            7\n#&gt;  8     2 A            8\n#&gt;  9     2 A            9\n#&gt; 10     2 B           10\n#&gt; 11     2 B           11\n#&gt; 12     2 B           12\n\n\n\nåœ¨ä¸€ä¸ªæ–°çš„ Excel æ–‡ä»¶ä¸­ï¼Œåˆ›å»ºä»¥ä¸‹æ•°æ®é›†å¹¶å°†å…¶ä¿å­˜ä¸º sales.xlsxã€‚æˆ–è€…ï¼Œä½ å¯ä»¥ä»è¿™é‡Œä¸‹è½½ Excel æ–‡ä»¶ã€‚\n\n\n\n\n\n\n\n\n\nè¯»å…¥ sales.xlsx å¹¶ä¿å­˜ä¸º salesã€‚æ•°æ®æ¡†åº”å¦‚ä¸‹æ‰€ç¤ºï¼Œåˆ—åä¸º id å’Œ nï¼Œæœ‰ 9 è¡Œã€‚\n\n\n#&gt; # A tibble: 9 Ã— 2\n#&gt;   id      n    \n#&gt;   &lt;chr&gt;   &lt;chr&gt;\n#&gt; 1 Brand 1 n    \n#&gt; 2 1234    8    \n#&gt; 3 8721    2    \n#&gt; 4 1822    3    \n#&gt; 5 Brand 2 n    \n#&gt; 6 3333    1    \n#&gt; 7 2156    3    \n#&gt; 8 3987    6    \n#&gt; 9 3216    5\n\n\nè¿›ä¸€æ­¥ä¿®æ”¹ salesï¼Œä½¿å…¶æˆä¸ºä»¥ä¸‹å…·æœ‰ä¸‰åˆ—ï¼ˆbrandã€id å’Œ nï¼‰å’Œ 7 è¡Œæ•°æ®çš„æ•´æ´æ ¼å¼ã€‚æ³¨æ„ id å’Œ n æ˜¯æ•°å€¼å‹ï¼Œbrand æ˜¯å­—ç¬¦å˜é‡ã€‚\n\n\n#&gt; # A tibble: 7 Ã— 3\n#&gt;   brand      id     n\n#&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1 Brand 1  1234     8\n#&gt; 2 Brand 1  8721     2\n#&gt; 3 Brand 1  1822     3\n#&gt; 4 Brand 2  3333     1\n#&gt; 5 Brand 2  2156     3\n#&gt; 6 Brand 2  3987     6\n#&gt; 7 Brand 2  3216     5\n\n\né‡æ–°åˆ›å»º bake_sale æ•°æ®æ¡†ï¼Œä½¿ç”¨ openxlsx åŒ…ä¸­çš„ write.xlsx() å‡½æ•°å°†å…¶å†™å‡ºåˆ°ä¸€ä¸ª Excel æ–‡ä»¶ä¸­ã€‚\nåœ¨ Chapter 7 ä¸­ï¼Œä½ å­¦ä¹ äº† janitor::clean_names() å‡½æ•°ï¼Œå¯ä»¥å°†åˆ—åè½¬æ¢ä¸ºè›‡å½¢å‘½åæ³• (snake case)ã€‚è¯»å…¥æˆ‘ä»¬æœ¬èŠ‚å‰é¢ä»‹ç»çš„ students.xlsx æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨æ­¤å‡½æ•°æ¥â€œæ¸…ç†â€åˆ—åã€‚\nå¦‚æœä½ å°è¯•ç”¨ read_xls() è¯»å–ä¸€ä¸ªæ‰©å±•åä¸º .xlsx çš„æ–‡ä»¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>20</span>Â  <span class='chapter-title'>ç”µå­è¡¨æ ¼</span>"
    ]
  },
  {
    "objectID": "spreadsheets.html#è°·æ­Œè¡¨æ ¼",
    "href": "spreadsheets.html#è°·æ­Œè¡¨æ ¼",
    "title": "20Â  ç”µå­è¡¨æ ¼",
    "section": "\n20.3 è°·æ­Œè¡¨æ ¼",
    "text": "20.3 è°·æ­Œè¡¨æ ¼\nè°·æ­Œè¡¨æ ¼ (Google Sheets) æ˜¯å¦ä¸€ä¸ªå¹¿æ³›ä½¿ç”¨çš„ç”µå­è¡¨æ ¼ç¨‹åºã€‚å®ƒæ˜¯å…è´¹ä¸”åŸºäºç½‘ç»œçš„ã€‚å°±åƒ Excel ä¸€æ ·ï¼Œåœ¨è°·æ­Œè¡¨æ ¼ä¸­ï¼Œæ•°æ®åœ¨ç”µå­è¡¨æ ¼æ–‡ä»¶ä¸­çš„å·¥ä½œè¡¨ (worksheets) é‡Œè¿›è¡Œç»„ç»‡ã€‚\n\n20.3.1 å‰ææ¡ä»¶\næœ¬èŠ‚ä¹Ÿå°†é‡ç‚¹ä»‹ç»ç”µå­è¡¨æ ¼ï¼Œä½†è¿™æ¬¡ä½ å°†ä½¿ç”¨ googlesheets4 åŒ…ä»è°·æ­Œè¡¨æ ¼ä¸­åŠ è½½æ•°æ®ã€‚è¿™ä¸ªåŒ…åŒæ ·ä¸æ˜¯ tidyverse çš„æ ¸å¿ƒåŒ…ï¼Œä½ éœ€è¦æ˜¾å¼åœ°åŠ è½½å®ƒã€‚\n\nlibrary(googlesheets4)\nlibrary(tidyverse)\n\nå…³äºåŒ…åçš„ä¸€ä¸ªå¿«é€Ÿè¯´æ˜ï¼šgooglesheets4 ä½¿ç”¨äº† Sheets API v4 æ¥æä¾›ä¸€ä¸ª R æ¥å£åˆ°è°·æ­Œè¡¨æ ¼ï¼Œå› æ­¤å¾—åã€‚\n\n20.3.2 å…¥é—¨\ngooglesheets4 åŒ…çš„ä¸»è¦å‡½æ•°æ˜¯ read_sheet()ï¼Œå®ƒä»ä¸€ä¸ª URL æˆ–æ–‡ä»¶ ID è¯»å–ä¸€ä¸ªè°·æ­Œè¡¨æ ¼ã€‚è¿™ä¸ªå‡½æ•°è¿˜æœ‰ä¸€ä¸ªåˆ«å range_read()ã€‚\nä½ ä¹Ÿå¯ä»¥ç”¨ gs4_create() åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„è¡¨æ ¼ï¼Œæˆ–è€…ç”¨ sheet_write() åŠå…¶ç³»åˆ—å‡½æ•°å†™å…¥ä¸€ä¸ªç°æœ‰çš„è¡¨æ ¼ã€‚\nåœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸ Excel éƒ¨åˆ†ç›¸åŒçš„æ•°æ®é›†ï¼Œä»¥çªå‡ºä» Excel å’Œè°·æ­Œè¡¨æ ¼è¯»å–æ•°æ®çš„å·¥ä½œæµç¨‹ä¹‹é—´çš„ç›¸ä¼¼ç‚¹å’Œä¸åŒç‚¹ã€‚readxl å’Œ googlesheets4 åŒ…éƒ½è¢«è®¾è®¡ä¸ºæ¨¡ä»¿ readr åŒ…çš„åŠŸèƒ½ï¼Œåè€…æä¾›äº†ä½ åœ¨ Chapter 7 ä¸­è§è¿‡çš„ read_csv() å‡½æ•°ã€‚å› æ­¤ï¼Œè®¸å¤šä»»åŠ¡å¯ä»¥é€šè¿‡ç®€å•åœ°å°† read_excel() æ›¿æ¢ä¸º read_sheet() æ¥å®Œæˆã€‚ç„¶è€Œï¼Œä½ ä¹Ÿä¼šçœ‹åˆ° Excel å’Œè°·æ­Œè¡¨æ ¼çš„è¡Œä¸ºå¹¶ä¸å®Œå…¨ç›¸åŒï¼Œå› æ­¤å…¶ä»–ä»»åŠ¡å¯èƒ½éœ€è¦å¯¹å‡½æ•°è°ƒç”¨è¿›è¡Œè¿›ä¸€æ­¥çš„æ›´æ–°ã€‚\n\n20.3.3 è¯»å–è°·æ­Œè¡¨æ ¼\nFigureÂ 20.5 å±•ç¤ºäº†æˆ‘ä»¬å³å°†è¯»å…¥ R çš„ç”µå­è¡¨æ ¼åœ¨è°·æ­Œè¡¨æ ¼ä¸­çš„æ ·å­ã€‚è¿™ä¸ FigureÂ 20.1 ä¸­çš„æ•°æ®é›†ç›¸åŒï¼Œåªæ˜¯å®ƒå­˜å‚¨åœ¨è°·æ­Œè¡¨æ ¼ä¸­è€Œä¸æ˜¯ Excel ä¸­ã€‚\n\n\n\n\n\n\n\nFigureÂ 20.5: åœ¨æµè§ˆå™¨çª—å£ä¸­åä¸º students çš„è°·æ­Œè¡¨æ ¼ã€‚\n\n\n\n\nread_sheet() çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦è¯»å–çš„æ–‡ä»¶çš„ URLï¼Œå®ƒè¿”å›ä¸€ä¸ª tibbleï¼š https://docs.google.com/spreadsheets/d/1V1nPp1tzOuutXFLb3G9Eyxi3qxeEhnOXUzL5_BcCQ0wã€‚ è¿™äº› URL ä¸å¥½ç”¨ï¼Œæ‰€ä»¥ä½ é€šå¸¸ä¼šæƒ³é€šè¿‡å…¶ ID æ¥è¯†åˆ«ä¸€ä¸ªè¡¨æ ¼ã€‚\n\ngs4_deauth()\n\n\nstudents_sheet_id &lt;- \"1V1nPp1tzOuutXFLb3G9Eyxi3qxeEhnOXUzL5_BcCQ0w\"\nstudents &lt;- read_sheet(students_sheet_id)\n#&gt; âœ” Reading from students.\n#&gt; âœ” Range Sheet1.\nstudents\n#&gt; # A tibble: 6 Ã— 5\n#&gt;   `Student ID` `Full Name`      favourite.food     mealPlan            AGE   \n#&gt;          &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;chr&gt;               &lt;list&gt;\n#&gt; 1            1 Sunil Huffmann   Strawberry yoghurt Lunch only          &lt;dbl&gt; \n#&gt; 2            2 Barclay Lynn     French fries       Lunch only          &lt;dbl&gt; \n#&gt; 3            3 Jayendra Lyne    N/A                Breakfast and lunch &lt;dbl&gt; \n#&gt; 4            4 Leon Rossini     Anchovies          Lunch only          &lt;NULL&gt;\n#&gt; 5            5 Chidiegwu Dunkel Pizza              Breakfast and lunch &lt;chr&gt; \n#&gt; 6            6 GÃ¼venÃ§ Attila    Ice cream          Lunch only          &lt;dbl&gt;\n\nå°±åƒæˆ‘ä»¬å¯¹ read_excel() åšçš„é‚£æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å‘ read_sheet() æä¾›åˆ—åã€NA å­—ç¬¦ä¸²å’Œåˆ—ç±»å‹ã€‚\n\nstudents &lt;- read_sheet(\n  students_sheet_id,\n  col_names = c(\"student_id\", \"full_name\", \"favourite_food\", \"meal_plan\", \"age\"),\n  skip = 1,\n  na = c(\"\", \"N/A\"),\n  col_types = \"dcccc\"\n)\n#&gt; âœ” Reading from students.\n#&gt; âœ” Range 2:10000000.\n\nstudents\n#&gt; # A tibble: 6 Ã— 5\n#&gt;   student_id full_name        favourite_food     meal_plan           age  \n#&gt;        &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;chr&gt;               &lt;chr&gt;\n#&gt; 1          1 Sunil Huffmann   Strawberry yoghurt Lunch only          4    \n#&gt; 2          2 Barclay Lynn     French fries       Lunch only          5    \n#&gt; 3          3 Jayendra Lyne    &lt;NA&gt;               Breakfast and lunch 7    \n#&gt; 4          4 Leon Rossini     Anchovies          Lunch only          &lt;NA&gt; \n#&gt; 5          5 Chidiegwu Dunkel Pizza              Breakfast and lunch five \n#&gt; 6          6 GÃ¼venÃ§ Attila    Ice cream          Lunch only          6\n\næ³¨æ„ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œå®šä¹‰åˆ—ç±»å‹çš„æ–¹å¼ç•¥æœ‰ä¸åŒï¼Œä½¿ç”¨äº†çŸ­ä»£ç ã€‚ä¾‹å¦‚ï¼Œâ€œdccccâ€ ä»£è¡¨ â€œdouble, character, character, character, characterâ€ã€‚\nä¹Ÿå¯ä»¥ä»è°·æ­Œè¡¨æ ¼ä¸­è¯»å–å•ä¸ªå·¥ä½œè¡¨ã€‚è®©æˆ‘ä»¬ä»ä¼é¹…è°·æ­Œè¡¨æ ¼ä¸­è¯»å– â€œTorgersen Islandâ€ å·¥ä½œè¡¨ï¼š\n\npenguins_sheet_id &lt;- \"1aFu8lnD_g0yjF5O-K6SFgSEWiHPpgvFCF0NY9D6LXnY\"\nread_sheet(penguins_sheet_id, sheet = \"Torgersen Island\")\n#&gt; âœ” Reading from penguins.\n#&gt; âœ” Range ''Torgersen Island''.\n#&gt; # A tibble: 52 Ã— 8\n#&gt;   species island    bill_length_mm bill_depth_mm flipper_length_mm\n#&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;list&gt;         &lt;list&gt;        &lt;list&gt;           \n#&gt; 1 Adelie  Torgersen &lt;dbl [1]&gt;      &lt;dbl [1]&gt;     &lt;dbl [1]&gt;        \n#&gt; 2 Adelie  Torgersen &lt;dbl [1]&gt;      &lt;dbl [1]&gt;     &lt;dbl [1]&gt;        \n#&gt; 3 Adelie  Torgersen &lt;dbl [1]&gt;      &lt;dbl [1]&gt;     &lt;dbl [1]&gt;        \n#&gt; 4 Adelie  Torgersen &lt;chr [1]&gt;      &lt;chr [1]&gt;     &lt;chr [1]&gt;        \n#&gt; 5 Adelie  Torgersen &lt;dbl [1]&gt;      &lt;dbl [1]&gt;     &lt;dbl [1]&gt;        \n#&gt; 6 Adelie  Torgersen &lt;dbl [1]&gt;      &lt;dbl [1]&gt;     &lt;dbl [1]&gt;        \n#&gt; # â„¹ 46 more rows\n#&gt; # â„¹ 3 more variables: body_mass_g &lt;list&gt;, sex &lt;chr&gt;, year &lt;dbl&gt;\n\nä½ å¯ä»¥ä½¿ç”¨ sheet_names() è·å–ä¸€ä¸ªè°·æ­Œè¡¨æ ¼ä¸­æ‰€æœ‰å·¥ä½œè¡¨çš„åˆ—è¡¨ï¼š\n\nsheet_names(penguins_sheet_id)\n#&gt; [1] \"Torgersen Island\" \"Biscoe Island\"    \"Dream Island\"\n\næœ€åï¼Œå°±åƒä½¿ç”¨ read_excel() ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ read_sheet() ä¸­å®šä¹‰ä¸€ä¸ª range æ¥è¯»å–è°·æ­Œè¡¨æ ¼çš„ä¸€éƒ¨åˆ†ã€‚æ³¨æ„ï¼Œæˆ‘ä»¬ä¸‹é¢ä¹Ÿä½¿ç”¨äº† gs4_example() å‡½æ•°æ¥å®šä½ googlesheets4 åŒ…é™„å¸¦çš„ä¸€ä¸ªç¤ºä¾‹è°·æ­Œè¡¨æ ¼ã€‚\n\ndeaths_url &lt;- gs4_example(\"deaths\")\ndeaths &lt;- read_sheet(deaths_url, range = \"A5:F15\")\n#&gt; âœ” Reading from deaths.\n#&gt; âœ” Range A5:F15.\ndeaths\n#&gt; # A tibble: 10 Ã— 6\n#&gt;   Name          Profession   Age `Has kids` `Date of birth`    \n#&gt;   &lt;chr&gt;         &lt;chr&gt;      &lt;dbl&gt; &lt;lgl&gt;      &lt;dttm&gt;             \n#&gt; 1 David Bowie   musician      69 TRUE       1947-01-08 00:00:00\n#&gt; 2 Carrie Fisher actor         60 TRUE       1956-10-21 00:00:00\n#&gt; 3 Chuck Berry   musician      90 TRUE       1926-10-18 00:00:00\n#&gt; 4 Bill Paxton   actor         61 TRUE       1955-05-17 00:00:00\n#&gt; 5 Prince        musician      57 TRUE       1958-06-07 00:00:00\n#&gt; 6 Alan Rickman  actor         69 FALSE      1946-02-21 00:00:00\n#&gt; # â„¹ 4 more rows\n#&gt; # â„¹ 1 more variable: `Date of death` &lt;dttm&gt;\n\n\n20.3.4 å†™å…¥è°·æ­Œè¡¨æ ¼\nä½ å¯ä»¥ä½¿ç”¨ write_sheet() ä» R å†™å…¥è°·æ­Œè¡¨æ ¼ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦å†™å…¥çš„æ•°æ®æ¡†ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦å†™å…¥çš„è°·æ­Œè¡¨æ ¼çš„åç§°ï¼ˆæˆ–å…¶ä»–æ ‡è¯†ç¬¦ï¼‰ï¼š\n\nwrite_sheet(bake_sale, ss = \"bake-sale\")\n\nå¦‚æœä½ æƒ³å°†æ•°æ®å†™å…¥è°·æ­Œè¡¨æ ¼ä¸­çš„ç‰¹å®šï¼ˆå·¥ä½œï¼‰è¡¨ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ sheet å‚æ•°æ¥æŒ‡å®šã€‚\n\nwrite_sheet(bake_sale, ss = \"bake-sale\", sheet = \"Sales\")\n\n\n20.3.5 èº«ä»½éªŒè¯\nè™½ç„¶ä½ å¯ä»¥ä»æœªç»èº«ä»½éªŒè¯çš„å…¬å…±è°·æ­Œè¡¨æ ¼ä¸­è¯»å–æ•°æ®ï¼Œå¹¶ä½¿ç”¨ gs4_deauth()ï¼Œä½†è¯»å–ç§æœ‰è¡¨æ ¼æˆ–å†™å…¥è¡¨æ ¼éœ€è¦è¿›è¡Œèº«ä»½éªŒè¯ï¼Œä»¥ä¾¿ googlesheets4 å¯ä»¥æŸ¥çœ‹å’Œç®¡ç†ä½ çš„è°·æ­Œè¡¨æ ¼ã€‚\nå½“ä½ å°è¯•è¯»å–ä¸€ä¸ªéœ€è¦èº«ä»½éªŒè¯çš„è¡¨æ ¼æ—¶ï¼Œgooglesheets4 ä¼šå°†ä½ å¼•å¯¼åˆ°ä¸€ä¸ªç½‘é¡µæµè§ˆå™¨ï¼Œæç¤ºä½ ç™»å½•ä½ çš„è°·æ­Œè´¦æˆ·å¹¶æˆæƒå…¶ä»£è¡¨ä½ æ“ä½œè°·æ­Œè¡¨æ ¼ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æƒ³æŒ‡å®šä¸€ä¸ªç‰¹å®šçš„è°·æ­Œè´¦æˆ·ã€èº«ä»½éªŒè¯èŒƒå›´ç­‰ï¼Œä½ å¯ä»¥ä½¿ç”¨ gs4_auth() æ¥å®ç°ï¼Œä¾‹å¦‚ï¼Œgs4_auth(email = \"mine@example.com\")ï¼Œè¿™å°†å¼ºåˆ¶ä½¿ç”¨ä¸ç‰¹å®šç”µå­é‚®ä»¶å…³è”çš„ä»¤ç‰Œã€‚æœ‰å…³è¿›ä¸€æ­¥çš„èº«ä»½éªŒè¯ç»†èŠ‚ï¼Œæˆ‘ä»¬å»ºè®®é˜…è¯» googlesheets4 çš„ auth å°å“æ–‡æ–‡æ¡£ï¼šhttps://googlesheets4.tidyverse.org/articles/auth.htmlã€‚\n\n20.3.6 ç»ƒä¹ \n\nä» Excel å’Œè°·æ­Œè¡¨æ ¼ä¸­è¯»å–æœ¬ç« æ—©äº›æ—¶å€™çš„ students æ•°æ®é›†ï¼Œä¸å‘ read_excel() å’Œ read_sheet() å‡½æ•°æä¾›ä»»ä½•é¢å¤–å‚æ•°ã€‚ç»“æœåœ¨ R ä¸­çš„æ•°æ®æ¡†å®Œå…¨ç›¸åŒå—ï¼Ÿå¦‚æœä¸æ˜¯ï¼Œå®ƒä»¬æœ‰ä½•ä¸åŒï¼Ÿ\nä» https://pos.it/r4ds-survey è¯»å–åä¸º survey çš„è°·æ­Œè¡¨æ ¼ï¼Œå°† survey_id ä½œä¸ºå­—ç¬¦å˜é‡ï¼Œn_pets ä½œä¸ºæ•°å€¼å˜é‡ã€‚\n\nä» https://pos.it/r4ds-roster è¯»å–åä¸º roster çš„è°·æ­Œè¡¨æ ¼ã€‚ç»“æœæ•°æ®æ¡†åº”å‘½åä¸º rosterï¼Œå¹¶åº”å¦‚ä¸‹æ‰€ç¤ºã€‚\n\n#&gt; # A tibble: 12 Ã— 3\n#&gt;    group subgroup    id\n#&gt;    &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;\n#&gt;  1     1 A            1\n#&gt;  2     1 A            2\n#&gt;  3     1 A            3\n#&gt;  4     1 B            4\n#&gt;  5     1 B            5\n#&gt;  6     1 B            6\n#&gt;  7     1 B            7\n#&gt;  8     2 A            8\n#&gt;  9     2 A            9\n#&gt; 10     2 B           10\n#&gt; 11     2 B           11\n#&gt; 12     2 B           12",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>20</span>Â  <span class='chapter-title'>ç”µå­è¡¨æ ¼</span>"
    ]
  },
  {
    "objectID": "spreadsheets.html#æ€»ç»“",
    "href": "spreadsheets.html#æ€»ç»“",
    "title": "20Â  ç”µå­è¡¨æ ¼",
    "section": "\n20.4 æ€»ç»“",
    "text": "20.4 æ€»ç»“\nMicrosoft Excel å’Œè°·æ­Œè¡¨æ ¼æ˜¯ä¸¤ç§æœ€æµè¡Œçš„ç”µå­è¡¨æ ¼ç³»ç»Ÿã€‚èƒ½å¤Ÿç›´æ¥ä» R ä¸­ä¸å­˜å‚¨åœ¨ Excel å’Œè°·æ­Œè¡¨æ ¼æ–‡ä»¶ä¸­çš„æ•°æ®è¿›è¡Œäº¤äº’æ˜¯ä¸€é¡¹è¶…èƒ½åŠ›ï¼åœ¨æœ¬ç« ä¸­ï¼Œä½ å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨ readxl åŒ…ä¸­çš„ read_excel() ä» Excel çš„ç”µå­è¡¨æ ¼ä¸­è¯»å–æ•°æ®åˆ° Rï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ googlesheets4 åŒ…ä¸­çš„ read_sheet() ä»è°·æ­Œè¡¨æ ¼ä¸­è¯»å–æ•°æ®ã€‚è¿™äº›å‡½æ•°çš„å·¥ä½œæ–¹å¼éå¸¸ç›¸ä¼¼ï¼Œå¹¶ä¸”æœ‰ç±»ä¼¼çš„å‚æ•°ç”¨äºæŒ‡å®šåˆ—åã€NA å­—ç¬¦ä¸²ã€åœ¨è¯»å–æ–‡ä»¶æ—¶è·³è¿‡é¡¶éƒ¨çš„è¡Œç­‰ã€‚æ­¤å¤–ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°éƒ½ä½¿å¾—å¯ä»¥ä»ä¸€ä¸ªç”µå­è¡¨æ ¼ä¸­è¯»å–å•ä¸ªå·¥ä½œè¡¨ã€‚\nå¦ä¸€æ–¹é¢ï¼Œå†™å…¥ Excel æ–‡ä»¶éœ€è¦ä¸€ä¸ªä¸åŒçš„åŒ…å’Œå‡½æ•° (writexl::write_xlsx())ï¼Œè€Œä½ å¯ä»¥ä½¿ç”¨ googlesheets4 åŒ…ä¸­çš„ write_sheet() æ¥å†™å…¥è°·æ­Œè¡¨æ ¼ã€‚\nåœ¨ä¸‹ä¸€ç« ä¸­ï¼Œä½ å°†å­¦ä¹ ä¸€ä¸ªä¸åŒçš„æ•°æ®æºä»¥åŠå¦‚ä½•ä»è¯¥æºè¯»å–æ•°æ®åˆ° Rï¼šæ•°æ®åº“ã€‚",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>20</span>Â  <span class='chapter-title'>ç”µå­è¡¨æ ¼</span>"
    ]
  },
  {
    "objectID": "databases.html",
    "href": "databases.html",
    "title": "21Â  æ•°æ®åº“",
    "section": "",
    "text": "21.1 å¼•è¨€\nå¤§é‡çš„æ•°æ®å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œå› æ­¤äº†è§£å¦‚ä½•è®¿é—®è¿™äº›æ•°æ®è‡³å…³é‡è¦ã€‚æœ‰æ—¶ä½ å¯ä»¥è¯·äººä¸ºä½ ä¸‹è½½ä¸€ä¸ªå¿«ç…§åˆ° .csv æ–‡ä»¶ä¸­ï¼Œä½†è¿™å¾ˆå¿«å°±ä¼šå˜å¾—ç—›è‹¦ï¼šæ¯å½“ä½ éœ€è¦åšä¸€æ¬¡æ›´æ”¹ï¼Œä½ å°±å¿…é¡»ä¸å¦ä¸€ä¸ªäººæ²Ÿé€šã€‚ä½ å¸Œæœ›èƒ½å¤Ÿç›´æ¥è®¿é—®æ•°æ®åº“ï¼Œåœ¨éœ€è¦æ—¶è·å–æ‰€éœ€çš„æ•°æ®ã€‚\nåœ¨æœ¬ç« ä¸­ï¼Œä½ å°†é¦–å…ˆå­¦ä¹  DBI åŒ…çš„åŸºç¡€çŸ¥è¯†ï¼šå¦‚ä½•ä½¿ç”¨å®ƒè¿æ¥åˆ°æ•°æ®åº“ï¼Œç„¶åç”¨ SQL1 æŸ¥è¯¢æ£€ç´¢æ•°æ®ã€‚SQLï¼Œå³ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ (structured query language) çš„ç¼©å†™ï¼Œæ˜¯æ•°æ®åº“çš„é€šç”¨è¯­è¨€ï¼Œä¹Ÿæ˜¯æ‰€æœ‰æ•°æ®ç§‘å­¦å®¶éœ€è¦å­¦ä¹ çš„ä¸€é—¨é‡è¦è¯­è¨€ã€‚è¯è™½å¦‚æ­¤ï¼Œæˆ‘ä»¬ä¸ä¼šä» SQL å¼€å§‹ï¼Œè€Œæ˜¯ä¼šæ•™ä½  dbplyrï¼Œå®ƒå¯ä»¥å°†ä½ çš„ dplyr ä»£ç ç¿»è¯‘æˆ SQLã€‚æˆ‘ä»¬å°†ä»¥æ­¤ä¸ºé€”å¾„ï¼Œæ•™ä½ ä¸€äº› SQL æœ€é‡è¦çš„ç‰¹æ€§ã€‚åœ¨æœ¬ç« ç»“æŸæ—¶ï¼Œä½ ä¸ä¼šæˆä¸º SQL å¤§å¸ˆï¼Œä½†ä½ å°†èƒ½å¤Ÿè¯†åˆ«æœ€é‡è¦çš„ç»„ä»¶å¹¶ç†è§£å®ƒä»¬çš„ä½œç”¨ã€‚",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>21</span>Â  <span class='chapter-title'>æ•°æ®åº“</span>"
    ]
  },
  {
    "objectID": "databases.html#å¼•è¨€",
    "href": "databases.html#å¼•è¨€",
    "title": "21Â  æ•°æ®åº“",
    "section": "",
    "text": "21.1.1 å‰ææ¡ä»¶\nåœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç» DBI å’Œ dbplyrã€‚DBI æ˜¯ä¸€ä¸ªåº•å±‚æ¥å£ï¼Œç”¨äºè¿æ¥æ•°æ®åº“å’Œæ‰§è¡Œ SQLï¼›dbplyr æ˜¯ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œå®ƒå°†ä½ çš„ dplyr ä»£ç ç¿»è¯‘æˆ SQL æŸ¥è¯¢ï¼Œç„¶åç”¨ DBI æ‰§è¡Œå®ƒä»¬ã€‚\n\nlibrary(DBI)\nlibrary(dbplyr)\nlibrary(tidyverse)",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>21</span>Â  <span class='chapter-title'>æ•°æ®åº“</span>"
    ]
  },
  {
    "objectID": "databases.html#æ•°æ®åº“åŸºç¡€",
    "href": "databases.html#æ•°æ®åº“åŸºç¡€",
    "title": "21Â  æ•°æ®åº“",
    "section": "\n21.2 æ•°æ®åº“åŸºç¡€",
    "text": "21.2 æ•°æ®åº“åŸºç¡€\nåœ¨æœ€ç®€å•çš„å±‚é¢ä¸Šï¼Œä½ å¯ä»¥æŠŠæ•°æ®åº“çœ‹ä½œæ˜¯æ•°æ®æ¡†çš„é›†åˆï¼Œåœ¨æ•°æ®åº“æœ¯è¯­ä¸­ç§°ä¸ºè¡¨ (tables)ã€‚å°±åƒæ•°æ®æ¡†ä¸€æ ·ï¼Œæ•°æ®åº“è¡¨æ˜¯å‘½ååˆ—çš„é›†åˆï¼Œå…¶ä¸­ä¸€åˆ—ä¸­çš„æ¯ä¸ªå€¼éƒ½æ˜¯ç›¸åŒç±»å‹çš„ã€‚æ•°æ®æ¡†å’Œæ•°æ®åº“è¡¨ä¹‹é—´æœ‰ä¸‰ä¸ªé«˜å±‚æ¬¡çš„åŒºåˆ«ï¼š\n\næ•°æ®åº“è¡¨å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œå¯ä»¥ä»»æ„å¤§ã€‚æ•°æ®æ¡†å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå¹¶ä¸”æœ‰æ ¹æœ¬çš„å¤§å°é™åˆ¶ï¼ˆå°½ç®¡è¿™ä¸ªé™åˆ¶å¯¹äºè®¸å¤šé—®é¢˜æ¥è¯´ä»ç„¶è¶³å¤Ÿå¤§ï¼‰ã€‚\næ•°æ®åº“è¡¨å‡ ä¹æ€»æ˜¯æœ‰ç´¢å¼•ã€‚å°±åƒä¹¦çš„ç´¢å¼•ä¸€æ ·ï¼Œæ•°æ®åº“ç´¢å¼•å¯ä»¥å¿«é€Ÿæ‰¾åˆ°æ„Ÿå…´è¶£çš„è¡Œï¼Œè€Œæ— éœ€æŸ¥çœ‹æ¯ä¸€è¡Œã€‚æ•°æ®æ¡†å’Œ tibble æ²¡æœ‰ç´¢å¼•ï¼Œä½† data.table æœ‰ï¼Œè¿™æ˜¯å®ƒä»¬é€Ÿåº¦å¿«çš„åŸå› ä¹‹ä¸€ã€‚\nå¤§å¤šæ•°ä¼ ç»Ÿæ•°æ®åº“éƒ½æ˜¯ä¸ºå¿«é€Ÿæ”¶é›†æ•°æ®è€Œä¼˜åŒ–çš„ï¼Œè€Œä¸æ˜¯ä¸ºåˆ†æç°æœ‰æ•°æ®ã€‚è¿™äº›æ•°æ®åº“è¢«ç§°ä¸ºè¡Œå¼ (row-oriented) æ•°æ®åº“ï¼Œå› ä¸ºæ•°æ®æ˜¯é€è¡Œå­˜å‚¨çš„ï¼Œè€Œä¸æ˜¯åƒ R é‚£æ ·é€åˆ—å­˜å‚¨ã€‚æœ€è¿‘ï¼Œåˆ—å¼ (column-oriented) æ•°æ®åº“å¾—åˆ°äº†å¾ˆå¤§å‘å±•ï¼Œå®ƒä½¿å¾—åˆ†æç°æœ‰æ•°æ®å˜å¾—æ›´å¿«ã€‚\n\næ•°æ®åº“ç”±æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰è¿è¡Œï¼ŒDBMS æœ‰ä¸‰ç§åŸºæœ¬å½¢å¼ï¼š\n\n\nå®¢æˆ·ç«¯-æœåŠ¡å™¨ (Client-server) DBMS è¿è¡Œåœ¨ä¸€å°å¼ºå¤§çš„ä¸­å¤®æœåŠ¡å™¨ä¸Šï¼Œä½ ä»ä½ çš„è®¡ç®—æœºï¼ˆå®¢æˆ·ç«¯ï¼‰è¿æ¥åˆ°å®ƒã€‚å®ƒä»¬éå¸¸é€‚åˆåœ¨ç»„ç»‡å†…ä¸å¤šäººå…±äº«æ•°æ®ã€‚æµè¡Œçš„å®¢æˆ·ç«¯-æœåŠ¡å™¨ DBMS åŒ…æ‹¬ PostgreSQLã€MariaDBã€SQL Server å’Œ Oracleã€‚\n\näº‘ (Cloud) DBMSï¼Œå¦‚ Snowflakeã€Amazon çš„ RedShift å’Œ Google çš„ BigQueryï¼Œä¸å®¢æˆ·ç«¯-æœåŠ¡å™¨ DBMS ç±»ä¼¼ï¼Œä½†å®ƒä»¬è¿è¡Œåœ¨äº‘ç«¯ã€‚è¿™æ„å‘³ç€å®ƒä»¬å¯ä»¥è½»æ¾å¤„ç†æå¤§çš„æ•°æ®é›†ï¼Œå¹¶å¯ä»¥æ ¹æ®éœ€è¦è‡ªåŠ¨æä¾›æ›´å¤šçš„è®¡ç®—èµ„æºã€‚\n\nè¿›ç¨‹å†… (In-process) DBMSï¼Œå¦‚ SQLite æˆ– duckdbï¼Œå®Œå…¨åœ¨ä½ çš„è®¡ç®—æœºä¸Šè¿è¡Œã€‚å®ƒä»¬éå¸¸é€‚åˆå¤„ç†ä½ æ˜¯ä¸»è¦ç”¨æˆ·çš„å¤§å‹æ•°æ®é›†ã€‚",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>21</span>Â  <span class='chapter-title'>æ•°æ®åº“</span>"
    ]
  },
  {
    "objectID": "databases.html#è¿æ¥åˆ°æ•°æ®åº“",
    "href": "databases.html#è¿æ¥åˆ°æ•°æ®åº“",
    "title": "21Â  æ•°æ®åº“",
    "section": "\n21.3 è¿æ¥åˆ°æ•°æ®åº“",
    "text": "21.3 è¿æ¥åˆ°æ•°æ®åº“\nè¦ä» R è¿æ¥åˆ°æ•°æ®åº“ï¼Œä½ éœ€è¦ä½¿ç”¨ä¸€å¯¹åŒ…ï¼š\n\nä½ æ€»æ˜¯ä¼šä½¿ç”¨ DBIï¼ˆdatabase interfaceï¼Œæ•°æ®åº“æ¥å£ï¼‰ï¼Œå› ä¸ºå®ƒæä¾›äº†ä¸€ç»„é€šç”¨å‡½æ•°ï¼Œç”¨äºè¿æ¥æ•°æ®åº“ã€ä¸Šä¼ æ•°æ®ã€è¿è¡Œ SQL æŸ¥è¯¢ç­‰ã€‚\nä½ è¿˜éœ€è¦ä¸€ä¸ªä¸ºä½ æ‰€è¿æ¥çš„ DBMS å®šåˆ¶çš„åŒ…ã€‚è¿™ä¸ªåŒ…å°†é€šç”¨çš„ DBI å‘½ä»¤ç¿»è¯‘æˆç‰¹å®š DBMS æ‰€éœ€çš„å…·ä½“æŒ‡ä»¤ã€‚é€šå¸¸æ¯ä¸ª DBMS éƒ½æœ‰ä¸€ä¸ªåŒ…ï¼Œä¾‹å¦‚ RPostgres ç”¨äº PostgreSQLï¼ŒRMariaDB ç”¨äº MySQLã€‚\n\nå¦‚æœæ‰¾ä¸åˆ°ä½ çš„ DBMS çš„ç‰¹å®šåŒ…ï¼Œä½ é€šå¸¸å¯ä»¥ä½¿ç”¨ odbc åŒ…æ¥ä»£æ›¿ã€‚å®ƒä½¿ç”¨è®¸å¤š DBMS éƒ½æ”¯æŒçš„ ODBC åè®®ã€‚odbc éœ€è¦å¤šä¸€ç‚¹è®¾ç½®ï¼Œå› ä¸ºä½ è¿˜éœ€è¦å®‰è£…ä¸€ä¸ª ODBC é©±åŠ¨ç¨‹åºï¼Œå¹¶å‘Šè¯‰ odbc åŒ…åœ¨å“ªé‡Œæ‰¾åˆ°å®ƒã€‚\nå…·ä½“æ¥è¯´ï¼Œä½ ä½¿ç”¨ DBI::dbConnect() åˆ›å»ºä¸€ä¸ªæ•°æ®åº“è¿æ¥ã€‚ç¬¬ä¸€ä¸ªå‚æ•°é€‰æ‹© DBMS2ï¼Œç„¶åç¬¬äºŒä¸ªåŠåç»­çš„å‚æ•°æè¿°å¦‚ä½•è¿æ¥åˆ°å®ƒï¼ˆå³å®ƒåœ¨å“ªé‡Œä»¥åŠä½ è®¿é—®å®ƒæ‰€éœ€çš„å‡­æ®ï¼‰ã€‚ä¸‹é¢çš„ä»£ç å±•ç¤ºäº†å‡ ä¸ªå…¸å‹çš„ä¾‹å­ï¼š\n\ncon &lt;- DBI::dbConnect(\n  RMariaDB::MariaDB(), \n  username = \"foo\"\n)\ncon &lt;- DBI::dbConnect(\n  RPostgres::Postgres(), \n  hostname = \"databases.mycompany.com\", \n  port = 1234\n)\n\nè¿æ¥çš„å…·ä½“ç»†èŠ‚å›  DBMS è€Œå¼‚ï¼Œæ‰€ä»¥å¾ˆé—æ†¾æˆ‘ä»¬æ— æ³•åœ¨è¿™é‡Œæ¶µç›–æ‰€æœ‰ç»†èŠ‚ã€‚è¿™æ„å‘³ç€ä½ éœ€è¦è‡ªå·±åšä¸€äº›ç ”ç©¶ã€‚é€šå¸¸ä½ å¯ä»¥é—®ä½ å›¢é˜Ÿä¸­çš„å…¶ä»–æ•°æ®ç§‘å­¦å®¶æˆ–ä¸ä½ çš„ DBAï¼ˆdatabase administratorï¼Œæ•°æ®åº“ç®¡ç†å‘˜ï¼‰äº¤è°ˆã€‚åˆå§‹è®¾ç½®é€šå¸¸éœ€è¦ä¸€äº›å°è°ƒæ•´ï¼ˆå¯èƒ½è¿˜éœ€è¦ä¸€äº›è°·æ­Œæœç´¢ï¼‰æ‰èƒ½æ­£ç¡®ï¼Œä½†ä½ é€šå¸¸åªéœ€è¦åšä¸€æ¬¡ã€‚\n\n21.3.1 æœ¬ä¹¦ä¸­\nä¸ºæœ¬ä¹¦è®¾ç½®ä¸€ä¸ªå®¢æˆ·ç«¯-æœåŠ¡å™¨æˆ–äº‘ DBMS ä¼šå¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªå®Œå…¨å­˜åœ¨äº R åŒ…ä¸­çš„è¿›ç¨‹å†… DBMSï¼šduckdbã€‚å¤šäºäº† DBI çš„é­”åŠ›ï¼Œä½¿ç”¨ duckdb å’Œä»»ä½•å…¶ä»– DBMS ä¹‹é—´çš„å”¯ä¸€åŒºåˆ«å°±æ˜¯ä½ å¦‚ä½•è¿æ¥åˆ°æ•°æ®åº“ã€‚è¿™ä½¿å¾—å®ƒéå¸¸é€‚åˆæ•™å­¦ï¼Œå› ä¸ºä½ å¯ä»¥è½»æ¾åœ°è¿è¡Œè¿™æ®µä»£ç ï¼Œä¹Ÿå¯ä»¥è½»æ¾åœ°å°†ä½ å­¦åˆ°çš„ä¸œè¥¿åº”ç”¨åˆ°å…¶ä»–åœ°æ–¹ã€‚\nè¿æ¥åˆ° duckdb ç‰¹åˆ«ç®€å•ï¼Œå› ä¸ºé»˜è®¤è®¾ç½®ä¼šåˆ›å»ºä¸€ä¸ªä¸´æ—¶æ•°æ®åº“ï¼Œå½“ä½ é€€å‡º R æ—¶å®ƒä¼šè¢«åˆ é™¤ã€‚è¿™å¯¹äºå­¦ä¹ æ¥è¯´å¾ˆæ£’ï¼Œå› ä¸ºå®ƒä¿è¯äº†æ¯æ¬¡é‡å¯ R æ—¶ä½ éƒ½ä¼šä»ä¸€ä¸ªå¹²å‡€çš„çŠ¶æ€å¼€å§‹ï¼š\n\ncon &lt;- DBI::dbConnect(duckdb::duckdb())\n\nduckdb æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„æ•°æ®åº“ï¼Œå®ƒéå¸¸é€‚åˆæ•°æ®ç§‘å­¦å®¶çš„éœ€æ±‚ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨å®ƒæ˜¯å› ä¸ºå®ƒéå¸¸å®¹æ˜“ä¸Šæ‰‹ï¼Œä½†å®ƒä¹Ÿèƒ½å¤Ÿä»¥æå¿«çš„é€Ÿåº¦å¤„ç†åƒå…†å­—èŠ‚çš„æ•°æ®ã€‚å¦‚æœä½ æƒ³åœ¨ä¸€ä¸ªçœŸå®çš„æ•°æ®åˆ†æé¡¹ç›®ä¸­ä½¿ç”¨ duckdbï¼Œä½ è¿˜éœ€è¦æä¾› dbdir å‚æ•°æ¥åˆ›å»ºä¸€ä¸ªæŒä¹…æ€§æ•°æ®åº“ï¼Œå¹¶å‘Šè¯‰ duckdb åœ¨å“ªé‡Œä¿å­˜å®ƒã€‚å‡è®¾ä½ æ­£åœ¨ä½¿ç”¨ä¸€ä¸ªé¡¹ç›®ï¼ˆChapter 6ï¼‰ï¼ŒæŠŠå®ƒå­˜å‚¨åœ¨å½“å‰é¡¹ç›®çš„ duckdb ç›®å½•ä¸­æ˜¯åˆç†çš„ï¼š\n\ncon &lt;- DBI::dbConnect(duckdb::duckdb(), dbdir = \"duckdb\")\n\n\n21.3.2 åŠ è½½ä¸€äº›æ•°æ®\nç”±äºè¿™æ˜¯ä¸€ä¸ªæ–°çš„æ•°æ®åº“ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæ·»åŠ ä¸€äº›æ•°æ®ã€‚è¿™é‡Œæˆ‘ä»¬å°†ä½¿ç”¨ DBI::dbWriteTable() æ·»åŠ  ggplot2 ä¸­çš„ mpg å’Œ diamonds æ•°æ®é›†ã€‚dbWriteTable() æœ€ç®€å•çš„ç”¨æ³•éœ€è¦ä¸‰ä¸ªå‚æ•°ï¼šä¸€ä¸ªæ•°æ®åº“è¿æ¥ï¼Œè¦åœ¨æ•°æ®åº“ä¸­åˆ›å»ºçš„è¡¨çš„åç§°ï¼Œä»¥åŠä¸€ä¸ªæ•°æ®çš„æ•°æ®æ¡†ã€‚\n\ndbWriteTable(con, \"mpg\", ggplot2::mpg)\ndbWriteTable(con, \"diamonds\", ggplot2::diamonds)\n\nå¦‚æœä½ åœ¨ä¸€ä¸ªçœŸå®çš„é¡¹ç›®ä¸­ä½¿ç”¨ duckdbï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½ å­¦ä¹  duckdb_read_csv() å’Œ duckdb_register_arrow()ã€‚å®ƒä»¬ä¸ºä½ æä¾›äº†å¼ºå¤§ä¸”é«˜æ•ˆçš„æ–¹å¼æ¥å¿«é€Ÿå°†æ•°æ®ç›´æ¥åŠ è½½åˆ° duckdb ä¸­ï¼Œè€Œæ— éœ€å…ˆå°†å…¶åŠ è½½åˆ° R ä¸­ã€‚æˆ‘ä»¬è¿˜å°†åœ¨ Section 26.4.1 ä¸­å±•ç¤ºä¸€ä¸ªå°†å¤šä¸ªæ–‡ä»¶åŠ è½½åˆ°æ•°æ®åº“çš„æœ‰ç”¨æŠ€å·§ã€‚\n\n21.3.3 DBI åŸºç¡€\nä½ å¯ä»¥é€šè¿‡ä½¿ç”¨å…¶ä»–å‡ ä¸ª DBI å‡½æ•°æ¥æ£€æŸ¥æ•°æ®æ˜¯å¦å·²æ­£ç¡®åŠ è½½ï¼šdbListTables() åˆ—å‡ºæ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨3ï¼ŒdbReadTable() æ£€ç´¢ä¸€ä¸ªè¡¨çš„å†…å®¹ã€‚\n\ndbListTables(con)\n#&gt; [1] \"diamonds\" \"mpg\"\n\ncon |&gt; \n  dbReadTable(\"diamonds\") |&gt; \n  as_tibble()\n#&gt; # A tibble: 53,940 Ã— 10\n#&gt;   carat cut       color clarity depth table price     x     y     z\n#&gt;   &lt;dbl&gt; &lt;fct&gt;     &lt;fct&gt; &lt;fct&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1  0.23 Ideal     E     SI2      61.5    55   326  3.95  3.98  2.43\n#&gt; 2  0.21 Premium   E     SI1      59.8    61   326  3.89  3.84  2.31\n#&gt; 3  0.23 Good      E     VS1      56.9    65   327  4.05  4.07  2.31\n#&gt; 4  0.29 Premium   I     VS2      62.4    58   334  4.2   4.23  2.63\n#&gt; 5  0.31 Good      J     SI2      63.3    58   335  4.34  4.35  2.75\n#&gt; 6  0.24 Very Good J     VVS2     62.8    57   336  3.94  3.96  2.48\n#&gt; # â„¹ 53,934 more rows\n\ndbReadTable() è¿”å›ä¸€ä¸ª data.frameï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ as_tibble() å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ª tibbleï¼Œä»¥ä¾¿å®ƒèƒ½å¾ˆå¥½åœ°æ‰“å°å‡ºæ¥ã€‚\nå¦‚æœä½ å·²ç»äº†è§£ SQLï¼Œä½ å¯ä»¥ä½¿ç”¨ dbGetQuery() æ¥è·å–åœ¨æ•°æ®åº“ä¸Šè¿è¡ŒæŸ¥è¯¢çš„ç»“æœï¼š\n\nsql &lt;- \"\n  SELECT carat, cut, clarity, color, price \n  FROM diamonds \n  WHERE price &gt; 15000\n\"\nas_tibble(dbGetQuery(con, sql))\n#&gt; # A tibble: 1,655 Ã— 5\n#&gt;   carat cut       clarity color price\n#&gt;   &lt;dbl&gt; &lt;fct&gt;     &lt;fct&gt;   &lt;fct&gt; &lt;int&gt;\n#&gt; 1  1.54 Premium   VS2     E     15002\n#&gt; 2  1.19 Ideal     VVS1    F     15005\n#&gt; 3  2.1  Premium   SI1     I     15007\n#&gt; 4  1.69 Ideal     SI1     D     15011\n#&gt; 5  1.5  Very Good VVS2    G     15013\n#&gt; 6  1.73 Very Good VS1     G     15014\n#&gt; # â„¹ 1,649 more rows\n\nå¦‚æœä½ ä»¥å‰ä»æœªè§è¿‡ SQLï¼Œåˆ«æ‹…å¿ƒï¼ä½ å¾ˆå¿«å°±ä¼šå­¦åˆ°æ›´å¤šå…³äºå®ƒçš„çŸ¥è¯†ã€‚ä½†å¦‚æœä½ ä»”ç»†é˜…è¯»å®ƒï¼Œä½ å¯èƒ½ä¼šçŒœåˆ°å®ƒä» diamonds æ•°æ®é›†ä¸­é€‰æ‹©äº†äº”ä¸ªåˆ—ï¼Œä»¥åŠ price å¤§äº 15,000 çš„æ‰€æœ‰è¡Œã€‚",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>21</span>Â  <span class='chapter-title'>æ•°æ®åº“</span>"
    ]
  },
  {
    "objectID": "databases.html#dbplyr-åŸºç¡€",
    "href": "databases.html#dbplyr-åŸºç¡€",
    "title": "21Â  æ•°æ®åº“",
    "section": "\n21.4 dbplyr åŸºç¡€",
    "text": "21.4 dbplyr åŸºç¡€\nç°åœ¨æˆ‘ä»¬å·²ç»è¿æ¥åˆ°æ•°æ®åº“å¹¶åŠ è½½äº†ä¸€äº›æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹å­¦ä¹  dbplyr äº†ã€‚dbplyr æ˜¯ä¸€ä¸ª dplyr çš„åç«¯ (backend)ï¼Œè¿™æ„å‘³ç€ä½ ç»§ç»­å†™ dplyr ä»£ç ï¼Œä½†åç«¯ä¼šä»¥ä¸åŒçš„æ–¹å¼æ‰§è¡Œå®ƒã€‚åœ¨è¿™é‡Œï¼Œdbplyr å°†ä»£ç ç¿»è¯‘æˆ SQLï¼›å…¶ä»–åç«¯åŒ…æ‹¬å°†ä»£ç ç¿»è¯‘æˆ data.table çš„ dtplyrï¼Œä»¥åŠåœ¨å¤šä¸ªæ ¸å¿ƒä¸Šæ‰§è¡Œä½ çš„ä»£ç çš„ multidplyrã€‚\nè¦ä½¿ç”¨ dbplyrï¼Œä½ å¿…é¡»é¦–å…ˆä½¿ç”¨ tbl() åˆ›å»ºä¸€ä¸ªä»£è¡¨æ•°æ®åº“è¡¨çš„å¯¹è±¡ï¼š\n\ndiamonds_db &lt;- tbl(con, \"diamonds\")\ndiamonds_db\n#&gt; # Source:   table&lt;diamonds&gt; [?? x 10]\n#&gt; # Database: DuckDB v1.3.1 [14913@Windows 10 x64:R 4.5.1/:memory:]\n#&gt;   carat cut       color clarity depth table price     x     y     z\n#&gt;   &lt;dbl&gt; &lt;fct&gt;     &lt;fct&gt; &lt;fct&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1  0.23 Ideal     E     SI2      61.5    55   326  3.95  3.98  2.43\n#&gt; 2  0.21 Premium   E     SI1      59.8    61   326  3.89  3.84  2.31\n#&gt; 3  0.23 Good      E     VS1      56.9    65   327  4.05  4.07  2.31\n#&gt; 4  0.29 Premium   I     VS2      62.4    58   334  4.2   4.23  2.63\n#&gt; 5  0.31 Good      J     SI2      63.3    58   335  4.34  4.35  2.75\n#&gt; 6  0.24 Very Good J     VVS2     62.8    57   336  3.94  3.96  2.48\n#&gt; # â„¹ more rows\n\n\n\n\n\n\n\nè¿˜æœ‰ä¸¤ç§ä¸å…¶ä»–æ•°æ®åº“äº¤äº’çš„å¸¸è§æ–¹å¼ã€‚é¦–å…ˆï¼Œè®¸å¤šä¼ä¸šæ•°æ®åº“éå¸¸å¤§ï¼Œæ‰€ä»¥ä½ éœ€è¦ä¸€äº›å±‚æ¬¡ç»“æ„æ¥ç»„ç»‡æ‰€æœ‰çš„è¡¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½éœ€è¦æä¾›ä¸€ä¸ªæ¨¡å¼ (schema)ï¼Œæˆ–è€…ä¸€ä¸ªç›®å½• (catalog) å’Œä¸€ä¸ªæ¨¡å¼ï¼Œä»¥ä¾¿é€‰æ‹©ä½ æ„Ÿå…´è¶£çš„è¡¨ï¼š\n\ndiamonds_db &lt;- tbl(con, in_schema(\"sales\", \"diamonds\"))\ndiamonds_db &lt;- tbl(con, in_catalog(\"north_america\", \"sales\", \"diamonds\"))\n\nå…¶ä»–æ—¶å€™ï¼Œä½ å¯èƒ½æƒ³ç”¨ä½ è‡ªå·±çš„ SQL æŸ¥è¯¢ä½œä¸ºèµ·ç‚¹ï¼š\n\ndiamonds_db &lt;- tbl(con, sql(\"SELECT * FROM diamonds\"))\n\n\n\n\nè¿™ä¸ªå¯¹è±¡æ˜¯æƒ°æ€§ (lazy) çš„ï¼›å½“ä½ åœ¨å®ƒä¸Šé¢ä½¿ç”¨ dplyr åŠ¨è¯æ—¶ï¼Œdplyr ä¸ä¼šåšä»»ä½•å·¥ä½œï¼šå®ƒåªæ˜¯è®°å½•ä¸‹ä½ æƒ³è¦æ‰§è¡Œçš„æ“ä½œåºåˆ—ï¼Œå¹¶ä¸”åªåœ¨éœ€è¦æ—¶æ‰æ‰§è¡Œå®ƒä»¬ã€‚ä¾‹å¦‚ï¼Œçœ‹ä¸‹é¢çš„ç®¡é“ï¼š\n\nbig_diamonds_db &lt;- diamonds_db |&gt; \n  filter(price &gt; 15000) |&gt; \n  select(carat:clarity, price)\n\nbig_diamonds_db\n#&gt; # Source:   SQL [?? x 5]\n#&gt; # Database: DuckDB v1.3.1 [14913@Windows 10 x64:R 4.5.1/:memory:]\n#&gt;   carat cut       color clarity price\n#&gt;   &lt;dbl&gt; &lt;fct&gt;     &lt;fct&gt; &lt;fct&gt;   &lt;int&gt;\n#&gt; 1  1.54 Premium   E     VS2     15002\n#&gt; 2  1.19 Ideal     F     VVS1    15005\n#&gt; 3  2.1  Premium   I     SI1     15007\n#&gt; 4  1.69 Ideal     D     SI1     15011\n#&gt; 5  1.5  Very Good G     VVS2    15013\n#&gt; 6  1.73 Very Good G     VS1     15014\n#&gt; # â„¹ more rows\n\nä½ å¯ä»¥çœ‹å‡ºè¿™ä¸ªå¯¹è±¡ä»£è¡¨ä¸€ä¸ªæ•°æ®åº“æŸ¥è¯¢ï¼Œå› ä¸ºå®ƒåœ¨é¡¶éƒ¨æ‰“å°äº† DBMS çš„åç§°ï¼Œå¹¶ä¸”è™½ç„¶å®ƒå‘Šè¯‰äº†ä½ åˆ—çš„æ•°é‡ï¼Œä½†å®ƒé€šå¸¸ä¸çŸ¥é“è¡Œçš„æ•°é‡ã€‚è¿™æ˜¯å› ä¸ºæ‰¾åˆ°æ€»è¡Œæ•°é€šå¸¸éœ€è¦æ‰§è¡Œå®Œæ•´çš„æŸ¥è¯¢ï¼Œè€Œè¿™æ­£æ˜¯æˆ‘ä»¬è¯•å›¾é¿å…çš„ã€‚\nä½ å¯ä»¥çœ‹åˆ°ç”± dplyr å‡½æ•° show_query() ç”Ÿæˆçš„ SQL ä»£ç ã€‚å¦‚æœä½ äº†è§£ dplyrï¼Œè¿™æ˜¯å­¦ä¹  SQL çš„ä¸€ä¸ªå¥½æ–¹æ³•ï¼å†™ä¸€äº› dplyr ä»£ç ï¼Œè®© dbplyr å°†å…¶ç¿»è¯‘æˆ SQLï¼Œç„¶åè¯•ç€å¼„æ¸…æ¥šè¿™ä¸¤ç§è¯­è¨€æ˜¯å¦‚ä½•å¯¹åº”çš„ã€‚\n\nbig_diamonds_db |&gt;\n  show_query()\n#&gt; &lt;SQL&gt;\n#&gt; SELECT carat, cut, color, clarity, price\n#&gt; FROM diamonds\n#&gt; WHERE (price &gt; 15000.0)\n\nè¦å°†æ‰€æœ‰æ•°æ®å–å› R ä¸­ï¼Œä½ å¯ä»¥è°ƒç”¨ collect()ã€‚åœ¨å¹•åï¼Œå®ƒä¼šç”Ÿæˆ SQLï¼Œè°ƒç”¨ dbGetQuery() è·å–æ•°æ®ï¼Œç„¶åå°†ç»“æœè½¬æ¢æˆä¸€ä¸ª tibbleï¼š\n\nbig_diamonds &lt;- big_diamonds_db |&gt; \n  collect()\nbig_diamonds\n#&gt; # A tibble: 1,655 Ã— 5\n#&gt;   carat cut       color clarity price\n#&gt;   &lt;dbl&gt; &lt;fct&gt;     &lt;fct&gt; &lt;fct&gt;   &lt;int&gt;\n#&gt; 1  1.54 Premium   E     VS2     15002\n#&gt; 2  1.19 Ideal     F     VVS1    15005\n#&gt; 3  2.1  Premium   I     SI1     15007\n#&gt; 4  1.69 Ideal     D     SI1     15011\n#&gt; 5  1.5  Very Good G     VVS2    15013\n#&gt; 6  1.73 Very Good G     VS1     15014\n#&gt; # â„¹ 1,649 more rows\n\né€šå¸¸ï¼Œä½ ä¼šä½¿ç”¨ dbplyr ä»æ•°æ®åº“ä¸­é€‰æ‹©ä½ æƒ³è¦çš„æ•°æ®ï¼Œä½¿ç”¨ä¸‹é¢æè¿°çš„ç¿»è¯‘è¿›è¡ŒåŸºæœ¬çš„è¿‡æ»¤å’Œèšåˆã€‚ç„¶åï¼Œä¸€æ—¦ä½ å‡†å¤‡å¥½ç”¨ R ç‰¹æœ‰çš„å‡½æ•°åˆ†ææ•°æ®ï¼Œä½ å°±ä¼š collect() æ•°æ®ä»¥è·å¾—ä¸€ä¸ªå†…å­˜ä¸­çš„ tibbleï¼Œç„¶åç”¨çº¯ R ä»£ç ç»§ç»­ä½ çš„å·¥ä½œã€‚",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>21</span>Â  <span class='chapter-title'>æ•°æ®åº“</span>"
    ]
  },
  {
    "objectID": "databases.html#sql",
    "href": "databases.html#sql",
    "title": "21Â  æ•°æ®åº“",
    "section": "\n21.5 SQL",
    "text": "21.5 SQL\næœ¬ç« çš„å…¶ä½™éƒ¨åˆ†å°†é€šè¿‡ dbplyr çš„è§†è§’æ•™ä½ ä¸€äº› SQLã€‚è¿™æ˜¯ä¸€ä¸ªç›¸å½“éä¼ ç»Ÿçš„ SQL å…¥é—¨ï¼Œä½†æˆ‘ä»¬å¸Œæœ›å®ƒèƒ½è®©ä½ å¿«é€ŸæŒæ¡åŸºç¡€çŸ¥è¯†ã€‚å¹¸è¿çš„æ˜¯ï¼Œå¦‚æœä½ ç†è§£ dplyrï¼Œä½ å°±å¤„åœ¨ä¸€ä¸ªå¾ˆå¥½çš„ä½ç½®ï¼Œå¯ä»¥å¿«é€ŸæŒæ¡ SQLï¼Œå› ä¸ºå¾ˆå¤šæ¦‚å¿µéƒ½æ˜¯ç›¸åŒçš„ã€‚\næˆ‘ä»¬å°†ä½¿ç”¨ nycflights13 åŒ…ä¸­çš„ä¸¤ä¸ªè€æœ‹å‹æ¥æ¢è®¨ dplyr å’Œ SQL ä¹‹é—´çš„å…³ç³»ï¼šflights å’Œ planesã€‚è¿™äº›æ•°æ®é›†å¾ˆå®¹æ˜“è¿›å…¥æˆ‘ä»¬çš„å­¦ä¹ æ•°æ®åº“ï¼Œå› ä¸º dbplyr è‡ªå¸¦ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥å°† nycflights13 ä¸­çš„è¡¨å¤åˆ¶åˆ°æˆ‘ä»¬çš„æ•°æ®åº“ä¸­ï¼š\n\ndbplyr::copy_nycflights13(con)\n#&gt; Creating table: airlines\n#&gt; Creating table: airports\n#&gt; Creating table: flights\n#&gt; Creating table: planes\n#&gt; Creating table: weather\nflights &lt;- tbl(con, \"flights\")\nplanes &lt;- tbl(con, \"planes\")\n\n\n21.5.1 SQL åŸºç¡€\nSQL çš„é¡¶å±‚ç»„ä»¶è¢«ç§°ä¸ºè¯­å¥ (statements)ã€‚å¸¸è§çš„è¯­å¥åŒ…æ‹¬ç”¨äºå®šä¹‰æ–°è¡¨çš„ CREATEï¼Œç”¨äºæ·»åŠ æ•°æ®çš„ INSERTï¼Œä»¥åŠç”¨äºæ£€ç´¢æ•°æ®çš„ SELECTã€‚æˆ‘ä»¬å°†ä¸“æ³¨äº SELECT è¯­å¥ï¼Œä¹Ÿç§°ä¸ºæŸ¥è¯¢ (queries)ï¼Œå› ä¸ºå®ƒä»¬å‡ ä¹æ˜¯ä½ ä½œä¸ºæ•°æ®ç§‘å­¦å®¶å”¯ä¸€ä¼šä½¿ç”¨çš„ã€‚\nä¸€ä¸ªæŸ¥è¯¢ç”±å­å¥ (clauses) ç»„æˆã€‚æœ‰äº”ä¸ªé‡è¦çš„å­å¥ï¼šSELECTã€FROMã€WHEREã€ORDER BY å’Œ GROUP BYã€‚æ¯ä¸ªæŸ¥è¯¢éƒ½å¿…é¡»æœ‰ SELECT4 å’Œ FROM5 å­å¥ï¼Œæœ€ç®€å•çš„æŸ¥è¯¢æ˜¯ SELECT * FROM tableï¼Œå®ƒä»æŒ‡å®šçš„è¡¨ä¸­é€‰æ‹©æ‰€æœ‰åˆ—ã€‚è¿™æ˜¯ dbplyr ä¸ºä¸€ä¸ªæœªç»å¤„ç†çš„è¡¨ç”Ÿæˆçš„ä»£ç ï¼š\n\nflights |&gt; show_query()\n#&gt; &lt;SQL&gt;\n#&gt; SELECT *\n#&gt; FROM flights\nplanes |&gt; show_query()\n#&gt; &lt;SQL&gt;\n#&gt; SELECT *\n#&gt; FROM planes\n\nWHERE å’Œ ORDER BY æ§åˆ¶åŒ…å«å“ªäº›è¡Œä»¥åŠå®ƒä»¬å¦‚ä½•æ’åºï¼š\n\nflights |&gt; \n  filter(dest == \"IAH\") |&gt; \n  arrange(dep_delay) |&gt;\n  show_query()\n#&gt; &lt;SQL&gt;\n#&gt; SELECT flights.*\n#&gt; FROM flights\n#&gt; WHERE (dest = 'IAH')\n#&gt; ORDER BY dep_delay\n\nGROUP BY å°†æŸ¥è¯¢è½¬æ¢ä¸ºä¸€ä¸ªæ‘˜è¦ï¼Œå¯¼è‡´èšåˆå‘ç”Ÿï¼š\n\nflights |&gt; \n  group_by(dest) |&gt; \n  summarize(dep_delay = mean(dep_delay, na.rm = TRUE)) |&gt; \n  show_query()\n#&gt; &lt;SQL&gt;\n#&gt; SELECT dest, AVG(dep_delay) AS dep_delay\n#&gt; FROM flights\n#&gt; GROUP BY dest\n\ndplyr åŠ¨è¯å’Œ SELECT å­å¥ä¹‹é—´æœ‰ä¸¤ä¸ªé‡è¦çš„åŒºåˆ«ï¼š\n\nåœ¨ SQL ä¸­ï¼Œå¤§å°å†™ä¸é‡è¦ï¼šä½ å¯ä»¥å†™ selectã€SELECTï¼Œç”šè‡³æ˜¯ SeLeCtã€‚åœ¨æœ¬ä¹¦ä¸­ï¼Œæˆ‘ä»¬å°†åšæŒä½¿ç”¨å°† SQL å…³é”®å­—å¤§å†™çš„å¸¸è§çº¦å®šï¼Œä»¥åŒºåˆ«äºè¡¨æˆ–å˜é‡åã€‚\nåœ¨ SQL ä¸­ï¼Œé¡ºåºå¾ˆé‡è¦ï¼šä½ å¿…é¡»æ€»æ˜¯æŒ‰ç…§ SELECTã€FROMã€WHEREã€GROUP BYã€ORDER BY çš„é¡ºåºç¼–å†™å­å¥ã€‚ä»¤äººå›°æƒ‘çš„æ˜¯ï¼Œè¿™ä¸ªé¡ºåºä¸å­å¥å®é™…æ±‚å€¼çš„é¡ºåºä¸åŒ¹é…ï¼Œåè€…é¦–å…ˆæ˜¯ FROMï¼Œç„¶åæ˜¯ WHEREã€GROUP BYã€SELECT å’Œ ORDER BYã€‚\n\nä»¥ä¸‹å„èŠ‚å°†æ›´è¯¦ç»†åœ°æ¢è®¨æ¯ä¸ªå­å¥ã€‚\n\n\n\n\n\n\næ³¨æ„ï¼Œè™½ç„¶ SQL æ˜¯ä¸€ä¸ªæ ‡å‡†ï¼Œä½†å®ƒæå…¶å¤æ‚ï¼Œæ²¡æœ‰ä¸€ä¸ªæ•°æ®åº“å®Œå…¨éµå¾ªå®ƒã€‚è™½ç„¶æˆ‘ä»¬å°†åœ¨æœ¬ä¹¦ä¸­é‡ç‚¹å…³æ³¨çš„ä¸»è¦ç»„ä»¶åœ¨ä¸åŒ DBMS ä¹‹é—´éå¸¸ç›¸ä¼¼ï¼Œä½†å­˜åœ¨è®¸å¤šç»†å¾®çš„å·®å¼‚ã€‚å¹¸è¿çš„æ˜¯ï¼Œdbplyr æ—¨åœ¨å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œå¹¶ä¸ºä¸åŒçš„æ•°æ®åº“ç”Ÿæˆä¸åŒçš„ç¿»è¯‘ã€‚å®ƒå¹¶ä¸å®Œç¾ï¼Œä½†å®ƒåœ¨ä¸æ–­æ”¹è¿›ï¼Œå¦‚æœä½ é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥åœ¨ GitHub ä¸Šæäº¤ä¸€ä¸ª issue æ¥å¸®åŠ©æˆ‘ä»¬åšå¾—æ›´å¥½ã€‚\n\n\n\n\n21.5.2 SELECT\nSELECT å­å¥æ˜¯æŸ¥è¯¢çš„ä¸»åŠ›ï¼Œå®ƒæ‰§è¡Œä¸ select()ã€mutate()ã€rename()ã€relocate() ç›¸åŒçš„å·¥ä½œï¼Œå¹¶ä¸”ï¼Œæ­£å¦‚ä½ å°†åœ¨ä¸‹ä¸€èŠ‚ä¸­å­¦åˆ°çš„ï¼Œè¿˜æœ‰ summarize()ã€‚\nselect()ã€rename() å’Œ relocate() åˆ° SELECT çš„ç¿»è¯‘éå¸¸ç›´æ¥ï¼Œå› ä¸ºå®ƒä»¬åªå½±å“åˆ—å‡ºç°çš„ä½ç½®ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰åŠå…¶åç§°ï¼š\n\nplanes |&gt; \n  select(tailnum, type, manufacturer, model, year) |&gt; \n  show_query()\n#&gt; &lt;SQL&gt;\n#&gt; SELECT tailnum, \"type\", manufacturer, model, \"year\"\n#&gt; FROM planes\n\nplanes |&gt; \n  select(tailnum, type, manufacturer, model, year) |&gt; \n  rename(year_built = year) |&gt; \n  show_query()\n#&gt; &lt;SQL&gt;\n#&gt; SELECT tailnum, \"type\", manufacturer, model, \"year\" AS year_built\n#&gt; FROM planes\n\nplanes |&gt; \n  select(tailnum, type, manufacturer, model, year) |&gt; \n  relocate(manufacturer, model, .before = type) |&gt; \n  show_query()\n#&gt; &lt;SQL&gt;\n#&gt; SELECT tailnum, manufacturer, model, \"type\", \"year\"\n#&gt; FROM planes\n\nè¿™ä¸ªä¾‹å­ä¹Ÿå‘ä½ å±•ç¤ºäº† SQL æ˜¯å¦‚ä½•è¿›è¡Œé‡å‘½åçš„ã€‚åœ¨ SQL æœ¯è¯­ä¸­ï¼Œé‡å‘½åè¢«ç§°ä¸ºåˆ«å (aliasing)ï¼Œå¹¶ç”¨ AS å®Œæˆã€‚æ³¨æ„ï¼Œä¸ mutate() ä¸åŒï¼Œæ—§åç§°åœ¨å·¦è¾¹ï¼Œæ–°åç§°åœ¨å³è¾¹ã€‚\n\n\n\n\n\n\nåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè¯·æ³¨æ„ \"year\" å’Œ \"type\" è¢«åŒå¼•å·åŒ…è£¹ã€‚è¿™æ˜¯å› ä¸ºå®ƒä»¬åœ¨ duckdb ä¸­æ˜¯ä¿ç•™å­— (reserved words)ï¼Œæ‰€ä»¥ dbplyr å°†å®ƒä»¬å¼•ç”¨èµ·æ¥ä»¥é¿å…åˆ—/è¡¨åå’Œ SQL è¿ç®—ç¬¦ä¹‹é—´ä»»ä½•æ½œåœ¨çš„æ··æ·†ã€‚\nåœ¨ä¸å…¶ä»–æ•°æ®åº“å·¥ä½œæ—¶ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ°æ¯ä¸ªå˜é‡åéƒ½è¢«å¼•ç”¨ï¼Œå› ä¸ºåªæœ‰å°‘æ•°å®¢æˆ·ç«¯åŒ…ï¼ˆå¦‚ duckdbï¼‰çŸ¥é“æ‰€æœ‰çš„ä¿ç•™å­—æ˜¯ä»€ä¹ˆï¼Œæ‰€ä»¥å®ƒä»¬ä¸ºäº†å®‰å…¨èµ·è§ä¼šå¼•ç”¨æ‰€æœ‰å†…å®¹ã€‚\nSELECT \"tailnum\", \"type\", \"manufacturer\", \"model\", \"year\"\nFROM \"planes\"\nä¸€äº›å…¶ä»–æ•°æ®åº“ç³»ç»Ÿä½¿ç”¨åå¼•å·è€Œä¸æ˜¯å¼•å·ï¼š\nSELECT `tailnum`, `type`, `manufacturer`, `model`, `year`\nFROM `planes`\n\n\n\nmutate() çš„ç¿»è¯‘åŒæ ·ç›´æ¥ï¼šæ¯ä¸ªå˜é‡éƒ½æˆä¸º SELECT ä¸­çš„ä¸€ä¸ªæ–°è¡¨è¾¾å¼ï¼š\n\nflights |&gt; \n  mutate(\n    speed = distance / (air_time / 60)\n  ) |&gt; \n  show_query()\n#&gt; &lt;SQL&gt;\n#&gt; SELECT flights.*, distance / (air_time / 60.0) AS speed\n#&gt; FROM flights\n\næˆ‘ä»¬å°†åœ¨ Section 21.6 ä¸­å›åˆ°å•ä¸ªç»„ä»¶ï¼ˆå¦‚ /ï¼‰çš„ç¿»è¯‘ã€‚\n\n21.5.3 FROM\nFROM å­å¥å®šä¹‰äº†æ•°æ®æºã€‚åœ¨ä¸€æ®µæ—¶é—´å†…å®ƒä¼šç›¸å½“æ— è¶£ï¼Œå› ä¸ºæˆ‘ä»¬åªä½¿ç”¨å•ä¸ªè¡¨ã€‚ä¸€æ—¦æˆ‘ä»¬æ¥è§¦åˆ°è¿æ¥å‡½æ•°ï¼Œä½ å°±ä¼šçœ‹åˆ°æ›´å¤æ‚çš„ä¾‹å­ã€‚\n\n21.5.4 GROUP BY\ngroup_by() è¢«ç¿»è¯‘æˆ GROUP BY6 å­å¥ï¼Œè€Œ summarize() è¢«ç¿»è¯‘æˆ SELECT å­å¥ï¼š\n\ndiamonds_db |&gt; \n  group_by(cut) |&gt; \n  summarize(\n    n = n(),\n    avg_price = mean(price, na.rm = TRUE)\n  ) |&gt; \n  show_query()\n#&gt; &lt;SQL&gt;\n#&gt; SELECT cut, COUNT(*) AS n, AVG(price) AS avg_price\n#&gt; FROM diamonds\n#&gt; GROUP BY cut\n\næˆ‘ä»¬å°†åœ¨ Section 21.6 ä¸­å›åˆ° n() å’Œ mean() çš„ç¿»è¯‘å‘ç”Ÿäº†ä»€ä¹ˆã€‚\n\n21.5.5 WHERE\nfilter() è¢«ç¿»è¯‘æˆ WHERE å­å¥ï¼š\n\nflights |&gt; \n  filter(dest == \"IAH\" | dest == \"HOU\") |&gt; \n  show_query()\n#&gt; &lt;SQL&gt;\n#&gt; SELECT flights.*\n#&gt; FROM flights\n#&gt; WHERE (dest = 'IAH' OR dest = 'HOU')\n\nflights |&gt; \n  filter(arr_delay &gt; 0 & arr_delay &lt; 20) |&gt; \n  show_query()\n#&gt; &lt;SQL&gt;\n#&gt; SELECT flights.*\n#&gt; FROM flights\n#&gt; WHERE (arr_delay &gt; 0.0 AND arr_delay &lt; 20.0)\n\nè¿™é‡Œæœ‰å‡ ä¸ªé‡è¦çš„ç»†èŠ‚éœ€è¦æ³¨æ„ï¼š\n\n\n| å˜æˆ ORï¼Œ& å˜æˆ ANDã€‚\nSQL ä½¿ç”¨ = è¿›è¡Œæ¯”è¾ƒï¼Œè€Œä¸æ˜¯ ==ã€‚SQL æ²¡æœ‰èµ‹å€¼æ“ä½œï¼Œæ‰€ä»¥é‚£é‡Œæ²¡æœ‰æ½œåœ¨çš„æ··æ·†ã€‚\nSQL åªä½¿ç”¨ '' æ¥è¡¨ç¤ºå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯ \"\"ã€‚åœ¨ SQL ä¸­ï¼Œ\"\" ç”¨äºæ ‡è¯†å˜é‡ï¼Œå°±åƒ R çš„ ``ã€‚\n\nå¦ä¸€ä¸ªæœ‰ç”¨çš„ SQL è¿ç®—ç¬¦æ˜¯ INï¼Œå®ƒéå¸¸æ¥è¿‘ R çš„ %in%ï¼š\n\nflights |&gt; \n  filter(dest %in% c(\"IAH\", \"HOU\")) |&gt; \n  show_query()\n#&gt; &lt;SQL&gt;\n#&gt; SELECT flights.*\n#&gt; FROM flights\n#&gt; WHERE (dest IN ('IAH', 'HOU'))\n\nSQL ä½¿ç”¨ NULL è€Œä¸æ˜¯ NAã€‚NULL çš„è¡Œä¸ºä¸ NA ç±»ä¼¼ã€‚ä¸»è¦åŒºåˆ«åœ¨äºï¼Œè™½ç„¶å®ƒä»¬åœ¨æ¯”è¾ƒå’Œç®—æœ¯ä¸­æ˜¯â€œä¼ æŸ“æ€§çš„â€ï¼Œä½†åœ¨æ±‡æ€»æ—¶å®ƒä»¬ä¼šè¢«æ‚„æ‚„åœ°ä¸¢å¼ƒã€‚dbplyr åœ¨ä½ ç¬¬ä¸€æ¬¡é‡åˆ°è¿™ç§æƒ…å†µæ—¶ä¼šæé†’ä½ ï¼š\n\nflights |&gt; \n  group_by(dest) |&gt; \n  summarize(delay = mean(arr_delay))\n#&gt; Warning: Missing values are always removed in SQL aggregation functions.\n#&gt; Use `na.rm = TRUE` to silence this warning\n#&gt; This warning is displayed once every 8 hours.\n#&gt; # Source:   SQL [?? x 2]\n#&gt; # Database: DuckDB v1.3.1 [14913@Windows 10 x64:R 4.5.1/:memory:]\n#&gt;   dest   delay\n#&gt;   &lt;chr&gt;  &lt;dbl&gt;\n#&gt; 1 CLT    7.36 \n#&gt; 2 MDW   12.4  \n#&gt; 3 SDF   12.7  \n#&gt; 4 LAS    0.258\n#&gt; 5 IAH    4.24 \n#&gt; 6 CAK   19.7  \n#&gt; # â„¹ more rows\n\nå¦‚æœä½ æƒ³æ›´å¤šåœ°äº†è§£ NULL æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä½ å¯èƒ½ä¼šå–œæ¬¢ Markus Winand çš„æ–‡ç« â€œSQL çš„ä¸‰å€¼é€»è¾‘â€ã€‚\næ€»çš„æ¥è¯´ï¼Œä½ å¯ä»¥ç”¨ä½ åœ¨ R ä¸­ç”¨äº NA çš„å‡½æ•°æ¥å¤„ç† NULLï¼š\n\nflights |&gt; \n  filter(!is.na(dep_delay)) |&gt; \n  show_query()\n#&gt; &lt;SQL&gt;\n#&gt; SELECT flights.*\n#&gt; FROM flights\n#&gt; WHERE (NOT((dep_delay IS NULL)))\n\nè¿™ä¸ª SQL æŸ¥è¯¢è¯´æ˜äº† dbplyr çš„ä¸€ä¸ªç¼ºç‚¹ï¼šè™½ç„¶ SQL æ˜¯æ­£ç¡®çš„ï¼Œä½†å®ƒå¹¶ä¸åƒä½ æ‰‹å†™çš„é‚£æ ·ç®€å•ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥å»æ‰æ‹¬å·å¹¶ä½¿ç”¨ä¸€ä¸ªæ›´æ˜“è¯»çš„ç‰¹æ®Šè¿ç®—ç¬¦ï¼š\nWHERE \"dep_delay\" IS NOT NULL\nè¯·æ³¨æ„ï¼Œå¦‚æœä½  filter() ä¸€ä¸ªä½ åˆšåˆšç”¨ summarize åˆ›å»ºçš„å˜é‡ï¼Œdbplyr ä¼šç”Ÿæˆä¸€ä¸ª HAVING å­å¥ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª WHERE å­å¥ã€‚è¿™æ˜¯ SQL çš„ä¸€ä¸ªç‰¹å¼‚ä¹‹å¤„ï¼šWHERE åœ¨ SELECT å’Œ GROUP BY ä¹‹å‰è¢«æ±‚å€¼ï¼Œæ‰€ä»¥ SQL éœ€è¦å¦ä¸€ä¸ªåœ¨ä¹‹åè¢«æ±‚å€¼çš„å­å¥ã€‚\n\ndiamonds_db |&gt; \n  group_by(cut) |&gt; \n  summarize(n = n()) |&gt; \n  filter(n &gt; 100) |&gt; \n  show_query()\n#&gt; &lt;SQL&gt;\n#&gt; SELECT cut, COUNT(*) AS n\n#&gt; FROM diamonds\n#&gt; GROUP BY cut\n#&gt; HAVING (COUNT(*) &gt; 100.0)\n\n\n21.5.6 ORDER BY\nå¯¹è¡Œè¿›è¡Œæ’åºæ¶‰åŠä» arrange() åˆ° ORDER BY å­å¥çš„ç›´æ¥ç¿»è¯‘ï¼š\n\nflights |&gt; \n  arrange(year, month, day, desc(dep_delay)) |&gt; \n  show_query()\n#&gt; &lt;SQL&gt;\n#&gt; SELECT flights.*\n#&gt; FROM flights\n#&gt; ORDER BY \"year\", \"month\", \"day\", dep_delay DESC\n\næ³¨æ„ desc() æ˜¯å¦‚ä½•è¢«ç¿»è¯‘æˆ DESC çš„ï¼šè¿™æ˜¯ä¼—å¤šç›´æ¥å—åˆ° SQL å¯å‘çš„ dplyr å‡½æ•°ä¹‹ä¸€ã€‚\n\n21.5.7 å­æŸ¥è¯¢\næœ‰æ—¶ï¼Œå°†ä¸€ä¸ª dplyr ç®¡é“ç¿»è¯‘æˆä¸€ä¸ªå•ä¸€çš„ SELECT è¯­å¥æ˜¯ä¸å¯èƒ½çš„ï¼Œä½ éœ€è¦ä½¿ç”¨ä¸€ä¸ªå­æŸ¥è¯¢ã€‚å­æŸ¥è¯¢ (subquery) åªæ˜¯ä¸€ä¸ªåœ¨ FROM å­å¥ä¸­ç”¨ä½œæ•°æ®æºçš„æŸ¥è¯¢ï¼Œè€Œä¸æ˜¯é€šå¸¸çš„è¡¨ã€‚\ndbplyr é€šå¸¸ä½¿ç”¨å­æŸ¥è¯¢æ¥ç»•è¿‡ SQL çš„é™åˆ¶ã€‚ä¾‹å¦‚ï¼ŒSELECT å­å¥ä¸­çš„è¡¨è¾¾å¼ä¸èƒ½å¼•ç”¨åˆšåˆšåˆ›å»ºçš„åˆ—ã€‚è¿™æ„å‘³ç€ä»¥ä¸‹ï¼ˆæ„šè ¢çš„ï¼‰dplyr ç®¡é“éœ€è¦åˆ†ä¸¤æ­¥è¿›è¡Œï¼šç¬¬ä¸€æ­¥ï¼ˆå†…éƒ¨ï¼‰æŸ¥è¯¢è®¡ç®— year1ï¼Œç„¶åç¬¬äºŒæ­¥ï¼ˆå¤–éƒ¨ï¼‰æŸ¥è¯¢æ‰èƒ½è®¡ç®— year2ã€‚\n\nflights |&gt; \n  mutate(\n    year1 = year + 1,\n    year2 = year1 + 1\n  ) |&gt; \n  show_query()\n#&gt; &lt;SQL&gt;\n#&gt; SELECT q01.*, year1 + 1.0 AS year2\n#&gt; FROM (\n#&gt;   SELECT flights.*, \"year\" + 1.0 AS year1\n#&gt;   FROM flights\n#&gt; ) q01\n\nå¦‚æœä½ è¯•å›¾ filter() ä¸€ä¸ªä½ åˆšåˆšåˆ›å»ºçš„å˜é‡ï¼Œä½ ä¹Ÿä¼šçœ‹åˆ°è¿™ç§æƒ…å†µã€‚è®°ä½ï¼Œå°½ç®¡ WHERE å†™åœ¨ SELECT ä¹‹åï¼Œä½†å®ƒæ˜¯åœ¨ SELECT ä¹‹å‰è¢«æ±‚å€¼çš„ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªï¼ˆæ„šè ¢çš„ï¼‰ä¾‹å­ä¸­æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå­æŸ¥è¯¢ï¼š\n\nflights |&gt; \n  mutate(year1 = year + 1) |&gt; \n  filter(year1 == 2014) |&gt; \n  show_query()\n#&gt; &lt;SQL&gt;\n#&gt; SELECT q01.*\n#&gt; FROM (\n#&gt;   SELECT flights.*, \"year\" + 1.0 AS year1\n#&gt;   FROM flights\n#&gt; ) q01\n#&gt; WHERE (year1 = 2014.0)\n\næœ‰æ—¶ dbplyr ä¼šåœ¨ä¸éœ€è¦çš„åœ°æ–¹åˆ›å»ºä¸€ä¸ªå­æŸ¥è¯¢ï¼Œå› ä¸ºå®ƒè¿˜ä¸çŸ¥é“å¦‚ä½•ä¼˜åŒ–è¯¥ç¿»è¯‘ã€‚éšç€ dbplyr éšæ—¶é—´çš„æ”¹è¿›ï¼Œè¿™äº›æƒ…å†µä¼šè¶Šæ¥è¶Šå°‘ï¼Œä½†å¯èƒ½æ°¸è¿œä¸ä¼šå®Œå…¨æ¶ˆå¤±ã€‚\n\n21.5.8 è¿æ¥\nå¦‚æœä½ ç†Ÿæ‚‰ dplyr çš„è¿æ¥ï¼ŒSQL è¿æ¥éå¸¸ç›¸ä¼¼ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š\n\nflights |&gt; \n  left_join(planes |&gt; rename(year_built = year), join_by(tailnum)) |&gt; \n  show_query()\n#&gt; &lt;SQL&gt;\n#&gt; SELECT\n#&gt;   flights.*,\n#&gt;   planes.\"year\" AS year_built,\n#&gt;   \"type\",\n#&gt;   manufacturer,\n#&gt;   model,\n#&gt;   engines,\n#&gt;   seats,\n#&gt;   speed,\n#&gt;   engine\n#&gt; FROM flights\n#&gt; LEFT JOIN planes\n#&gt;   ON (flights.tailnum = planes.tailnum)\n\nè¿™é‡Œä¸»è¦è¦æ³¨æ„çš„æ˜¯è¯­æ³•ï¼šSQL è¿æ¥ä½¿ç”¨ FROM å­å¥çš„å­å­å¥æ¥å¼•å…¥é¢å¤–çš„è¡¨ï¼Œå¹¶ä½¿ç”¨ ON æ¥å®šä¹‰è¡¨ä¹‹é—´çš„å…³ç³»ã€‚\ndplyr ä¸ºè¿™äº›å‡½æ•°èµ·çš„åå­—ä¸ SQL çš„è”ç³»éå¸¸ç´§å¯†ï¼Œä»¥è‡³äºä½ å¯ä»¥è½»æ¾çŒœå‡º inner_join()ã€right_join() å’Œ full_join() çš„ç­‰æ•ˆ SQLï¼š\nSELECT flights.*, \"type\", manufacturer, model, engines, seats, speed\nFROM flights\nINNER JOIN planes ON (flights.tailnum = planes.tailnum)\n\nSELECT flights.*, \"type\", manufacturer, model, engines, seats, speed\nFROM flights\nRIGHT JOIN planes ON (flights.tailnum = planes.tailnum)\n\nSELECT flights.*, \"type\", manufacturer, model, engines, seats, speed\nFROM flights\nFULL JOIN planes ON (flights.tailnum = planes.tailnum)\nåœ¨å¤„ç†æ¥è‡ªæ•°æ®åº“çš„æ•°æ®æ—¶ï¼Œä½ å¯èƒ½éœ€è¦è¿›è¡Œå¾ˆå¤šè¿æ¥ã€‚è¿™æ˜¯å› ä¸ºæ•°æ®åº“è¡¨é€šå¸¸ä»¥é«˜åº¦è§„èŒƒåŒ–çš„å½¢å¼å­˜å‚¨ï¼Œå…¶ä¸­æ¯ä¸ªâ€œäº‹å®â€éƒ½å­˜å‚¨åœ¨ä¸€ä¸ªå•ä¸€çš„åœ°æ–¹ï¼Œä¸ºäº†ä¿æŒä¸€ä¸ªå®Œæ•´çš„åˆ†ææ•°æ®é›†ï¼Œä½ éœ€è¦æµè§ˆä¸€ä¸ªç”±ä¸»é”®å’Œå¤–é”®è¿æ¥çš„å¤æ‚è¡¨ç½‘ç»œã€‚å¦‚æœä½ é‡åˆ°è¿™ç§æƒ…å†µï¼Œç”± Tobias Schieferdeckerã€Kirill MÃ¼ller å’Œ Darko Bergant å¼€å‘çš„ dm åŒ… å°†æ˜¯ä½ çš„æ•‘æ˜Ÿã€‚å®ƒå¯ä»¥è‡ªåŠ¨ç¡®å®šè¡¨ä¹‹é—´çš„è¿æ¥ï¼Œä½¿ç”¨ DBA é€šå¸¸æä¾›çš„çº¦æŸï¼Œå¯è§†åŒ–è¿æ¥ä»¥ä¾¿ä½ äº†è§£æƒ…å†µï¼Œå¹¶ç”Ÿæˆä½ éœ€è¦ç”¨æ¥è¿æ¥ä¸€ä¸ªè¡¨åˆ°å¦ä¸€ä¸ªè¡¨çš„è¿æ¥ã€‚\n\n21.5.9 å…¶ä»–åŠ¨è¯\ndbplyr è¿˜ç¿»è¯‘å…¶ä»–åŠ¨è¯ï¼Œå¦‚ distinct()ã€slice_*() å’Œ intersect()ï¼Œä»¥åŠè¶Šæ¥è¶Šå¤šçš„ tidyr å‡½æ•°ï¼Œå¦‚ pivot_longer() å’Œ pivot_wider()ã€‚æŸ¥çœ‹å½“å‰å¯ç”¨åŠŸèƒ½çš„å®Œæ•´é›†åˆçš„æœ€ç®€å•æ–¹æ³•æ˜¯è®¿é—® dbplyr ç½‘ç«™ï¼šhttps://dbplyr.tidyverse.org/reference/ã€‚\n\n21.5.10 ç»ƒä¹ \n\ndistinct() è¢«ç¿»è¯‘æˆä»€ä¹ˆï¼Ÿhead() å‘¢ï¼Ÿ\n\nè§£é‡Šä»¥ä¸‹æ¯ä¸ª SQL æŸ¥è¯¢çš„ä½œç”¨ï¼Œå¹¶å°è¯•ä½¿ç”¨ dbplyr é‡æ–°åˆ›å»ºå®ƒä»¬ã€‚\nSELECT * FROM flights\nWHERE dep_delay &lt; arr_delay\n\nSELECT *, distance / (air_time / 60) AS speed\nFROM flights",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>21</span>Â  <span class='chapter-title'>æ•°æ®åº“</span>"
    ]
  },
  {
    "objectID": "databases.html#sec-sql-expressions",
    "href": "databases.html#sec-sql-expressions",
    "title": "21Â  æ•°æ®åº“",
    "section": "\n21.6 å‡½æ•°ç¿»è¯‘",
    "text": "21.6 å‡½æ•°ç¿»è¯‘\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸€ç›´å…³æ³¨ dplyr åŠ¨è¯å¦‚ä½•è¢«ç¿»è¯‘æˆæŸ¥è¯¢çš„å­å¥è¿™ä¸ªå¤§å±€ã€‚ç°åœ¨æˆ‘ä»¬å°†ç¨å¾®æ·±å…¥ä¸€ç‚¹ï¼Œè®¨è®ºå¤„ç†å•ä¸ªåˆ—çš„ R å‡½æ•°çš„ç¿»è¯‘ï¼Œä¾‹å¦‚ï¼Œå½“ä½ åœ¨ summarize() ä¸­ä½¿ç”¨ mean(x) æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ\nä¸ºäº†å¸®åŠ©çœ‹æ¸…å‘ç”Ÿäº†ä»€ä¹ˆï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å‡ ä¸ªå°çš„è¾…åŠ©å‡½æ•°ï¼Œå®ƒä»¬è¿è¡Œä¸€ä¸ª summarize() æˆ– mutate() å¹¶æ˜¾ç¤ºç”Ÿæˆçš„ SQLã€‚è¿™å°†ä½¿æˆ‘ä»¬æ›´å®¹æ˜“æ¢ç´¢ä¸€äº›å˜åŒ–ï¼Œå¹¶çœ‹åˆ°æ‘˜è¦å’Œè½¬æ¢æœ‰ä½•ä¸åŒã€‚\n\nsummarize_query &lt;- function(df, ...) {\n  df |&gt; \n    summarize(...) |&gt; \n    show_query()\n}\nmutate_query &lt;- function(df, ...) {\n  df |&gt; \n    mutate(..., .keep = \"none\") |&gt; \n    show_query()\n}\n\nè®©æˆ‘ä»¬ä»ä¸€äº›æ‘˜è¦å¼€å§‹å§ï¼çœ‹ä¸‹é¢çš„ä»£ç ï¼Œä½ ä¼šæ³¨æ„åˆ°ä¸€äº›æ‘˜è¦å‡½æ•°ï¼Œæ¯”å¦‚ mean()ï¼Œæœ‰ä¸€ä¸ªç›¸å¯¹ç®€å•çš„ç¿»è¯‘ï¼Œè€Œå¦ä¸€äº›ï¼Œæ¯”å¦‚ median()ï¼Œåˆ™å¤æ‚å¾—å¤šã€‚å¯¹äºåœ¨ç»Ÿè®¡å­¦ä¸­å¸¸è§ä½†åœ¨æ•°æ®åº“ä¸­ä¸é‚£ä¹ˆå¸¸è§çš„æ“ä½œï¼Œå…¶å¤æ‚æ€§é€šå¸¸æ›´é«˜ã€‚\n\nflights |&gt; \n  group_by(year, month, day) |&gt;  \n  summarize_query(\n    mean = mean(arr_delay, na.rm = TRUE),\n    median = median(arr_delay, na.rm = TRUE)\n  )\n#&gt; `summarise()` has grouped output by \"year\" and \"month\". You can override\n#&gt; using the `.groups` argument.\n#&gt; &lt;SQL&gt;\n#&gt; SELECT\n#&gt;   \"year\",\n#&gt;   \"month\",\n#&gt;   \"day\",\n#&gt;   AVG(arr_delay) AS mean,\n#&gt;   MEDIAN(arr_delay) AS median\n#&gt; FROM flights\n#&gt; GROUP BY \"year\", \"month\", \"day\"\n\nå½“ä½ åœ¨ mutate() ä¸­ä½¿ç”¨æ‘˜è¦å‡½æ•°æ—¶ï¼Œå®ƒä»¬çš„ç¿»è¯‘ä¼šå˜å¾—æ›´åŠ å¤æ‚ï¼Œå› ä¸ºå®ƒä»¬å¿…é¡»å˜æˆæ‰€è°“çš„çª—å£ (window) å‡½æ•°ã€‚åœ¨ SQL ä¸­ï¼Œä½ é€šè¿‡åœ¨æ™®é€šèšåˆå‡½æ•°åæ·»åŠ  OVER æ¥å°†å…¶å˜æˆçª—å£å‡½æ•°ï¼š\n\nflights |&gt; \n  group_by(year, month, day) |&gt;  \n  mutate_query(\n    mean = mean(arr_delay, na.rm = TRUE),\n  )\n#&gt; &lt;SQL&gt;\n#&gt; SELECT\n#&gt;   \"year\",\n#&gt;   \"month\",\n#&gt;   \"day\",\n#&gt;   AVG(arr_delay) OVER (PARTITION BY \"year\", \"month\", \"day\") AS mean\n#&gt; FROM flights\n\nåœ¨ SQL ä¸­ï¼ŒGROUP BY å­å¥ä¸“é—¨ç”¨äºæ‘˜è¦ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œä½ å¯ä»¥çœ‹åˆ°åˆ†ç»„å·²ç»ä» GROUP BY å­å¥ç§»åˆ°äº† OVERã€‚\nçª—å£å‡½æ•°åŒ…æ‹¬æ‰€æœ‰å‘å‰æˆ–å‘åçœ‹çš„å‡½æ•°ï¼Œæ¯”å¦‚ lead() å’Œ lag()ï¼Œå®ƒä»¬åˆ†åˆ«æŸ¥çœ‹â€œä¸‹ä¸€ä¸ªâ€æˆ–â€œä¸Šä¸€ä¸ªâ€å€¼ï¼š\n\nflights |&gt; \n  group_by(dest) |&gt;  \n  arrange(time_hour) |&gt; \n  mutate_query(\n    lead = lead(arr_delay),\n    lag = lag(arr_delay)\n  )\n#&gt; &lt;SQL&gt;\n#&gt; SELECT\n#&gt;   dest,\n#&gt;   LEAD(arr_delay, 1, NULL) OVER (PARTITION BY dest ORDER BY time_hour) AS lead,\n#&gt;   LAG(arr_delay, 1, NULL) OVER (PARTITION BY dest ORDER BY time_hour) AS lag\n#&gt; FROM flights\n#&gt; ORDER BY time_hour\n\nåœ¨è¿™é‡Œï¼Œarrange() æ•°æ®å¾ˆé‡è¦ï¼Œå› ä¸º SQL è¡¨æ²¡æœ‰å†…åœ¨çš„é¡ºåºã€‚äº‹å®ä¸Šï¼Œå¦‚æœä½ ä¸ä½¿ç”¨ arrange()ï¼Œä½ æ¯æ¬¡å¯èƒ½ä¼šå¾—åˆ°ä¸åŒé¡ºåºçš„è¡Œï¼æ³¨æ„å¯¹äºçª—å£å‡½æ•°ï¼Œæ’åºä¿¡æ¯æ˜¯é‡å¤çš„ï¼šä¸»æŸ¥è¯¢çš„ ORDER BY å­å¥ä¸è‡ªåŠ¨åº”ç”¨äºçª—å£å‡½æ•°ã€‚\nå¦ä¸€ä¸ªé‡è¦çš„ SQL å‡½æ•°æ˜¯ CASE WHENã€‚å®ƒè¢«ç”¨ä½œ if_else() å’Œ case_when() çš„ç¿»è¯‘ï¼Œåè€…æ˜¯ç›´æ¥å—åˆ°å®ƒå¯å‘çš„ dplyr å‡½æ•°ã€‚è¿™é‡Œæœ‰å‡ ä¸ªç®€å•çš„ä¾‹å­ï¼š\n\nflights |&gt; \n  mutate_query(\n    description = if_else(arr_delay &gt; 0, \"delayed\", \"on-time\")\n  )\n#&gt; &lt;SQL&gt;\n#&gt; SELECT CASE WHEN (arr_delay &gt; 0.0) THEN 'delayed' WHEN NOT (arr_delay &gt; 0.0) THEN 'on-time' END AS description\n#&gt; FROM flights\nflights |&gt; \n  mutate_query(\n    description = \n      case_when(\n        arr_delay &lt; -5 ~ \"early\", \n        arr_delay &lt; 5 ~ \"on-time\",\n        arr_delay &gt;= 5 ~ \"late\"\n      )\n  )\n#&gt; &lt;SQL&gt;\n#&gt; SELECT CASE\n#&gt; WHEN (arr_delay &lt; -5.0) THEN 'early'\n#&gt; WHEN (arr_delay &lt; 5.0) THEN 'on-time'\n#&gt; WHEN (arr_delay &gt;= 5.0) THEN 'late'\n#&gt; END AS description\n#&gt; FROM flights\n\nCASE WHEN ä¹Ÿç”¨äºä¸€äº›å…¶ä»–æ²¡æœ‰ä» R åˆ° SQL çš„ç›´æ¥ç¿»è¯‘çš„å‡½æ•°ã€‚ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯ cut()ï¼š\n\nflights |&gt; \n  mutate_query(\n    description =  cut(\n      arr_delay, \n      breaks = c(-Inf, -5, 5, Inf), \n      labels = c(\"early\", \"on-time\", \"late\")\n    )\n  )\n#&gt; &lt;SQL&gt;\n#&gt; SELECT CASE\n#&gt; WHEN (arr_delay &lt;= -5.0) THEN 'early'\n#&gt; WHEN (arr_delay &lt;= 5.0) THEN 'on-time'\n#&gt; WHEN (arr_delay &gt; 5.0) THEN 'late'\n#&gt; END AS description\n#&gt; FROM flights\n\ndbplyr è¿˜ç¿»è¯‘å¸¸è§çš„å­—ç¬¦ä¸²å’Œæ—¥æœŸæ—¶é—´æ“ä½œå‡½æ•°ï¼Œä½ å¯ä»¥åœ¨ vignette(\"translation-function\", package = \"dbplyr\") ä¸­äº†è§£å®ƒä»¬ã€‚dbplyr çš„ç¿»è¯‘è‚¯å®šä¸å®Œç¾ï¼Œè¿˜æœ‰å¾ˆå¤š R å‡½æ•°å°šæœªè¢«ç¿»è¯‘ï¼Œä½† dbplyr åœ¨è¦†ç›–ä½ å¤§å¤šæ•°æ—¶å€™ä¼šä½¿ç”¨çš„å‡½æ•°æ–¹é¢åšå¾—å‡ºå¥‡åœ°å¥½ã€‚",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>21</span>Â  <span class='chapter-title'>æ•°æ®åº“</span>"
    ]
  },
  {
    "objectID": "databases.html#æ€»ç»“",
    "href": "databases.html#æ€»ç»“",
    "title": "21Â  æ•°æ®åº“",
    "section": "\n21.7 æ€»ç»“",
    "text": "21.7 æ€»ç»“\nåœ¨æœ¬ç« ä¸­ï¼Œä½ å­¦ä¹ äº†å¦‚ä½•ä»æ•°æ®åº“è®¿é—®æ•°æ®ã€‚æˆ‘ä»¬ä¸“æ³¨äº dbplyrï¼Œä¸€ä¸ª dplyr çš„â€œåç«¯â€ï¼Œå®ƒå…è®¸ä½ ç¼–å†™ä½ ç†Ÿæ‚‰çš„ dplyr ä»£ç ï¼Œå¹¶è®©å®ƒè‡ªåŠ¨ç¿»è¯‘æˆ SQLã€‚æˆ‘ä»¬åˆ©ç”¨è¿™ç§ç¿»è¯‘æ•™äº†ä½ ä¸€äº› SQLï¼›å­¦ä¹ ä¸€äº› SQL å¾ˆé‡è¦ï¼Œå› ä¸ºå®ƒæ˜¯æœ€å¸¸ç”¨çš„æ•°æ®å¤„ç†è¯­è¨€ï¼Œäº†è§£ä¸€äº›å°†ä½¿ä½ æ›´å®¹æ˜“ä¸å…¶ä»–ä¸ä½¿ç”¨ R çš„æ•°æ®äººå‘˜äº¤æµã€‚\nå¦‚æœä½ å·²ç»å®Œæˆäº†æœ¬ç« ï¼Œå¹¶æƒ³å­¦ä¹ æ›´å¤šå…³äº SQL çš„çŸ¥è¯†ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªæ¨èï¼š\n\nRenÃ©e M. P. Teate çš„ ã€Šé¢å‘æ•°æ®ç§‘å­¦å®¶çš„ SQLã€‹ (SQL for Data Scientists)ï¼Œhttps://sqlfordatascientists.comï¼Œæ˜¯ä¸“ä¸ºæ•°æ®ç§‘å­¦å®¶çš„éœ€æ±‚è®¾è®¡çš„ SQL å…¥é—¨ï¼Œå¹¶åŒ…å«äº†ä½ åœ¨çœŸå®ç»„ç»‡ä¸­å¯èƒ½é‡åˆ°çš„é‚£ç§é«˜åº¦äº’è”æ•°æ®çš„ä¾‹å­ã€‚\nAnthony DeBarros çš„ ã€Šå®ç”¨ SQLã€‹ (Practical SQL)ï¼Œhttps://www.practicalsql.comï¼Œæ˜¯ä»æ•°æ®è®°è€…ï¼ˆä¸“é—¨è®²è¿°å¼•äººå…¥èƒœæ•…äº‹çš„æ•°æ®ç§‘å­¦å®¶ï¼‰çš„è§’åº¦å†™çš„ï¼Œå¹¶æ›´è¯¦ç»†åœ°ä»‹ç»äº†å¦‚ä½•å°†ä½ çš„æ•°æ®å¯¼å…¥æ•°æ®åº“å’Œè¿è¡Œä½ è‡ªå·±çš„ DBMSã€‚\n\nåœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦ä¸€ä¸ªç”¨äºå¤„ç†å¤§æ•°æ®çš„ dplyr åç«¯ï¼šarrowã€‚Arrow æ˜¯ä¸ºå¤„ç†ç£ç›˜ä¸Šçš„å¤§æ–‡ä»¶è€Œè®¾è®¡çš„ï¼Œæ˜¯æ•°æ®åº“çš„å¤©ç„¶è¡¥å……ã€‚",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>21</span>Â  <span class='chapter-title'>æ•°æ®åº“</span>"
    ]
  },
  {
    "objectID": "databases.html#footnotes",
    "href": "databases.html#footnotes",
    "title": "21Â  æ•°æ®åº“",
    "section": "",
    "text": "SQL çš„å‘éŸ³æ˜¯â€œsâ€-â€œqâ€-â€œlâ€æˆ–â€œsequelâ€ã€‚â†©ï¸\né€šå¸¸ï¼Œè¿™æ˜¯ä½ å°†ä»å®¢æˆ·ç«¯åŒ…ä¸­ä½¿ç”¨çš„å”¯ä¸€å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å»ºè®®ä½¿ç”¨ :: æ¥æå–é‚£ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸æ˜¯ç”¨ library() åŠ è½½æ•´ä¸ªåŒ…ã€‚â†©ï¸\nè‡³å°‘ï¼Œæ˜¯ä½ è¢«æˆæƒæŸ¥çœ‹çš„æ‰€æœ‰è¡¨ã€‚â†©ï¸\nä»¤äººå›°æƒ‘çš„æ˜¯ï¼Œæ ¹æ®ä¸Šä¸‹æ–‡ï¼ŒSELECT å¯ä»¥æ˜¯ä¸€ä¸ªè¯­å¥æˆ–ä¸€ä¸ªå­å¥ã€‚ä¸ºäº†é¿å…è¿™ç§æ··æ·†ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šç”¨ SELECT æŸ¥è¯¢è€Œä¸æ˜¯ SELECT è¯­å¥ã€‚â†©ï¸\nå¥½å§ï¼Œä»æŠ€æœ¯ä¸Šè®²ï¼Œåªéœ€è¦ SELECTï¼Œå› ä¸ºä½ å¯ä»¥å†™åƒ SELECT 1+1 è¿™æ ·çš„æŸ¥è¯¢æ¥æ‰§è¡ŒåŸºæœ¬è®¡ç®—ã€‚ä½†å¦‚æœä½ æƒ³å¤„ç†æ•°æ®ï¼ˆä½ æ€»æ˜¯è¿™æ ·åšçš„ï¼ï¼‰ï¼Œä½ è¿˜éœ€è¦ä¸€ä¸ª FROM å­å¥ã€‚â†©ï¸\nè¿™å¹¶éå·§åˆï¼šdplyr å‡½æ•°çš„åç§°å—åˆ°äº† SQL å­å¥çš„å¯å‘ã€‚â†©ï¸",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>21</span>Â  <span class='chapter-title'>æ•°æ®åº“</span>"
    ]
  },
  {
    "objectID": "arrow.html",
    "href": "arrow.html",
    "title": "22Â  Arrow",
    "section": "",
    "text": "22.1 å¼•è¨€\nCSV æ–‡ä»¶è¢«è®¾è®¡ä¸ºæ˜“äºäººç±»é˜…è¯»ã€‚å®ƒä»¬æ˜¯ä¸€ç§å¾ˆå¥½çš„äº¤æ¢æ ¼å¼ï¼Œå› ä¸ºå®ƒä»¬éå¸¸ç®€å•ï¼Œå¹¶ä¸”å‡ ä¹æ‰€æœ‰å·¥å…·éƒ½èƒ½è¯»å–å®ƒä»¬ã€‚ä½† CSV æ–‡ä»¶æ•ˆç‡ä¸é«˜ï¼šä½ éœ€è¦åšç›¸å½“å¤šçš„å·¥ä½œæ‰èƒ½å°†æ•°æ®è¯»å…¥ Rã€‚åœ¨æœ¬ç« ä¸­ï¼Œä½ å°†å­¦ä¹ ä¸€ç§å¼ºå¤§çš„æ›¿ä»£æ–¹æ¡ˆï¼šparquet æ ¼å¼ï¼Œè¿™æ˜¯ä¸€ç§è¢«å¤§æ•°æ®ç³»ç»Ÿå¹¿æ³›ä½¿ç”¨çš„åŸºäºå¼€æ”¾æ ‡å‡†çš„æ ¼å¼ã€‚\næˆ‘ä»¬å°†æŠŠ parquet æ–‡ä»¶ä¸ Apache Arrow é…å¯¹ä½¿ç”¨ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸ºé«˜æ•ˆåˆ†æå’Œä¼ è¾“å¤§å‹æ•°æ®é›†è€Œè®¾è®¡çš„å¤šè¯­è¨€å·¥å…·ç®±ã€‚æˆ‘ä»¬å°†é€šè¿‡ arrow åŒ… æ¥ä½¿ç”¨ Apache Arrowï¼Œå®ƒæä¾›äº†ä¸€ä¸ª dplyr åç«¯ï¼Œå…è®¸ä½ ä½¿ç”¨ç†Ÿæ‚‰çš„ dplyr è¯­æ³•æ¥åˆ†æå¤§äºå†…å­˜çš„æ•°æ®é›†ã€‚å¦å¤–ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œarrow éå¸¸å¿«ï¼šä½ å°†åœ¨æœ¬ç« åé¢çœ‹åˆ°ä¸€äº›ä¾‹å­ã€‚\narrow å’Œ dbplyr éƒ½æä¾›äº† dplyr åç«¯ï¼Œæ‰€ä»¥ä½ å¯èƒ½ä¼šæƒ³çŸ¥é“ä½•æ—¶ä½¿ç”¨å“ªä¸€ä¸ªã€‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œé€‰æ‹©å·²ç»ä¸ºä½ åšå¥½äº†ï¼Œå› ä¸ºæ•°æ®å·²ç»å­˜åœ¨äºæ•°æ®åº“æˆ– parquet æ–‡ä»¶ä¸­ï¼Œè€Œä½ å¸Œæœ›ç›´æ¥ä½¿ç”¨å®ƒã€‚ä½†å¦‚æœä½ æ˜¯ä»è‡ªå·±çš„æ•°æ®ï¼ˆä¹Ÿè®¸æ˜¯ CSV æ–‡ä»¶ï¼‰å¼€å§‹ï¼Œä½ å¯ä»¥å°†å…¶åŠ è½½åˆ°æ•°æ®åº“ä¸­æˆ–è½¬æ¢ä¸º parquetã€‚æ€»çš„æ¥è¯´ï¼Œå¾ˆéš¾çŸ¥é“å“ªç§æ–¹æ³•æ•ˆæœæœ€å¥½ï¼Œæ‰€ä»¥åœ¨ä½ åˆ†æçš„æ—©æœŸé˜¶æ®µï¼Œæˆ‘ä»¬é¼“åŠ±ä½ å°è¯•ä¸¤è€…ï¼Œå¹¶é€‰æ‹©æœ€é€‚åˆä½ çš„é‚£ä¸€ä¸ªã€‚\nï¼ˆéå¸¸æ„Ÿè°¢ Danielle Navarroï¼Œå¥¹è´¡çŒ®äº†æœ¬ç« çš„åˆç‰ˆã€‚ï¼‰",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>22</span>Â  <span class='chapter-title'>Arrow</span>"
    ]
  },
  {
    "objectID": "arrow.html#å¼•è¨€",
    "href": "arrow.html#å¼•è¨€",
    "title": "22Â  Arrow",
    "section": "",
    "text": "22.1.1 å‰ææ¡ä»¶\nåœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†ç»§ç»­ä½¿ç”¨ tidyverseï¼Œç‰¹åˆ«æ˜¯ dplyrï¼Œä½†æˆ‘ä»¬ä¼šå°†å…¶ä¸ä¸“é—¨ä¸ºå¤„ç†å¤§æ•°æ®è€Œè®¾è®¡çš„ arrow åŒ…é…å¯¹ä½¿ç”¨ã€‚\n\nlibrary(tidyverse)\nlibrary(arrow)\n\nåœ¨æœ¬ç« çš„åé¢ï¼Œæˆ‘ä»¬è¿˜ä¼šçœ‹åˆ° arrow å’Œ duckdb ä¹‹é—´çš„ä¸€äº›è”ç³»ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦ dbplyr å’Œ duckdbã€‚\n\nlibrary(dbplyr, warn.conflicts = FALSE)\nlibrary(duckdb)\n#&gt; è½½å…¥éœ€è¦çš„ç¨‹åºåŒ…ï¼šDBI",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>22</span>Â  <span class='chapter-title'>Arrow</span>"
    ]
  },
  {
    "objectID": "arrow.html#è·å–æ•°æ®",
    "href": "arrow.html#è·å–æ•°æ®",
    "title": "22Â  Arrow",
    "section": "\n22.2 è·å–æ•°æ®",
    "text": "22.2 è·å–æ•°æ®\næˆ‘ä»¬é¦–å…ˆè·å–ä¸€ä¸ªå€¼å¾—ä½¿ç”¨è¿™äº›å·¥å…·çš„æ•°æ®é›†ï¼šè¥¿é›…å›¾å…¬å…±å›¾ä¹¦é¦†çš„å›¾ä¹¦å€Ÿé˜…æ•°æ®é›†ï¼Œå¯åœ¨çº¿è·å–ï¼šdata.seattle.gov/Community/Checkouts-by-Title/tmmm-ytt6ã€‚è¿™ä¸ªæ•°æ®é›†åŒ…å« 41,389,465 è¡Œï¼Œå‘Šè¯‰ä½ ä» 2005 å¹´ 4 æœˆåˆ° 2022 å¹´ 10 æœˆï¼Œæ¯æœ¬ä¹¦æ¯æœˆè¢«å€Ÿé˜…äº†å¤šå°‘æ¬¡ã€‚\nä»¥ä¸‹ä»£ç å°†ä¸ºä½ è·å–è¯¥æ•°æ®çš„ç¼“å­˜å‰¯æœ¬ã€‚æ•°æ®æ˜¯ä¸€ä¸ª 9GB çš„ CSV æ–‡ä»¶ï¼Œæ‰€ä»¥ä¸‹è½½éœ€è¦ä¸€äº›æ—¶é—´ã€‚æˆ‘å¼ºçƒˆæ¨èä½¿ç”¨ curl::multi_download() æ¥è·å–éå¸¸å¤§çš„æ–‡ä»¶ï¼Œå› ä¸ºå®ƒæ­£æ˜¯ä¸ºæ­¤ç›®çš„è€Œæ„å»ºçš„ï¼šå®ƒä¼šç»™ä½ ä¸€ä¸ªè¿›åº¦æ¡ï¼Œå¹¶ä¸”å¦‚æœä¸‹è½½ä¸­æ–­ï¼Œå®ƒå¯ä»¥æ¢å¤ä¸‹è½½ã€‚\n\n# eval: !expr \"!file.exists('data/seattle-library-checkouts.csv')\"\ndir.create(\"data\", showWarnings = FALSE)\n\ncurl::multi_download(\n    \"https://r4ds.s3.us-west-2.amazonaws.com/seattle-library-checkouts.csv\",\n    \"data/seattle-library-checkouts.csv\",\n    resume = TRUE\n)\n#&gt; # A tibble: 1 Ã— 10\n#&gt;   success status_code resumefrom url                    destfile        error\n#&gt;   &lt;lgl&gt;         &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;                  &lt;chr&gt;           &lt;chr&gt;\n#&gt; 1 TRUE            416          0 https://r4ds.s3.us-weâ€¦ \"E:\\\\r4ds-cn\\\\â€¦ &lt;NA&gt; \n#&gt; # â„¹ 4 more variables: type &lt;chr&gt;, modified &lt;dttm&gt;, time &lt;dbl&gt;,\n#&gt; #   headers &lt;list&gt;",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>22</span>Â  <span class='chapter-title'>Arrow</span>"
    ]
  },
  {
    "objectID": "arrow.html#æ‰“å¼€æ•°æ®é›†",
    "href": "arrow.html#æ‰“å¼€æ•°æ®é›†",
    "title": "22Â  Arrow",
    "section": "\n22.3 æ‰“å¼€æ•°æ®é›†",
    "text": "22.3 æ‰“å¼€æ•°æ®é›†\nè®©æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æ•°æ®ã€‚è¿™ä¸ªæ–‡ä»¶æœ‰ 9 GBï¼Œè¶³å¤Ÿå¤§ï¼Œæˆ‘ä»¬å¯èƒ½ä¸æƒ³æŠŠæ•´ä¸ªæ–‡ä»¶éƒ½åŠ è½½åˆ°å†…å­˜ä¸­ã€‚ä¸€ä¸ªå¥½çš„ç»éªŒæ³•åˆ™æ˜¯ï¼Œä½ é€šå¸¸éœ€è¦è‡³å°‘æ˜¯æ•°æ®å¤§å°ä¸¤å€çš„å†…å­˜ï¼Œè€Œè®¸å¤šç¬”è®°æœ¬ç”µè„‘çš„å†…å­˜ä¸Šé™æ˜¯ 16 GBã€‚è¿™æ„å‘³ç€æˆ‘ä»¬æƒ³é¿å…ä½¿ç”¨ read_csv()ï¼Œè€Œæ˜¯ä½¿ç”¨ arrow::open_dataset()ï¼š\n\nseattle_csv &lt;- open_dataset(\n    sources = \"data/seattle-library-checkouts.csv\",\n    col_types = schema(ISBN = string()),\n    format = \"csv\"\n)\n\nå½“è¿™æ®µä»£ç è¿è¡Œæ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿopen_dataset() ä¼šæ‰«æå‡ åƒè¡Œæ¥ç¡®å®šæ•°æ®é›†çš„ç»“æ„ã€‚ISBN åˆ—åœ¨å‰ 80,000 è¡ŒåŒ…å«ç©ºç™½å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»æŒ‡å®šåˆ—ç±»å‹æ¥å¸®åŠ© arrow ç¡®å®šæ•°æ®ç»“æ„ã€‚ä¸€æ—¦æ•°æ®è¢« open_dataset() æ‰«æè¿‡ï¼Œå®ƒä¼šè®°å½•ä¸‹å®ƒæ‰€å‘ç°çš„å†…å®¹ç„¶ååœæ­¢ï¼›å®ƒåªä¼šåœ¨ä½ æ˜ç¡®è¯·æ±‚æ—¶æ‰è¯»å–æ›´å¤šçš„è¡Œã€‚è¿™ä¸ªå…ƒæ•°æ®å°±æ˜¯æˆ‘ä»¬æ‰“å° seattle_csv æ—¶çœ‹åˆ°çš„å†…å®¹ï¼š\n\nseattle_csv\n#&gt; FileSystemDataset with 1 csv file\n#&gt; 12 columns\n#&gt; UsageClass: string\n#&gt; CheckoutType: string\n#&gt; MaterialType: string\n#&gt; CheckoutYear: int64\n#&gt; CheckoutMonth: int64\n#&gt; Checkouts: int64\n#&gt; Title: string\n#&gt; ISBN: string\n#&gt; Creator: string\n#&gt; Subjects: string\n#&gt; Publisher: string\n#&gt; PublicationYear: string\n\nè¾“å‡ºçš„ç¬¬ä¸€è¡Œå‘Šè¯‰ä½  seattle_csv æ˜¯ä½œä¸ºå•ä¸ª CSV æ–‡ä»¶å­˜å‚¨åœ¨æœ¬åœ°ç£ç›˜ä¸Šçš„ï¼›å®ƒåªä¼šåœ¨éœ€è¦æ—¶æ‰è¢«åŠ è½½åˆ°å†…å­˜ä¸­ã€‚è¾“å‡ºçš„å…¶ä½™éƒ¨åˆ†å‘Šè¯‰äº†ä½  arrow ä¸ºæ¯ä¸€åˆ—æ¨æ–­å‡ºçš„åˆ—ç±»å‹ã€‚\næˆ‘ä»¬å¯ä»¥ç”¨ glimpse() æ¥çœ‹å®é™…å†…å®¹ã€‚è¿™æ­ç¤ºäº†æœ‰å¤§çº¦ 4100 ä¸‡è¡Œå’Œ 12 åˆ—ï¼Œå¹¶å‘æˆ‘ä»¬å±•ç¤ºäº†å‡ ä¸ªå€¼ã€‚\n\nseattle_csv |&gt; glimpse()\n#&gt; FileSystemDataset with 1 csv file\n#&gt; 41,389,465 rows x 12 columns\n#&gt; $ UsageClass      &lt;string&gt; \"Physical\", \"Physical\", \"Digital\", \"Physical\", \"Phâ€¦\n#&gt; $ CheckoutType    &lt;string&gt; \"Horizon\", \"Horizon\", \"OverDrive\", \"Horizon\", \"Horâ€¦\n#&gt; $ MaterialType    &lt;string&gt; \"BOOK\", \"BOOK\", \"EBOOK\", \"BOOK\", \"SOUNDDISC\", \"BOOâ€¦\n#&gt; $ CheckoutYear     &lt;int64&gt; 2016, 2016, 2016, 2016, 2016, 2016, 2016, 2016, 20â€¦\n#&gt; $ CheckoutMonth    &lt;int64&gt; 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6,â€¦\n#&gt; $ Checkouts        &lt;int64&gt; 1, 1, 1, 1, 1, 1, 1, 1, 4, 1, 1, 2, 3, 2, 1, 3, 2,â€¦\n#&gt; $ Title           &lt;string&gt; \"Super rich : a guide to having it all / Russell Sâ€¦\n#&gt; $ ISBN            &lt;string&gt; \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"â€¦\n#&gt; $ Creator         &lt;string&gt; \"Simmons, Russell\", \"Barclay, James, 1965-\", \"Tim â€¦\n#&gt; $ Subjects        &lt;string&gt; \"Self realization, Conduct of life, Attitude Psychâ€¦\n#&gt; $ Publisher       &lt;string&gt; \"Gotham Books,\", \"Pyr,\", \"Random House, Inc.\", \"Diâ€¦\n#&gt; $ PublicationYear &lt;string&gt; \"c2011.\", \"2010.\", \"2015\", \"2005.\", \"c2004.\", \"c20â€¦\n\næˆ‘ä»¬å¯ä»¥å¼€å§‹ç”¨ dplyr åŠ¨è¯æ¥ä½¿ç”¨è¿™ä¸ªæ•°æ®é›†ï¼Œå¹¶ç”¨ collect() æ¥å¼ºåˆ¶ arrow æ‰§è¡Œè®¡ç®—å¹¶è¿”å›ä¸€äº›æ•°æ®ã€‚ä¾‹å¦‚ï¼Œè¿™æ®µä»£ç å‘Šè¯‰æˆ‘ä»¬æ¯å¹´çš„æ€»å€Ÿé˜…é‡ï¼š\n\nseattle_csv |&gt;\n    group_by(CheckoutYear) |&gt;\n    summarise(Checkouts = sum(Checkouts)) |&gt;\n    arrange(CheckoutYear) |&gt;\n    collect()\n#&gt; # A tibble: 18 Ã— 2\n#&gt;   CheckoutYear Checkouts\n#&gt;          &lt;int&gt;     &lt;int&gt;\n#&gt; 1         2005   3798685\n#&gt; 2         2006   6599318\n#&gt; 3         2007   7126627\n#&gt; 4         2008   8438486\n#&gt; 5         2009   9135167\n#&gt; 6         2010   8608966\n#&gt; # â„¹ 12 more rows\n\nå¤šäºäº† arrowï¼Œæ— è®ºåº•å±‚æ•°æ®é›†æœ‰å¤šå¤§ï¼Œè¿™æ®µä»£ç éƒ½èƒ½å·¥ä½œã€‚ä½†å®ƒç›®å‰ç›¸å½“æ…¢ï¼šåœ¨ Hadley çš„ç”µè„‘ä¸Šï¼Œå®ƒè¿è¡Œäº†å¤§çº¦ 10 ç§’ã€‚è€ƒè™‘åˆ°æˆ‘ä»¬æ‹¥æœ‰çš„æ•°æ®é‡ï¼Œè¿™ä¸ç®—å¤ªç³Ÿï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ‡æ¢åˆ°æ›´å¥½çš„æ ¼å¼æ¥ä½¿å…¶å¿«å¾—å¤šã€‚",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>22</span>Â  <span class='chapter-title'>Arrow</span>"
    ]
  },
  {
    "objectID": "arrow.html#sec-parquet",
    "href": "arrow.html#sec-parquet",
    "title": "22Â  Arrow",
    "section": "\n22.4 parquet æ ¼å¼",
    "text": "22.4 parquet æ ¼å¼\nä¸ºäº†è®©è¿™ä¸ªæ•°æ®æ›´å®¹æ˜“å¤„ç†ï¼Œè®©æˆ‘ä»¬åˆ‡æ¢åˆ° parquet æ–‡ä»¶æ ¼å¼ï¼Œå¹¶å°†å…¶åˆ†å‰²æˆå¤šä¸ªæ–‡ä»¶ã€‚æ¥ä¸‹æ¥çš„éƒ¨åˆ†å°†é¦–å…ˆå‘ä½ ä»‹ç» parquet å’Œåˆ†åŒº (partitioning)ï¼Œç„¶åå°†æˆ‘ä»¬å­¦åˆ°çš„çŸ¥è¯†åº”ç”¨åˆ°è¥¿é›…å›¾å›¾ä¹¦é¦†çš„æ•°æ®ä¸Šã€‚\n\n22.4.1 parquet çš„ä¼˜åŠ¿\nåƒ CSV ä¸€æ ·ï¼Œparquet ç”¨äºçŸ©å½¢æ•°æ®ï¼Œä½†å®ƒä¸æ˜¯ä¸€ä¸ªä½ å¯ä»¥ç”¨ä»»ä½•æ–‡ä»¶ç¼–è¾‘å™¨è¯»å–çš„æ–‡æœ¬æ ¼å¼ï¼Œè€Œæ˜¯ä¸€ä¸ªä¸“ä¸ºå¤§æ•°æ®éœ€æ±‚è®¾è®¡çš„è‡ªå®šä¹‰äºŒè¿›åˆ¶æ ¼å¼ã€‚è¿™æ„å‘³ç€ï¼š\n\nParquet æ–‡ä»¶é€šå¸¸æ¯”ç­‰æ•ˆçš„ CSV æ–‡ä»¶å°ã€‚Parquet ä¾èµ–äºé«˜æ•ˆçš„ç¼–ç æ–¹å¼æ¥å‡å°æ–‡ä»¶å¤§å°ï¼Œå¹¶æ”¯æŒæ–‡ä»¶å‹ç¼©ã€‚è¿™æœ‰åŠ©äºä½¿ parquet æ–‡ä»¶å¿«é€Ÿï¼Œå› ä¸ºä»ç£ç›˜ç§»åŠ¨åˆ°å†…å­˜çš„æ•°æ®æ›´å°‘ã€‚\nParquet æ–‡ä»¶æœ‰ä¸°å¯Œçš„ç±»å‹ç³»ç»Ÿã€‚æ­£å¦‚æˆ‘ä»¬åœ¨ Section 7.3 ä¸­è®¨è®ºçš„ï¼ŒCSV æ–‡ä»¶ä¸æä¾›ä»»ä½•å…³äºåˆ—ç±»å‹çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼ŒCSV è¯»å–å™¨å¿…é¡»çŒœæµ‹ \"08-10-2022\" åº”è¯¥è¢«è§£æä¸ºå­—ç¬¦ä¸²è¿˜æ˜¯æ—¥æœŸã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œparquet æ–‡ä»¶ä»¥ä¸€ç§è®°å½•äº†ç±»å‹å’Œæ•°æ®çš„æ–¹å¼å­˜å‚¨æ•°æ®ã€‚\nParquet æ–‡ä»¶æ˜¯â€œåˆ—å¼â€(column-oriented) çš„ã€‚è¿™æ„å‘³ç€å®ƒä»¬æ˜¯æŒ‰åˆ—ç»„ç»‡çš„ï¼Œå¾ˆåƒ R çš„æ•°æ®æ¡†ã€‚ä¸æŒ‰è¡Œç»„ç»‡çš„ CSV æ–‡ä»¶ç›¸æ¯”ï¼Œè¿™é€šå¸¸ä¸ºæ•°æ®åˆ†æä»»åŠ¡å¸¦æ¥æ›´å¥½çš„æ€§èƒ½ã€‚\nParquet æ–‡ä»¶æ˜¯â€œåˆ†å—â€(chunked) çš„ï¼Œè¿™ä½¿å¾—å¯ä»¥åŒæ—¶å¤„ç†æ–‡ä»¶çš„ä¸åŒéƒ¨åˆ†ï¼Œå¹¶ä¸”ï¼Œå¦‚æœä½ å¹¸è¿çš„è¯ï¼Œå¯ä»¥å®Œå…¨è·³è¿‡ä¸€äº›å—ã€‚\n\nparquet æ–‡ä»¶æœ‰ä¸€ä¸ªä¸»è¦ç¼ºç‚¹ï¼šå®ƒä»¬ä¸å†æ˜¯â€œäººç±»å¯è¯»çš„â€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ ç”¨ readr::read_file() æŸ¥çœ‹ä¸€ä¸ª parquet æ–‡ä»¶ï¼Œä½ åªä¼šçœ‹åˆ°ä¸€å †ä¹±ç ã€‚\n\n22.4.2 åˆ†åŒº (Partitioning)\néšç€æ•°æ®é›†å˜å¾—è¶Šæ¥è¶Šå¤§ï¼Œå°†æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨å•ä¸ªæ–‡ä»¶ä¸­å˜å¾—è¶Šæ¥è¶Šç—›è‹¦ï¼Œå°†å¤§æ•°æ®é›†åˆ†å‰²åˆ°å¤šä¸ªæ–‡ä»¶ä¸­é€šå¸¸å¾ˆæœ‰ç”¨ã€‚å½“è¿™ç§ç»“æ„åŒ–åšå¾—å·§å¦™æ—¶ï¼Œè¿™ç§ç­–ç•¥å¯ä»¥å¸¦æ¥æ˜¾è‘—çš„æ€§èƒ½æå‡ï¼Œå› ä¸ºè®¸å¤šåˆ†æåªä¼šéœ€è¦æ–‡ä»¶çš„ä¸€ä¸ªå­é›†ã€‚\nå…³äºå¦‚ä½•å¯¹ä½ çš„æ•°æ®é›†è¿›è¡Œåˆ†åŒºï¼Œæ²¡æœ‰ç¡¬æ€§è§„å®šï¼šç»“æœå°†å–å†³äºä½ çš„æ•°æ®ã€è®¿é—®æ¨¡å¼ä»¥åŠè¯»å–æ•°æ®çš„ç³»ç»Ÿã€‚ä½ å¯èƒ½éœ€è¦åšä¸€äº›å®éªŒæ‰èƒ½æ‰¾åˆ°é€‚åˆä½ æƒ…å†µçš„ç†æƒ³åˆ†åŒºæ–¹å¼ã€‚ä½œä¸ºä¸€ä¸ªç²—ç•¥çš„æŒ‡å—ï¼Œarrow å»ºè®®ä½ é¿å…å°äº 20MB å’Œå¤§äº 2GB çš„æ–‡ä»¶ï¼Œå¹¶é¿å…äº§ç”Ÿè¶…è¿‡ 10,000 ä¸ªæ–‡ä»¶çš„åˆ†åŒºã€‚ä½ è¿˜åº”è¯¥å°è¯•æŒ‰ä½ è¿‡æ»¤æ—¶ä½¿ç”¨çš„å˜é‡è¿›è¡Œåˆ†åŒºï¼›æ­£å¦‚ä½ ç¨åå°†çœ‹åˆ°çš„ï¼Œè¿™å…è®¸ arrow é€šè¿‡åªè¯»å–ç›¸å…³æ–‡ä»¶æ¥è·³è¿‡å¤§é‡å·¥ä½œã€‚\n\n22.4.3 é‡å†™è¥¿é›…å›¾å›¾ä¹¦é¦†æ•°æ®\nè®©æˆ‘ä»¬å°†è¿™äº›æƒ³æ³•åº”ç”¨åˆ°è¥¿é›…å›¾å›¾ä¹¦é¦†çš„æ•°æ®ä¸Šï¼Œçœ‹çœ‹å®ƒä»¬åœ¨å®è·µä¸­æ˜¯å¦‚ä½•å‘æŒ¥ä½œç”¨çš„ã€‚æˆ‘ä»¬å°†æŒ‰ CheckoutYear è¿›è¡Œåˆ†åŒºï¼Œå› ä¸ºå¾ˆå¯èƒ½ä¸€äº›åˆ†æåªæƒ³çœ‹æœ€è¿‘çš„æ•°æ®ï¼Œè€ŒæŒ‰å¹´åˆ†åŒºä¼šäº§ç”Ÿ 18 ä¸ªå¤§å°åˆç†çš„å—ã€‚\nä¸ºäº†é‡å†™æ•°æ®ï¼Œæˆ‘ä»¬ä½¿ç”¨ dplyr::group_by() å®šä¹‰åˆ†åŒºï¼Œç„¶åç”¨ arrow::write_dataset() å°†åˆ†åŒºä¿å­˜åˆ°ä¸€ä¸ªç›®å½•ä¸­ã€‚write_dataset() æœ‰ä¸¤ä¸ªé‡è¦çš„å‚æ•°ï¼šä¸€ä¸ªæ˜¯æˆ‘ä»¬å°†åœ¨å…¶ä¸­åˆ›å»ºæ–‡ä»¶çš„ç›®å½•ï¼Œå¦ä¸€ä¸ªæ˜¯æˆ‘ä»¬ä½¿ç”¨çš„æ ¼å¼ã€‚\n\npq_path &lt;- \"data/seattle-library-checkouts\"\n\n\n## | eval: !expr \"!file.exists(pq_path)\"\n\nseattle_csv |&gt;\n    group_by(CheckoutYear) |&gt;\n    write_dataset(path = pq_path, format = \"parquet\")\n\nè¿™éœ€è¦å¤§çº¦ä¸€åˆ†é’Ÿçš„æ—¶é—´æ¥è¿è¡Œï¼›æ­£å¦‚æˆ‘ä»¬ç¨åå°†çœ‹åˆ°çš„ï¼Œè¿™æ˜¯ä¸€é¡¹åˆæ­¥çš„æŠ•èµ„ï¼Œå®ƒé€šè¿‡ä½¿æœªæ¥çš„æ“ä½œå¿«å¾—å¤šæ¥å¾—åˆ°å›æŠ¥ã€‚\nè®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬åˆšåˆšäº§ç”Ÿäº†ä»€ä¹ˆï¼š\n\ntibble(\n    files = list.files(pq_path, recursive = TRUE),\n    size_MB = file.size(file.path(pq_path, files)) / 1024^2\n)\n#&gt; # A tibble: 18 Ã— 2\n#&gt;   files                            size_MB\n#&gt;   &lt;chr&gt;                              &lt;dbl&gt;\n#&gt; 1 CheckoutYear=2005/part-0.parquet    109.\n#&gt; 2 CheckoutYear=2006/part-0.parquet    164.\n#&gt; 3 CheckoutYear=2007/part-0.parquet    177.\n#&gt; 4 CheckoutYear=2008/part-0.parquet    194.\n#&gt; 5 CheckoutYear=2009/part-0.parquet    214.\n#&gt; 6 CheckoutYear=2010/part-0.parquet    222.\n#&gt; # â„¹ 12 more rows\n\næˆ‘ä»¬å•ä¸ª 9GB çš„ CSV æ–‡ä»¶è¢«é‡å†™æˆäº† 18 ä¸ª parquet æ–‡ä»¶ã€‚æ–‡ä»¶åä½¿ç”¨äº† Apache Hive é¡¹ç›®ä½¿ç”¨çš„â€œè‡ªæè¿°â€çº¦å®šã€‚Hive é£æ ¼çš„åˆ†åŒº (Hive-style partitions) ä½¿ç”¨â€œé”®=å€¼â€çš„çº¦å®šæ¥å‘½åæ–‡ä»¶å¤¹ï¼Œæ‰€ä»¥ä½ å¯èƒ½çŒœåˆ°ï¼ŒCheckoutYear=2005 ç›®å½•åŒ…å«äº†æ‰€æœ‰ CheckoutYear æ˜¯ 2005 çš„æ•°æ®ã€‚æ¯ä¸ªæ–‡ä»¶åœ¨ 100 åˆ° 300 MB ä¹‹é—´ï¼Œæ€»å¤§å°ç°åœ¨çº¦ä¸º 4 GBï¼Œç•¥å¤šäºåŸå§‹ CSV æ–‡ä»¶çš„ä¸€åŠå¤§å°ã€‚è¿™æ­£å¦‚æˆ‘ä»¬é¢„æœŸçš„é‚£æ ·ï¼Œå› ä¸º parquet æ˜¯ä¸€ç§æ›´é«˜æ•ˆçš„æ ¼å¼ã€‚",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>22</span>Â  <span class='chapter-title'>Arrow</span>"
    ]
  },
  {
    "objectID": "arrow.html#ç»“åˆä½¿ç”¨-dplyr-å’Œ-arrow",
    "href": "arrow.html#ç»“åˆä½¿ç”¨-dplyr-å’Œ-arrow",
    "title": "22Â  Arrow",
    "section": "\n22.5 ç»“åˆä½¿ç”¨ dplyr å’Œ arrow",
    "text": "22.5 ç»“åˆä½¿ç”¨ dplyr å’Œ arrow\nç°åœ¨æˆ‘ä»¬å·²ç»åˆ›å»ºäº†è¿™äº› parquet æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦å†æ¬¡è¯»å–å®ƒä»¬ã€‚æˆ‘ä»¬å†æ¬¡ä½¿ç”¨ open_dataset()ï¼Œä½†è¿™æ¬¡æˆ‘ä»¬ç»™å®ƒä¸€ä¸ªç›®å½•ï¼š\n\nseattle_pq &lt;- open_dataset(pq_path)\n\nç°åœ¨æˆ‘ä»¬å¯ä»¥ç¼–å†™æˆ‘ä»¬çš„ dplyr ç®¡é“äº†ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—è¿‡å»äº”å¹´ä¸­æ¯ä¸ªæœˆå€Ÿå‡ºçš„å›¾ä¹¦æ€»æ•°ï¼š\n\nquery &lt;- seattle_pq |&gt;\n    filter(CheckoutYear &gt;= 2018, MaterialType == \"BOOK\") |&gt;\n    group_by(CheckoutYear, CheckoutMonth) |&gt;\n    summarize(TotalCheckouts = sum(Checkouts)) |&gt;\n    arrange(CheckoutYear, CheckoutMonth)\n\nä¸º arrow æ•°æ®ç¼–å†™ dplyr ä»£ç åœ¨æ¦‚å¿µä¸Šä¸ dbplyr ç±»ä¼¼ï¼ŒChapter 21ï¼šä½ ç¼–å†™ dplyr ä»£ç ï¼Œå®ƒè¢«è‡ªåŠ¨è½¬æ¢ä¸º Apache Arrow C++ åº“èƒ½ç†è§£çš„æŸ¥è¯¢ï¼Œç„¶ååœ¨ä½ è°ƒç”¨ collect() æ—¶æ‰§è¡Œã€‚å¦‚æœæˆ‘ä»¬æ‰“å°å‡º query å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€äº›å…³äºæˆ‘ä»¬æœŸæœ› Arrow åœ¨æ‰§è¡Œå‘ç”Ÿæ—¶è¿”å›ä»€ä¹ˆçš„ä¿¡æ¯ï¼š\n\nquery\n#&gt; FileSystemDataset (query)\n#&gt; CheckoutYear: int32\n#&gt; CheckoutMonth: int64\n#&gt; TotalCheckouts: int64\n#&gt; \n#&gt; * Grouped by CheckoutYear\n#&gt; * Sorted by CheckoutYear [asc], CheckoutMonth [asc]\n#&gt; See $.data for the source Arrow object\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨ collect() æ¥å¾—åˆ°ç»“æœï¼š\n\n#&gt; # A tibble: 58 Ã— 3\n#&gt; # Groups:   CheckoutYear [5]\n#&gt;   CheckoutYear CheckoutMonth TotalCheckouts\n#&gt;          &lt;int&gt;         &lt;int&gt;          &lt;int&gt;\n#&gt; 1         2018             1         355101\n#&gt; 2         2018             2         309813\n#&gt; 3         2018             3         344487\n#&gt; 4         2018             4         330988\n#&gt; 5         2018             5         318049\n#&gt; 6         2018             6         341825\n#&gt; # â„¹ 52 more rows\n\nåƒ dbplyr ä¸€æ ·ï¼Œarrow åªç†è§£ä¸€äº› R è¡¨è¾¾å¼ï¼Œæ‰€ä»¥ä½ å¯èƒ½æ— æ³•ç¼–å†™ä¸å¹³æ—¶å®Œå…¨ç›¸åŒçš„ä»£ç ã€‚ç„¶è€Œï¼Œæ”¯æŒçš„æ“ä½œå’Œå‡½æ•°åˆ—è¡¨ç›¸å½“å¹¿æ³›ï¼Œå¹¶ä¸”åœ¨ä¸æ–­å¢é•¿ï¼›åœ¨ ?acero ä¸­å¯ä»¥æ‰¾åˆ°å½“å‰æ”¯æŒçš„å‡½æ•°çš„å®Œæ•´åˆ—è¡¨ã€‚\n\n22.5.1 æ€§èƒ½\nè®©æˆ‘ä»¬å¿«é€Ÿçœ‹ä¸€ä¸‹ä» CSV åˆ‡æ¢åˆ° parquet å¯¹æ€§èƒ½çš„å½±å“ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬è®¡æ—¶è®¡ç®— 2021 å¹´æ¯ä¸ªæœˆå€Ÿå‡ºçš„å›¾ä¹¦æ•°é‡éœ€è¦å¤šé•¿æ—¶é—´ï¼Œå½“æ•°æ®å­˜å‚¨ä¸ºå•ä¸ªå¤§å‹ csv æ—¶ï¼š\n\nseattle_csv |&gt;\n    filter(CheckoutYear == 2021, MaterialType == \"BOOK\") |&gt;\n    group_by(CheckoutMonth) |&gt;\n    summarize(TotalCheckouts = sum(Checkouts)) |&gt;\n    arrange(desc(CheckoutMonth)) |&gt;\n    collect() |&gt;\n    system.time()\n#&gt;  ç”¨æˆ·  ç³»ç»Ÿ  æµé€ \n#&gt; 11.53  1.61 11.09\n\nç°åœ¨è®©æˆ‘ä»¬ä½¿ç”¨æˆ‘ä»¬æ–°ç‰ˆæœ¬çš„æ•°æ®é›†ï¼Œå…¶ä¸­è¥¿é›…å›¾å›¾ä¹¦é¦†çš„å€Ÿé˜…æ•°æ®è¢«åˆ†æˆäº† 18 ä¸ªè¾ƒå°çš„ parquet æ–‡ä»¶ï¼š\n\nseattle_pq |&gt;\n    filter(CheckoutYear == 2021, MaterialType == \"BOOK\") |&gt;\n    group_by(CheckoutMonth) |&gt;\n    summarize(TotalCheckouts = sum(Checkouts)) |&gt;\n    arrange(desc(CheckoutMonth)) |&gt;\n    collect() |&gt;\n    system.time()\n#&gt; ç”¨æˆ· ç³»ç»Ÿ æµé€ \n#&gt; 0.29 0.00 0.11\n\næ€§èƒ½ä¸Šçº¦ 100 å€çš„æé€Ÿå½’å› äºä¸¤ä¸ªå› ç´ ï¼šå¤šæ–‡ä»¶åˆ†åŒºå’Œå•ä¸ªæ–‡ä»¶çš„æ ¼å¼ï¼š\n\nåˆ†åŒºæé«˜äº†æ€§èƒ½ï¼Œå› ä¸ºè¿™ä¸ªæŸ¥è¯¢ä½¿ç”¨ CheckoutYear == 2021 æ¥è¿‡æ»¤æ•°æ®ï¼Œè€Œ arrow è¶³å¤Ÿèªæ˜ï¼Œèƒ½è¯†åˆ«å‡ºå®ƒåªéœ€è¦è¯»å– 18 ä¸ª parquet æ–‡ä»¶ä¸­çš„ 1 ä¸ªã€‚\nparquet æ ¼å¼é€šè¿‡ä»¥äºŒè¿›åˆ¶æ ¼å¼å­˜å‚¨æ•°æ®æ¥æé«˜æ€§èƒ½ï¼Œè¿™ç§æ ¼å¼å¯ä»¥æ›´ç›´æ¥åœ°è¯»å…¥å†…å­˜ã€‚åˆ—å¼æ ¼å¼å’Œä¸°å¯Œçš„å…ƒæ•°æ®æ„å‘³ç€ arrow åªéœ€è¦è¯»å–æŸ¥è¯¢ä¸­å®é™…ä½¿ç”¨çš„å››åˆ—ï¼ˆCheckoutYearã€MaterialTypeã€CheckoutMonth å’Œ Checkoutsï¼‰ã€‚\n\nè¿™ç§å·¨å¤§çš„æ€§èƒ½å·®å¼‚å°±æ˜¯ä¸ºä»€ä¹ˆå°†å¤§å‹ CSV è½¬æ¢ä¸º parquet æ˜¯å€¼å¾—çš„ï¼\n\n22.5.2 ç»“åˆä½¿ç”¨ duckdb å’Œ arrow\nparquet å’Œ arrow è¿˜æœ‰ä¸€ä¸ªæœ€åçš„ä¼˜åŠ¿â€”â€”é€šè¿‡è°ƒç”¨ arrow::to_duckdb()ï¼Œå°† arrow æ•°æ®é›†è½¬æ¢ä¸º DuckDB æ•°æ®åº“ï¼ˆChapter 21ï¼‰éå¸¸å®¹æ˜“ï¼š\n\nseattle_pq |&gt;\n    to_duckdb() |&gt;\n    filter(CheckoutYear &gt;= 2018, MaterialType == \"BOOK\") |&gt;\n    group_by(CheckoutYear) |&gt;\n    summarize(TotalCheckouts = sum(Checkouts)) |&gt;\n    arrange(desc(CheckoutYear)) |&gt;\n    collect()\n#&gt; Warning: Missing values are always removed in SQL aggregation functions.\n#&gt; Use `na.rm = TRUE` to silence this warning\n#&gt; This warning is displayed once every 8 hours.\n#&gt; # A tibble: 5 Ã— 2\n#&gt;   CheckoutYear TotalCheckouts\n#&gt;          &lt;int&gt;          &lt;dbl&gt;\n#&gt; 1         2022        2431502\n#&gt; 2         2021        2266438\n#&gt; 3         2020        1241999\n#&gt; 4         2019        3931688\n#&gt; 5         2018        3987569\n\nto_duckdb() çš„å¦™å¤„åœ¨äºä¼ è¾“ä¸æ¶‰åŠä»»ä½•å†…å­˜å¤åˆ¶ï¼Œè¿™ä½“ç°äº† arrow ç”Ÿæ€ç³»ç»Ÿçš„ç›®æ ‡ï¼šå®ç°ä»ä¸€ä¸ªè®¡ç®—ç¯å¢ƒåˆ°å¦ä¸€ä¸ªè®¡ç®—ç¯å¢ƒçš„æ— ç¼è¿‡æ¸¡ã€‚\n\n22.5.3 ç»ƒä¹ \n\næ‰¾å‡ºæ¯å¹´æœ€å—æ¬¢è¿çš„ä¹¦ã€‚\nå“ªä½ä½œè€…åœ¨è¥¿é›…å›¾å›¾ä¹¦é¦†ç³»ç»Ÿä¸­çš„å›¾ä¹¦æœ€å¤šï¼Ÿ\nåœ¨è¿‡å» 10 å¹´ä¸­ï¼Œå®ä½“ä¹¦ä¸ç”µå­ä¹¦çš„å€Ÿé˜…æƒ…å†µæ˜¯å¦‚ä½•å˜åŒ–çš„ï¼Ÿ",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>22</span>Â  <span class='chapter-title'>Arrow</span>"
    ]
  },
  {
    "objectID": "arrow.html#æ€»ç»“",
    "href": "arrow.html#æ€»ç»“",
    "title": "22Â  Arrow",
    "section": "\n22.6 æ€»ç»“",
    "text": "22.6 æ€»ç»“\nåœ¨æœ¬ç« ä¸­ï¼Œä½ åˆæ­¥äº†è§£äº† arrow åŒ…ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªç”¨äºå¤„ç†å¤§å‹ç£ç›˜æ•°æ®é›†çš„ dplyr åç«¯ã€‚å®ƒå¯ä»¥å¤„ç† CSV æ–‡ä»¶ï¼Œä½†å¦‚æœä½ å°†æ•°æ®è½¬æ¢ä¸º parquetï¼Œé€Ÿåº¦ä¼šå¿«å¾—å¤šã€‚Parquet æ˜¯ä¸€ç§ä¸“ä¸ºç°ä»£è®¡ç®—æœºä¸Šçš„æ•°æ®åˆ†æè€Œè®¾è®¡çš„äºŒè¿›åˆ¶æ•°æ®æ ¼å¼ã€‚ä¸ CSV ç›¸æ¯”ï¼Œèƒ½å¤„ç† parquet æ–‡ä»¶çš„å·¥å…·è¦å°‘å¾—å¤šï¼Œä½†å…¶åˆ†åŒºã€å‹ç¼©å’Œåˆ—å¼ç»“æ„ä½¿å…¶åˆ†ææ•ˆç‡é«˜å¾—å¤šã€‚\næ¥ä¸‹æ¥ï¼Œä½ å°†å­¦ä¹ ä½ çš„ç¬¬ä¸€ä¸ªéçŸ©å½¢æ•°æ®æºï¼Œä½ å°†ä½¿ç”¨ tidyr åŒ…æä¾›çš„å·¥å…·æ¥å¤„ç†å®ƒã€‚æˆ‘ä»¬å°†ä¸“æ³¨äºæ¥è‡ª JSON æ–‡ä»¶çš„æ•°æ®ï¼Œä½†é€šç”¨åŸåˆ™é€‚ç”¨äºä»»ä½•æ ‘çŠ¶æ•°æ®ï¼Œæ— è®ºå…¶æ¥æºå¦‚ä½•ã€‚",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>22</span>Â  <span class='chapter-title'>Arrow</span>"
    ]
  },
  {
    "objectID": "rectangling.html",
    "href": "rectangling.html",
    "title": "23Â  å±‚çº§æ•°æ®",
    "section": "",
    "text": "23.1 å¼•è¨€\nåœ¨æœ¬ç« ä¸­ï¼Œä½ å°†å­¦ä¹ æ•°æ® çŸ©å½¢åŒ– (rectangling) çš„è‰ºæœ¯ï¼šå°†æœ¬è´¨ä¸Šæ˜¯å±‚çº§ç»“æ„æˆ–æ ‘çŠ¶ç»“æ„çš„æ•°æ®ï¼Œè½¬æ¢ä¸ºç”±è¡Œå’Œåˆ—ç»„æˆçš„çŸ©å½¢æ•°æ®æ¡†ã€‚è¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼Œå› ä¸ºå±‚çº§æ•°æ®éå¸¸æ™®éï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†æ¥è‡ªç½‘ç»œçš„æ•°æ®æ—¶ã€‚\nè¦å­¦ä¹ æ•°æ®çŸ©å½¢åŒ–ï¼Œä½ é¦–å…ˆéœ€è¦äº†è§£åˆ—è¡¨ (list)ï¼Œè¿™ç§æ•°æ®ç»“æ„ä½¿å¾—å±‚çº§æ•°æ®æˆä¸ºå¯èƒ½ã€‚ç„¶åï¼Œä½ å°†å­¦ä¹ ä¸¤ä¸ªå…³é”®çš„ tidyr å‡½æ•°ï¼štidyr::unnest_longer() å’Œ tidyr::unnest_wider()ã€‚æ¥ç€ï¼Œæˆ‘ä»¬å°†é€šè¿‡å‡ ä¸ªæ¡ˆä¾‹ç ”ç©¶ï¼Œåå¤åº”ç”¨è¿™äº›ç®€å•çš„å‡½æ•°æ¥è§£å†³å®é™…é—®é¢˜ã€‚æœ€åï¼Œæˆ‘ä»¬å°†è®¨è®º JSONï¼Œå®ƒæ˜¯å±‚çº§æ•°æ®é›†æœ€å¸¸è§çš„æ¥æºï¼Œä¹Ÿæ˜¯ç½‘ç»œä¸Šä¸€ç§å¸¸ç”¨çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>23</span>Â  <span class='chapter-title'>å±‚çº§æ•°æ®</span>"
    ]
  },
  {
    "objectID": "rectangling.html#å¼•è¨€",
    "href": "rectangling.html#å¼•è¨€",
    "title": "23Â  å±‚çº§æ•°æ®",
    "section": "",
    "text": "23.1.1 å…ˆå†³æ¡ä»¶\nåœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ tidyr åŒ…ä¸­çš„è®¸å¤šå‡½æ•°ï¼Œå®ƒæ˜¯ tidyverse çš„æ ¸å¿ƒæˆå‘˜ã€‚æˆ‘ä»¬è¿˜å°†ä½¿ç”¨ repurrrsive åŒ…æ¥æä¾›ä¸€äº›æœ‰è¶£çš„æ•°æ®é›†ç”¨äºçŸ©å½¢åŒ–ç»ƒä¹ ï¼Œæœ€åæˆ‘ä»¬å°†ä½¿ç”¨ jsonlite åŒ…å°† JSON æ–‡ä»¶è¯»å…¥ R åˆ—è¡¨ã€‚\n\nlibrary(tidyverse)\nlibrary(repurrrsive)\nlibrary(jsonlite)",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>23</span>Â  <span class='chapter-title'>å±‚çº§æ•°æ®</span>"
    ]
  },
  {
    "objectID": "rectangling.html#åˆ—è¡¨",
    "href": "rectangling.html#åˆ—è¡¨",
    "title": "23Â  å±‚çº§æ•°æ®",
    "section": "\n23.2 åˆ—è¡¨",
    "text": "23.2 åˆ—è¡¨\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ æ‰€å¤„ç†çš„æ•°æ®æ¡†éƒ½åŒ…å«ç®€å•çš„å‘é‡ï¼Œå¦‚æ•´æ•°ã€æ•°å­—ã€å­—ç¬¦ã€æ—¥æœŸæ—¶é—´å’Œå› å­ã€‚è¿™äº›å‘é‡ä¹‹æ‰€ä»¥ç®€å•ï¼Œæ˜¯å› ä¸ºå®ƒä»¬æ˜¯åŒè´¨çš„ (homogeneous)ï¼šæ¯ä¸ªå…ƒç´ éƒ½å…·æœ‰ç›¸åŒçš„æ•°æ®ç±»å‹ã€‚å¦‚æœä½ æƒ³åœ¨åŒä¸€ä¸ªå‘é‡ä¸­å­˜å‚¨ä¸åŒç±»å‹çš„å…ƒç´ ï¼Œä½ å°±éœ€è¦ä¸€ä¸ª åˆ—è¡¨ (list)ï¼Œä½ å¯ä»¥ç”¨ list() æ¥åˆ›å»ºå®ƒï¼š\n\nx1 &lt;- list(1:4, \"a\", TRUE)\nx1\n#&gt; [[1]]\n#&gt; [1] 1 2 3 4\n#&gt; \n#&gt; [[2]]\n#&gt; [1] \"a\"\n#&gt; \n#&gt; [[3]]\n#&gt; [1] TRUE\n\nä¸ºåˆ—è¡¨çš„ç»„ä»¶ (component) æˆ– å­å…ƒç´  (children) å‘½åé€šå¸¸å¾ˆæ–¹ä¾¿ï¼Œè¿™å’Œä¸º tibble çš„åˆ—å‘½åçš„æ–¹å¼ç›¸åŒï¼š\n\nx2 &lt;- list(a = 1:2, b = 1:3, c = 1:4)\nx2\n#&gt; $a\n#&gt; [1] 1 2\n#&gt; \n#&gt; $b\n#&gt; [1] 1 2 3\n#&gt; \n#&gt; $c\n#&gt; [1] 1 2 3 4\n\nå³ä½¿å¯¹äºè¿™äº›éå¸¸ç®€å•çš„åˆ—è¡¨ï¼Œæ‰“å°å‡ºæ¥ä¹Ÿä¼šå ç”¨ç›¸å½“å¤§çš„ç©ºé—´ã€‚ä¸€ä¸ªæœ‰ç”¨çš„æ›¿ä»£æ–¹æ³•æ˜¯ str()ï¼Œå®ƒä¼šç”Ÿæˆä¸€ä¸ªç´§å‡‘çš„ ç»“æ„ (structure) å±•ç¤ºï¼Œæ·¡åŒ–å…¶å†…å®¹ï¼š\n\nstr(x1)\n#&gt; List of 3\n#&gt;  $ : int [1:4] 1 2 3 4\n#&gt;  $ : chr \"a\"\n#&gt;  $ : logi TRUE\nstr(x2)\n#&gt; List of 3\n#&gt;  $ a: int [1:2] 1 2\n#&gt;  $ b: int [1:3] 1 2 3\n#&gt;  $ c: int [1:4] 1 2 3 4\n\nå¦‚ä½ æ‰€è§ï¼Œstr() å°†åˆ—è¡¨çš„æ¯ä¸ªå­å…ƒç´ æ˜¾ç¤ºåœ¨å•ç‹¬çš„ä¸€è¡Œä¸Šã€‚å®ƒä¼šæ˜¾ç¤ºåç§° (å¦‚æœå­˜åœ¨)ï¼Œç„¶åæ˜¯ç±»å‹çš„ç¼©å†™ï¼Œæœ€åæ˜¯å‰å‡ ä¸ªå€¼ã€‚\n\n23.2.1 å±‚çº§ç»“æ„\nåˆ—è¡¨å¯ä»¥åŒ…å«ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬å…¶ä»–åˆ—è¡¨ã€‚è¿™ä½¿å¾—å®ƒä»¬éå¸¸é€‚åˆè¡¨ç¤ºå±‚çº§ (æ ‘çŠ¶) ç»“æ„ï¼š\n\nx3 &lt;- list(list(1, 2), list(3, 4))\nstr(x3)\n#&gt; List of 2\n#&gt;  $ :List of 2\n#&gt;   ..$ : num 1\n#&gt;   ..$ : num 2\n#&gt;  $ :List of 2\n#&gt;   ..$ : num 3\n#&gt;   ..$ : num 4\n\nè¿™ä¸ c() æœ‰æ˜¾è‘—ä¸åŒï¼Œc() ä¼šç”Ÿæˆä¸€ä¸ªæ‰å¹³çš„å‘é‡ï¼š\n\nc(c(1, 2), c(3, 4))\n#&gt; [1] 1 2 3 4\n\nx4 &lt;- c(list(1, 2), list(3, 4))\nstr(x4)\n#&gt; List of 4\n#&gt;  $ : num 1\n#&gt;  $ : num 2\n#&gt;  $ : num 3\n#&gt;  $ : num 4\n\néšç€åˆ—è¡¨å˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œstr() çš„ä½œç”¨ä¹Ÿè¶Šæ¥è¶Šå¤§ï¼Œå› ä¸ºå®ƒèƒ½è®©ä½ ä¸€ç›®äº†ç„¶åœ°çœ‹åˆ°å±‚çº§ç»“æ„ï¼š\n\nx5 &lt;- list(1, list(2, list(3, list(4, list(5)))))\nstr(x5)\n#&gt; List of 2\n#&gt;  $ : num 1\n#&gt;  $ :List of 2\n#&gt;   ..$ : num 2\n#&gt;   ..$ :List of 2\n#&gt;   .. ..$ : num 3\n#&gt;   .. ..$ :List of 2\n#&gt;   .. .. ..$ : num 4\n#&gt;   .. .. ..$ :List of 1\n#&gt;   .. .. .. ..$ : num 5\n\nå½“åˆ—è¡¨å˜å¾—æ›´å¤§ã€æ›´å¤æ‚æ—¶ï¼Œstr() æœ€ç»ˆä¼šå¼€å§‹å¤±æ•ˆï¼Œè¿™æ—¶ä½ å°±éœ€è¦åˆ‡æ¢åˆ° View()1ã€‚FigureÂ 23.1 å±•ç¤ºäº†è°ƒç”¨ View(x5) çš„ç»“æœã€‚æŸ¥çœ‹å™¨å¼€å§‹åªæ˜¾ç¤ºåˆ—è¡¨çš„é¡¶å±‚ï¼Œä½†ä½ å¯ä»¥äº¤äº’åœ°å±•å¼€ä»»ä½•ç»„ä»¶ä»¥æŸ¥çœ‹æ›´å¤šå†…å®¹ï¼Œå¦‚ FigureÂ 23.2 æ‰€ç¤ºã€‚RStudio è¿˜ä¼šæ˜¾ç¤ºè®¿é—®è¯¥å…ƒç´ æ‰€éœ€å†™çš„ä»£ç ï¼Œå¦‚ FigureÂ 23.3 æ‰€ç¤ºã€‚æˆ‘ä»¬å°†åœ¨ Section 27.3 å›é¡¾è¿™æ®µä»£ç æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚\n\n\n\n\n\n\n\nFigureÂ 23.1: RStudio çš„è§†å›¾è®©ä½ èƒ½å¤Ÿäº¤äº’å¼åœ°æ¢ç´¢ä¸€ä¸ªå¤æ‚çš„åˆ—è¡¨ã€‚ æŸ¥çœ‹å™¨æ‰“å¼€æ—¶åªæ˜¾ç¤ºåˆ—è¡¨çš„é¡¶å±‚ã€‚\n\n\n\n\n\n\n\n\n\n\n\nFigureÂ 23.2: ç‚¹å‡»æœå³çš„ä¸‰è§’å½¢ä¼šå±•å¼€è¯¥åˆ—è¡¨ç»„ä»¶ï¼Œè¿™æ ·ä½ ä¹Ÿå¯ä»¥çœ‹åˆ°å®ƒçš„å­å…ƒç´ ã€‚\n\n\n\n\n\n\n\n\n\n\n\nFigureÂ 23.3: ä½ å¯ä»¥æ ¹æ®éœ€è¦é‡å¤æ­¤æ“ä½œå¤šæ¬¡ï¼Œä»¥æ‰¾åˆ°ä½ æ„Ÿå…´è¶£çš„æ•°æ®ã€‚æ³¨æ„å·¦ä¸‹è§’ï¼š å¦‚æœä½ ç‚¹å‡»åˆ—è¡¨ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼ŒRStudio ä¼šç»™ä½ æä¾›è®¿é—®å®ƒæ‰€éœ€çš„å­é›†ä»£ç ï¼Œ åœ¨æœ¬ä¾‹ä¸­æ˜¯ x5[[2]][[2]][[2]]ã€‚\n\n\n\n\n\n23.2.2 åˆ—è¡¨åˆ—\nåˆ—è¡¨ä¹Ÿå¯ä»¥å­˜åœ¨äº tibble ä¸­ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºåˆ—è¡¨åˆ— (list-columns)ã€‚åˆ—è¡¨åˆ—å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºå®ƒä»¬å…è®¸ä½ å°†é€šå¸¸ä¸å±äºæ•°æ®æ¡†çš„å¯¹è±¡æ”¾å…¥å…¶ä¸­ã€‚ç‰¹åˆ«åœ°ï¼Œåˆ—è¡¨åˆ—åœ¨ tidymodels ç”Ÿæ€ç³»ç»Ÿä¸­ä½¿ç”¨å¾ˆå¤šï¼Œå› ä¸ºå®ƒä»¬å…è®¸ä½ å°†æ¨¡å‹è¾“å‡ºæˆ–é‡é‡‡æ ·ç­‰å†…å®¹å­˜å‚¨åœ¨æ•°æ®æ¡†ä¸­ã€‚\nä¸‹é¢æ˜¯åˆ—è¡¨åˆ—çš„ä¸€ä¸ªç®€å•ç¤ºä¾‹ï¼š\n\ndf &lt;- tibble(\n  x = 1:2, \n  y = c(\"a\", \"b\"),\n  z = list(list(1, 2), list(3, 4, 5))\n)\ndf\n#&gt; # A tibble: 2 Ã— 3\n#&gt;       x y     z         \n#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;    \n#&gt; 1     1 a     &lt;list [2]&gt;\n#&gt; 2     2 b     &lt;list [3]&gt;\n\ntibble ä¸­çš„åˆ—è¡¨æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«ä¹‹å¤„ï¼›å®ƒä»¬çš„è¡Œä¸ºå°±åƒä»»ä½•å…¶ä»–åˆ—ä¸€æ ·ï¼š\n\ndf |&gt; \n  filter(x == 1)\n#&gt; # A tibble: 1 Ã— 3\n#&gt;       x y     z         \n#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;    \n#&gt; 1     1 a     &lt;list [2]&gt;\n\nä½¿ç”¨åˆ—è¡¨åˆ—è¿›è¡Œè®¡ç®—æ›´åŠ å›°éš¾ï¼Œä½†è¿™æ˜¯å› ä¸ºé€šå¸¸ä½¿ç”¨åˆ—è¡¨è¿›è¡Œè®¡ç®—å°±æ›´å›°éš¾ï¼›æˆ‘ä»¬å°†åœ¨ Chapter 26 ä¸­å†è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä¸“æ³¨äºå°†åˆ—è¡¨åˆ—å±•å¼€ (unnest) ä¸ºå¸¸è§„å˜é‡ï¼Œä»¥ä¾¿ä½ å¯ä»¥ä½¿ç”¨ç°æœ‰çš„å·¥å…·æ¥å¤„ç†å®ƒä»¬ã€‚\né»˜è®¤çš„æ‰“å°æ–¹æ³•åªæ˜¾ç¤ºå†…å®¹çš„ç²—ç•¥æ‘˜è¦ã€‚åˆ—è¡¨åˆ—å¯èƒ½ä»»æ„å¤æ‚ï¼Œæ‰€ä»¥æ²¡æœ‰å¾ˆå¥½çš„æ–¹æ³•æ¥æ‰“å°å®ƒã€‚å¦‚æœä½ æƒ³æŸ¥çœ‹å®ƒï¼Œä½ éœ€è¦å•ç‹¬æŠ½å–å‡ºé‚£ä¸ªåˆ—è¡¨åˆ—ï¼Œå¹¶åº”ç”¨ä½ ä¸Šé¢å­¦åˆ°çš„æŠ€æœ¯ä¹‹ä¸€ï¼Œæ¯”å¦‚ df |&gt; pull(z) |&gt; str() æˆ– df |&gt; pull(z) |&gt; View()ã€‚\n\n\n\n\n\n\nåŸºç¡€ R\n\n\n\nå¯ä»¥å°†åˆ—è¡¨æ”¾å…¥ data.frame çš„ä¸€åˆ—ä¸­ï¼Œä½†è¿™è¦éº»çƒ¦å¾—å¤šï¼Œå› ä¸º data.frame() å°†åˆ—è¡¨è§†ä¸ºåˆ—çš„åˆ—è¡¨ï¼š\n\ndata.frame(x = list(1:3, 3:5))\n#&gt;   x.1.3 x.3.5\n#&gt; 1     1     3\n#&gt; 2     2     4\n#&gt; 3     3     5\n\nä½ å¯ä»¥é€šè¿‡å°†å…¶åŒ…è£…åœ¨ I() ä¸­æ¥å¼ºåˆ¶ data.frame() å°†åˆ—è¡¨è§†ä¸ºè¡Œçš„åˆ—è¡¨ï¼Œä½†ç»“æœæ‰“å°å¾—ä¸æ˜¯å¾ˆå¥½ï¼š\n\ndata.frame(\n  x = I(list(1:2, 3:5)), \n  y = c(\"1, 2\", \"3, 4, 5\")\n)\n#&gt;         x       y\n#&gt; 1    1, 2    1, 2\n#&gt; 2 3, 4, 5 3, 4, 5\n\nä½¿ç”¨ tibble çš„åˆ—è¡¨åˆ—æ›´å®¹æ˜“ï¼Œå› ä¸º tibble() å°†åˆ—è¡¨è§†ä¸ºå‘é‡ï¼Œå¹¶ä¸”å…¶æ‰“å°æ–¹æ³•æ˜¯ä¸ºåˆ—è¡¨è®¾è®¡çš„ã€‚",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>23</span>Â  <span class='chapter-title'>å±‚çº§æ•°æ®</span>"
    ]
  },
  {
    "objectID": "rectangling.html#å±•å¼€",
    "href": "rectangling.html#å±•å¼€",
    "title": "23Â  å±‚çº§æ•°æ®",
    "section": "\n23.3 å±•å¼€",
    "text": "23.3 å±•å¼€\næ—¢ç„¶ä½ å·²ç»å­¦ä¹ äº†åˆ—è¡¨å’Œåˆ—è¡¨åˆ—çš„åŸºç¡€çŸ¥è¯†ï¼Œè®©æˆ‘ä»¬æ¥æ¢è®¨å¦‚ä½•å°†å®ƒä»¬å˜å›å¸¸è§„çš„è¡Œå’Œåˆ—ã€‚è¿™é‡Œæˆ‘ä»¬å°†ä½¿ç”¨éå¸¸ç®€å•çš„ç¤ºä¾‹æ•°æ®ï¼Œä»¥ä¾¿ä½ äº†è§£åŸºæœ¬æ€æƒ³ï¼›åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†åˆ‡æ¢åˆ°çœŸå®æ•°æ®ã€‚\nåˆ—è¡¨åˆ—å€¾å‘äºä»¥ä¸¤ç§åŸºæœ¬å½¢å¼å‡ºç°ï¼šå‘½åçš„å’Œæœªå‘½åçš„ã€‚å½“å­å…ƒç´ æ˜¯ å‘½å çš„æ—¶ï¼Œå®ƒä»¬åœ¨æ¯ä¸€è¡Œä¸­å¾€å¾€å…·æœ‰ç›¸åŒçš„åç§°ã€‚ä¾‹å¦‚ï¼Œåœ¨ df1 ä¸­ï¼Œåˆ—è¡¨åˆ— y çš„æ¯ä¸ªå…ƒç´ éƒ½æœ‰ä¸¤ä¸ªåä¸º a å’Œ b çš„å…ƒç´ ã€‚å‘½åçš„åˆ—è¡¨åˆ—å¾ˆè‡ªç„¶åœ°å±•å¼€ä¸ºåˆ—ï¼šæ¯ä¸ªå‘½åå…ƒç´ éƒ½æˆä¸ºä¸€ä¸ªæ–°çš„å‘½ååˆ—ã€‚\n\ndf1 &lt;- tribble(\n  ~x, ~y,\n  1, list(a = 11, b = 12),\n  2, list(a = 21, b = 22),\n  3, list(a = 31, b = 32),\n)\n\nå½“å­å…ƒç´ æ˜¯ æœªå‘½å çš„æ—¶ï¼Œå…ƒç´ çš„æ•°é‡å¾€å¾€å› è¡Œè€Œå¼‚ã€‚ä¾‹å¦‚ï¼Œåœ¨ df2 ä¸­ï¼Œåˆ—è¡¨åˆ— y çš„å…ƒç´ æ˜¯æœªå‘½åçš„ï¼Œé•¿åº¦ä»ä¸€åˆ°ä¸‰ä¸ç­‰ã€‚æœªå‘½åçš„åˆ—è¡¨åˆ—å¾ˆè‡ªç„¶åœ°å±•å¼€ä¸ºè¡Œï¼šæ¯ä¸ªå­å…ƒç´ å°†å¾—åˆ°ä¸€è¡Œã€‚\n\ndf2 &lt;- tribble(\n  ~x, ~y,\n  1, list(11, 12, 13),\n  2, list(21),\n  3, list(31, 32),\n)\n\ntidyr ä¸ºè¿™ä¸¤ç§æƒ…å†µæä¾›äº†ä¸¤ä¸ªå‡½æ•°ï¼šunnest_wider() å’Œ unnest_longer()ã€‚ä»¥ä¸‹å„èŠ‚å°†è§£é‡Šå®ƒä»¬å¦‚ä½•å·¥ä½œã€‚\n\n23.3.1 unnest_wider()\n\nå½“æ¯ä¸€è¡Œéƒ½æœ‰ç›¸åŒæ•°é‡ä¸”åç§°ç›¸åŒçš„å…ƒç´ æ—¶ï¼Œæ¯”å¦‚ df1ï¼Œå¾ˆè‡ªç„¶åœ°å¯ä»¥ç”¨ unnest_wider() å°†æ¯ä¸ªç»„ä»¶æ”¾å…¥å…¶è‡ªå·±çš„åˆ—ä¸­ï¼š\n\ndf1 |&gt; \n  unnest_wider(y)\n#&gt; # A tibble: 3 Ã— 3\n#&gt;       x     a     b\n#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1     1    11    12\n#&gt; 2     2    21    22\n#&gt; 3     3    31    32\n\né»˜è®¤æƒ…å†µä¸‹ï¼Œæ–°åˆ—çš„åç§°å®Œå…¨æ¥è‡ªåˆ—è¡¨å…ƒç´ çš„åç§°ï¼Œä½†ä½ å¯ä»¥ä½¿ç”¨ names_sep å‚æ•°æ¥è¦æ±‚å®ƒä»¬å°†åˆ—åå’Œå…ƒç´ åç»„åˆèµ·æ¥ã€‚è¿™å¯¹äºæ¶ˆé™¤é‡å¤çš„åç§°å¾ˆæœ‰ç”¨ã€‚\n\ndf1 |&gt; \n  unnest_wider(y, names_sep = \"_\")\n#&gt; # A tibble: 3 Ã— 3\n#&gt;       x   y_a   y_b\n#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1     1    11    12\n#&gt; 2     2    21    22\n#&gt; 3     3    31    32\n\n\n23.3.2 unnest_longer()\n\nå½“æ¯ä¸€è¡Œéƒ½åŒ…å«ä¸€ä¸ªæœªå‘½åçš„åˆ—è¡¨æ—¶ï¼Œæœ€è‡ªç„¶çš„æ–¹å¼æ˜¯ç”¨ unnest_longer() å°†æ¯ä¸ªå…ƒç´ æ”¾å…¥å…¶è‡ªå·±çš„è¡Œä¸­ï¼š\n\ndf2 |&gt; \n  unnest_longer(y)\n#&gt; # A tibble: 6 Ã— 2\n#&gt;       x     y\n#&gt;   &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1     1    11\n#&gt; 2     1    12\n#&gt; 3     1    13\n#&gt; 4     2    21\n#&gt; 5     3    31\n#&gt; 6     3    32\n\nè¯·æ³¨æ„ x æ˜¯å¦‚ä½•ä¸º y ä¸­çš„æ¯ä¸ªå…ƒç´ å¤åˆ¶çš„ï¼šå¯¹äºåˆ—è¡¨åˆ—ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬éƒ½ä¼šå¾—åˆ°ä¸€è¡Œè¾“å‡ºã€‚ä½†æ˜¯ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªå…ƒç´ æ˜¯ç©ºçš„ï¼Œå¦‚ä¸‹é¢çš„ä¾‹å­æ‰€ç¤ºï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ\n\ndf6 &lt;- tribble(\n  ~x, ~y,\n  \"a\", list(1, 2),\n  \"b\", list(3),\n  \"c\", list()\n)\ndf6 |&gt; unnest_longer(y)\n#&gt; # A tibble: 3 Ã— 2\n#&gt;   x         y\n#&gt;   &lt;chr&gt; &lt;dbl&gt;\n#&gt; 1 a         1\n#&gt; 2 a         2\n#&gt; 3 b         3\n\næˆ‘ä»¬åœ¨è¾“å‡ºä¸­å¾—åˆ°é›¶è¡Œï¼Œæ‰€ä»¥è¯¥è¡Œå®é™…ä¸Šæ¶ˆå¤±äº†ã€‚å¦‚æœä½ æƒ³ä¿ç•™é‚£ä¸€è¡Œï¼Œå¹¶åœ¨ y ä¸­æ·»åŠ  NAï¼Œè¯·è®¾ç½® keep_empty = TRUEã€‚\n\n23.3.3 ç±»å‹ä¸ä¸€è‡´\nå¦‚æœä½ å±•å¼€ä¸€ä¸ªåŒ…å«ä¸åŒç±»å‹å‘é‡çš„åˆ—è¡¨åˆ—ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿä¾‹å¦‚ï¼Œçœ‹ä¸‹é¢çš„æ•°æ®é›†ï¼Œå…¶ä¸­åˆ—è¡¨åˆ— y åŒ…å«ä¸¤ä¸ªæ•°å­—ã€ä¸€ä¸ªå­—ç¬¦å’Œä¸€ä¸ªé€»è¾‘å€¼ï¼Œè¿™äº›é€šå¸¸ä¸èƒ½æ··åˆåœ¨å•ä¸ªåˆ—ä¸­ã€‚\n\ndf4 &lt;- tribble(\n  ~x, ~y,\n  \"a\", list(1),\n  \"b\", list(\"a\", TRUE, 5)\n)\n\nunnest_longer() æ€»æ˜¯ä¿æŒåˆ—é›†åˆä¸å˜ï¼ŒåŒæ—¶æ”¹å˜è¡Œçš„æ•°é‡ã€‚é‚£ä¹ˆä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿunnest_longer() å¦‚ä½•åœ¨ä¿æŒ y ä¸­æ‰€æœ‰å†…å®¹çš„åŒæ—¶äº§ç”Ÿäº”è¡Œï¼Ÿ\n\ndf4 |&gt; \n  unnest_longer(y)\n#&gt; # A tibble: 4 Ã— 2\n#&gt;   x     y        \n#&gt;   &lt;chr&gt; &lt;list&gt;   \n#&gt; 1 a     &lt;dbl [1]&gt;\n#&gt; 2 b     &lt;chr [1]&gt;\n#&gt; 3 b     &lt;lgl [1]&gt;\n#&gt; 4 b     &lt;dbl [1]&gt;\n\nå¦‚ä½ æ‰€è§ï¼Œè¾“å‡ºåŒ…å«ä¸€ä¸ªåˆ—è¡¨åˆ—ï¼Œä½†è¯¥åˆ—è¡¨åˆ—çš„æ¯ä¸ªå…ƒç´ éƒ½åŒ…å«ä¸€ä¸ªå•ä¸€å…ƒç´ ã€‚å› ä¸º unnest_longer() æ‰¾ä¸åˆ°ä¸€ä¸ªé€šç”¨çš„å‘é‡ç±»å‹ï¼Œå®ƒå°†åŸå§‹ç±»å‹ä¿ç•™åœ¨ä¸€ä¸ªåˆ—è¡¨åˆ—ä¸­ã€‚ä½ å¯èƒ½ä¼šæƒ³ï¼Œè¿™æ˜¯å¦è¿åäº†åˆ—çš„æ¯ä¸ªå…ƒç´ å¿…é¡»æ˜¯ç›¸åŒç±»å‹çš„è§„å®šã€‚å¹¶æ²¡æœ‰ï¼šæ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œå°½ç®¡å…¶å†…å®¹æ˜¯ä¸åŒç±»å‹çš„ã€‚\nå¤„ç†ä¸ä¸€è‡´çš„ç±»å‹å…·æœ‰æŒ‘æˆ˜æ€§ï¼Œå…·ä½“ç»†èŠ‚å–å†³äºé—®é¢˜çš„ç¡®åˆ‡æ€§è´¨å’Œä½ çš„ç›®æ ‡ï¼Œä½†ä½ å¾ˆå¯èƒ½éœ€è¦æ¥è‡ª Chapter 26 çš„å·¥å…·ã€‚\n\n23.3.4 å…¶ä»–å‡½æ•°\ntidyr è¿˜æœ‰ä¸€äº›å…¶ä»–æœ‰ç”¨çš„çŸ©å½¢åŒ–å‡½æ•°ï¼Œæˆ‘ä»¬åœ¨è¿™æœ¬ä¹¦ä¸­ä¸ä¼šæ¶‰åŠï¼š\n\n\nunnest_auto() ä¼šæ ¹æ®åˆ—è¡¨åˆ—çš„ç»“æ„è‡ªåŠ¨åœ¨ unnest_longer() å’Œ unnest_wider() ä¹‹é—´è¿›è¡Œé€‰æ‹©ã€‚å®ƒå¯¹äºå¿«é€Ÿæ¢ç´¢éå¸¸æ£’ï¼Œä½†æœ€ç»ˆè¿™ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œå› ä¸ºå®ƒæ²¡æœ‰å¼ºè¿«ä½ ç†è§£ä½ çš„æ•°æ®æ˜¯å¦‚ä½•ç»„ç»‡çš„ï¼Œå¹¶ä½¿ä½ çš„ä»£ç æ›´éš¾ç†è§£ã€‚\n\nunnest() ä¼šåŒæ—¶æ‰©å±•è¡Œå’Œåˆ—ã€‚å½“ä½ æœ‰ä¸€ä¸ªåŒ…å«äºŒç»´ç»“æ„ï¼ˆå¦‚æ•°æ®æ¡†ï¼‰çš„åˆ—è¡¨åˆ—æ—¶ï¼Œå®ƒå¾ˆæœ‰ç”¨ï¼Œè¿™åœ¨è¿™æœ¬ä¹¦ä¸­ä½ çœ‹ä¸åˆ°ï¼Œä½†å¦‚æœä½ ä½¿ç”¨ tidymodels ç”Ÿæ€ç³»ç»Ÿï¼Œä½ å¯èƒ½ä¼šé‡åˆ°ã€‚\n\näº†è§£è¿™äº›å‡½æ•°æ˜¯å¾ˆå¥½çš„ï¼Œå› ä¸ºä½ åœ¨é˜…è¯»ä»–äººçš„ä»£ç æˆ–è‡ªå·±å¤„ç†æ›´ç½•è§çš„çŸ©å½¢åŒ–æŒ‘æˆ˜æ—¶å¯èƒ½ä¼šé‡åˆ°å®ƒä»¬ã€‚\n\n23.3.5 ç»ƒä¹ \n\nå½“ä½ å¯¹åƒ df2 è¿™æ ·çš„æœªå‘½ååˆ—è¡¨åˆ—ä½¿ç”¨ unnest_wider() æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿç°åœ¨éœ€è¦å“ªä¸ªå‚æ•°ï¼Ÿç¼ºå¤±å€¼ä¼šå‘ç”Ÿä»€ä¹ˆå˜åŒ–ï¼Ÿ\nå½“ä½ å¯¹åƒ df1 è¿™æ ·çš„å‘½ååˆ—è¡¨åˆ—ä½¿ç”¨ unnest_longer() æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿä½ åœ¨è¾“å‡ºä¸­å¾—åˆ°äº†å“ªäº›é¢å¤–çš„ä¿¡æ¯ï¼Ÿä½ å¦‚ä½•æŠ‘åˆ¶è¿™äº›é¢å¤–çš„ç»†èŠ‚ï¼Ÿ\n\nä½ æœ‰æ—¶ä¼šé‡åˆ°å…·æœ‰å¤šä¸ªå€¼å¯¹é½çš„åˆ—è¡¨åˆ—çš„æ•°æ®æ¡†ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„æ•°æ®æ¡†ä¸­ï¼Œy å’Œ z çš„å€¼æ˜¯å¯¹é½çš„ï¼ˆå³åœ¨ä¸€è¡Œå†… y å’Œ z çš„é•¿åº¦æ€»æ˜¯ç›¸åŒçš„ï¼Œå¹¶ä¸” y çš„ç¬¬ä¸€ä¸ªå€¼å¯¹åº”äº z çš„ç¬¬ä¸€ä¸ªå€¼ï¼‰ã€‚å¦‚æœä½ å¯¹è¿™ä¸ªæ•°æ®æ¡†åº”ç”¨ä¸¤æ¬¡ unnest_longer() è°ƒç”¨ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿä½ å¦‚ä½•ä¿ç•™ x å’Œ y ä¹‹é—´çš„å…³ç³»ï¼Ÿï¼ˆæç¤ºï¼šä»”ç»†é˜…è¯»æ–‡æ¡£ï¼‰ã€‚\n\ndf4 &lt;- tribble(\n  ~x, ~y, ~z,\n  \"a\", list(\"y-a-1\", \"y-a-2\"), list(\"z-a-1\", \"z-a-2\"),\n  \"b\", list(\"y-b-1\", \"y-b-2\", \"y-b-3\"), list(\"z-b-1\", \"z-b-2\", \"z-b-3\")\n)",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>23</span>Â  <span class='chapter-title'>å±‚çº§æ•°æ®</span>"
    ]
  },
  {
    "objectID": "rectangling.html#æ¡ˆä¾‹ç ”ç©¶",
    "href": "rectangling.html#æ¡ˆä¾‹ç ”ç©¶",
    "title": "23Â  å±‚çº§æ•°æ®",
    "section": "\n23.4 æ¡ˆä¾‹ç ”ç©¶",
    "text": "23.4 æ¡ˆä¾‹ç ”ç©¶\næˆ‘ä»¬ä¸Šé¢ä½¿ç”¨çš„ç®€å•ç¤ºä¾‹ä¸çœŸå®æ•°æ®ä¹‹é—´çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼ŒçœŸå®æ•°æ®é€šå¸¸åŒ…å«å¤šå±‚åµŒå¥—ï¼Œéœ€è¦å¤šæ¬¡è°ƒç”¨ unnest_longer() å’Œ/æˆ– unnest_wider()ã€‚ä¸ºäº†å±•ç¤ºè¿™ä¸€ç‚¹ï¼Œæœ¬èŠ‚å°†ä½¿ç”¨ repurrrsive åŒ…ä¸­çš„æ•°æ®é›†æ¥è§£å†³ä¸‰ä¸ªçœŸå®çš„çŸ©å½¢åŒ–æŒ‘æˆ˜ã€‚\n\n23.4.1 éå¸¸å®½çš„æ•°æ®\næˆ‘ä»¬ä» gh_repos å¼€å§‹ã€‚è¿™æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼ŒåŒ…å«äº†ä» GitHub API æ£€ç´¢åˆ°çš„ä¸€ç³»åˆ— GitHub ä»“åº“çš„æ•°æ®ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸æ·±å±‚åµŒå¥—çš„åˆ—è¡¨ï¼Œå› æ­¤å¾ˆéš¾åœ¨æœ¬ä¹¦ä¸­å±•ç¤ºå…¶ç»“æ„ï¼›æˆ‘ä»¬å»ºè®®åœ¨ç»§ç»­ä¹‹å‰ï¼Œå…ˆç”¨ View(gh_repos) è‡ªå·±æ¢ç´¢ä¸€ä¸‹ã€‚\ngh_repos æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œä½†æˆ‘ä»¬çš„å·¥å…·æ˜¯é’ˆå¯¹åˆ—è¡¨åˆ—çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬é¦–å…ˆå°†å®ƒæ”¾å…¥ä¸€ä¸ª tibble ä¸­ã€‚ç”±äºæˆ‘ä»¬ç¨åä¼šè®²åˆ°çš„åŸå› ï¼Œæˆ‘ä»¬ç§°æ­¤åˆ—ä¸º jsonã€‚\n\nrepos &lt;- tibble(json = gh_repos)\nrepos\n#&gt; # A tibble: 6 Ã— 1\n#&gt;   json       \n#&gt;   &lt;list&gt;     \n#&gt; 1 &lt;list [30]&gt;\n#&gt; 2 &lt;list [30]&gt;\n#&gt; 3 &lt;list [30]&gt;\n#&gt; 4 &lt;list [26]&gt;\n#&gt; 5 &lt;list [30]&gt;\n#&gt; 6 &lt;list [30]&gt;\n\nè¿™ä¸ª tibble åŒ…å« 6 è¡Œï¼Œæ¯è¡Œå¯¹åº” gh_repos çš„ä¸€ä¸ªå­å…ƒç´ ã€‚æ¯ä¸€è¡Œéƒ½åŒ…å«ä¸€ä¸ªæœªå‘½åçš„åˆ—è¡¨ï¼Œæœ‰ 26 æˆ– 30 è¡Œã€‚ç”±äºè¿™äº›æ˜¯æœªå‘½åçš„ï¼Œæˆ‘ä»¬å°†ä» unnest_longer() å¼€å§‹ï¼Œå°†æ¯ä¸ªå­å…ƒç´ æ”¾å…¥å…¶è‡ªå·±çš„è¡Œä¸­ï¼š\n\nrepos |&gt; \n  unnest_longer(json)\n#&gt; # A tibble: 176 Ã— 1\n#&gt;   json             \n#&gt;   &lt;list&gt;           \n#&gt; 1 &lt;named list [68]&gt;\n#&gt; 2 &lt;named list [68]&gt;\n#&gt; 3 &lt;named list [68]&gt;\n#&gt; 4 &lt;named list [68]&gt;\n#&gt; 5 &lt;named list [68]&gt;\n#&gt; 6 &lt;named list [68]&gt;\n#&gt; # â„¹ 170 more rows\n\nä¹ä¸€çœ‹ï¼Œä¼¼ä¹æˆ‘ä»¬å¹¶æ²¡æœ‰æ”¹å–„æƒ…å†µï¼šè™½ç„¶æˆ‘ä»¬æœ‰äº†æ›´å¤šçš„è¡Œï¼ˆ176 è€Œä¸æ˜¯ 6ï¼‰ï¼Œä½† json çš„æ¯ä¸ªå…ƒç´ ä»ç„¶æ˜¯ä¸€ä¸ªåˆ—è¡¨ã€‚ç„¶è€Œï¼Œæœ‰ä¸€ä¸ªé‡è¦çš„åŒºåˆ«ï¼šç°åœ¨æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ª å‘½å åˆ—è¡¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ unnest_wider() å°†æ¯ä¸ªå…ƒç´ æ”¾å…¥å…¶è‡ªå·±çš„åˆ—ä¸­ï¼š\n\nrepos |&gt; \n  unnest_longer(json) |&gt; \n  unnest_wider(json) \n#&gt; # A tibble: 176 Ã— 68\n#&gt;         id name        full_name         owner        private html_url       \n#&gt;      &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;             &lt;list&gt;       &lt;lgl&gt;   &lt;chr&gt;          \n#&gt; 1 61160198 after       gaborcsardi/after &lt;named list&gt; FALSE   https://githubâ€¦\n#&gt; 2 40500181 argufy      gaborcsardi/arguâ€¦ &lt;named list&gt; FALSE   https://githubâ€¦\n#&gt; 3 36442442 ask         gaborcsardi/ask   &lt;named list&gt; FALSE   https://githubâ€¦\n#&gt; 4 34924886 baseimports gaborcsardi/baseâ€¦ &lt;named list&gt; FALSE   https://githubâ€¦\n#&gt; 5 61620661 citest      gaborcsardi/citeâ€¦ &lt;named list&gt; FALSE   https://githubâ€¦\n#&gt; 6 33907457 clisymbols  gaborcsardi/clisâ€¦ &lt;named list&gt; FALSE   https://githubâ€¦\n#&gt; # â„¹ 170 more rows\n#&gt; # â„¹ 62 more variables: description &lt;chr&gt;, fork &lt;lgl&gt;, url &lt;chr&gt;, â€¦\n\nè¿™å·²ç»æˆåŠŸäº†ï¼Œä½†ç»“æœæœ‰ç‚¹è®©äººä¸çŸ¥æ‰€æªï¼šåˆ—å¤ªå¤šäº†ï¼Œä»¥è‡³äº tibble ç”šè‡³æ²¡æœ‰æ‰“å°å‡ºæ‰€æœ‰çš„åˆ—ï¼æˆ‘ä»¬å¯ä»¥ç”¨ names() çœ‹åˆ°æ‰€æœ‰çš„åˆ—ï¼›è¿™é‡Œæˆ‘ä»¬çœ‹ä¸€ä¸‹å‰ 10 ä¸ªï¼š\n\nrepos |&gt; \n  unnest_longer(json) |&gt; \n  unnest_wider(json) |&gt; \n  names() |&gt; \n  head(10)\n#&gt;  [1] \"id\"          \"name\"        \"full_name\"   \"owner\"       \"private\"    \n#&gt;  [6] \"html_url\"    \"description\" \"fork\"        \"url\"         \"forks_url\"\n\nè®©æˆ‘ä»¬æŒ‘å‡ºä¸€äº›çœ‹èµ·æ¥æœ‰è¶£çš„åˆ—ï¼š\n\nrepos |&gt; \n  unnest_longer(json) |&gt; \n  unnest_wider(json) |&gt; \n  select(id, full_name, owner, description)\n#&gt; # A tibble: 176 Ã— 4\n#&gt;         id full_name               owner             description             \n#&gt;      &lt;int&gt; &lt;chr&gt;                   &lt;list&gt;            &lt;chr&gt;                   \n#&gt; 1 61160198 gaborcsardi/after       &lt;named list [17]&gt; Run Code in the Backgroâ€¦\n#&gt; 2 40500181 gaborcsardi/argufy      &lt;named list [17]&gt; Declarative function arâ€¦\n#&gt; 3 36442442 gaborcsardi/ask         &lt;named list [17]&gt; Friendly CLI interactioâ€¦\n#&gt; 4 34924886 gaborcsardi/baseimports &lt;named list [17]&gt; Do we get warnings for â€¦\n#&gt; 5 61620661 gaborcsardi/citest      &lt;named list [17]&gt; Test R package and repoâ€¦\n#&gt; 6 33907457 gaborcsardi/clisymbols  &lt;named list [17]&gt; Unicode symbols for CLIâ€¦\n#&gt; # â„¹ 170 more rows\n\nä½ å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ¥å›æº¯ç†è§£ gh_repos çš„ç»“æ„ï¼šæ¯ä¸ªå­å…ƒç´ éƒ½æ˜¯ä¸€ä¸ª GitHub ç”¨æˆ·ï¼ŒåŒ…å«ä¸€ä¸ªä»–ä»¬åˆ›å»ºçš„æœ€å¤š 30 ä¸ª GitHub ä»“åº“çš„åˆ—è¡¨ã€‚\nowner æ˜¯å¦ä¸€ä¸ªåˆ—è¡¨åˆ—ï¼Œç”±äºå®ƒåŒ…å«ä¸€ä¸ªå‘½åçš„åˆ—è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ unnest_wider() æ¥è·å–å…¶å€¼ï¼š\n\nrepos |&gt; \n  unnest_longer(json) |&gt; \n  unnest_wider(json) |&gt; \n  select(id, full_name, owner, description) |&gt; \n  unnest_wider(owner)\n#&gt; Error in `unnest_wider()`:\n#&gt; ! Can't duplicate names between the affected columns and the original\n#&gt;   data.\n#&gt; âœ– These names are duplicated:\n#&gt;   â„¹ `id`, from `owner`.\n#&gt; â„¹ Use `names_sep` to disambiguate using the column name.\n#&gt; â„¹ Or use `names_repair` to specify a repair strategy.\n\nå“¦å“¦ï¼Œè¿™ä¸ªåˆ—è¡¨åˆ—ä¹ŸåŒ…å«ä¸€ä¸ª id åˆ—ï¼Œæˆ‘ä»¬ä¸èƒ½åœ¨åŒä¸€ä¸ªæ•°æ®æ¡†ä¸­æœ‰ä¸¤ä¸ª id åˆ—ã€‚å¦‚å»ºè®®çš„é‚£æ ·ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ names_sep æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š\n\nrepos |&gt; \n  unnest_longer(json) |&gt; \n  unnest_wider(json) |&gt; \n  select(id, full_name, owner, description) |&gt; \n  unnest_wider(owner, names_sep = \"_\")\n#&gt; # A tibble: 176 Ã— 20\n#&gt;         id full_name               owner_login owner_id owner_avatar_url     \n#&gt;      &lt;int&gt; &lt;chr&gt;                   &lt;chr&gt;          &lt;int&gt; &lt;chr&gt;                \n#&gt; 1 61160198 gaborcsardi/after       gaborcsardi   660288 https://avatars.githâ€¦\n#&gt; 2 40500181 gaborcsardi/argufy      gaborcsardi   660288 https://avatars.githâ€¦\n#&gt; 3 36442442 gaborcsardi/ask         gaborcsardi   660288 https://avatars.githâ€¦\n#&gt; 4 34924886 gaborcsardi/baseimports gaborcsardi   660288 https://avatars.githâ€¦\n#&gt; 5 61620661 gaborcsardi/citest      gaborcsardi   660288 https://avatars.githâ€¦\n#&gt; 6 33907457 gaborcsardi/clisymbols  gaborcsardi   660288 https://avatars.githâ€¦\n#&gt; # â„¹ 170 more rows\n#&gt; # â„¹ 15 more variables: owner_gravatar_id &lt;chr&gt;, owner_url &lt;chr&gt;, â€¦\n\nè¿™åˆå¾—åˆ°äº†ä¸€ä¸ªå¾ˆå®½çš„æ•°æ®é›†ï¼Œä½†ä½ å¯ä»¥æ„Ÿè§‰åˆ° owner ä¼¼ä¹åŒ…å«äº†å¤§é‡å…³äºâ€œæ‹¥æœ‰â€è¯¥ä»“åº“çš„äººçš„é¢å¤–æ•°æ®ã€‚\n\n23.4.2 å…³ç³»æ•°æ®\nåµŒå¥—æ•°æ®æœ‰æ—¶ç”¨äºè¡¨ç¤ºæˆ‘ä»¬é€šå¸¸ä¼šåˆ†æ•£åœ¨å¤šä¸ªæ•°æ®æ¡†ä¸­çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œgot_chars åŒ…å«äº†å…³äºã€ŠæƒåŠ›çš„æ¸¸æˆã€‹ä¹¦ç±å’Œç”µè§†å‰§ä¸­å‡ºç°çš„è§’è‰²çš„æ•°æ®ã€‚å’Œ gh_repos ä¸€æ ·ï¼Œå®ƒæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œæ‰€ä»¥æˆ‘ä»¬é¦–å…ˆå°†å®ƒè½¬æ¢æˆä¸€ä¸ª tibble çš„åˆ—è¡¨åˆ—ï¼š\n\nchars &lt;- tibble(json = got_chars)\nchars\n#&gt; # A tibble: 30 Ã— 1\n#&gt;   json             \n#&gt;   &lt;list&gt;           \n#&gt; 1 &lt;named list [18]&gt;\n#&gt; 2 &lt;named list [18]&gt;\n#&gt; 3 &lt;named list [18]&gt;\n#&gt; 4 &lt;named list [18]&gt;\n#&gt; 5 &lt;named list [18]&gt;\n#&gt; 6 &lt;named list [18]&gt;\n#&gt; # â„¹ 24 more rows\n\njson åˆ—åŒ…å«å‘½åçš„å…ƒç´ ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆç”¨ unnest_wider() å°†å…¶å±•å¼€ï¼š\n\nchars |&gt; \n  unnest_wider(json)\n#&gt; # A tibble: 30 Ã— 18\n#&gt;   url                    id name            gender culture    born           \n#&gt;   &lt;chr&gt;               &lt;int&gt; &lt;chr&gt;           &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;          \n#&gt; 1 https://www.anapioâ€¦  1022 Theon Greyjoy   Male   \"Ironborn\" \"In 278 AC or â€¦\n#&gt; 2 https://www.anapioâ€¦  1052 Tyrion Lannistâ€¦ Male   \"\"         \"In 273 AC, atâ€¦\n#&gt; 3 https://www.anapioâ€¦  1074 Victarion Greyâ€¦ Male   \"Ironborn\" \"In 268 AC or â€¦\n#&gt; 4 https://www.anapioâ€¦  1109 Will            Male   \"\"         \"\"             \n#&gt; 5 https://www.anapioâ€¦  1166 Areo Hotah      Male   \"Norvoshi\" \"In 257 AC or â€¦\n#&gt; 6 https://www.anapioâ€¦  1267 Chett           Male   \"\"         \"At Hag's Mire\"\n#&gt; # â„¹ 24 more rows\n#&gt; # â„¹ 12 more variables: died &lt;chr&gt;, alive &lt;lgl&gt;, titles &lt;list&gt;, â€¦\n\nç„¶åé€‰æ‹©å‡ åˆ—ä»¥ä¾¿äºé˜…è¯»ï¼š\n\ncharacters &lt;- chars |&gt; \n  unnest_wider(json) |&gt; \n  select(id, name, gender, culture, born, died, alive)\ncharacters\n#&gt; # A tibble: 30 Ã— 7\n#&gt;      id name              gender culture    born              died           \n#&gt;   &lt;int&gt; &lt;chr&gt;             &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;             &lt;chr&gt;          \n#&gt; 1  1022 Theon Greyjoy     Male   \"Ironborn\" \"In 278 AC or 27â€¦ \"\"             \n#&gt; 2  1052 Tyrion Lannister  Male   \"\"         \"In 273 AC, at Câ€¦ \"\"             \n#&gt; 3  1074 Victarion Greyjoy Male   \"Ironborn\" \"In 268 AC or beâ€¦ \"\"             \n#&gt; 4  1109 Will              Male   \"\"         \"\"                \"In 297 AC, atâ€¦\n#&gt; 5  1166 Areo Hotah        Male   \"Norvoshi\" \"In 257 AC or beâ€¦ \"\"             \n#&gt; 6  1267 Chett             Male   \"\"         \"At Hag's Mire\"   \"In 299 AC, atâ€¦\n#&gt; # â„¹ 24 more rows\n#&gt; # â„¹ 1 more variable: alive &lt;lgl&gt;\n\nè¿™ä¸ªæ•°æ®é›†ä¹ŸåŒ…å«è®¸å¤šåˆ—è¡¨åˆ—ï¼š\n\nchars |&gt; \n  unnest_wider(json) |&gt; \n  select(id, where(is.list))\n#&gt; # A tibble: 30 Ã— 8\n#&gt;      id titles    aliases    allegiances books     povBooks tvSeries playedBy\n#&gt;   &lt;int&gt; &lt;list&gt;    &lt;list&gt;     &lt;list&gt;      &lt;list&gt;    &lt;list&gt;   &lt;list&gt;   &lt;list&gt;  \n#&gt; 1  1022 &lt;chr [2]&gt; &lt;chr [4]&gt;  &lt;chr [1]&gt;   &lt;chr [3]&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;   \n#&gt; 2  1052 &lt;chr [2]&gt; &lt;chr [11]&gt; &lt;chr [1]&gt;   &lt;chr [2]&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;   \n#&gt; 3  1074 &lt;chr [2]&gt; &lt;chr [1]&gt;  &lt;chr [1]&gt;   &lt;chr [3]&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;   \n#&gt; 4  1109 &lt;chr [1]&gt; &lt;chr [1]&gt;  &lt;NULL&gt;      &lt;chr [1]&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;   \n#&gt; 5  1166 &lt;chr [1]&gt; &lt;chr [1]&gt;  &lt;chr [1]&gt;   &lt;chr [3]&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;   \n#&gt; 6  1267 &lt;chr [1]&gt; &lt;chr [1]&gt;  &lt;NULL&gt;      &lt;chr [2]&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;   \n#&gt; # â„¹ 24 more rows\n\nè®©æˆ‘ä»¬æ¥æ¢ç´¢ titles åˆ—ã€‚å®ƒæ˜¯ä¸€ä¸ªæœªå‘½åçš„åˆ—è¡¨åˆ—ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠå®ƒå±•å¼€æˆè¡Œï¼š\n\nchars |&gt; \n  unnest_wider(json) |&gt; \n  select(id, titles) |&gt; \n  unnest_longer(titles)\n#&gt; # A tibble: 59 Ã— 2\n#&gt;      id titles                                              \n#&gt;   &lt;int&gt; &lt;chr&gt;                                               \n#&gt; 1  1022 Prince of Winterfell                                \n#&gt; 2  1022 Lord of the Iron Islands (by law of the green lands)\n#&gt; 3  1052 Acting Hand of the King (former)                    \n#&gt; 4  1052 Master of Coin (former)                             \n#&gt; 5  1074 Lord Captain of the Iron Fleet                      \n#&gt; 6  1074 Master of the Iron Victory                          \n#&gt; # â„¹ 53 more rows\n\nä½ å¯èƒ½æœŸæœ›çœ‹åˆ°è¿™äº›æ•°æ®åœ¨å®ƒè‡ªå·±çš„è¡¨ä¸­ï¼Œå› ä¸ºè¿™æ ·å¾ˆå®¹æ˜“æŒ‰éœ€è¿æ¥åˆ°è§’è‰²æ•°æ®ã€‚è®©æˆ‘ä»¬è¿™æ ·åšï¼Œè¿™éœ€è¦ä¸€ç‚¹æ¸…ç†ï¼šåˆ é™¤åŒ…å«ç©ºå­—ç¬¦ä¸²çš„è¡Œï¼Œå¹¶å°† titles é‡å‘½åä¸º titleï¼Œå› ä¸ºç°åœ¨æ¯è¡ŒåªåŒ…å«ä¸€ä¸ªå¤´è¡”ã€‚\n\ntitles &lt;- chars |&gt; \n  unnest_wider(json) |&gt; \n  select(id, titles) |&gt; \n  unnest_longer(titles) |&gt; \n  filter(titles != \"\") |&gt; \n  rename(title = titles)\ntitles\n#&gt; # A tibble: 52 Ã— 2\n#&gt;      id title                                               \n#&gt;   &lt;int&gt; &lt;chr&gt;                                               \n#&gt; 1  1022 Prince of Winterfell                                \n#&gt; 2  1022 Lord of the Iron Islands (by law of the green lands)\n#&gt; 3  1052 Acting Hand of the King (former)                    \n#&gt; 4  1052 Master of Coin (former)                             \n#&gt; 5  1074 Lord Captain of the Iron Fleet                      \n#&gt; 6  1074 Master of the Iron Victory                          \n#&gt; # â„¹ 46 more rows\n\nä½ å¯ä»¥æƒ³è±¡ä¸ºæ¯ä¸ªåˆ—è¡¨åˆ—åˆ›å»ºè¿™æ ·çš„ä¸€ä¸ªè¡¨ï¼Œç„¶ååœ¨éœ€è¦æ—¶ä½¿ç”¨è¿æ¥å°†å®ƒä»¬ä¸è§’è‰²æ•°æ®ç»“åˆèµ·æ¥ã€‚\n\n23.4.3 æ·±åº¦åµŒå¥—\næˆ‘ä»¬å°†ç”¨ä¸€ä¸ªéå¸¸æ·±åº¦åµŒå¥—çš„åˆ—è¡¨åˆ—æ¥ç»“æŸè¿™äº›æ¡ˆä¾‹ç ”ç©¶ï¼Œå®ƒéœ€è¦åå¤ä½¿ç”¨ unnest_wider() å’Œ unnest_longer() æ¥è§£å¼€ï¼šgmaps_citiesã€‚è¿™æ˜¯ä¸€ä¸ªä¸¤åˆ—çš„ tibbleï¼ŒåŒ…å«äº”ä¸ªåŸå¸‚åç§°å’Œä½¿ç”¨è°·æ­Œçš„ åœ°ç†ç¼–ç  API æ¥ç¡®å®šå®ƒä»¬ä½ç½®çš„ç»“æœï¼š\n\ngmaps_cities\n#&gt; # A tibble: 5 Ã— 2\n#&gt;   city       json            \n#&gt;   &lt;chr&gt;      &lt;list&gt;          \n#&gt; 1 Houston    &lt;named list [2]&gt;\n#&gt; 2 Washington &lt;named list [2]&gt;\n#&gt; 3 New York   &lt;named list [2]&gt;\n#&gt; 4 Chicago    &lt;named list [2]&gt;\n#&gt; 5 Arlington  &lt;named list [2]&gt;\n\njson æ˜¯ä¸€ä¸ªå¸¦æœ‰å†…éƒ¨åç§°çš„åˆ—è¡¨åˆ—ï¼Œæ‰€ä»¥æˆ‘ä»¬ä» unnest_wider() å¼€å§‹ï¼š\n\ngmaps_cities |&gt; \n  unnest_wider(json)\n#&gt; # A tibble: 5 Ã— 3\n#&gt;   city       results    status\n#&gt;   &lt;chr&gt;      &lt;list&gt;     &lt;chr&gt; \n#&gt; 1 Houston    &lt;list [1]&gt; OK    \n#&gt; 2 Washington &lt;list [2]&gt; OK    \n#&gt; 3 New York   &lt;list [1]&gt; OK    \n#&gt; 4 Chicago    &lt;list [1]&gt; OK    \n#&gt; 5 Arlington  &lt;list [2]&gt; OK\n\nè¿™ç»™äº†æˆ‘ä»¬ status å’Œ resultsã€‚æˆ‘ä»¬å°†ä¸¢å¼ƒ status åˆ—ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯ OKï¼›åœ¨çœŸå®çš„åˆ†æä¸­ï¼Œä½ è¿˜éœ€è¦æ•è·æ‰€æœ‰ status != \"OK\" çš„è¡Œï¼Œå¹¶æ‰¾å‡ºé—®é¢˜æ‰€åœ¨ã€‚results æ˜¯ä¸€ä¸ªæœªå‘½åçš„åˆ—è¡¨ï¼Œæœ‰ä¸€æˆ–ä¸¤ä¸ªå…ƒç´ ï¼ˆæˆ‘ä»¬å¾ˆå¿«ä¼šçœ‹åˆ°ä¸ºä»€ä¹ˆï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†å®ƒå±•å¼€æˆè¡Œï¼š\n\ngmaps_cities |&gt; \n  unnest_wider(json) |&gt; \n  select(-status) |&gt; \n  unnest_longer(results)\n#&gt; # A tibble: 7 Ã— 2\n#&gt;   city       results         \n#&gt;   &lt;chr&gt;      &lt;list&gt;          \n#&gt; 1 Houston    &lt;named list [5]&gt;\n#&gt; 2 Washington &lt;named list [5]&gt;\n#&gt; 3 Washington &lt;named list [5]&gt;\n#&gt; 4 New York   &lt;named list [5]&gt;\n#&gt; 5 Chicago    &lt;named list [5]&gt;\n#&gt; 6 Arlington  &lt;named list [5]&gt;\n#&gt; # â„¹ 1 more row\n\nç°åœ¨ results æ˜¯ä¸€ä¸ªå‘½åçš„åˆ—è¡¨ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ unnest_wider()ï¼š\n\nlocations &lt;- gmaps_cities |&gt; \n  unnest_wider(json) |&gt; \n  select(-status) |&gt; \n  unnest_longer(results) |&gt; \n  unnest_wider(results)\nlocations\n#&gt; # A tibble: 7 Ã— 6\n#&gt;   city       address_components formatted_address   geometry        \n#&gt;   &lt;chr&gt;      &lt;list&gt;             &lt;chr&gt;               &lt;list&gt;          \n#&gt; 1 Houston    &lt;list [4]&gt;         Houston, TX, USA    &lt;named list [4]&gt;\n#&gt; 2 Washington &lt;list [2]&gt;         Washington, USA     &lt;named list [4]&gt;\n#&gt; 3 Washington &lt;list [4]&gt;         Washington, DC, USA &lt;named list [4]&gt;\n#&gt; 4 New York   &lt;list [3]&gt;         New York, NY, USA   &lt;named list [4]&gt;\n#&gt; 5 Chicago    &lt;list [4]&gt;         Chicago, IL, USA    &lt;named list [4]&gt;\n#&gt; 6 Arlington  &lt;list [4]&gt;         Arlington, TX, USA  &lt;named list [4]&gt;\n#&gt; # â„¹ 1 more row\n#&gt; # â„¹ 2 more variables: place_id &lt;chr&gt;, types &lt;list&gt;\n\nç°åœ¨æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸ºä»€ä¹ˆæœ‰ä¸¤ä¸ªåŸå¸‚å¾—åˆ°äº†ä¸¤ä¸ªç»“æœï¼šåç››é¡¿ (Washington) åŒ¹é…äº†åç››é¡¿å· (Washington state) å’Œåç››é¡¿ç‰¹åŒº (Washington, DC)ï¼Œé˜¿çµé¡¿ (Arlington) åŒ¹é…äº†å¼—å‰å°¼äºšå·çš„é˜¿çµé¡¿ (Arlington, Virginia) å’Œå¾·å…‹è¨æ–¯å·çš„é˜¿çµé¡¿ (Arlington, Texas)ã€‚\nä»è¿™é‡Œæˆ‘ä»¬å¯ä»¥èµ°å‘å‡ ä¸ªä¸åŒçš„æ–¹å‘ã€‚æˆ‘ä»¬å¯èƒ½æƒ³ç¡®å®šåŒ¹é…çš„ç²¾ç¡®ä½ç½®ï¼Œè¿™å­˜å‚¨åœ¨ geometry åˆ—è¡¨åˆ—ä¸­ï¼š\n\nlocations |&gt; \n  select(city, formatted_address, geometry) |&gt; \n  unnest_wider(geometry)\n#&gt; # A tibble: 7 Ã— 6\n#&gt;   city       formatted_address   bounds           location     location_type\n#&gt;   &lt;chr&gt;      &lt;chr&gt;               &lt;list&gt;           &lt;list&gt;       &lt;chr&gt;        \n#&gt; 1 Houston    Houston, TX, USA    &lt;named list [2]&gt; &lt;named list&gt; APPROXIMATE  \n#&gt; 2 Washington Washington, USA     &lt;named list [2]&gt; &lt;named list&gt; APPROXIMATE  \n#&gt; 3 Washington Washington, DC, USA &lt;named list [2]&gt; &lt;named list&gt; APPROXIMATE  \n#&gt; 4 New York   New York, NY, USA   &lt;named list [2]&gt; &lt;named list&gt; APPROXIMATE  \n#&gt; 5 Chicago    Chicago, IL, USA    &lt;named list [2]&gt; &lt;named list&gt; APPROXIMATE  \n#&gt; 6 Arlington  Arlington, TX, USA  &lt;named list [2]&gt; &lt;named list&gt; APPROXIMATE  \n#&gt; # â„¹ 1 more row\n#&gt; # â„¹ 1 more variable: viewport &lt;list&gt;\n\nè¿™ç»™äº†æˆ‘ä»¬æ–°çš„ boundsï¼ˆä¸€ä¸ªçŸ©å½¢åŒºåŸŸï¼‰å’Œ locationï¼ˆä¸€ä¸ªç‚¹ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥å±•å¼€ location æ¥æŸ¥çœ‹çº¬åº¦ (lat) å’Œç»åº¦ (lng)ï¼š\n\nlocations |&gt; \n  select(city, formatted_address, geometry) |&gt; \n  unnest_wider(geometry) |&gt; \n  unnest_wider(location)\n#&gt; # A tibble: 7 Ã— 7\n#&gt;   city       formatted_address   bounds             lat    lng location_type\n#&gt;   &lt;chr&gt;      &lt;chr&gt;               &lt;list&gt;           &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;        \n#&gt; 1 Houston    Houston, TX, USA    &lt;named list [2]&gt;  29.8  -95.4 APPROXIMATE  \n#&gt; 2 Washington Washington, USA     &lt;named list [2]&gt;  47.8 -121.  APPROXIMATE  \n#&gt; 3 Washington Washington, DC, USA &lt;named list [2]&gt;  38.9  -77.0 APPROXIMATE  \n#&gt; 4 New York   New York, NY, USA   &lt;named list [2]&gt;  40.7  -74.0 APPROXIMATE  \n#&gt; 5 Chicago    Chicago, IL, USA    &lt;named list [2]&gt;  41.9  -87.6 APPROXIMATE  \n#&gt; 6 Arlington  Arlington, TX, USA  &lt;named list [2]&gt;  32.7  -97.1 APPROXIMATE  \n#&gt; # â„¹ 1 more row\n#&gt; # â„¹ 1 more variable: viewport &lt;list&gt;\n\næå–è¾¹ç•Œéœ€è¦æ›´å¤šå‡ ä¸ªæ­¥éª¤ï¼š\n\nlocations |&gt; \n  select(city, formatted_address, geometry) |&gt; \n  unnest_wider(geometry) |&gt; \n  # ä¸“æ³¨äºæ„Ÿå…´è¶£çš„å˜é‡\n  select(!location:viewport) |&gt;\n  unnest_wider(bounds)\n#&gt; # A tibble: 7 Ã— 4\n#&gt;   city       formatted_address   northeast        southwest       \n#&gt;   &lt;chr&gt;      &lt;chr&gt;               &lt;list&gt;           &lt;list&gt;          \n#&gt; 1 Houston    Houston, TX, USA    &lt;named list [2]&gt; &lt;named list [2]&gt;\n#&gt; 2 Washington Washington, USA     &lt;named list [2]&gt; &lt;named list [2]&gt;\n#&gt; 3 Washington Washington, DC, USA &lt;named list [2]&gt; &lt;named list [2]&gt;\n#&gt; 4 New York   New York, NY, USA   &lt;named list [2]&gt; &lt;named list [2]&gt;\n#&gt; 5 Chicago    Chicago, IL, USA    &lt;named list [2]&gt; &lt;named list [2]&gt;\n#&gt; 6 Arlington  Arlington, TX, USA  &lt;named list [2]&gt; &lt;named list [2]&gt;\n#&gt; # â„¹ 1 more row\n\nç„¶åæˆ‘ä»¬é‡å‘½å southwest å’Œ northeastï¼ˆçŸ©å½¢çš„è§’ç‚¹ï¼‰ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ names_sep æ¥åˆ›å»ºç®€çŸ­ä½†æœ‰æ„ä¹‰çš„åç§°ï¼š\n\nlocations |&gt; \n  select(city, formatted_address, geometry) |&gt; \n  unnest_wider(geometry) |&gt; \n  select(!location:viewport) |&gt;\n  unnest_wider(bounds) |&gt; \n  rename(ne = northeast, sw = southwest) |&gt; \n  unnest_wider(c(ne, sw), names_sep = \"_\") \n#&gt; # A tibble: 7 Ã— 6\n#&gt;   city       formatted_address   ne_lat ne_lng sw_lat sw_lng\n#&gt;   &lt;chr&gt;      &lt;chr&gt;                &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;\n#&gt; 1 Houston    Houston, TX, USA      30.1  -95.0   29.5  -95.8\n#&gt; 2 Washington Washington, USA       49.0 -117.    45.5 -125. \n#&gt; 3 Washington Washington, DC, USA   39.0  -76.9   38.8  -77.1\n#&gt; 4 New York   New York, NY, USA     40.9  -73.7   40.5  -74.3\n#&gt; 5 Chicago    Chicago, IL, USA      42.0  -87.5   41.6  -87.9\n#&gt; 6 Arlington  Arlington, TX, USA    32.8  -97.0   32.6  -97.2\n#&gt; # â„¹ 1 more row\n\næ³¨æ„æˆ‘ä»¬å¦‚ä½•é€šè¿‡å‘ unnest_wider() æä¾›ä¸€ä¸ªå˜é‡åç§°çš„å‘é‡æ¥åŒæ—¶å±•å¼€ä¸¤åˆ—ã€‚\nä¸€æ—¦ä½ æ‰¾åˆ°äº†åˆ°è¾¾ä½ æ„Ÿå…´è¶£çš„ç»„ä»¶çš„è·¯å¾„ï¼Œä½ å¯ä»¥ä½¿ç”¨å¦ä¸€ä¸ª tidyr å‡½æ•° hoist() ç›´æ¥æå–å®ƒä»¬ï¼š\n\nlocations |&gt; \n  select(city, formatted_address, geometry) |&gt; \n  hoist(\n    geometry,\n    ne_lat = c(\"bounds\", \"northeast\", \"lat\"),\n    sw_lat = c(\"bounds\", \"southwest\", \"lat\"),\n    ne_lng = c(\"bounds\", \"northeast\", \"lng\"),\n    sw_lng = c(\"bounds\", \"southwest\", \"lng\"),\n  )\n\nå¦‚æœè¿™äº›æ¡ˆä¾‹ç ”ç©¶æ¿€å‘äº†ä½ å¯¹æ›´å¤šç°å®ç”Ÿæ´»ä¸­çš„çŸ©å½¢åŒ–é—®é¢˜çš„å…´è¶£ï¼Œä½ å¯ä»¥åœ¨ vignette(\"rectangling\", package = \"tidyr\") ä¸­çœ‹åˆ°æ›´å¤šä¾‹å­ã€‚\n\n23.4.4 ç»ƒä¹ \n\nç²—ç•¥ä¼°è®¡ gh_repos æ˜¯ä½•æ—¶åˆ›å»ºçš„ã€‚ä¸ºä»€ä¹ˆä½ åªèƒ½ç²—ç•¥ä¼°è®¡æ—¥æœŸï¼Ÿ\ngh_repo çš„ owner åˆ—åŒ…å«å¤§é‡é‡å¤ä¿¡æ¯ï¼Œå› ä¸ºæ¯ä¸ªæ‰€æœ‰è€…å¯ä»¥æœ‰å¤šä¸ªä»“åº“ã€‚ä½ èƒ½å¦æ„å»ºä¸€ä¸ª owners æ•°æ®æ¡†ï¼Œå…¶ä¸­æ¯ä¸ªæ‰€æœ‰è€…åªæœ‰ä¸€è¡Œï¼Ÿï¼ˆæç¤ºï¼šdistinct() å¯¹ list-cols æœ‰æ•ˆå—ï¼Ÿï¼‰\næŒ‰ç…§ç”¨äº titles çš„æ­¥éª¤ï¼Œä¸ºã€ŠæƒåŠ›çš„æ¸¸æˆã€‹è§’è‰²çš„åˆ«å (aliases)ã€æ•ˆå¿  (allegiances)ã€ä¹¦ç± (books) å’Œç”µè§†å‰§é›† (TV series) åˆ›å»ºç±»ä¼¼çš„è¡¨ã€‚\n\né€è¡Œè§£é‡Šä»¥ä¸‹ä»£ç ã€‚å®ƒä¸ºä»€ä¹ˆæœ‰è¶£ï¼Ÿä¸ºä»€ä¹ˆå®ƒå¯¹ got_chars æœ‰æ•ˆï¼Œä½†åœ¨ä¸€èˆ¬æƒ…å†µä¸‹å¯èƒ½æ— æ•ˆï¼Ÿ\n\ntibble(json = got_chars) |&gt; \n  unnest_wider(json) |&gt; \n  select(id, where(is.list)) |&gt; \n  pivot_longer(\n    where(is.list), \n    names_to = \"name\", \n    values_to = \"value\"\n  ) |&gt;  \n  unnest_longer(value)\n\n\nåœ¨ gmaps_cities ä¸­ï¼Œaddress_components åŒ…å«ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¡Œä¸è¡Œä¹‹é—´çš„é•¿åº¦ä¸åŒï¼Ÿé€‚å½“åœ°å±•å¼€å®ƒæ¥æ‰¾å‡ºç­”æ¡ˆã€‚ï¼ˆæç¤ºï¼štypes ä¼¼ä¹æ€»æ˜¯åŒ…å«ä¸¤ä¸ªå…ƒç´ ã€‚ä½¿ç”¨ unnest_wider() æ˜¯å¦æ¯” unnest_longer() æ›´å®¹æ˜“å¤„ç†ï¼Ÿï¼‰",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>23</span>Â  <span class='chapter-title'>å±‚çº§æ•°æ®</span>"
    ]
  },
  {
    "objectID": "rectangling.html#json",
    "href": "rectangling.html#json",
    "title": "23Â  å±‚çº§æ•°æ®",
    "section": "\n23.5 JSON",
    "text": "23.5 JSON\nä¸Šä¸€èŠ‚çš„æ‰€æœ‰æ¡ˆä¾‹ç ”ç©¶éƒ½æ¥æºäºç°å®ä¸–ç•Œä¸­æ•è·çš„ JSONã€‚JSON æ˜¯ JavaScript Object Notation (JavaScript å¯¹è±¡è¡¨ç¤ºæ³•) çš„ç¼©å†™ï¼Œæ˜¯å¤§å¤šæ•° Web API è¿”å›æ•°æ®çš„æ–¹å¼ã€‚ç†è§£å®ƒå¾ˆé‡è¦ï¼Œå› ä¸ºå°½ç®¡ JSON å’Œ R çš„æ•°æ®ç±»å‹éå¸¸ç›¸ä¼¼ï¼Œä½†å¹¶ä¸å­˜åœ¨å®Œç¾çš„ 1 å¯¹ 1 æ˜ å°„ï¼Œæ‰€ä»¥å¦‚æœå‡ºç°é—®é¢˜ï¼Œäº†è§£ä¸€äº›å…³äº JSON çš„çŸ¥è¯†æ˜¯å¾ˆæœ‰å¥½å¤„çš„ã€‚\n\n23.5.1 æ•°æ®ç±»å‹\nJSON æ˜¯ä¸€ç§ç®€å•çš„æ ¼å¼ï¼Œè®¾è®¡ç”¨äºæœºå™¨è½»æ¾è¯»å†™ï¼Œè€Œä¸æ˜¯äººç±»ã€‚å®ƒæœ‰å…­ç§å…³é”®çš„æ•°æ®ç±»å‹ã€‚å…¶ä¸­å››ç§æ˜¯æ ‡é‡ (scalar)ï¼š\n\næœ€ç®€å•çš„ç±»å‹æ˜¯ç©ºå€¼ (null)ï¼Œå®ƒåœ¨ R ä¸­æ‰®æ¼”ä¸ NA ç›¸åŒçš„è§’è‰²ã€‚å®ƒè¡¨ç¤ºæ•°æ®çš„ç¼ºå¤±ã€‚\n\nå­—ç¬¦ä¸² (string) å¾ˆåƒ R ä¸­çš„å­—ç¬¦ä¸²ï¼Œä½†å¿…é¡»å§‹ç»ˆä½¿ç”¨åŒå¼•å·ã€‚\n\næ•°å­— (number) ç±»ä¼¼äº R çš„æ•°å­—ï¼šå®ƒä»¬å¯ä»¥ä½¿ç”¨æ•´æ•°ï¼ˆä¾‹å¦‚ï¼Œ123ï¼‰ã€å°æ•°ï¼ˆä¾‹å¦‚ï¼Œ123.45ï¼‰æˆ–ç§‘å­¦è®°æ•°æ³•ï¼ˆä¾‹å¦‚ï¼Œ1.23e3ï¼‰ã€‚JSON ä¸æ”¯æŒ Infã€-Inf æˆ– NaNã€‚\n\nå¸ƒå°”å€¼ (boolean) ç±»ä¼¼äº R çš„ TRUE å’Œ FALSEï¼Œä½†ä½¿ç”¨å°å†™çš„ true å’Œ falseã€‚\n\nJSON çš„å­—ç¬¦ä¸²ã€æ•°å­—å’Œå¸ƒå°”å€¼ä¸ R çš„å­—ç¬¦ã€æ•°å€¼å’Œé€»è¾‘å‘é‡éå¸¸ç›¸ä¼¼ã€‚ä¸»è¦åŒºåˆ«åœ¨äº JSON çš„æ ‡é‡åªèƒ½è¡¨ç¤ºå•ä¸ªå€¼ã€‚è¦è¡¨ç¤ºå¤šä¸ªå€¼ï¼Œä½ éœ€è¦ä½¿ç”¨å‰©ä¸‹çš„ä¸¤ç§ç±»å‹ä¹‹ä¸€ï¼šæ•°ç»„ (array) å’Œå¯¹è±¡ (object)ã€‚\næ•°ç»„å’Œå¯¹è±¡éƒ½ç±»ä¼¼äº R ä¸­çš„åˆ—è¡¨ï¼›åŒºåˆ«åœ¨äºå®ƒä»¬æ˜¯å¦è¢«å‘½åã€‚æ•°ç»„ å°±åƒä¸€ä¸ªæœªå‘½åçš„åˆ—è¡¨ï¼Œç”¨ [] ä¹¦å†™ã€‚ä¾‹å¦‚ [1, 2, 3] æ˜¯ä¸€ä¸ªåŒ…å« 3 ä¸ªæ•°å­—çš„æ•°ç»„ï¼Œè€Œ [null, 1, \"string\", false] æ˜¯ä¸€ä¸ªåŒ…å«ç©ºå€¼ã€æ•°å­—ã€å­—ç¬¦ä¸²å’Œå¸ƒå°”å€¼çš„æ•°ç»„ã€‚å¯¹è±¡ å°±åƒä¸€ä¸ªå‘½åçš„åˆ—è¡¨ï¼Œç”¨ {} ä¹¦å†™ã€‚åç§°ï¼ˆåœ¨ JSON æœ¯è¯­ä¸­ç§°ä¸ºé”® (key)ï¼‰æ˜¯å­—ç¬¦ä¸²ï¼Œå› æ­¤å¿…é¡»ç”¨å¼•å·æ‹¬èµ·æ¥ã€‚ä¾‹å¦‚ï¼Œ{\"x\": 1, \"y\": 2} æ˜¯ä¸€ä¸ªå°† x æ˜ å°„åˆ° 1ï¼Œy æ˜ å°„åˆ° 2 çš„å¯¹è±¡ã€‚\nè¯·æ³¨æ„ï¼ŒJSON æ²¡æœ‰ä»»ä½•è¡¨ç¤ºæ—¥æœŸæˆ–æ—¥æœŸæ—¶é—´çš„æœ¬åœ°æ–¹å¼ï¼Œå› æ­¤å®ƒä»¬é€šå¸¸ä½œä¸ºå­—ç¬¦ä¸²å­˜å‚¨ï¼Œä½ éœ€è¦ä½¿ç”¨ readr::parse_date() æˆ– readr::parse_datetime() å°†å®ƒä»¬è½¬æ¢ä¸ºæ­£ç¡®çš„æ•°æ®ç»“æ„ã€‚åŒæ ·ï¼ŒJSON è¡¨ç¤ºæµ®ç‚¹æ•°çš„è§„åˆ™æœ‰ç‚¹ä¸ç²¾ç¡®ï¼Œæ‰€ä»¥ä½ æœ‰æ—¶ä¹Ÿä¼šå‘ç°æ•°å­—å­˜å‚¨åœ¨å­—ç¬¦ä¸²ä¸­ã€‚æ ¹æ®éœ€è¦åº”ç”¨ readr::parse_double() æ¥è·å¾—æ­£ç¡®çš„å˜é‡ç±»å‹ã€‚\n\n23.5.2 jsonlite\nè¦å°† JSON è½¬æ¢ä¸º R çš„æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬æ¨è Jeroen Ooms å¼€å‘çš„ jsonlite åŒ…ã€‚æˆ‘ä»¬å°†åªä½¿ç”¨ä¸¤ä¸ª jsonlite å‡½æ•°ï¼šread_json() å’Œ parse_json()ã€‚åœ¨å®é™…ç”Ÿæ´»ä¸­ï¼Œä½ ä¼šä½¿ç”¨ read_json() ä»ç£ç›˜è¯»å– JSON æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œrepurrrsive åŒ…ä¹Ÿæä¾›äº† gh_user çš„æºæ•°æ®ä½œä¸º JSON æ–‡ä»¶ï¼Œä½ å¯ä»¥ç”¨ read_json() è¯»å–å®ƒï¼š\n\n# åŒ…å†…ä¸€ä¸ª json æ–‡ä»¶çš„è·¯å¾„ï¼š\ngh_users_json()\n#&gt; [1] \"C:/Users/14913/AppData/Local/R/win-library/4.5/repurrrsive/extdata/gh_users.json\"\n\n# ç”¨ read_json() è¯»å–å®ƒ\ngh_users2 &lt;- read_json(gh_users_json())\n\n# æ£€æŸ¥å®ƒæ˜¯å¦ä¸æˆ‘ä»¬ä¹‹å‰ä½¿ç”¨çš„æ•°æ®ç›¸åŒ\nidentical(gh_users, gh_users2)\n#&gt; [1] TRUE\n\nåœ¨æœ¬ä¹¦ä¸­ï¼Œæˆ‘ä»¬è¿˜ä¼šä½¿ç”¨ parse_json()ï¼Œå› ä¸ºå®ƒæ¥å—ä¸€ä¸ªåŒ…å« JSON çš„å­—ç¬¦ä¸²ï¼Œè¿™å¯¹äºç”Ÿæˆç®€å•çš„ä¾‹å­å¾ˆæœ‰ç”¨ã€‚é¦–å…ˆï¼Œè¿™é‡Œæœ‰ä¸‰ä¸ªç®€å•çš„ JSON æ•°æ®é›†ï¼Œä»ä¸€ä¸ªæ•°å­—å¼€å§‹ï¼Œç„¶åå°†å‡ ä¸ªæ•°å­—æ”¾å…¥ä¸€ä¸ªæ•°ç»„ï¼Œå†å°†è¯¥æ•°ç»„æ”¾å…¥ä¸€ä¸ªå¯¹è±¡ä¸­ï¼š\n\nstr(parse_json('1'))\n#&gt;  int 1\nstr(parse_json('[1, 2, 3]'))\n#&gt; List of 3\n#&gt;  $ : int 1\n#&gt;  $ : int 2\n#&gt;  $ : int 3\nstr(parse_json('{\"x\": [1, 2, 3]}'))\n#&gt; List of 1\n#&gt;  $ x:List of 3\n#&gt;   ..$ : int 1\n#&gt;   ..$ : int 2\n#&gt;   ..$ : int 3\n\njsonlite è¿˜æœ‰å¦ä¸€ä¸ªé‡è¦çš„å‡½æ•°å«åš fromJSON()ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œä¸ä½¿ç”¨å®ƒï¼Œå› ä¸ºå®ƒä¼šæ‰§è¡Œè‡ªåŠ¨ç®€åŒ– (simplifyVector = TRUE)ã€‚è¿™åœ¨ç®€å•æƒ…å†µä¸‹é€šå¸¸æ•ˆæœå¾ˆå¥½ï¼Œä½†æˆ‘ä»¬è®¤ä¸ºä½ è‡ªå·±è¿›è¡ŒçŸ©å½¢åŒ–ä¼šæ›´å¥½ï¼Œè¿™æ ·ä½ å°±ç¡®åˆ‡åœ°çŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆï¼Œå¹¶ä¸”å¯ä»¥æ›´å®¹æ˜“åœ°å¤„ç†æœ€å¤æ‚çš„åµŒå¥—ç»“æ„ã€‚\n\n23.5.3 å¼€å§‹çŸ©å½¢åŒ–è¿‡ç¨‹\nåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒJSON æ–‡ä»¶åŒ…å«ä¸€ä¸ªå•ä¸€çš„é¡¶å±‚æ•°ç»„ï¼Œå› ä¸ºå®ƒä»¬è¢«è®¾è®¡ç”¨æ¥æä¾›å…³äºå¤šä¸ªâ€œäº‹ç‰©â€çš„æ•°æ®ï¼Œä¾‹å¦‚ï¼Œå¤šä¸ªé¡µé¢ã€å¤šä¸ªè®°å½•æˆ–å¤šä¸ªç»“æœã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å°†ä»¥ tibble(json) å¼€å§‹ä½ çš„çŸ©å½¢åŒ–ï¼Œä»¥ä¾¿æ¯ä¸ªå…ƒç´ éƒ½æˆä¸ºä¸€è¡Œï¼š\n\njson &lt;- '[\n  {\"name\": \"John\", \"age\": 34},\n  {\"name\": \"Susan\", \"age\": 27}\n]'\ndf &lt;- tibble(json = parse_json(json))\ndf\n#&gt; # A tibble: 2 Ã— 1\n#&gt;   json            \n#&gt;   &lt;list&gt;          \n#&gt; 1 &lt;named list [2]&gt;\n#&gt; 2 &lt;named list [2]&gt;\n\ndf |&gt; \n  unnest_wider(json)\n#&gt; # A tibble: 2 Ã— 2\n#&gt;   name    age\n#&gt;   &lt;chr&gt; &lt;int&gt;\n#&gt; 1 John     34\n#&gt; 2 Susan    27\n\nåœ¨æ›´ç½•è§çš„æƒ…å†µä¸‹ï¼ŒJSON æ–‡ä»¶ç”±ä¸€ä¸ªå•ä¸€çš„é¡¶å±‚ JSON å¯¹è±¡ç»„æˆï¼Œä»£è¡¨ä¸€ä¸ªâ€œäº‹ç‰©â€ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ éœ€è¦é€šè¿‡å°†å…¶åŒ…è£…åœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­æ¥å¯åŠ¨çŸ©å½¢åŒ–è¿‡ç¨‹ï¼Œç„¶åå†å°†å…¶æ”¾å…¥ tibble ä¸­ã€‚\n\njson &lt;- '{\n  \"status\": \"OK\", \n  \"results\": [\n    {\"name\": \"John\", \"age\": 34},\n    {\"name\": \"Susan\", \"age\": 27}\n ]\n}\n'\ndf &lt;- tibble(json = list(parse_json(json)))\ndf\n#&gt; # A tibble: 1 Ã— 1\n#&gt;   json            \n#&gt;   &lt;list&gt;          \n#&gt; 1 &lt;named list [2]&gt;\n\ndf |&gt; \n  unnest_wider(json) |&gt; \n  unnest_longer(results) |&gt; \n  unnest_wider(results)\n#&gt; # A tibble: 2 Ã— 3\n#&gt;   status name    age\n#&gt;   &lt;chr&gt;  &lt;chr&gt; &lt;int&gt;\n#&gt; 1 OK     John     34\n#&gt; 2 OK     Susan    27\n\næˆ–è€…ï¼Œä½ å¯ä»¥æ·±å…¥åˆ°è§£æåçš„ JSON å†…éƒ¨ï¼Œä»ä½ çœŸæ­£å…³å¿ƒçš„éƒ¨åˆ†å¼€å§‹ï¼š\n\ndf &lt;- tibble(results = parse_json(json)$results)\ndf |&gt; \n  unnest_wider(results)\n#&gt; # A tibble: 2 Ã— 2\n#&gt;   name    age\n#&gt;   &lt;chr&gt; &lt;int&gt;\n#&gt; 1 John     34\n#&gt; 2 Susan    27\n\n\n23.5.4 ç»ƒä¹ \n\n\nå°†ä¸‹é¢çš„ df_col å’Œ df_row è¿›è¡ŒçŸ©å½¢åŒ–ã€‚å®ƒä»¬ä»£è¡¨äº†åœ¨ JSON ä¸­ç¼–ç æ•°æ®æ¡†çš„ä¸¤ç§æ–¹å¼ã€‚\n\njson_col &lt;- parse_json('\n  {\n    \"x\": [\"a\", \"x\", \"z\"],\n    \"y\": [10, null, 3]\n  }\n')\njson_row &lt;- parse_json('\n  [\n    {\"x\": \"a\", \"y\": 10},\n    {\"x\": \"x\", \"y\": null},\n    {\"x\": \"z\", \"y\": 3}\n  ]\n')\n\ndf_col &lt;- tibble(json = list(json_col)) \ndf_row &lt;- tibble(json = json_row)",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>23</span>Â  <span class='chapter-title'>å±‚çº§æ•°æ®</span>"
    ]
  },
  {
    "objectID": "rectangling.html#æ€»ç»“",
    "href": "rectangling.html#æ€»ç»“",
    "title": "23Â  å±‚çº§æ•°æ®",
    "section": "\n23.6 æ€»ç»“",
    "text": "23.6 æ€»ç»“\nåœ¨æœ¬ç« ä¸­ï¼Œä½ å­¦ä¹ äº†ä»€ä¹ˆæ˜¯åˆ—è¡¨ï¼Œå¦‚ä½•ä» JSON æ–‡ä»¶ç”Ÿæˆå®ƒä»¬ï¼Œä»¥åŠå¦‚ä½•å°†å®ƒä»¬è½¬æ¢ä¸ºçŸ©å½¢æ•°æ®æ¡†ã€‚ä»¤äººæƒŠè®¶çš„æ˜¯ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸¤ä¸ªæ–°å‡½æ•°ï¼šunnest_longer() ç”¨äºå°†åˆ—è¡¨å…ƒç´ æ”¾å…¥è¡Œä¸­ï¼Œunnest_wider() ç”¨äºå°†åˆ—è¡¨å…ƒç´ æ”¾å…¥åˆ—ä¸­ã€‚æ— è®ºåˆ—è¡¨åˆ—çš„åµŒå¥—æœ‰å¤šæ·±ï¼Œä½ æ‰€éœ€è¦åšçš„å°±æ˜¯é‡å¤è°ƒç”¨è¿™ä¸¤ä¸ªå‡½æ•°ã€‚\nJSON æ˜¯ Web API è¿”å›çš„æœ€å¸¸è§çš„æ•°æ®æ ¼å¼ã€‚å¦‚æœç½‘ç«™æ²¡æœ‰ APIï¼Œä½†ä½ å¯ä»¥åœ¨ç½‘ç«™ä¸Šçœ‹åˆ°ä½ æƒ³è¦çš„æ•°æ®ï¼Œé‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™å°±æ˜¯ä¸‹ä¸€ç« çš„ä¸»é¢˜ï¼šç½‘ç»œæŠ“å– (web scraping)ï¼Œä» HTML ç½‘é¡µä¸­æå–æ•°æ®ã€‚",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>23</span>Â  <span class='chapter-title'>å±‚çº§æ•°æ®</span>"
    ]
  },
  {
    "objectID": "rectangling.html#footnotes",
    "href": "rectangling.html#footnotes",
    "title": "23Â  å±‚çº§æ•°æ®",
    "section": "",
    "text": "è¿™æ˜¯ RStudio çš„ä¸€ä¸ªåŠŸèƒ½ã€‚â†©ï¸",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>23</span>Â  <span class='chapter-title'>å±‚çº§æ•°æ®</span>"
    ]
  },
  {
    "objectID": "webscraping.html",
    "href": "webscraping.html",
    "title": "24Â  ç½‘ç»œæŠ“å–",
    "section": "",
    "text": "24.1 å¼•è¨€\næœ¬ç« å°†å‘ä½ ä»‹ç»ä½¿ç”¨ rvest è¿›è¡Œç½‘ç»œæŠ“å– (web scraping) çš„åŸºç¡€çŸ¥è¯†ã€‚ç½‘ç»œæŠ“å–æ˜¯ä»ç½‘é¡µä¸­æå–æ•°æ®çš„ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å·¥å…·ã€‚æœ‰äº›ç½‘ç«™ä¼šæä¾› APIï¼Œè¿™æ˜¯ä¸€ç»„ç»“æ„åŒ–çš„ HTTP è¯·æ±‚ï¼Œä»¥ JSON æ ¼å¼è¿”å›æ•°æ®ï¼Œä½ å¯ä»¥ä½¿ç”¨ Chapter 23 ä¸­ä»‹ç»çš„æŠ€æœ¯æ¥å¤„ç†è¿™äº›æ•°æ®ã€‚å¦‚æœå¯èƒ½ï¼Œä½ åº”è¯¥ä½¿ç”¨ API 1ï¼Œå› ä¸ºå®ƒé€šå¸¸ä¼šä¸ºä½ æä¾›æ›´å¯é çš„æ•°æ®ã€‚ç„¶è€Œï¼Œä¸å¹¸çš„æ˜¯ï¼Œä½¿ç”¨ Web API è¿›è¡Œç¼–ç¨‹è¶…å‡ºäº†æœ¬ä¹¦çš„èŒƒå›´ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æ•™æˆçš„æ˜¯æŠ“å–æŠ€æœ¯ï¼Œæ— è®ºç½‘ç«™æ˜¯å¦æä¾› APIï¼Œè¿™ç§æŠ€æœ¯éƒ½é€‚ç”¨ã€‚\nåœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆä¼šè®¨è®ºæŠ“å–çš„ä¼¦ç†å’Œæ³•å¾‹é—®é¢˜ï¼Œç„¶åå†æ·±å…¥æ¢è®¨ HTML çš„åŸºç¡€çŸ¥è¯†ã€‚æ¥ç€ï¼Œä½ å°†å­¦ä¹  CSS é€‰æ‹©å™¨çš„åŸºç¡€çŸ¥è¯†ï¼Œä»¥å®šä½é¡µé¢ä¸Šçš„ç‰¹å®šå…ƒç´ ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ rvest å‡½æ•°ä» HTML ä¸­æå–æ–‡æœ¬å’Œå±æ€§æ•°æ®å¹¶å°†å…¶å¯¼å…¥ Rã€‚ç„¶åï¼Œæˆ‘ä»¬å°†è®¨è®ºä¸€äº›æŠ€å·§ï¼Œä»¥å¸®åŠ©ä½ ç¡®å®šæ‰€éœ€é¡µé¢çš„ CSS é€‰æ‹©å™¨ï¼Œæœ€åé€šè¿‡å‡ ä¸ªæ¡ˆä¾‹ç ”ç©¶ç»“æŸï¼Œå¹¶ç®€è¦è®¨è®ºåŠ¨æ€ç½‘ç«™ã€‚",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>24</span>Â  <span class='chapter-title'>ç½‘ç»œæŠ“å–</span>"
    ]
  },
  {
    "objectID": "webscraping.html#å¼•è¨€",
    "href": "webscraping.html#å¼•è¨€",
    "title": "24Â  ç½‘ç»œæŠ“å–",
    "section": "",
    "text": "24.1.1 å…ˆå†³æ¡ä»¶\nåœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†é‡ç‚¹ä»‹ç» rvest æä¾›çš„å·¥å…·ã€‚rvest æ˜¯ tidyverse çš„ä¸€ä¸ªæˆå‘˜ï¼Œä½†ä¸æ˜¯æ ¸å¿ƒæˆå‘˜ï¼Œæ‰€ä»¥ä½ éœ€è¦æ˜¾å¼åŠ è½½å®ƒã€‚æˆ‘ä»¬è¿˜å°†åŠ è½½å®Œæ•´çš„ tidyverseï¼Œå› ä¸ºåœ¨å¤„ç†æˆ‘ä»¬æŠ“å–çš„æ•°æ®æ—¶ï¼Œå®ƒé€šå¸¸å¾ˆæœ‰ç”¨ã€‚\n\nlibrary(tidyverse)\nlibrary(rvest)",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>24</span>Â  <span class='chapter-title'>ç½‘ç»œæŠ“å–</span>"
    ]
  },
  {
    "objectID": "webscraping.html#æŠ“å–çš„ä¼¦ç†å’Œæ³•å¾‹",
    "href": "webscraping.html#æŠ“å–çš„ä¼¦ç†å’Œæ³•å¾‹",
    "title": "24Â  ç½‘ç»œæŠ“å–",
    "section": "\n24.2 æŠ“å–çš„ä¼¦ç†å’Œæ³•å¾‹",
    "text": "24.2 æŠ“å–çš„ä¼¦ç†å’Œæ³•å¾‹\nåœ¨æˆ‘ä»¬å¼€å§‹è®¨è®ºæ‰§è¡Œç½‘ç»œæŠ“å–æ‰€éœ€çš„ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦è°ˆè°ˆè¿™æ ·åšæ˜¯å¦åˆæ³•å’Œåˆä¹é“å¾·ã€‚æ€»çš„æ¥è¯´ï¼Œè¿™ä¸¤ç§æƒ…å†µéƒ½å¾ˆå¤æ‚ã€‚\nåˆæ³•æ€§åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºä½ æ‰€åœ¨çš„åœ°åŒºã€‚ç„¶è€Œï¼Œä½œä¸ºä¸€èˆ¬åŸåˆ™ï¼Œå¦‚æœæ•°æ®æ˜¯å…¬å¼€çš„ã€éä¸ªäººçš„å’Œäº‹å®æ€§çš„ï¼Œä½ å¾ˆå¯èƒ½æ˜¯å®‰å…¨çš„ 2ã€‚è¿™ä¸‰ä¸ªå› ç´ å¾ˆé‡è¦ï¼Œå› ä¸ºå®ƒä»¬ä¸ç½‘ç«™çš„æœåŠ¡æ¡æ¬¾ã€ä¸ªäººèº«ä»½ä¿¡æ¯å’Œç‰ˆæƒæœ‰å…³ï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹é¢è®¨è®ºã€‚\nå¦‚æœæ•°æ®ä¸æ˜¯å…¬å¼€çš„ã€éä¸ªäººçš„æˆ–äº‹å®æ€§çš„ï¼Œæˆ–è€…ä½ æŠ“å–æ•°æ®çš„ç›®çš„å°±æ˜¯ä¸ºäº†èµšé’±ï¼Œé‚£ä¹ˆä½ éœ€è¦å’¨è¯¢å¾‹å¸ˆã€‚åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œä½ éƒ½åº”è¯¥å°Šé‡æ‰˜ç®¡ä½ æ­£åœ¨æŠ“å–çš„é¡µé¢çš„æœåŠ¡å™¨èµ„æºã€‚æœ€é‡è¦çš„æ˜¯ï¼Œè¿™æ„å‘³ç€å¦‚æœä½ è¦æŠ“å–è®¸å¤šé¡µé¢ï¼Œä½ åº”è¯¥ç¡®ä¿åœ¨æ¯ä¸ªè¯·æ±‚ä¹‹é—´ç¨ä½œç­‰å¾…ã€‚ä¸€ä¸ªç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨ Dmytro Perepolkin çš„ polite åŒ…ã€‚å®ƒä¼šè‡ªåŠ¨åœ¨è¯·æ±‚ä¹‹é—´æš‚åœï¼Œå¹¶ç¼“å­˜ç»“æœï¼Œè¿™æ ·ä½ å°±æ°¸è¿œä¸ä¼šä¸¤æ¬¡è¯·æ±‚åŒä¸€ä¸ªé¡µé¢ã€‚\n\n24.2.1 æœåŠ¡æ¡æ¬¾\nå¦‚æœä½ ä»”ç»†è§‚å¯Ÿï¼Œä½ ä¼šå‘ç°è®¸å¤šç½‘ç«™åœ¨é¡µé¢çš„æŸä¸ªåœ°æ–¹åŒ…å«ä¸€ä¸ªâ€œæ¡æ¬¾å’Œæ¡ä»¶â€æˆ–â€œæœåŠ¡æ¡æ¬¾â€çš„é“¾æ¥ï¼Œå¦‚æœä½ ä»”ç»†é˜…è¯»é‚£ä¸ªé¡µé¢ï¼Œä½ é€šå¸¸ä¼šå‘ç°è¯¥ç½‘ç«™æ˜ç¡®ç¦æ­¢ç½‘ç»œæŠ“å–ã€‚è¿™äº›é¡µé¢å¾€å¾€æ˜¯å…¬å¸æå‡ºéå¸¸å®½æ³›ä¸»å¼ çš„æ³•å¾‹â€œåœˆåœ°â€ã€‚åœ¨å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œå°Šé‡è¿™äº›æœåŠ¡æ¡æ¬¾æ˜¯ç¤¼è²Œçš„ï¼Œä½†å¯¹ä»»ä½•ä¸»å¼ éƒ½è¦æŒä¿ç•™æ€åº¦ã€‚\nç¾å›½æ³•é™¢é€šå¸¸è®¤ä¸ºï¼Œä»…ä»…å°†æœåŠ¡æ¡æ¬¾æ”¾åœ¨ç½‘ç«™é¡µè„šä¸è¶³ä»¥ä½¿ä½ å—å…¶çº¦æŸï¼Œä¾‹å¦‚ HiQ Labs v. LinkedInã€‚é€šå¸¸ï¼Œè¦å—æœåŠ¡æ¡æ¬¾çº¦æŸï¼Œä½ å¿…é¡»é‡‡å–ä¸€äº›æ˜ç¡®çš„è¡ŒåŠ¨ï¼Œæ¯”å¦‚åˆ›å»ºè´¦æˆ·æˆ–å‹¾é€‰ä¸€ä¸ªæ¡†ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ•°æ®æ˜¯å¦å…¬å¼€å¾ˆé‡è¦çš„åŸå› ï¼›å¦‚æœä½ ä¸éœ€è¦è´¦æˆ·å°±èƒ½è®¿é—®å®ƒä»¬ï¼Œä½ å°±ä¸å¤ªå¯èƒ½å—æœåŠ¡æ¡æ¬¾çš„çº¦æŸã€‚ä½†è¯·æ³¨æ„ï¼Œåœ¨æ¬§æ´²æƒ…å†µå¤§ä¸ç›¸åŒï¼Œæ³•é™¢è®¤ä¸ºå³ä½¿ä½ æ²¡æœ‰æ˜ç¡®åŒæ„ï¼ŒæœåŠ¡æ¡æ¬¾ä¹Ÿæ˜¯å¯æ‰§è¡Œçš„ã€‚\n\n24.2.2 ä¸ªäººèº«ä»½ä¿¡æ¯\nå³ä½¿æ•°æ®æ˜¯å…¬å¼€çš„ï¼Œä½ ä¹Ÿåº”è¯¥æå…¶å°å¿ƒåœ°æŠ“å–ä¸ªäººèº«ä»½ä¿¡æ¯ (personally identifiable information)ï¼Œå¦‚å§“åã€ç”µå­é‚®ä»¶åœ°å€ã€ç”µè¯å·ç ã€å‡ºç”Ÿæ—¥æœŸç­‰ã€‚æ¬§æ´²å¯¹æ”¶é›†æˆ–å­˜å‚¨æ­¤ç±»æ•°æ®æœ‰ç‰¹åˆ«ä¸¥æ ¼çš„æ³•å¾‹ (GDPR)ï¼Œæ— è®ºä½ ä½åœ¨å“ªé‡Œï¼Œä½ éƒ½å¯èƒ½é™·å…¥é“å¾·å›°å¢ƒã€‚ä¾‹å¦‚ï¼Œ2016 å¹´ï¼Œä¸€ç»„ç ”ç©¶äººå‘˜æŠ“å–äº†çº¦ä¼šç½‘ç«™ OkCupid ä¸Š 70,000 äººçš„å…¬å¼€ä¸ªäººèµ„æ–™ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œç”¨æˆ·åã€å¹´é¾„ã€æ€§åˆ«ã€ä½ç½®ç­‰ï¼‰ï¼Œå¹¶åœ¨æ²¡æœ‰ä»»ä½•åŒ¿ååŒ–å°è¯•çš„æƒ…å†µä¸‹å…¬å¼€å‘å¸ƒäº†è¿™äº›æ•°æ®ã€‚è™½ç„¶ç ”ç©¶äººå‘˜è®¤ä¸ºè¿™æ ·åšæ²¡æœ‰é”™ï¼Œå› ä¸ºæ•°æ®å·²ç»æ˜¯å…¬å¼€çš„ï¼Œä½†è¿™é¡¹å·¥ä½œå› æ¶‰åŠç”¨æˆ·èº«ä»½å¯è¯†åˆ«æ€§çš„ä¼¦ç†é—®é¢˜è€Œå—åˆ°å¹¿æ³›è°´è´£ã€‚å¦‚æœä½ çš„å·¥ä½œæ¶‰åŠæŠ“å–ä¸ªäººèº«ä»½ä¿¡æ¯ï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®é˜…è¯»å…³äº OkCupid ç ”ç©¶ 3 ä»¥åŠæ¶‰åŠè·å–å’Œå‘å¸ƒä¸ªäººèº«ä»½ä¿¡æ¯ä¸”ç ”ç©¶ä¼¦ç†å­˜ç–‘çš„ç±»ä¼¼ç ”ç©¶çš„èµ„æ–™ã€‚\n\n24.2.3 ç‰ˆæƒ\næœ€åï¼Œä½ è¿˜éœ€è¦æ‹…å¿ƒç‰ˆæƒæ³•ã€‚ç‰ˆæƒæ³•å¾ˆå¤æ‚ï¼Œä½†å€¼å¾—ä¸€çœ‹çš„æ˜¯ç¾å›½æ³•å¾‹ï¼Œå®ƒå‡†ç¡®æè¿°äº†å—ä¿æŠ¤çš„å†…å®¹ï¼šâ€œ[â€¦] å›ºå®šåœ¨ä»»ä½•æœ‰å½¢è¡¨è¾¾åª’ä»‹ä¸­çš„åŸåˆ›ä½œè€…ä½œå“ [â€¦]â€ã€‚ç„¶åå®ƒç»§ç»­æè¿°äº†å®ƒé€‚ç”¨çš„å…·ä½“ç±»åˆ«ï¼Œå¦‚æ–‡å­¦ä½œå“ã€éŸ³ä¹ä½œå“ã€ç”µå½±ç­‰ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæ•°æ®ä¸åœ¨ç‰ˆæƒä¿æŠ¤ä¹‹åˆ—ã€‚è¿™æ„å‘³ç€ï¼Œåªè¦ä½ å°†æŠ“å–é™åˆ¶åœ¨äº‹å®ä¸Šï¼Œç‰ˆæƒä¿æŠ¤å°±ä¸é€‚ç”¨ã€‚ï¼ˆä½†è¯·æ³¨æ„ï¼Œæ¬§æ´²æœ‰ä¸€é¡¹å•ç‹¬çš„â€œç‰¹æ®Šæƒåˆ©â€ (sui generis)ï¼Œç”¨äºä¿æŠ¤æ•°æ®åº“ã€‚ï¼‰\nä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œåœ¨ç¾å›½ï¼Œé…æ–™å’Œè¯´æ˜çš„åˆ—è¡¨ä¸å—ç‰ˆæƒä¿æŠ¤ï¼Œæ‰€ä»¥ç‰ˆæƒä¸èƒ½ç”¨æ¥ä¿æŠ¤é£Ÿè°±ã€‚ä½†æ˜¯ï¼Œå¦‚æœé‚£ä»½é£Ÿè°±åˆ—è¡¨ä¼´éšç€å¤§é‡æ–°é¢–çš„æ–‡å­¦å†…å®¹ï¼Œé‚£ä¹ˆè¿™äº›å†…å®¹æ˜¯å—ç‰ˆæƒä¿æŠ¤çš„ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå½“ä½ åœ¨äº’è”ç½‘ä¸Šå¯»æ‰¾é£Ÿè°±æ—¶ï¼Œæ€»æ˜¯æœ‰é‚£ä¹ˆå¤šå‰ç½®å†…å®¹çš„åŸå› ã€‚\nå¦‚æœä½ ç¡®å®éœ€è¦æŠ“å–åŸåˆ›å†…å®¹ï¼ˆå¦‚æ–‡æœ¬æˆ–å›¾ç‰‡ï¼‰ï¼Œä½ å¯èƒ½ä»ç„¶å—åˆ°åˆç†ä½¿ç”¨åŸåˆ™ (doctrine of fair use) çš„ä¿æŠ¤ã€‚åˆç†ä½¿ç”¨ä¸æ˜¯ä¸€ä¸ªç¡¬æ€§è§„å®šï¼Œè€Œæ˜¯æƒè¡¡äº†è®¸å¤šå› ç´ ã€‚å¦‚æœä½ æ˜¯ä¸ºäº†ç ”ç©¶æˆ–éå•†ä¸šç›®çš„æ”¶é›†æ•°æ®ï¼Œå¹¶ä¸”ä½ å°†æŠ“å–çš„å†…å®¹é™åˆ¶åœ¨æ‰€éœ€èŒƒå›´å†…ï¼Œé‚£ä¹ˆå®ƒæ›´æœ‰å¯èƒ½é€‚ç”¨ã€‚",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>24</span>Â  <span class='chapter-title'>ç½‘ç»œæŠ“å–</span>"
    ]
  },
  {
    "objectID": "webscraping.html#html-åŸºç¡€",
    "href": "webscraping.html#html-åŸºç¡€",
    "title": "24Â  ç½‘ç»œæŠ“å–",
    "section": "\n24.3 HTML åŸºç¡€",
    "text": "24.3 HTML åŸºç¡€\nè¦æŠ“å–ç½‘é¡µï¼Œä½ é¦–å…ˆéœ€è¦å¯¹ HTML æœ‰ä¸€ç‚¹äº†è§£ï¼Œè¿™æ˜¯ä¸€ç§æè¿°ç½‘é¡µçš„è¯­è¨€ã€‚HTML æ˜¯è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ (HyperText Markup Language) çš„ç¼©å†™ï¼Œçœ‹èµ·æ¥åƒè¿™æ ·ï¼š\n&lt;html&gt;\n&lt;head&gt;\n  &lt;title&gt;é¡µé¢æ ‡é¢˜&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;h1 id='first'&gt;ä¸€ä¸ªæ ‡é¢˜&lt;/h1&gt;\n  &lt;p&gt;ä¸€äº›æ–‡æœ¬ & &lt;b&gt;ä¸€äº›ç²—ä½“æ–‡æœ¬ã€‚&lt;/b&gt;&lt;/p&gt;\n  &lt;img src='myimg.png' width='100' height='100'&gt;\n&lt;/body&gt;\nHTML å…·æœ‰ç”±å…ƒç´  (elements) æ„æˆçš„å±‚æ¬¡ç»“æ„ï¼Œå…ƒç´ ç”±ä¸€ä¸ªå¼€å§‹æ ‡ç­¾ (start tag)ï¼ˆä¾‹å¦‚ &lt;tag&gt;ï¼‰ã€å¯é€‰çš„å±æ€§ (attributes)ï¼ˆid='first'ï¼‰ã€ä¸€ä¸ªç»“æŸæ ‡ç­¾ (end tag) 4ï¼ˆä¾‹å¦‚ &lt;/tag&gt;ï¼‰å’Œå†…å®¹ (contents)ï¼ˆå¼€å§‹å’Œç»“æŸæ ‡ç­¾ä¹‹é—´çš„æ‰€æœ‰å†…å®¹ï¼‰ç»„æˆã€‚\nç”±äº &lt; å’Œ &gt; ç”¨äºå¼€å§‹å’Œç»“æŸæ ‡ç­¾ï¼Œä½ ä¸èƒ½ç›´æ¥å†™å®ƒä»¬ã€‚ä½ å¿…é¡»ä½¿ç”¨ HTML è½¬ä¹‰ (escapes) &gt; (å¤§äº) å’Œ &lt; (å°äº)ã€‚å¹¶ä¸”ç”±äºè¿™äº›è½¬ä¹‰ä½¿ç”¨äº† &ï¼Œå¦‚æœä½ æƒ³è¦ä¸€ä¸ªå­—é¢ä¸Šçš„ & ç¬¦å·ï¼Œä½ å¿…é¡»å°†å…¶è½¬ä¹‰ä¸º &amp;ã€‚æœ‰å„ç§å„æ ·çš„ HTML è½¬ä¹‰ï¼Œä½†ä½ ä¸éœ€è¦å¤ªæ‹…å¿ƒå®ƒä»¬ï¼Œå› ä¸º rvest ä¼šè‡ªåŠ¨ä¸ºä½ å¤„ç†ã€‚\nç½‘ç»œæŠ“å–ä¹‹æ‰€ä»¥å¯è¡Œï¼Œæ˜¯å› ä¸ºå¤§å¤šæ•°åŒ…å«ä½ æƒ³è¦æŠ“å–çš„æ•°æ®çš„é¡µé¢é€šå¸¸éƒ½æœ‰ä¸€ä¸ªä¸€è‡´çš„ç»“æ„ã€‚\n\n24.3.1 å…ƒç´ \nHTML å…ƒç´ æœ‰ 100 å¤šç§ã€‚å…¶ä¸­ä¸€äº›æœ€é‡è¦çš„å…ƒç´ æ˜¯ï¼š\n\næ¯ä¸ª HTML é¡µé¢éƒ½å¿…é¡»åœ¨ä¸€ä¸ª &lt;html&gt; å…ƒç´ ä¸­ï¼Œå¹¶ä¸”å®ƒå¿…é¡»æœ‰ä¸¤ä¸ªå­å…ƒç´ ï¼š&lt;head&gt;ï¼ŒåŒ…å«æ–‡æ¡£å…ƒæ•°æ®ï¼Œå¦‚é¡µé¢æ ‡é¢˜ï¼›ä»¥åŠ &lt;body&gt;ï¼ŒåŒ…å«ä½ åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ°çš„å†…å®¹ã€‚\nå—çº§æ ‡ç­¾ï¼Œå¦‚ &lt;h1&gt; (ä¸€çº§æ ‡é¢˜)ã€&lt;section&gt; (åŒºåŸŸ)ã€&lt;p&gt; (æ®µè½) å’Œ &lt;ol&gt; (æœ‰åºåˆ—è¡¨)ï¼Œæ„æˆäº†é¡µé¢çš„æ•´ä½“ç»“æ„ã€‚\nå†…è”æ ‡ç­¾ï¼Œå¦‚ &lt;b&gt; (ç²—ä½“)ã€&lt;i&gt; (æ–œä½“) å’Œ &lt;a&gt; (é“¾æ¥)ï¼Œç”¨äºæ ¼å¼åŒ–å—çº§æ ‡ç­¾å†…çš„æ–‡æœ¬ã€‚\n\nå¦‚æœä½ é‡åˆ°ä¸€ä¸ªä½ ä»æœªè§è¿‡çš„æ ‡ç­¾ï¼Œä½ å¯ä»¥é€šè¿‡è°·æ­Œæœç´¢æ¥äº†è§£å®ƒçš„ä½œç”¨ã€‚å¦ä¸€ä¸ªå¥½çš„èµ·ç‚¹æ˜¯ MDN Web Docsï¼Œå®ƒæè¿°äº†å‡ ä¹æ‰€æœ‰ Web ç¼–ç¨‹çš„æ–¹é¢ã€‚\nå¤§å¤šæ•°å…ƒç´ åœ¨å…¶å¼€å§‹å’Œç»“æŸæ ‡ç­¾ä¹‹é—´å¯ä»¥æœ‰å†…å®¹ã€‚è¿™ä¸ªå†…å®¹å¯ä»¥æ˜¯æ–‡æœ¬ï¼Œä¹Ÿå¯ä»¥æ˜¯æ›´å¤šçš„å…ƒç´ ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ HTML åŒ…å«ä¸€ä¸ªæ–‡æœ¬æ®µè½ï¼Œå…¶ä¸­ä¸€ä¸ªè¯æ˜¯ç²—ä½“çš„ã€‚\n&lt;p&gt;\n  å—¨ï¼æˆ‘çš„&lt;b&gt;åå­—&lt;/b&gt;æ˜¯ Hadleyã€‚\n&lt;/p&gt;\nå­å…ƒç´  (children) æ˜¯å®ƒåŒ…å«çš„å…ƒç´ ï¼Œæ‰€ä»¥ä¸Šé¢çš„ &lt;p&gt; å…ƒç´ æœ‰ä¸€ä¸ªå­å…ƒç´ ï¼Œå³ &lt;b&gt; å…ƒç´ ã€‚&lt;b&gt; å…ƒç´ æ²¡æœ‰å­å…ƒç´ ï¼Œä½†å®ƒæœ‰å†…å®¹ï¼ˆæ–‡æœ¬â€œåå­—â€ï¼‰ã€‚\n\n24.3.2 å±æ€§\næ ‡ç­¾å¯ä»¥æœ‰å‘½åçš„å±æ€§ (attributes)ï¼Œçœ‹èµ·æ¥åƒ name1='value1' name2='value2'ã€‚ä¸¤ä¸ªæœ€é‡è¦çš„å±æ€§æ˜¯ id å’Œ classï¼Œå®ƒä»¬ä¸ CSS (Cascading Style Sheets) ç»“åˆä½¿ç”¨ï¼Œä»¥æ§åˆ¶é¡µé¢çš„è§†è§‰å¤–è§‚ã€‚åœ¨æŠ“å–æ•°æ®æ—¶ï¼Œè¿™äº›å±æ€§é€šå¸¸å¾ˆæœ‰ç”¨ã€‚å±æ€§è¿˜ç”¨äºè®°å½•é“¾æ¥çš„ç›®çš„åœ°ï¼ˆ&lt;a&gt; å…ƒç´ çš„ href å±æ€§ï¼‰å’Œå›¾åƒçš„æ¥æºï¼ˆ&lt;img&gt; å…ƒç´ çš„ src å±æ€§ï¼‰ã€‚",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>24</span>Â  <span class='chapter-title'>ç½‘ç»œæŠ“å–</span>"
    ]
  },
  {
    "objectID": "webscraping.html#æå–æ•°æ®",
    "href": "webscraping.html#æå–æ•°æ®",
    "title": "24Â  ç½‘ç»œæŠ“å–",
    "section": "\n24.4 æå–æ•°æ®",
    "text": "24.4 æå–æ•°æ®\nè¦å¼€å§‹æŠ“å–ï¼Œä½ éœ€è¦ä½ æƒ³è¦æŠ“å–çš„é¡µé¢çš„ URLï¼Œä½ é€šå¸¸å¯ä»¥ä»ä½ çš„ç½‘ç»œæµè§ˆå™¨ä¸­å¤åˆ¶ã€‚ç„¶åï¼Œä½ éœ€è¦ä½¿ç”¨ read_html() å°†è¯¥é¡µé¢çš„ HTML è¯»å…¥ Rã€‚è¿™å°†è¿”å›ä¸€ä¸ª xml_document 5 å¯¹è±¡ï¼Œç„¶åä½ å°†ä½¿ç”¨ rvest å‡½æ•°æ¥æ“ä½œå®ƒï¼š\n\nhtml &lt;- read_html(\"http://rvest.tidyverse.org/\")\nhtml\n#&gt; {html_document}\n#&gt; &lt;html lang=\"en\"&gt;\n#&gt; [1] &lt;head&gt;\\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UT ...\n#&gt; [2] &lt;body&gt;\\n    &lt;a href=\"#container\" class=\"visually-hidden-focusable\"&gt;Ski ...\n\nrvest è¿˜åŒ…å«ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥è®©ä½ å†…è”ç¼–å†™ HTMLã€‚åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†å¤§é‡ä½¿ç”¨è¿™ä¸ªå‡½æ•°ï¼Œå› ä¸ºæˆ‘ä»¬é€šè¿‡ç®€å•çš„ä¾‹å­æ¥æ•™æˆå„ç§ rvest å‡½æ•°çš„å·¥ä½œæ–¹å¼ã€‚\n\nhtml &lt;- minimal_html(\"\n  &lt;p&gt;è¿™æ˜¯ä¸€ä¸ªæ®µè½&lt;/p&gt;\n  &lt;ul&gt;\n    &lt;li&gt;è¿™æ˜¯ä¸€ä¸ªé¡¹ç›®ç¬¦å·åˆ—è¡¨&lt;/li&gt;\n  &lt;/ul&gt;\n\")\nhtml\n#&gt; {html_document}\n#&gt; &lt;html&gt;\n#&gt; [1] &lt;head&gt;\\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UT ...\n#&gt; [2] &lt;body&gt;\\n&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªæ®µè½&lt;/p&gt;\\n  &lt;ul&gt;\\n&lt;li&gt;è¿™æ˜¯ä¸€ä¸ªé¡¹ç›®ç¬¦å·åˆ—è¡¨&lt;/li&gt;\\n  &lt;/ul&gt;\\n&lt;/body&gt;\n\nç°åœ¨ä½ å·²ç»åœ¨ R ä¸­æœ‰äº† HTMLï¼Œæ˜¯æ—¶å€™æå–æ„Ÿå…´è¶£çš„æ•°æ®äº†ã€‚ä½ å°†é¦–å…ˆå­¦ä¹  CSS é€‰æ‹©å™¨ï¼Œå®ƒå…è®¸ä½ è¯†åˆ«æ„Ÿå…´è¶£çš„å…ƒç´ ï¼Œä»¥åŠä½ å¯ä»¥ç”¨æ¥ä»ä¸­æå–æ•°æ®çš„ rvest å‡½æ•°ã€‚ç„¶åæˆ‘ä»¬å°†ç®€è¦ä»‹ç» HTML è¡¨æ ¼ï¼Œå®ƒæœ‰ä¸€äº›ç‰¹æ®Šçš„å·¥å…·ã€‚\n\n24.4.1 æŸ¥æ‰¾å…ƒç´ \nCSS æ˜¯å±‚å æ ·å¼è¡¨ (cascading style sheets) çš„ç¼©å†™ï¼Œæ˜¯ä¸€ç§ç”¨äºå®šä¹‰ HTML æ–‡æ¡£è§†è§‰æ ·å¼çš„å·¥å…·ã€‚CSS åŒ…æ‹¬ä¸€ç§ç”¨äºåœ¨é¡µé¢ä¸Šé€‰æ‹©å…ƒç´ çš„å¾®å‹è¯­è¨€ï¼Œç§°ä¸º CSS é€‰æ‹©å™¨ (CSS selectors)ã€‚CSS é€‰æ‹©å™¨å®šä¹‰äº†å®šä½ HTML å…ƒç´ çš„æ¨¡å¼ï¼Œå¯¹äºæŠ“å–å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºå®ƒä»¬æä¾›äº†ä¸€ç§ç®€æ´çš„æ–¹å¼æ¥æè¿°ä½ æƒ³è¦æå–çš„å…ƒç´ ã€‚\næˆ‘ä»¬å°†åœ¨ Section 24.5 ä¸­æ›´è¯¦ç»†åœ°å›åˆ° CSS é€‰æ‹©å™¨ï¼Œä½†å¹¸è¿çš„æ˜¯ï¼Œä½ åªéœ€æŒæ¡ä¸‰ä¸ªå°±å¯ä»¥èµ°å¾—å¾ˆè¿œï¼š\n\np é€‰æ‹©æ‰€æœ‰ &lt;p&gt; å…ƒç´ ã€‚\n.title é€‰æ‹©æ‰€æœ‰ class ä¸º â€œtitleâ€ çš„å…ƒç´ ã€‚\n#title é€‰æ‹© id å±æ€§ç­‰äº â€œtitleâ€ çš„å…ƒç´ ã€‚Id å±æ€§åœ¨æ–‡æ¡£ä¸­å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥è¿™åªä¼šé€‰æ‹©ä¸€ä¸ªå…ƒç´ ã€‚\n\nè®©æˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯•è¯•è¿™äº›é€‰æ‹©å™¨ï¼š\n\nhtml &lt;- minimal_html(\"\n  &lt;h1&gt;è¿™æ˜¯ä¸€ä¸ªæ ‡é¢˜&lt;/h1&gt;\n  &lt;p id='first'&gt;è¿™æ˜¯ä¸€ä¸ªæ®µè½&lt;/p&gt;\n  &lt;p class='important'&gt;è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„æ®µè½&lt;/p&gt;\n\")\n\nä½¿ç”¨ html_elements() æ¥æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…é€‰æ‹©å™¨çš„å…ƒç´ ï¼š\n\nhtml |&gt; html_elements(\"p\")\n#&gt; {xml_nodeset (2)}\n#&gt; [1] &lt;p id=\"first\"&gt;è¿™æ˜¯ä¸€ä¸ªæ®µè½&lt;/p&gt;\n#&gt; [2] &lt;p class=\"important\"&gt;è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„æ®µè½&lt;/p&gt;\nhtml |&gt; html_elements(\".important\")\n#&gt; {xml_nodeset (1)}\n#&gt; [1] &lt;p class=\"important\"&gt;è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„æ®µè½&lt;/p&gt;\nhtml |&gt; html_elements(\"#first\")\n#&gt; {xml_nodeset (1)}\n#&gt; [1] &lt;p id=\"first\"&gt;è¿™æ˜¯ä¸€ä¸ªæ®µè½&lt;/p&gt;\n\nå¦ä¸€ä¸ªé‡è¦çš„å‡½æ•°æ˜¯ html_element()ï¼Œå®ƒæ€»æ˜¯è¿”å›ä¸è¾“å…¥ç›¸åŒæ•°é‡çš„è¾“å‡ºã€‚å¦‚æœä½ å°†å®ƒåº”ç”¨äºæ•´ä¸ªæ–‡æ¡£ï¼Œå®ƒä¼šç»™ä½ ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ï¼š\n\nhtml |&gt; html_element(\"p\")\n#&gt; {html_node}\n#&gt; &lt;p id=\"first\"&gt;\n\nå½“ä½ ä½¿ç”¨ä¸€ä¸ªä¸åŒ¹é…ä»»ä½•å…ƒç´ çš„é€‰æ‹©å™¨æ—¶ï¼Œhtml_element() å’Œ html_elements() ä¹‹é—´æœ‰ä¸€ä¸ªé‡è¦çš„åŒºåˆ«ã€‚html_elements() è¿”å›ä¸€ä¸ªé•¿åº¦ä¸º 0 çš„å‘é‡ï¼Œè€Œ html_element() è¿”å›ä¸€ä¸ªç¼ºå¤±å€¼ã€‚è¿™ä¸€ç‚¹å¾ˆå¿«å°±ä¼šå˜å¾—å¾ˆé‡è¦ã€‚\n\nhtml |&gt; html_elements(\"b\")\n#&gt; {xml_nodeset (0)}\nhtml |&gt; html_element(\"b\")\n#&gt; {xml_missing}\n#&gt; &lt;NA&gt;\n\n\n24.4.2 åµŒå¥—é€‰æ‹©\nåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ ä¼šä¸€èµ·ä½¿ç”¨ html_elements() å’Œ html_element()ï¼Œé€šå¸¸ä½¿ç”¨ html_elements() æ¥è¯†åˆ«å°†æˆä¸ºè§‚æµ‹å€¼çš„å…ƒç´ ï¼Œç„¶åä½¿ç”¨ html_element() æ¥æŸ¥æ‰¾å°†æˆä¸ºå˜é‡çš„å…ƒç´ ã€‚è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥çœ‹çœ‹è¿™ä¸ªè¿‡ç¨‹ã€‚è¿™é‡Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ— åºåˆ—è¡¨ (&lt;ul&gt;)ï¼Œå…¶ä¸­æ¯ä¸ªåˆ—è¡¨é¡¹ (&lt;li&gt;) éƒ½åŒ…å«ä¸€äº›å…³äºæ˜Ÿçƒå¤§æˆ˜ä¸­å››ä¸ªè§’è‰²çš„ä¿¡æ¯ï¼š\n\nhtml &lt;- minimal_html(\"\n  &lt;ul&gt;\n    &lt;li&gt;&lt;b&gt;C-3PO&lt;/b&gt; æ˜¯ä¸€ä¸ª&lt;i&gt;æœºå™¨äºº&lt;/i&gt;ï¼Œé‡ &lt;span class='weight'&gt;167 kg&lt;/span&gt;&lt;/li&gt;\n    &lt;li&gt;&lt;b&gt;R4-P17&lt;/b&gt; æ˜¯ä¸€ä¸ª&lt;i&gt;æœºå™¨äºº&lt;/i&gt;&lt;/li&gt;\n    &lt;li&gt;&lt;b&gt;R2-D2&lt;/b&gt; æ˜¯ä¸€ä¸ª&lt;i&gt;æœºå™¨äºº&lt;/i&gt;ï¼Œé‡ &lt;span class='weight'&gt;96 kg&lt;/span&gt;&lt;/li&gt;\n    &lt;li&gt;&lt;b&gt;Yoda&lt;/b&gt; é‡ &lt;span class='weight'&gt;66 kg&lt;/span&gt;&lt;/li&gt;\n  &lt;/ul&gt;\n  \")\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨ html_elements() æ¥åˆ›å»ºä¸€ä¸ªå‘é‡ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ å¯¹åº”ä¸€ä¸ªä¸åŒçš„è§’è‰²ï¼š\n\ncharacters &lt;- html |&gt; html_elements(\"li\")\ncharacters\n#&gt; {xml_nodeset (4)}\n#&gt; [1] &lt;li&gt;\\n&lt;b&gt;C-3PO&lt;/b&gt; æ˜¯ä¸€ä¸ª&lt;i&gt;æœºå™¨äºº&lt;/i&gt;ï¼Œé‡ &lt;span class=\"weight\"&gt;167 kg&lt;/span&gt;\\ ...\n#&gt; [2] &lt;li&gt;\\n&lt;b&gt;R4-P17&lt;/b&gt; æ˜¯ä¸€ä¸ª&lt;i&gt;æœºå™¨äºº&lt;/i&gt;\\n&lt;/li&gt;\n#&gt; [3] &lt;li&gt;\\n&lt;b&gt;R2-D2&lt;/b&gt; æ˜¯ä¸€ä¸ª&lt;i&gt;æœºå™¨äºº&lt;/i&gt;ï¼Œé‡ &lt;span class=\"weight\"&gt;96 kg&lt;/span&gt;\\n ...\n#&gt; [4] &lt;li&gt;\\n&lt;b&gt;Yoda&lt;/b&gt; é‡ &lt;span class=\"weight\"&gt;66 kg&lt;/span&gt;\\n&lt;/li&gt;\n\nè¦æå–æ¯ä¸ªè§’è‰²çš„åå­—ï¼Œæˆ‘ä»¬ä½¿ç”¨ html_element()ï¼Œå› ä¸ºå½“å®ƒåº”ç”¨äº html_elements() çš„è¾“å‡ºæ—¶ï¼Œå®ƒä¿è¯ä¸ºæ¯ä¸ªå…ƒç´ è¿”å›ä¸€ä¸ªå“åº”ï¼š\n\ncharacters |&gt; html_element(\"b\")\n#&gt; {xml_nodeset (4)}\n#&gt; [1] &lt;b&gt;C-3PO&lt;/b&gt;\n#&gt; [2] &lt;b&gt;R4-P17&lt;/b&gt;\n#&gt; [3] &lt;b&gt;R2-D2&lt;/b&gt;\n#&gt; [4] &lt;b&gt;Yoda&lt;/b&gt;\n\nhtml_element() å’Œ html_elements() ä¹‹é—´çš„åŒºåˆ«å¯¹äºåå­—æ¥è¯´å¹¶ä¸é‡è¦ï¼Œä½†å¯¹äºä½“é‡æ¥è¯´å¾ˆé‡è¦ã€‚æˆ‘ä»¬å¸Œæœ›ä¸ºæ¯ä¸ªè§’è‰²è·å¾—ä¸€ä¸ªä½“é‡ï¼Œå³ä½¿æ²¡æœ‰ä½“é‡ &lt;span&gt;ã€‚è¿™å°±æ˜¯ html_element() æ‰€åšçš„ï¼š\n\ncharacters |&gt; html_element(\".weight\")\n#&gt; {xml_nodeset (4)}\n#&gt; [1] &lt;span class=\"weight\"&gt;167 kg&lt;/span&gt;\n#&gt; [2] NA\n#&gt; [3] &lt;span class=\"weight\"&gt;96 kg&lt;/span&gt;\n#&gt; [4] &lt;span class=\"weight\"&gt;66 kg&lt;/span&gt;\n\nhtml_elements() æŸ¥æ‰¾æ‰€æœ‰ä½œä¸º characters å­å…ƒç´ çš„ä½“é‡ &lt;span&gt;ã€‚è¿™é‡Œåªæœ‰ä¸‰ä¸ªï¼Œæ‰€ä»¥æˆ‘ä»¬å¤±å»äº†åå­—å’Œä½“é‡ä¹‹é—´çš„è”ç³»ï¼š\n\ncharacters |&gt; html_elements(\".weight\")\n#&gt; {xml_nodeset (3)}\n#&gt; [1] &lt;span class=\"weight\"&gt;167 kg&lt;/span&gt;\n#&gt; [2] &lt;span class=\"weight\"&gt;96 kg&lt;/span&gt;\n#&gt; [3] &lt;span class=\"weight\"&gt;66 kg&lt;/span&gt;\n\nç°åœ¨ä½ å·²ç»é€‰æ‹©äº†æ„Ÿå…´è¶£çš„å…ƒç´ ï¼Œä½ éœ€è¦æå–æ•°æ®ï¼Œå¯ä»¥ä»æ–‡æœ¬å†…å®¹æˆ–æŸäº›å±æ€§ä¸­æå–ã€‚\n\n24.4.3 æ–‡æœ¬å’Œå±æ€§\nhtml_text2()6 æå– HTML å…ƒç´ çš„çº¯æ–‡æœ¬å†…å®¹ï¼š\n\ncharacters |&gt; \n  html_element(\"b\") |&gt; \n  html_text2()\n#&gt; [1] \"C-3PO\"  \"R4-P17\" \"R2-D2\"  \"Yoda\"\n\ncharacters |&gt; \n  html_element(\".weight\") |&gt; \n  html_text2()\n#&gt; [1] \"167 kg\" NA       \"96 kg\"  \"66 kg\"\n\næ³¨æ„ï¼Œä»»ä½•è½¬ä¹‰éƒ½ä¼šè¢«è‡ªåŠ¨å¤„ç†ï¼›ä½ åªä¼šåœ¨æº HTML ä¸­çœ‹åˆ° HTML è½¬ä¹‰ï¼Œè€Œä¸ä¼šåœ¨ rvest è¿”å›çš„æ•°æ®ä¸­çœ‹åˆ°ã€‚\nhtml_attr() ä»å±æ€§ä¸­æå–æ•°æ®ï¼š\n\nhtml &lt;- minimal_html(\"\n  &lt;p&gt;&lt;a href='https://en.wikipedia.org/wiki/Cat'&gt;çŒ«&lt;/a&gt;&lt;/p&gt;\n  &lt;p&gt;&lt;a href='https://en.wikipedia.org/wiki/Dog'&gt;ç‹—&lt;/a&gt;&lt;/p&gt;\n\")\n\nhtml |&gt; \n  html_elements(\"p\") |&gt; \n  html_element(\"a\") |&gt; \n  html_attr(\"href\")\n#&gt; [1] \"https://en.wikipedia.org/wiki/Cat\" \"https://en.wikipedia.org/wiki/Dog\"\n\nhtml_attr() æ€»æ˜¯è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥å¦‚æœä½ æ­£åœ¨æå–æ•°å­—æˆ–æ—¥æœŸï¼Œä½ éœ€è¦è¿›è¡Œä¸€äº›åå¤„ç†ã€‚\n\n24.4.4 è¡¨æ ¼\nå¦‚æœå¹¸è¿çš„è¯ï¼Œä½ çš„æ•°æ®å·²ç»å­˜å‚¨åœ¨ HTML è¡¨æ ¼ä¸­ï¼Œé‚£ä¹ˆåªéœ€è¦ä»è¯¥è¡¨æ ¼ä¸­è¯»å–å³å¯ã€‚åœ¨æµè§ˆå™¨ä¸­è¯†åˆ«è¡¨æ ¼é€šå¸¸å¾ˆç®€å•ï¼šå®ƒä¼šæœ‰ä¸€ä¸ªè¡Œå’Œåˆ—çš„çŸ©å½¢ç»“æ„ï¼Œä½ å¯ä»¥å°†å…¶å¤åˆ¶å¹¶ç²˜è´´åˆ°åƒ Excel è¿™æ ·çš„å·¥å…·ä¸­ã€‚\nHTML è¡¨æ ¼ç”±å››ä¸ªä¸»è¦å…ƒç´ æ„æˆï¼š&lt;table&gt;ã€&lt;tr&gt;ï¼ˆè¡¨æ ¼è¡Œï¼‰ã€&lt;th&gt;ï¼ˆè¡¨æ ¼æ ‡é¢˜ï¼‰å’Œ &lt;td&gt;ï¼ˆè¡¨æ ¼æ•°æ®ï¼‰ã€‚è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ HTML è¡¨æ ¼ï¼Œæœ‰ä¸¤åˆ—ä¸‰è¡Œï¼š\n\nhtml &lt;- minimal_html(\"\n  &lt;table class='mytable'&gt;\n    &lt;tr&gt;&lt;th&gt;x&lt;/th&gt;    &lt;th&gt;y&lt;/th&gt;&lt;/tr&gt;\n    &lt;tr&gt;&lt;td&gt;1.5&lt;/td&gt; &lt;td&gt;2.7&lt;/td&gt;&lt;/tr&gt;\n    &lt;tr&gt;&lt;td&gt;4.9&lt;/td&gt; &lt;td&gt;1.3&lt;/td&gt;&lt;/tr&gt;\n    &lt;tr&gt;&lt;td&gt;7.2&lt;/td&gt; &lt;td&gt;8.1&lt;/td&gt;&lt;/tr&gt;\n  &lt;/table&gt;\n  \")\n\nrvest æä¾›äº†ä¸€ä¸ªçŸ¥é“å¦‚ä½•è¯»å–è¿™ç±»æ•°æ®çš„å‡½æ•°ï¼šhtml_table()ã€‚å®ƒè¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œå…¶ä¸­åŒ…å«é¡µé¢ä¸Šæ‰¾åˆ°çš„æ¯ä¸ªè¡¨æ ¼çš„ä¸€ä¸ª tibbleã€‚ä½¿ç”¨ html_element() æ¥è¯†åˆ«ä½ æƒ³è¦æå–çš„è¡¨æ ¼ï¼š\n\nhtml |&gt; \n  html_element(\".mytable\") |&gt; \n  html_table()\n#&gt; # A tibble: 3 Ã— 2\n#&gt;       x     y\n#&gt;   &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1   1.5   2.7\n#&gt; 2   4.9   1.3\n#&gt; 3   7.2   8.1\n\næ³¨æ„ x å’Œ y å·²ç»è‡ªåŠ¨è½¬æ¢ä¸ºæ•°å­—ã€‚è¿™ç§è‡ªåŠ¨è½¬æ¢å¹¶ä¸æ€»æ˜¯æœ‰æ•ˆï¼Œæ‰€ä»¥åœ¨æ›´å¤æ‚çš„åœºæ™¯ä¸­ï¼Œä½ å¯èƒ½éœ€è¦ä½¿ç”¨ convert = FALSE å…³é—­å®ƒï¼Œç„¶åè‡ªå·±è¿›è¡Œè½¬æ¢ã€‚",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>24</span>Â  <span class='chapter-title'>ç½‘ç»œæŠ“å–</span>"
    ]
  },
  {
    "objectID": "webscraping.html#sec-css-selectors",
    "href": "webscraping.html#sec-css-selectors",
    "title": "24Â  ç½‘ç»œæŠ“å–",
    "section": "\n24.5 æ‰¾åˆ°æ­£ç¡®çš„é€‰æ‹©å™¨",
    "text": "24.5 æ‰¾åˆ°æ­£ç¡®çš„é€‰æ‹©å™¨\næ‰¾å‡ºä½ éœ€è¦çš„æ•°æ®çš„é€‰æ‹©å™¨é€šå¸¸æ˜¯é—®é¢˜ä¸­æœ€éš¾çš„éƒ¨åˆ†ã€‚ä½ é€šå¸¸éœ€è¦è¿›è¡Œä¸€äº›å®éªŒï¼Œæ‰èƒ½æ‰¾åˆ°ä¸€ä¸ªæ—¢å…·ä½“ï¼ˆå³å®ƒä¸é€‰æ‹©ä½ ä¸åœ¨ä¹çš„ä¸œè¥¿ï¼‰åˆæ•æ„Ÿï¼ˆå³å®ƒç¡®å®é€‰æ‹©äº†ä½ å…³å¿ƒçš„æ‰€æœ‰ä¸œè¥¿ï¼‰çš„é€‰æ‹©å™¨ã€‚å¤§é‡çš„åå¤è¯•éªŒæ˜¯è¿™ä¸ªè¿‡ç¨‹çš„æ­£å¸¸éƒ¨åˆ†ï¼æœ‰ä¸¤ä¸ªä¸»è¦å·¥å…·å¯ä»¥å¸®åŠ©ä½ å®Œæˆè¿™ä¸ªè¿‡ç¨‹ï¼šSelectorGadget å’Œä½ æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·ã€‚\nSelectorGadget æ˜¯ä¸€ä¸ª javascript ä¹¦ç­¾å·¥å…·ï¼Œå®ƒä¼šæ ¹æ®ä½ æä¾›çš„æ­£é¢å’Œè´Ÿé¢ä¾‹å­è‡ªåŠ¨ç”Ÿæˆ CSS é€‰æ‹©å™¨ã€‚å®ƒå¹¶ä¸æ€»æ˜¯æœ‰æ•ˆï¼Œä½†å½“å®ƒæœ‰æ•ˆæ—¶ï¼Œç®€ç›´æ˜¯é­”æ³•ï¼ä½ å¯ä»¥é€šè¿‡é˜…è¯» https://rvest.tidyverse.org/articles/selectorgadget.html æˆ–è§‚çœ‹ Mine åœ¨ https://www.youtube.com/watch?v=PetWV5g1Xsc ä¸Šçš„è§†é¢‘æ¥å­¦ä¹ å¦‚ä½•å®‰è£…å’Œä½¿ç”¨ SelectorGadgetã€‚\næ¯ä¸ªç°ä»£æµè§ˆå™¨éƒ½å¸¦æœ‰ä¸€äº›é¢å‘å¼€å‘è€…çš„å·¥å…·åŒ…ï¼Œä½†æˆ‘ä»¬æ¨è Chromeï¼Œå³ä½¿å®ƒä¸æ˜¯ä½ çš„å¸¸è§„æµè§ˆå™¨ï¼šå®ƒçš„ Web å¼€å‘è€…å·¥å…·æ˜¯æœ€å¥½çš„ä¹‹ä¸€ï¼Œè€Œä¸”ç«‹å³å¯ç”¨ã€‚åœ¨é¡µé¢ä¸Šçš„ä¸€ä¸ªå…ƒç´ ä¸Šå³é”®å•å‡»ï¼Œç„¶åç‚¹å‡» Inspect (æ£€æŸ¥)ã€‚è¿™å°†æ‰“å¼€ä¸€ä¸ªå¯å±•å¼€çš„å®Œæ•´ HTML é¡µé¢è§†å›¾ï¼Œå¹¶ä»¥ä½ åˆšåˆšç‚¹å‡»çš„å…ƒç´ ä¸ºä¸­å¿ƒã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥æ¢ç´¢é¡µé¢ï¼Œå¹¶äº†è§£å“ªäº›é€‰æ‹©å™¨å¯èƒ½æœ‰æ•ˆã€‚è¦ç‰¹åˆ«æ³¨æ„ class å’Œ id å±æ€§ï¼Œå› ä¸ºå®ƒä»¬é€šå¸¸ç”¨äºå½¢æˆé¡µé¢çš„è§†è§‰ç»“æ„ï¼Œå› æ­¤æ˜¯æå–ä½ æ­£åœ¨å¯»æ‰¾çš„æ•°æ®çš„å¥½å·¥å…·ã€‚\nåœ¨ Elements (å…ƒç´ ) è§†å›¾ä¸­ï¼Œä½ è¿˜å¯ä»¥å³é”®å•å‡»ä¸€ä¸ªå…ƒç´ å¹¶é€‰æ‹© Copy as Selector (å¤åˆ¶ä¸ºé€‰æ‹©å™¨)ï¼Œä»¥ç”Ÿæˆä¸€ä¸ªå°†å”¯ä¸€æ ‡è¯†æ„Ÿå…´è¶£å…ƒç´ çš„é€‰æ‹©å™¨ã€‚\nå¦‚æœ SelectorGadget æˆ– Chrome DevTools ç”Ÿæˆäº†ä¸€ä¸ªä½ çœ‹ä¸æ‡‚çš„ CSS é€‰æ‹©å™¨ï¼Œå¯ä»¥è¯•è¯• Selectors Explainedï¼Œå®ƒå°† CSS é€‰æ‹©å™¨ç¿»è¯‘æˆé€šä¿—æ˜“æ‡‚çš„è‹±è¯­ã€‚å¦‚æœä½ å‘ç°è‡ªå·±ç»å¸¸è¿™æ ·åšï¼Œä½ å¯èƒ½æƒ³æ›´å¤šåœ°äº†è§£ CSS é€‰æ‹©å™¨ã€‚æˆ‘ä»¬æ¨èä»æœ‰è¶£çš„ CSS dinner æ•™ç¨‹å¼€å§‹ï¼Œç„¶åå‚è€ƒ MDN web docsã€‚",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>24</span>Â  <span class='chapter-title'>ç½‘ç»œæŠ“å–</span>"
    ]
  },
  {
    "objectID": "webscraping.html#æ•´åˆæ‰€æœ‰å†…å®¹",
    "href": "webscraping.html#æ•´åˆæ‰€æœ‰å†…å®¹",
    "title": "24Â  ç½‘ç»œæŠ“å–",
    "section": "\n24.6 æ•´åˆæ‰€æœ‰å†…å®¹",
    "text": "24.6 æ•´åˆæ‰€æœ‰å†…å®¹\nè®©æˆ‘ä»¬æŠŠæ‰€æœ‰è¿™äº›æ•´åˆèµ·æ¥ï¼ŒæŠ“å–ä¸€äº›ç½‘ç«™ã€‚å½“ä½ è¿è¡Œè¿™äº›ä¾‹å­æ—¶ï¼Œå®ƒä»¬å¯èƒ½ä¸å†æœ‰æ•ˆâ€”â€”è¿™æ˜¯ç½‘ç»œæŠ“å–çš„æ ¹æœ¬æŒ‘æˆ˜ï¼›å¦‚æœç½‘ç«™çš„ç»“æ„æ”¹å˜äº†ï¼Œä½ å°±å¿…é¡»æ”¹å˜ä½ çš„æŠ“å–ä»£ç ã€‚\n\n24.6.1 æ˜Ÿçƒå¤§æˆ˜\nrvest åœ¨ vignette(\"starwars\") ä¸­åŒ…å«äº†ä¸€ä¸ªéå¸¸ç®€å•çš„ä¾‹å­ã€‚è¿™æ˜¯ä¸€ä¸ªç®€å•çš„é¡µé¢ï¼ŒHTML æœ€å°‘ï¼Œæ‰€ä»¥æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ã€‚æˆ‘é¼“åŠ±ä½ ç°åœ¨å°±å¯¼èˆªåˆ°é‚£ä¸ªé¡µé¢ï¼Œå¹¶ä½¿ç”¨â€œæ£€æŸ¥å…ƒç´ â€æ¥æ£€æŸ¥ä¸€ä¸ªä½œä¸ºæ˜Ÿçƒå¤§æˆ˜ç”µå½±æ ‡é¢˜çš„æ ‡é¢˜ã€‚ä½¿ç”¨é”®ç›˜æˆ–é¼ æ ‡æ¥æ¢ç´¢ HTML çš„å±‚æ¬¡ç»“æ„ï¼Œçœ‹çœ‹ä½ æ˜¯å¦èƒ½æ„Ÿè§‰åˆ°æ¯éƒ¨ç”µå½±ä½¿ç”¨çš„å…±äº«ç»“æ„ã€‚\nä½ åº”è¯¥èƒ½çœ‹åˆ°æ¯éƒ¨ç”µå½±éƒ½æœ‰ä¸€ä¸ªå…±äº«çš„ç»“æ„ï¼Œçœ‹èµ·æ¥åƒè¿™æ ·ï¼š\n&lt;section&gt;\n  &lt;h2 data-id=\"1\"&gt;The Phantom Menace&lt;/h2&gt;\n  &lt;p&gt;Released: 1999-05-19&lt;/p&gt;\n  &lt;p&gt;Director: &lt;span class=\"director\"&gt;George Lucas&lt;/span&gt;&lt;/p&gt;\n  \n  &lt;div class=\"crawl\"&gt;\n    &lt;p&gt;...&lt;/p&gt;\n    &lt;p&gt;...&lt;/p&gt;\n    &lt;p&gt;...&lt;/p&gt;\n  &lt;/div&gt;\n&lt;/section&gt;\næˆ‘ä»¬çš„ç›®æ ‡æ˜¯å°†è¿™äº›æ•°æ®è½¬æ¢æˆä¸€ä¸ª 7 è¡Œçš„æ•°æ®æ¡†ï¼ŒåŒ…å« titleã€yearã€director å’Œ intro å˜é‡ã€‚æˆ‘ä»¬å°†ä»è¯»å– HTML å¹¶æå–æ‰€æœ‰ &lt;section&gt; å…ƒç´ å¼€å§‹ï¼š\n\nurl &lt;- \"https://rvest.tidyverse.org/articles/starwars.html\"\nhtml &lt;- read_html(url)\n\nsection &lt;- html |&gt; html_elements(\"section\")\nsection\n#&gt; {xml_nodeset (7)}\n#&gt; [1] &lt;section&gt;&lt;h2 data-id=\"1\"&gt;\\nThe Phantom Menace\\n&lt;/h2&gt;\\n&lt;p&gt;\\nReleased: 1 ...\n#&gt; [2] &lt;section&gt;&lt;h2 data-id=\"2\"&gt;\\nAttack of the Clones\\n&lt;/h2&gt;\\n&lt;p&gt;\\nReleased: ...\n#&gt; [3] &lt;section&gt;&lt;h2 data-id=\"3\"&gt;\\nRevenge of the Sith\\n&lt;/h2&gt;\\n&lt;p&gt;\\nReleased:  ...\n#&gt; [4] &lt;section&gt;&lt;h2 data-id=\"4\"&gt;\\nA New Hope\\n&lt;/h2&gt;\\n&lt;p&gt;\\nReleased: 1977-05-2 ...\n#&gt; [5] &lt;section&gt;&lt;h2 data-id=\"5\"&gt;\\nThe Empire Strikes Back\\n&lt;/h2&gt;\\n&lt;p&gt;\\nReleas ...\n#&gt; [6] &lt;section&gt;&lt;h2 data-id=\"6\"&gt;\\nReturn of the Jedi\\n&lt;/h2&gt;\\n&lt;p&gt;\\nReleased: 1 ...\n#&gt; [7] &lt;section&gt;&lt;h2 data-id=\"7\"&gt;\\nThe Force Awakens\\n&lt;/h2&gt;\\n&lt;p&gt;\\nReleased: 20 ...\n\nè¿™æ£€ç´¢åˆ°äº†ä¸ƒä¸ªå…ƒç´ ï¼Œä¸è¯¥é¡µé¢ä¸Šæ‰¾åˆ°çš„ä¸ƒéƒ¨ç”µå½±ç›¸åŒ¹é…ï¼Œè¿™è¡¨æ˜ä½¿ç”¨ section ä½œä¸ºé€‰æ‹©å™¨æ˜¯å¥½çš„ã€‚æå–å•ä¸ªå…ƒç´ å¾ˆç®€å•ï¼Œå› ä¸ºæ•°æ®æ€»æ˜¯å¯ä»¥åœ¨æ–‡æœ¬ä¸­æ‰¾åˆ°ã€‚åªéœ€è¦æ‰¾åˆ°æ­£ç¡®çš„é€‰æ‹©å™¨ï¼š\n\nsection |&gt; html_element(\"h2\") |&gt; html_text2()\n#&gt; [1] \"The Phantom Menace\"      \"Attack of the Clones\"   \n#&gt; [3] \"Revenge of the Sith\"     \"A New Hope\"             \n#&gt; [5] \"The Empire Strikes Back\" \"Return of the Jedi\"     \n#&gt; [7] \"The Force Awakens\"\n\nsection |&gt; html_element(\".director\") |&gt; html_text2()\n#&gt; [1] \"George Lucas\"     \"George Lucas\"     \"George Lucas\"    \n#&gt; [4] \"George Lucas\"     \"Irvin Kershner\"   \"Richard Marquand\"\n#&gt; [7] \"J. J. Abrams\"\n\nä¸€æ—¦æˆ‘ä»¬ä¸ºæ¯ä¸ªç»„ä»¶éƒ½è¿™æ ·åšäº†ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†æ‰€æœ‰ç»“æœåŒ…è£…æˆä¸€ä¸ª tibbleï¼š\n\ntibble(\n  title = section |&gt; \n    html_element(\"h2\") |&gt; \n    html_text2(),\n  released = section |&gt; \n    html_element(\"p\") |&gt; \n    html_text2() |&gt; \n    str_remove(\"Released: \") |&gt; \n    parse_date(),\n  director = section |&gt; \n    html_element(\".director\") |&gt; \n    html_text2(),\n  intro = section |&gt; \n    html_element(\".crawl\") |&gt; \n    html_text2()\n)\n#&gt; # A tibble: 7 Ã— 4\n#&gt;   title                   released   director         intro                  \n#&gt;   &lt;chr&gt;                   &lt;date&gt;     &lt;chr&gt;            &lt;chr&gt;                  \n#&gt; 1 The Phantom Menace      1999-05-19 George Lucas     \"Turmoil has engulfed â€¦\n#&gt; 2 Attack of the Clones    2002-05-16 George Lucas     \"There is unrest in thâ€¦\n#&gt; 3 Revenge of the Sith     2005-05-19 George Lucas     \"War! The Republic is â€¦\n#&gt; 4 A New Hope              1977-05-25 George Lucas     \"It is a period of civâ€¦\n#&gt; 5 The Empire Strikes Back 1980-05-17 Irvin Kershner   \"It is a dark time forâ€¦\n#&gt; 6 Return of the Jedi      1983-05-25 Richard Marquand \"Luke Skywalker has reâ€¦\n#&gt; # â„¹ 1 more row\n\næˆ‘ä»¬å¯¹ released åšäº†ä¸€ç‚¹é¢å¤–çš„å¤„ç†ï¼Œä»¥å¾—åˆ°ä¸€ä¸ªåœ¨æˆ‘ä»¬åç»­åˆ†æä¸­æ˜“äºä½¿ç”¨çš„å˜é‡ã€‚\n\n24.6.2 IMDB çƒ­é—¨ç”µå½±\nå¯¹äºæˆ‘ä»¬çš„ä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œæˆ‘ä»¬å°†å¤„ç†ä¸€ä¸ªç¨å¾®æ£˜æ‰‹ä¸€ç‚¹çš„é—®é¢˜ï¼Œä»äº’è”ç½‘ç”µå½±æ•°æ®åº“ (IMDb) ä¸­æå–å‰ 250 éƒ¨ç”µå½±ã€‚åœ¨æˆ‘ä»¬å†™è¿™ä¸€ç« çš„æ—¶å€™ï¼Œé¡µé¢çœ‹èµ·æ¥åƒ FigureÂ 24.1ã€‚\n\n\n\n\n\n\n\nFigureÂ 24.1: 2022-12-05 æ‹æ‘„çš„ IMDb çƒ­é—¨ç”µå½±ç½‘é¡µæˆªå›¾ã€‚\n\n\n\n\nè¿™ä¸ªæ•°æ®æœ‰æ¸…æ™°çš„è¡¨æ ¼ç»“æ„ï¼Œæ‰€ä»¥å€¼å¾—ä» html_table() å¼€å§‹ï¼š\n\nurl &lt;- \"https://web.archive.org/web/20220201012049/https://www.imdb.com/chart/top/\"\nhtml &lt;- read_html(url)\n\ntable &lt;- html |&gt; \n  html_element(\"table\") |&gt; \n  html_table()\ntable\n#&gt; # A tibble: 250 Ã— 5\n#&gt;   ``    `Rank & Title`                    `IMDb Rating` `Your Rating`   ``   \n#&gt;   &lt;lgl&gt; &lt;chr&gt;                                     &lt;dbl&gt; &lt;chr&gt;           &lt;lgl&gt;\n#&gt; 1 NA    \"1.\\n      The Shawshank Redemptâ€¦           9.2 \"12345678910\\nâ€¦ NA   \n#&gt; 2 NA    \"2.\\n      The Godfather\\n      â€¦           9.1 \"12345678910\\nâ€¦ NA   \n#&gt; 3 NA    \"3.\\n      The Godfather: Part Iâ€¦           9   \"12345678910\\nâ€¦ NA   \n#&gt; 4 NA    \"4.\\n      The Dark Knight\\n    â€¦           9   \"12345678910\\nâ€¦ NA   \n#&gt; 5 NA    \"5.\\n      12 Angry Men\\n       â€¦           8.9 \"12345678910\\nâ€¦ NA   \n#&gt; 6 NA    \"6.\\n      Schindler's List\\n   â€¦           8.9 \"12345678910\\nâ€¦ NA   \n#&gt; # â„¹ 244 more rows\n\nè¿™åŒ…å«äº†ä¸€äº›ç©ºåˆ—ï¼Œä½†æ€»çš„æ¥è¯´ï¼Œå®ƒå¾ˆå¥½åœ°æ•æ‰äº†è¡¨æ ¼ä¸­çš„ä¿¡æ¯ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬éœ€è¦åšä¸€äº›æ›´å¤šçš„å¤„ç†ï¼Œä½¿å…¶æ›´æ˜“äºä½¿ç”¨ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†é‡å‘½ååˆ—ï¼Œä½¿å…¶æ›´æ˜“äºä½¿ç”¨ï¼Œå¹¶åˆ é™¤æ’åå’Œæ ‡é¢˜ä¸­å¤šä½™çš„ç©ºæ ¼ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ select()ï¼ˆè€Œä¸æ˜¯ rename()ï¼‰ä¸€æ­¥å®Œæˆé‡å‘½åå’Œé€‰æ‹©è¿™ä¸¤åˆ—ã€‚ç„¶åæˆ‘ä»¬å°†åˆ é™¤æ¢è¡Œç¬¦å’Œå¤šä½™çš„ç©ºæ ¼ï¼Œç„¶ååº”ç”¨ separate_wider_regex()ï¼ˆæ¥è‡ª Section 15.3.4ï¼‰å°†æ ‡é¢˜ã€å¹´ä»½å’Œæ’åæå–åˆ°å®ƒä»¬è‡ªå·±çš„å˜é‡ä¸­ã€‚\n\nratings &lt;- table |&gt;\n  select(\n    rank_title_year = `Rank & Title`,\n    rating = `IMDb Rating`\n  ) |&gt; \n  mutate(\n    rank_title_year = str_replace_all(rank_title_year, \"\\n +\", \" \")\n  ) |&gt; \n  separate_wider_regex(\n    rank_title_year,\n    patterns = c(\n      rank = \"\\\\d+\", \"\\\\. \",\n      title = \".+\", \" +\\\\(\",\n      year = \"\\\\d+\", \"\\\\)\"\n    )\n  )\nratings\n#&gt; # A tibble: 250 Ã— 4\n#&gt;   rank  title                    year  rating\n#&gt;   &lt;chr&gt; &lt;chr&gt;                    &lt;chr&gt;  &lt;dbl&gt;\n#&gt; 1 1     The Shawshank Redemption 1994     9.2\n#&gt; 2 2     The Godfather            1972     9.1\n#&gt; 3 3     The Godfather: Part II   1974     9  \n#&gt; 4 4     The Dark Knight          2008     9  \n#&gt; 5 5     12 Angry Men             1957     8.9\n#&gt; 6 6     Schindler's List         1993     8.9\n#&gt; # â„¹ 244 more rows\n\nå³ä½¿åœ¨è¿™ç§å¤§éƒ¨åˆ†æ•°æ®æ¥è‡ªè¡¨æ ¼å•å…ƒæ ¼çš„æƒ…å†µä¸‹ï¼ŒæŸ¥çœ‹åŸå§‹ HTML ä»ç„¶æ˜¯å€¼å¾—çš„ã€‚å¦‚æœä½ è¿™æ ·åšï¼Œä½ ä¼šå‘ç°æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨å…¶ä¸­ä¸€ä¸ªå±æ€§æ¥æ·»åŠ ä¸€äº›é¢å¤–çš„æ•°æ®ã€‚è¿™æ˜¯å€¼å¾—èŠ±ç‚¹æ—¶é—´æ¢ç´¢é¡µé¢æºä»£ç çš„åŸå› ä¹‹ä¸€ï¼›ä½ å¯èƒ½ä¼šæ‰¾åˆ°é¢å¤–çš„æ•°æ®ï¼Œæˆ–è€…æ‰¾åˆ°ä¸€ä¸ªç¨å¾®å®¹æ˜“ä¸€äº›çš„è§£æè·¯å¾„ã€‚\n\nhtml |&gt; \n  html_elements(\"td strong\") |&gt; \n  head() |&gt; \n  html_attr(\"title\")\n#&gt; [1] \"9.2 based on 2,536,415 user ratings\"\n#&gt; [2] \"9.1 based on 1,745,675 user ratings\"\n#&gt; [3] \"9.0 based on 1,211,032 user ratings\"\n#&gt; [4] \"9.0 based on 2,486,931 user ratings\"\n#&gt; [5] \"8.9 based on 749,563 user ratings\"  \n#&gt; [6] \"8.9 based on 1,295,705 user ratings\"\n\næˆ‘ä»¬å¯ä»¥å°†æ­¤ä¸è¡¨æ ¼æ•°æ®ç»“åˆèµ·æ¥ï¼Œå¹¶å†æ¬¡åº”ç”¨ separate_wider_regex() æ¥æå–æˆ‘ä»¬å…³å¿ƒçš„æ•°æ®ï¼š\n\nratings |&gt;\n  mutate(\n    rating_n = html |&gt; html_elements(\"td strong\") |&gt; html_attr(\"title\")\n  ) |&gt; \n  separate_wider_regex(\n    rating_n,\n    patterns = c(\n      \"[0-9.]+ based on \",\n      number = \"[0-9,]+\",\n      \" user ratings\"\n    )\n  ) |&gt; \n  mutate(\n    number = parse_number(number)\n  )\n#&gt; # A tibble: 250 Ã— 5\n#&gt;   rank  title                    year  rating  number\n#&gt;   &lt;chr&gt; &lt;chr&gt;                    &lt;chr&gt;  &lt;dbl&gt;   &lt;dbl&gt;\n#&gt; 1 1     The Shawshank Redemption 1994     9.2 2536415\n#&gt; 2 2     The Godfather            1972     9.1 1745675\n#&gt; 3 3     The Godfather: Part II   1974     9   1211032\n#&gt; 4 4     The Dark Knight          2008     9   2486931\n#&gt; 5 5     12 Angry Men             1957     8.9  749563\n#&gt; 6 6     Schindler's List         1993     8.9 1295705\n#&gt; # â„¹ 244 more rows",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>24</span>Â  <span class='chapter-title'>ç½‘ç»œæŠ“å–</span>"
    ]
  },
  {
    "objectID": "webscraping.html#åŠ¨æ€ç½‘ç«™",
    "href": "webscraping.html#åŠ¨æ€ç½‘ç«™",
    "title": "24Â  ç½‘ç»œæŠ“å–",
    "section": "\n24.7 åŠ¨æ€ç½‘ç«™",
    "text": "24.7 åŠ¨æ€ç½‘ç«™\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸“æ³¨äºé‚£äº› html_elements() è¿”å›ä½ åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ°çš„å†…å®¹çš„ç½‘ç«™ï¼Œå¹¶è®¨è®ºäº†å¦‚ä½•è§£æå…¶è¿”å›çš„å†…å®¹ä»¥åŠå¦‚ä½•å°†è¿™äº›ä¿¡æ¯ç»„ç»‡æˆæ•´æ´çš„æ•°æ®æ¡†ã€‚ç„¶è€Œï¼Œæœ‰æ—¶ä½ ä¼šé‡åˆ°ä¸€ä¸ªç½‘ç«™ï¼Œå…¶ä¸­ html_elements() å’Œç›¸å…³å‡½æ•°è¿”å›çš„å†…å®¹ä¸ä½ åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ°çš„å®Œå…¨ä¸åŒã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œè¿™æ˜¯å› ä¸ºä½ è¯•å›¾æŠ“å–ä¸€ä¸ªç”¨ javascript åŠ¨æ€ç”Ÿæˆé¡µé¢å†…å®¹çš„ç½‘ç«™ã€‚è¿™ç›®å‰ä¸é€‚ç”¨äº rvestï¼Œå› ä¸º rvest ä¸‹è½½çš„æ˜¯åŸå§‹ HTMLï¼Œä¸è¿è¡Œä»»ä½• javascriptã€‚\næŠ“å–è¿™ç±»ç½‘ç«™ä»ç„¶æ˜¯å¯èƒ½çš„ï¼Œä½† rvest éœ€è¦ä½¿ç”¨ä¸€ä¸ªæ›´æ˜‚è´µçš„è¿‡ç¨‹ï¼šå®Œå…¨æ¨¡æ‹Ÿç½‘ç»œæµè§ˆå™¨ï¼ŒåŒ…æ‹¬è¿è¡Œæ‰€æœ‰ javascriptã€‚åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œæ­¤åŠŸèƒ½å°šä¸å¯ç”¨ï¼Œä½†è¿™æ˜¯æˆ‘ä»¬æ­£åœ¨ç§¯æå¼€å‘çš„å†…å®¹ï¼Œå¯èƒ½åœ¨ä½ é˜…è¯»æœ¬æ–‡æ—¶å·²ç»å¯ç”¨ã€‚å®ƒä½¿ç”¨äº† chromote åŒ…ï¼Œè¯¥åŒ…å®é™…ä¸Šåœ¨åå°è¿è¡Œ Chrome æµè§ˆå™¨ï¼Œå¹¶ä¸ºä½ æä¾›äº†ä¸ç½‘ç«™äº¤äº’çš„é¢å¤–å·¥å…·ï¼Œå°±åƒäººç±»è¾“å…¥æ–‡æœ¬å’Œç‚¹å‡»æŒ‰é’®ä¸€æ ·ã€‚æŸ¥çœ‹ rvest ç½‘ç«™äº†è§£æ›´å¤šè¯¦æƒ…ã€‚",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>24</span>Â  <span class='chapter-title'>ç½‘ç»œæŠ“å–</span>"
    ]
  },
  {
    "objectID": "webscraping.html#æ€»ç»“",
    "href": "webscraping.html#æ€»ç»“",
    "title": "24Â  ç½‘ç»œæŠ“å–",
    "section": "\n24.8 æ€»ç»“",
    "text": "24.8 æ€»ç»“\nåœ¨æœ¬ç« ä¸­ï¼Œä½ å­¦ä¹ äº†ä¸ºä»€ä¹ˆã€ä¸ºä»€ä¹ˆä¸ä»¥åŠå¦‚ä½•ä»ç½‘é¡µä¸ŠæŠ“å–æ•°æ®ã€‚é¦–å…ˆï¼Œä½ å­¦ä¹ äº† HTML çš„åŸºç¡€çŸ¥è¯†å’Œä½¿ç”¨ CSS é€‰æ‹©å™¨æ¥å¼•ç”¨ç‰¹å®šå…ƒç´ ï¼Œç„¶åä½ å­¦ä¹ äº†ä½¿ç”¨ rvest åŒ…å°†æ•°æ®ä» HTML ä¸­æå–åˆ° Rã€‚æ¥ç€ï¼Œæˆ‘ä»¬é€šè¿‡ä¸¤ä¸ªæ¡ˆä¾‹ç ”ç©¶æ¼”ç¤ºäº†ç½‘ç»œæŠ“å–ï¼šä¸€ä¸ªæ˜¯åœ¨ rvest åŒ…ç½‘ç«™ä¸ŠæŠ“å–æ˜Ÿçƒå¤§æˆ˜ç”µå½±æ•°æ®çš„ç®€å•åœºæ™¯ï¼Œå¦ä¸€ä¸ªæ˜¯ä» IMDB æŠ“å–å‰ 250 éƒ¨ç”µå½±çš„æ›´å¤æ‚åœºæ™¯ã€‚\nä»ç½‘ç»œä¸ŠæŠ“å–æ•°æ®çš„æŠ€æœ¯ç»†èŠ‚å¯èƒ½å¾ˆå¤æ‚ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†ç½‘ç«™æ—¶ï¼Œç„¶è€Œæ³•å¾‹å’Œä¼¦ç†æ–¹é¢çš„è€ƒè™‘å¯èƒ½æ›´ä¸ºå¤æ‚ã€‚åœ¨ä½ å¼€å§‹æŠ“å–æ•°æ®ä¹‹å‰ï¼Œäº†è§£è¿™ä¸¤æ–¹é¢çš„æƒ…å†µå¯¹ä½ æ¥è¯´å¾ˆé‡è¦ã€‚\nè¿™å°±ç»“æŸäº†æœ¬ä¹¦çš„å¯¼å…¥éƒ¨åˆ†ï¼Œä½ å·²ç»å­¦ä¹ äº†å°†æ•°æ®ä»å®ƒæ‰€åœ¨çš„åœ°æ–¹ï¼ˆç”µå­è¡¨æ ¼ã€æ•°æ®åº“ã€JSON æ–‡ä»¶å’Œç½‘ç«™ï¼‰å¯¼å…¥åˆ° R ä¸­çš„æ•´æ´å½¢å¼çš„æŠ€æœ¯ã€‚ç°åœ¨æ˜¯æ—¶å€™å°†æˆ‘ä»¬çš„ç›®å…‰è½¬å‘ä¸€ä¸ªæ–°çš„ä¸»é¢˜ï¼šå……åˆ†åˆ©ç”¨ R ä½œä¸ºä¸€ç§ç¼–ç¨‹è¯­è¨€ã€‚",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>24</span>Â  <span class='chapter-title'>ç½‘ç»œæŠ“å–</span>"
    ]
  },
  {
    "objectID": "webscraping.html#footnotes",
    "href": "webscraping.html#footnotes",
    "title": "24Â  ç½‘ç»œæŠ“å–",
    "section": "",
    "text": "è®¸å¤šæµè¡Œçš„ API å·²ç»æœ‰å¯¹åº”çš„ CRAN åŒ…ï¼Œæ‰€ä»¥å¯ä»¥å…ˆåšä¸€äº›ç ”ç©¶ï¼â†©ï¸\næ˜¾ç„¶æˆ‘ä»¬ä¸æ˜¯å¾‹å¸ˆï¼Œè¿™ä¹Ÿä¸æ˜¯æ³•å¾‹å»ºè®®ã€‚ä½†è¿™æ˜¯æˆ‘ä»¬åœ¨é˜…è¯»äº†å¤§é‡å…³äºè¿™ä¸ªä¸»é¢˜çš„èµ„æ–™åèƒ½ç»™å‡ºçš„æœ€å¥½æ€»ç»“ã€‚â†©ï¸\nã€Šè¿çº¿ã€‹æ‚å¿—å‘è¡¨äº†ä¸€ç¯‡å…³äº OkCupid ç ”ç©¶çš„æ–‡ç« ï¼Œhttps://www.wired.com/2016/05/okcupid-study-reveals-perils-big-data-scienceã€‚â†©ï¸\nè®¸å¤šæ ‡ç­¾ï¼ˆåŒ…æ‹¬ &lt;p&gt; å’Œ &lt;li&gt;ï¼‰ä¸éœ€è¦ç»“æŸæ ‡ç­¾ï¼Œä½†æˆ‘ä»¬è®¤ä¸ºæœ€å¥½è¿˜æ˜¯åŠ ä¸Šï¼Œå› ä¸ºè¿™èƒ½è®© HTML çš„ç»“æ„çœ‹å¾—æ›´æ¸…æ¥šä¸€äº›ã€‚â†©ï¸\nè¿™ä¸ªç±»æ¥è‡ª xml2 åŒ…ã€‚xml2 æ˜¯ä¸€ä¸ªåº•å±‚åŒ…ï¼Œrvest åœ¨å…¶ä¹‹ä¸Šæ„å»ºã€‚â†©ï¸\nrvest ä¹Ÿæä¾›äº† html_text()ï¼Œä½†ä½ å‡ ä¹æ€»æ˜¯åº”è¯¥ä½¿ç”¨ html_text2()ï¼Œå› ä¸ºå®ƒåœ¨å°†åµŒå¥—çš„ HTML è½¬æ¢ä¸ºæ–‡æœ¬æ–¹é¢åšå¾—æ›´å¥½ã€‚â†©ï¸",
    "crumbs": [
      "å¯¼å…¥",
      "<span class='chapter-number'>24</span>Â  <span class='chapter-title'>ç½‘ç»œæŠ“å–</span>"
    ]
  },
  {
    "objectID": "program.html",
    "href": "program.html",
    "title": "ç¼–ç¨‹",
    "section": "",
    "text": "åœ¨æœ¬ä¹¦çš„è¿™ä¸€éƒ¨åˆ†ï¼Œä½ å°†æå‡è‡ªå·±çš„ç¼–ç¨‹æŠ€èƒ½ã€‚ç¼–ç¨‹æ˜¯æ‰€æœ‰æ•°æ®ç§‘å­¦å·¥ä½œéƒ½éœ€è¦çš„ä¸€é¡¹è´¯ç©¿æ€§æŠ€èƒ½ï¼šä½ å¿…é¡»ä½¿ç”¨è®¡ç®—æœºæ¥åšæ•°æ®ç§‘å­¦ï¼›ä½ æ— æ³•åœ¨è„‘æµ·ä¸­ï¼Œæˆ–è€…ç”¨çº¸å’Œç¬”æ¥å®Œæˆã€‚\n\n\n\n\n\n\n\nFigureÂ 1: ç¼–ç¨‹å°±åƒæ˜¯æ°´ï¼Œæ‰€æœ‰å…¶ä»–ç»„ä»¶éƒ½åœ¨å…¶ä¸­é¨æ¸¸ã€‚\n\n\n\n\nç¼–ç¨‹ä¼šäº§å‡ºä»£ç ï¼Œè€Œä»£ç æ˜¯ä¸€ç§æ²Ÿé€šå·¥å…·ã€‚æ˜¾ç„¶ï¼Œä»£ç ä¼šå‘Šè¯‰è®¡ç®—æœºä½ å¸Œæœ›å®ƒåšä»€ä¹ˆã€‚ä½†å®ƒä¹Ÿå‘å…¶ä»–äººç±»ä¼ è¾¾æ„ä¹‰ã€‚å°†ä»£ç è§†ä¸ºä¸€ç§æ²Ÿé€šåª’ä»‹éå¸¸é‡è¦ï¼Œå› ä¸ºä½ æ‰€åšçš„æ¯ä¸€ä¸ªé¡¹ç›®æœ¬è´¨ä¸Šéƒ½æ˜¯åä½œæ€§çš„ã€‚å³ä½¿ä½ æ²¡æœ‰å’Œåˆ«äººä¸€èµ·å·¥ä½œï¼Œä½ ä¹Ÿè‚¯å®šä¼šå’Œæœªæ¥çš„è‡ªå·±åˆä½œï¼ç¼–å†™æ¸…æ™°çš„ä»£ç éå¸¸é‡è¦ï¼Œè¿™æ ·å…¶ä»–äººï¼ˆæ¯”å¦‚æœªæ¥çš„ä½ ï¼‰æ‰èƒ½ç†è§£ä½ ä¸ºä»€ä¹ˆç”¨é‚£æ ·çš„æ–¹å¼æ¥å¤„ç†ä¸€é¡¹åˆ†æã€‚è¿™æ„å‘³ç€ï¼Œæå‡ç¼–ç¨‹èƒ½åŠ›ä¹ŸåŒ…æ‹¬æå‡æ²Ÿé€šèƒ½åŠ›ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œä½ å¸Œæœ›ä½ çš„ä»£ç ä¸ä»…æ›´å®¹æ˜“ç¼–å†™ï¼Œè€Œä¸”æ›´å®¹æ˜“è¢«ä»–äººé˜…è¯»ã€‚\nåœ¨æ¥ä¸‹æ¥çš„ä¸‰ç« ä¸­ï¼Œä½ å°†å­¦ä¹ æå‡ç¼–ç¨‹æŠ€èƒ½çš„æŠ€å·§ï¼š\n\nå¤åˆ¶ç²˜è´´æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œä½†ä½ åº”è¯¥é¿å…é‡å¤ä½¿ç”¨å®ƒè¶…è¿‡ä¸¤æ¬¡ã€‚åœ¨ä»£ç ä¸­é‡å¤è‡ªå·±æ˜¯å±é™©çš„ï¼Œå› ä¸ºå®ƒå¾ˆå®¹æ˜“å¯¼è‡´é”™è¯¯å’Œä¸ä¸€è‡´ã€‚å› æ­¤ï¼Œåœ¨ 25Â  å‡½æ•° ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•ç¼–å†™å‡½æ•° (functions)ï¼Œè¿™èƒ½è®©ä½ å°†é‡å¤çš„ tidyverse ä»£ç æå–å‡ºæ¥ï¼Œä»¥ä¾¿è½»æ¾å¤ç”¨ã€‚\nå‡½æ•°èƒ½æå–å‡ºé‡å¤çš„ä»£ç ï¼Œä½†ä½ ç»å¸¸éœ€è¦å¯¹ä¸åŒçš„è¾“å…¥é‡å¤ç›¸åŒçš„æ“ä½œã€‚ä½ éœ€è¦è¿­ä»£ (iteration) çš„å·¥å…·ï¼Œè®©ä½ èƒ½ä¸€éåˆä¸€éåœ°åšç±»ä¼¼çš„äº‹æƒ…ã€‚è¿™äº›å·¥å…·åŒ…æ‹¬ for å¾ªç¯å’Œå‡½æ•°å¼ç¼–ç¨‹ï¼Œä½ å°†åœ¨ 26Â  è¿­ä»£ ä¸­å­¦ä¹ å®ƒä»¬ã€‚\nå½“ä½ é˜…è¯»æ›´å¤šä»–äººç¼–å†™çš„ä»£ç æ—¶ï¼Œä½ ä¼šçœ‹åˆ°æ›´å¤šä¸ä½¿ç”¨ tidyverse çš„ä»£ç ã€‚åœ¨ 27Â  Base R å®æˆ˜æŒ‡å— ä¸­ï¼Œä½ å°†å­¦ä¹ ä¸€äº›ä½ åœ¨å®è·µä¸­ä¼šé‡åˆ°çš„æœ€é‡è¦çš„åŸºç¡€ R å‡½æ•°ã€‚\n\nè¿™äº›ç« èŠ‚çš„ç›®æ ‡æ˜¯æ•™ä¼šä½ æ•°æ®ç§‘å­¦æ‰€éœ€çš„æœ€ä½é™åº¦çš„ç¼–ç¨‹çŸ¥è¯†ã€‚ä¸€æ—¦ä½ æŒæ¡äº†è¿™é‡Œçš„å†…å®¹ï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½ ç»§ç»­æŠ•å…¥æ—¶é—´æå‡ä½ çš„ç¼–ç¨‹æŠ€èƒ½ã€‚æˆ‘ä»¬å†™äº†ä¸¤æœ¬ä¹¦ï¼Œä½ å¯èƒ½ä¼šè§‰å¾—æœ‰å¸®åŠ©ã€‚ã€ŠHands on Programming with Rã€‹ï¼Œç”± Garrett Grolemund æ’°å†™ï¼Œæ˜¯ R ä½œä¸ºä¸€é—¨ç¼–ç¨‹è¯­è¨€çš„å…¥é—¨ä»‹ç»ï¼Œå¦‚æœ R æ˜¯ä½ çš„ç¬¬ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œè¿™æœ¬ä¹¦æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ã€‚ã€ŠAdvanced Rã€‹ç”± Hadley Wickham æ’°å†™ï¼Œæ·±å…¥æ¢è®¨äº† R ç¼–ç¨‹è¯­è¨€çš„ç»†èŠ‚ï¼›å¦‚æœä½ æœ‰ç°æˆçš„ç¼–ç¨‹ç»éªŒï¼Œè¿™æœ¬ä¹¦æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ï¼Œä¸€æ—¦ä½ å†…åŒ–äº†è¿™äº›ç« èŠ‚ä¸­çš„æ€æƒ³ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è¿›é˜¶é€‰æ‹©ã€‚",
    "crumbs": [
      "ç¼–ç¨‹"
    ]
  },
  {
    "objectID": "functions.html",
    "href": "functions.html",
    "title": "25Â  å‡½æ•°",
    "section": "",
    "text": "25.1 å¼•è¨€\næå‡ä½ ä½œä¸ºæ•°æ®ç§‘å­¦å®¶å½±å“åŠ›çš„æœ€ä½³é€”å¾„ä¹‹ä¸€å°±æ˜¯ç¼–å†™å‡½æ•°ã€‚å‡½æ•°èƒ½è®©ä½ ä»¥æ¯”å¤åˆ¶ç²˜è´´æ›´å¼ºå¤§ã€æ›´é€šç”¨çš„æ–¹å¼è‡ªåŠ¨åŒ–å¤„ç†å¸¸è§ä»»åŠ¡ã€‚ä¸å¤åˆ¶ç²˜è´´ç›¸æ¯”ï¼Œç¼–å†™å‡½æ•°æœ‰å››å¤§ä¼˜åŠ¿ï¼š\nä¸€ä¸ªå¾ˆå¥½çš„ç»éªŒæ³•åˆ™æ˜¯ï¼Œå½“ä½ å¤åˆ¶ç²˜è´´ä¸€ä¸ªä»£ç å—è¶…è¿‡ä¸¤æ¬¡ï¼ˆå³ä½ ç°åœ¨æœ‰äº†åŒä¸€ä»£ç çš„ä¸‰ä¸ªå‰¯æœ¬ï¼‰æ—¶ï¼Œå°±åº”è¯¥è€ƒè™‘ç¼–å†™ä¸€ä¸ªå‡½æ•°ã€‚åœ¨æœ¬ç« ä¸­ï¼Œä½ å°†å­¦ä¹ ä¸‰ç§æœ‰ç”¨çš„å‡½æ•°ç±»å‹ï¼š\næ¯ä¸ªéƒ¨åˆ†éƒ½åŒ…å«è®¸å¤šç¤ºä¾‹ï¼Œä»¥å¸®åŠ©ä½ å½’çº³æ‰€è§çš„æ¨¡å¼ã€‚æ²¡æœ‰ Twitter ä¸Šæœ‹å‹ä»¬çš„å¸®åŠ©ï¼Œè¿™äº›ç¤ºä¾‹æ˜¯ä¸å¯èƒ½å®Œæˆçš„ï¼Œæˆ‘ä»¬é¼“åŠ±ä½ ç‚¹å‡»æ³¨é‡Šä¸­çš„é“¾æ¥æŸ¥çœ‹åŸå§‹çµæ„Ÿã€‚ä½ å¯èƒ½è¿˜æƒ³é˜…è¯»å…³äºé€šç”¨å‡½æ•°å’Œç»˜å›¾å‡½æ•°çš„åŸå§‹æ¿€åŠ±æ¨æ–‡ï¼Œä»¥çœ‹åˆ°æ›´å¤šå‡½æ•°ã€‚",
    "crumbs": [
      "ç¼–ç¨‹",
      "<span class='chapter-number'>25</span>Â  <span class='chapter-title'>å‡½æ•°</span>"
    ]
  },
  {
    "objectID": "functions.html#å¼•è¨€",
    "href": "functions.html#å¼•è¨€",
    "title": "25Â  å‡½æ•°",
    "section": "",
    "text": "ä½ å¯ä»¥ç»™å‡½æ•°èµ·ä¸€ä¸ªå¯Œæœ‰è¡¨ç°åŠ›çš„åå­—ï¼Œè®©ä½ çš„ä»£ç æ›´æ˜“äºç†è§£ã€‚\nå½“éœ€æ±‚å˜åŒ–æ—¶ï¼Œä½ åªéœ€è¦åœ¨ä¸€ä¸ªåœ°æ–¹æ›´æ–°ä»£ç ï¼Œè€Œä¸æ˜¯å¤šå¤„ã€‚\nä½ æ¶ˆé™¤äº†åœ¨å¤åˆ¶ç²˜è´´æ—¶å¯èƒ½å‡ºç°çš„å¶ç„¶é”™è¯¯ï¼ˆä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªåœ°æ–¹æ›´æ–°äº†å˜é‡åï¼Œä½†åœ¨å¦ä¸€ä¸ªåœ°æ–¹å´æ²¡æœ‰ï¼‰ã€‚\nå®ƒè®©ä½ æ›´å®¹æ˜“åœ¨ä¸åŒé¡¹ç›®é—´é‡ç”¨ä»£ç ï¼Œä»è€Œéšç€æ—¶é—´çš„æ¨ç§»æé«˜ä½ çš„ç”Ÿäº§åŠ›ã€‚\n\n\n\n\nå‘é‡å‡½æ•°ï¼šæ¥æ”¶ä¸€ä¸ªæˆ–å¤šä¸ªå‘é‡ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¿”å›ä¸€ä¸ªå‘é‡ä½œä¸ºè¾“å‡ºã€‚\n\næ•°æ®æ¡†å‡½æ•°ï¼šæ¥æ”¶ä¸€ä¸ªæ•°æ®æ¡†ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ•°æ®æ¡†ä½œä¸ºè¾“å‡ºã€‚\n\nç»˜å›¾å‡½æ•°ï¼šæ¥æ”¶ä¸€ä¸ªæ•°æ®æ¡†ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¿”å›ä¸€ä¸ªç»˜å›¾ä½œä¸ºè¾“å‡ºã€‚\n\n\n\n25.1.1 å‰ææ¡ä»¶\næˆ‘ä»¬å°†å°è£…æ¥è‡ª tidyverse å„å¤„çš„å¤šç§å‡½æ•°ã€‚æˆ‘ä»¬è¿˜å°†ä½¿ç”¨ nycflights13 ä½œä¸ºç†Ÿæ‚‰çš„æ•°æ®æºæ¥åº”ç”¨æˆ‘ä»¬çš„å‡½æ•°ã€‚\n\nlibrary(tidyverse)\nlibrary(nycflights13)",
    "crumbs": [
      "ç¼–ç¨‹",
      "<span class='chapter-number'>25</span>Â  <span class='chapter-title'>å‡½æ•°</span>"
    ]
  },
  {
    "objectID": "functions.html#å‘é‡å‡½æ•°",
    "href": "functions.html#å‘é‡å‡½æ•°",
    "title": "25Â  å‡½æ•°",
    "section": "\n25.2 å‘é‡å‡½æ•°",
    "text": "25.2 å‘é‡å‡½æ•°\næˆ‘ä»¬ä»å‘é‡å‡½æ•°å¼€å§‹ï¼šè¿™ç±»å‡½æ•°æ¥æ”¶ä¸€ä¸ªæˆ–å¤šä¸ªå‘é‡å¹¶è¿”å›ä¸€ä¸ªå‘é‡ç»“æœã€‚ä¾‹å¦‚ï¼Œçœ‹çœ‹è¿™æ®µä»£ç ã€‚å®ƒåšäº†ä»€ä¹ˆï¼Ÿ\n\ndf &lt;- tibble(\n  a = rnorm(5),\n  b = rnorm(5),\n  c = rnorm(5),\n  d = rnorm(5),\n)\n\ndf |&gt; mutate(\n  a = (a - min(a, na.rm = TRUE)) / \n    (max(a, na.rm = TRUE) - min(a, na.rm = TRUE)),\n  b = (b - min(a, na.rm = TRUE)) / \n    (max(b, na.rm = TRUE) - min(b, na.rm = TRUE)),\n  c = (c - min(c, na.rm = TRUE)) / \n    (max(c, na.rm = TRUE) - min(c, na.rm = TRUE)),\n  d = (d - min(d, na.rm = TRUE)) / \n    (max(d, na.rm = TRUE) - min(d, na.rm = TRUE)),\n)\n#&gt; # A tibble: 5 Ã— 4\n#&gt;       a       b     c     d\n#&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1 0.339  0.387  0.291 0    \n#&gt; 2 0.880 -0.613  0.611 0.557\n#&gt; 3 0     -0.0833 1     0.752\n#&gt; 4 0.795 -0.0822 0     1    \n#&gt; 5 1     -0.0952 0.580 0.394\n\nä½ æˆ–è®¸èƒ½ç¢ç£¨å‡ºæ¥ï¼Œè¿™æ˜¯å°†æ¯ä¸€åˆ—é‡æ–°ç¼©æ”¾åˆ° 0 åˆ° 1 çš„èŒƒå›´å†…ã€‚ä½†ä½ å‘ç°é‚£ä¸ªé”™è¯¯äº†å—ï¼ŸHadley åœ¨å†™è¿™æ®µä»£ç æ—¶ï¼Œå¤åˆ¶ç²˜è´´æ—¶çŠ¯äº†ä¸ªé”™è¯¯ï¼Œå¿˜è®°äº†æŠŠä¸€ä¸ª a æ”¹æˆ bã€‚é˜²æ­¢è¿™ç±»é”™è¯¯çš„å‘ç”Ÿæ˜¯å­¦ä¹ å¦‚ä½•ç¼–å†™å‡½æ•°çš„ä¸€ä¸ªå¾ˆå¥½çš„ç†ç”±ã€‚\n\n25.2.1 ç¼–å†™ä¸€ä¸ªå‡½æ•°\nè¦ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œä½ é¦–å…ˆéœ€è¦åˆ†æä½ é‡å¤çš„ä»£ç ï¼Œæ‰¾å‡ºå“ªäº›éƒ¨åˆ†æ˜¯å›ºå®šä¸å˜çš„ï¼Œå“ªäº›éƒ¨åˆ†æ˜¯å˜åŒ–çš„ã€‚å¦‚æœæˆ‘ä»¬æŠŠä¸Šé¢çš„ä»£ç ä» mutate() ä¸­æ‹¿å‡ºæ¥ï¼Œæ¨¡å¼ä¼šçœ‹å¾—æ›´æ¸…æ¥šä¸€äº›ï¼Œå› ä¸ºç°åœ¨æ¯æ¬¡é‡å¤éƒ½åªæœ‰ä¸€è¡Œï¼š\n\n(a - min(a, na.rm = TRUE)) / (max(a, na.rm = TRUE) - min(a, na.rm = TRUE))\n(b - min(b, na.rm = TRUE)) / (max(b, na.rm = TRUE) - min(b, na.rm = TRUE))\n(c - min(c, na.rm = TRUE)) / (max(c, na.rm = TRUE) - min(c, na.rm = TRUE))\n(d - min(d, na.rm = TRUE)) / (max(d, na.rm = TRUE) - min(d, na.rm = TRUE))  \n\nä¸ºäº†è®©è¿™æ›´æ¸…æ™°ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ â–ˆ æ›¿æ¢å˜åŒ–çš„éƒ¨åˆ†ï¼š\n\n(â–ˆ - min(â–ˆ, na.rm = TRUE)) / (max(â–ˆ, na.rm = TRUE) - min(â–ˆ, na.rm = TRUE))\n\nè¦æŠŠå®ƒå˜æˆä¸€ä¸ªå‡½æ•°ï¼Œä½ éœ€è¦ä¸‰æ ·ä¸œè¥¿ï¼š\n\nä¸€ä¸ªåå­—ã€‚è¿™é‡Œæˆ‘ä»¬ç”¨ rescale01ï¼Œå› ä¸ºè¿™ä¸ªå‡½æ•°å°†ä¸€ä¸ªå‘é‡é‡æ–°ç¼©æ”¾åˆ° 0 å’Œ 1 ä¹‹é—´ã€‚\nå‚æ•° (arguments)ã€‚å‚æ•°æ˜¯åœ¨ä¸åŒè°ƒç”¨ä¸­å˜åŒ–çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬ä¸Šé¢çš„åˆ†æå‘Šè¯‰æˆ‘ä»¬åªæœ‰ä¸€ä¸ªã€‚æˆ‘ä»¬ç§°å®ƒä¸º xï¼Œå› ä¸ºè¿™æ˜¯æ•°å€¼å‘é‡çš„å¸¸è§„åç§°ã€‚\nå‡½æ•°ä½“ (body)ã€‚å‡½æ•°ä½“æ˜¯åœ¨æ‰€æœ‰è°ƒç”¨ä¸­é‡å¤çš„ä»£ç ã€‚\n\nç„¶åä½ æŒ‰ç…§è¿™ä¸ªæ¨¡æ¿åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼š\n\nname &lt;- function(arguments) {\n  body\n}\n\nå¯¹äºè¿™ä¸ªä¾‹å­ï¼Œå°±å¾—åˆ°äº†ï¼š\n\nrescale01 &lt;- function(x) {\n  (x - min(x, na.rm = TRUE)) / (max(x, na.rm = TRUE) - min(x, na.rm = TRUE))\n}\n\næ­¤æ—¶ï¼Œä½ å¯èƒ½ä¼šç”¨ä¸€äº›ç®€å•çš„è¾“å…¥æ¥æµ‹è¯•ï¼Œä»¥ç¡®ä¿ä½ æ­£ç¡®åœ°æ•æ‰äº†é€»è¾‘ï¼š\n\nrescale01(c(-10, 0, 10))\n#&gt; [1] 0.0 0.5 1.0\nrescale01(c(1, 2, 3, NA, 5))\n#&gt; [1] 0.00 0.25 0.50   NA 1.00\n\nç„¶åä½ å¯ä»¥å°†å¯¹ mutate() çš„è°ƒç”¨é‡å†™ä¸ºï¼š\n\ndf |&gt; mutate(\n  a = rescale01(a),\n  b = rescale01(b),\n  c = rescale01(c),\n  d = rescale01(d),\n)\n#&gt; # A tibble: 5 Ã— 4\n#&gt;       a     b     c     d\n#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1 0.339 1     0.291 0    \n#&gt; 2 0.880 0     0.611 0.557\n#&gt; 3 0     0.530 1     0.752\n#&gt; 4 0.795 0.531 0     1    \n#&gt; 5 1     0.518 0.580 0.394\n\nï¼ˆåœ¨ Chapter 26 ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨ across() æ¥è¿›ä¸€æ­¥å‡å°‘é‡å¤ï¼Œè¿™æ ·ä½ åªéœ€è¦ df |&gt; mutate(across(a:d, rescale01))ï¼‰ã€‚\n\n25.2.2 æ”¹è¿›æˆ‘ä»¬çš„å‡½æ•°\nä½ å¯èƒ½ä¼šæ³¨æ„åˆ° rescale01() å‡½æ•°åšäº†ä¸€äº›ä¸å¿…è¦çš„å·¥ä½œ â€” ä¸å…¶è®¡ç®—ä¸¤æ¬¡ min() å’Œä¸€æ¬¡ max()ï¼Œæˆ‘ä»¬ä¸å¦‚ç”¨ range() ä¸€æ­¥è®¡ç®—å‡ºæœ€å°å€¼å’Œæœ€å¤§å€¼ï¼š\n\nrescale01 &lt;- function(x) {\n  rng &lt;- range(x, na.rm = TRUE)\n  (x - rng[1]) / (rng[2] - rng[1])\n}\n\næˆ–è€…ä½ å¯ä»¥ç”¨ä¸€ä¸ªåŒ…å«æ— ç©·å¤§å€¼çš„å‘é‡æ¥è¯•è¯•è¿™ä¸ªå‡½æ•°ï¼š\n\nx &lt;- c(1:10, Inf)\nrescale01(x)\n#&gt;  [1]   0   0   0   0   0   0   0   0   0   0 NaN\n\nè¿™ä¸ªç»“æœä¸æ˜¯ç‰¹åˆ«æœ‰ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®© range() å¿½ç•¥æ— ç©·å¤§å€¼ï¼š\n\nrescale01 &lt;- function(x) {\n  rng &lt;- range(x, na.rm = TRUE, finite = TRUE)\n  (x - rng[1]) / (rng[2] - rng[1])\n}\n\nrescale01(x)\n#&gt;  [1] 0.0000000 0.1111111 0.2222222 0.3333333 0.4444444 0.5555556 0.6666667\n#&gt;  [8] 0.7777778 0.8888889 1.0000000       Inf\n\nè¿™äº›æ”¹åŠ¨å±•ç¤ºäº†å‡½æ•°çš„ä¸€ä¸ªé‡è¦å¥½å¤„ï¼šå› ä¸ºæˆ‘ä»¬æŠŠé‡å¤çš„ä»£ç ç§»åˆ°äº†ä¸€ä¸ªå‡½æ•°é‡Œï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ä¸€ä¸ªåœ°æ–¹åšæ”¹åŠ¨ã€‚\n\n25.2.3 å˜æ¢å‡½æ•°\nç°åœ¨ä½ å·²ç»æŒæ¡äº†å‡½æ•°çš„åŸºæœ¬æ¦‚å¿µï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€å¤§å †ä¾‹å­ã€‚æˆ‘ä»¬å°†ä»â€œå˜æ¢ (mutate)â€å‡½æ•°å¼€å§‹ï¼Œå³é‚£äº›åœ¨ mutate() å’Œ filter() å†…éƒ¨å·¥ä½œå¾—å¾ˆå¥½çš„å‡½æ•°ï¼Œå› ä¸ºå®ƒä»¬è¿”å›çš„è¾“å‡ºä¸è¾“å…¥é•¿åº¦ç›¸åŒã€‚\nè®©æˆ‘ä»¬ä» rescale01() çš„ä¸€ä¸ªç®€å•å˜ä½“å¼€å§‹ã€‚ä¹Ÿè®¸ä½ æƒ³è¦è®¡ç®— Z åˆ†æ•° (Z-score)ï¼Œå°†ä¸€ä¸ªå‘é‡é‡æ–°ç¼©æ”¾ï¼Œä½¿å…¶å‡å€¼ä¸ºé›¶ï¼Œæ ‡å‡†å·®ä¸ºä¸€ï¼š\n\nz_score &lt;- function(x) {\n  (x - mean(x, na.rm = TRUE)) / sd(x, na.rm = TRUE)\n}\n\næˆ–è€…ï¼Œä½ å¯èƒ½æƒ³å°è£…ä¸€ä¸ªç®€å•çš„ case_when() å¹¶ç»™å®ƒä¸€ä¸ªæœ‰ç”¨çš„åå­—ã€‚ä¾‹å¦‚ï¼Œè¿™ä¸ª clamp() å‡½æ•°ç¡®ä¿ä¸€ä¸ªå‘é‡çš„æ‰€æœ‰å€¼éƒ½ä»‹äºä¸€ä¸ªæœ€å°å€¼å’Œä¸€ä¸ªæœ€å¤§å€¼ä¹‹é—´ï¼š\n\nclamp &lt;- function(x, min, max) {\n  case_when(\n    x &lt; min ~ min,\n    x &gt; max ~ max,\n    .default = x\n  )\n}\n\nclamp(1:10, min = 3, max = 7)\n#&gt;  [1] 3 3 3 4 5 6 7 7 7 7\n\nå½“ç„¶ï¼Œå‡½æ•°ä¸åªé€‚ç”¨äºæ•°å€¼å˜é‡ã€‚ä½ å¯èƒ½æƒ³åšä¸€äº›é‡å¤çš„å­—ç¬¦ä¸²æ“ä½œã€‚ä¹Ÿè®¸ä½ éœ€è¦å°†ç¬¬ä¸€ä¸ªå­—ç¬¦å¤§å†™ï¼š\n\nfirst_upper &lt;- function(x) {\n  str_sub(x, 1, 1) &lt;- str_to_upper(str_sub(x, 1, 1))\n  x\n}\n\nfirst_upper(\"hello\")\n#&gt; [1] \"Hello\"\n\næˆ–è€…ï¼Œä½ å¯èƒ½æƒ³åœ¨å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—ä¹‹å‰ï¼Œä»ä¸­å‰¥ç¦»ç™¾åˆ†å·ã€é€—å·å’Œç¾å…ƒç¬¦å·ï¼š\n\n# https://twitter.com/NVlabormarket/status/1571939851922198530\nclean_number &lt;- function(x) {\n  is_pct &lt;- str_detect(x, \"%\")\n  num &lt;- x |&gt; \n    str_remove_all(\"%\") |&gt; \n    str_remove_all(\",\") |&gt; \n    str_remove_all(fixed(\"$\")) |&gt; \n    as.numeric()\n  if_else(is_pct, num / 100, num)\n}\n\nclean_number(\"$12,300\")\n#&gt; [1] 12300\nclean_number(\"45%\")\n#&gt; [1] 0.45\n\næœ‰æ—¶å€™ä½ çš„å‡½æ•°ä¼šé«˜åº¦ä¸“ç”¨äºæŸä¸ªæ•°æ®åˆ†ææ­¥éª¤ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰ä¸€å †å˜é‡å°†ç¼ºå¤±å€¼è®°å½•ä¸º 997ã€998 æˆ– 999ï¼Œä½ å¯èƒ½æƒ³å†™ä¸€ä¸ªå‡½æ•°æ¥å°†å®ƒä»¬æ›¿æ¢ä¸º NAï¼š\n\nfix_na &lt;- function(x) {\n  if_else(x %in% c(997, 998, 999), NA, x)\n}\n\næˆ‘ä»¬ä¸“æ³¨äºæ¥æ”¶å•ä¸ªå‘é‡çš„ä¾‹å­ï¼Œå› ä¸ºæˆ‘ä»¬è®¤ä¸ºå®ƒä»¬æ˜¯æœ€å¸¸è§çš„ã€‚ä½†æ˜¯ï¼Œä½ çš„å‡½æ•°æ²¡æœ‰ç†ç”±ä¸èƒ½æ¥æ”¶å¤šä¸ªå‘é‡è¾“å…¥ã€‚\n\n25.2.4 æ‘˜è¦å‡½æ•°\nå¦ä¸€ä¸ªé‡è¦çš„å‘é‡å‡½æ•°å®¶æ—æ˜¯æ‘˜è¦å‡½æ•° (summary functions)ï¼Œå³åœ¨ summarize() ä¸­ä½¿ç”¨å¹¶è¿”å›å•ä¸ªå€¼çš„å‡½æ•°ã€‚æœ‰æ—¶ï¼Œè¿™å¯èƒ½åªæ˜¯è®¾ç½®ä¸€ä¸ªæˆ–ä¸¤ä¸ªé»˜è®¤å‚æ•°çš„é—®é¢˜ï¼š\n\ncommas &lt;- function(x) {\n  str_flatten(x, collapse = \", \", last = \" and \")\n}\n\ncommas(c(\"cat\", \"dog\", \"pigeon\"))\n#&gt; [1] \"cat, dog and pigeon\"\n\næˆ–è€…ä½ å¯èƒ½æƒ³å°è£…ä¸€ä¸ªç®€å•çš„è®¡ç®—ï¼Œæ¯”å¦‚å˜å¼‚ç³»æ•° (coefficient of variation)ï¼Œå®ƒç”¨æ ‡å‡†å·®é™¤ä»¥å‡å€¼ï¼š\n\ncv &lt;- function(x, na.rm = FALSE) {\n  sd(x, na.rm = na.rm) / mean(x, na.rm = na.rm)\n}\n\ncv(runif(100, min = 0, max = 50))\n#&gt; [1] 0.5196276\ncv(runif(100, min = 0, max = 500))\n#&gt; [1] 0.5652554\n\næˆ–è€…ä½ åªæ˜¯æƒ³é€šè¿‡ç»™ä¸€ä¸ªå¸¸è§çš„æ¨¡å¼èµ·ä¸€ä¸ªå¥½è®°çš„åå­—æ¥è®©å®ƒæ›´å®¹æ˜“è®°ä½ï¼š\n\n# https://twitter.com/gbganalyst/status/1571619641390252033\nn_missing &lt;- function(x) {\n  sum(is.na(x))\n} \n\nä½ ä¹Ÿå¯ä»¥ç¼–å†™å…·æœ‰å¤šä¸ªå‘é‡è¾“å…¥çš„å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œä¹Ÿè®¸ä½ æƒ³è®¡ç®—å¹³å‡ç»å¯¹ç™¾åˆ†æ¯”è¯¯å·® (mean absolute percentage error)ï¼Œä»¥å¸®åŠ©ä½ æ¯”è¾ƒæ¨¡å‹é¢„æµ‹å€¼ä¸å®é™…å€¼ï¼š\n\n# https://twitter.com/neilgcurrie/status/1571607727255834625\nmape &lt;- function(actual, predicted) {\n  sum(abs((actual - predicted) / actual)) / length(actual)\n}\n\n\n\n\n\n\n\nRStudio\n\n\n\nä¸€æ—¦ä½ å¼€å§‹ç¼–å†™å‡½æ•°ï¼Œæœ‰ä¸¤ä¸ª RStudio å¿«æ·é”®éå¸¸æœ‰ç”¨ï¼š\n\nè¦æŸ¥æ‰¾ä½ ç¼–å†™çš„å‡½æ•°çš„å®šä¹‰ï¼Œå°†å…‰æ ‡æ”¾åœ¨å‡½æ•°åä¸Šï¼Œç„¶åæŒ‰ F2ã€‚\nè¦å¿«é€Ÿè·³è½¬åˆ°ä¸€ä¸ªå‡½æ•°ï¼ŒæŒ‰ Ctrl + . æ‰“å¼€æ¨¡ç³Šæ–‡ä»¶å’Œå‡½æ•°æŸ¥æ‰¾å™¨ï¼Œç„¶åè¾“å…¥ä½ å‡½æ•°åçš„å‰å‡ ä¸ªå­—æ¯ã€‚ä½ ä¹Ÿå¯ä»¥ç”¨å®ƒæ¥å¯¼èˆªåˆ°æ–‡ä»¶ã€Quarto ç« èŠ‚ç­‰ï¼Œä½¿å…¶æˆä¸ºä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„å¯¼èˆªå·¥å…·ã€‚\n\n\n\n\n25.2.5 ç»ƒä¹ \n\n\nç»ƒä¹ å°†ä»¥ä¸‹ä»£ç ç‰‡æ®µè½¬æ¢æˆå‡½æ•°ã€‚æ€è€ƒæ¯ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿä½ ä¼šæ€ä¹ˆç§°å‘¼å®ƒï¼Ÿå®ƒéœ€è¦å¤šå°‘ä¸ªå‚æ•°ï¼Ÿ\n\nmean(is.na(x))\nmean(is.na(y))\nmean(is.na(z))\n\nx / sum(x, na.rm = TRUE)\ny / sum(y, na.rm = TRUE)\nz / sum(z, na.rm = TRUE)\n\nround(x / sum(x, na.rm = TRUE) * 100, 1)\nround(y / sum(y, na.rm = TRUE) * 100, 1)\nround(z / sum(z, na.rm = TRUE) * 100, 1)\n\n\nåœ¨ rescale01() çš„ç¬¬äºŒä¸ªå˜ä½“ä¸­ï¼Œæ— ç©·å¤§å€¼ä¿æŒä¸å˜ã€‚ä½ èƒ½å¦é‡å†™ rescale01()ï¼Œä½¿å¾— -Inf æ˜ å°„åˆ° 0ï¼Œè€Œ Inf æ˜ å°„åˆ° 1ï¼Ÿ\nç»™å®šä¸€ä¸ªå‡ºç”Ÿæ—¥æœŸå‘é‡ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—ä»¥å¹´ä¸ºå•ä½çš„å¹´é¾„ã€‚\nç¼–å†™ä½ è‡ªå·±çš„å‡½æ•°æ¥è®¡ç®—ä¸€ä¸ªæ•°å€¼å‘é‡çš„æ–¹å·®å’Œååº¦ã€‚ä½ å¯ä»¥åœ¨ç»´åŸºç™¾ç§‘æˆ–å…¶ä»–åœ°æ–¹æŸ¥æ‰¾å®šä¹‰ã€‚\nç¼–å†™ both_na()ï¼Œä¸€ä¸ªæ‘˜è¦å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªç›¸åŒé•¿åº¦çš„å‘é‡ï¼Œå¹¶è¿”å›ä¸¤ä¸ªå‘é‡ä¸­åœ¨ç›¸åŒä½ç½®ä¸Šéƒ½ä¸º NA çš„æ•°é‡ã€‚\n\né˜…è¯»æ–‡æ¡£ï¼Œå¼„æ¸…æ¥šä»¥ä¸‹å‡½æ•°çš„ä½œç”¨ã€‚ä¸ºä»€ä¹ˆå®ƒä»¬è™½ç„¶å¾ˆçŸ­ï¼Œä½†ä»ç„¶å¾ˆæœ‰ç”¨ï¼Ÿ\n\nis_directory &lt;- function(x) {\n  file.info(x)$isdir\n}\nis_readable &lt;- function(x) {\n  file.access(x, 4) == 0\n}",
    "crumbs": [
      "ç¼–ç¨‹",
      "<span class='chapter-number'>25</span>Â  <span class='chapter-title'>å‡½æ•°</span>"
    ]
  },
  {
    "objectID": "functions.html#æ•°æ®æ¡†å‡½æ•°",
    "href": "functions.html#æ•°æ®æ¡†å‡½æ•°",
    "title": "25Â  å‡½æ•°",
    "section": "\n25.3 æ•°æ®æ¡†å‡½æ•°",
    "text": "25.3 æ•°æ®æ¡†å‡½æ•°\nå‘é‡å‡½æ•°å¯¹äºæå–åœ¨ dplyr åŠ¨è¯å†…éƒ¨é‡å¤çš„ä»£ç å¾ˆæœ‰ç”¨ã€‚ä½†ä½ é€šå¸¸ä¹Ÿä¼šé‡å¤åŠ¨è¯æœ¬èº«ï¼Œå°¤å…¶æ˜¯åœ¨ä¸€ä¸ªå¤§å‹çš„ç®¡é“ä¸­ã€‚å½“ä½ æ³¨æ„åˆ°è‡ªå·±å¤šæ¬¡å¤åˆ¶ç²˜è´´å¤šä¸ªåŠ¨è¯æ—¶ï¼Œä½ å¯èƒ½ä¼šè€ƒè™‘ç¼–å†™ä¸€ä¸ªæ•°æ®æ¡†å‡½æ•°ã€‚æ•°æ®æ¡†å‡½æ•°çš„å·¥ä½œæ–¹å¼ç±»ä¼¼äº dplyr åŠ¨è¯ï¼šå®ƒä»¬æ¥æ”¶ä¸€ä¸ªæ•°æ®æ¡†ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä¸€äº›é¢å¤–çš„å‚æ•°æ¥è¯´æ˜å¦‚ä½•å¤„ç†å®ƒï¼Œå¹¶è¿”å›ä¸€ä¸ªæ•°æ®æ¡†æˆ–ä¸€ä¸ªå‘é‡ã€‚\nä¸ºäº†è®©ä½ èƒ½å¤Ÿç¼–å†™ä½¿ç”¨ dplyr åŠ¨è¯çš„å‡½æ•°ï¼Œæˆ‘ä»¬å°†é¦–å…ˆå‘ä½ ä»‹ç»é—´æ¥æ€§ (indirection) çš„æŒ‘æˆ˜ï¼Œä»¥åŠå¦‚ä½•é€šè¿‡æ‹¥æŠ± (embracing)ï¼Œå³ {{ }} æ¥å…‹æœå®ƒã€‚æŒæ¡äº†è¿™ä¸€ç†è®ºä¹‹åï¼Œæˆ‘ä»¬å°†å‘ä½ å±•ç¤ºä¸€ç³»åˆ—ä¾‹å­ï¼Œæ¥è¯´æ˜ä½ å¯ä»¥ç”¨å®ƒåšä»€ä¹ˆã€‚\n\n25.3.1 é—´æ¥æ€§ä¸æ•´æ´æ±‚å€¼\nå½“ä½ å¼€å§‹ç¼–å†™ä½¿ç”¨ dplyr åŠ¨è¯çš„å‡½æ•°æ—¶ï¼Œä½ å¾ˆå¿«å°±ä¼šé‡åˆ°é—´æ¥æ€§é—®é¢˜ã€‚è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªéå¸¸ç®€å•çš„å‡½æ•° grouped_mean() æ¥è¯´æ˜è¿™ä¸ªé—®é¢˜ã€‚è¿™ä¸ªå‡½æ•°çš„ç›®çš„æ˜¯è®¡ç®—æŒ‰ group_var åˆ†ç»„å mean_var çš„å‡å€¼ï¼š\n\ngrouped_mean &lt;- function(df, group_var, mean_var) {\n  df |&gt; \n    group_by(group_var) |&gt; \n    summarize(mean(mean_var))\n}\n\nå¦‚æœæˆ‘ä»¬å°è¯•ä½¿ç”¨å®ƒï¼Œä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ï¼š\n\ndiamonds |&gt; grouped_mean(cut, carat)\n#&gt; Error in `group_by()`:\n#&gt; ! Must group by variables found in `.data`.\n#&gt; âœ– Column `group_var` is not found.\n\nä¸ºäº†è®©é—®é¢˜æ›´æ¸…æ™°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªè™šæ„çš„æ•°æ®æ¡†ï¼š\n\ndf &lt;- tibble(\n  mean_var = 1,\n  group_var = \"g\",\n  group = 1,\n  x = 10,\n  y = 100\n)\n\ndf |&gt; grouped_mean(group, x)\n#&gt; # A tibble: 1 Ã— 2\n#&gt;   group_var `mean(mean_var)`\n#&gt;   &lt;chr&gt;                &lt;dbl&gt;\n#&gt; 1 g                        1\ndf |&gt; grouped_mean(group, y)\n#&gt; # A tibble: 1 Ã— 2\n#&gt;   group_var `mean(mean_var)`\n#&gt;   &lt;chr&gt;                &lt;dbl&gt;\n#&gt; 1 g                        1\n\næ— è®ºæˆ‘ä»¬å¦‚ä½•è°ƒç”¨ grouped_mean()ï¼Œå®ƒæ€»æ˜¯æ‰§è¡Œ df |&gt; group_by(group_var) |&gt; summarize(mean(mean_var))ï¼Œè€Œä¸æ˜¯ df |&gt; group_by(group) |&gt; summarize(mean(x)) æˆ– df |&gt; group_by(group) |&gt; summarize(mean(y))ã€‚è¿™æ˜¯ä¸€ä¸ªé—´æ¥æ€§é—®é¢˜ï¼Œå®ƒçš„å‡ºç°æ˜¯å› ä¸º dplyr ä½¿ç”¨æ•´æ´æ±‚å€¼ (tidy evaluation) æ¥å…è®¸ä½ å¼•ç”¨æ•°æ®æ¡†å†…çš„å˜é‡åè€Œæ— éœ€ä»»ä½•ç‰¹æ®Šå¤„ç†ã€‚\næ•´æ´æ±‚å€¼åœ¨ 95% çš„æƒ…å†µä¸‹éƒ½å¾ˆæ£’ï¼Œå› ä¸ºå®ƒä½¿ä½ çš„æ•°æ®åˆ†æéå¸¸ç®€æ´ï¼Œä½ æ°¸è¿œä¸å¿…è¯´ä¸€ä¸ªå˜é‡æ¥è‡ªå“ªä¸ªæ•°æ®æ¡†ï¼›ä»ä¸Šä¸‹æ–‡ä¸­å¯ä»¥å¾ˆæ˜æ˜¾åœ°çœ‹å‡ºæ¥ã€‚æ•´æ´æ±‚å€¼çš„ç¼ºç‚¹åœ¨äºï¼Œå½“æˆ‘ä»¬æƒ³æŠŠé‡å¤çš„ tidyverse ä»£ç å°è£…æˆå‡½æ•°æ—¶ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•å‘Šè¯‰ group_by() å’Œ summarize() ä¸è¦æŠŠ group_var å’Œ mean_var å½“ä½œå˜é‡çš„å­—é¢åç§°ï¼Œè€Œæ˜¯æŸ¥çœ‹å®ƒä»¬å†…éƒ¨ï¼Œæ‰¾åˆ°æˆ‘ä»¬å®é™…æƒ³ç”¨çš„å˜é‡ã€‚\næ•´æ´æ±‚å€¼ä¸ºè¿™ä¸ªé—®é¢˜æä¾›äº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œå«åšæ‹¥æŠ± (embracing) ğŸ¤—ã€‚æ‹¥æŠ±ä¸€ä¸ªå˜é‡æ„å‘³ç€ç”¨å¤§æ‹¬å·æŠŠå®ƒåŒ…èµ·æ¥ï¼Œä¾‹å¦‚ var å˜æˆ {{ var }}ã€‚æ‹¥æŠ±ä¸€ä¸ªå˜é‡ä¼šå‘Šè¯‰ dplyr ä½¿ç”¨å­˜å‚¨åœ¨å‚æ•°å†…çš„å€¼ï¼Œè€Œä¸æ˜¯æŠŠå‚æ•°æœ¬èº«å½“ä½œå­—é¢ä¸Šçš„å˜é‡åã€‚è®°ä½æ­£åœ¨å‘ç”Ÿä»€ä¹ˆçš„ä¸€ä¸ªæ–¹æ³•æ˜¯æŠŠ {{ }} æƒ³è±¡æˆåœ¨çœ‹ä¸€æ¡éš§é“ â€” {{ var }} ä¼šè®© dplyr å‡½æ•°æŸ¥çœ‹ var çš„å†…éƒ¨ï¼Œè€Œä¸æ˜¯å¯»æ‰¾ä¸€ä¸ªåä¸º var çš„å˜é‡ã€‚\næ‰€ä»¥ï¼Œè¦è®© grouped_mean() å·¥ä½œï¼Œæˆ‘ä»¬éœ€è¦ç”¨ {{ }} æŠŠ group_var å’Œ mean_var åŒ…å›´èµ·æ¥ï¼š\n\ngrouped_mean &lt;- function(df, group_var, mean_var) {\n  df |&gt; \n    group_by({{ group_var }}) |&gt; \n    summarize(mean({{ mean_var }}))\n}\n\ndf |&gt; grouped_mean(group, x)\n#&gt; # A tibble: 1 Ã— 2\n#&gt;   group `mean(x)`\n#&gt;   &lt;dbl&gt;     &lt;dbl&gt;\n#&gt; 1     1        10\n\næˆåŠŸäº†ï¼\n\n25.3.2 ä½•æ—¶æ‹¥æŠ±ï¼Ÿ\næ‰€ä»¥ï¼Œç¼–å†™æ•°æ®æ¡†å‡½æ•°çš„å…³é”®æŒ‘æˆ˜æ˜¯å¼„æ¸…æ¥šå“ªäº›å‚æ•°éœ€è¦è¢«æ‹¥æŠ±ã€‚å¹¸è¿çš„æ˜¯ï¼Œè¿™å¾ˆå®¹æ˜“ï¼Œå› ä¸ºä½ å¯ä»¥ä»æ–‡æ¡£ä¸­æŸ¥åˆ° ğŸ˜„ã€‚åœ¨æ–‡æ¡£ä¸­æœ‰ä¸¤ä¸ªæœ¯è¯­éœ€è¦æ³¨æ„ï¼Œå®ƒä»¬å¯¹åº”äºæ•´æ´æ±‚å€¼æœ€å¸¸è§çš„ä¸¤ç§å­ç±»å‹ï¼š\n\næ•°æ®æ©ç  (Data-masking)ï¼šç”¨äºåƒ arrange()ã€filter() å’Œ summarize() è¿™æ ·ç”¨å˜é‡è¿›è¡Œè®¡ç®—çš„å‡½æ•°ä¸­ã€‚\næ•´æ´é€‰æ‹© (Tidy-selection)ï¼šç”¨äºåƒ select()ã€relocate() å’Œ rename() è¿™æ ·é€‰æ‹©å˜é‡çš„å‡½æ•°ä¸­ã€‚\n\nå¯¹äºè®¸å¤šå¸¸ç”¨å‡½æ•°ï¼Œä½ å…³äºå“ªäº›å‚æ•°ä½¿ç”¨æ•´æ´æ±‚å€¼çš„ç›´è§‰åº”è¯¥æ˜¯å‡†ç¡®çš„ â€” åªéœ€æ€è€ƒä½ æ˜¯å¦å¯ä»¥è¿›è¡Œè®¡ç®—ï¼ˆä¾‹å¦‚ï¼Œx + 1ï¼‰æˆ–é€‰æ‹©ï¼ˆä¾‹å¦‚ï¼Œa:xï¼‰ã€‚\nåœ¨æ¥ä¸‹æ¥çš„éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨ä¸€æ—¦ä½ ç†è§£äº†æ‹¥æŠ±ï¼Œä½ å¯èƒ½ä¼šç¼–å†™çš„å„ç§æ–¹ä¾¿å‡½æ•°ã€‚\n\n25.3.3 å¸¸è§ç”¨ä¾‹\nå¦‚æœä½ åœ¨è¿›è¡Œåˆæ­¥æ•°æ®æ¢ç´¢æ—¶ç»å¸¸æ‰§è¡ŒåŒä¸€ç»„æ‘˜è¦è®¡ç®—ï¼Œä½ å¯èƒ½ä¼šè€ƒè™‘å°†å®ƒä»¬å°è£…åœ¨ä¸€ä¸ªè¾…åŠ©å‡½æ•°ä¸­ï¼š\n\nsummary6 &lt;- function(data, var) {\n  data |&gt; summarize(\n    min = min({{ var }}, na.rm = TRUE),\n    mean = mean({{ var }}, na.rm = TRUE),\n    median = median({{ var }}, na.rm = TRUE),\n    max = max({{ var }}, na.rm = TRUE),\n    n = n(),\n    n_miss = sum(is.na({{ var }})),\n    .groups = \"drop\"\n  )\n}\n\ndiamonds |&gt; summary6(carat)\n#&gt; # A tibble: 1 Ã— 6\n#&gt;     min  mean median   max     n n_miss\n#&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;  &lt;int&gt;\n#&gt; 1   0.2 0.798    0.7  5.01 53940      0\n\n(æ¯å½“ä½ å°† summarize() å°è£…åœ¨ä¸€ä¸ªè¾…åŠ©å‡½æ•°ä¸­æ—¶ï¼Œæˆ‘ä»¬è®¤ä¸ºè®¾ç½® .groups = \"drop\" æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ï¼Œè¿™æ ·æ—¢å¯ä»¥é¿å…æ¶ˆæ¯æç¤ºï¼Œåˆèƒ½ä½¿æ•°æ®å¤„äºæœªåˆ†ç»„çŠ¶æ€ã€‚)\nè¿™ä¸ªå‡½æ•°çš„å¥½å¤„åœ¨äºï¼Œå› ä¸ºå®ƒå°è£…äº† summarize()ï¼Œä½ å¯ä»¥åœ¨åˆ†ç»„æ•°æ®ä¸Šä½¿ç”¨å®ƒï¼š\n\ndiamonds |&gt; \n  group_by(cut) |&gt; \n  summary6(carat)\n#&gt; # A tibble: 5 Ã— 7\n#&gt;   cut         min  mean median   max     n n_miss\n#&gt;   &lt;ord&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;  &lt;int&gt;\n#&gt; 1 Fair       0.22 1.05    1     5.01  1610      0\n#&gt; 2 Good       0.23 0.849   0.82  3.01  4906      0\n#&gt; 3 Very Good  0.2  0.806   0.71  4    12082      0\n#&gt; 4 Premium    0.2  0.892   0.86  4.01 13791      0\n#&gt; 5 Ideal      0.2  0.703   0.54  3.5  21551      0\n\næ­¤å¤–ï¼Œç”±äº summarize çš„å‚æ•°æ˜¯æ•°æ®æ©ç çš„ï¼Œæ‰€ä»¥ summary6() çš„ var å‚æ•°ä¹Ÿæ˜¯ã€‚è¿™æ„å‘³ç€ä½ ä¹Ÿå¯ä»¥å¯¹è®¡ç®—å‡ºçš„å˜é‡è¿›è¡Œæ‘˜è¦ï¼š\n\ndiamonds |&gt; \n  group_by(cut) |&gt; \n  summary6(log10(carat))\n#&gt; # A tibble: 5 Ã— 7\n#&gt;   cut          min    mean  median   max     n n_miss\n#&gt;   &lt;ord&gt;      &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;  &lt;int&gt;\n#&gt; 1 Fair      -0.658 -0.0273  0      0.700  1610      0\n#&gt; 2 Good      -0.638 -0.133  -0.0862 0.479  4906      0\n#&gt; 3 Very Good -0.699 -0.164  -0.149  0.602 12082      0\n#&gt; 4 Premium   -0.699 -0.125  -0.0655 0.603 13791      0\n#&gt; 5 Ideal     -0.699 -0.225  -0.268  0.544 21551      0\n\nè¦å¯¹å¤šä¸ªå˜é‡è¿›è¡Œæ‘˜è¦ï¼Œä½ éœ€è¦ç­‰åˆ° Section 26.2ï¼Œåœ¨é‚£é‡Œä½ å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨ across()ã€‚\nå¦ä¸€ä¸ªæµè¡Œçš„ summarize() è¾…åŠ©å‡½æ•°æ˜¯ count() çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œå®ƒä¹Ÿè®¡ç®—æ¯”ä¾‹ï¼š\n\n# https://twitter.com/Diabb6/status/1571635146658402309\ncount_prop &lt;- function(df, var, sort = FALSE) {\n  df |&gt;\n    count({{ var }}, sort = sort) |&gt;\n    mutate(prop = n / sum(n))\n}\n\ndiamonds |&gt; count_prop(clarity)\n#&gt; # A tibble: 8 Ã— 3\n#&gt;   clarity     n   prop\n#&gt;   &lt;ord&gt;   &lt;int&gt;  &lt;dbl&gt;\n#&gt; 1 I1        741 0.0137\n#&gt; 2 SI2      9194 0.170 \n#&gt; 3 SI1     13065 0.242 \n#&gt; 4 VS2     12258 0.227 \n#&gt; 5 VS1      8171 0.151 \n#&gt; 6 VVS2     5066 0.0939\n#&gt; # â„¹ 2 more rows\n\nè¿™ä¸ªå‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°ï¼šdfã€var å’Œ sortï¼Œåªæœ‰ var éœ€è¦è¢«æ‹¥æŠ±ï¼Œå› ä¸ºå®ƒè¢«ä¼ é€’ç»™ count()ï¼Œè€Œ count() å¯¹æ‰€æœ‰å˜é‡éƒ½ä½¿ç”¨æ•°æ®æ©ç ã€‚æ³¨æ„ï¼Œæˆ‘ä»¬ä¸º sort ä½¿ç”¨äº†é»˜è®¤å€¼ï¼Œè¿™æ ·å¦‚æœç”¨æˆ·ä¸æä¾›è‡ªå·±çš„å€¼ï¼Œå®ƒå°†é»˜è®¤ä¸º FALSEã€‚\næˆ–è€…ï¼Œä½ å¯èƒ½æƒ³ä¸ºæ•°æ®çš„å­é›†æ‰¾åˆ°ä¸€ä¸ªå˜é‡çš„å·²æ’åºçš„å”¯ä¸€å€¼ã€‚ä¸å…¶æä¾›ä¸€ä¸ªå˜é‡å’Œä¸€ä¸ªå€¼æ¥è¿›è¡Œç­›é€‰ï¼Œæˆ‘ä»¬å°†å…è®¸ç”¨æˆ·æä¾›ä¸€ä¸ªæ¡ä»¶ï¼š\n\nunique_where &lt;- function(df, condition, var) {\n  df |&gt; \n    filter({{ condition }}) |&gt; \n    distinct({{ var }}) |&gt; \n    arrange({{ var }})\n}\n\n# æŸ¥æ‰¾åäºŒæœˆçš„æ‰€æœ‰ç›®çš„åœ°\nflights |&gt; unique_where(month == 12, dest)\n#&gt; # A tibble: 96 Ã— 1\n#&gt;   dest \n#&gt;   &lt;chr&gt;\n#&gt; 1 ABQ  \n#&gt; 2 ALB  \n#&gt; 3 ATL  \n#&gt; 4 AUS  \n#&gt; 5 AVL  \n#&gt; 6 BDL  \n#&gt; # â„¹ 90 more rows\n\nè¿™é‡Œæˆ‘ä»¬æ‹¥æŠ± condition æ˜¯å› ä¸ºå®ƒè¢«ä¼ é€’ç»™ filter()ï¼Œæ‹¥æŠ± var æ˜¯å› ä¸ºå®ƒè¢«ä¼ é€’ç»™ distinct() å’Œ arrange()ã€‚\næˆ‘ä»¬æŠŠæ‰€æœ‰è¿™äº›ä¾‹å­éƒ½è®¾ç½®ä¸ºæ¥æ”¶ä¸€ä¸ªæ•°æ®æ¡†ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä½†å¦‚æœä½ åå¤å¤„ç†ç›¸åŒçš„æ•°æ®ï¼Œå°†å…¶ç¡¬ç¼–ç å¯èƒ½æ˜¯æœ‰æ„ä¹‰çš„ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„å‡½æ•°æ€»æ˜¯å¤„ç† flights æ•°æ®é›†ï¼Œå¹¶ä¸”æ€»æ˜¯é€‰æ‹© time_hourã€carrier å’Œ flightï¼Œå› ä¸ºå®ƒä»¬æ„æˆäº†å¯ä»¥è¯†åˆ«ä¸€è¡Œçš„å¤åˆä¸»é”®ã€‚\n\nsubset_flights &lt;- function(rows, cols) {\n  flights |&gt; \n    filter({{ rows }}) |&gt; \n    select(time_hour, carrier, flight, {{ cols }})\n}\n\n\n25.3.4 æ•°æ®æ©ç  vs.Â æ•´æ´é€‰æ‹©\næœ‰æ—¶ä½ æƒ³åœ¨ä¸€ä¸ªä½¿ç”¨æ•°æ®æ©ç çš„å‡½æ•°å†…éƒ¨é€‰æ‹©å˜é‡ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ æƒ³å†™ä¸€ä¸ª count_missing() æ¥è®¡ç®—è¡Œä¸­ç¼ºå¤±è§‚æµ‹å€¼çš„æ•°é‡ã€‚ä½ å¯èƒ½ä¼šå°è¯•å†™æˆè¿™æ ·ï¼š\n\ncount_missing &lt;- function(df, group_vars, x_var) {\n  df |&gt; \n    group_by({{ group_vars }}) |&gt; \n    summarize(\n      n_miss = sum(is.na({{ x_var }})),\n      .groups = \"drop\"\n    )\n}\n\nflights |&gt; \n  count_missing(c(year, month, day), dep_time)\n#&gt; Error in `group_by()`:\n#&gt; â„¹ In argument: `c(year, month, day)`.\n#&gt; Caused by error:\n#&gt; ! `c(year, month, day)` must be size 336776 or 1, not 1010328.\n\nè¿™ä¸èµ·ä½œç”¨ï¼Œå› ä¸º group_by() ä½¿ç”¨æ•°æ®æ©ç ï¼Œè€Œä¸æ˜¯æ•´æ´é€‰æ‹©ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨æ–¹ä¾¿çš„ pick() å‡½æ•°æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒå…è®¸ä½ åœ¨æ•°æ®æ©ç å‡½æ•°å†…éƒ¨ä½¿ç”¨æ•´æ´é€‰æ‹©ï¼š\n\ncount_missing &lt;- function(df, group_vars, x_var) {\n  df |&gt; \n    group_by(pick({{ group_vars }})) |&gt; \n    summarize(\n      n_miss = sum(is.na({{ x_var }})),\n      .groups = \"drop\"\n    )\n}\n\nflights |&gt; \n  count_missing(c(year, month, day), dep_time)\n#&gt; # A tibble: 365 Ã— 4\n#&gt;    year month   day n_miss\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;  &lt;int&gt;\n#&gt; 1  2013     1     1      4\n#&gt; 2  2013     1     2      8\n#&gt; 3  2013     1     3     10\n#&gt; 4  2013     1     4      6\n#&gt; 5  2013     1     5      3\n#&gt; 6  2013     1     6      1\n#&gt; # â„¹ 359 more rows\n\npick() çš„å¦ä¸€ä¸ªæ–¹ä¾¿ç”¨æ³•æ˜¯åˆ¶ä½œä¸€ä¸ªäºŒç»´çš„è®¡æ•°è¡¨ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ rows å’Œ columns ä¸­çš„æ‰€æœ‰å˜é‡è¿›è¡Œè®¡æ•°ï¼Œç„¶åä½¿ç”¨ pivot_wider() å°†è®¡æ•°é‡æ–°æ’åˆ—æˆä¸€ä¸ªç½‘æ ¼ï¼š\n\n# https://twitter.com/pollicipes/status/1571606508944719876\ncount_wide &lt;- function(data, rows, cols) {\n  data |&gt; \n    count(pick(c({{ rows }}, {{ cols }}))) |&gt; \n    pivot_wider(\n      names_from = {{ cols }}, \n      values_from = n,\n      names_sort = TRUE,\n      values_fill = 0\n    )\n}\n\ndiamonds |&gt; count_wide(c(clarity, color), cut)\n#&gt; # A tibble: 56 Ã— 7\n#&gt;   clarity color  Fair  Good `Very Good` Premium Ideal\n#&gt;   &lt;ord&gt;   &lt;ord&gt; &lt;int&gt; &lt;int&gt;       &lt;int&gt;   &lt;int&gt; &lt;int&gt;\n#&gt; 1 I1      D         4     8           5      12    13\n#&gt; 2 I1      E         9    23          22      30    18\n#&gt; 3 I1      F        35    19          13      34    42\n#&gt; 4 I1      G        53    19          16      46    16\n#&gt; 5 I1      H        52    14          12      46    38\n#&gt; 6 I1      I        34     9           8      24    17\n#&gt; # â„¹ 50 more rows\n\nè™½ç„¶æˆ‘ä»¬çš„ä¾‹å­ä¸»è¦é›†ä¸­åœ¨ dplyr ä¸Šï¼Œä½†æ•´æ´æ±‚å€¼ä¹Ÿæ”¯æ’‘ç€ tidyrï¼Œå¦‚æœä½ æŸ¥çœ‹ pivot_wider() çš„æ–‡æ¡£ï¼Œä½ ä¼šçœ‹åˆ° names_from ä½¿ç”¨äº†æ•´æ´é€‰æ‹©ã€‚\n\n25.3.5 ç»ƒä¹ \n\n\nä½¿ç”¨ nycflights13 ä¸­çš„æ•°æ®é›†ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼š\n\n\næ‰¾åˆ°æ‰€æœ‰è¢«å–æ¶ˆï¼ˆå³ is.na(arr_time)ï¼‰æˆ–å»¶è¯¯è¶…è¿‡ä¸€å°æ—¶çš„èˆªç­ã€‚\n\nflights |&gt; filter_severe()\n\n\n\nè®¡ç®—è¢«å–æ¶ˆçš„èˆªç­æ•°é‡å’Œå»¶è¯¯è¶…è¿‡ä¸€å°æ—¶çš„èˆªç­æ•°é‡ã€‚\n\nflights |&gt; group_by(dest) |&gt; summarize_severe()\n\n\n\næ‰¾åˆ°æ‰€æœ‰è¢«å–æ¶ˆæˆ–å»¶è¯¯è¶…è¿‡ç”¨æˆ·æä¾›çš„å°æ—¶æ•°çš„èˆªç­ï¼š\n\nflights |&gt; filter_severe(hours = 2)\n\n\n\nå¯¹å¤©æ°”è¿›è¡Œæ‘˜è¦ï¼Œè®¡ç®—ç”¨æˆ·æä¾›çš„å˜é‡çš„æœ€å°å€¼ã€å¹³å‡å€¼å’Œæœ€å¤§å€¼ï¼š\n\nweather |&gt; summarize_weather(temp)\n\n\n\nå°†ç”¨æˆ·æä¾›çš„ã€ä½¿ç”¨æ—¶é’Ÿæ—¶é—´ï¼ˆä¾‹å¦‚ dep_timeã€arr_time ç­‰ï¼‰çš„å˜é‡è½¬æ¢ä¸ºåè¿›åˆ¶æ—¶é—´ï¼ˆå³ å°æ—¶ + (åˆ†é’Ÿ / 60)ï¼‰ã€‚\n\nflights |&gt; standardize_time(sched_dep_time)\n\n\n\n\nå¯¹äºä»¥ä¸‹æ¯ä¸ªå‡½æ•°ï¼Œåˆ—å‡ºæ‰€æœ‰ä½¿ç”¨æ•´æ´æ±‚å€¼çš„å‚æ•°ï¼Œå¹¶æè¿°å®ƒä»¬æ˜¯ä½¿ç”¨æ•°æ®æ©ç è¿˜æ˜¯æ•´æ´é€‰æ‹©ï¼šdistinct()ã€count()ã€group_by()ã€rename_with()ã€slice_min()ã€slice_sample()ã€‚\n\næ³›åŒ–ä»¥ä¸‹å‡½æ•°ï¼Œä»¥ä¾¿ä½ å¯ä»¥æä¾›ä»»æ„æ•°é‡çš„å˜é‡è¿›è¡Œè®¡æ•°ã€‚\n\ncount_prop &lt;- function(df, var, sort = FALSE) {\n  df |&gt;\n    count({{ var }}, sort = sort) |&gt;\n    mutate(prop = n / sum(n))\n}",
    "crumbs": [
      "ç¼–ç¨‹",
      "<span class='chapter-number'>25</span>Â  <span class='chapter-title'>å‡½æ•°</span>"
    ]
  },
  {
    "objectID": "functions.html#ç»˜å›¾å‡½æ•°",
    "href": "functions.html#ç»˜å›¾å‡½æ•°",
    "title": "25Â  å‡½æ•°",
    "section": "\n25.4 ç»˜å›¾å‡½æ•°",
    "text": "25.4 ç»˜å›¾å‡½æ•°\nä½ å¯èƒ½æƒ³è¦è¿”å›ä¸€ä¸ªç»˜å›¾ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ•°æ®æ¡†ã€‚å¹¸è¿çš„æ˜¯ï¼Œä½ å¯ä»¥åœ¨ ggplot2 ä¸­ä½¿ç”¨ç›¸åŒçš„æŠ€æœ¯ï¼Œå› ä¸º aes() æ˜¯ä¸€ä¸ªæ•°æ®æ©ç å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œæƒ³è±¡ä½ æ­£åœ¨åˆ¶ä½œå¾ˆå¤šç›´æ–¹å›¾ï¼š\n\ndiamonds |&gt; \n  ggplot(aes(x = carat)) +\n  geom_histogram(binwidth = 0.1)\n\ndiamonds |&gt; \n  ggplot(aes(x = carat)) +\n  geom_histogram(binwidth = 0.05)\n\nå¦‚æœä½ èƒ½æŠŠè¿™ä¸ªå°è£…æˆä¸€ä¸ªç›´æ–¹å›¾å‡½æ•°ï¼Œé‚£ä¸æ˜¯å¾ˆå¥½å—ï¼Ÿä¸€æ—¦ä½ çŸ¥é“ aes() æ˜¯ä¸€ä¸ªæ•°æ®æ©ç å‡½æ•°å¹¶ä¸”ä½ éœ€è¦æ‹¥æŠ±ï¼Œè¿™å°±æ˜“å¦‚åæŒäº†ï¼š\n\nhistogram &lt;- function(df, var, binwidth = NULL) {\n  df |&gt; \n    ggplot(aes(x = {{ var }})) + \n    geom_histogram(binwidth = binwidth)\n}\n\ndiamonds |&gt; histogram(carat, 0.1)\n\n\n\n\n\n\n\nè¯·æ³¨æ„ï¼Œhistogram() è¿”å›ä¸€ä¸ª ggplot2 ç»˜å›¾å¯¹è±¡ï¼Œè¿™æ„å‘³ç€ä½ ä»ç„¶å¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ å…¶ä»–ç»„ä»¶ã€‚åªéœ€è®°ä½ä» |&gt; åˆ‡æ¢åˆ° +ï¼š\n\ndiamonds |&gt; \n  histogram(carat, 0.1) +\n  labs(x = \"Size (in carats)\", y = \"Number of diamonds\")\n\n\n25.4.1 æ›´å¤šå˜é‡\nå°†æ›´å¤šå˜é‡åŠ å…¥è¿›æ¥ä¹Ÿå¾ˆç›´æ¥ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½æƒ³é€šè¿‡å åŠ ä¸€æ¡å¹³æ»‘æ›²çº¿å’Œä¸€æ¡ç›´çº¿æ¥è½»æ¾åœ°ç›®æµ‹ä¸€ä¸ªæ•°æ®é›†æ˜¯å¦æ˜¯çº¿æ€§çš„ï¼š\n\n# https://twitter.com/tyler_js_smith/status/1574377116988104704\nlinearity_check &lt;- function(df, x, y) {\n  df |&gt;\n    ggplot(aes(x = {{ x }}, y = {{ y }})) +\n    geom_point() +\n    geom_smooth(method = \"loess\", formula = y ~ x, color = \"red\", se = FALSE) +\n    geom_smooth(method = \"lm\", formula = y ~ x, color = \"blue\", se = FALSE) \n}\n\nstarwars |&gt; \n  filter(mass &lt; 1000) |&gt; \n  linearity_check(mass, height)\n\n\n\n\n\n\n\næˆ–è€…ï¼Œå¯¹äºç‚¹é‡å é—®é¢˜ä¸¥é‡çš„å¤§å‹æ•°æ®é›†ï¼Œä½ å¯èƒ½æƒ³è¦ä¸€ç§æ›¿ä»£å½©è‰²æ•£ç‚¹å›¾çš„æ–¹æ³•ï¼š\n\n# https://twitter.com/ppaxisa/status/1574398423175921665\nhex_plot &lt;- function(df, x, y, z, bins = 20, fun = \"mean\") {\n  df |&gt; \n    ggplot(aes(x = {{ x }}, y = {{ y }}, z = {{ z }})) + \n    stat_summary_hex(\n      aes(color = after_scale(fill)), # ä½¿è¾¹æ¡†é¢œè‰²ä¸å¡«å……è‰²ç›¸åŒ\n      bins = bins, \n      fun = fun,\n    )\n}\n\ndiamonds |&gt; hex_plot(carat, price, depth)\n\n\n\n\n\n\n\n\n25.4.2 ä¸å…¶ä»– tidyverse åŠŸèƒ½ç»“åˆ\nä¸€äº›æœ€æœ‰ç”¨çš„è¾…åŠ©å‡½æ•°æ˜¯å°†å°‘é‡æ•°æ®æ“ä½œä¸ ggplot2 ç»“åˆèµ·æ¥ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½æƒ³åˆ¶ä½œä¸€ä¸ªå‚ç›´æ¡å½¢å›¾ï¼Œå¹¶ä½¿ç”¨ fct_infreq() è‡ªåŠ¨æŒ‰é¢‘ç‡é¡ºåºå¯¹æ¡å½¢è¿›è¡Œæ’åºã€‚ç”±äºæ¡å½¢å›¾æ˜¯å‚ç›´çš„ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åè½¬é€šå¸¸çš„é¡ºåºï¼Œä»¥ä½¿æœ€é«˜çš„å€¼åœ¨é¡¶éƒ¨ï¼š\n\nsorted_bars &lt;- function(df, var) {\n  df |&gt; \n    mutate({{ var }} := fct_rev(fct_infreq({{ var }})))  |&gt;\n    ggplot(aes(y = {{ var }})) +\n    geom_bar()\n}\n\ndiamonds |&gt; sorted_bars(clarity)\n\n\n\n\n\n\n\nè¿™é‡Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨ä¸€ä¸ªæ–°çš„æ“ä½œç¬¦ :=ï¼ˆé€šå¸¸è¢«ç§°ä¸ºâ€œæµ·è±¡æ“ä½œç¬¦â€ï¼‰ï¼Œå› ä¸ºæˆ‘ä»¬æ­£åœ¨æ ¹æ®ç”¨æˆ·æä¾›çš„æ•°æ®ç”Ÿæˆå˜é‡åã€‚å˜é‡åé€šå¸¸æ”¾åœ¨ = çš„å·¦ä¾§ï¼Œä½† R çš„è¯­æ³•ä¸å…è®¸åœ¨ = çš„å·¦ä¾§æœ‰é™¤äº†å•ä¸ªå­—é¢åç§°ä¹‹å¤–çš„ä»»ä½•ä¸œè¥¿ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä½¿ç”¨ç‰¹æ®Šçš„æ“ä½œç¬¦ :=ï¼Œæ•´æ´æ±‚å€¼ä¼šå°†å…¶ä¸ = å®Œå…¨ç›¸åŒåœ°å¯¹å¾…ã€‚\næˆ–è€…ï¼Œä½ å¯èƒ½æƒ³æ–¹ä¾¿åœ°ä¸ºæ•°æ®çš„æŸä¸ªå­é›†ç»˜åˆ¶æ¡å½¢å›¾ï¼š\n\nconditional_bars &lt;- function(df, condition, var) {\n  df |&gt; \n    filter({{ condition }}) |&gt; \n    ggplot(aes(x = {{ var }})) + \n    geom_bar()\n}\n\ndiamonds |&gt; conditional_bars(cut == \"Good\", clarity)\n\n\n\n\n\n\n\nä½ ä¹Ÿå¯ä»¥å‘æŒ¥åˆ›æ„ï¼Œç”¨å…¶ä»–æ–¹å¼å±•ç¤ºæ•°æ®æ‘˜è¦ã€‚ä½ å¯ä»¥åœ¨ https://gist.github.com/GShotwell/b19ef520b6d56f61a830fabb3454965b æ‰¾åˆ°ä¸€ä¸ªå¾ˆé…·çš„åº”ç”¨ï¼›å®ƒä½¿ç”¨åæ ‡è½´æ ‡ç­¾æ¥æ˜¾ç¤ºæœ€é«˜å€¼ã€‚éšç€ä½ å¯¹ ggplot2 çš„äº†è§£è¶Šæ¥è¶Šå¤šï¼Œä½ å‡½æ•°çš„åŠŸèƒ½ä¹Ÿä¼šä¸æ–­å¢å¼ºã€‚\næˆ‘ä»¬ä»¥ä¸€ä¸ªæ›´å¤æ‚çš„ä¾‹å­æ¥ç»“æŸï¼šä¸ºä½ åˆ›å»ºçš„å›¾è¡¨æ·»åŠ æ ‡ç­¾ã€‚\n\n25.4.3 æ ‡ç­¾\nè¿˜è®°å¾—æˆ‘ä»¬ä¹‹å‰ç»™ä½ çœ‹çš„ç›´æ–¹å›¾å‡½æ•°å—ï¼Ÿ\n\nhistogram &lt;- function(df, var, binwidth = NULL) {\n  df |&gt; \n    ggplot(aes(x = {{ var }})) + \n    geom_histogram(binwidth = binwidth)\n}\n\nå¦‚æœæˆ‘ä»¬èƒ½ç”¨æ‰€ä½¿ç”¨çš„å˜é‡å’Œç»„è·æ¥æ ‡è®°è¾“å‡ºï¼Œé‚£ä¸æ˜¯å¾ˆå¥½å—ï¼Ÿä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä¸å¾—ä¸æ·±å…¥äº†è§£æ•´æ´æ±‚å€¼çš„åº•å±‚ï¼Œå¹¶ä½¿ç”¨ä¸€ä¸ªæˆ‘ä»¬å°šæœªæåŠçš„åŒ…ä¸­çš„å‡½æ•°ï¼šrlangã€‚rlang æ˜¯ä¸€ä¸ªä½çº§åŒ…ï¼Œå‡ ä¹ tidyverse ä¸­çš„æ‰€æœ‰å…¶ä»–åŒ…éƒ½åœ¨ä½¿ç”¨å®ƒï¼Œå› ä¸ºå®ƒå®ç°äº†æ•´æ´æ±‚å€¼ï¼ˆä»¥åŠè®¸å¤šå…¶ä»–æœ‰ç”¨çš„å·¥å…·ï¼‰ã€‚\nä¸ºäº†è§£å†³æ ‡ç­¾é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ rlang::englue()ã€‚å®ƒçš„å·¥ä½œæ–¹å¼ç±»ä¼¼äº str_glue()ï¼Œæ‰€ä»¥ä»»ä½•ç”¨ { } åŒ…è£¹çš„å€¼éƒ½å°†è¢«æ’å…¥åˆ°å­—ç¬¦ä¸²ä¸­ã€‚ä½†å®ƒä¹Ÿç†è§£ {{ }}ï¼Œå®ƒä¼šè‡ªåŠ¨æ’å…¥é€‚å½“çš„å˜é‡åï¼š\n\nhistogram &lt;- function(df, var, binwidth) {\n  label &lt;- rlang::englue(\"A histogram of {{var}} with binwidth {binwidth}\")\n  \n  df |&gt; \n    ggplot(aes(x = {{ var }})) + \n    geom_histogram(binwidth = binwidth) + \n    labs(title = label)\n}\n\ndiamonds |&gt; histogram(carat, 0.1)\n\n\n\n\n\n\n\nä½ å¯ä»¥åœ¨ ggplot2 å›¾ä¸­ä»»ä½•æƒ³æä¾›å­—ç¬¦ä¸²çš„åœ°æ–¹ä½¿ç”¨åŒæ ·çš„æ–¹æ³•ã€‚\n\n25.4.4 ç»ƒä¹ \né€šè¿‡é€æ­¥å®ç°ä»¥ä¸‹æ¯ä¸ªæ­¥éª¤ï¼Œæ„å»ºä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„ç»˜å›¾å‡½æ•°ï¼š\n\nç»™å®šæ•°æ®é›†ä»¥åŠ x å’Œ y å˜é‡ï¼Œç»˜åˆ¶ä¸€ä¸ªæ•£ç‚¹å›¾ã€‚\næ·»åŠ ä¸€æ¡æœ€ä½³æ‹Ÿåˆçº¿ï¼ˆå³æ²¡æœ‰æ ‡å‡†è¯¯å·®çš„çº¿æ€§æ¨¡å‹ï¼‰ã€‚\næ·»åŠ ä¸€ä¸ªæ ‡é¢˜ã€‚",
    "crumbs": [
      "ç¼–ç¨‹",
      "<span class='chapter-number'>25</span>Â  <span class='chapter-title'>å‡½æ•°</span>"
    ]
  },
  {
    "objectID": "functions.html#é£æ ¼",
    "href": "functions.html#é£æ ¼",
    "title": "25Â  å‡½æ•°",
    "section": "\n25.5 é£æ ¼",
    "text": "25.5 é£æ ¼\nR ä¸åœ¨ä¹ä½ çš„å‡½æ•°æˆ–å‚æ•°å«ä»€ä¹ˆåå­—ï¼Œä½†è¿™äº›åå­—å¯¹äººç±»æ¥è¯´å´æœ‰å¾ˆå¤§çš„ä¸åŒã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œä½ çš„å‡½æ•°ååº”è¯¥ç®€çŸ­ï¼Œä½†èƒ½æ¸…æ™°åœ°å”¤èµ·å‡½æ•°çš„åŠŸèƒ½ã€‚è¿™å¾ˆéš¾ï¼ä½†æ¸…æ™°æ¯”ç®€çŸ­æ›´å¥½ï¼Œå› ä¸º RStudio çš„è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ä½¿å¾—è¾“å…¥é•¿åç§°å˜å¾—å®¹æ˜“ã€‚\né€šå¸¸ï¼Œå‡½æ•°ååº”è¯¥æ˜¯åŠ¨è¯ï¼Œå‚æ•°åº”è¯¥æ˜¯åè¯ã€‚ä¹Ÿæœ‰ä¸€äº›ä¾‹å¤–ï¼šå¦‚æœå‡½æ•°è®¡ç®—çš„æ˜¯ä¸€ä¸ªéå¸¸ä¼—æ‰€å‘¨çŸ¥çš„åè¯ï¼ˆå³ mean() æ¯” compute_mean() å¥½ï¼‰ï¼Œæˆ–è€…è®¿é—®å¯¹è±¡çš„æŸä¸ªå±æ€§ï¼ˆå³ coef() æ¯” get_coefficients() å¥½ï¼‰ï¼Œé‚£ä¹ˆåè¯ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚è¿ç”¨ä½ çš„æœ€ä½³åˆ¤æ–­ï¼Œå¦‚æœä»¥åæƒ³åˆ°äº†æ›´å¥½çš„åå­—ï¼Œä¸è¦å®³æ€•é‡å‘½åå‡½æ•°ã€‚\n\n# å¤ªçŸ­\nf()\n\n# ä¸æ˜¯åŠ¨è¯ï¼Œæˆ–ä¸å…·æè¿°æ€§\nmy_awesome_function()\n\n# é•¿ï¼Œä½†æ¸…æ™°\nimpute_missing()\ncollapse_years()\n\nR ä¹Ÿä¸åœ¨ä¹ä½ åœ¨å‡½æ•°ä¸­å¦‚ä½•ä½¿ç”¨ç©ºç™½ï¼Œä½†æœªæ¥çš„è¯»è€…ä¼šåœ¨ä¹ã€‚è¯·ç»§ç»­éµå¾ª Chapter 4 ä¸­çš„è§„åˆ™ã€‚æ­¤å¤–ï¼Œfunction() åé¢åº”å§‹ç»ˆè·Ÿç€èŠ±æ‹¬å· ({})ï¼Œå¹¶ä¸”å†…å®¹åº”è¯¥é¢å¤–ç¼©è¿›ä¸¤ä¸ªç©ºæ ¼ã€‚è¿™æ ·é€šè¿‡æ‰«è§†å·¦è¾¹è·ï¼Œå¯ä»¥æ›´å®¹æ˜“åœ°çœ‹åˆ°ä»£ç çš„å±‚æ¬¡ç»“æ„ã€‚\n\n# ç¼ºå°‘é¢å¤–çš„ä¸¤ä¸ªç©ºæ ¼\ndensity &lt;- function(color, facets, binwidth = 0.1) {\ndiamonds |&gt; \n  ggplot(aes(x = carat, y = after_stat(density), color = {{ color }})) +\n  geom_freqpoly(binwidth = binwidth) +\n  facet_wrap(vars({{ facets }}))\n}\n\n# ç®¡é“ç¼©è¿›ä¸æ­£ç¡®\ndensity &lt;- function(color, facets, binwidth = 0.1) {\n  diamonds |&gt; \n  ggplot(aes(x = carat, y = after_stat(density), color = {{ color }})) +\n  geom_freqpoly(binwidth = binwidth) +\n  facet_wrap(vars({{ facets }}))\n}\n\nå¦‚ä½ æ‰€è§ï¼Œæˆ‘ä»¬å»ºè®®åœ¨ {{ }} å†…éƒ¨å¤šåŠ ä¸€äº›ç©ºæ ¼ã€‚è¿™ä½¿å¾—æœ‰ä¸å¯»å¸¸çš„äº‹æƒ…å‘ç”Ÿå˜å¾—éå¸¸æ˜æ˜¾ã€‚\n\n25.5.1 ç»ƒä¹ \n\n\né˜…è¯»ä»¥ä¸‹ä¸¤ä¸ªå‡½æ•°çš„æºä»£ç ï¼Œå¼„æ¸…æ¥šå®ƒä»¬çš„ä½œç”¨ï¼Œç„¶åé›†æ€å¹¿ç›Šæƒ³å‡ºæ›´å¥½çš„åå­—ã€‚\n\nf1 &lt;- function(string, prefix) {\n  str_sub(string, 1, str_length(prefix)) == prefix\n}\n\nf3 &lt;- function(x, y) {\n  rep(y, length.out = length(x))\n}\n\n\næ‰¾ä¸€ä¸ªä½ æœ€è¿‘å†™çš„å‡½æ•°ï¼ŒèŠ± 5 åˆ†é’Ÿä¸ºå®ƒå’Œå®ƒçš„å‚æ•°æƒ³ä¸€ä¸ªæ›´å¥½çš„åå­—ã€‚\nè®ºè¯ä¸ºä»€ä¹ˆ norm_r()ã€norm_d() ç­‰ä¼šæ¯” rnorm()ã€dnorm() æ›´å¥½ã€‚å†è®ºè¯ç›¸åçš„è§‚ç‚¹ã€‚ä½ å¦‚ä½•èƒ½è®©è¿™äº›åå­—æ›´æ¸…æ™°ï¼Ÿ",
    "crumbs": [
      "ç¼–ç¨‹",
      "<span class='chapter-number'>25</span>Â  <span class='chapter-title'>å‡½æ•°</span>"
    ]
  },
  {
    "objectID": "functions.html#å°ç»“",
    "href": "functions.html#å°ç»“",
    "title": "25Â  å‡½æ•°",
    "section": "\n25.6 å°ç»“",
    "text": "25.6 å°ç»“\nåœ¨æœ¬ç« ä¸­ï¼Œä½ å­¦ä¹ äº†å¦‚ä½•ä¸ºä¸‰ç§æœ‰ç”¨çš„åœºæ™¯ç¼–å†™å‡½æ•°ï¼šåˆ›å»ºå‘é‡ã€åˆ›å»ºæ•°æ®æ¡†æˆ–åˆ›å»ºç»˜å›¾ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œä½ çœ‹åˆ°äº†è®¸å¤šä¾‹å­ï¼Œå¸Œæœ›è¿™äº›ä¾‹å­èƒ½æ¿€å‘ä½ çš„åˆ›é€ åŠ›ï¼Œå¹¶ä¸ºä½ æä¾›ä¸€äº›å…³äºå‡½æ•°å¦‚ä½•å¸®åŠ©ä½ çš„åˆ†æä»£ç çš„æƒ³æ³•ã€‚\næˆ‘ä»¬åªå‘ä½ å±•ç¤ºäº†å‡½æ•°å…¥é—¨çš„æœ€ä½è¦æ±‚ï¼Œè¿˜æœ‰æ›´å¤šå†…å®¹éœ€è¦å­¦ä¹ ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¯ä»¥æ·±å…¥å­¦ä¹ çš„åœ°æ–¹ï¼š\n\nè¦äº†è§£æ›´å¤šå…³äºä½¿ç”¨æ•´æ´æ±‚å€¼ç¼–ç¨‹çš„çŸ¥è¯†ï¼Œè¯·å‚é˜… programming with dplyr å’Œ programming with tidyr ä¸­çš„æœ‰ç”¨ç§˜ç±ï¼Œå¹¶åœ¨ What is data-masking and why do I need {{? ä¸­å­¦ä¹ æ›´å¤šç†è®ºçŸ¥è¯†ã€‚\nè¦äº†è§£æ›´å¤šå…³äºå‡å°‘ ggplot2 ä»£ç é‡å¤çš„çŸ¥è¯†ï¼Œè¯·é˜…è¯» ggplot2 ä¹¦ç±çš„ Programming with ggplot2 ç« èŠ‚ã€‚\næœ‰å…³å‡½æ•°é£æ ¼çš„æ›´å¤šå»ºè®®ï¼Œè¯·å‚é˜… tidyverse é£æ ¼æŒ‡å—ã€‚\n\nåœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨è¿­ä»£ï¼Œå®ƒä¸ºä½ æä¾›äº†è¿›ä¸€æ­¥å‡å°‘ä»£ç é‡å¤çš„å·¥å…·ã€‚",
    "crumbs": [
      "ç¼–ç¨‹",
      "<span class='chapter-number'>25</span>Â  <span class='chapter-title'>å‡½æ•°</span>"
    ]
  },
  {
    "objectID": "iteration.html",
    "href": "iteration.html",
    "title": "26Â  è¿­ä»£",
    "section": "",
    "text": "26.1 å¼•è¨€\nåœ¨æœ¬ç« ä¸­ï¼Œä½ å°†å­¦ä¹ è¿­ä»£çš„å·¥å…·ï¼Œå³åœ¨ä¸åŒå¯¹è±¡ä¸Šé‡å¤æ‰§è¡Œç›¸åŒçš„æ“ä½œã€‚R è¯­è¨€ä¸­çš„è¿­ä»£é€šå¸¸çœ‹èµ·æ¥ä¸å…¶ä»–ç¼–ç¨‹è¯­è¨€å¤§ç›¸å¾„åº­ï¼Œå› ä¸ºå¾ˆå¤šè¿­ä»£æ˜¯éšå¼çš„ï¼Œæˆ‘ä»¬å¯ä»¥å…è´¹è·å¾—ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³åœ¨ R ä¸­å°†ä¸€ä¸ªæ•°å€¼å‘é‡ x çš„æ¯ä¸ªå…ƒç´ éƒ½ä¹˜ä»¥ 2ï¼Œä½ åªéœ€å†™ 2 * xã€‚åœ¨å¤§å¤šæ•°å…¶ä»–è¯­è¨€ä¸­ï¼Œä½ éœ€è¦ä½¿ç”¨æŸç§ for å¾ªç¯æ¥æ˜¾å¼åœ°å°† x çš„æ¯ä¸ªå…ƒç´ ä¹˜ä»¥ 2ã€‚\næœ¬ä¹¦å·²ç»ä¸ºä½ æä¾›äº†ä¸€äº›å°è€Œå¼ºå¤§çš„å·¥å…·ï¼Œå¯ä»¥å¯¹å¤šä¸ªâ€œäº‹ç‰©â€æ‰§è¡Œç›¸åŒçš„æ“ä½œï¼š\nç°åœ¨æ˜¯æ—¶å€™å­¦ä¹ ä¸€äº›æ›´é€šç”¨çš„å·¥å…·äº†ï¼Œè¿™äº›å·¥å…·é€šå¸¸è¢«ç§°ä¸º å‡½æ•°å¼ç¼–ç¨‹ (functional programming) å·¥å…·ï¼Œå› ä¸ºå®ƒä»¬æ˜¯å›´ç»•ç€æ¥æ”¶å…¶ä»–å‡½æ•°ä½œä¸ºè¾“å…¥çš„å‡½æ•°æ„å»ºçš„ã€‚å­¦ä¹ å‡½æ•°å¼ç¼–ç¨‹å¾ˆå®¹æ˜“å˜å¾—æŠ½è±¡ï¼Œä½†åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†é€šè¿‡å…³æ³¨ä¸‰ä¸ªå¸¸è§çš„ä»»åŠ¡æ¥ä¿æŒå…·ä½“ï¼šä¿®æ”¹å¤šä¸ªåˆ—ã€è¯»å–å¤šä¸ªæ–‡ä»¶å’Œä¿å­˜å¤šä¸ªå¯¹è±¡ã€‚",
    "crumbs": [
      "ç¼–ç¨‹",
      "<span class='chapter-number'>26</span>Â  <span class='chapter-title'>è¿­ä»£</span>"
    ]
  },
  {
    "objectID": "iteration.html#å¼•è¨€",
    "href": "iteration.html#å¼•è¨€",
    "title": "26Â  è¿­ä»£",
    "section": "",
    "text": "facet_wrap() å’Œ facet_grid() ä¸ºæ¯ä¸ªå­é›†ç»˜åˆ¶ä¸€å¹…å›¾ã€‚\n\ngroup_by() åŠ ä¸Š summarize() ä¸ºæ¯ä¸ªå­é›†è®¡ç®—æ±‡æ€»ç»Ÿè®¡é‡ã€‚\n\nunnest_wider() å’Œ unnest_longer() ä¸ºåˆ—è¡¨åˆ—çš„æ¯ä¸ªå…ƒç´ åˆ›å»ºæ–°çš„è¡Œå’Œåˆ—ã€‚\n\n\n\n26.1.1 å…ˆå†³æ¡ä»¶\nåœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†é‡ç‚¹å…³æ³¨ dplyr å’Œ purrr æä¾›çš„å·¥å…·ï¼Œå®ƒä»¬éƒ½æ˜¯ tidyverse çš„æ ¸å¿ƒæˆå‘˜ã€‚ä½ ä¹‹å‰å·²ç»è§è¿‡ dplyrï¼Œä½† purrr æ˜¯æ–°å†…å®¹ã€‚æœ¬ç« æˆ‘ä»¬åªä¼šä½¿ç”¨å‡ ä¸ª purrr å‡½æ•°ï¼Œä½†éšç€ä½ ç¼–ç¨‹æŠ€èƒ½çš„æé«˜ï¼Œå®ƒæ˜¯ä¸€ä¸ªå€¼å¾—æ¢ç´¢çš„ä¼˜ç§€åŒ…ã€‚\n\nlibrary(tidyverse)",
    "crumbs": [
      "ç¼–ç¨‹",
      "<span class='chapter-number'>26</span>Â  <span class='chapter-title'>è¿­ä»£</span>"
    ]
  },
  {
    "objectID": "iteration.html#sec-across",
    "href": "iteration.html#sec-across",
    "title": "26Â  è¿­ä»£",
    "section": "\n26.2 ä¿®æ”¹å¤šä¸ªåˆ—",
    "text": "26.2 ä¿®æ”¹å¤šä¸ªåˆ—\nå‡è®¾ä½ æœ‰ä¸‹é¢è¿™ä¸ªç®€å•çš„ tibbleï¼Œå¹¶ä¸”ä½ æƒ³è®¡ç®—è§‚æµ‹å€¼çš„æ•°é‡å¹¶è®¡ç®—æ¯ä¸€åˆ—çš„ä¸­ä½æ•°ã€‚\n\ndf &lt;- tibble(\n  a = rnorm(10),\n  b = rnorm(10),\n  c = rnorm(10),\n  d = rnorm(10)\n)\n\nä½ å¯ä»¥é€šè¿‡å¤åˆ¶ç²˜è´´æ¥å®Œæˆï¼š\n\ndf |&gt; summarize(\n  n = n(),\n  a = median(a),\n  b = median(b),\n  c = median(c),\n  d = median(d),\n)\n#&gt; # A tibble: 1 Ã— 5\n#&gt;       n      a      b       c     d\n#&gt;   &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1    10 -0.246 -0.287 -0.0567 0.144\n\nè¿™è¿åäº†æˆ‘ä»¬â€œç»ä¸å¤åˆ¶ç²˜è´´è¶…è¿‡ä¸¤æ¬¡â€çš„ç»éªŒæ³•åˆ™ï¼Œè€Œä¸”ä½ å¯ä»¥æƒ³è±¡ï¼Œå¦‚æœä½ æœ‰å‡ åç”šè‡³ä¸Šç™¾åˆ—ï¼Œè¿™å°†å˜å¾—éå¸¸ç¹çã€‚ç›¸åï¼Œä½ å¯ä»¥ä½¿ç”¨ across()ï¼š\n\ndf |&gt; summarize(\n  n = n(),\n  across(a:d, median),\n)\n#&gt; # A tibble: 1 Ã— 5\n#&gt;       n      a      b       c     d\n#&gt;   &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1    10 -0.246 -0.287 -0.0567 0.144\n\nacross() æœ‰ä¸‰ä¸ªç‰¹åˆ«é‡è¦çš„å‚æ•°ï¼Œæˆ‘ä»¬å°†åœ¨æ¥ä¸‹æ¥çš„éƒ¨åˆ†ä¸­è¯¦ç»†è®¨è®ºã€‚æ¯æ¬¡ä½¿ç”¨ across() æ—¶ï¼Œä½ éƒ½ä¼šç”¨åˆ°å‰ä¸¤ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªå‚æ•° .cols æŒ‡å®šäº†ä½ æƒ³è¦è¿­ä»£çš„åˆ—ï¼Œç¬¬äºŒä¸ªå‚æ•° .fns æŒ‡å®šäº†å¦‚ä½•å¤„ç†æ¯ä¸€åˆ—ã€‚å½“ä½ éœ€è¦å¯¹è¾“å‡ºåˆ—çš„åç§°è¿›è¡Œé¢å¤–æ§åˆ¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ .names å‚æ•°ï¼Œè¿™åœ¨ä½¿ç”¨ across() é…åˆ mutate() æ—¶å°¤å…¶é‡è¦ã€‚æˆ‘ä»¬è¿˜å°†è®¨è®ºä¸¤ä¸ªé‡è¦çš„å˜ä½“ï¼Œif_any() å’Œ if_all()ï¼Œå®ƒä»¬ä¸ filter() ä¸€èµ·å·¥ä½œã€‚\n\n26.2.1 ä½¿ç”¨ .cols é€‰æ‹©åˆ—\nacross() çš„ç¬¬ä¸€ä¸ªå‚æ•° .cols ç”¨äºé€‰æ‹©è¦è½¬æ¢çš„åˆ—ã€‚è¿™ä¸ select() ä½¿ç”¨ç›¸åŒçš„è§„èŒƒï¼Œè¯¦è§ Section 3.3.2ï¼Œå› æ­¤ä½ å¯ä»¥ä½¿ç”¨åƒ starts_with() å’Œ ends_with() è¿™æ ·çš„å‡½æ•°æ¥æ ¹æ®åˆ—åé€‰æ‹©åˆ—ã€‚\nè¿˜æœ‰ä¸¤ç§å¯¹ across() ç‰¹åˆ«æœ‰ç”¨çš„é€‰æ‹©æŠ€æœ¯ï¼ševerything() å’Œ where()ã€‚everything() å¾ˆç›´æ¥ï¼šå®ƒé€‰æ‹©æ‰€æœ‰ï¼ˆéåˆ†ç»„ï¼‰åˆ—ï¼š\n\ndf &lt;- tibble(\n  grp = sample(2, 10, replace = TRUE),\n  a = rnorm(10),\n  b = rnorm(10),\n  c = rnorm(10),\n  d = rnorm(10)\n)\n\ndf |&gt; \n  group_by(grp) |&gt; \n  summarize(across(everything(), median))\n#&gt; # A tibble: 2 Ã— 5\n#&gt;     grp       a       b     c     d\n#&gt;   &lt;int&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1     1 -0.0935 -0.0163 0.363 0.364\n#&gt; 2     2  0.312  -0.0576 0.208 0.565\n\næ³¨æ„ï¼Œåˆ†ç»„åˆ—ï¼ˆè¿™é‡Œæ˜¯ grpï¼‰ä¸åŒ…å«åœ¨ across() çš„é€‰æ‹©èŒƒå›´å†…ï¼Œå› ä¸ºå®ƒä»¬ä¼šè¢« summarize() è‡ªåŠ¨ä¿ç•™ã€‚\nwhere() å…è®¸ä½ æ ¹æ®åˆ—çš„ç±»å‹æ¥é€‰æ‹©åˆ—ï¼š\n\n\nwhere(is.numeric) é€‰æ‹©æ‰€æœ‰æ•°å€¼åˆ—ã€‚\n\nwhere(is.character) é€‰æ‹©æ‰€æœ‰å­—ç¬¦ä¸²åˆ—ã€‚\n\nwhere(is.Date) é€‰æ‹©æ‰€æœ‰æ—¥æœŸåˆ—ã€‚\n\nwhere(is.POSIXct) é€‰æ‹©æ‰€æœ‰æ—¥æœŸæ—¶é—´åˆ—ã€‚\n\nwhere(is.logical) é€‰æ‹©æ‰€æœ‰é€»è¾‘åˆ—ã€‚\n\nå°±åƒå…¶ä»–é€‰æ‹©å™¨ä¸€æ ·ï¼Œä½ å¯ä»¥å°†å®ƒä»¬ä¸å¸ƒå°”ä»£æ•°ç»“åˆèµ·æ¥ã€‚ä¾‹å¦‚ï¼Œ!where(is.numeric) é€‰æ‹©æ‰€æœ‰éæ•°å€¼åˆ—ï¼Œè€Œ starts_with(\"a\") & where(is.logical) é€‰æ‹©æ‰€æœ‰åç§°ä»¥ â€œaâ€ å¼€å¤´çš„é€»è¾‘åˆ—ã€‚\n\n26.2.2 è°ƒç”¨å•ä¸ªå‡½æ•°\nacross() çš„ç¬¬äºŒä¸ªå‚æ•°å®šä¹‰äº†æ¯ä¸€åˆ—å°†å¦‚ä½•è¢«è½¬æ¢ã€‚åœ¨ç®€å•çš„æƒ…å†µä¸‹ï¼Œå¦‚ä¸Šæ‰€ç¤ºï¼Œè¿™å°†æ˜¯ä¸€ä¸ªç°æœ‰çš„å‡½æ•°ã€‚è¿™æ˜¯ R çš„ä¸€ä¸ªå¾ˆç‰¹åˆ«çš„ç‰¹æ€§ï¼šæˆ‘ä»¬å°†ä¸€ä¸ªå‡½æ•°ï¼ˆmedianã€meanã€str_flatten ç­‰ï¼‰ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼ˆacrossï¼‰ã€‚è¿™æ˜¯ä½¿ R æˆä¸ºä¸€é—¨å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€çš„ç‰¹æ€§ä¹‹ä¸€ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬æ˜¯å°†è¿™ä¸ªå‡½æ•°ä¼ é€’ç»™ across()ï¼Œä»¥ä¾¿ across() å¯ä»¥è°ƒç”¨å®ƒï¼›æˆ‘ä»¬ä¸æ˜¯è‡ªå·±è°ƒç”¨å®ƒã€‚è¿™æ„å‘³ç€å‡½æ•°ååé¢ä¸åº”è¯¥æœ‰ ()ã€‚å¦‚æœä½ å¿˜äº†è¿™ä¸€ç‚¹ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ï¼š\n\ndf |&gt; \n  group_by(grp) |&gt; \n  summarize(across(everything(), median()))\n#&gt; Error in `summarize()`:\n#&gt; â„¹ In argument: `across(everything(), median())`.\n#&gt; Caused by error in `median.default()`:\n#&gt; ! argument \"x\" is missing, with no default\n\nè¿™ä¸ªé”™è¯¯æ˜¯å› ä¸ºä½ è°ƒç”¨å‡½æ•°æ—¶æ²¡æœ‰æä¾›è¾“å…¥ï¼Œä¾‹å¦‚ï¼š\n\nmedian()\n#&gt; Error in median.default(): argument \"x\" is missing, with no default\n\n\n26.2.3 è°ƒç”¨å¤šä¸ªå‡½æ•°\nåœ¨æ›´å¤æ‚çš„æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½æƒ³è¦æä¾›é¢å¤–çš„å‚æ•°æˆ–æ‰§è¡Œå¤šä¸ªè½¬æ¢ã€‚è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥å¼•å‡ºè¿™ä¸ªé—®é¢˜ï¼šå¦‚æœæˆ‘ä»¬çš„æ•°æ®ä¸­æœ‰ä¸€äº›ç¼ºå¤±å€¼ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿmedian() ä¼šä¼ æ’­è¿™äº›ç¼ºå¤±å€¼ï¼Œç»™æˆ‘ä»¬ä¸€ä¸ªæ¬¡ä¼˜çš„è¾“å‡ºï¼š\n\nrnorm_na &lt;- function(n, n_na, mean = 0, sd = 1) {\n  sample(c(rnorm(n - n_na, mean = mean, sd = sd), rep(NA, n_na)))\n}\n\ndf_miss &lt;- tibble(\n  a = rnorm_na(5, 1),\n  b = rnorm_na(5, 1),\n  c = rnorm_na(5, 2),\n  d = rnorm(5)\n)\ndf_miss |&gt; \n  summarize(\n    across(a:d, median),\n    n = n()\n  )\n#&gt; # A tibble: 1 Ã— 5\n#&gt;       a     b     c     d     n\n#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;\n#&gt; 1    NA    NA    NA  1.15     5\n\nå¦‚æœæˆ‘ä»¬èƒ½å°† na.rm = TRUE ä¼ é€’ç»™ median() æ¥ç§»é™¤è¿™äº›ç¼ºå¤±å€¼ï¼Œé‚£å°±å¤ªå¥½äº†ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ï¼Œè¯¥å‡½æ•°ä½¿ç”¨æ‰€éœ€çš„å‚æ•°è°ƒç”¨ median()ï¼Œè€Œä¸æ˜¯ç›´æ¥è°ƒç”¨ median()ï¼š\n\ndf_miss |&gt; \n  summarize(\n    across(a:d, function(x) median(x, na.rm = TRUE)),\n    n = n()\n  )\n#&gt; # A tibble: 1 Ã— 5\n#&gt;       a     b      c     d     n\n#&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;\n#&gt; 1 0.139 -1.11 -0.387  1.15     5\n\nè¿™ç§å†™æ³•æœ‰ç‚¹å†—é•¿ï¼Œæ‰€ä»¥ R æä¾›äº†ä¸€ä¸ªæ–¹ä¾¿çš„å¿«æ·æ–¹å¼ï¼šå¯¹äºè¿™ç§ä¸€æ¬¡æ€§çš„æˆ–åŒ¿å1å‡½æ•°ï¼Œä½ å¯ä»¥ç”¨ \\ æ›¿æ¢ function2ï¼š\n\ndf_miss |&gt; \n  summarize(\n    across(a:d, \\(x) median(x, na.rm = TRUE)),\n    n = n()\n  )\n\næ— è®ºå“ªç§æƒ…å†µï¼Œacross() å®é™…ä¸Šéƒ½ç­‰åŒäºä»¥ä¸‹ä»£ç ï¼š\n\ndf_miss |&gt; \n  summarize(\n    a = median(a, na.rm = TRUE),\n    b = median(b, na.rm = TRUE),\n    c = median(c, na.rm = TRUE),\n    d = median(d, na.rm = TRUE),\n    n = n()\n  )\n\nå½“æˆ‘ä»¬ä» median() ä¸­ç§»é™¤ç¼ºå¤±å€¼æ—¶ï¼ŒçŸ¥é“ç©¶ç«Ÿç§»é™¤äº†å¤šå°‘ä¸ªå€¼ä¼šå¾ˆæœ‰ç”¨ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å‘ across() æä¾›ä¸¤ä¸ªå‡½æ•°æ¥å®ç°è¿™ä¸€ç‚¹ï¼šä¸€ä¸ªç”¨äºè®¡ç®—ä¸­ä½æ•°ï¼Œå¦ä¸€ä¸ªç”¨äºè®¡ç®—ç¼ºå¤±å€¼çš„æ•°é‡ã€‚ä½ å¯ä»¥é€šè¿‡å‘ .fns å‚æ•°æä¾›ä¸€ä¸ªå‘½åçš„åˆ—è¡¨æ¥æä¾›å¤šä¸ªå‡½æ•°ï¼š\n\ndf_miss |&gt; \n  summarize(\n    across(a:d, list(\n      median = \\(x) median(x, na.rm = TRUE),\n      n_miss = \\(x) sum(is.na(x))\n    )),\n    n = n()\n  )\n#&gt; # A tibble: 1 Ã— 9\n#&gt;   a_median a_n_miss b_median b_n_miss c_median c_n_miss d_median d_n_miss\n#&gt;      &lt;dbl&gt;    &lt;int&gt;    &lt;dbl&gt;    &lt;int&gt;    &lt;dbl&gt;    &lt;int&gt;    &lt;dbl&gt;    &lt;int&gt;\n#&gt; 1    0.139        1    -1.11        1   -0.387        2     1.15        0\n#&gt; # â„¹ 1 more variable: n &lt;int&gt;\n\nå¦‚æœä½ ä»”ç»†è§‚å¯Ÿï¼Œä½ å¯èƒ½ä¼šç›´è§‚åœ°æ„Ÿè§‰åˆ°åˆ—åæ˜¯ä½¿ç”¨äº†ä¸€ä¸ªç±»ä¼¼ {.col}_{.fn} çš„ glue è§„èŒƒï¼ˆSection 14.3.2ï¼‰æ¥å‘½åçš„ï¼Œå…¶ä¸­ .col æ˜¯åŸå§‹åˆ—çš„åç§°ï¼Œ.fn æ˜¯å‡½æ•°çš„åç§°ã€‚è¿™å¹¶éå·§åˆï¼æ­£å¦‚ä½ å°†åœ¨ä¸‹ä¸€èŠ‚ä¸­å­¦åˆ°çš„ï¼Œä½ å¯ä»¥ä½¿ç”¨ .names å‚æ•°æ¥æä¾›ä½ è‡ªå·±çš„ glue è§„èŒƒã€‚\n\n26.2.4 åˆ—å\nacross() çš„ç»“æœæ ¹æ® .names å‚æ•°ä¸­æä¾›çš„è§„èŒƒæ¥å‘½åã€‚å¦‚æœæˆ‘ä»¬æƒ³è®©å‡½æ•°åæ’åœ¨å‰é¢ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šè‡ªå·±çš„å‘½åæ–¹å¼3ï¼š\n\ndf_miss |&gt; \n  summarize(\n    across(\n      a:d,\n      list(\n        median = \\(x) median(x, na.rm = TRUE),\n        n_miss = \\(x) sum(is.na(x))\n      ),\n      .names = \"{.fn}_{.col}\"\n    ),\n    n = n(),\n  )\n#&gt; # A tibble: 1 Ã— 9\n#&gt;   median_a n_miss_a median_b n_miss_b median_c n_miss_c median_d n_miss_d\n#&gt;      &lt;dbl&gt;    &lt;int&gt;    &lt;dbl&gt;    &lt;int&gt;    &lt;dbl&gt;    &lt;int&gt;    &lt;dbl&gt;    &lt;int&gt;\n#&gt; 1    0.139        1    -1.11        1   -0.387        2     1.15        0\n#&gt; # â„¹ 1 more variable: n &lt;int&gt;\n\nå½“ä½ å°† across() ä¸ mutate() ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œ.names å‚æ•°å°¤å…¶é‡è¦ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œacross() çš„è¾“å‡ºä¸è¾“å…¥çš„åç§°ç›¸åŒã€‚è¿™æ„å‘³ç€åœ¨ mutate() å†…éƒ¨ä½¿ç”¨ across() å°†ä¼šæ›¿æ¢ç°æœ‰çš„åˆ—ã€‚ä¾‹å¦‚ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ coalesce() å°† NA æ›¿æ¢ä¸º 0ï¼š\n\ndf_miss |&gt; \n  mutate(\n    across(a:d, \\(x) coalesce(x, 0))\n  )\n#&gt; # A tibble: 5 Ã— 4\n#&gt;        a      b      c     d\n#&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1  0.434 -1.25   0     1.60 \n#&gt; 2  0     -1.43  -0.297 0.776\n#&gt; 3 -0.156 -0.980  0     1.15 \n#&gt; 4 -2.61  -0.683 -0.785 2.13 \n#&gt; 5  1.11   0     -0.387 0.704\n\nå¦‚æœä½ æƒ³åˆ›å»ºæ–°çš„åˆ—ï¼Œå¯ä»¥ä½¿ç”¨ .names å‚æ•°ä¸ºè¾“å‡ºæŒ‡å®šæ–°çš„åç§°ï¼š\n\ndf_miss |&gt; \n  mutate(\n    across(a:d, \\(x) coalesce(x, 0), .names = \"{.col}_na_zero\")\n  )\n#&gt; # A tibble: 5 Ã— 8\n#&gt;        a      b      c     d a_na_zero b_na_zero c_na_zero d_na_zero\n#&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;\n#&gt; 1  0.434 -1.25  NA     1.60      0.434    -1.25      0         1.60 \n#&gt; 2 NA     -1.43  -0.297 0.776     0        -1.43     -0.297     0.776\n#&gt; 3 -0.156 -0.980 NA     1.15     -0.156    -0.980     0         1.15 \n#&gt; 4 -2.61  -0.683 -0.785 2.13     -2.61     -0.683    -0.785     2.13 \n#&gt; 5  1.11  NA     -0.387 0.704     1.11      0        -0.387     0.704\n\n\n26.2.5 ç­›é€‰\nacross() ä¸ summarize() å’Œ mutate() æ˜¯ç»ä½³çš„æ­é…ï¼Œä½†ä¸ filter() ä¸€èµ·ä½¿ç”¨æ—¶å°±æ¯”è¾ƒå°´å°¬äº†ï¼Œå› ä¸ºä½ é€šå¸¸éœ€è¦ç”¨ | æˆ– & æ¥ç»„åˆå¤šä¸ªæ¡ä»¶ã€‚å¾ˆæ˜æ˜¾ï¼Œacross() å¯ä»¥å¸®åŠ©åˆ›å»ºå¤šä¸ªé€»è¾‘åˆ—ï¼Œä½†æ¥ä¸‹æ¥è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿå› æ­¤ï¼Œdplyr æä¾›äº† across() çš„ä¸¤ä¸ªå˜ä½“ï¼Œåä¸º if_any() å’Œ if_all()ï¼š\n\n# ç­‰åŒäº df_miss |&gt; filter(is.na(a) | is.na(b) | is.na(c) | is.na(d))\ndf_miss |&gt; filter(if_any(a:d, is.na))\n#&gt; # A tibble: 4 Ã— 4\n#&gt;        a      b      c     d\n#&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1  0.434 -1.25  NA     1.60 \n#&gt; 2 NA     -1.43  -0.297 0.776\n#&gt; 3 -0.156 -0.980 NA     1.15 \n#&gt; 4  1.11  NA     -0.387 0.704\n\n# ç­‰åŒäº df_miss |&gt; filter(is.na(a) & is.na(b) & is.na(c) & is.na(d))\ndf_miss |&gt; filter(if_all(a:d, is.na))\n#&gt; # A tibble: 0 Ã— 4\n#&gt; # â„¹ 4 variables: a &lt;dbl&gt;, b &lt;dbl&gt;, c &lt;dbl&gt;, d &lt;dbl&gt;\n\n\n26.2.6 åœ¨å‡½æ•°ä¸­ä½¿ç”¨ across()\n\nacross() åœ¨ç¼–ç¨‹ä¸­ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºå®ƒå…è®¸ä½ å¯¹å¤šä¸ªåˆ—è¿›è¡Œæ“ä½œã€‚ä¾‹å¦‚ï¼ŒJacob Scott ä½¿ç”¨äº†è¿™ä¸ªå°åŠ©æ‰‹å‡½æ•°ï¼Œå®ƒåŒ…è£…äº†ä¸€ç³»åˆ— lubridate å‡½æ•°ï¼Œå°†æ‰€æœ‰æ—¥æœŸåˆ—æ‰©å±•ä¸ºå¹´ã€æœˆã€æ—¥åˆ—ï¼š\n\nexpand_dates &lt;- function(df) {\n  df |&gt; \n    mutate(\n      across(where(is.Date), list(year = year, month = month, day = mday))\n    )\n}\n\ndf_date &lt;- tibble(\n  name = c(\"Amy\", \"Bob\"),\n  date = ymd(c(\"2009-08-03\", \"2010-01-16\"))\n)\n\ndf_date |&gt; \n  expand_dates()\n#&gt; # A tibble: 2 Ã— 5\n#&gt;   name  date       date_year date_month date_day\n#&gt;   &lt;chr&gt; &lt;date&gt;         &lt;dbl&gt;      &lt;dbl&gt;    &lt;int&gt;\n#&gt; 1 Amy   2009-08-03      2009          8        3\n#&gt; 2 Bob   2010-01-16      2010          1       16\n\nacross() è¿˜å¯ä»¥æ–¹ä¾¿åœ°åœ¨å•ä¸ªå‚æ•°ä¸­æä¾›å¤šä¸ªåˆ—ï¼Œå› ä¸ºå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ä½¿ç”¨äº† tidy-selectï¼›ä½ åªéœ€è¦è®°ä½è¦æ‹¥æŠ± (embrace) è¯¥å‚æ•°ï¼Œæ­£å¦‚æˆ‘ä»¬åœ¨ Section 25.3.2 ä¸­è®¨è®ºçš„é‚£æ ·ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢è¿™ä¸ªå‡½æ•°é»˜è®¤ä¼šè®¡ç®—æ•°å€¼åˆ—çš„å‡å€¼ã€‚ä½†æ˜¯é€šè¿‡æä¾›ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½ å¯ä»¥é€‰æ‹©åªå¯¹é€‰å®šçš„åˆ—è¿›è¡Œæ±‡æ€»ï¼š\n\nsummarize_means &lt;- function(df, summary_vars = where(is.numeric)) {\n  df |&gt; \n    summarize(\n      across({{ summary_vars }}, \\(x) mean(x, na.rm = TRUE)),\n      n = n(),\n      .groups = \"drop\"\n    )\n}\ndiamonds |&gt; \n  group_by(cut) |&gt; \n  summarize_means()\n#&gt; # A tibble: 5 Ã— 9\n#&gt;   cut       carat depth table price     x     y     z     n\n#&gt;   &lt;ord&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;\n#&gt; 1 Fair      1.05   64.0  59.1 4359.  6.25  6.18  3.98  1610\n#&gt; 2 Good      0.849  62.4  58.7 3929.  5.84  5.85  3.64  4906\n#&gt; 3 Very Good 0.806  61.8  58.0 3982.  5.74  5.77  3.56 12082\n#&gt; 4 Premium   0.892  61.3  58.7 4584.  5.97  5.94  3.65 13791\n#&gt; 5 Ideal     0.703  61.7  56.0 3458.  5.51  5.52  3.40 21551\n\ndiamonds |&gt; \n  group_by(cut) |&gt; \n  summarize_means(c(carat, x:z))\n#&gt; # A tibble: 5 Ã— 6\n#&gt;   cut       carat     x     y     z     n\n#&gt;   &lt;ord&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;\n#&gt; 1 Fair      1.05   6.25  6.18  3.98  1610\n#&gt; 2 Good      0.849  5.84  5.85  3.64  4906\n#&gt; 3 Very Good 0.806  5.74  5.77  3.56 12082\n#&gt; 4 Premium   0.892  5.97  5.94  3.65 13791\n#&gt; 5 Ideal     0.703  5.51  5.52  3.40 21551\n\n\n26.2.7 ä¸ pivot_longer() æ¯”è¾ƒ\nåœ¨æˆ‘ä»¬ç»§ç»­ä¹‹å‰ï¼Œæœ‰å¿…è¦æŒ‡å‡º across() å’Œ pivot_longer() (Section 5.3) ä¹‹é—´ä¸€ä¸ªæœ‰è¶£çš„è”ç³»ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œä½ å¯ä»¥é€šè¿‡å…ˆè½¬æ¢æ•°æ®ï¼Œç„¶åæŒ‰ç»„è€Œä¸æ˜¯æŒ‰åˆ—æ‰§è¡Œæ“ä½œæ¥å®Œæˆç›¸åŒçš„è®¡ç®—ã€‚ä¾‹å¦‚ï¼Œçœ‹ä¸‹é¢è¿™ä¸ªå¤šå‡½æ•°æ±‡æ€»ï¼š\n\ndf |&gt; \n  summarize(across(a:d, list(median = median, mean = mean)))\n#&gt; # A tibble: 1 Ã— 8\n#&gt;   a_median a_mean b_median b_mean c_median c_mean d_median d_mean\n#&gt;      &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;\n#&gt; 1   0.0380  0.205  -0.0163 0.0910    0.260 0.0716    0.540  0.508\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡å…ˆå°†æ•°æ®è½¬æ¢ä¸ºé•¿æ ¼å¼ï¼Œç„¶åè¿›è¡Œæ±‡æ€»æ¥è®¡ç®—ç›¸åŒçš„å€¼ï¼š\n\nlong &lt;- df |&gt; \n  pivot_longer(a:d) |&gt; \n  group_by(name) |&gt; \n  summarize(\n    median = median(value),\n    mean = mean(value)\n  )\nlong\n#&gt; # A tibble: 4 Ã— 3\n#&gt;   name   median   mean\n#&gt;   &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;\n#&gt; 1 a      0.0380 0.205 \n#&gt; 2 b     -0.0163 0.0910\n#&gt; 3 c      0.260  0.0716\n#&gt; 4 d      0.540  0.508\n\nå¦‚æœä½ æƒ³è¦ä¸ across() ç›¸åŒçš„ç»“æ„ï¼Œä½ å¯ä»¥å†æ¬¡è¿›è¡Œè½¬æ¢ï¼š\n\nlong |&gt; \n  pivot_wider(\n    names_from = name,\n    values_from = c(median, mean),\n    names_vary = \"slowest\",\n    names_glue = \"{name}_{.value}\"\n  )\n#&gt; # A tibble: 1 Ã— 8\n#&gt;   a_median a_mean b_median b_mean c_median c_mean d_median d_mean\n#&gt;      &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;\n#&gt; 1   0.0380  0.205  -0.0163 0.0910    0.260 0.0716    0.540  0.508\n\nè¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„æŠ€å·§ï¼Œå› ä¸ºæœ‰æ—¶ä½ ä¼šé‡åˆ°ä¸€ä¸ªç›®å‰æ— æ³•ç”¨ across() è§£å†³çš„é—®é¢˜ï¼šå½“ä½ æœ‰å¤šç»„åˆ—ï¼Œå¹¶ä¸”æƒ³è¦åŒæ—¶å¯¹å®ƒä»¬è¿›è¡Œè®¡ç®—æ—¶ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬çš„æ•°æ®æ¡†åŒ…å«å€¼å’Œæƒé‡ï¼Œæˆ‘ä»¬æƒ³è¦è®¡ç®—åŠ æƒå¹³å‡å€¼ï¼š\n\ndf_paired &lt;- tibble(\n  a_val = rnorm(10),\n  a_wts = runif(10),\n  b_val = rnorm(10),\n  b_wts = runif(10),\n  c_val = rnorm(10),\n  c_wts = runif(10),\n  d_val = rnorm(10),\n  d_wts = runif(10)\n)\n\nç›®å‰æ²¡æœ‰åŠæ³•ç”¨ across() æ¥å®ç°è¿™ä¸ªåŠŸèƒ½4ï¼Œä½†ç”¨ pivot_longer() å°±ç›¸å¯¹ç›´æ¥äº†ï¼š\n\ndf_long &lt;- df_paired |&gt; \n  pivot_longer(\n    everything(), \n    names_to = c(\"group\", \".value\"), \n    names_sep = \"_\"\n  )\ndf_long\n#&gt; # A tibble: 40 Ã— 3\n#&gt;   group    val   wts\n#&gt;   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1 a      0.715 0.518\n#&gt; 2 b     -0.709 0.691\n#&gt; 3 c      0.718 0.216\n#&gt; 4 d     -0.217 0.733\n#&gt; 5 a     -1.09  0.979\n#&gt; 6 b     -0.209 0.675\n#&gt; # â„¹ 34 more rows\n\ndf_long |&gt; \n  group_by(group) |&gt; \n  summarize(mean = weighted.mean(val, wts))\n#&gt; # A tibble: 4 Ã— 2\n#&gt;   group    mean\n#&gt;   &lt;chr&gt;   &lt;dbl&gt;\n#&gt; 1 a      0.126 \n#&gt; 2 b     -0.0704\n#&gt; 3 c     -0.360 \n#&gt; 4 d     -0.248\n\nå¦‚æœéœ€è¦ï¼Œä½ å¯ä»¥ç”¨ pivot_wider() å°†å…¶è½¬æ¢å›åŸå§‹å½¢å¼ã€‚\n\n26.2.8 ç»ƒä¹ \n\n\né€šè¿‡ä»¥ä¸‹æ–¹å¼ç»ƒä¹ ä½ çš„ across() æŠ€èƒ½ï¼š\n\nè®¡ç®— palmerpenguins::penguins æ•°æ®é›†ä¸­æ¯ä¸€åˆ—çš„å”¯ä¸€å€¼æ•°é‡ã€‚\nè®¡ç®— mtcars æ•°æ®é›†ä¸­æ¯ä¸€åˆ—çš„å¹³å‡å€¼ã€‚\nå°† diamonds æŒ‰ cutã€clarity å’Œ color åˆ†ç»„ï¼Œç„¶åè®¡ç®—è§‚æµ‹æ•°é‡å’Œæ¯ä¸ªæ•°å€¼åˆ—çš„å¹³å‡å€¼ã€‚\n\n\nå¦‚æœåœ¨ across() ä¸­ä½¿ç”¨ä¸€ä¸ªå‡½æ•°åˆ—è¡¨ï¼Œä½†ä¸ç»™å®ƒä»¬å‘½åï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿè¾“å‡ºæ˜¯å¦‚ä½•å‘½åçš„ï¼Ÿ\nä¿®æ”¹ expand_dates() å‡½æ•°ï¼Œä½¿å…¶åœ¨æ‰©å±•æ—¥æœŸåˆ—åè‡ªåŠ¨åˆ é™¤å®ƒä»¬ã€‚ä½ éœ€è¦æ‹¥æŠ± (embrace) ä»»ä½•å‚æ•°å—ï¼Ÿ\n\nè§£é‡Šä¸‹é¢è¿™ä¸ªå‡½æ•°ä¸­ç®¡é“çš„æ¯ä¸€æ­¥éƒ½åšäº†ä»€ä¹ˆã€‚æˆ‘ä»¬åˆ©ç”¨äº† where() çš„ä»€ä¹ˆç‰¹æ®ŠåŠŸèƒ½ï¼Ÿ\n\nshow_missing &lt;- function(df, group_vars, summary_vars = everything()) {\n  df |&gt; \n    group_by(pick({{ group_vars }})) |&gt; \n    summarize(\n      across({{ summary_vars }}, \\(x) sum(is.na(x))),\n      .groups = \"drop\"\n    ) |&gt;\n    select(where(\\(x) any(x &gt; 0)))\n}\nnycflights13::flights |&gt; show_missing(c(year, month, day))",
    "crumbs": [
      "ç¼–ç¨‹",
      "<span class='chapter-number'>26</span>Â  <span class='chapter-title'>è¿­ä»£</span>"
    ]
  },
  {
    "objectID": "iteration.html#è¯»å–å¤šä¸ªæ–‡ä»¶",
    "href": "iteration.html#è¯»å–å¤šä¸ªæ–‡ä»¶",
    "title": "26Â  è¿­ä»£",
    "section": "\n26.3 è¯»å–å¤šä¸ªæ–‡ä»¶",
    "text": "26.3 è¯»å–å¤šä¸ªæ–‡ä»¶\nåœ¨ä¸Šä¸€èŠ‚ä¸­ï¼Œä½ å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨ dplyr::across() å¯¹å¤šä¸ªåˆ—é‡å¤è¿›è¡Œè½¬æ¢ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨ purrr::map() å¯¹ç›®å½•ä¸­çš„æ¯ä¸ªæ–‡ä»¶æ‰§è¡ŒæŸäº›æ“ä½œã€‚è®©æˆ‘ä»¬ä»ä¸€ä¸ªå°å°çš„åŠ¨æœºå¼€å§‹ï¼šå‡è®¾ä½ æœ‰ä¸€ä¸ªè£…æ»¡äº†ä½ æƒ³è¦è¯»å–çš„ Excel ç”µå­è¡¨æ ¼çš„ç›®å½•5ã€‚ä½ å¯ä»¥é€šè¿‡å¤åˆ¶ç²˜è´´æ¥å®Œæˆï¼š\n\ndata2019 &lt;- readxl::read_excel(\"data/y2019.xlsx\")\ndata2020 &lt;- readxl::read_excel(\"data/y2020.xlsx\")\ndata2021 &lt;- readxl::read_excel(\"data/y2021.xlsx\")\ndata2022 &lt;- readxl::read_excel(\"data/y2022.xlsx\")\n\nç„¶åä½¿ç”¨ dplyr::bind_rows() å°†å®ƒä»¬å…¨éƒ¨åˆå¹¶åœ¨ä¸€èµ·ï¼š\n\ndata &lt;- bind_rows(data2019, data2020, data2021, data2022)\n\nä½ å¯ä»¥æƒ³è±¡è¿™ä¼šå¾ˆå¿«å˜å¾—ä¹å‘³ï¼Œç‰¹åˆ«æ˜¯å¦‚æœä½ æœ‰æ•°ç™¾ä¸ªæ–‡ä»¶ï¼Œè€Œä¸ä»…ä»…æ˜¯å››ä¸ªã€‚æ¥ä¸‹æ¥çš„éƒ¨åˆ†å°†å‘ä½ å±•ç¤ºå¦‚ä½•è‡ªåŠ¨åŒ–è¿™ç±»ä»»åŠ¡ã€‚æœ‰ä¸‰ä¸ªåŸºæœ¬æ­¥éª¤ï¼šä½¿ç”¨ list.files() åˆ—å‡ºç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨ purrr::map() å°†æ¯ä¸ªæ–‡ä»¶è¯»å…¥ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œæœ€åä½¿ç”¨ purrr::list_rbind() å°†å®ƒä»¬åˆå¹¶æˆä¸€ä¸ªå•ä¸€çš„æ•°æ®æ¡†ã€‚ç„¶åæˆ‘ä»¬å°†è®¨è®ºå¦‚ä½•å¤„ç†å¼‚è´¨æ€§è¶Šæ¥è¶Šé«˜çš„æƒ…å†µï¼Œå³ä½ ä¸èƒ½å¯¹æ¯ä¸ªæ–‡ä»¶éƒ½åšå®Œå…¨ç›¸åŒçš„äº‹æƒ…ã€‚\n\n26.3.1 åˆ—å‡ºç›®å½•ä¸­çš„æ–‡ä»¶\né¡¾åæ€ä¹‰ï¼Œlist.files() åˆ—å‡ºç›®å½•ä¸­çš„æ–‡ä»¶ã€‚ä½ å‡ ä¹æ€»æ˜¯ä¼šä½¿ç”¨ä¸‰ä¸ªå‚æ•°ï¼š\n\nç¬¬ä¸€ä¸ªå‚æ•° path æ˜¯è¦æŸ¥çœ‹çš„ç›®å½•ã€‚\npattern æ˜¯ä¸€ä¸ªç”¨äºè¿‡æ»¤æ–‡ä»¶åçš„æ­£åˆ™è¡¨è¾¾å¼ã€‚æœ€å¸¸è§çš„æ¨¡å¼æ˜¯ç±»ä¼¼ [.]xlsx$ æˆ– [.]csv$ è¿™æ ·çš„ï¼Œç”¨æ¥æŸ¥æ‰¾æ‰€æœ‰å…·æœ‰æŒ‡å®šæ‰©å±•åçš„æ–‡ä»¶ã€‚\nfull.names å†³å®šæ˜¯å¦åº”å°†ç›®å½•ååŒ…å«åœ¨è¾“å‡ºä¸­ã€‚ä½ å‡ ä¹æ€»æ˜¯å¸Œæœ›å®ƒä¸º TRUEã€‚\n\nä¸ºäº†ä½¿æˆ‘ä»¬çš„åŠ¨æœºç¤ºä¾‹æ›´å…·ä½“ï¼Œæœ¬ä¹¦åŒ…å«ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå…¶ä¸­æœ‰ 12 ä¸ª Excel ç”µå­è¡¨æ ¼ï¼ŒåŒ…å«äº†æ¥è‡ª gapminder åŒ…çš„æ•°æ®ã€‚æ¯ä¸ªæ–‡ä»¶åŒ…å« 142 ä¸ªå›½å®¶ä¸€å¹´çš„æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡é€‚å½“çš„ list.files() è°ƒç”¨æ¥åˆ—å‡ºå®ƒä»¬ï¼š\n\npaths &lt;- list.files(\"data/gapminder\", pattern = \"[.]xlsx$\", full.names = TRUE)\npaths\n#&gt;  [1] \"data/gapminder/1952.xlsx\" \"data/gapminder/1957.xlsx\"\n#&gt;  [3] \"data/gapminder/1962.xlsx\" \"data/gapminder/1967.xlsx\"\n#&gt;  [5] \"data/gapminder/1972.xlsx\" \"data/gapminder/1977.xlsx\"\n#&gt;  [7] \"data/gapminder/1982.xlsx\" \"data/gapminder/1987.xlsx\"\n#&gt;  [9] \"data/gapminder/1992.xlsx\" \"data/gapminder/1997.xlsx\"\n#&gt; [11] \"data/gapminder/2002.xlsx\" \"data/gapminder/2007.xlsx\"\n\n\n26.3.2 åˆ—è¡¨\nç°åœ¨æˆ‘ä»¬æœ‰äº†è¿™ 12 ä¸ªè·¯å¾„ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ read_excel() 12 æ¬¡æ¥å¾—åˆ° 12 ä¸ªæ•°æ®æ¡†ï¼š\n\ngapminder_1952 &lt;- readxl::read_excel(\"data/gapminder/1952.xlsx\")\ngapminder_1957 &lt;- readxl::read_excel(\"data/gapminder/1957.xlsx\")\ngapminder_1962 &lt;- readxl::read_excel(\"data/gapminder/1962.xlsx\")\n  ...,\ngapminder_2007 &lt;- readxl::read_excel(\"data/gapminder/2007.xlsx\")\n\nä½†æ˜¯å°†æ¯ä¸ªè¡¨æ ¼æ”¾å…¥å…¶è‡ªå·±çš„å˜é‡ä¸­ï¼Œä¼šåœ¨æ¥ä¸‹æ¥çš„æ­¥éª¤ä¸­ä½¿å®ƒä»¬éš¾ä»¥å¤„ç†ã€‚ç›¸åï¼Œå¦‚æœæˆ‘ä»¬å°†å®ƒä»¬æ”¾å…¥ä¸€ä¸ªå•ä¸€çš„å¯¹è±¡ä¸­ï¼Œå®ƒä»¬ä¼šæ›´å®¹æ˜“å¤„ç†ã€‚åˆ—è¡¨ (list) æ˜¯å®Œæˆè¿™é¡¹å·¥ä½œçš„å®Œç¾å·¥å…·ï¼š\n\nfiles &lt;- list(\n  readxl::read_excel(\"data/gapminder/1952.xlsx\"),\n  readxl::read_excel(\"data/gapminder/1957.xlsx\"),\n  readxl::read_excel(\"data/gapminder/1962.xlsx\"),\n  ...,\n  readxl::read_excel(\"data/gapminder/2007.xlsx\")\n)\n\nç°åœ¨ä½ å·²ç»å°†è¿™äº›æ•°æ®æ¡†æ”¾å…¥ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œä½ å¦‚ä½•å–å‡ºä¸€ä¸ªå‘¢ï¼Ÿä½ å¯ä»¥ä½¿ç”¨ files[[i]] æ¥æå–ç¬¬ i&lt;sup&gt;th&lt;/sup&gt; ä¸ªå…ƒç´ ï¼š\n\nfiles[[3]]\n#&gt; # A tibble: 142 Ã— 5\n#&gt;   country     continent lifeExp      pop gdpPercap\n#&gt;   &lt;chr&gt;       &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n#&gt; 1 Afghanistan Asia         32.0 10267083      853.\n#&gt; 2 Albania     Europe       64.8  1728137     2313.\n#&gt; 3 Algeria     Africa       48.3 11000948     2551.\n#&gt; 4 Angola      Africa       34    4826015     4269.\n#&gt; 5 Argentina   Americas     65.1 21283783     7133.\n#&gt; 6 Australia   Oceania      70.9 10794968    12217.\n#&gt; # â„¹ 136 more rows\n\næˆ‘ä»¬å°†åœ¨ Section 27.3 ä¸­æ›´è¯¦ç»†åœ°å›åˆ° [[ã€‚\n\n26.3.3 purrr::map() å’Œ list_rbind()\n\nâ€œæ‰‹åŠ¨â€æ”¶é›†è¿™äº›æ•°æ®æ¡†åˆ°åˆ—è¡¨ä¸­çš„ä»£ç ï¼ŒåŸºæœ¬ä¸Šå’Œé€ä¸ªè¯»å–æ–‡ä»¶çš„ä»£ç ä¸€æ ·ç¹çã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ purrr::map() æ¥æ›´å¥½åœ°åˆ©ç”¨æˆ‘ä»¬çš„ paths å‘é‡ã€‚map() ç±»ä¼¼äº across()ï¼Œä½†å®ƒä¸æ˜¯å¯¹æ•°æ®æ¡†ä¸­çš„æ¯ä¸€åˆ—åšæŸäº‹ï¼Œè€Œæ˜¯å¯¹å‘é‡ä¸­çš„æ¯ä¸ªå…ƒç´ åšæŸäº‹ã€‚map(x, f) æ˜¯ä»¥ä¸‹ä»£ç çš„ç®€å†™ï¼š\n\nlist(\n  f(x[[1]]),\n  f(x[[2]]),\n  ...,\n  f(x[[n]])\n)\n\næ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ map() æ¥å¾—åˆ°ä¸€ä¸ªåŒ…å« 12 ä¸ªæ•°æ®æ¡†çš„åˆ—è¡¨ï¼š\n\nfiles &lt;- map(paths, readxl::read_excel)\nlength(files)\n#&gt; [1] 12\n\nfiles[[1]]\n#&gt; # A tibble: 142 Ã— 5\n#&gt;   country     continent lifeExp      pop gdpPercap\n#&gt;   &lt;chr&gt;       &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n#&gt; 1 Afghanistan Asia         28.8  8425333      779.\n#&gt; 2 Albania     Europe       55.2  1282697     1601.\n#&gt; 3 Algeria     Africa       43.1  9279525     2449.\n#&gt; 4 Angola      Africa       30.0  4232095     3521.\n#&gt; 5 Argentina   Americas     62.5 17876956     5911.\n#&gt; 6 Australia   Oceania      69.1  8691212    10040.\n#&gt; # â„¹ 136 more rows\n\n(è¿™æ˜¯å¦ä¸€ç§ç”¨ str() æ˜¾ç¤ºä¸å¤Ÿç´§å‡‘çš„æ•°æ®ç»“æ„ï¼Œæ‰€ä»¥ä½ å¯èƒ½æƒ³åœ¨ RStudio ä¸­åŠ è½½å®ƒå¹¶ç”¨ View() æ¥æ£€æŸ¥å®ƒ)ã€‚\nç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ purrr::list_rbind() å°†è¿™ä¸ªæ•°æ®æ¡†åˆ—è¡¨åˆå¹¶æˆä¸€ä¸ªå•ä¸€çš„æ•°æ®æ¡†ï¼š\n\nlist_rbind(files)\n#&gt; # A tibble: 1,704 Ã— 5\n#&gt;   country     continent lifeExp      pop gdpPercap\n#&gt;   &lt;chr&gt;       &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n#&gt; 1 Afghanistan Asia         28.8  8425333      779.\n#&gt; 2 Albania     Europe       55.2  1282697     1601.\n#&gt; 3 Algeria     Africa       43.1  9279525     2449.\n#&gt; 4 Angola      Africa       30.0  4232095     3521.\n#&gt; 5 Argentina   Americas     62.5 17876956     5911.\n#&gt; 6 Australia   Oceania      69.1  8691212    10040.\n#&gt; # â„¹ 1,698 more rows\n\næˆ–è€…æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªç®¡é“ä¸­åŒæ—¶å®Œæˆè¿™ä¸¤ä¸ªæ­¥éª¤ï¼š\n\npaths |&gt; \n  map(readxl::read_excel) |&gt; \n  list_rbind()\n\nå¦‚æœæˆ‘ä»¬æƒ³ç»™ read_excel() ä¼ å…¥é¢å¤–çš„å‚æ•°æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬ä½¿ç”¨ä¸ across() ç›¸åŒçš„æŠ€æœ¯ã€‚ä¾‹å¦‚ï¼Œç”¨ n_max = 1 é¢„è§ˆæ•°æ®çš„å‰å‡ è¡Œé€šå¸¸å¾ˆæœ‰ç”¨ï¼š\n\npaths |&gt; \n  map(\\(path) readxl::read_excel(path, n_max = 1)) |&gt; \n  list_rbind()\n#&gt; # A tibble: 12 Ã— 5\n#&gt;   country     continent lifeExp      pop gdpPercap\n#&gt;   &lt;chr&gt;       &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n#&gt; 1 Afghanistan Asia         28.8  8425333      779.\n#&gt; 2 Afghanistan Asia         30.3  9240934      821.\n#&gt; 3 Afghanistan Asia         32.0 10267083      853.\n#&gt; 4 Afghanistan Asia         34.0 11537966      836.\n#&gt; 5 Afghanistan Asia         36.1 13079460      740.\n#&gt; 6 Afghanistan Asia         38.4 14880372      786.\n#&gt; # â„¹ 6 more rows\n\nè¿™æ¸…æ¥šåœ°è¡¨æ˜ç¼ºå°‘äº†æŸäº›ä¸œè¥¿ï¼šæ²¡æœ‰ year åˆ—ï¼Œå› ä¸ºè¿™ä¸ªå€¼è®°å½•åœ¨è·¯å¾„ä¸­ï¼Œè€Œä¸æ˜¯åœ¨å•ä¸ªæ–‡ä»¶ä¸­ã€‚æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€æ­¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\n26.3.4 è·¯å¾„ä¸­çš„æ•°æ®\næœ‰æ—¶æ–‡ä»¶åæœ¬èº«å°±æ˜¯æ•°æ®ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ–‡ä»¶ååŒ…å«äº†å¹´ä»½ï¼Œè€Œè¿™ä¸ªä¿¡æ¯åœ¨å•ä¸ªæ–‡ä»¶ä¸­å¹¶æ²¡æœ‰è®°å½•ã€‚ä¸ºäº†å°†è¿™ä¸€åˆ—åŠ å…¥åˆ°æœ€ç»ˆçš„æ•°æ®æ¡†ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åšä¸¤ä»¶äº‹ï¼š\né¦–å…ˆï¼Œæˆ‘ä»¬ä¸ºè·¯å¾„å‘é‡å‘½åã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨ set_names() å‡½æ•°ï¼Œå®ƒå¯ä»¥æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ basename() ä»å®Œæ•´è·¯å¾„ä¸­ä»…æå–æ–‡ä»¶åï¼š\n\npaths |&gt; set_names(basename) \n#&gt;                  1952.xlsx                  1957.xlsx \n#&gt; \"data/gapminder/1952.xlsx\" \"data/gapminder/1957.xlsx\" \n#&gt;                  1962.xlsx                  1967.xlsx \n#&gt; \"data/gapminder/1962.xlsx\" \"data/gapminder/1967.xlsx\" \n#&gt;                  1972.xlsx                  1977.xlsx \n#&gt; \"data/gapminder/1972.xlsx\" \"data/gapminder/1977.xlsx\" \n#&gt;                  1982.xlsx                  1987.xlsx \n#&gt; \"data/gapminder/1982.xlsx\" \"data/gapminder/1987.xlsx\" \n#&gt;                  1992.xlsx                  1997.xlsx \n#&gt; \"data/gapminder/1992.xlsx\" \"data/gapminder/1997.xlsx\" \n#&gt;                  2002.xlsx                  2007.xlsx \n#&gt; \"data/gapminder/2002.xlsx\" \"data/gapminder/2007.xlsx\"\n\nè¿™äº›åç§°ä¼šè¢«æ‰€æœ‰çš„ map å‡½æ•°è‡ªåŠ¨æ²¿ç”¨ï¼Œæ‰€ä»¥æ•°æ®æ¡†åˆ—è¡¨ä¹Ÿä¼šæœ‰ç›¸åŒçš„åç§°ï¼š\n\nfiles &lt;- paths |&gt; \n  set_names(basename) |&gt; \n  map(readxl::read_excel)\n\nè¿™ä½¿å¾—è¿™ä¸ª map() è°ƒç”¨æˆä¸ºä»¥ä¸‹ä»£ç çš„ç®€å†™ï¼š\n\nfiles &lt;- list(\n  \"1952.xlsx\" = readxl::read_excel(\"data/gapminder/1952.xlsx\"),\n  \"1957.xlsx\" = readxl::read_excel(\"data/gapminder/1957.xlsx\"),\n  \"1962.xlsx\" = readxl::read_excel(\"data/gapminder/1962.xlsx\"),\n  ...,\n  \"2007.xlsx\" = readxl::read_excel(\"data/gapminder/2007.xlsx\")\n)\n\nä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ [[ æŒ‰åç§°æå–å…ƒç´ ï¼š\n\nfiles[[\"1962.xlsx\"]]\n#&gt; # A tibble: 142 Ã— 5\n#&gt;   country     continent lifeExp      pop gdpPercap\n#&gt;   &lt;chr&gt;       &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n#&gt; 1 Afghanistan Asia         32.0 10267083      853.\n#&gt; 2 Albania     Europe       64.8  1728137     2313.\n#&gt; 3 Algeria     Africa       48.3 11000948     2551.\n#&gt; 4 Angola      Africa       34    4826015     4269.\n#&gt; 5 Argentina   Americas     65.1 21283783     7133.\n#&gt; 6 Australia   Oceania      70.9 10794968    12217.\n#&gt; # â„¹ 136 more rows\n\nç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨ list_rbind() çš„ names_to å‚æ•°ï¼Œå‘Šè¯‰å®ƒå°†åç§°ä¿å­˜åˆ°ä¸€ä¸ªåä¸º year çš„æ–°åˆ—ä¸­ï¼Œç„¶åä½¿ç”¨ readr::parse_number() ä»å­—ç¬¦ä¸²ä¸­æå–æ•°å­—ã€‚\n\npaths |&gt; \n  set_names(basename) |&gt; \n  map(readxl::read_excel) |&gt; \n  list_rbind(names_to = \"year\") |&gt; \n  mutate(year = parse_number(year))\n#&gt; # A tibble: 1,704 Ã— 6\n#&gt;    year country     continent lifeExp      pop gdpPercap\n#&gt;   &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n#&gt; 1  1952 Afghanistan Asia         28.8  8425333      779.\n#&gt; 2  1952 Albania     Europe       55.2  1282697     1601.\n#&gt; 3  1952 Algeria     Africa       43.1  9279525     2449.\n#&gt; 4  1952 Angola      Africa       30.0  4232095     3521.\n#&gt; 5  1952 Argentina   Americas     62.5 17876956     5911.\n#&gt; 6  1952 Australia   Oceania      69.1  8691212    10040.\n#&gt; # â„¹ 1,698 more rows\n\nåœ¨æ›´å¤æ‚çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½è¿˜æœ‰å…¶ä»–å˜é‡å­˜å‚¨åœ¨ç›®å½•åä¸­ï¼Œæˆ–è€…æ–‡ä»¶åå¯èƒ½åŒ…å«å¤šä¸ªæ•°æ®ç‰‡æ®µã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨ set_names()ï¼ˆä¸å¸¦ä»»ä½•å‚æ•°ï¼‰æ¥è®°å½•å®Œæ•´è·¯å¾„ï¼Œç„¶åä½¿ç”¨ tidyr::separate_wider_delim() åŠå…¶ç›¸å…³å‡½æ•°å°†å®ƒä»¬è½¬æ¢æˆæœ‰ç”¨çš„åˆ—ã€‚\n\npaths |&gt; \n  set_names() |&gt; \n  map(readxl::read_excel) |&gt; \n  list_rbind(names_to = \"year\") |&gt; \n  separate_wider_delim(year, delim = \"/\", names = c(NA, \"dir\", \"file\")) |&gt; \n  separate_wider_delim(file, delim = \".\", names = c(\"file\", \"ext\"))\n#&gt; # A tibble: 1,704 Ã— 8\n#&gt;   dir       file  ext   country     continent lifeExp      pop gdpPercap\n#&gt;   &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n#&gt; 1 gapminder 1952  xlsx  Afghanistan Asia         28.8  8425333      779.\n#&gt; 2 gapminder 1952  xlsx  Albania     Europe       55.2  1282697     1601.\n#&gt; 3 gapminder 1952  xlsx  Algeria     Africa       43.1  9279525     2449.\n#&gt; 4 gapminder 1952  xlsx  Angola      Africa       30.0  4232095     3521.\n#&gt; 5 gapminder 1952  xlsx  Argentina   Americas     62.5 17876956     5911.\n#&gt; 6 gapminder 1952  xlsx  Australia   Oceania      69.1  8691212    10040.\n#&gt; # â„¹ 1,698 more rows\n\n\n26.3.5 ä¿å­˜ä½ çš„å·¥ä½œ\nç°åœ¨ä½ å·²ç»å®Œæˆäº†æ‰€æœ‰è¿™äº›è¾›è‹¦çš„å·¥ä½œï¼Œå¾—åˆ°äº†ä¸€ä¸ªæ•´æ´çš„æ•°æ®æ¡†ï¼Œæ˜¯æ—¶å€™ä¿å­˜ä½ çš„å·¥ä½œäº†ï¼š\n\ngapminder &lt;- paths |&gt; \n  set_names(basename) |&gt; \n  map(readxl::read_excel) |&gt; \n  list_rbind(names_to = \"year\") |&gt; \n  mutate(year = parse_number(year))\n\nwrite_csv(gapminder, \"gapminder.csv\")\n\nç°åœ¨ï¼Œå½“ä½ å°†æ¥å†æ¬¡å¤„ç†è¿™ä¸ªé—®é¢˜æ—¶ï¼Œä½ å¯ä»¥åªè¯»å–ä¸€ä¸ª csv æ–‡ä»¶ã€‚å¯¹äºæ›´å¤§ã€æ›´ä¸°å¯Œçš„æ•°æ®é›†ï¼Œä½¿ç”¨ parquet å¯èƒ½æ¯” .csv æ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ï¼Œå¦‚ Section 22.4 ä¸­æ‰€è®¨è®ºçš„ã€‚\nå¦‚æœä½ åœ¨ä¸€ä¸ªé¡¹ç›®ï¼ˆprojectï¼‰ä¸­å·¥ä½œï¼Œæˆ‘ä»¬å»ºè®®å°†æ‰§è¡Œè¿™ç±»æ•°æ®å‡†å¤‡å·¥ä½œçš„æ–‡ä»¶å‘½åä¸º 0-cleanup.Rã€‚æ–‡ä»¶åä¸­çš„ 0 æš—ç¤ºè¿™ä¸ªæ–‡ä»¶åº”è¯¥åœ¨å…¶ä»–ä»»ä½•æ–‡ä»¶ä¹‹å‰è¿è¡Œã€‚\nå¦‚æœä½ çš„è¾“å…¥æ•°æ®æ–‡ä»¶ä¼šéšæ—¶é—´å˜åŒ–ï¼Œä½ å¯èƒ½éœ€è¦è€ƒè™‘å­¦ä¹ ä¸€ä¸ªåƒ targets è¿™æ ·çš„å·¥å…·ï¼Œæ¥è®¾ç½®ä½ çš„æ•°æ®æ¸…ç†ä»£ç ï¼Œä½¿å…¶åœ¨ä»»ä½•è¾“å…¥æ–‡ä»¶è¢«ä¿®æ”¹æ—¶è‡ªåŠ¨é‡æ–°è¿è¡Œã€‚\n\n26.3.6 å¤šæ¬¡ç®€å•è¿­ä»£\nåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åªæ˜¯ç›´æ¥ä»ç£ç›˜åŠ è½½äº†æ•°æ®ï¼Œå¹¶å¹¸è¿åœ°å¾—åˆ°äº†ä¸€ä¸ªæ•´æ´çš„æ•°æ®é›†ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ éœ€è¦è¿›è¡Œä¸€äº›é¢å¤–çš„æ•´ç†å·¥ä½œï¼Œä½ æœ‰ä¸¤ç§åŸºæœ¬é€‰æ‹©ï¼šä½ å¯ä»¥ç”¨ä¸€ä¸ªå¤æ‚çš„å‡½æ•°è¿›è¡Œä¸€è½®è¿­ä»£ï¼Œæˆ–è€…ç”¨ç®€å•çš„å‡½æ•°è¿›è¡Œå¤šè½®è¿­ä»£ã€‚æ ¹æ®æˆ‘ä»¬çš„ç»éªŒï¼Œå¤§å¤šæ•°äººé¦–å…ˆä¼šé€‰æ‹©è¿›è¡Œä¸€æ¬¡å¤æ‚çš„è¿­ä»£ï¼Œä½†é€šå¸¸é€šè¿‡è¿›è¡Œå¤šæ¬¡ç®€å•çš„è¿­ä»£ä¼šæ›´å¥½ã€‚\nä¾‹å¦‚ï¼Œå‡è®¾ä½ æƒ³è¯»å…¥ä¸€å †æ–‡ä»¶ï¼Œè¿‡æ»¤æ‰ç¼ºå¤±å€¼ï¼Œè¿›è¡Œæ•°æ®è½¬æ¢ï¼Œç„¶ååˆå¹¶ã€‚ä¸€ç§æ–¹æ³•æ˜¯ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªæ–‡ä»¶å¹¶æ‰§è¡Œæ‰€æœ‰è¿™äº›æ­¥éª¤ï¼Œç„¶åè°ƒç”¨ map() ä¸€æ¬¡ï¼š\n\nprocess_file &lt;- function(path) {\n  df &lt;- read_csv(path)\n  \n  df |&gt; \n    filter(!is.na(id)) |&gt; \n    mutate(id = tolower(id)) |&gt; \n    pivot_longer(jan:dec, names_to = \"month\")\n}\n\npaths |&gt; \n  map(process_file) |&gt; \n  list_rbind()\n\næˆ–è€…ï¼Œä½ å¯ä»¥å¯¹æ¯ä¸ªæ–‡ä»¶æ‰§è¡Œ process_file() çš„æ¯ä¸€æ­¥ï¼š\n\npaths |&gt; \n  map(read_csv) |&gt; \n  map(\\(df) df |&gt; filter(!is.na(id))) |&gt; \n  map(\\(df) df |&gt; mutate(id = tolower(id))) |&gt; \n  map(\\(df) df |&gt; pivot_longer(jan:dec, names_to = \"month\")) |&gt; \n  list_rbind()\n\næˆ‘ä»¬æ¨èè¿™ç§æ–¹æ³•ï¼Œå› ä¸ºå®ƒèƒ½é˜²æ­¢ä½ åœ¨è½¬å‘å¤„ç†å…¶ä½™æ–‡ä»¶ä¹‹å‰ï¼Œè¿‡åˆ†ä¸“æ³¨äºæŠŠç¬¬ä¸€ä¸ªæ–‡ä»¶å¤„ç†å¾—å®Œç¾æ— ç‘•ã€‚é€šè¿‡åœ¨è¿›è¡Œæ•´ç†å’Œæ¸…ç†æ—¶è€ƒè™‘æ‰€æœ‰æ•°æ®ï¼Œä½ æ›´æœ‰å¯èƒ½è¿›è¡Œæ•´ä½“æ€è€ƒï¼Œå¹¶æœ€ç»ˆå¾—åˆ°æ›´é«˜è´¨é‡çš„ç»“æœã€‚\nåœ¨è¿™ä¸ªç‰¹å®šçš„ä¾‹å­ä¸­ï¼Œè¿˜æœ‰å¦ä¸€ä¸ªå¯ä»¥åšçš„ä¼˜åŒ–ï¼Œå°±æ˜¯æ›´æ—©åœ°å°†æ‰€æœ‰æ•°æ®æ¡†ç»‘å®šåœ¨ä¸€èµ·ã€‚ç„¶åä½ å¯ä»¥ä¾èµ–å¸¸è§„çš„ dplyr è¡Œä¸ºï¼š\n\npaths |&gt; \n  map(read_csv) |&gt; \n  list_rbind() |&gt; \n  filter(!is.na(id)) |&gt; \n  mutate(id = tolower(id)) |&gt; \n  pivot_longer(jan:dec, names_to = \"month\")\n\n\n26.3.7 å¼‚æ„æ•°æ®\nä¸å¹¸çš„æ˜¯ï¼Œæœ‰æ—¶æ— æ³•ç›´æ¥ä» map() è½¬åˆ° list_rbind()ï¼Œå› ä¸ºæ•°æ®æ¡†çš„å¼‚æ„æ€§å¤ªé«˜ï¼Œå¯¼è‡´ list_rbind() è¦ä¹ˆå¤±è´¥ï¼Œè¦ä¹ˆäº§ç”Ÿä¸€ä¸ªä¸å¤ªæœ‰ç”¨çš„æ•°æ®æ¡†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå…ˆåŠ è½½æ‰€æœ‰æ–‡ä»¶ä»ç„¶æ˜¯æœ‰ç”¨çš„ï¼š\n\nfiles &lt;- paths |&gt; \n  map(readxl::read_excel) \n\nç„¶åï¼Œä¸€ä¸ªéå¸¸æœ‰ç”¨çš„ç­–ç•¥æ˜¯æ•è·æ•°æ®æ¡†çš„ç»“æ„ï¼Œä»¥ä¾¿ä½ å¯ä»¥ç”¨ä½ çš„æ•°æ®ç§‘å­¦æŠ€èƒ½æ¥æ¢ç´¢å®ƒã€‚ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨è¿™ä¸ªæ–¹ä¾¿çš„ df_types å‡½æ•°6ï¼Œå®ƒè¿”å›ä¸€ä¸ª tibbleï¼Œæ¯åˆ—ä¸€è¡Œï¼š\n\ndf_types &lt;- function(df) {\n  tibble(\n    col_name = names(df), \n    col_type = map_chr(df, vctrs::vec_ptype_full),\n    n_miss = map_int(df, \\(x) sum(is.na(x)))\n  )\n}\n\ndf_types(gapminder)\n#&gt; # A tibble: 6 Ã— 3\n#&gt;   col_name  col_type  n_miss\n#&gt;   &lt;chr&gt;     &lt;chr&gt;      &lt;int&gt;\n#&gt; 1 year      double         0\n#&gt; 2 country   character      0\n#&gt; 3 continent character      0\n#&gt; 4 lifeExp   double         0\n#&gt; 5 pop       double         0\n#&gt; 6 gdpPercap double         0\n\nç„¶åä½ å¯ä»¥å°†è¿™ä¸ªå‡½æ•°åº”ç”¨äºæ‰€æœ‰æ–‡ä»¶ï¼Œå¹¶å¯èƒ½è¿›è¡Œä¸€äº›è½¬æ¢ï¼Œä»¥ä¾¿æ›´å®¹æ˜“åœ°çœ‹åˆ°å·®å¼‚æ‰€åœ¨ã€‚ä¾‹å¦‚ï¼Œè¿™ä½¿å¾—éªŒè¯æˆ‘ä»¬ä¸€ç›´åœ¨å¤„ç†çš„ gapminder ç”µå­è¡¨æ ¼éƒ½éå¸¸åŒè´¨åŒ–å˜å¾—å®¹æ˜“ï¼š\n\nfiles |&gt; \n  map(df_types) |&gt; \n  list_rbind(names_to = \"file_name\") |&gt; \n  select(-n_miss) |&gt; \n  pivot_wider(names_from = col_name, values_from = col_type)\n#&gt; # A tibble: 12 Ã— 6\n#&gt;   file_name country   continent lifeExp pop    gdpPercap\n#&gt;   &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;    \n#&gt; 1 1952.xlsx character character double  double double   \n#&gt; 2 1957.xlsx character character double  double double   \n#&gt; 3 1962.xlsx character character double  double double   \n#&gt; 4 1967.xlsx character character double  double double   \n#&gt; 5 1972.xlsx character character double  double double   \n#&gt; 6 1977.xlsx character character double  double double   \n#&gt; # â„¹ 6 more rows\n\nå¦‚æœæ–‡ä»¶å…·æœ‰å¼‚æ„æ ¼å¼ï¼Œä½ å¯èƒ½éœ€è¦è¿›è¡Œæ›´å¤šçš„å¤„ç†æ‰èƒ½æˆåŠŸåˆå¹¶å®ƒä»¬ã€‚ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘ä»¬ç°åœ¨è¦è®©ä½ è‡ªå·±å»è§£å†³äº†ï¼Œä½†ä½ å¯èƒ½æƒ³è¯»ä¸€ä¸‹å…³äº map_if() å’Œ map_at() çš„å†…å®¹ã€‚map_if() å…è®¸ä½ æ ¹æ®åˆ—è¡¨å…ƒç´ çš„å€¼æœ‰é€‰æ‹©åœ°ä¿®æ”¹å®ƒä»¬ï¼›map_at() å…è®¸ä½ æ ¹æ®å®ƒä»¬çš„åç§°æœ‰é€‰æ‹©åœ°ä¿®æ”¹å…ƒç´ ã€‚\n\n26.3.8 å¤„ç†å¤±è´¥\næœ‰æ—¶ä½ çš„æ•°æ®ç»“æ„å¯èƒ½è¶³å¤Ÿæ··ä¹±ï¼Œä»¥è‡³äºä½ ç”šè‡³ä¸èƒ½ç”¨ä¸€ä¸ªå‘½ä»¤è¯»å–æ‰€æœ‰æ–‡ä»¶ã€‚ç„¶åä½ ä¼šé‡åˆ° map() çš„ä¸€ä¸ªç¼ºç‚¹ï¼šå®ƒè¦ä¹ˆæ•´ä½“æˆåŠŸï¼Œè¦ä¹ˆæ•´ä½“å¤±è´¥ã€‚map() è¦ä¹ˆæˆåŠŸè¯»å–ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼Œè¦ä¹ˆå› é”™è¯¯è€Œå¤±è´¥ï¼Œä¸€ä¸ªæ–‡ä»¶ä¹Ÿè¯»ä¸è¿›æ¥ã€‚è¿™å¾ˆçƒ¦äººï¼šä¸ºä»€ä¹ˆä¸€ä¸ªå¤±è´¥ä¼šé˜»æ­¢ä½ è®¿é—®æ‰€æœ‰å…¶ä»–æˆåŠŸçš„ç»“æœï¼Ÿ\nå¹¸è¿çš„æ˜¯ï¼Œpurrr æä¾›äº†ä¸€ä¸ªåŠ©æ‰‹æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼špossibly()ã€‚possibly() æ˜¯æ‰€è°“çš„å‡½æ•°æ“ä½œç¬¦ï¼šå®ƒæ¥å—ä¸€ä¸ªå‡½æ•°å¹¶è¿”å›ä¸€ä¸ªè¡Œä¸ºè¢«ä¿®æ”¹çš„å‡½æ•°ã€‚å…·ä½“æ¥è¯´ï¼Œpossibly() å°†ä¸€ä¸ªä¼šå‡ºé”™çš„å‡½æ•°æ”¹å˜ä¸ºè¿”å›ä½ æŒ‡å®šçš„å€¼ï¼š\n\nfiles &lt;- paths |&gt; \n  map(possibly(\\(path) readxl::read_excel(path), NULL))\n\ndata &lt;- files |&gt; list_rbind()\n\nè¿™åœ¨è¿™é‡Œç‰¹åˆ«æœ‰æ•ˆï¼Œå› ä¸º list_rbind()ï¼Œåƒè®¸å¤š tidyverse å‡½æ•°ä¸€æ ·ï¼Œä¼šè‡ªåŠ¨å¿½ç•¥ NULLã€‚\nç°åœ¨ä½ æœ‰äº†æ‰€æœ‰å¯ä»¥è½»æ¾è¯»å–çš„æ•°æ®ï¼Œæ˜¯æ—¶å€™è§£å†³å›°éš¾çš„éƒ¨åˆ†äº†ï¼Œå³æ‰¾å‡ºä¸ºä»€ä¹ˆæœ‰äº›æ–‡ä»¶åŠ è½½å¤±è´¥ä»¥åŠè¯¥æ€ä¹ˆå¤„ç†ã€‚é¦–å…ˆè·å–å¤±è´¥çš„è·¯å¾„ï¼š\n\nfailed &lt;- map_vec(files, is.null)\npaths[failed]\n#&gt; character(0)\n\nç„¶åå¯¹æ¯ä¸ªå¤±è´¥çš„è·¯å¾„å†æ¬¡è°ƒç”¨å¯¼å…¥å‡½æ•°ï¼Œæ‰¾å‡ºé—®é¢˜æ‰€åœ¨ã€‚",
    "crumbs": [
      "ç¼–ç¨‹",
      "<span class='chapter-number'>26</span>Â  <span class='chapter-title'>è¿­ä»£</span>"
    ]
  },
  {
    "objectID": "iteration.html#ä¿å­˜å¤šä¸ªè¾“å‡º",
    "href": "iteration.html#ä¿å­˜å¤šä¸ªè¾“å‡º",
    "title": "26Â  è¿­ä»£",
    "section": "\n26.4 ä¿å­˜å¤šä¸ªè¾“å‡º",
    "text": "26.4 ä¿å­˜å¤šä¸ªè¾“å‡º\nåœ¨ä¸Šä¸€èŠ‚ä¸­ï¼Œä½ å­¦ä¹ äº† map()ï¼Œå®ƒå¯¹äºå°†å¤šä¸ªæ–‡ä»¶è¯»å…¥å•ä¸ªå¯¹è±¡å¾ˆæœ‰ç”¨ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨ä¸€ä¸ªç›¸åçš„é—®é¢˜ï¼šå¦‚ä½•å°†ä¸€ä¸ªæˆ–å¤šä¸ª R å¯¹è±¡ä¿å­˜åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ä¸­ï¼Ÿæˆ‘ä»¬å°†é€šè¿‡ä¸‰ä¸ªä¾‹å­æ¥æ¢è®¨è¿™ä¸ªæŒ‘æˆ˜ï¼š\n\nå°†å¤šä¸ªæ•°æ®æ¡†ä¿å­˜åˆ°ä¸€ä¸ªæ•°æ®åº“ä¸­ã€‚\nå°†å¤šä¸ªæ•°æ®æ¡†ä¿å­˜åˆ°å¤šä¸ª .csv æ–‡ä»¶ä¸­ã€‚\nå°†å¤šä¸ªå›¾ä¿å­˜åˆ°å¤šä¸ª .png æ–‡ä»¶ä¸­ã€‚\n\n\n26.4.1 å†™å…¥æ•°æ®åº“\næœ‰æ—¶åœ¨åŒæ—¶å¤„ç†è®¸å¤šæ–‡ä»¶æ—¶ï¼Œä¸å¯èƒ½ä¸€æ¬¡æ€§å°†æ‰€æœ‰æ•°æ®éƒ½è£…å…¥å†…å­˜ï¼Œä¹Ÿå°±æ— æ³•æ‰§è¡Œ map(files, read_csv)ã€‚å¤„ç†è¿™ä¸ªé—®é¢˜çš„ä¸€ç§æ–¹æ³•æ˜¯å°†æ•°æ®åŠ è½½åˆ°æ•°æ®åº“ä¸­ï¼Œè¿™æ ·ä½ å°±å¯ä»¥ç”¨ dbplyr åªè®¿é—®ä½ éœ€è¦çš„éƒ¨åˆ†ã€‚\nå¦‚æœä½ å¹¸è¿çš„è¯ï¼Œä½ æ­£åœ¨ä½¿ç”¨çš„æ•°æ®åº“åŒ…ä¼šæä¾›ä¸€ä¸ªæ–¹ä¾¿çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥æ”¶ä¸€ä¸ªè·¯å¾„å‘é‡å¹¶å°†å®ƒä»¬å…¨éƒ¨åŠ è½½åˆ°æ•°æ®åº“ä¸­ã€‚duckdb çš„ duckdb_read_csv() å°±æ˜¯è¿™ç§æƒ…å†µï¼š\n\ncon &lt;- DBI::dbConnect(duckdb::duckdb())\nduckdb::duckdb_read_csv(con, \"gapminder\", paths)\n\nè¿™åœ¨è¿™é‡Œä¼šå¾ˆå¥½ç”¨ï¼Œä½†æˆ‘ä»¬æ²¡æœ‰ csv æ–‡ä»¶ï¼Œè€Œæ˜¯ Excel ç”µå­è¡¨æ ¼ã€‚æ‰€ä»¥æˆ‘ä»¬å¾—â€œæ‰‹åŠ¨â€æ¥åšã€‚å­¦ä¹ æ‰‹åŠ¨æ“ä½œä¹Ÿèƒ½å¸®åŠ©ä½ åœ¨æœ‰ä¸€å † csv æ–‡ä»¶ï¼Œè€Œä½ æ­£åœ¨ä½¿ç”¨çš„æ•°æ®åº“æ²¡æœ‰ä¸€ä¸ªèƒ½ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰æ–‡ä»¶çš„å‡½æ•°æ—¶ã€‚\næˆ‘ä»¬éœ€è¦ä»åˆ›å»ºä¸€ä¸ªæˆ‘ä»¬å°†ç”¨æ•°æ®å¡«å……çš„è¡¨å¼€å§‹ã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯åˆ›å»ºä¸€ä¸ªæ¨¡æ¿ï¼Œä¸€ä¸ªåŒ…å«æˆ‘ä»¬æƒ³è¦çš„æ‰€æœ‰åˆ—ä½†åªåŒ…å«éƒ¨åˆ†æ•°æ®çš„è™šæ‹Ÿæ•°æ®æ¡†ã€‚å¯¹äº gapminder æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¯»å–å•ä¸ªæ–‡ä»¶å¹¶å‘å…¶æ·»åŠ å¹´ä»½æ¥åˆ¶ä½œè¯¥æ¨¡æ¿ï¼š\n\ntemplate &lt;- readxl::read_excel(paths[[1]])\ntemplate$year &lt;- 1952\ntemplate\n#&gt; # A tibble: 142 Ã— 6\n#&gt;   country     continent lifeExp      pop gdpPercap  year\n#&gt;   &lt;chr&gt;       &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1 Afghanistan Asia         28.8  8425333      779.  1952\n#&gt; 2 Albania     Europe       55.2  1282697     1601.  1952\n#&gt; 3 Algeria     Africa       43.1  9279525     2449.  1952\n#&gt; 4 Angola      Africa       30.0  4232095     3521.  1952\n#&gt; 5 Argentina   Americas     62.5 17876956     5911.  1952\n#&gt; 6 Australia   Oceania      69.1  8691212    10040.  1952\n#&gt; # â„¹ 136 more rows\n\nç°åœ¨æˆ‘ä»¬å¯ä»¥è¿æ¥åˆ°æ•°æ®åº“ï¼Œå¹¶ä½¿ç”¨ DBI::dbCreateTable() å°†æˆ‘ä»¬çš„æ¨¡æ¿å˜æˆä¸€ä¸ªæ•°æ®åº“è¡¨ï¼š\n\ncon &lt;- DBI::dbConnect(duckdb::duckdb())\nDBI::dbCreateTable(con, \"gapminder\", template)\n\ndbCreateTable() ä¸ä½¿ç”¨ template ä¸­çš„æ•°æ®ï¼Œåªä½¿ç”¨å˜é‡åå’Œç±»å‹ã€‚æ‰€ä»¥å¦‚æœæˆ‘ä»¬ç°åœ¨æ£€æŸ¥ gapminder è¡¨ï¼Œä½ ä¼šçœ‹åˆ°å®ƒæ˜¯ç©ºçš„ï¼Œä½†å®ƒæœ‰æˆ‘ä»¬éœ€è¦çš„å˜é‡å’Œæˆ‘ä»¬æœŸæœ›çš„ç±»å‹ï¼š\n\ncon |&gt; tbl(\"gapminder\")\n#&gt; # Source:   table&lt;gapminder&gt; [?? x 6]\n#&gt; # Database: DuckDB v1.3.1 [14913@Windows 10 x64:R 4.5.1/:memory:]\n#&gt; # â„¹ 6 variables: country &lt;chr&gt;, continent &lt;chr&gt;, lifeExp &lt;dbl&gt;, pop &lt;dbl&gt;,\n#&gt; #   gdpPercap &lt;dbl&gt;, year &lt;dbl&gt;\n\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—å•ä¸ªæ–‡ä»¶è·¯å¾„ï¼Œå°†å…¶è¯»å…¥ Rï¼Œå¹¶å°†ç»“æœæ·»åŠ åˆ° gapminder è¡¨ä¸­ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ç»“åˆ read_excel() å’Œ DBI::dbAppendTable() æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼š\n\nappend_file &lt;- function(path) {\n  df &lt;- readxl::read_excel(path)\n  df$year &lt;- parse_number(basename(path))\n  \n  DBI::dbAppendTable(con, \"gapminder\", df)\n}\n\nç°åœ¨æˆ‘ä»¬éœ€è¦å¯¹ paths çš„æ¯ä¸ªå…ƒç´ è°ƒç”¨ä¸€æ¬¡ append_file()ã€‚è¿™å½“ç„¶å¯ä»¥ç”¨ map() æ¥å®ç°ï¼š\n\npaths |&gt; map(append_file)\n\nä½†æˆ‘ä»¬ä¸å…³å¿ƒ append_file() çš„è¾“å‡ºï¼Œæ‰€ä»¥ä½¿ç”¨ walk() ä¼šæ¯” map() ç¨å¾®å¥½ä¸€äº›ã€‚walk() çš„ä½œç”¨ä¸ map() å®Œå…¨ç›¸åŒï¼Œä½†ä¼šä¸¢å¼ƒè¾“å‡ºï¼š\n\npaths |&gt; walk(append_file)\n\nç°åœ¨æˆ‘ä»¬å¯ä»¥çœ‹çœ‹æˆ‘ä»¬çš„è¡¨ä¸­æ˜¯å¦åŒ…å«äº†æ‰€æœ‰æ•°æ®ï¼š\n\ncon |&gt; \n  tbl(\"gapminder\") |&gt; \n  count(year)\n#&gt; # Source:   SQL [?? x 2]\n#&gt; # Database: DuckDB v1.3.1 [14913@Windows 10 x64:R 4.5.1/:memory:]\n#&gt;    year     n\n#&gt;   &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1  1972   142\n#&gt; 2  1992   142\n#&gt; 3  1997   142\n#&gt; 4  2002   142\n#&gt; 5  1977   142\n#&gt; 6  1952   142\n#&gt; # â„¹ more rows\n\n\n26.4.2 å†™å…¥ csv æ–‡ä»¶\nå¦‚æœæˆ‘ä»¬æƒ³ä¸ºæ¯ä¸ªç»„å†™å…¥å¤šä¸ª csv æ–‡ä»¶ï¼ŒåŸºæœ¬åŸç†æ˜¯ç›¸åŒçš„ã€‚è®©æˆ‘ä»¬å‡è®¾æˆ‘ä»¬æƒ³å– ggplot2::diamonds æ•°æ®ï¼Œå¹¶ä¸ºæ¯ä¸ª clarity ä¿å­˜ä¸€ä¸ª csv æ–‡ä»¶ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºé‚£äº›å•ç‹¬çš„æ•°æ®é›†ã€‚æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½†æœ‰ä¸€ç§æˆ‘ä»¬ç‰¹åˆ«å–œæ¬¢çš„æ–¹æ³•ï¼šgroup_nest()ã€‚\n\nby_clarity &lt;- diamonds |&gt; \n  group_nest(clarity)\n\nby_clarity\n#&gt; # A tibble: 8 Ã— 2\n#&gt;   clarity               data\n#&gt;   &lt;ord&gt;   &lt;list&lt;tibble[,9]&gt;&gt;\n#&gt; 1 I1               [741 Ã— 9]\n#&gt; 2 SI2            [9,194 Ã— 9]\n#&gt; 3 SI1           [13,065 Ã— 9]\n#&gt; 4 VS2           [12,258 Ã— 9]\n#&gt; 5 VS1            [8,171 Ã— 9]\n#&gt; 6 VVS2           [5,066 Ã— 9]\n#&gt; # â„¹ 2 more rows\n\nè¿™ç»™äº†æˆ‘ä»¬ä¸€ä¸ªæœ‰å…«è¡Œä¸¤åˆ—çš„æ–° tibbleã€‚clarity æ˜¯æˆ‘ä»¬çš„åˆ†ç»„å˜é‡ï¼Œdata æ˜¯ä¸€ä¸ªåˆ—è¡¨åˆ—ï¼Œå…¶ä¸­åŒ…å« clarity æ¯ä¸ªå”¯ä¸€å€¼å¯¹åº”çš„ä¸€ä¸ª tibbleï¼š\n\nby_clarity$data[[1]]\n#&gt; # A tibble: 741 Ã— 9\n#&gt;   carat cut       color depth table price     x     y     z\n#&gt;   &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1  0.32 Premium   E      60.9    58   345  4.38  4.42  2.68\n#&gt; 2  1.17 Very Good J      60.2    61  2774  6.83  6.9   4.13\n#&gt; 3  1.01 Premium   F      61.8    60  2781  6.39  6.36  3.94\n#&gt; 4  1.01 Fair      E      64.5    58  2788  6.29  6.21  4.03\n#&gt; 5  0.96 Ideal     F      60.7    55  2801  6.37  6.41  3.88\n#&gt; 6  1.04 Premium   G      62.2    58  2801  6.46  6.41  4   \n#&gt; # â„¹ 735 more rows\n\nè¶çƒ­æ‰“é“ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç»™å‡ºè¾“å‡ºæ–‡ä»¶åçš„åˆ—ï¼Œä½¿ç”¨ mutate() å’Œ str_glue()ï¼š\n\nby_clarity &lt;- by_clarity |&gt; \n  mutate(path = str_glue(\"diamonds-{clarity}.csv\"))\n\nby_clarity\n#&gt; # A tibble: 8 Ã— 3\n#&gt;   clarity               data path             \n#&gt;   &lt;ord&gt;   &lt;list&lt;tibble[,9]&gt;&gt; &lt;glue&gt;           \n#&gt; 1 I1               [741 Ã— 9] diamonds-I1.csv  \n#&gt; 2 SI2            [9,194 Ã— 9] diamonds-SI2.csv \n#&gt; 3 SI1           [13,065 Ã— 9] diamonds-SI1.csv \n#&gt; 4 VS2           [12,258 Ã— 9] diamonds-VS2.csv \n#&gt; 5 VS1            [8,171 Ã— 9] diamonds-VS1.csv \n#&gt; 6 VVS2           [5,066 Ã— 9] diamonds-VVS2.csv\n#&gt; # â„¹ 2 more rows\n\næ‰€ä»¥å¦‚æœæˆ‘ä»¬è¦æ‰‹åŠ¨ä¿å­˜è¿™äº›æ•°æ®æ¡†ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šè¿™æ ·å†™ï¼š\n\nwrite_csv(by_clarity$data[[1]], by_clarity$path[[1]])\nwrite_csv(by_clarity$data[[2]], by_clarity$path[[2]])\nwrite_csv(by_clarity$data[[3]], by_clarity$path[[3]])\n...\nwrite_csv(by_clarity$by_clarity[[8]], by_clarity$path[[8]])\n\nè¿™ä¸æˆ‘ä»¬ä¹‹å‰ä½¿ç”¨ map() çš„æƒ…å†µæœ‰ç‚¹ä¸åŒï¼Œå› ä¸ºæœ‰ä¸¤ä¸ªå‚æ•°åœ¨å˜åŒ–ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªã€‚è¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼šmap2()ï¼Œå®ƒåŒæ—¶æ”¹å˜ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå‚æ•°ã€‚è€Œä¸”å› ä¸ºæˆ‘ä»¬åŒæ ·ä¸å…³å¿ƒè¾“å‡ºï¼Œæ‰€ä»¥æˆ‘ä»¬æƒ³è¦ç”¨ walk2() è€Œä¸æ˜¯ map2()ã€‚è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†ï¼š\n\nwalk2(by_clarity$data, by_clarity$path, write_csv)\n\n\n26.4.3 ä¿å­˜å›¾è¡¨\næˆ‘ä»¬å¯ä»¥é‡‡ç”¨åŒæ ·çš„åŸºæœ¬æ–¹æ³•æ¥åˆ›å»ºå¤šä¸ªå›¾è¡¨ã€‚è®©æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªå‡½æ•°æ¥ç»˜åˆ¶æˆ‘ä»¬æƒ³è¦çš„å›¾è¡¨ï¼š\n\ncarat_histogram &lt;- function(df) {\n  ggplot(df, aes(x = carat)) + geom_histogram(binwidth = 0.1)  \n}\n\ncarat_histogram(by_clarity$data[[1]])\n\n\n\n\n\n\n\nç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ map() æ¥åˆ›å»ºä¸€ä¸ªåŒ…å«å¤šä¸ªå›¾è¡¨7åŠå…¶æœ€ç»ˆæ–‡ä»¶è·¯å¾„çš„åˆ—è¡¨ï¼š\n\nby_clarity &lt;- by_clarity |&gt; \n  mutate(\n    plot = map(data, carat_histogram),\n    path = str_glue(\"clarity-{clarity}.png\")\n  )\n\nç„¶åä½¿ç”¨ walk2() é…åˆ ggsave() æ¥ä¿å­˜æ¯ä¸ªå›¾è¡¨ï¼š\n\nwalk2(\n  by_clarity$path,\n  by_clarity$plot,\n  \\(path, plot) ggsave(path, plot, width = 6, height = 6)\n)\n\nè¿™æ˜¯ä»¥ä¸‹ä»£ç çš„ç®€å†™ï¼š\n\nggsave(by_clarity$path[[1]], by_clarity$plot[[1]], width = 6, height = 6)\nggsave(by_clarity$path[[2]], by_clarity$plot[[2]], width = 6, height = 6)\nggsave(by_clarity$path[[3]], by_clarity$plot[[3]], width = 6, height = 6)\n...\nggsave(by_clarity$path[[8]], by_clarity$plot[[8]], width = 6, height = 6)",
    "crumbs": [
      "ç¼–ç¨‹",
      "<span class='chapter-number'>26</span>Â  <span class='chapter-title'>è¿­ä»£</span>"
    ]
  },
  {
    "objectID": "iteration.html#æ€»ç»“",
    "href": "iteration.html#æ€»ç»“",
    "title": "26Â  è¿­ä»£",
    "section": "\n26.5 æ€»ç»“",
    "text": "26.5 æ€»ç»“\nåœ¨æœ¬ç« ä¸­ï¼Œä½ å·²ç»çœ‹åˆ°äº†å¦‚ä½•ä½¿ç”¨æ˜¾å¼è¿­ä»£æ¥è§£å†³æ•°æ®ç§‘å­¦ä¸­ç»å¸¸å‡ºç°çš„ä¸‰ä¸ªé—®é¢˜ï¼šæ“ä½œå¤šä¸ªåˆ—ã€è¯»å–å¤šä¸ªæ–‡ä»¶ä»¥åŠä¿å­˜å¤šä¸ªè¾“å‡ºã€‚ä½†æ€»çš„æ¥è¯´ï¼Œè¿­ä»£æ˜¯ä¸€ç§è¶…èƒ½åŠ›ï¼šå¦‚æœä½ çŸ¥é“æ­£ç¡®çš„è¿­ä»£æŠ€å·§ï¼Œä½ å¯ä»¥è½»æ¾åœ°ä»è§£å†³ä¸€ä¸ªé—®é¢˜æ‰©å±•åˆ°è§£å†³æ‰€æœ‰é—®é¢˜ã€‚ä¸€æ—¦ä½ æŒæ¡äº†æœ¬ç« ä¸­çš„æŠ€æœ¯ï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½ é€šè¿‡é˜…è¯»ã€ŠAdvanced Rã€‹çš„ Functionals ç« èŠ‚å’ŒæŸ¥é˜… purrr ç½‘ç«™æ¥å­¦ä¹ æ›´å¤šå†…å®¹ã€‚\nå¦‚æœä½ å¯¹å…¶ä»–è¯­è¨€ä¸­çš„è¿­ä»£æœ‰å¾ˆå¤šäº†è§£ï¼Œä½ å¯èƒ½ä¼šæƒŠè®¶äºæˆ‘ä»¬æ²¡æœ‰è®¨è®º for å¾ªç¯ã€‚è¿™æ˜¯å› ä¸º R é¢å‘æ•°æ®åˆ†æçš„ç‰¹æ€§æ”¹å˜äº†æˆ‘ä»¬è¿­ä»£çš„æ–¹å¼ï¼šåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ä¾èµ–ç°æœ‰çš„æƒ¯ç”¨æ³•æ¥å¯¹æ¯ä¸€åˆ—æˆ–æ¯ä¸ªç»„æ‰§è¡Œæ“ä½œã€‚è€Œå½“ä½ æ— æ³•è¿™æ ·åšæ—¶ï¼Œä½ é€šå¸¸å¯ä»¥ä½¿ç”¨åƒ map() è¿™æ ·çš„å‡½æ•°å¼ç¼–ç¨‹å·¥å…·ï¼Œå®ƒå¯¹åˆ—è¡¨çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œæ“ä½œã€‚ç„¶è€Œï¼Œä½ ä¼šåœ¨é‡å¤–æ•è·çš„ä»£ç ä¸­çœ‹åˆ° for å¾ªç¯ï¼Œæ‰€ä»¥ä½ å°†åœ¨ä¸‹ä¸€ç« ä¸­å­¦ä¹ å®ƒä»¬ï¼Œå±Šæ—¶æˆ‘ä»¬å°†è®¨è®ºä¸€äº›é‡è¦çš„åŸºç¡€ R å·¥å…·ã€‚",
    "crumbs": [
      "ç¼–ç¨‹",
      "<span class='chapter-number'>26</span>Â  <span class='chapter-title'>è¿­ä»£</span>"
    ]
  },
  {
    "objectID": "iteration.html#footnotes",
    "href": "iteration.html#footnotes",
    "title": "26Â  è¿­ä»£",
    "section": "",
    "text": "åŒ¿åï¼Œå› ä¸ºæˆ‘ä»¬ä»æœªç”¨ &lt;- æ˜ç¡®åœ°ç»™å®ƒå‘½åã€‚ç¨‹åºå‘˜ä»¬ä½¿ç”¨çš„å¦ä¸€ä¸ªæœ¯è¯­æ˜¯â€œlambda å‡½æ•°â€ã€‚â†©ï¸\nåœ¨æ—§ä»£ç ä¸­ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ°ç±»ä¼¼ ~ .x + 1 çš„è¯­æ³•ã€‚è¿™æ˜¯ç¼–å†™åŒ¿åå‡½æ•°çš„å¦ä¸€ç§æ–¹å¼ï¼Œä½†å®ƒåªåœ¨ tidyverse å‡½æ•°å†…éƒ¨æœ‰æ•ˆï¼Œå¹¶ä¸”æ€»æ˜¯ä½¿ç”¨å˜é‡å .xã€‚æˆ‘ä»¬ç°åœ¨æ¨èä½¿ç”¨åŸºç¡€è¯­æ³• \\(x) x + 1ã€‚â†©ï¸\nä½ ç›®å‰æ— æ³•æ›´æ”¹åˆ—çš„é¡ºåºï¼Œä½†å¯ä»¥åœ¨äº‹åä½¿ç”¨ relocate() æˆ–ç±»ä¼¼å‡½æ•°é‡æ–°æ’åºã€‚â†©ï¸\nä¹Ÿè®¸æœ‰ä¸€å¤©ä¼šæœ‰ï¼Œä½†ç›®å‰æˆ‘ä»¬è¿˜æ²¡çœ‹åˆ°å¦‚ä½•å®ç°ã€‚â†©ï¸\nå¦‚æœä½ æœ‰ä¸€ä¸ªåŒ…å«ç›¸åŒæ ¼å¼çš„ csv æ–‡ä»¶çš„ç›®å½•ï¼Œä½ å¯ä»¥ä½¿ç”¨ Section 7.4 ä¸­çš„æŠ€æœ¯ã€‚â†©ï¸\næˆ‘ä»¬ä¸æ‰“ç®—è§£é‡Šå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä½†å¦‚æœä½ æŸ¥çœ‹æ‰€ç”¨å‡½æ•°çš„æ–‡æ¡£ï¼Œä½ åº”è¯¥èƒ½å¼„æ˜ç™½ã€‚â†©ï¸\nä½ å¯ä»¥æ‰“å° by_clarity$plot æ¥è·å¾—ä¸€ä¸ªç²—ç•¥çš„åŠ¨ç”»â€”â€”ä½ ä¼šä¸º plots çš„æ¯ä¸ªå…ƒç´ å¾—åˆ°ä¸€ä¸ªå›¾ã€‚æ³¨æ„ï¼šè¿™åœ¨æˆ‘è¿™é‡Œæ²¡æœ‰å‘ç”Ÿã€‚â†©ï¸",
    "crumbs": [
      "ç¼–ç¨‹",
      "<span class='chapter-number'>26</span>Â  <span class='chapter-title'>è¿­ä»£</span>"
    ]
  },
  {
    "objectID": "base-R.html",
    "href": "base-R.html",
    "title": "27Â  Base R å®æˆ˜æŒ‡å—",
    "section": "",
    "text": "27.1 å¼•è¨€\nä¸ºäº†å®Œæˆç¼–ç¨‹éƒ¨åˆ†çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å°†å¸¦ä½ å¿«é€Ÿæµè§ˆä¸€äº›æœ¬ä¹¦ä¸­æœªæ›¾è®¨è®ºä½†éå¸¸é‡è¦çš„ Base R å‡½æ•°ã€‚ å½“ä½ è¿›è¡Œæ›´å¤šçš„ç¼–ç¨‹å·¥ä½œæ—¶ï¼Œè¿™äº›å·¥å…·ä¼šç‰¹åˆ«æœ‰ç”¨ï¼Œå®ƒä»¬ä¹Ÿå°†å¸®åŠ©ä½ é˜…è¯»åœ¨å®é™…å·¥ä½œä¸­é‡åˆ°çš„ R ä»£ç ã€‚\nåœ¨æ­¤ï¼Œæˆ‘ä»¬æƒ³å†æ¬¡æé†’ä½ ï¼Œtidyverse å¹¶éè§£å†³æ•°æ®ç§‘å­¦é—®é¢˜çš„å”¯ä¸€é€”å¾„ã€‚ æˆ‘ä»¬åœ¨æœ¬ä¹¦ä¸­æ•™æˆ tidyverseï¼Œæ˜¯å› ä¸º tidyverse ç³»åˆ—åŒ…å…±äº«ä¸€å¥—é€šç”¨çš„è®¾è®¡ç†å¿µï¼Œè¿™å¢åŠ äº†å‡½æ•°ä¹‹é—´çš„ä¸€è‡´æ€§ï¼Œä½¿å¾—å­¦ä¹ å’Œä½¿ç”¨æ¯ä¸€ä¸ªæ–°å‡½æ•°æˆ–åŒ…éƒ½å˜å¾—æ›´åŠ å®¹æ˜“ã€‚ ä¸ä½¿ç”¨ Base R æ˜¯ä¸å¯èƒ½ä½¿ç”¨ tidyverse çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å®é™…ä¸Šå·²ç»æ•™äº†ä½ å¤§é‡çš„ Base R å‡½æ•°ï¼šä»ç”¨äºåŠ è½½åŒ…çš„ library()ï¼Œåˆ°ç”¨äºæ•°å€¼æ‘˜è¦çš„ sum() å’Œ mean()ï¼Œå†åˆ°å› å­ (factor)ã€æ—¥æœŸ (date) å’Œ POSIXct æ•°æ®ç±»å‹ï¼Œå½“ç„¶è¿˜æœ‰æ‰€æœ‰åŸºæœ¬è¿ç®—ç¬¦ï¼Œå¦‚ +ã€-ã€/ã€*ã€|ã€& å’Œ !ã€‚ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰é‡ç‚¹ä»‹ç» Base R çš„å·¥ä½œæµç¨‹ï¼Œå› æ­¤åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†é‡ç‚¹ä»‹ç»å…¶ä¸­çš„ä¸€äº›ã€‚\nè¯»å®Œæœ¬ä¹¦åï¼Œä½ å°†å­¦ä¹ åˆ°ä½¿ç”¨ Base Rã€data.table å’Œå…¶ä»–åŒ…æ¥è§£å†³åŒæ ·é—®é¢˜çš„å…¶ä»–æ–¹æ³•ã€‚ å½“ä½ å¼€å§‹é˜…è¯»ä»–äººç¼–å†™çš„ R ä»£ç æ—¶ï¼Œå°¤å…¶æ˜¯åœ¨ä½¿ç”¨ StackOverflow æ—¶ï¼Œä½ æ— ç–‘ä¼šé‡åˆ°è¿™äº›å…¶ä»–æ–¹æ³•ã€‚ ç¼–å†™æ··åˆä½¿ç”¨å¤šç§æ–¹æ³•çš„ä»£ç æ˜¯å®Œå…¨å¯ä»¥çš„ï¼Œä¸è¦è®©ä»»ä½•äººå‘Šè¯‰ä½ è¿™æœ‰ä»€ä¹ˆä¸å¯¹ï¼\nåœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†é‡ç‚¹å…³æ³¨å››ä¸ªä¸»è¦ä¸»é¢˜ï¼šä½¿ç”¨ [ è¿›è¡Œå­é›†é€‰å–ï¼Œä½¿ç”¨ [[ å’Œ $ è¿›è¡Œå­é›†é€‰å–ï¼Œapply å‡½æ•°æ—ï¼Œä»¥åŠ for å¾ªç¯ã€‚ æœ€åï¼Œæˆ‘ä»¬å°†ç®€è¦è®¨è®ºä¸¤ä¸ªå¿…ä¸å¯å°‘çš„ç»˜å›¾å‡½æ•°ã€‚",
    "crumbs": [
      "ç¼–ç¨‹",
      "<span class='chapter-number'>27</span>Â  <span class='chapter-title'>Base R å®æˆ˜æŒ‡å—</span>"
    ]
  },
  {
    "objectID": "base-R.html#å¼•è¨€",
    "href": "base-R.html#å¼•è¨€",
    "title": "27Â  Base R å®æˆ˜æŒ‡å—",
    "section": "",
    "text": "27.1.1 å‰ææ¡ä»¶\nè¿™ä¸ªåŒ…ä¾§é‡äº Base Rï¼Œå› æ­¤æ²¡æœ‰çœŸæ­£çš„å‰ææ¡ä»¶ï¼Œä½†æˆ‘ä»¬å°†åŠ è½½ tidyverse ä»¥ä¾¿è§£é‡Šä¸€äº›å·®å¼‚ã€‚\n\nlibrary(tidyverse)",
    "crumbs": [
      "ç¼–ç¨‹",
      "<span class='chapter-number'>27</span>Â  <span class='chapter-title'>Base R å®æˆ˜æŒ‡å—</span>"
    ]
  },
  {
    "objectID": "base-R.html#sec-subset-many",
    "href": "base-R.html#sec-subset-many",
    "title": "27Â  Base R å®æˆ˜æŒ‡å—",
    "section": "\n27.2 ä½¿ç”¨ [ é€‰å–å¤šä¸ªå…ƒç´ ",
    "text": "27.2 ä½¿ç”¨ [ é€‰å–å¤šä¸ªå…ƒç´ \n[ ç”¨äºä»å‘é‡å’Œæ•°æ®æ¡†ä¸­æå–å­ç»„ä»¶ï¼Œè°ƒç”¨å½¢å¼ä¸º x[i] æˆ– x[i, j]ã€‚ åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å‘ä½ ä»‹ç» [ çš„å¼ºå¤§åŠŸèƒ½ï¼Œé¦–å…ˆå±•ç¤ºå¦‚ä½•å°†å…¶ç”¨äºå‘é‡ï¼Œç„¶åè¯´æ˜åŒæ ·çš„åŸç†å¦‚ä½•ç›´æ¥æ‰©å±•åˆ°äºŒç»´ (2d) ç»“æ„ï¼Œå¦‚æ•°æ®æ¡†ã€‚ æ¥ç€ï¼Œæˆ‘ä»¬å°†é€šè¿‡å±•ç¤ºå„ç§ dplyr åŠ¨è¯æ˜¯å¦‚ä½•ä½œä¸º [ çš„ç‰¹ä¾‹ï¼Œæ¥å¸®åŠ©ä½ å·©å›ºè¿™äº›çŸ¥è¯†ã€‚\n\n27.2.1 å‘é‡å­é›†é€‰å–\nä½ å¯ä»¥ç”¨äº”ç§ä¸»è¦ç±»å‹çš„ä¸œè¥¿æ¥å¯¹å‘é‡è¿›è¡Œå­é›†é€‰å–ï¼Œå³ x[i] ä¸­çš„ i å¯ä»¥æ˜¯ï¼š\n\n\nä¸€ä¸ªæ­£æ•´æ•°å‘é‡ã€‚ ç”¨æ­£æ•´æ•°è¿›è¡Œå­é›†é€‰å–ä¼šä¿ç•™è¿™äº›ä½ç½®ä¸Šçš„å…ƒç´ ï¼š\n\nx &lt;- c(\"one\", \"two\", \"three\", \"four\", \"five\")\nx[c(3, 2, 5)]\n#&gt; [1] \"three\" \"two\"   \"five\"\n\né€šè¿‡é‡å¤ä¸€ä¸ªä½ç½®ï¼Œä½ å®é™…ä¸Šå¯ä»¥å¾—åˆ°æ¯”è¾“å…¥æ›´é•¿çš„è¾“å‡ºï¼Œè¿™ä½¿å¾—â€œå­é›†é€‰å– (subsetting)â€è¿™ä¸ªæœ¯è¯­æœ‰ç‚¹åä¸å‰¯å®ã€‚\n\nx[c(1, 1, 5, 5, 5, 2)]\n#&gt; [1] \"one\"  \"one\"  \"five\" \"five\" \"five\" \"two\"\n\n\n\nä¸€ä¸ªè´Ÿæ•´æ•°å‘é‡ã€‚ è´Ÿæ•°å€¼ä¼šä¸¢å¼ƒæŒ‡å®šä½ç½®çš„å…ƒç´ ï¼š\n\nx[c(-1, -3, -5)]\n#&gt; [1] \"two\"  \"four\"\n\n\n\nä¸€ä¸ªé€»è¾‘å‘é‡ã€‚ ç”¨é€»è¾‘å‘é‡è¿›è¡Œå­é›†é€‰å–ä¼šä¿ç•™æ‰€æœ‰å¯¹åº” TRUE å€¼çš„å€¼ã€‚ è¿™åœ¨ä¸æ¯”è¾ƒå‡½æ•°ç»“åˆä½¿ç”¨æ—¶æœ€ä¸ºæœ‰ç”¨ã€‚\n\nx &lt;- c(10, 3, NA, 5, 8, 1, NA)\n\n# x çš„æ‰€æœ‰éç¼ºå¤±å€¼\nx[!is.na(x)]\n#&gt; [1] 10  3  5  8  1\n\n# x çš„æ‰€æœ‰å¶æ•°ï¼ˆæˆ–ç¼ºå¤±ï¼ï¼‰å€¼\nx[x %% 2 == 0]\n#&gt; [1] 10 NA  8 NA\n\nä¸ filter() ä¸åŒï¼ŒNA ç´¢å¼•å°†åœ¨è¾“å‡ºä¸­ä½œä¸º NA åŒ…å«è¿›æ¥ã€‚\n\n\nä¸€ä¸ªå­—ç¬¦å‘é‡ã€‚ å¦‚æœä½ æœ‰ä¸€ä¸ªå‘½åçš„å‘é‡ï¼Œä½ å¯ä»¥ç”¨å­—ç¬¦å‘é‡æ¥å¯¹å…¶è¿›è¡Œå­é›†é€‰å–ï¼š\n\nx &lt;- c(abc = 1, def = 2, xyz = 5)\nx[c(\"xyz\", \"def\")]\n#&gt; xyz def \n#&gt;   5   2\n\nä¸ä½¿ç”¨æ­£æ•´æ•°è¿›è¡Œå­é›†é€‰å–ä¸€æ ·ï¼Œä½ å¯ä»¥ä½¿ç”¨å­—ç¬¦å‘é‡æ¥å¤åˆ¶å•ä¸ªæ¡ç›®ã€‚\n\nç©ºã€‚ æœ€åä¸€ç§å­é›†é€‰å–æ˜¯ç©ºï¼Œå³ x[]ï¼Œå®ƒè¿”å›å®Œæ•´çš„ xã€‚ è¿™å¯¹äºå‘é‡çš„å­é›†é€‰å–æ²¡ä»€ä¹ˆç”¨ï¼Œä½†æˆ‘ä»¬ç¨åä¼šçœ‹åˆ°ï¼Œåœ¨å¯¹äºŒç»´ç»“æ„ï¼ˆå¦‚ tibbleï¼‰è¿›è¡Œå­é›†é€‰å–æ—¶å®ƒéå¸¸æœ‰ç”¨ã€‚\n\n27.2.2 æ•°æ®æ¡†å­é›†é€‰å–\nä½ å¯ä»¥ç”¨å¾ˆå¤šä¸åŒçš„æ–¹å¼1 å¯¹æ•°æ®æ¡†ä½¿ç”¨ [ï¼Œä½†æœ€é‡è¦çš„æ–¹å¼æ˜¯ä½¿ç”¨ df[rows, cols] ç‹¬ç«‹åœ°é€‰æ‹©è¡Œå’Œåˆ—ã€‚è¿™é‡Œçš„ rows å’Œ cols æ˜¯å¦‚ä¸Šæ‰€è¿°çš„å‘é‡ã€‚ ä¾‹å¦‚ï¼Œdf[rows, ] å’Œ df[, cols] åˆ†åˆ«åªé€‰æ‹©è¡Œæˆ–åªé€‰æ‹©åˆ—ï¼Œä½¿ç”¨ç©ºå­é›†æ¥ä¿ç•™å¦ä¸€ç»´åº¦ã€‚\nè¿™é‡Œæœ‰å‡ ä¸ªä¾‹å­ï¼š\n\ndf &lt;- tibble(\n  x = 1:3, \n  y = c(\"a\", \"e\", \"f\"), \n  z = runif(3)\n)\n\n# é€‰æ‹©ç¬¬ä¸€è¡Œå’Œç¬¬äºŒåˆ—\ndf[1, 2]\n#&gt; # A tibble: 1 Ã— 1\n#&gt;   y    \n#&gt;   &lt;chr&gt;\n#&gt; 1 a\n\n# é€‰æ‹©æ‰€æœ‰è¡Œä»¥åŠ x å’Œ y åˆ—\ndf[, c(\"x\" , \"y\")]\n#&gt; # A tibble: 3 Ã— 2\n#&gt;       x y    \n#&gt;   &lt;int&gt; &lt;chr&gt;\n#&gt; 1     1 a    \n#&gt; 2     2 e    \n#&gt; 3     3 f\n\n# é€‰æ‹© `x` å¤§äº 1 çš„è¡Œå’Œæ‰€æœ‰åˆ—\ndf[df$x &gt; 1, ]\n#&gt; # A tibble: 2 Ã— 3\n#&gt;       x y         z\n#&gt;   &lt;int&gt; &lt;chr&gt; &lt;dbl&gt;\n#&gt; 1     2 e     0.834\n#&gt; 2     3 f     0.601\n\næˆ‘ä»¬ç¨åä¼šå›åˆ° $ï¼Œä½†ä½ åº”è¯¥èƒ½ä»ä¸Šä¸‹æ–‡ä¸­çŒœå‡º df$x çš„ä½œç”¨ï¼šå®ƒä» df ä¸­æå– x å˜é‡ã€‚ æˆ‘ä»¬åœ¨è¿™é‡Œéœ€è¦ä½¿ç”¨å®ƒï¼Œå› ä¸º [ ä¸ä½¿ç”¨æ•´æ´æ±‚å€¼ (tidy evaluation)ï¼Œæ‰€ä»¥ä½ éœ€è¦æ˜ç¡® x å˜é‡çš„æ¥æºã€‚\nåœ¨ [ çš„ä½¿ç”¨ä¸Šï¼Œtibble å’Œ data frame ä¹‹é—´æœ‰ä¸€ä¸ªé‡è¦çš„åŒºåˆ«ã€‚ åœ¨æœ¬ä¹¦ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦ä½¿ç”¨ tibbleï¼Œå®ƒæ˜¯ä¸€ç§æ•°æ®æ¡†ï¼Œä½†å®ƒä»¬è°ƒæ•´äº†ä¸€äº›è¡Œä¸ºä»¥ä½¿ä½ çš„å·¥ä½œæ›´è½»æ¾ä¸€äº›ã€‚ åœ¨å¤§å¤šæ•°åœ°æ–¹ï¼Œä½ å¯ä»¥äº’æ¢ä½¿ç”¨â€œtibbleâ€å’Œâ€œdata frameâ€ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬æƒ³ç‰¹åˆ«æŒ‡å‡º R çš„å†…ç½® data frame æ—¶ï¼Œæˆ‘ä»¬ä¼šå†™æˆ data.frameã€‚ å¦‚æœ df æ˜¯ä¸€ä¸ª data.frameï¼Œé‚£ä¹ˆå¦‚æœ col é€‰æ‹©å•ä¸ªåˆ—ï¼Œdf[, cols] å°†è¿”å›ä¸€ä¸ªå‘é‡ï¼›å¦‚æœå®ƒé€‰æ‹©å¤šä¸ªåˆ—ï¼Œåˆ™è¿”å›ä¸€ä¸ªæ•°æ®æ¡†ã€‚ å¦‚æœ df æ˜¯ä¸€ä¸ª tibbleï¼Œé‚£ä¹ˆ [ å°†å§‹ç»ˆè¿”å›ä¸€ä¸ª tibbleã€‚\n\ndf1 &lt;- data.frame(x = 1:3)\ndf1[, \"x\"]\n#&gt; [1] 1 2 3\n\ndf2 &lt;- tibble(x = 1:3)\ndf2[, \"x\"]\n#&gt; # A tibble: 3 Ã— 1\n#&gt;       x\n#&gt;   &lt;int&gt;\n#&gt; 1     1\n#&gt; 2     2\n#&gt; 3     3\n\nä¸€ç§é¿å…ä¸ data.frame äº§ç”Ÿè¿™ç§æ­§ä¹‰çš„æ–¹æ³•æ˜¯æ˜ç¡®æŒ‡å®š drop = FALSEï¼š\n\ndf1[, \"x\" , drop = FALSE]\n#&gt;   x\n#&gt; 1 1\n#&gt; 2 2\n#&gt; 3 3\n\n\n27.2.3 dplyr ç­‰ä»·æ“ä½œ\nä¸€äº› dplyr åŠ¨è¯æ˜¯ [ çš„ç‰¹ä¾‹ï¼š\n\n\nfilter() ç­‰ä»·äºä½¿ç”¨é€»è¾‘å‘é‡å¯¹è¡Œè¿›è¡Œå­é›†é€‰å–ï¼Œå¹¶æ³¨æ„æ’é™¤ç¼ºå¤±å€¼ï¼š\n\ndf &lt;- tibble(\n  x = c(2, 3, 1, 1, NA), \n  y = letters[1:5], \n  z = runif(5)\n)\ndf |&gt; filter(x &gt; 1)\n\n# ç­‰åŒäº\ndf[!is.na(df$x) & df$x &gt; 1, ]\n\nåœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¦ä¸€ä¸ªå¸¸è§çš„æŠ€å·§æ˜¯ä½¿ç”¨ which() æ¥è¾¾åˆ°ä¸¢å¼ƒç¼ºå¤±å€¼çš„å‰¯ä½œç”¨ï¼šdf[which(df$x &gt; 1), ]ã€‚\n\n\narrange() ç­‰ä»·äºä½¿ç”¨æ•´æ•°å‘é‡å¯¹è¡Œè¿›è¡Œå­é›†é€‰å–ï¼Œè¿™ä¸ªå‘é‡é€šå¸¸ç”± order() åˆ›å»ºï¼š\n\ndf |&gt; arrange(x, y)\n\n# ç­‰åŒäº\ndf[order(df$x, df$y), ]\n\nä½ å¯ä»¥ä½¿ç”¨ order(decreasing = TRUE) æ¥æŒ‰é™åºå¯¹æ‰€æœ‰åˆ—è¿›è¡Œæ’åºï¼Œæˆ–è€…ä½¿ç”¨ -rank(col) æ¥å•ç‹¬æŒ‰é™åºå¯¹åˆ—è¿›è¡Œæ’åºã€‚\n\n\nselect() å’Œ relocate() éƒ½ç±»ä¼¼äºä½¿ç”¨å­—ç¬¦å‘é‡å¯¹åˆ—è¿›è¡Œå­é›†é€‰å–ï¼š\n\ndf |&gt; select(x, z)\n\n# ç­‰åŒäº\ndf[, c(\"x\", \"z\")]\n\n\n\nBase R è¿˜æä¾›äº†ä¸€ä¸ªç»“åˆäº† filter() å’Œ select() åŠŸèƒ½çš„å‡½æ•°2ï¼Œåä¸º subset()ï¼š\n\ndf |&gt; \n  filter(x &gt; 1) |&gt; \n  select(y, z)\n#&gt; # A tibble: 2 Ã— 2\n#&gt;   y           z\n#&gt;   &lt;chr&gt;   &lt;dbl&gt;\n#&gt; 1 a     0.157  \n#&gt; 2 b     0.00740\n\n\n# ç­‰åŒäº\ndf |&gt; subset(x &gt; 1, c(y, z))\n\nè¿™ä¸ªå‡½æ•°æ˜¯ dplyr è®¸å¤šè¯­æ³•è®¾è®¡çš„çµæ„Ÿæ¥æºã€‚\n\n27.2.4 ç»ƒä¹ \n\n\nåˆ›å»ºå‡½æ•°ï¼Œè¾“å…¥ä¸€ä¸ªå‘é‡ï¼Œç„¶åè¿”å›ï¼š\n\nå¶æ•°ä½ç½®ä¸Šçš„å…ƒç´ ã€‚\né™¤äº†æœ€åä¸€ä¸ªå€¼ä¹‹å¤–çš„æ‰€æœ‰å…ƒç´ ã€‚\nåªæœ‰å¶æ•°å€¼ï¼ˆå¹¶ä¸”æ²¡æœ‰ç¼ºå¤±å€¼ï¼‰ã€‚\n\n\nä¸ºä»€ä¹ˆ x[-which(x &gt; 0)] å’Œ x[x &lt;= 0] ä¸ä¸€æ ·ï¼Ÿ é˜…è¯» which() çš„æ–‡æ¡£å¹¶åšä¸€äº›å®éªŒæ¥æ‰¾å‡ºç­”æ¡ˆã€‚",
    "crumbs": [
      "ç¼–ç¨‹",
      "<span class='chapter-number'>27</span>Â  <span class='chapter-title'>Base R å®æˆ˜æŒ‡å—</span>"
    ]
  },
  {
    "objectID": "base-R.html#sec-subset-one",
    "href": "base-R.html#sec-subset-one",
    "title": "27Â  Base R å®æˆ˜æŒ‡å—",
    "section": "\n27.3 ä½¿ç”¨ $ å’Œ [[ é€‰å–å•ä¸ªå…ƒç´ ",
    "text": "27.3 ä½¿ç”¨ $ å’Œ [[ é€‰å–å•ä¸ªå…ƒç´ \n[ ç”¨äºé€‰å–å¤šä¸ªå…ƒç´ ï¼Œä¸ä¹‹é…å¯¹çš„æ˜¯ [[ å’Œ $ï¼Œå®ƒä»¬ç”¨äºæå–å•ä¸ªå…ƒç´ ã€‚ åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å‘ä½ å±•ç¤ºå¦‚ä½•ä½¿ç”¨ [[ å’Œ $ ä»æ•°æ®æ¡†ä¸­æå–åˆ—ï¼Œè®¨è®º data.frame å’Œ tibble ä¹‹é—´æ›´å¤šçš„å‡ ä¸ªåŒºåˆ«ï¼Œå¹¶å¼ºè°ƒåœ¨ä¸åˆ—è¡¨ä¸€èµ·ä½¿ç”¨æ—¶ [ å’Œ [[ ä¹‹é—´çš„ä¸€äº›é‡è¦å·®å¼‚ã€‚\n\n27.3.1 æ•°æ®æ¡†\n[[ å’Œ $ å¯ä»¥ç”¨æ¥ä»æ•°æ®æ¡†ä¸­æå–åˆ—ã€‚ [[ å¯ä»¥é€šè¿‡ä½ç½®æˆ–åç§°è®¿é—®ï¼Œè€Œ $ ä¸“é—¨ç”¨äºæŒ‰åç§°è®¿é—®ï¼š\n\ntb &lt;- tibble(\n  x = 1:4,\n  y = c(10, 4, 1, 21)\n)\n\n# æŒ‰ä½ç½®\ntb[[1]]\n#&gt; [1] 1 2 3 4\n\n# æŒ‰åç§°\ntb[[\"x\"]]\n#&gt; [1] 1 2 3 4\ntb$x\n#&gt; [1] 1 2 3 4\n\nå®ƒä»¬ä¹Ÿå¯ä»¥ç”¨æ¥åˆ›å»ºæ–°åˆ—ï¼Œè¿™æ˜¯ mutate() åœ¨ Base R ä¸­çš„ç­‰ä»·æ“ä½œï¼š\n\ntb$z &lt;- tb$x + tb$y\ntb\n#&gt; # A tibble: 4 Ã— 3\n#&gt;       x     y     z\n#&gt;   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;\n#&gt; 1     1    10    11\n#&gt; 2     2     4     6\n#&gt; 3     3     1     4\n#&gt; 4     4    21    25\n\nè¿˜æœ‰å…¶ä»–å‡ ç§ Base R åˆ›å»ºæ–°åˆ—çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬ä½¿ç”¨ transform()ã€with() å’Œ within()ã€‚ Hadley åœ¨ https://gist.github.com/hadley/1986a273e384fb2d4d752c18ed71bedf æ”¶é›†äº†ä¸€äº›ä¾‹å­ã€‚\nåœ¨è¿›è¡Œå¿«é€Ÿæ‘˜è¦æ—¶ï¼Œç›´æ¥ä½¿ç”¨ $ å¾ˆæ–¹ä¾¿ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœä½ åªæƒ³æ‰¾å‡ºæœ€å¤§é’»çŸ³çš„å…‹æ‹‰æ•°æˆ– cut çš„å¯èƒ½å€¼ï¼Œå°±ä¸éœ€è¦ä½¿ç”¨ summarize()ï¼š\n\nmax(diamonds$carat)\n#&gt; [1] 5.01\n\nlevels(diamonds$cut)\n#&gt; [1] \"Fair\"      \"Good\"      \"Very Good\" \"Premium\"   \"Ideal\"\n\ndplyr ä¹Ÿæä¾›äº†ä¸€ä¸ªç­‰ä»·äº [[/$ çš„å‡½æ•°ï¼Œæˆ‘ä»¬åœ¨ Chapter 3 ä¸­æ²¡æœ‰æåˆ°ï¼špull()ã€‚ pull() æ¥å—ä¸€ä¸ªå˜é‡åæˆ–å˜é‡ä½ç½®ï¼Œå¹¶åªè¿”å›é‚£ä¸€åˆ—ã€‚ è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥é‡å†™ä¸Šé¢çš„ä»£ç æ¥ä½¿ç”¨ç®¡é“ï¼š\n\ndiamonds |&gt; pull(carat) |&gt; max()\n#&gt; [1] 5.01\n\ndiamonds |&gt; pull(cut) |&gt; levels()\n#&gt; [1] \"Fair\"      \"Good\"      \"Very Good\" \"Premium\"   \"Ideal\"\n\n\n27.3.2 Tibbles\nåœ¨ $ çš„ä½¿ç”¨ä¸Šï¼Œtibble å’Œ Base data.frame ä¹‹é—´æœ‰å‡ ä¸ªé‡è¦çš„åŒºåˆ«ã€‚ Data frame ä¼šåŒ¹é…ä»»ä½•å˜é‡åçš„å‰ç¼€ï¼ˆå³æ‰€è°“çš„éƒ¨åˆ†åŒ¹é… (partial matching)ï¼‰ï¼Œå¹¶ä¸”å¦‚æœä¸€åˆ—ä¸å­˜åœ¨ä¹Ÿä¸ä¼šæŠ¥é”™ï¼š\n\ndf &lt;- data.frame(x1 = 1)\ndf$x\n#&gt; [1] 1\ndf$z\n#&gt; NULL\n\nTibble æ›´ä¸ºä¸¥æ ¼ï¼šå®ƒä»¬åªç²¾ç¡®åŒ¹é…å˜é‡åï¼Œå¹¶ä¸”å¦‚æœä½ å°è¯•è®¿é—®çš„åˆ—ä¸å­˜åœ¨ï¼Œå®ƒä»¬ä¼šç”Ÿæˆä¸€ä¸ªè­¦å‘Šï¼š\n\ntb &lt;- tibble(x1 = 1)\n\ntb$x\n#&gt; Warning: Unknown or uninitialised column: `x`.\n#&gt; NULL\ntb$z\n#&gt; Warning: Unknown or uninitialised column: `z`.\n#&gt; NULL\n\nå› æ­¤ï¼Œæˆ‘ä»¬æœ‰æ—¶å¼€ç©ç¬‘è¯´ tibble æ˜¯â€œåˆæ‡’åˆæš´èºâ€ï¼šå®ƒä»¬åšå¾—æ›´å°‘ï¼ŒæŠ±æ€¨å¾—æ›´å¤šã€‚\n\n27.3.3 åˆ—è¡¨\n[[ å’Œ $ åœ¨å¤„ç†åˆ—è¡¨æ—¶ä¹Ÿéå¸¸é‡è¦ï¼Œç†è§£å®ƒä»¬ä¸ [ çš„åŒºåˆ«è‡³å…³é‡è¦ã€‚ è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªåä¸º l çš„åˆ—è¡¨æ¥è¯´æ˜è¿™äº›å·®å¼‚ï¼š\n\nl &lt;- list(\n  a = 1:3, \n  b = \"a string\", \n  c = pi, \n  d = list(-1, -5)\n)\n\n\n\n[ æå–ä¸€ä¸ªå­åˆ—è¡¨ã€‚ æ— è®ºä½ æå–å¤šå°‘ä¸ªå…ƒç´ ï¼Œç»“æœæ€»æ˜¯ä¸€ä¸ªåˆ—è¡¨ã€‚\n\nstr(l[1:2])\n#&gt; List of 2\n#&gt;  $ a: int [1:3] 1 2 3\n#&gt;  $ b: chr \"a string\"\n\nstr(l[1])\n#&gt; List of 1\n#&gt;  $ a: int [1:3] 1 2 3\n\nstr(l[4])\n#&gt; List of 1\n#&gt;  $ d:List of 2\n#&gt;   ..$ : num -1\n#&gt;   ..$ : num -5\n\nä¸å‘é‡ä¸€æ ·ï¼Œä½ å¯ä»¥ç”¨é€»è¾‘ã€æ•´æ•°æˆ–å­—ç¬¦å‘é‡è¿›è¡Œå­é›†é€‰å–ã€‚\n\n\n[[ å’Œ $ ä»åˆ—è¡¨ä¸­æå–å•ä¸ªç»„ä»¶ã€‚ å®ƒä»¬ä¼šä»åˆ—è¡¨ä¸­ç§»é™¤ä¸€ä¸ªå±‚çº§ã€‚\n\nstr(l[[1]])\n#&gt;  int [1:3] 1 2 3\n\nstr(l[[4]])\n#&gt; List of 2\n#&gt;  $ : num -1\n#&gt;  $ : num -5\n\nstr(l$a)\n#&gt;  int [1:3] 1 2 3\n\n\n\n[ å’Œ [[ ä¹‹é—´çš„åŒºåˆ«å¯¹äºåˆ—è¡¨å°¤ä¸ºé‡è¦ï¼Œå› ä¸º [[ ä¼šæ·±å…¥åˆ°åˆ—è¡¨ä¸­ï¼Œè€Œ [ è¿”å›ä¸€ä¸ªæ–°çš„ã€æ›´å°çš„åˆ—è¡¨ã€‚ ä¸ºäº†å¸®åŠ©ä½ è®°ä½è¿™ä¸ªåŒºåˆ«ï¼Œè¯·çœ‹ FigureÂ 27.1 ä¸­å±•ç¤ºçš„é‚£ä¸ªä¸å¯»å¸¸çš„èƒ¡æ¤’ç“¶ã€‚ å¦‚æœè¿™ä¸ªèƒ¡æ¤’ç“¶æ˜¯ä½ çš„åˆ—è¡¨ pepperï¼Œé‚£ä¹ˆ pepper[1] å°±æ˜¯ä¸€ä¸ªè£…æœ‰å•ä¸ªèƒ¡æ¤’åŒ…çš„èƒ¡æ¤’ç“¶ã€‚ pepper[2] çœ‹èµ·æ¥ä¸€æ ·ï¼Œä½†ä¼šè£…æœ‰ç¬¬äºŒä¸ªèƒ¡æ¤’åŒ…ã€‚ pepper[1:2] å°†æ˜¯ä¸€ä¸ªè£…æœ‰ä¸¤ä¸ªèƒ¡æ¤’åŒ…çš„èƒ¡æ¤’ç“¶ã€‚ è€Œ pepper[[1]] åˆ™ä¼šæå–å‡ºèƒ¡æ¤’åŒ…æœ¬èº«ã€‚\n\n\n\n\n\n\n\nFigureÂ 27.1: (å·¦) Hadley æ›¾ç»åœ¨ä»–é…’åº—æˆ¿é—´é‡Œå‘ç°çš„ä¸€ä¸ªèƒ¡æ¤’ç“¶ã€‚ (ä¸­) pepper[1]ã€‚ (å³) pepper[[1]]ã€‚\n\n\n\n\nå½“ä½ å¯¹æ•°æ®æ¡†ä½¿ç”¨ä¸€ç»´ [ æ—¶ï¼ŒåŒæ ·çš„åŸç†ä¹Ÿé€‚ç”¨ï¼šdf[\"x\"] è¿”å›ä¸€ä¸ªå•åˆ—æ•°æ®æ¡†ï¼Œè€Œ df[[\"x\"]] è¿”å›ä¸€ä¸ªå‘é‡ã€‚\n\n27.3.4 ç»ƒä¹ \n\nå½“ä½ ç”¨ä¸€ä¸ªæ¯”å‘é‡é•¿åº¦å¤§çš„æ­£æ•´æ•°å¯¹ [[ è¿›è¡Œå­é›†é€‰å–æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ å½“ä½ ç”¨ä¸€ä¸ªä¸å­˜åœ¨çš„åç§°è¿›è¡Œå­é›†é€‰å–æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ\npepper[[1]][1] ä¼šæ˜¯ä»€ä¹ˆï¼Ÿ pepper[[1]][[1]] å‘¢ï¼Ÿ",
    "crumbs": [
      "ç¼–ç¨‹",
      "<span class='chapter-number'>27</span>Â  <span class='chapter-title'>Base R å®æˆ˜æŒ‡å—</span>"
    ]
  },
  {
    "objectID": "base-R.html#apply-å‡½æ•°æ—",
    "href": "base-R.html#apply-å‡½æ•°æ—",
    "title": "27Â  Base R å®æˆ˜æŒ‡å—",
    "section": "\n27.4 Apply å‡½æ•°æ—",
    "text": "27.4 Apply å‡½æ•°æ—\nåœ¨ Chapter 26 ä¸­ï¼Œä½ å­¦ä¹ äº† tidyverse çš„è¿­ä»£æŠ€æœ¯ï¼Œå¦‚ dplyr::across() å’Œ map ç³»åˆ—å‡½æ•°ã€‚ åœ¨æœ¬èŠ‚ä¸­ï¼Œä½ å°†å­¦ä¹ å®ƒä»¬çš„ Base R ç­‰ä»·ç‰©ï¼Œå³ apply å‡½æ•°æ—ã€‚ åœ¨æ­¤è¯­å¢ƒä¸‹ï¼Œapply å’Œ map æ˜¯åŒä¹‰è¯ï¼Œå› ä¸ºâ€œå°†ä¸€ä¸ªå‡½æ•°æ˜ å°„ (map) åˆ°å‘é‡çš„æ¯ä¸ªå…ƒç´ ä¸Šâ€çš„å¦ä¸€ç§è¯´æ³•æ˜¯â€œå°†ä¸€ä¸ªå‡½æ•°åº”ç”¨ (apply) åˆ°å‘é‡çš„æ¯ä¸ªå…ƒç´ ä¸Šâ€ã€‚ è¿™é‡Œæˆ‘ä»¬å°†ä¸ºä½ ç®€è¦ä»‹ç»è¿™ä¸ªå‡½æ•°æ—ï¼Œä»¥ä¾¿ä½ åœ¨å®é™…ä¸­èƒ½è®¤å‡ºå®ƒä»¬ã€‚\nè¿™ä¸ªå‡½æ•°æ—ä¸­æœ€é‡è¦çš„æˆå‘˜æ˜¯ lapply()ï¼Œå®ƒä¸ purrr::map() éå¸¸ç›¸ä¼¼3ã€‚ äº‹å®ä¸Šï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨ map() çš„ä»»ä½•æ›´é«˜çº§çš„åŠŸèƒ½ï¼Œä½ å¯ä»¥å°† Chapter 26 ä¸­æ‰€æœ‰çš„ map() è°ƒç”¨éƒ½æ›¿æ¢ä¸º lapply()ã€‚\næ²¡æœ‰å®Œå…¨ç­‰åŒäº across() çš„ Base R å‡½æ•°ï¼Œä½†ä½ å¯ä»¥é€šè¿‡ç»“åˆä½¿ç”¨ [ å’Œ lapply() æ¥æ¥è¿‘å…¶åŠŸèƒ½ã€‚ è¿™æ˜¯å¯è¡Œçš„ï¼Œå› ä¸ºåœ¨åº•å±‚ï¼Œæ•°æ®æ¡†æ˜¯åˆ—çš„åˆ—è¡¨ï¼Œæ‰€ä»¥å¯¹æ•°æ®æ¡†è°ƒç”¨ lapply() ä¼šå°†å‡½æ•°åº”ç”¨äºæ¯ä¸€åˆ—ã€‚\n\ndf &lt;- tibble(a = 1, b = 2, c = \"a\", d = \"b\", e = 4)\n\n# é¦–å…ˆæ‰¾åˆ°æ•°å€¼åˆ—\nnum_cols &lt;- sapply(df, is.numeric)\nnum_cols\n#&gt;     a     b     c     d     e \n#&gt;  TRUE  TRUE FALSE FALSE  TRUE\n\n# ç„¶åç”¨ lapply() è½¬æ¢æ¯ä¸€åˆ—ï¼Œå†æ›¿æ¢åŸå§‹å€¼\ndf[, num_cols] &lt;- lapply(df[, num_cols, drop = FALSE], \\(x) x * 2)\ndf\n#&gt; # A tibble: 1 Ã— 5\n#&gt;       a     b c     d         e\n#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;\n#&gt; 1     2     4 a     b         8\n\nä¸Šé¢çš„ä»£ç ä½¿ç”¨äº†ä¸€ä¸ªæ–°å‡½æ•° sapply()ã€‚ å®ƒä¸ lapply() ç›¸ä¼¼ï¼Œä½†å®ƒæ€»æ˜¯å°è¯•ç®€åŒ–ç»“æœï¼Œå› æ­¤å…¶åç§°ä¸­çš„ s ä»£è¡¨ç®€åŒ– (simplify)ï¼Œè¿™é‡Œå®ƒäº§ç”Ÿäº†ä¸€ä¸ªé€»è¾‘å‘é‡è€Œä¸æ˜¯ä¸€ä¸ªåˆ—è¡¨ã€‚ æˆ‘ä»¬ä¸æ¨èåœ¨ç¼–ç¨‹ä¸­ä½¿ç”¨å®ƒï¼Œå› ä¸ºç®€åŒ–å¯èƒ½ä¼šå¤±è´¥å¹¶ç»™ä½ ä¸€ä¸ªæ„æƒ³ä¸åˆ°çš„ç±»å‹ï¼Œä½†å¯¹äºäº¤äº’å¼ä½¿ç”¨æ¥è¯´é€šå¸¸æ²¡é—®é¢˜ã€‚ purrr æœ‰ä¸€ä¸ªç±»ä¼¼çš„å‡½æ•°å« map_vec()ï¼Œæˆ‘ä»¬åœ¨ Chapter 26 ä¸­æ²¡æœ‰æåˆ°ã€‚\nBase R æä¾›äº†ä¸€ä¸ªæ¯” sapply() æ›´ä¸¥æ ¼çš„ç‰ˆæœ¬ï¼Œå«åš vapply()ï¼Œæ˜¯vector apply (å‘é‡åº”ç”¨) çš„ç¼©å†™ã€‚ å®ƒæ¥å—ä¸€ä¸ªé¢å¤–çš„å‚æ•°æ¥æŒ‡å®šé¢„æœŸçš„ç±»å‹ï¼Œç¡®ä¿æ— è®ºè¾“å…¥å¦‚ä½•ï¼Œç®€åŒ–è¿‡ç¨‹éƒ½ä»¥ç›¸åŒçš„æ–¹å¼å‘ç”Ÿã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸Šé¢çš„ sapply() è°ƒç”¨æ›¿æ¢ä¸ºè¿™ä¸ª vapply()ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬æŒ‡å®šæœŸæœ› is.numeric() è¿”å›ä¸€ä¸ªé•¿åº¦ä¸º 1 çš„é€»è¾‘å‘é‡ï¼š\n\nvapply(df, is.numeric, logical(1))\n#&gt;     a     b     c     d     e \n#&gt;  TRUE  TRUE FALSE FALSE  TRUE\n\nsapply() å’Œ vapply() ä¹‹é—´çš„åŒºåˆ«åœ¨å®ƒä»¬ä½äºå‡½æ•°å†…éƒ¨æ—¶éå¸¸é‡è¦ï¼ˆå› ä¸ºå®ƒå¯¹å‡½æ•°å¯¹å¼‚å¸¸è¾“å…¥çš„é²æ£’æ€§æœ‰å¾ˆå¤§å½±å“ï¼‰ï¼Œä½†åœ¨æ•°æ®åˆ†æä¸­é€šå¸¸æ— å…³ç´§è¦ã€‚\napply å‡½æ•°æ—çš„å¦ä¸€ä¸ªé‡è¦æˆå‘˜æ˜¯ tapply()ï¼Œå®ƒè®¡ç®—å•ä¸ªåˆ†ç»„æ‘˜è¦ï¼š\n\ndiamonds |&gt; \n  group_by(cut) |&gt; \n  summarize(price = mean(price))\n#&gt; # A tibble: 5 Ã— 2\n#&gt;   cut       price\n#&gt;   &lt;ord&gt;     &lt;dbl&gt;\n#&gt; 1 Fair      4359.\n#&gt; 2 Good      3929.\n#&gt; 3 Very Good 3982.\n#&gt; 4 Premium   4584.\n#&gt; 5 Ideal     3458.\n\ntapply(diamonds$price, diamonds$cut, mean)\n#&gt;      Fair      Good Very Good   Premium     Ideal \n#&gt;  4358.758  3928.864  3981.760  4584.258  3457.542\n\nä¸å¹¸çš„æ˜¯ï¼Œtapply() å°†å…¶ç»“æœè¿”å›åœ¨ä¸€ä¸ªå‘½åçš„å‘é‡ä¸­ï¼Œå¦‚æœä½ æƒ³å°†å¤šä¸ªæ‘˜è¦å’Œåˆ†ç»„å˜é‡æ”¶é›†åˆ°ä¸€ä¸ªæ•°æ®æ¡†ä¸­ï¼Œå°±éœ€è¦ä¸€äº›æŠ€å·§ï¼ˆå½“ç„¶å¯ä»¥ä¸è¿™æ ·åšï¼Œç›´æ¥ä½¿ç”¨è‡ªç”±æµ®åŠ¨çš„å‘é‡ï¼Œä½†æ ¹æ®æˆ‘ä»¬çš„ç»éªŒï¼Œè¿™åªæ˜¯æ¨è¿Ÿäº†å·¥ä½œï¼‰ã€‚ å¦‚æœä½ æƒ³çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ tapply() æˆ–å…¶ä»– Base R æŠ€æœ¯æ¥æ‰§è¡Œå…¶ä»–åˆ†ç»„æ‘˜è¦ï¼ŒHadley åœ¨ä¸€ä¸ª gist ä¸­æ”¶é›†äº†ä¸€äº›æŠ€å·§ã€‚\napply å‡½æ•°æ—çš„æœ€åä¸€ä¸ªæˆå‘˜æ˜¯å…¶åŒåå‡½æ•° apply()ï¼Œå®ƒç”¨äºå¤„ç†çŸ©é˜µå’Œæ•°ç»„ã€‚ ç‰¹åˆ«è¦æ³¨æ„ apply(df, 2, something)ï¼Œè¿™æ˜¯ä¸€ç§ç¼“æ…¢ä¸”å¯èƒ½å±é™©çš„æ–¹å¼æ¥å®ç° lapply(df, something)ã€‚ è¿™åœ¨æ•°æ®ç§‘å­¦ä¸­å¾ˆå°‘å‡ºç°ï¼Œå› ä¸ºæˆ‘ä»¬é€šå¸¸å¤„ç†çš„æ˜¯æ•°æ®æ¡†è€Œä¸æ˜¯çŸ©é˜µã€‚",
    "crumbs": [
      "ç¼–ç¨‹",
      "<span class='chapter-number'>27</span>Â  <span class='chapter-title'>Base R å®æˆ˜æŒ‡å—</span>"
    ]
  },
  {
    "objectID": "base-R.html#for-å¾ªç¯",
    "href": "base-R.html#for-å¾ªç¯",
    "title": "27Â  Base R å®æˆ˜æŒ‡å—",
    "section": "\n27.5 for å¾ªç¯",
    "text": "27.5 for å¾ªç¯\nfor å¾ªç¯æ˜¯ apply å’Œ map å®¶æ—åœ¨åº•å±‚éƒ½ä½¿ç”¨çš„è¿­ä»£åŸºæœ¬æ„å»ºå—ã€‚ for å¾ªç¯æ˜¯å¼ºå¤§è€Œé€šç”¨çš„å·¥å…·ï¼Œéšç€ä½ æˆä¸ºæ›´å¯Œç»éªŒçš„ R ç¨‹åºå‘˜ï¼Œå­¦ä¹ å®ƒä»¬éå¸¸é‡è¦ã€‚ for å¾ªç¯çš„åŸºæœ¬ç»“æ„å¦‚ä¸‹ï¼š\n\nfor (element in vector) {\n  # å¯¹ element æ‰§è¡ŒæŸäº›æ“ä½œ\n}\n\nfor å¾ªç¯æœ€ç›´æ¥çš„ç”¨é€”æ˜¯å®ç°ä¸ walk() ç›¸åŒçš„æ•ˆæœï¼šå¯¹åˆ—è¡¨çš„æ¯ä¸ªå…ƒç´ è°ƒç”¨æŸä¸ªå…·æœ‰å‰¯ä½œç”¨çš„å‡½æ•°ã€‚ ä¾‹å¦‚ï¼Œåœ¨ Section 26.4.1 ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨ walk()ï¼š\n\npaths |&gt; walk(append_file)\n\nè€Œæ˜¯å¯ä»¥ä½¿ç”¨ for å¾ªç¯ï¼š\n\nfor (path in paths) {\n  append_file(path)\n}\n\nå¦‚æœä½ æƒ³ä¿å­˜ for å¾ªç¯çš„è¾“å‡ºï¼Œäº‹æƒ…å°±ä¼šå˜å¾—æ£˜æ‰‹ä¸€äº›ï¼Œä¾‹å¦‚åƒæˆ‘ä»¬åœ¨ Chapter 26 ä¸­åšçš„é‚£æ ·ï¼Œè¯»å–ä¸€ä¸ªç›®å½•ä¸­æ‰€æœ‰çš„ excel æ–‡ä»¶ï¼š\n\npaths &lt;- dir(\"data/gapminder\", pattern = \"\\\\.xlsx$\", full.names = TRUE)\nfiles &lt;- map(paths, readxl::read_excel)\n\nä½ å¯ä»¥ä½¿ç”¨å‡ ç§ä¸åŒçš„æŠ€æœ¯ï¼Œä½†æˆ‘ä»¬å»ºè®®äº‹å…ˆæ˜ç¡®è¾“å‡ºä¼šæ˜¯ä»€ä¹ˆæ ·å­ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†éœ€è¦ä¸€ä¸ªä¸ paths é•¿åº¦ç›¸åŒçš„åˆ—è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ vector() æ¥åˆ›å»ºå®ƒï¼š\n\nfiles &lt;- vector(\"list\", length(paths))\n\nç„¶åï¼Œæˆ‘ä»¬ä¸éå† paths çš„å…ƒç´ ï¼Œè€Œæ˜¯éå†å®ƒä»¬çš„ç´¢å¼•ï¼Œä½¿ç”¨ seq_along() ä¸º paths çš„æ¯ä¸ªå…ƒç´ ç”Ÿæˆä¸€ä¸ªç´¢å¼•ï¼š\n\nseq_along(paths)\n#&gt;  [1]  1  2  3  4  5  6  7  8  9 10 11 12\n\nä½¿ç”¨ç´¢å¼•å¾ˆé‡è¦ï¼Œå› ä¸ºå®ƒå…è®¸æˆ‘ä»¬å°†è¾“å…¥ä¸­çš„æ¯ä¸ªä½ç½®ä¸è¾“å‡ºä¸­çš„ç›¸åº”ä½ç½®è”ç³»èµ·æ¥ï¼š\n\nfor (i in seq_along(paths)) {\n  files[[i]] &lt;- readxl::read_excel(paths[[i]])\n}\n\nè¦å°† tibble åˆ—è¡¨åˆå¹¶ä¸ºå•ä¸ª tibbleï¼Œä½ å¯ä»¥ä½¿ç”¨ do.call() + rbind()ï¼š\n\ndo.call(rbind, files)\n#&gt; # A tibble: 1,704 Ã— 5\n#&gt;   country     continent lifeExp      pop gdpPercap\n#&gt;   &lt;chr&gt;       &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n#&gt; 1 Afghanistan Asia         28.8  8425333      779.\n#&gt; 2 Albania     Europe       55.2  1282697     1601.\n#&gt; 3 Algeria     Africa       43.1  9279525     2449.\n#&gt; 4 Angola      Africa       30.0  4232095     3521.\n#&gt; 5 Argentina   Americas     62.5 17876956     5911.\n#&gt; 6 Australia   Oceania      69.1  8691212    10040.\n#&gt; # â„¹ 1,698 more rows\n\nä¸å…¶å…ˆåˆ›å»ºä¸€ä¸ªåˆ—è¡¨å¹¶åœ¨è¿‡ç¨‹ä¸­ä¿å­˜ç»“æœï¼Œä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³•æ˜¯é€ä¸ªæ„å»ºæ•°æ®æ¡†ï¼š\n\nout &lt;- NULL\nfor (path in paths) {\n  out &lt;- rbind(out, readxl::read_excel(path))\n}\n\næˆ‘ä»¬å»ºè®®é¿å…è¿™ç§æ¨¡å¼ï¼Œå› ä¸ºå½“å‘é‡éå¸¸é•¿æ—¶ï¼Œå®ƒä¼šå˜å¾—éå¸¸æ…¢ã€‚ è¿™å°±æ˜¯â€œfor å¾ªç¯å¾ˆæ…¢â€è¿™ä¸ªç»ä¹…ä¸è¡°çš„è°£è¨€çš„æ¥æºï¼šå®ƒä»¬æœ¬èº«ä¸æ…¢ï¼Œä½†è¿­ä»£åœ°å¢é•¿ä¸€ä¸ªå‘é‡æ˜¯æ…¢çš„ã€‚",
    "crumbs": [
      "ç¼–ç¨‹",
      "<span class='chapter-number'>27</span>Â  <span class='chapter-title'>Base R å®æˆ˜æŒ‡å—</span>"
    ]
  },
  {
    "objectID": "base-R.html#å›¾å½¢",
    "href": "base-R.html#å›¾å½¢",
    "title": "27Â  Base R å®æˆ˜æŒ‡å—",
    "section": "\n27.6 å›¾å½¢",
    "text": "27.6 å›¾å½¢\nè®¸å¤šä¸å¸¸ä½¿ç”¨ tidyverse çš„ R ç”¨æˆ·ä¹Ÿåçˆ±ä½¿ç”¨ ggplot2 è¿›è¡Œç»˜å›¾ï¼Œå› ä¸ºå®ƒå…·æœ‰ä¸€äº›æœ‰ç”¨çš„ç‰¹æ€§ï¼Œå¦‚åˆç†çš„é»˜è®¤è®¾ç½®ã€è‡ªåŠ¨ç”Ÿæˆå›¾ä¾‹å’Œç°ä»£çš„å¤–è§‚ã€‚ ç„¶è€Œï¼ŒBase R çš„ç»˜å›¾å‡½æ•°ä»ç„¶å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºå®ƒä»¬éå¸¸ç®€æ´â€”â€”åšä¸€ä¸ªåŸºæœ¬çš„æ¢ç´¢æ€§å›¾è¡¨åªéœ€è¦å¾ˆå°‘çš„æ‰“å­—ã€‚\nåœ¨å®é™…åº”ç”¨ä¸­ï¼Œä½ ä¼šçœ‹åˆ°ä¸¤ç§ä¸»è¦çš„ Base R å›¾å½¢ï¼šæ•£ç‚¹å›¾å’Œç›´æ–¹å›¾ï¼Œåˆ†åˆ«ç”± plot() å’Œ hist() ç”Ÿæˆã€‚ è¿™é‡Œæœ‰ä¸€ä¸ªæ¥è‡ª diamonds æ•°æ®é›†çš„å¿«é€Ÿç¤ºä¾‹ï¼š\n# å·¦å›¾\nhist(diamonds$carat)\n\n# å³å›¾\nplot(diamonds$carat, diamonds$price)\n\n\n\n\n\n\n\n\n\n\nè¯·æ³¨æ„ï¼ŒBase R çš„ç»˜å›¾å‡½æ•°ä½œç”¨äºå‘é‡ï¼Œæ‰€ä»¥ä½ éœ€è¦ä½¿ç”¨ $ æˆ–å…¶ä»–æŠ€æœ¯ä»æ•°æ®æ¡†ä¸­æå–åˆ—ã€‚",
    "crumbs": [
      "ç¼–ç¨‹",
      "<span class='chapter-number'>27</span>Â  <span class='chapter-title'>Base R å®æˆ˜æŒ‡å—</span>"
    ]
  },
  {
    "objectID": "base-R.html#æ€»ç»“",
    "href": "base-R.html#æ€»ç»“",
    "title": "27Â  Base R å®æˆ˜æŒ‡å—",
    "section": "\n27.7 æ€»ç»“",
    "text": "27.7 æ€»ç»“\nåœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å‘ä½ å±•ç¤ºäº†ä¸€ç³»åˆ—ç”¨äºå­é›†é€‰å–å’Œè¿­ä»£çš„ Base R å‡½æ•°ã€‚ ä¸æœ¬ä¹¦å…¶ä»–åœ°æ–¹è®¨è®ºçš„æ–¹æ³•ç›¸æ¯”ï¼Œè¿™äº›å‡½æ•°æ›´å€¾å‘äºâ€œå‘é‡â€é£æ ¼ï¼Œè€Œä¸æ˜¯â€œæ•°æ®æ¡†â€é£æ ¼ï¼Œå› ä¸º Base R å‡½æ•°å€¾å‘äºæ¥å—å•ä¸ªå‘é‡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ•°æ®æ¡†å’Œä¸€äº›åˆ—çš„è§„èŒƒã€‚ è¿™é€šå¸¸ä½¿ç¼–ç¨‹å·¥ä½œæ›´å®¹æ˜“ï¼Œå› æ­¤å½“ä½ ç¼–å†™æ›´å¤šå‡½æ•°å¹¶å¼€å§‹ç¼–å†™è‡ªå·±çš„åŒ…æ—¶ï¼Œå®ƒå˜å¾—æ›´åŠ é‡è¦ã€‚\næœ¬ç« ç»“æŸäº†æœ¬ä¹¦çš„ç¼–ç¨‹éƒ¨åˆ†ã€‚ ä½ å·²ç»åœ¨æˆä¸ºä¸€åä¸ä»…ä½¿ç”¨ R çš„æ•°æ®ç§‘å­¦å®¶ï¼Œè€Œä¸”æ˜¯èƒ½å¤Ÿç”¨ R ç¼–ç¨‹ çš„æ•°æ®ç§‘å­¦å®¶çš„é“è·¯ä¸Šè¿ˆå‡ºäº†åšå®çš„ä¸€æ­¥ã€‚ æˆ‘ä»¬å¸Œæœ›è¿™äº›ç« èŠ‚æ¿€å‘äº†ä½ å¯¹ç¼–ç¨‹çš„å…´è¶£ï¼Œå¹¶æœŸå¾…ä½ åœ¨æœ¬ä¹¦ä¹‹å¤–å­¦ä¹ æ›´å¤šå†…å®¹ã€‚",
    "crumbs": [
      "ç¼–ç¨‹",
      "<span class='chapter-number'>27</span>Â  <span class='chapter-title'>Base R å®æˆ˜æŒ‡å—</span>"
    ]
  },
  {
    "objectID": "base-R.html#footnotes",
    "href": "base-R.html#footnotes",
    "title": "27Â  Base R å®æˆ˜æŒ‡å—",
    "section": "",
    "text": "é˜…è¯» https://adv-r.hadley.nz/subsetting.html#subset-multiple æ¥äº†è§£å¦‚ä½•åƒå¤„ç†ä¸€ç»´å¯¹è±¡ä¸€æ ·å¯¹æ•°æ®æ¡†è¿›è¡Œå­é›†é€‰å–ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨çŸ©é˜µå¯¹å…¶è¿›è¡Œå­é›†é€‰å–ã€‚â†©ï¸\nä½†å®ƒä¸ä¼šå¯¹åˆ†ç»„çš„æ•°æ®æ¡†è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œä¹Ÿä¸æ”¯æŒåƒ starts_with() è¿™æ ·çš„é€‰æ‹©è¾…åŠ©å‡½æ•°ã€‚â†©ï¸\nå®ƒåªæ˜¯ç¼ºå°‘äº†ä¸€äº›æ–¹ä¾¿çš„åŠŸèƒ½ï¼Œæ¯”å¦‚è¿›åº¦æ¡å’Œåœ¨å‡ºé”™æ—¶æŠ¥å‘Šæ˜¯å“ªä¸ªå…ƒç´ å¯¼è‡´äº†é—®é¢˜ã€‚â†©ï¸",
    "crumbs": [
      "ç¼–ç¨‹",
      "<span class='chapter-number'>27</span>Â  <span class='chapter-title'>Base R å®æˆ˜æŒ‡å—</span>"
    ]
  },
  {
    "objectID": "communicate.html",
    "href": "communicate.html",
    "title": "æ²Ÿé€š",
    "section": "",
    "text": "åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ å·²ç»å­¦ä¹ äº†å¤šç§å·¥å…·ï¼Œå¯ä»¥å°†æ•°æ®å¯¼å…¥ R ä¸­ï¼Œå°†å…¶æ•´ç†æˆä¾¿äºåˆ†æçš„å½¢å¼ï¼Œç„¶åé€šè¿‡è½¬æ¢å’Œå¯è§†åŒ–æ¥ç†è§£ä½ çš„æ•°æ®ã€‚ ä½†æ˜¯ï¼Œæ— è®ºä½ çš„åˆ†æåšå¾—å¤šä¹ˆå‡ºè‰²ï¼Œé™¤éä½ èƒ½å‘ä»–äººè§£é‡Šæ¸…æ¥šï¼Œå¦åˆ™ä¸€åˆ‡éƒ½æ˜¯å¾’åŠ³ï¼šä½ éœ€è¦ æ²Ÿé€š ä½ çš„ç»“æœã€‚\n\n\n\n\n\n\n\nFigureÂ 1: æ²Ÿé€šæ˜¯æ•°æ®ç§‘å­¦æµç¨‹çš„æœ€åä¸€ä¸ªç¯èŠ‚ï¼›å¦‚æœä½ æ— æ³•å°†ä½ çš„ç»“æœä¼ è¾¾ç»™ä»–äººï¼Œ é‚£ä¹ˆæ— è®ºä½ çš„åˆ†æå¤šä¹ˆå‡ºè‰²ï¼Œéƒ½æ¯«æ— æ„ä¹‰ã€‚\n\n\n\n\næ²Ÿé€šæ˜¯æ¥ä¸‹æ¥ä¸¤ç« çš„ä¸»é¢˜ï¼š\n\nåœ¨ 28Â  Quarto ä¸­ï¼Œä½ å°†å­¦ä¹  Quartoï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºæ•´åˆæ–‡å­—ã€ä»£ç å’Œç»“æœçš„å·¥å…·ã€‚ ä½ å¯ä»¥ä½¿ç”¨ Quarto è¿›è¡Œåˆ†æå¸ˆä¸åˆ†æå¸ˆä¹‹é—´çš„æ²Ÿé€šï¼Œä¹Ÿå¯ä»¥ç”¨äºåˆ†æå¸ˆä¸å†³ç­–è€…ä¹‹é—´çš„æ²Ÿé€šã€‚ å¾—ç›Šäº Quarto æ ¼å¼çš„å¼ºå¤§åŠŸèƒ½ï¼Œä½ ç”šè‡³å¯ä»¥ä¸ºè¿™ä¸¤ç§ç›®çš„ä½¿ç”¨åŒä¸€ä¸ªæ–‡æ¡£ã€‚\nåœ¨ 29Â  Quarto æ ¼å¼ ä¸­ï¼Œä½ å°†ç®€è¦äº†è§£å¯ä»¥ä½¿ç”¨ Quarto ç”Ÿæˆçš„è®¸å¤šå…¶ä»–ç±»å‹çš„è¾“å‡ºï¼ŒåŒ…æ‹¬ä»ªè¡¨æ¿ã€ç½‘ç«™å’Œä¹¦ç±ã€‚\n\nè¿™äº›ç« èŠ‚ä¸»è¦å…³æ³¨æ²Ÿé€šçš„æŠ€æœ¯å±‚é¢ï¼Œè€Œä¸æ˜¯å°†ä½ çš„æƒ³æ³•ä¼ è¾¾ç»™ä»–äººè¿™ä¸€çœŸæ­£å›°éš¾çš„é—®é¢˜ã€‚ ä¸è¿‡ï¼Œå…³äºæ²Ÿé€šï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–ä¼˜ç§€çš„ä¹¦ç±ï¼Œæˆ‘ä»¬å°†åœ¨æ¯ç« çš„æœ«å°¾å‘ä½ æ¨èã€‚",
    "crumbs": [
      "æ²Ÿé€š"
    ]
  },
  {
    "objectID": "quarto.html",
    "href": "quarto.html",
    "title": "28Â  Quarto",
    "section": "",
    "text": "28.1 å¼•è¨€\nQuarto ä¸ºæ•°æ®ç§‘å­¦æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„åˆ›ä½œæ¡†æ¶ï¼Œå®ƒå°†ä½ çš„ä»£ç ã€ä»£ç çš„è¿è¡Œç»“æœä»¥åŠä½ çš„æ–‡å­—è¯´æ˜æ•´åˆåœ¨ä¸€èµ·ã€‚Quarto æ–‡æ¡£æ˜¯å®Œå…¨å¯å¤ç°çš„ï¼Œå¹¶æ”¯æŒæ•°åç§è¾“å‡ºæ ¼å¼ï¼Œå¦‚ PDFã€Word æ–‡ä»¶ã€æ¼”ç¤ºæ–‡ç¨¿ç­‰ã€‚\nQuarto æ–‡ä»¶æ—¨åœ¨ä»¥ä¸‰ç§æ–¹å¼ä½¿ç”¨ï¼š\nQuarto æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œç•Œé¢å·¥å…·ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª R åŒ…ã€‚è¿™æ„å‘³ç€ï¼Œæ€»çš„æ¥è¯´ï¼Œä½ æ— æ³•é€šè¿‡ ? æ¥è·å–å¸®åŠ©ã€‚å› æ­¤ï¼Œåœ¨æœ¬ç« çš„å­¦ä¹ è¿‡ç¨‹ä¸­ä»¥åŠå°†æ¥ä½¿ç”¨ Quarto æ—¶ï¼Œä½ åº”è¯¥å‚è€ƒ Quarto æ–‡æ¡£ã€‚\nå¦‚æœä½ æ˜¯ R Markdown ç”¨æˆ·ï¼Œä½ å¯èƒ½ä¼šæƒ³ï¼šâ€œQuarto å¬èµ·æ¥å¾ˆåƒ R Markdownâ€ã€‚ä½ æ²¡è¯´é”™ï¼Quarto å°† R Markdown ç”Ÿæ€ç³»ç»Ÿä¸­çš„è®¸å¤šåŒ…ï¼ˆrmarkdownã€bookdownã€distillã€xaringan ç­‰ï¼‰çš„åŠŸèƒ½ç»Ÿä¸€åˆ°ä¸€ä¸ªå•ä¸€ã€ä¸€è‡´çš„ç³»ç»Ÿä¸­ï¼Œå¹¶ä¸”é™¤äº† R ä¹‹å¤–ï¼Œè¿˜æ‰©å±•äº†å¯¹ Python å’Œ Julia ç­‰å¤šç§ç¼–ç¨‹è¯­è¨€çš„åŸç”Ÿæ”¯æŒã€‚ä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼ŒQuarto ä½“ç°äº†åå¤šå¹´æ¥æ‰©å±•å’Œæ”¯æŒ R Markdown ç”ŸTAIç³»ç»Ÿæ‰€å­¦åˆ°çš„ä¸€åˆ‡ã€‚",
    "crumbs": [
      "æ²Ÿé€š",
      "<span class='chapter-number'>28</span>Â  <span class='chapter-title'>Quarto</span>"
    ]
  },
  {
    "objectID": "quarto.html#å¼•è¨€",
    "href": "quarto.html#å¼•è¨€",
    "title": "28Â  Quarto",
    "section": "",
    "text": "ç”¨äºä¸å†³ç­–è€…æ²Ÿé€šï¼Œä»–ä»¬å¸Œæœ›å…³æ³¨ç»“è®ºï¼Œè€Œä¸æ˜¯åˆ†æèƒŒåçš„ä»£ç ã€‚\nç”¨äºä¸å…¶ä»–æ•°æ®ç§‘å­¦å®¶ï¼ˆåŒ…æ‹¬æœªæ¥çš„ä½ ï¼ï¼‰åä½œï¼Œä»–ä»¬æ—¢å¯¹ä½ çš„ç»“è®ºæ„Ÿå…´è¶£ï¼Œä¹Ÿå¯¹ä½ å¦‚ä½•å¾—å‡ºç»“è®ºï¼ˆå³ä»£ç ï¼‰æ„Ÿå…´è¶£ã€‚\nä½œä¸ºä¸€ç§ä»äº‹æ•°æ®ç§‘å­¦çš„ç¯å¢ƒï¼Œå¦‚åŒç°ä»£çš„å®éªŒç¬”è®°ï¼Œä½ ä¸ä»…å¯ä»¥è®°å½•ä½ åšäº†ä»€ä¹ˆï¼Œè¿˜å¯ä»¥è®°å½•ä½ çš„æ‰€æ€æ‰€æƒ³ã€‚\n\n\n\n\n28.1.1 å…ˆå†³æ¡ä»¶\nä½ éœ€è¦ Quarto å‘½ä»¤è¡Œç•Œé¢ (Quarto CLI)ï¼Œä½†ä½ ä¸éœ€è¦æ˜¾å¼åœ°å®‰è£…æˆ–åŠ è½½å®ƒï¼Œå› ä¸º RStudio ä¼šåœ¨éœ€è¦æ—¶è‡ªåŠ¨å®Œæˆè¿™ä¸¤é¡¹å·¥ä½œã€‚",
    "crumbs": [
      "æ²Ÿé€š",
      "<span class='chapter-number'>28</span>Â  <span class='chapter-title'>Quarto</span>"
    ]
  },
  {
    "objectID": "quarto.html#quarto-åŸºç¡€",
    "href": "quarto.html#quarto-åŸºç¡€",
    "title": "28Â  Quarto",
    "section": "\n28.2 Quarto åŸºç¡€",
    "text": "28.2 Quarto åŸºç¡€\nè¿™æ˜¯ä¸€ä¸ª Quarto æ–‡ä»¶â€”â€”ä¸€ä¸ªæ‰©å±•åä¸º .qmd çš„çº¯æ–‡æœ¬æ–‡ä»¶ï¼š\n\n---\ntitle: \"Diamond sizes\"\ndate: 2022-09-12\nformat: html\n---\n\n```{r}\n#| label: setup\n#| include: false\n\nlibrary(tidyverse)\n\nsmaller &lt;- diamonds |&gt; \n  filter(carat &lt;= 2.5)\n```\n\nWe have data about `r nrow(diamonds)` diamonds.\nOnly `r nrow(diamonds) - nrow(smaller)` are larger than 2.5 carats.\nThe distribution of the remainder is shown below:\n\n```{r}\n#| label: plot-smaller-diamonds\n#| echo: false\n\nsmaller |&gt; \n  ggplot(aes(x = carat)) + \n  geom_freqpoly(binwidth = 0.01)\n```\n\nå®ƒåŒ…å«ä¸‰ç§é‡è¦çš„å†…å®¹ç±»å‹ï¼š\n\nä¸€ä¸ªï¼ˆå¯é€‰çš„ï¼‰ç”± --- åŒ…å›´çš„ YAML æ ‡å¤´ã€‚\nç”± ``` åŒ…å›´çš„ R ä»£ç å— (chunks)ã€‚\næ··åˆäº†ç®€å•æ–‡æœ¬æ ¼å¼çš„æ–‡æœ¬ï¼Œå¦‚ # æ ‡é¢˜ å’Œ _æ–œä½“_ã€‚\n\nFigureÂ 28.1 å±•ç¤ºäº† RStudio ä¸­ä¸€ä¸ª .qmd æ–‡æ¡£çš„ç¬”è®°æœ¬ç•Œé¢ï¼Œå…¶ä¸­ä»£ç å’Œè¾“å‡ºäº¤é”™æ˜¾ç¤ºã€‚ä½ å¯ä»¥é€šè¿‡ç‚¹å‡»ä»£ç å—é¡¶éƒ¨çš„è¿è¡Œå›¾æ ‡ï¼ˆçœ‹èµ·æ¥åƒä¸€ä¸ªæ’­æ”¾æŒ‰é’®ï¼‰ï¼Œæˆ–æŒ‰ Cmd/Ctrl + Shift + Enter æ¥è¿è¡Œæ¯ä¸ªä»£ç å—ã€‚RStudio ä¼šæ‰§è¡Œä»£ç å¹¶å°†ç»“æœå†…è”æ˜¾ç¤ºåœ¨ä»£ç ä¸‹æ–¹ã€‚\n\n\n\n\n\n\n\nFigureÂ 28.1: RStudio ä¸­çš„ä¸€ä¸ª Quarto æ–‡æ¡£ã€‚ä»£ç å’Œè¾“å‡ºåœ¨æ–‡æ¡£ä¸­äº¤é”™æ˜¾ç¤ºï¼Œ ç»˜å›¾è¾“å‡ºç›´æ¥å‡ºç°åœ¨ä»£ç ä¸‹æ–¹ã€‚\n\n\n\n\nå¦‚æœä½ ä¸å–œæ¬¢åœ¨æ–‡æ¡£ä¸­çœ‹åˆ°ä½ çš„ç»˜å›¾å’Œè¾“å‡ºï¼Œè€Œæ›´æ„¿æ„ä½¿ç”¨ RStudio çš„æ§åˆ¶å°å’Œç»˜å›¾çª—æ ¼ï¼Œä½ å¯ä»¥ç‚¹å‡»â€œRenderâ€æ—è¾¹çš„é½¿è½®å›¾æ ‡ï¼Œç„¶ååˆ‡æ¢åˆ°â€œChunk Output in Consoleâ€ï¼Œå¦‚ FigureÂ 28.2 æ‰€ç¤ºã€‚\n\n\n\n\n\n\n\nFigureÂ 28.2: RStudio ä¸­çš„ä¸€ä¸ª Quarto æ–‡æ¡£ï¼Œç»˜å›¾è¾“å‡ºæ˜¾ç¤ºåœ¨â€œç»˜å›¾â€çª—æ ¼ä¸­ã€‚\n\n\n\n\nè¦ç”ŸæˆåŒ…å«æ‰€æœ‰æ–‡æœ¬ã€ä»£ç å’Œç»“æœçš„å®Œæ•´æŠ¥å‘Šï¼Œè¯·ç‚¹å‡»â€œRenderâ€æˆ–æŒ‰ Cmd/Ctrl + Shift + Kã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡ quarto::quarto_render(\"diamond-sizes.qmd\") ä»¥ç¼–ç¨‹æ–¹å¼æ‰§è¡Œæ­¤æ“ä½œã€‚è¿™å°†åœ¨æŸ¥çœ‹å™¨çª—æ ¼ä¸­æ˜¾ç¤ºæŠ¥å‘Šï¼Œå¦‚ FigureÂ 28.3 æ‰€ç¤ºï¼Œå¹¶åˆ›å»ºä¸€ä¸ª HTML æ–‡ä»¶ã€‚\n\n\n\n\n\n\n\nFigureÂ 28.3: RStudio ä¸­çš„ä¸€ä¸ª Quarto æ–‡æ¡£ï¼Œæ¸²æŸ“åçš„æ–‡æ¡£æ˜¾ç¤ºåœ¨â€œæŸ¥çœ‹å™¨â€çª—æ ¼ä¸­ã€‚\n\n\n\n\nå½“ä½ æ¸²æŸ“æ–‡æ¡£æ—¶ï¼ŒQuarto ä¼šå°† .qmd æ–‡ä»¶å‘é€ç»™ knitrï¼Œhttps://yihui.org/knitr/ï¼Œå®ƒä¼šæ‰§è¡Œæ‰€æœ‰çš„ä»£ç å—ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„ markdown (.md) æ–‡æ¡£ï¼Œå…¶ä¸­åŒ…å«ä»£ç åŠå…¶è¾“å‡ºã€‚ç„¶åï¼Œknitr ç”Ÿæˆçš„ markdown æ–‡ä»¶ç”± pandocï¼Œhttps://pandoc.org å¤„ç†ï¼Œå®ƒè´Ÿè´£åˆ›å»ºæœ€ç»ˆçš„æ–‡ä»¶ã€‚è¿™ä¸ªè¿‡ç¨‹å¦‚ FigureÂ 28.4 æ‰€ç¤ºã€‚è¿™ç§ä¸¤æ­¥å·¥ä½œæµçš„ä¼˜ç‚¹æ˜¯ï¼Œä½ å¯ä»¥åˆ›å»ºéå¸¸å¹¿æ³›çš„è¾“å‡ºæ ¼å¼ï¼Œä½ å°†åœ¨ Chapter 29 ä¸­äº†è§£åˆ°è¿™ä¸€ç‚¹ã€‚\n\n\n\n\n\n\n\nFigureÂ 28.4: Quarto å·¥ä½œæµå›¾ï¼Œä» qmdï¼Œåˆ° knitrï¼Œåˆ° mdï¼Œåˆ° pandocï¼Œ æœ€åè¾“å‡ºä¸º PDFã€MS Word æˆ– HTML æ ¼å¼ã€‚\n\n\n\n\nè¦å¼€å§‹ä½¿ç”¨ä½ è‡ªå·±çš„ .qmd æ–‡ä»¶ï¼Œè¯·åœ¨èœå•æ ä¸­é€‰æ‹© File &gt; New File &gt; Quarto Documentâ€¦ã€‚RStudio å°†å¯åŠ¨ä¸€ä¸ªå‘å¯¼ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥é¢„å¡«å……ä½ çš„æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«æœ‰ç”¨çš„å†…å®¹ï¼Œæé†’ä½  Quarto çš„å…³é”®åŠŸèƒ½æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚\næ¥ä¸‹æ¥çš„éƒ¨åˆ†å°†æ›´è¯¦ç»†åœ°æ¢è®¨ Quarto æ–‡æ¡£çš„ä¸‰ä¸ªç»„æˆéƒ¨åˆ†ï¼šmarkdown æ–‡æœ¬ã€ä»£ç å—å’Œ YAML æ ‡å¤´ã€‚\n\n28.2.1 ç»ƒä¹ \n\nä½¿ç”¨ File &gt; New File &gt; Quarto Document åˆ›å»ºä¸€ä¸ªæ–°çš„ Quarto æ–‡æ¡£ã€‚é˜…è¯»è¯´æ˜ã€‚ç»ƒä¹ å•ç‹¬è¿è¡Œä»£ç å—ã€‚ç„¶åé€šè¿‡ç‚¹å‡»ç›¸åº”çš„æŒ‰é’®å’Œä½¿ç”¨ç›¸åº”çš„é”®ç›˜å¿«æ·é”®æ¥æ¸²æŸ“æ–‡æ¡£ã€‚éªŒè¯ä½ å¯ä»¥ä¿®æ”¹ä»£ç ï¼Œé‡æ–°è¿è¡Œå®ƒï¼Œå¹¶çœ‹åˆ°ä¿®æ”¹åçš„è¾“å‡ºã€‚\nä¸ºä¸‰ç§å†…ç½®æ ¼å¼ä¸­çš„æ¯ä¸€ç§åˆ›å»ºä¸€ä¸ªæ–°çš„ Quarto æ–‡æ¡£ï¼šHTMLã€PDF å’Œ Wordã€‚æ¸²æŸ“è¿™ä¸‰ä¸ªæ–‡æ¡£ã€‚è¾“å‡ºæœ‰ä½•ä¸åŒï¼Ÿè¾“å…¥æœ‰ä½•ä¸åŒï¼Ÿï¼ˆä½ å¯èƒ½éœ€è¦å®‰è£… LaTeX æ‰èƒ½æ„å»º PDF è¾“å‡ºâ€”â€”å¦‚æœéœ€è¦ï¼ŒRStudio ä¼šæç¤ºä½ ã€‚ï¼‰",
    "crumbs": [
      "æ²Ÿé€š",
      "<span class='chapter-number'>28</span>Â  <span class='chapter-title'>Quarto</span>"
    ]
  },
  {
    "objectID": "quarto.html#å¯è§†åŒ–ç¼–è¾‘å™¨",
    "href": "quarto.html#å¯è§†åŒ–ç¼–è¾‘å™¨",
    "title": "28Â  Quarto",
    "section": "\n28.3 å¯è§†åŒ–ç¼–è¾‘å™¨",
    "text": "28.3 å¯è§†åŒ–ç¼–è¾‘å™¨\nRStudio ä¸­çš„å¯è§†åŒ–ç¼–è¾‘å™¨ä¸ºåˆ›ä½œ Quarto æ–‡æ¡£æä¾›äº†ä¸€ä¸ª WYSIWYM (æ‰€è§å³æ‰€æƒ³ï¼ŒWhat You See Is What You Mean) ç•Œé¢ã€‚åœ¨åº•å±‚ï¼ŒQuarto æ–‡æ¡£ï¼ˆ.qmd æ–‡ä»¶ï¼‰ä¸­çš„æ–‡å­—æ˜¯ä½¿ç”¨ Markdown ç¼–å†™çš„ï¼Œè¿™æ˜¯ä¸€ç§ç”¨äºæ ¼å¼åŒ–çº¯æ–‡æœ¬æ–‡ä»¶çš„è½»é‡çº§çº¦å®šã€‚äº‹å®ä¸Šï¼ŒQuarto ä½¿ç”¨çš„æ˜¯ Pandoc markdownï¼ˆQuarto èƒ½ç†è§£çš„ä¸€ç§è½»å¾®æ‰©å±•çš„ Markdown ç‰ˆæœ¬ï¼‰ï¼ŒåŒ…æ‹¬è¡¨æ ¼ã€å¼•æ–‡ã€äº¤å‰å¼•ç”¨ã€è„šæ³¨ã€divs/spansã€å®šä¹‰åˆ—è¡¨ã€å±æ€§ã€åŸå§‹ HTML/TeX ç­‰ï¼Œå¹¶ä¸”æ”¯æŒæ‰§è¡Œä»£ç å•å…ƒæ ¼å’Œå†…è”æŸ¥çœ‹å…¶è¾“å‡ºã€‚è™½ç„¶ Markdown è¢«è®¾è®¡å¾—æ˜“äºè¯»å†™ï¼Œæ­£å¦‚ä½ å°†åœ¨ Section 28.4 ä¸­çœ‹åˆ°çš„é‚£æ ·ï¼Œå®ƒä»ç„¶éœ€è¦å­¦ä¹ æ–°çš„è¯­æ³•ã€‚å› æ­¤ï¼Œå¦‚æœä½ æ˜¯è®¡ç®—æ–‡æ¡£ï¼ˆå¦‚ .qmd æ–‡ä»¶ï¼‰çš„æ–°æ‰‹ï¼Œä½†æœ‰ä½¿ç”¨ Google Docs æˆ– MS Word ç­‰å·¥å…·çš„ç»éªŒï¼Œé‚£ä¹ˆåœ¨ RStudio ä¸­å¼€å§‹ä½¿ç”¨ Quarto çš„æœ€ç®€å•æ–¹æ³•å°±æ˜¯ä½¿ç”¨å¯è§†åŒ–ç¼–è¾‘å™¨ã€‚\nåœ¨å¯è§†åŒ–ç¼–è¾‘å™¨ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨èœå•æ ä¸Šçš„æŒ‰é’®æ’å…¥å›¾åƒã€è¡¨æ ¼ã€äº¤å‰å¼•ç”¨ç­‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é€šç”¨çš„ &lt;kbd&gt;âŒ˜&lt;/kbd&gt; + &lt;kbd&gt;/&lt;/kbd&gt; æˆ– &lt;kbd&gt;Ctrl&lt;/kbd&gt; + &lt;kbd&gt;/&lt;/kbd&gt; å¿«æ·é”®æ’å…¥å‡ ä¹ä»»ä½•ä¸œè¥¿ã€‚å¦‚æœä½ åœ¨ä¸€è¡Œçš„å¼€å¤´ï¼ˆå¦‚ FigureÂ 28.5 æ‰€ç¤ºï¼‰ï¼Œä½ ä¹Ÿå¯ä»¥åªè¾“å…¥ &lt;kbd&gt;/&lt;/kbd&gt; æ¥è°ƒç”¨è¯¥å¿«æ·é”®ã€‚\n\n\n\n\n\n\n\nFigureÂ 28.5: Quarto å¯è§†åŒ–ç¼–è¾‘å™¨ã€‚\n\n\n\n\nå¯è§†åŒ–ç¼–è¾‘å™¨ä¹Ÿæ–¹ä¾¿äº†æ’å…¥å›¾åƒå’Œè‡ªå®šä¹‰å…¶æ˜¾ç¤ºæ–¹å¼ã€‚ä½ å¯ä»¥ç›´æ¥å°†å‰ªè´´æ¿ä¸­çš„å›¾åƒç²˜è´´åˆ°å¯è§†åŒ–ç¼–è¾‘å™¨ä¸­ï¼ˆRStudio ä¼šå°†è¯¥å›¾åƒçš„å‰¯æœ¬æ”¾ç½®åœ¨é¡¹ç›®ç›®å½•ä¸­å¹¶é“¾æ¥åˆ°å®ƒï¼‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¯è§†åŒ–ç¼–è¾‘å™¨çš„â€œInsert &gt; Figure / Imageâ€èœå•æµè§ˆåˆ°è¦æ’å…¥çš„å›¾åƒæˆ–ç²˜è´´å…¶ URLã€‚æ­¤å¤–ï¼Œä½¿ç”¨åŒä¸€èœå•ï¼Œä½ å¯ä»¥è°ƒæ•´å›¾åƒå¤§å°ï¼Œå¹¶æ·»åŠ æ ‡é¢˜ã€æ›¿ä»£æ–‡æœ¬å’Œé“¾æ¥ã€‚\nå¯è§†åŒ–ç¼–è¾‘å™¨è¿˜æœ‰è®¸å¤šæˆ‘ä»¬åœ¨æ­¤æœªåˆ—ä¸¾çš„åŠŸèƒ½ï¼Œéšç€ä½ åˆ›ä½œç»éªŒçš„å¢åŠ ï¼Œä½ å¯èƒ½ä¼šå‘ç°å®ƒä»¬å¾ˆæœ‰ç”¨ã€‚\næœ€é‡è¦çš„æ˜¯ï¼Œè™½ç„¶å¯è§†åŒ–ç¼–è¾‘å™¨ä»¥æ ¼å¼åŒ–çš„æ–¹å¼æ˜¾ç¤ºä½ çš„å†…å®¹ï¼Œä½†åœ¨åº•å±‚ï¼Œå®ƒä»¥çº¯ Markdown çš„å½¢å¼ä¿å­˜ä½ çš„å†…å®¹ï¼Œä½ å¯ä»¥åœ¨å¯è§†åŒ–ç¼–è¾‘å™¨å’Œæºä»£ç ç¼–è¾‘å™¨ä¹‹é—´æ¥å›åˆ‡æ¢ï¼Œä½¿ç”¨ä»»ä¸€å·¥å…·æŸ¥çœ‹å’Œç¼–è¾‘ä½ çš„å†…å®¹ã€‚\n\n28.3.1 ç»ƒä¹ \n\nä½¿ç”¨å¯è§†åŒ–ç¼–è¾‘å™¨é‡æ–°åˆ›å»º FigureÂ 28.5 ä¸­çš„æ–‡æ¡£ã€‚\nä½¿ç”¨å¯è§†åŒ–ç¼–è¾‘å™¨ï¼Œé€šè¿‡â€œInsertâ€èœå•å’Œâ€œæ’å…¥ä»»ä½•å†…å®¹â€å·¥å…·æ’å…¥ä¸€ä¸ªä»£ç å—ã€‚\nä½¿ç”¨å¯è§†åŒ–ç¼–è¾‘å™¨ï¼Œæ‰¾å‡ºå¦‚ä½•ï¼š\n\næ·»åŠ è„šæ³¨ã€‚\næ·»åŠ æ°´å¹³çº¿ã€‚\næ·»åŠ å—å¼•ç”¨ã€‚\n\n\nåœ¨å¯è§†åŒ–ç¼–è¾‘å™¨ä¸­ï¼Œè¿›å…¥â€œInsert &gt; Citationâ€ï¼Œå¹¶ä½¿ç”¨å…¶ DOI (æ•°å­—å¯¹è±¡æ ‡è¯†ç¬¦) 10.21105/joss.01686 æ’å…¥ä¸€ç¯‡é¢˜ä¸º Welcome to the Tidyverse çš„è®ºæ–‡çš„å¼•æ–‡ã€‚æ¸²æŸ“æ–‡æ¡£å¹¶è§‚å¯Ÿå¼•æ–‡åœ¨æ–‡æ¡£ä¸­çš„æ˜¾ç¤ºæ–¹å¼ã€‚ä½ è§‚å¯Ÿåˆ°æ–‡æ¡£çš„ YAML æœ‰ä»€ä¹ˆå˜åŒ–ï¼Ÿ",
    "crumbs": [
      "æ²Ÿé€š",
      "<span class='chapter-number'>28</span>Â  <span class='chapter-title'>Quarto</span>"
    ]
  },
  {
    "objectID": "quarto.html#sec-source-editor",
    "href": "quarto.html#sec-source-editor",
    "title": "28Â  Quarto",
    "section": "\n28.4 æºä»£ç ç¼–è¾‘å™¨",
    "text": "28.4 æºä»£ç ç¼–è¾‘å™¨\nä½ ä¹Ÿå¯ä»¥åœ¨æ²¡æœ‰å¯è§†åŒ–ç¼–è¾‘å™¨è¾…åŠ©çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ RStudio ä¸­çš„æºä»£ç ç¼–è¾‘å™¨æ¥ç¼–è¾‘ Quarto æ–‡æ¡£ã€‚è™½ç„¶å¯è§†åŒ–ç¼–è¾‘å™¨å¯¹äºæœ‰ä½¿ç”¨ Google Docs ç­‰å·¥å…·å†™ä½œç»éªŒçš„äººæ¥è¯´ä¼šæ„Ÿåˆ°ç†Ÿæ‚‰ï¼Œä½†æºä»£ç ç¼–è¾‘å™¨å¯¹äºæœ‰ç¼–å†™ R è„šæœ¬æˆ– R Markdown æ–‡æ¡£ç»éªŒçš„äººæ¥è¯´ä¼šæ„Ÿåˆ°ç†Ÿæ‚‰ã€‚æºä»£ç ç¼–è¾‘å™¨å¯¹äºè°ƒè¯•ä»»ä½• Quarto è¯­æ³•é”™è¯¯ä¹Ÿå¾ˆæœ‰ç”¨ï¼Œå› ä¸ºåœ¨çº¯æ–‡æœ¬ä¸­æ›´å®¹æ˜“å‘ç°è¿™äº›é”™è¯¯ã€‚\nä»¥ä¸‹æŒ‡å—å±•ç¤ºäº†å¦‚ä½•åœ¨æºä»£ç ç¼–è¾‘å™¨ä¸­ä½¿ç”¨ Pandoc çš„ Markdown æ¥åˆ›ä½œ Quarto æ–‡æ¡£ã€‚\n\n## Text formatting\n\n*italic* **bold** ~~strikeout~~ `code`\n\nsuperscript^2^ subscript~2~\n\n[underline]{.underline} [small caps]{.smallcaps}\n\n## Headings\n\n# 1st Level Header\n\n## 2nd Level Header\n\n### 3rd Level Header\n\n## Lists\n\n-   Bulleted list item 1\n\n-   Item 2\n\n    -   Item 2a\n\n    -   Item 2b\n\n1.  Numbered list item 1\n\n2.  Item 2.\n    The numbers are incremented automatically in the output.\n\n## Links and images\n\n&lt;http://example.com&gt;\n\n[linked phrase](http://example.com)\n\n![optional caption text](quarto.png){fig-alt=\"Quarto logo and the word quarto spelled in small case letters\"}\n\n## Tables\n\n| First Header | Second Header |\n|--------------|---------------|\n| Content Cell | Content Cell  |\n| Content Cell | Content Cell  |\n\nå­¦ä¹ è¿™äº›è¯­æ³•çš„æœ€å¥½æ–¹æ³•å°±æ˜¯äº²æ‰‹å°è¯•ã€‚è¿™å¯èƒ½éœ€è¦å‡ å¤©æ—¶é—´ï¼Œä½†å¾ˆå¿«å®ƒä»¬å°±ä¼šæˆä¸ºä½ çš„ç¬¬äºŒå¤©æ€§ï¼Œä½ å°†ä¸å†éœ€è¦åˆ»æ„å»æƒ³å®ƒä»¬ã€‚å¦‚æœä½ å¿˜è®°äº†ï¼Œå¯ä»¥é€šè¿‡ Help &gt; Markdown Quick Reference æ‰“å¼€ä¸€ä¸ªæ–¹ä¾¿çš„å‚è€ƒè¡¨ã€‚\n\n28.4.1 ç»ƒä¹ \n\nç»ƒä¹ ä½ æ‰€å­¦çš„çŸ¥è¯†ï¼Œåˆ›å»ºä¸€ä»½ç®€çŸ­çš„ç®€å†ã€‚æ ‡é¢˜åº”è¯¥æ˜¯ä½ çš„åå­—ï¼Œå¹¶ä¸”ä½ åº”è¯¥åŒ…å«ï¼ˆè‡³å°‘ï¼‰æ•™è‚²æˆ–å·¥ä½œç»å†çš„æ ‡é¢˜ã€‚æ¯ä¸ªéƒ¨åˆ†éƒ½åº”è¯¥åŒ…å«ä¸€ä¸ªèŒä½/å­¦ä½çš„é¡¹ç›®ç¬¦å·åˆ—è¡¨ã€‚ç”¨ç²—ä½“çªå‡ºæ˜¾ç¤ºå¹´ä»½ã€‚\n\nä½¿ç”¨æºä»£ç ç¼–è¾‘å™¨å’Œ Markdown å¿«é€Ÿå‚è€ƒï¼Œæ‰¾å‡ºå¦‚ä½•ï¼š\n\næ·»åŠ è„šæ³¨ã€‚\næ·»åŠ æ°´å¹³çº¿ã€‚\næ·»åŠ å—å¼•ç”¨ã€‚\n\n\nä» https://github.com/hadley/r4ds/tree/main/quarto å¤åˆ¶ diamond-sizes.qmd çš„å†…å®¹å¹¶ç²˜è´´åˆ°æœ¬åœ°çš„ R Quarto æ–‡æ¡£ä¸­ã€‚æ£€æŸ¥ä½ æ˜¯å¦å¯ä»¥è¿è¡Œå®ƒï¼Œç„¶ååœ¨é¢‘ç‡å¤šè¾¹å½¢å›¾åæ·»åŠ æ–‡æœ¬ï¼Œæè¿°å…¶æœ€æ˜¾è‘—çš„ç‰¹å¾ã€‚\nåœ¨ Google Doc æˆ– MS Word ä¸­åˆ›å»ºä¸€ä¸ªæ–‡æ¡£ï¼ˆæˆ–æ‰¾åˆ°ä¸€ä¸ªä½ ä»¥å‰åˆ›å»ºçš„æ–‡æ¡£ï¼‰ï¼Œå…¶ä¸­åŒ…å«ä¸€äº›å†…å®¹ï¼Œå¦‚æ ‡é¢˜ã€è¶…é“¾æ¥ã€æ ¼å¼åŒ–æ–‡æœ¬ç­‰ã€‚å¤åˆ¶æ­¤æ–‡æ¡£çš„å†…å®¹å¹¶å°†å…¶ç²˜è´´åˆ°å¯è§†åŒ–ç¼–è¾‘å™¨çš„ Quarto æ–‡æ¡£ä¸­ã€‚ç„¶åï¼Œåˆ‡æ¢åˆ°æºä»£ç ç¼–è¾‘å™¨å¹¶æ£€æŸ¥æºä»£ç ã€‚",
    "crumbs": [
      "æ²Ÿé€š",
      "<span class='chapter-number'>28</span>Â  <span class='chapter-title'>Quarto</span>"
    ]
  },
  {
    "objectID": "quarto.html#ä»£ç å—",
    "href": "quarto.html#ä»£ç å—",
    "title": "28Â  Quarto",
    "section": "\n28.5 ä»£ç å—",
    "text": "28.5 ä»£ç å—\nè¦åœ¨ Quarto æ–‡æ¡£ä¸­è¿è¡Œä»£ç ï¼Œä½ éœ€è¦æ’å…¥ä¸€ä¸ªä»£ç å—ã€‚æœ‰ä¸‰ç§æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼š\n\né”®ç›˜å¿«æ·é”® Cmd + Option + I / Ctrl + Alt + Iã€‚\nç¼–è¾‘å™¨å·¥å…·æ ä¸­çš„â€œInsertâ€æŒ‰é’®å›¾æ ‡ã€‚\næ‰‹åŠ¨è¾“å…¥ä»£ç å—åˆ†éš”ç¬¦ ```{r} å’Œ ```ã€‚\n\næˆ‘ä»¬å»ºè®®ä½ å­¦ä¹ é”®ç›˜å¿«æ·é”®ã€‚ä»é•¿è¿œæ¥çœ‹ï¼Œå®ƒä¼šä¸ºä½ èŠ‚çœå¤§é‡æ—¶é—´ï¼\nä½ å¯ä»¥ç»§ç»­ä½¿ç”¨ä½ ç°åœ¨ï¼ˆæˆ‘ä»¬å¸Œæœ›ï¼ï¼‰å·²ç»ç†ŸçŸ¥å¹¶å–œçˆ±çš„é”®ç›˜å¿«æ·é”®æ¥è¿è¡Œä»£ç ï¼šCmd/Ctrl + Enterã€‚ç„¶è€Œï¼Œä»£ç å—æœ‰äº†ä¸€ä¸ªæ–°çš„é”®ç›˜å¿«æ·é”®ï¼šCmd/Ctrl + Shift + Enterï¼Œå®ƒä¼šè¿è¡Œä»£ç å—ä¸­çš„æ‰€æœ‰ä»£ç ã€‚æŠŠä»£ç å—æƒ³è±¡æˆä¸€ä¸ªå‡½æ•°ã€‚ä¸€ä¸ªä»£ç å—åº”è¯¥æ˜¯ç›¸å¯¹ç‹¬ç«‹çš„ï¼Œå¹¶ä¸“æ³¨äºä¸€ä¸ªå•ä¸€çš„ä»»åŠ¡ã€‚\næ¥ä¸‹æ¥çš„éƒ¨åˆ†æè¿°äº†ä»£ç å—æ ‡å¤´ï¼Œå®ƒç”± ```{r} ç»„æˆï¼Œåé¢å¯ä»¥è·Ÿä¸€ä¸ªå¯é€‰çš„ä»£ç å—æ ‡ç­¾å’Œå„ç§å…¶ä»–çš„ä»£ç å—é€‰é¡¹ï¼Œæ¯ä¸ªé€‰é¡¹éƒ½åœ¨æ–°çš„ä¸€è¡Œï¼Œå¹¶ä»¥ #| å¼€å¤´ã€‚\n\n28.5.1 ä»£ç å—æ ‡ç­¾\nä»£ç å—å¯ä»¥æœ‰ä¸€ä¸ªå¯é€‰çš„æ ‡ç­¾ï¼Œä¾‹å¦‚ï¼š\n\n```{r}\n#| label: simple-addition\n1 + 1\n```\n#&gt; [1] 2\n\nè¿™æœ‰ä¸‰ä¸ªä¼˜ç‚¹ï¼š\n\nä½ å¯ä»¥ä½¿ç”¨è„šæœ¬ç¼–è¾‘å™¨å·¦ä¸‹è§’çš„ä¸‹æ‹‰ä»£ç å¯¼èˆªå™¨æ›´è½»æ¾åœ°å¯¼èˆªåˆ°ç‰¹å®šçš„ä»£ç å—ï¼š\n\n#| echo: false #| out-width: â€œ30%â€ #| fig-alt: | #| RStudio IDE çš„ç‰‡æ®µï¼Œä»…æ˜¾ç¤ºä¸‹æ‹‰ä»£ç å¯¼èˆªå™¨ï¼Œ #| å…¶ä¸­æ˜¾ç¤ºäº†ä¸‰ä¸ªä»£ç å—ã€‚ä»£ç å— 1 æ˜¯ setupã€‚ä»£ç å— 2 æ˜¯ carsï¼Œ #| å®ƒåœ¨ä¸€ä¸ªåä¸º Quarto çš„éƒ¨åˆ†ä¸­ã€‚ä»£ç å— 3 æ˜¯ pressureï¼Œ #| å®ƒåœ¨ä¸€ä¸ªåä¸ºâ€œåŒ…å«ç»˜å›¾â€çš„éƒ¨åˆ†ä¸­ã€‚ knitr::include_graphics(â€œscreenshots/quarto-chunk-nav.pngâ€) ```\n\nç”±ä»£ç å—ç”Ÿæˆçš„å›¾å½¢å°†å…·æœ‰æœ‰æ„ä¹‰çš„åç§°ï¼Œè¿™ä½¿å¾—å®ƒä»¬åœ¨å…¶ä»–åœ°æ–¹æ›´å®¹æ˜“ä½¿ç”¨ã€‚æ›´å¤šç›¸å…³å†…å®¹è§ Section 28.6ã€‚\nä½ å¯ä»¥å»ºç«‹ç¼“å­˜ä»£ç å—çš„ç½‘ç»œï¼Œä»¥é¿å…æ¯æ¬¡è¿è¡Œæ—¶éƒ½é‡æ–°æ‰§è¡Œè€—æ—¶çš„è®¡ç®—ã€‚æ›´å¤šç›¸å…³å†…å®¹è§ Section 28.8ã€‚\n\nä½ çš„ä»£ç å—æ ‡ç­¾åº”è¯¥ç®€çŸ­ä½†å…·æœ‰æè¿°æ€§ï¼Œå¹¶ä¸”ä¸åº”åŒ…å«ç©ºæ ¼ã€‚æˆ‘ä»¬å»ºè®®ä½¿ç”¨ç ´æŠ˜å· (-) æ¥åˆ†éš”å•è¯ï¼ˆè€Œä¸æ˜¯ä¸‹åˆ’çº¿ _ï¼‰ï¼Œå¹¶é¿å…åœ¨ä»£ç å—æ ‡ç­¾ä¸­ä½¿ç”¨å…¶ä»–ç‰¹æ®Šå­—ç¬¦ã€‚\nä½ é€šå¸¸å¯ä»¥è‡ªç”±åœ°ä¸ºä½ çš„ä»£ç å—å‘½åï¼Œä½†æœ‰ä¸€ä¸ªä»£ç å—åç§°å…·æœ‰ç‰¹æ®Šè¡Œä¸ºï¼šsetupã€‚å½“ä½ åœ¨ç¬”è®°æ¨¡å¼ä¸‹æ—¶ï¼Œåä¸º setup çš„ä»£ç å—å°†åœ¨è¿è¡Œä»»ä½•å…¶ä»–ä»£ç ä¹‹å‰è‡ªåŠ¨è¿è¡Œä¸€æ¬¡ã€‚\næ­¤å¤–ï¼Œä»£ç å—æ ‡ç­¾ä¸èƒ½é‡å¤ã€‚æ¯ä¸ªä»£ç å—æ ‡ç­¾å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚\n\n28.5.2 ä»£ç å—é€‰é¡¹\nä»£ç å—çš„è¾“å‡ºå¯ä»¥é€šè¿‡é€‰é¡¹è¿›è¡Œå®šåˆ¶ï¼Œè¿™äº›é€‰é¡¹æ˜¯æä¾›ç»™ä»£ç å—æ ‡å¤´çš„å­—æ®µã€‚Knitr æä¾›äº†è¿‘ 60 ä¸ªé€‰é¡¹ï¼Œä½ å¯ä»¥ç”¨å®ƒä»¬æ¥å®šåˆ¶ä½ çš„ä»£ç å—ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†ä»‹ç»ä½ å°†é¢‘ç¹ä½¿ç”¨çš„æœ€é‡è¦çš„ä»£ç å—é€‰é¡¹ã€‚ä½ å¯ä»¥åœ¨ https://yihui.org/knitr/options æŸ¥çœ‹å®Œæ•´åˆ—è¡¨ã€‚\næœ€é‡è¦çš„ä¸€ç»„é€‰é¡¹æ§åˆ¶ä½ çš„ä»£ç å—æ˜¯å¦è¢«æ‰§è¡Œï¼Œä»¥åŠå“ªäº›ç»“æœä¼šæ’å…¥åˆ°æœ€ç»ˆçš„æŠ¥å‘Šä¸­ï¼š\n\neval: false é˜»æ­¢ä»£ç è¢«æ‰§è¡Œã€‚ï¼ˆæ˜¾ç„¶ï¼Œå¦‚æœä»£ç ä¸è¿è¡Œï¼Œå°±ä¸ä¼šç”Ÿæˆä»»ä½•ç»“æœï¼‰ã€‚è¿™å¯¹äºæ˜¾ç¤ºç¤ºä¾‹ä»£ç ï¼Œæˆ–è€…åœ¨ä¸æ³¨é‡Šæ‰æ¯ä¸€è¡Œçš„æƒ…å†µä¸‹ç¦ç”¨ä¸€å¤§å—ä»£ç å¾ˆæœ‰ç”¨ã€‚\ninclude: false è¿è¡Œä»£ç ï¼Œä½†ä¸åœ¨æœ€ç»ˆæ–‡æ¡£ä¸­æ˜¾ç¤ºä»£ç æˆ–ç»“æœã€‚å¯ç”¨äºä½ ä¸æƒ³è®©æŠ¥å‘Šå˜å¾—æ‚ä¹±çš„è®¾ç½®ä»£ç ã€‚\necho: false é˜»æ­¢ä»£ç ï¼ˆè€Œä¸æ˜¯ç»“æœï¼‰å‡ºç°åœ¨æœ€ç»ˆæ–‡ä»¶ä¸­ã€‚å½“ç¼–å†™é¢å‘ä¸å¸Œæœ›çœ‹åˆ°åº•å±‚ R ä»£ç çš„äººçš„æŠ¥å‘Šæ—¶ï¼Œè¯·ä½¿ç”¨æ­¤é€‰é¡¹ã€‚\nmessage: false æˆ– warning: false é˜»æ­¢æ¶ˆæ¯æˆ–è­¦å‘Šå‡ºç°åœ¨æœ€ç»ˆæ–‡ä»¶ä¸­ã€‚\nresults: hide éšè—æ‰“å°è¾“å‡ºï¼›fig-show: hide éšè—ç»˜å›¾ã€‚\nerror: true å³ä½¿ä»£ç è¿”å›é”™è¯¯ï¼Œä¹Ÿä¼šè®©æ¸²æŸ“ç»§ç»­è¿›è¡Œã€‚è¿™å¾ˆå°‘æ˜¯ä½ æƒ³è¦åŒ…å«åœ¨æŠ¥å‘Šæœ€ç»ˆç‰ˆæœ¬ä¸­çš„ä¸œè¥¿ï¼Œä½†å¦‚æœä½ éœ€è¦ç²¾ç¡®è°ƒè¯• .qmd æ–‡ä»¶å†…éƒ¨å‘ç”Ÿäº†ä»€ä¹ˆï¼Œå®ƒå¯èƒ½éå¸¸æœ‰ç”¨ã€‚å¦‚æœä½ æ­£åœ¨æ•™ R å¹¶ä¸”æƒ³æ•…æ„åŒ…å«ä¸€ä¸ªé”™è¯¯ï¼Œå®ƒä¹Ÿå¾ˆæœ‰ç”¨ã€‚é»˜è®¤å€¼ error: false ä¼šåœ¨æ–‡æ¡£ä¸­å‡ºç°å•ä¸ªé”™è¯¯æ—¶å¯¼è‡´æ¸²æŸ“å¤±è´¥ã€‚\n\nè¿™äº›ä»£ç å—é€‰é¡¹ä¸­çš„æ¯ä¸€ä¸ªéƒ½è¢«æ·»åŠ åˆ°ä»£ç å—çš„æ ‡å¤´ä¸­ï¼Œè·Ÿåœ¨ #| ä¹‹åã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„ä»£ç å—ä¸­ï¼Œç»“æœä¸ä¼šè¢«æ‰“å°ï¼Œå› ä¸º eval è¢«è®¾ç½®ä¸º falseã€‚\n\n```{r}\n#| label: simple-multiplication\n#| eval: false\n2 * 2\n```\n\nä¸‹è¡¨æ€»ç»“äº†æ¯ä¸ªé€‰é¡¹æŠ‘åˆ¶äº†å“ªäº›ç±»å‹çš„è¾“å‡ºï¼š\n\n\né€‰é¡¹\nè¿è¡Œä»£ç \næ˜¾ç¤ºä»£ç \nè¾“å‡º\nç»˜å›¾\næ¶ˆæ¯\nè­¦å‘Š\n\n\n\neval: false\nX\n\nX\nX\nX\nX\n\n\ninclude: false\n\nX\nX\nX\nX\nX\n\n\necho: false\n\nX\n\n\n\n\n\n\nresults: hide\n\n\nX\n\n\n\n\n\nfig-show: hide\n\n\n\nX\n\n\n\n\nmessage: false\n\n\n\n\nX\n\n\n\nwarning: false\n\n\n\n\n\nX\n\n\n\n28.5.3 å…¨å±€é€‰é¡¹\néšç€ä½ æ›´å¤šåœ°ä½¿ç”¨ knitrï¼Œä½ ä¼šå‘ç°ä¸€äº›é»˜è®¤çš„ä»£ç å—é€‰é¡¹ä¸ç¬¦åˆä½ çš„éœ€æ±‚ï¼Œä½ æƒ³è¦æ›´æ”¹å®ƒä»¬ã€‚\nä½ å¯ä»¥åœ¨æ–‡æ¡£çš„ YAML ä¸­ï¼Œåœ¨ execute ä¸‹æ·»åŠ ä½ åå¥½çš„é€‰é¡¹æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æ­£åœ¨ä¸ºä¸€ç¾¤ä¸éœ€è¦çœ‹åˆ°ä½ çš„ä»£ç ï¼Œåªéœ€è¦ä½ çš„ç»“æœå’Œå™è¿°çš„è§‚ä¼—å‡†å¤‡æŠ¥å‘Šï¼Œä½ å¯ä»¥åœ¨æ–‡æ¡£çº§åˆ«è®¾ç½® echo: falseã€‚è¿™å°†é»˜è®¤éšè—ä»£ç ï¼Œå› æ­¤åªæ˜¾ç¤ºä½ ç‰¹æ„é€‰æ‹©æ˜¾ç¤ºçš„ä»£ç å—ï¼ˆä½¿ç”¨ echo: trueï¼‰ã€‚ä½ å¯èƒ½ä¼šè€ƒè™‘è®¾ç½® message: false å’Œ warning: falseï¼Œä½†è¿™ä¼šä½¿è°ƒè¯•é—®é¢˜å˜å¾—æ›´åŠ å›°éš¾ï¼Œå› ä¸ºä½ åœ¨æœ€ç»ˆæ–‡æ¡£ä¸­çœ‹ä¸åˆ°ä»»ä½•æ¶ˆæ¯ã€‚\ntitle: \"æˆ‘çš„æŠ¥å‘Š\"\nexecute:\n  echo: false\nç”±äº Quarto è¢«è®¾è®¡ä¸ºå¤šè¯­è¨€çš„ï¼ˆå¯ä¸ R ä»¥åŠ Pythonã€Julia ç­‰å…¶ä»–è¯­è¨€ä¸€èµ·å·¥ä½œï¼‰ï¼Œæ‰€ä»¥å¹¶éæ‰€æœ‰çš„ knitr é€‰é¡¹éƒ½åœ¨æ–‡æ¡£æ‰§è¡Œçº§åˆ«å¯ç”¨ï¼Œå› ä¸ºå…¶ä¸­ä¸€äº›åªé€‚ç”¨äº knitrï¼Œè€Œä¸é€‚ç”¨äº Quarto ç”¨äºåœ¨å…¶ä»–è¯­è¨€ä¸­è¿è¡Œä»£ç çš„å…¶ä»–å¼•æ“ï¼ˆä¾‹å¦‚ Jupyterï¼‰ã€‚ç„¶è€Œï¼Œä½ ä»ç„¶å¯ä»¥åœ¨ knitr å­—æ®µä¸‹çš„ opts_chunk ä¸­å°†å®ƒä»¬è®¾ç½®ä¸ºæ–‡æ¡£çš„å…¨å±€é€‰é¡¹ã€‚ä¾‹å¦‚ï¼Œåœ¨ç¼–å†™ä¹¦ç±å’Œæ•™ç¨‹æ—¶ï¼Œæˆ‘ä»¬è®¾ç½®ï¼š\ntitle: \"æ•™ç¨‹\"\nknitr:\n  opts_chunk:\n    comment: \"#&gt;\"\n    collapse: true\nè¿™ä½¿ç”¨äº†æˆ‘ä»¬åå¥½çš„æ³¨é‡Šæ ¼å¼ï¼Œå¹¶ç¡®ä¿ä»£ç å’Œè¾“å‡ºç´§å¯†åœ°ç»“åˆåœ¨ä¸€èµ·ã€‚\n\n28.5.4 å†…è”ä»£ç \nè¿˜æœ‰å¦ä¸€ç§å°† R ä»£ç åµŒå…¥åˆ° Quarto æ–‡æ¡£ä¸­çš„æ–¹æ³•ï¼šç›´æ¥åµŒå…¥æ–‡æœ¬ä¸­ï¼Œä½¿ç”¨ï¼š`r `ã€‚å¦‚æœä½ åœ¨æ–‡æœ¬ä¸­æåˆ°æ•°æ®çš„å±æ€§ï¼Œè¿™ä¼šéå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œæœ¬ç« å¼€å¤´ä½¿ç”¨çš„ç¤ºä¾‹æ–‡æ¡£ä¸­æœ‰ï¼š\n\næˆ‘ä»¬æœ‰å…³äº `r nrow(diamonds)` é¢—é’»çŸ³çš„æ•°æ®ã€‚ åªæœ‰ `r nrow(diamonds) - nrow(smaller)` é¢—é’»çŸ³å¤§äº 2.5 å…‹æ‹‰ã€‚ å‰©ä½™éƒ¨åˆ†çš„åˆ†å¸ƒå¦‚ä¸‹æ‰€ç¤ºï¼š\n\nå½“æŠ¥å‘Šè¢«æ¸²æŸ“æ—¶ï¼Œè¿™äº›è®¡ç®—çš„ç»“æœä¼šè¢«æ’å…¥åˆ°æ–‡æœ¬ä¸­ï¼š\n\næˆ‘ä»¬æœ‰å…³äº 53940 é¢—é’»çŸ³çš„æ•°æ®ã€‚ åªæœ‰ 126 é¢—é’»çŸ³å¤§äº 2.5 å…‹æ‹‰ã€‚ å‰©ä½™éƒ¨åˆ†çš„åˆ†å¸ƒå¦‚ä¸‹æ‰€ç¤ºï¼š\n\nåœ¨æ–‡æœ¬ä¸­æ’å…¥æ•°å­—æ—¶ï¼Œformat() æ˜¯ä½ çš„å¥½å¸®æ‰‹ã€‚å®ƒå…è®¸ä½ è®¾ç½® digits çš„æ•°é‡ï¼Œè¿™æ ·ä½ å°±ä¸ä¼šæ‰“å°å‡ºç²¾åº¦é«˜åˆ°ç¦»è°±çš„æ•°å­—ï¼Œè¿˜å¯ä»¥è®¾ç½® big.mark ä½¿æ•°å­—æ›´å®¹æ˜“é˜…è¯»ã€‚ä½ å¯èƒ½ä¼šå°†è¿™äº›ç»„åˆæˆä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼š\n\ncomma &lt;- function(x) format(x, digits = 2, big.mark = \",\")\ncomma(3452345)\n#&gt; [1] \"3,452,345\"\ncomma(.12358124331)\n#&gt; [1] \"0.12\"\n\n\n28.5.5 ç»ƒä¹ \n\næ·»åŠ ä¸€ä¸ªéƒ¨åˆ†ï¼Œæ¢è®¨é’»çŸ³å¤§å°å¦‚ä½•éšåˆ‡å·¥ã€é¢œè‰²å’Œå‡€åº¦è€Œå˜åŒ–ã€‚å‡è®¾ä½ æ­£åœ¨ä¸ºä¸æ‡‚ R çš„äººå†™æŠ¥å‘Šï¼Œå¹¶ä¸”ä¸è¦åœ¨æ¯ä¸ªä»£ç å—ä¸Šè®¾ç½® echo: falseï¼Œè€Œæ˜¯è®¾ç½®ä¸€ä¸ªå…¨å±€é€‰é¡¹ã€‚\nä» https://github.com/hadley/r4ds/tree/main/quarto ä¸‹è½½ diamond-sizes.qmdã€‚æ·»åŠ ä¸€ä¸ªæè¿°æœ€å¤§çš„ 20 é¢—é’»çŸ³çš„éƒ¨åˆ†ï¼ŒåŒ…æ‹¬ä¸€ä¸ªæ˜¾ç¤ºå®ƒä»¬æœ€é‡è¦å±æ€§çš„è¡¨æ ¼ã€‚\nä¿®æ”¹ diamonds-sizes.qmd ä»¥ä½¿ç”¨ label_comma() æ¥ç”Ÿæˆæ ¼å¼ç²¾ç¾çš„è¾“å‡ºã€‚åŒæ—¶ï¼Œä¹ŸåŒ…æ‹¬å¤§äº 2.5 å…‹æ‹‰çš„é’»çŸ³çš„ç™¾åˆ†æ¯”ã€‚",
    "crumbs": [
      "æ²Ÿé€š",
      "<span class='chapter-number'>28</span>Â  <span class='chapter-title'>Quarto</span>"
    ]
  },
  {
    "objectID": "quarto.html#sec-figures",
    "href": "quarto.html#sec-figures",
    "title": "28Â  Quarto",
    "section": "\n28.6 å›¾å½¢",
    "text": "28.6 å›¾å½¢\nQuarto æ–‡æ¡£ä¸­çš„å›¾å½¢å¯ä»¥æ˜¯è¢«åµŒå…¥çš„ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ª PNG æˆ– JPEG æ–‡ä»¶ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ä»£ç å—è¿è¡Œçš„ç»“æœã€‚\nè¦åµŒå…¥ä¸€ä¸ªå¤–éƒ¨æ–‡ä»¶ä¸­çš„å›¾åƒï¼Œä½ å¯ä»¥åœ¨ RStudio çš„å¯è§†åŒ–ç¼–è¾‘å™¨ä¸­ä½¿ç”¨â€œInsertâ€èœå•ï¼Œç„¶åé€‰æ‹©â€œFigure / Imageâ€ã€‚è¿™å°†å¼¹å‡ºä¸€ä¸ªèœå•ï¼Œä½ å¯ä»¥åœ¨å…¶ä¸­æµè§ˆåˆ°ä½ æƒ³è¦æ’å…¥çš„å›¾åƒï¼Œå¹¶ä¸ºå…¶æ·»åŠ æ›¿ä»£æ–‡æœ¬æˆ–æ ‡é¢˜ï¼Œä»¥åŠè°ƒæ•´å…¶å¤§å°ã€‚åœ¨å¯è§†åŒ–ç¼–è¾‘å™¨ä¸­ï¼Œä½ ä¹Ÿå¯ä»¥ç®€å•åœ°å°†å‰ªè´´æ¿ä¸­çš„å›¾åƒç²˜è´´åˆ°ä½ çš„æ–‡æ¡£ä¸­ï¼ŒRStudio ä¼šå°†è¯¥å›¾åƒçš„å‰¯æœ¬æ”¾ç½®åœ¨ä½ çš„é¡¹ç›®æ–‡ä»¶å¤¹ä¸­ã€‚\nå¦‚æœä½ åŒ…å«ä¸€ä¸ªç”Ÿæˆå›¾å½¢çš„ä»£ç å—ï¼ˆä¾‹å¦‚ï¼ŒåŒ…å«ä¸€ä¸ª ggplot() è°ƒç”¨ï¼‰ï¼Œç”Ÿæˆçš„å›¾å½¢å°†è‡ªåŠ¨åŒ…å«åœ¨ä½ çš„ Quarto æ–‡æ¡£ä¸­ã€‚\n\n28.6.1 å›¾å½¢å°ºå¯¸\nåœ¨ Quarto ä¸­ï¼Œå›¾å½¢æœ€å¤§çš„æŒ‘æˆ˜æ˜¯è®©ä½ çš„å›¾å½¢è·å¾—æ­£ç¡®çš„å°ºå¯¸å’Œå½¢çŠ¶ã€‚æœ‰äº”ä¸ªä¸»è¦çš„é€‰é¡¹æ§åˆ¶å›¾å½¢å°ºå¯¸ï¼šfig-widthã€fig-heightã€fig-aspã€out-width å’Œ out-heightã€‚å›¾åƒå°ºå¯¸ä¹‹æ‰€ä»¥å…·æœ‰æŒ‘æˆ˜æ€§ï¼Œæ˜¯å› ä¸ºæœ‰ä¸¤ä¸ªå°ºå¯¸ï¼ˆR åˆ›å»ºçš„å›¾å½¢çš„å°ºå¯¸å’Œå®ƒåœ¨è¾“å‡ºæ–‡æ¡£ä¸­æ’å…¥çš„å°ºå¯¸ï¼‰ï¼Œå¹¶ä¸”æœ‰å¤šç§æŒ‡å®šå°ºå¯¸çš„æ–¹å¼ï¼ˆå³é«˜åº¦ã€å®½åº¦å’Œçºµæ¨ªæ¯”ï¼šä¸‰é€‰äºŒï¼‰ã€‚\næˆ‘ä»¬æ¨èä½¿ç”¨è¿™äº”ä¸ªé€‰é¡¹ä¸­çš„ä¸‰ä¸ªï¼š\n\nå¦‚æœå›¾å½¢å…·æœ‰ä¸€è‡´çš„å®½åº¦ï¼Œå®ƒä»¬å¾€å¾€åœ¨ç¾å­¦ä¸Šæ›´ä»¤äººæ„‰æ‚¦ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œè¯·åœ¨é»˜è®¤è®¾ç½®ä¸­è®¾ç½® fig-width: 6ï¼ˆ6è‹±å¯¸ï¼‰å’Œ fig-asp: 0.618ï¼ˆé»„é‡‘æ¯”ä¾‹ï¼‰ã€‚ç„¶ååœ¨å•ä¸ªä»£ç å—ä¸­ï¼Œåªè°ƒæ•´ fig-aspã€‚\n\nä½¿ç”¨ out-width æ§åˆ¶è¾“å‡ºå°ºå¯¸ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºè¾“å‡ºæ–‡æ¡£æ­£æ–‡å®½åº¦çš„ç™¾åˆ†æ¯”ã€‚æˆ‘ä»¬å»ºè®® out-width: \"70%\" å’Œ fig-align: centerã€‚\nè¿™ç»™ç»˜å›¾ç•™å‡ºäº†å‘¼å¸çš„ç©ºé—´ï¼Œè€Œä¸ä¼šå ç”¨å¤ªå¤šç©ºé—´ã€‚\n\nè¦å°†å¤šä¸ªç»˜å›¾æ”¾åœ¨ä¸€è¡Œä¸­ï¼Œè¯·ä¸ºä¸¤ä¸ªç»˜å›¾è®¾ç½® layout-ncol ä¸º 2ï¼Œä¸ºä¸‰ä¸ªç»˜å›¾è®¾ç½® layout-ncol ä¸º 3ï¼Œä¾æ­¤ç±»æ¨ã€‚å¦‚æœ layout-ncol æ˜¯ 2ï¼Œè¿™å®é™…ä¸Šä¼šå°†æ¯ä¸ªç»˜å›¾çš„ out-width è®¾ç½®ä¸º â€œ50%â€ï¼›å¦‚æœ layout-ncol æ˜¯ 3ï¼Œåˆ™ä¸º â€œ33%â€ï¼Œä¾æ­¤ç±»æ¨ã€‚æ ¹æ®ä½ è¯•å›¾è¯´æ˜çš„å†…å®¹ï¼ˆä¾‹å¦‚ï¼Œæ˜¾ç¤ºæ•°æ®æˆ–æ˜¾ç¤ºç»˜å›¾å˜ä½“ï¼‰ï¼Œä½ å¯èƒ½è¿˜éœ€è¦è°ƒæ•´ fig-widthï¼Œå¦‚ä¸‹æ‰€è¿°ã€‚\n\nå¦‚æœä½ å‘ç°ä½ éœ€è¦çœ¯ç€çœ¼ç›æ‰èƒ½çœ‹æ¸…ç»˜å›¾ä¸­çš„æ–‡å­—ï¼Œä½ éœ€è¦è°ƒæ•´ fig-widthã€‚å¦‚æœ fig-width å¤§äºå›¾å½¢åœ¨æœ€ç»ˆæ–‡æ¡£ä¸­æ¸²æŸ“çš„å°ºå¯¸ï¼Œæ–‡å­—å°±ä¼šå¤ªå°ï¼›å¦‚æœ fig-width å°äºæœ€ç»ˆå°ºå¯¸ï¼Œæ–‡å­—å°±ä¼šå¤ªå¤§ã€‚ä½ é€šå¸¸éœ€è¦åšä¸€äº›å®éªŒæ¥æ‰¾å‡º fig-width å’Œæ–‡æ¡£ä¸­æœ€ç»ˆå®½åº¦ä¹‹é—´çš„æ­£ç¡®æ¯”ä¾‹ã€‚ä¸ºäº†è¯´æ˜è¿™ä¸ªåŸç†ï¼Œä¸‹é¢ä¸‰ä¸ªç»˜å›¾çš„ fig-width åˆ†åˆ«æ˜¯ 4ã€6 å’Œ 8ï¼š\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nå¦‚æœä½ æƒ³ç¡®ä¿æ‰€æœ‰å›¾å½¢çš„å­—ä½“å¤§å°éƒ½ä¸€è‡´ï¼Œé‚£ä¹ˆæ¯å½“ä½ è®¾ç½® out-width æ—¶ï¼Œä½ éƒ½éœ€è¦è°ƒæ•´ fig-width ä»¥ä¿æŒä¸ä½ çš„é»˜è®¤ out-width ç›¸åŒçš„æ¯”ä¾‹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„é»˜è®¤ fig-width æ˜¯ 6ï¼Œout-width æ˜¯ â€œ70%â€ï¼Œé‚£ä¹ˆå½“ä½ è®¾ç½® out-width: \"50%\" æ—¶ï¼Œä½ éœ€è¦å°† fig-width è®¾ç½®ä¸º 4.3 (6 * 0.5 / 0.7)ã€‚\nå›¾å½¢å°ºå¯¸å’Œç¼©æ”¾æ˜¯ä¸€é—¨è‰ºæœ¯å’Œç§‘å­¦ï¼Œè¦åšåˆ°æ°åˆ°å¥½å¤„å¯èƒ½éœ€è¦ä¸€ä¸ªè¿­ä»£çš„è¯•é”™è¿‡ç¨‹ã€‚ä½ å¯ä»¥åœ¨ è¿™ç¯‡å…³äºæ§åˆ¶ç»˜å›¾ç¼©æ”¾çš„åšå®¢æ–‡ç«  ä¸­äº†è§£æ›´å¤šå…³äºå›¾å½¢å°ºå¯¸çš„ä¿¡æ¯ã€‚\n\n28.6.2 å…¶ä»–é‡è¦é€‰é¡¹\nå½“åƒæœ¬ä¹¦è¿™æ ·å°†ä»£ç å’Œæ–‡æœ¬æ··åˆåœ¨ä¸€èµ·æ—¶ï¼Œä½ å¯ä»¥è®¾ç½® fig-show: holdï¼Œè¿™æ ·ç»˜å›¾å°±ä¼šåœ¨ä»£ç ä¹‹åæ˜¾ç¤ºã€‚è¿™æœ‰ä¸€ä¸ªä»¤äººæ„‰æ‚¦çš„å‰¯ä½œç”¨ï¼Œå³è¿«ä½¿ä½ ç”¨è§£é‡Šæ¥æ‰“æ–­å¤§æ®µçš„ä»£ç ã€‚\nè¦ä¸ºç»˜å›¾æ·»åŠ æ ‡é¢˜ï¼Œè¯·ä½¿ç”¨ fig-capã€‚åœ¨ Quarto ä¸­ï¼Œè¿™ä¼šå°†å›¾å½¢ä»å†…è”å˜ä¸ºâ€œæµ®åŠ¨â€ã€‚\nå¦‚æœä½ æ­£åœ¨ç”Ÿæˆ PDF è¾“å‡ºï¼Œé»˜è®¤çš„å›¾å½¢ç±»å‹æ˜¯ PDFã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é»˜è®¤è®¾ç½®ï¼Œå› ä¸º PDF æ˜¯é«˜è´¨é‡çš„çŸ¢é‡å›¾å½¢ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ è¦æ˜¾ç¤ºæ•°åƒä¸ªç‚¹ï¼Œå®ƒä»¬å¯èƒ½ä¼šäº§ç”Ÿéå¸¸å¤§ä¸”é€Ÿåº¦æ…¢çš„ç»˜å›¾ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè®¾ç½® fig-format: \"png\" æ¥å¼ºåˆ¶ä½¿ç”¨ PNGã€‚å®ƒä»¬çš„è´¨é‡ç¨ä½ï¼Œä½†ä¼šç´§å‡‘å¾—å¤šã€‚\nç»™ç”Ÿæˆå›¾å½¢çš„ä»£ç å—å‘½åæ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œå³ä½¿ä½ ä¸å¸¸ç»™å…¶ä»–ä»£ç å—åŠ æ ‡ç­¾ã€‚ä»£ç å—æ ‡ç­¾ç”¨äºç”Ÿæˆç£ç›˜ä¸Šå›¾å½¢çš„æ–‡ä»¶åï¼Œæ‰€ä»¥ç»™ä½ çš„ä»£ç å—å‘½åå¯ä»¥è®©ä½ æ›´å®¹æ˜“åœ°æŒ‘é€‰å‡ºç»˜å›¾å¹¶åœ¨å…¶ä»–æƒ…å†µä¸‹é‡ç”¨ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³å¿«é€Ÿåœ°å°†å•ä¸ªç»˜å›¾æ”¾å…¥ä¸€å°ç”µå­é‚®ä»¶ä¸­ï¼‰ã€‚\n\n28.6.3 ç»ƒä¹ \n\nåœ¨å¯è§†åŒ–ç¼–è¾‘å™¨ä¸­æ‰“å¼€ diamond-sizes.qmdï¼Œæ‰¾åˆ°ä¸€å¼ é’»çŸ³çš„å›¾ç‰‡ï¼Œå¤åˆ¶å®ƒï¼Œç„¶åç²˜è´´åˆ°æ–‡æ¡£ä¸­ã€‚åŒå‡»å›¾ç‰‡å¹¶æ·»åŠ ä¸€ä¸ªæ ‡é¢˜ã€‚è°ƒæ•´å›¾ç‰‡å¤§å°å¹¶æ¸²æŸ“ä½ çš„æ–‡æ¡£ã€‚è§‚å¯Ÿå›¾ç‰‡æ˜¯å¦‚ä½•ä¿å­˜åœ¨ä½ å½“å‰çš„å·¥ä½œç›®å½•ä¸­çš„ã€‚\nç¼–è¾‘ diamond-sizes.qmd ä¸­ç”Ÿæˆç»˜å›¾çš„ä»£ç å—çš„æ ‡ç­¾ï¼Œä½¿å…¶ä»¥å‰ç¼€ fig- å¼€å¤´ï¼Œå¹¶ä½¿ç”¨ä»£ç å—é€‰é¡¹ fig-cap ä¸ºå›¾å½¢æ·»åŠ ä¸€ä¸ªæ ‡é¢˜ã€‚ç„¶åï¼Œç¼–è¾‘ä»£ç å—ä¸Šæ–¹çš„æ–‡æœ¬ï¼Œä½¿ç”¨â€œInsert &gt; Cross Referenceâ€æ·»åŠ å¯¹è¯¥å›¾å½¢çš„äº¤å‰å¼•ç”¨ã€‚\nä½¿ç”¨ä»¥ä¸‹ä»£ç å—é€‰é¡¹æ›´æ”¹å›¾å½¢çš„å¤§å°ï¼Œä¸€æ¬¡ä¸€ä¸ªï¼Œæ¸²æŸ“ä½ çš„æ–‡æ¡£ï¼Œå¹¶æè¿°å›¾å½¢æ˜¯å¦‚ä½•å˜åŒ–çš„ã€‚\n\nfig-width: 10\nfig-height: 3\nout-width: \"100%\"\nout-width: \"20%\"",
    "crumbs": [
      "æ²Ÿé€š",
      "<span class='chapter-number'>28</span>Â  <span class='chapter-title'>Quarto</span>"
    ]
  },
  {
    "objectID": "quarto.html#è¡¨æ ¼",
    "href": "quarto.html#è¡¨æ ¼",
    "title": "28Â  Quarto",
    "section": "\n28.7 è¡¨æ ¼",
    "text": "28.7 è¡¨æ ¼\nä¸å›¾å½¢ç±»ä¼¼ï¼Œä½ å¯ä»¥åœ¨ Quarto æ–‡æ¡£ä¸­åŒ…å«ä¸¤ç§ç±»å‹çš„è¡¨æ ¼ã€‚å®ƒä»¬å¯ä»¥æ˜¯ä½ ç›´æ¥åœ¨ Quarto æ–‡æ¡£ä¸­åˆ›å»ºçš„ markdown è¡¨æ ¼ï¼ˆä½¿ç”¨â€œInsert Tableâ€èœå•ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ä»£ç å—è¿è¡Œç»“æœç”Ÿæˆçš„è¡¨æ ¼ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†é‡ç‚¹å…³æ³¨åè€…ï¼Œå³é€šè¿‡è®¡ç®—ç”Ÿæˆçš„è¡¨æ ¼ã€‚\né»˜è®¤æƒ…å†µä¸‹ï¼ŒQuarto ä¼šåƒä½ åœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°çš„é‚£æ ·æ‰“å°æ•°æ®æ¡†å’ŒçŸ©é˜µï¼š\n\nmtcars[1:5, ]\n#&gt;                    mpg cyl disp  hp drat    wt  qsec vs am gear carb\n#&gt; Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4\n#&gt; Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4\n#&gt; Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1\n#&gt; Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1\n#&gt; Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2\n\nå¦‚æœä½ å¸Œæœ›æ•°æ®ä»¥é™„åŠ æ ¼å¼æ˜¾ç¤ºï¼Œå¯ä»¥ä½¿ç”¨ knitr::kable() å‡½æ•°ã€‚ä¸‹é¢çš„ä»£ç ç”Ÿæˆäº† TableÂ 28.1ã€‚\n\nknitr::kable(mtcars[1:5, ], )\n\n\nTableÂ 28.1: ä¸€ä¸ª knitr kable è¡¨æ ¼ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nmpg\ncyl\ndisp\nhp\ndrat\nwt\nqsec\nvs\nam\ngear\ncarb\n\n\n\nMazda RX4\n21.0\n6\n160\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n\n\nMazda RX4 Wag\n21.0\n6\n160\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n\n\nDatsun 710\n22.8\n4\n108\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n\n\nHornet 4 Drive\n21.4\n6\n258\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n\n\nHornet Sportabout\n18.7\n8\n360\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n\n\n\n\n\n\n\n\né˜…è¯» ?knitr::kable çš„æ–‡æ¡£ï¼Œäº†è§£ä½ å¯ä»¥ç”¨æ¥è‡ªå®šä¹‰è¡¨æ ¼çš„å…¶ä»–æ–¹æ³•ã€‚å¦‚æœéœ€è¦æ›´æ·±åº¦çš„å®šåˆ¶ï¼Œå¯ä»¥è€ƒè™‘ gtã€huxtableã€reactableã€kableExtraã€xtableã€stargazerã€panderã€tables å’Œ ascii è¿™äº›åŒ…ã€‚å®ƒä»¬å„è‡ªæä¾›äº†ä¸€å¥—ä» R ä»£ç è¿”å›æ ¼å¼åŒ–è¡¨æ ¼çš„å·¥å…·ã€‚\n\n28.7.1 ç»ƒä¹ \n\nåœ¨å¯è§†åŒ–ç¼–è¾‘å™¨ä¸­æ‰“å¼€ diamond-sizes.qmdï¼Œæ’å…¥ä¸€ä¸ªä»£ç å—ï¼Œå¹¶ä½¿ç”¨ knitr::kable() æ·»åŠ ä¸€ä¸ªè¡¨æ ¼ï¼Œæ˜¾ç¤º diamonds æ•°æ®æ¡†çš„å‰ 5 è¡Œã€‚\næ”¹ç”¨ gt::gt() æ˜¾ç¤ºåŒä¸€ä¸ªè¡¨æ ¼ã€‚\næ·»åŠ ä¸€ä¸ªä»¥å‰ç¼€ tbl- å¼€å¤´çš„ä»£ç å—æ ‡ç­¾ï¼Œå¹¶ä½¿ç”¨ä»£ç å—é€‰é¡¹ tbl-cap ä¸ºè¡¨æ ¼æ·»åŠ ä¸€ä¸ªæ ‡é¢˜ã€‚ç„¶åï¼Œç¼–è¾‘ä»£ç å—ä¸Šæ–¹çš„æ–‡æœ¬ï¼Œä½¿ç”¨â€œInsert &gt; Cross Referenceâ€æ·»åŠ å¯¹è¯¥è¡¨æ ¼çš„äº¤å‰å¼•ç”¨ã€‚",
    "crumbs": [
      "æ²Ÿé€š",
      "<span class='chapter-number'>28</span>Â  <span class='chapter-title'>Quarto</span>"
    ]
  },
  {
    "objectID": "quarto.html#sec-caching",
    "href": "quarto.html#sec-caching",
    "title": "28Â  Quarto",
    "section": "\n28.8 ç¼“å­˜",
    "text": "28.8 ç¼“å­˜\né€šå¸¸æƒ…å†µä¸‹ï¼Œæ¯æ¬¡æ¸²æŸ“æ–‡æ¡£éƒ½æ˜¯ä»ä¸€ä¸ªå®Œå…¨å¹²å‡€çš„ç¯å¢ƒå¼€å§‹çš„ã€‚è¿™å¯¹äºå¯å¤ç°æ€§æ¥è¯´éå¸¸å¥½ï¼Œå› ä¸ºå®ƒç¡®ä¿äº†ä½ å·²ç»ç”¨ä»£ç æ•æ‰åˆ°äº†æ¯ä¸€ä¸ªé‡è¦çš„è®¡ç®—ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æœ‰ä¸€äº›è®¡ç®—éœ€è¦å¾ˆé•¿æ—¶é—´ï¼Œè¿™å¯èƒ½ä¼šå¾ˆç—›è‹¦ã€‚è§£å†³æ–¹æ¡ˆæ˜¯ cache: trueã€‚\nä½ å¯ä»¥åœ¨æ–‡æ¡£çº§åˆ«å¯ç”¨ Knitr ç¼“å­˜ï¼Œä»¥ç¼“å­˜æ–‡æ¡£ä¸­æ‰€æœ‰è®¡ç®—çš„ç»“æœï¼Œä½¿ç”¨æ ‡å‡†çš„ YAML é€‰é¡¹ï¼š\n---\ntitle: \"æˆ‘çš„æ–‡æ¡£\"\nexecute: \n  cache: true\n---\nä½ ä¹Ÿå¯ä»¥åœ¨ä»£ç å—çº§åˆ«å¯ç”¨ç¼“å­˜ï¼Œä»¥ç¼“å­˜ç‰¹å®šä»£ç å—ä¸­è®¡ç®—çš„ç»“æœï¼š\n\n```{r}\n#| cache: true\n# è€—æ—¶è®¡ç®—çš„ä»£ç ...\n```\n\nè®¾ç½®åï¼Œè¿™ä¼šå°†ä»£ç å—çš„è¾“å‡ºä¿å­˜åˆ°ç£ç›˜ä¸Šä¸€ä¸ªç‰¹æ®Šå‘½åçš„æ–‡ä»¶ä¸­ã€‚åœ¨åç»­è¿è¡Œä¸­ï¼Œknitr ä¼šæ£€æŸ¥ä»£ç æ˜¯å¦å·²æ›´æ”¹ï¼Œå¦‚æœæœªæ›´æ”¹ï¼Œå®ƒå°†é‡ç”¨ç¼“å­˜çš„ç»“æœã€‚\nç¼“å­˜ç³»ç»Ÿå¿…é¡»è°¨æ…ä½¿ç”¨ï¼Œå› ä¸ºé»˜è®¤æƒ…å†µä¸‹å®ƒåªåŸºäºä»£ç æœ¬èº«ï¼Œè€Œä¸æ˜¯å…¶ä¾èµ–é¡¹ã€‚ä¾‹å¦‚ï¼Œåœ¨è¿™é‡Œ processed_data ä»£ç å—ä¾èµ–äº raw-data ä»£ç å—ï¼š\n```{r}\n#| label: raw-data\n#| cache: true\nrawdata &lt;- readr::read_csv(\"ä¸€ä¸ª_éå¸¸_å¤§çš„_æ–‡ä»¶.csv\")\n```\n```{r}\n#| label: processed_data\n#| cache: true\nprocessed_data &lt;- rawdata |&gt;\n  filter(!is.na(import_var)) |&gt;\n  mutate(new_variable = complicated_transformation(x, y, z))\n```\nç¼“å­˜ processed_data ä»£ç å—æ„å‘³ç€å¦‚æœ dplyr ç®¡é“è¢«æ›´æ”¹ï¼Œå®ƒå°†è¢«é‡æ–°è¿è¡Œï¼Œä½†å¦‚æœ read_csv() è°ƒç”¨å‘ç”Ÿæ›´æ”¹ï¼Œå®ƒå°†ä¸ä¼šè¢«é‡æ–°è¿è¡Œã€‚ä½ å¯ä»¥ä½¿ç”¨ dependson ä»£ç å—é€‰é¡¹æ¥é¿å…è¿™ä¸ªé—®é¢˜ï¼š\n```{r}\n#| label: processed-data\n#| cache: true\n#| dependson: \"raw-data\"\nprocessed_data &lt;- rawdata |&gt;\n  filter(!is.na(import_var)) |&gt;\n  mutate(new_variable = complicated_transformation(x, y, z))\n```\ndependson åº”è¯¥åŒ…å«ä¸€ä¸ªå­—ç¬¦å‘é‡ï¼Œå…¶ä¸­åŒ…å«è¢«ç¼“å­˜çš„ä»£ç å—æ‰€ä¾èµ–çš„æ¯ä¸€ä¸ªä»£ç å—ã€‚æ¯å½“ knitr æ£€æµ‹åˆ°å…¶ä¾èµ–é¡¹ä¹‹ä¸€å‘ç”Ÿæ›´æ”¹æ—¶ï¼Œå®ƒå°±ä¼šæ›´æ–°è¢«ç¼“å­˜ä»£ç å—çš„ç»“æœã€‚\nè¯·æ³¨æ„ï¼Œå¦‚æœ a_very_large_file.csv å‘ç”Ÿæ›´æ”¹ï¼Œä»£ç å—å°†ä¸ä¼šæ›´æ–°ï¼Œå› ä¸º knitr ç¼“å­˜åªè·Ÿè¸ª .qmd æ–‡ä»¶å†…éƒ¨çš„æ›´æ”¹ã€‚å¦‚æœä½ è¿˜æƒ³è·Ÿè¸ªè¯¥æ–‡ä»¶çš„æ›´æ”¹ï¼Œå¯ä»¥ä½¿ç”¨ cache.extra é€‰é¡¹ã€‚è¿™æ˜¯ä¸€ä¸ªä»»æ„çš„ R è¡¨è¾¾å¼ï¼Œå½“å®ƒå‘ç”Ÿæ›´æ”¹æ—¶å°†ä½¿ç¼“å­˜å¤±æ•ˆã€‚ä¸€ä¸ªå¥½ç”¨çš„å‡½æ•°æ˜¯ file.mtime()ï¼šå®ƒè¿”å›æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´ã€‚ç„¶åä½ å¯ä»¥è¿™æ ·å†™ï¼š\n```{r}\n#| label: raw-data\n#| cache: true\n#| cache.extra: !expr file.mtime(\"a_very_large_file.csv\")\nrawdata &lt;- readr::read_csv(\"a_very_large_file.csv\")\n```\næˆ‘ä»¬é‡‡çº³äº† David Robinson çš„å»ºè®®æ¥å‘½åè¿™äº›ä»£ç å—ï¼šæ¯ä¸ªä»£ç å—éƒ½ä»¥å®ƒåˆ›å»ºçš„ä¸»è¦å¯¹è±¡å‘½åã€‚è¿™ä½¿å¾—ç†è§£ dependson è§„èŒƒå˜å¾—æ›´å®¹æ˜“ã€‚\néšç€ä½ çš„ç¼“å­˜ç­–ç•¥å˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œå®šæœŸä½¿ç”¨ knitr::clean_cache() æ¸…é™¤æ‰€æœ‰ç¼“å­˜æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚\n\n28.8.1 ç»ƒä¹ \n\nå»ºç«‹ä¸€ä¸ªä»£ç å—ç½‘ç»œï¼Œå…¶ä¸­ d ä¾èµ–äº c å’Œ bï¼Œè€Œ b å’Œ c éƒ½ä¾èµ–äº aã€‚è®©æ¯ä¸ªä»£ç å—æ‰“å° lubridate::now()ï¼Œè®¾ç½® cache: trueï¼Œç„¶åéªŒè¯ä½ å¯¹ç¼“å­˜çš„ç†è§£ã€‚",
    "crumbs": [
      "æ²Ÿé€š",
      "<span class='chapter-number'>28</span>Â  <span class='chapter-title'>Quarto</span>"
    ]
  },
  {
    "objectID": "quarto.html#æ•…éšœæ’é™¤",
    "href": "quarto.html#æ•…éšœæ’é™¤",
    "title": "28Â  Quarto",
    "section": "\n28.9 æ•…éšœæ’é™¤",
    "text": "28.9 æ•…éšœæ’é™¤\nå¯¹ Quarto æ–‡æ¡£è¿›è¡Œæ•…éšœæ’é™¤å¯èƒ½å…·æœ‰æŒ‘æˆ˜æ€§ï¼Œå› ä¸ºä½ ä¸å†å¤„äºäº¤äº’å¼çš„ R ç¯å¢ƒä¸­ï¼Œä½ éœ€è¦å­¦ä¹ ä¸€äº›æ–°æŠ€å·§ã€‚æ­¤å¤–ï¼Œé”™è¯¯å¯èƒ½æ˜¯ç”±äº Quarto æ–‡æ¡£æœ¬èº«çš„é—®é¢˜ï¼Œä¹Ÿå¯èƒ½æ˜¯ç”±äº Quarto æ–‡æ¡£ä¸­çš„ R ä»£ç é—®é¢˜ã€‚\nåœ¨å¸¦æœ‰ä»£ç å—çš„æ–‡æ¡£ä¸­ï¼Œä¸€ä¸ªå¸¸è§çš„é”™è¯¯æ˜¯é‡å¤çš„ä»£ç å—æ ‡ç­¾ï¼Œå¦‚æœä½ çš„å·¥ä½œæµç¨‹æ¶‰åŠå¤åˆ¶å’Œç²˜è´´ä»£ç å—ï¼Œè¿™ç§æƒ…å†µå°¤å…¶æ™®éã€‚è¦è§£å†³æ­¤é—®é¢˜ï¼Œä½ åªéœ€æ›´æ”¹å…¶ä¸­ä¸€ä¸ªé‡å¤çš„æ ‡ç­¾å³å¯ã€‚\nå¦‚æœé”™è¯¯æ˜¯ç”±äºæ–‡æ¡£ä¸­çš„ R ä»£ç å¼•èµ·çš„ï¼Œä½ åº”è¯¥é¦–å…ˆå°è¯•åœ¨äº¤äº’å¼ä¼šè¯ä¸­é‡ç°é—®é¢˜ã€‚é‡å¯ Rï¼Œç„¶åâ€œRun all chunksâ€ï¼ˆè¿è¡Œæ‰€æœ‰ä»£ç å—ï¼‰ï¼Œå¯ä»¥ä»â€œCodeâ€èœå•ä¸‹çš„â€œRun regionâ€ä¸­é€‰æ‹©ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é”®ç›˜å¿«æ·é”® Ctrl + Alt + Rã€‚å¦‚æœå¹¸è¿çš„è¯ï¼Œè¿™ä¼šé‡ç°é—®é¢˜ï¼Œä½ å°±å¯ä»¥åœ¨äº¤äº’å¼ç¯å¢ƒä¸­æ‰¾å‡ºé—®é¢˜æ‰€åœ¨ã€‚\nå¦‚æœè¿™æ²¡æœ‰å¸®åŠ©ï¼Œé‚£ä¹ˆä½ çš„äº¤äº’å¼ç¯å¢ƒå’Œ Quarto ç¯å¢ƒä¹‹é—´ä¸€å®šå­˜åœ¨æŸäº›å·®å¼‚ã€‚ä½ å°†éœ€è¦ç³»ç»Ÿåœ°æ¢ç´¢è¿™äº›é€‰é¡¹ã€‚æœ€å¸¸è§çš„å·®å¼‚æ˜¯å·¥ä½œç›®å½•ï¼šQuarto çš„å·¥ä½œç›®å½•æ˜¯å®ƒæ‰€åœ¨çš„ç›®å½•ã€‚é€šè¿‡åœ¨ä»£ç å—ä¸­åŒ…å« getwd() æ¥æ£€æŸ¥å·¥ä½œç›®å½•æ˜¯å¦å¦‚ä½ æ‰€æ–™ã€‚\næ¥ä¸‹æ¥ï¼Œé›†æ€å¹¿ç›Šï¼Œæƒ³å‡ºæ‰€æœ‰å¯èƒ½å¯¼è‡´è¯¥é”™è¯¯çš„å› ç´ ã€‚ä½ éœ€è¦ç³»ç»Ÿåœ°æ£€æŸ¥å®ƒä»¬åœ¨ä½ çš„ R ä¼šè¯å’Œä½ çš„ Quarto ä¼šè¯ä¸­æ˜¯å¦ç›¸åŒã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯åœ¨å¯¼è‡´é—®é¢˜çš„ä»£ç å—ä¸Šè®¾ç½® error: trueï¼Œç„¶åä½¿ç”¨ print() å’Œ str() æ¥æ£€æŸ¥è®¾ç½®æ˜¯å¦å¦‚ä½ æ‰€æ–™ã€‚",
    "crumbs": [
      "æ²Ÿé€š",
      "<span class='chapter-number'>28</span>Â  <span class='chapter-title'>Quarto</span>"
    ]
  },
  {
    "objectID": "quarto.html#yaml-æ ‡å¤´",
    "href": "quarto.html#yaml-æ ‡å¤´",
    "title": "28Â  Quarto",
    "section": "\n28.10 YAML æ ‡å¤´",
    "text": "28.10 YAML æ ‡å¤´\nä½ å¯ä»¥é€šè¿‡è°ƒæ•´ YAML æ ‡å¤´çš„å‚æ•°æ¥æ§åˆ¶è®¸å¤šå…¶ä»–â€œæ•´ä¸ªæ–‡æ¡£â€çš„è®¾ç½®ã€‚ä½ å¯èƒ½æƒ³çŸ¥é“ YAML ä»£è¡¨ä»€ä¹ˆï¼šå®ƒæ˜¯ â€œYAML Ainâ€™t Markup Languageâ€ï¼ˆYAML ä¸æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰ï¼Œæ—¨åœ¨ä»¥ä¸€ç§æ˜“äºäººç±»è¯»å†™çš„æ–¹å¼è¡¨ç¤ºåˆ†å±‚æ•°æ®ã€‚Quarto ç”¨å®ƒæ¥æ§åˆ¶è¾“å‡ºçš„è®¸å¤šç»†èŠ‚ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†è®¨è®ºä¸‰ä¸ªæ–¹é¢ï¼šè‡ªåŒ…å«æ–‡æ¡£ã€æ–‡æ¡£å‚æ•°å’Œå‚è€ƒæ–‡çŒ®ã€‚\n\n28.10.1 è‡ªåŒ…å«\nHTML æ–‡æ¡£é€šå¸¸æœ‰è®¸å¤šå¤–éƒ¨ä¾èµ–é¡¹ï¼ˆä¾‹å¦‚ï¼Œå›¾åƒã€CSS æ ·å¼è¡¨ã€JavaScript ç­‰ï¼‰ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒQuarto ä¼šå°†è¿™äº›ä¾èµ–é¡¹æ”¾åœ¨ä¸ä½ çš„ .qmd æ–‡ä»¶åŒç›®å½•ä¸‹çš„ä¸€ä¸ª _files æ–‡ä»¶å¤¹ä¸­ã€‚å¦‚æœä½ å°† HTML æ–‡ä»¶å‘å¸ƒåˆ°æ‰˜ç®¡å¹³å°ï¼ˆä¾‹å¦‚ï¼ŒQuartoPubï¼Œhttps://quartopub.com/ï¼‰ï¼Œè¿™ä¸ªç›®å½•ä¸­çš„ä¾èµ–é¡¹ä¼šä¸ä½ çš„æ–‡æ¡£ä¸€èµ·å‘å¸ƒï¼Œå› æ­¤åœ¨å·²å‘å¸ƒçš„æŠ¥å‘Šä¸­å¯ç”¨ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ æƒ³é€šè¿‡ç”µå­é‚®ä»¶å°†æŠ¥å‘Šå‘é€ç»™åŒäº‹ï¼Œä½ å¯èƒ½æ›´å–œæ¬¢ä¸€ä¸ªå•ä¸€çš„ã€è‡ªåŒ…å«çš„ HTML æ–‡æ¡£ï¼Œå®ƒåµŒå…¥äº†æ‰€æœ‰çš„ä¾èµ–é¡¹ã€‚ä½ å¯ä»¥é€šè¿‡æŒ‡å®š embed-resources é€‰é¡¹æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼š\nformat:\n  html:\n    embed-resources: true\nç”Ÿæˆçš„æ–‡ä»¶å°†æ˜¯è‡ªåŒ…å«çš„ï¼Œå› æ­¤å®ƒä¸éœ€è¦ä»»ä½•å¤–éƒ¨æ–‡ä»¶ï¼Œä¹Ÿä¸éœ€è¦äº’è”ç½‘è®¿é—®å³å¯ç”±æµè§ˆå™¨æ­£ç¡®æ˜¾ç¤ºã€‚\n\n28.10.2 å‚æ•°\nQuarto æ–‡æ¡£å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°ï¼Œå…¶å€¼å¯ä»¥åœ¨ä½ æ¸²æŸ“æŠ¥å‘Šæ—¶è®¾ç½®ã€‚å½“ä½ å¸Œæœ›ç”¨ä¸åŒçš„å…³é”®è¾“å…¥å€¼é‡æ–°æ¸²æŸ“åŒä¸€ä»½æŠ¥å‘Šæ—¶ï¼Œå‚æ•°éå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½éœ€è¦æŒ‰åˆ†å…¬å¸ç”Ÿæˆé”€å”®æŠ¥å‘Šã€æŒ‰å­¦ç”Ÿç”Ÿæˆè€ƒè¯•æˆç»©ï¼Œæˆ–è€…æŒ‰å›½å®¶ç”Ÿæˆäººå£ç»Ÿè®¡æ‘˜è¦ã€‚è¦å£°æ˜ä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°ï¼Œè¯·ä½¿ç”¨ params å­—æ®µã€‚\nè¿™ä¸ªä¾‹å­ä½¿ç”¨ä¸€ä¸ª my_class å‚æ•°æ¥å†³å®šæ˜¾ç¤ºå“ªä¸€ç±»æ±½è½¦ï¼š\n\n---\nformat: html\nparams:\n  my_class: \"suv\"\n---\n\n```{r}\n#| label: setup\n#| include: false\n\nlibrary(tidyverse)\n\nclass &lt;- mpg |&gt; filter(class == params$my_class)\n```\n\n# Fuel economy for `r params$my_class`s\n\n```{r}\n#| message: false\n\nggplot(class, aes(x = displ, y = hwy)) + \n  geom_point() + \n  geom_smooth(se = FALSE)\n```\n\nå¦‚ä½ æ‰€è§ï¼Œå‚æ•°åœ¨ä»£ç å—ä¸­ä½œä¸ºä¸€ä¸ªåä¸º params çš„åªè¯»åˆ—è¡¨å¯ç”¨ã€‚\nä½ å¯ä»¥å°†åŸå­å‘é‡ç›´æ¥å†™å…¥ YAML æ ‡å¤´ã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡åœ¨å‚æ•°å€¼å‰åŠ ä¸Š !expr æ¥è¿è¡Œä»»æ„ R è¡¨è¾¾å¼ã€‚è¿™æ˜¯æŒ‡å®šæ—¥æœŸ/æ—¶é—´å‚æ•°çš„å¥½æ–¹æ³•ã€‚\nparams:\n  start: !expr lubridate::ymd(\"2015-01-01\")\n  snapshot: !expr lubridate::ymd_hms(\"2015-01-01 12:30:00\")\n\n28.10.3 å‚è€ƒæ–‡çŒ®å’Œå¼•æ–‡\nQuarto å¯ä»¥è‡ªåŠ¨ç”Ÿæˆå¤šç§æ ·å¼çš„å¼•æ–‡å’Œå‚è€ƒæ–‡çŒ®ã€‚åœ¨ Quarto æ–‡æ¡£ä¸­æ·»åŠ å¼•æ–‡å’Œå‚è€ƒæ–‡çŒ®æœ€ç›´æ¥çš„æ–¹æ³•æ˜¯ä½¿ç”¨ RStudio ä¸­çš„å¯è§†åŒ–ç¼–è¾‘å™¨ã€‚\nè¦ä½¿ç”¨å¯è§†åŒ–ç¼–è¾‘å™¨æ·»åŠ å¼•æ–‡ï¼Œè¯·è½¬åˆ°â€œInsert &gt; Citationâ€ã€‚å¯ä»¥ä»å¤šç§æ¥æºæ’å…¥å¼•æ–‡ï¼š\n\nDOI (æ–‡æ¡£å¯¹è±¡æ ‡è¯†ç¬¦) å¼•ç”¨ã€‚\nZotero ä¸ªäººæˆ–å°ç»„æ–‡çŒ®åº“ã€‚\næœç´¢ Crossrefã€DataCite æˆ– PubMedã€‚\nä½ çš„æ–‡æ¡£å‚è€ƒæ–‡çŒ®ï¼ˆæ–‡æ¡£ç›®å½•ä¸­çš„ä¸€ä¸ª .bib æ–‡ä»¶ï¼‰ã€‚\n\nåœ¨åº•å±‚ï¼Œå¯è§†åŒ–æ¨¡å¼ä½¿ç”¨æ ‡å‡†çš„ Pandoc markdown è¡¨ç¤ºæ³•æ¥è¡¨ç¤ºå¼•æ–‡ï¼ˆä¾‹å¦‚ï¼Œ[@citation]ï¼‰ã€‚\nå¦‚æœä½ ä½¿ç”¨å‰ä¸‰ç§æ–¹æ³•ä¹‹ä¸€æ·»åŠ å¼•æ–‡ï¼Œå¯è§†åŒ–ç¼–è¾‘å™¨å°†è‡ªåŠ¨ä¸ºä½ åˆ›å»ºä¸€ä¸ª bibliography.bib æ–‡ä»¶ï¼Œå¹¶å°†å‚è€ƒæ–‡çŒ®æ·»åŠ åˆ°å…¶ä¸­ã€‚å®ƒè¿˜ä¼šåœ¨æ–‡æ¡£çš„ YAML ä¸­æ·»åŠ ä¸€ä¸ª bibliography å­—æ®µã€‚éšç€ä½ æ·»åŠ æ›´å¤šçš„å‚è€ƒæ–‡çŒ®ï¼Œè¿™ä¸ªæ–‡ä»¶å°†è¢«å®ƒä»¬çš„å¼•æ–‡å¡«å……ã€‚ä½ ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨è®¸å¤šå¸¸è§çš„å‚è€ƒæ–‡çŒ®æ ¼å¼ç¼–è¾‘æ­¤æ–‡ä»¶ï¼ŒåŒ…æ‹¬ BibLaTeXã€BibTeXã€EndNoteã€Medlineã€‚\nè¦åœ¨æºä»£ç ç¼–è¾‘å™¨ä¸­çš„ .qmd æ–‡ä»¶å†…åˆ›å»ºå¼•æ–‡ï¼Œè¯·ä½¿ç”¨ç”± â€˜@â€™ + å‚è€ƒæ–‡çŒ®æ–‡ä»¶ä¸­çš„å¼•æ–‡æ ‡è¯†ç¬¦ç»„æˆçš„é”®ã€‚ç„¶åå°†å¼•æ–‡æ”¾åœ¨æ–¹æ‹¬å·å†…ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ç¤ºä¾‹ï¼š\nç”¨åˆ†å·åˆ†éš”å¤šä¸ªå¼•æ–‡ï¼šBlah blah [@smith04; @doe99]ã€‚\n\nä½ å¯ä»¥åœ¨æ–¹æ‹¬å·å†…æ·»åŠ ä»»æ„æ³¨é‡Šï¼š\nBlah blah [å‚è§ @doe99, pp. 33-35; ä»¥åŠ @smith04, ch. 1]ã€‚\n\nå»æ‰æ–¹æ‹¬å·ä»¥åˆ›å»ºæ–‡å†…å¼•æ–‡ï¼š@smith04 \nè¯´ blahï¼Œæˆ–è€… @smith04 [p. 33] è¯´ blahã€‚\n\nåœ¨å¼•æ–‡å‰æ·»åŠ ä¸€ä¸ª `-` æ¥æŠ‘åˆ¶ä½œè€…çš„åå­—ï¼š\nSmith è¯´ blah [-@smith04]ã€‚\nå½“ Quarto æ¸²æŸ“ä½ çš„æ–‡ä»¶æ—¶ï¼Œå®ƒå°†åœ¨ä½ çš„æ–‡æ¡£æœ«å°¾æ„å»ºå¹¶é™„åŠ ä¸€ä¸ªå‚è€ƒæ–‡çŒ®åˆ—è¡¨ã€‚è¯¥å‚è€ƒæ–‡çŒ®åˆ—è¡¨å°†åŒ…å«ä½ çš„å‚è€ƒæ–‡çŒ®æ–‡ä»¶ä¸­çš„æ¯ä¸€ä¸ªè¢«å¼•ç”¨çš„å‚è€ƒæ–‡çŒ®ï¼Œä½†å®ƒä¸ä¼šåŒ…å«ä¸€ä¸ªç« èŠ‚æ ‡é¢˜ã€‚å› æ­¤ï¼Œé€šå¸¸çš„åšæ³•æ˜¯åœ¨ä½ çš„æ–‡ä»¶æœ«å°¾ä¸ºå‚è€ƒæ–‡çŒ®æ·»åŠ ä¸€ä¸ªç« èŠ‚æ ‡é¢˜ï¼Œä¾‹å¦‚ # å‚è€ƒæ–‡çŒ® æˆ– # Bibliographyã€‚\nä½ å¯ä»¥é€šè¿‡åœ¨ csl å­—æ®µä¸­å¼•ç”¨ä¸€ä¸ª CSL (citation style language) æ–‡ä»¶æ¥æ›´æ”¹ä½ çš„å¼•æ–‡å’Œå‚è€ƒæ–‡çŒ®çš„æ ·å¼ï¼š\nbibliography: rmarkdown.bib\ncsl: apa.csl\nä¸ bibliography å­—æ®µä¸€æ ·ï¼Œä½ çš„ csl æ–‡ä»¶åº”åŒ…å«æ–‡ä»¶çš„è·¯å¾„ã€‚è¿™é‡Œæˆ‘ä»¬å‡è®¾ csl æ–‡ä»¶ä¸ .qmd æ–‡ä»¶åœ¨åŒä¸€ä¸ªç›®å½•ä¸­ã€‚ä¸€ä¸ªå¯»æ‰¾å¸¸è§å‚è€ƒæ–‡çŒ®æ ·å¼ CSL æ–‡ä»¶çš„å¥½åœ°æ–¹æ˜¯ https://github.com/citation-style-language/stylesã€‚",
    "crumbs": [
      "æ²Ÿé€š",
      "<span class='chapter-number'>28</span>Â  <span class='chapter-title'>Quarto</span>"
    ]
  },
  {
    "objectID": "quarto.html#å·¥ä½œæµ",
    "href": "quarto.html#å·¥ä½œæµ",
    "title": "28Â  Quarto",
    "section": "\n28.11 å·¥ä½œæµ",
    "text": "28.11 å·¥ä½œæµ\næ—©äº›æ—¶å€™ï¼Œæˆ‘ä»¬è®¨è®ºäº†æ•è· R ä»£ç çš„åŸºæœ¬å·¥ä½œæµï¼Œå³ä½ åœ¨æ§åˆ¶å°ä¸­äº¤äº’å¼åœ°å·¥ä½œï¼Œç„¶ååœ¨è„šæœ¬ç¼–è¾‘å™¨ä¸­æ•è·æœ‰æ•ˆçš„å†…å®¹ã€‚Quarto å°†æ§åˆ¶å°å’Œè„šæœ¬ç¼–è¾‘å™¨ç»“åˆåœ¨ä¸€èµ·ï¼Œæ¨¡ç³Šäº†äº¤äº’å¼æ¢ç´¢å’Œé•¿æœŸä»£ç æ•è·ä¹‹é—´çš„ç•Œé™ã€‚ä½ å¯ä»¥åœ¨ä¸€ä¸ªä»£ç å—å†…å¿«é€Ÿè¿­ä»£ï¼Œç”¨ Cmd/Ctrl + Shift + Enter ç¼–è¾‘å’Œé‡æ–°æ‰§è¡Œã€‚å½“ä½ æ»¡æ„æ—¶ï¼Œä½ å°±å¯ä»¥ç»§ç»­å‰è¿›ï¼Œå¼€å§‹ä¸€ä¸ªæ–°çš„ä»£ç å—ã€‚\nQuarto ä¹‹æ‰€ä»¥é‡è¦ï¼Œè¿˜å› ä¸ºå®ƒå°†æ–‡å­—å’Œä»£ç å¦‚æ­¤ç´§å¯†åœ°é›†æˆåœ¨ä¸€èµ·ã€‚è¿™ä½¿å®ƒæˆä¸ºä¸€ä¸ªå¾ˆæ£’çš„åˆ†æç¬”è®°ï¼Œå› ä¸ºå®ƒè®©ä½ èƒ½å¤Ÿå¼€å‘ä»£ç å¹¶è®°å½•ä½ çš„æƒ³æ³•ã€‚åˆ†æç¬”è®°ä¸ç‰©ç†ç§‘å­¦ä¸­çš„ç»å…¸å®éªŒç¬”è®°æœ‰è®¸å¤šç›¸åŒçš„ç›®æ ‡ã€‚å®ƒï¼š\n\nè®°å½•ä½ åšäº†ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆè¿™ä¹ˆåšã€‚æ— è®ºä½ çš„è®°å¿†åŠ›æœ‰å¤šå¥½ï¼Œå¦‚æœä½ ä¸è®°å½•ä½ æ‰€åšçš„äº‹æƒ…ï¼Œæ€»æœ‰ä¸€å¤©ä½ ä¼šå¿˜è®°é‡è¦çš„ç»†èŠ‚ã€‚æŠŠå®ƒä»¬å†™ä¸‹æ¥ï¼Œè¿™æ ·ä½ å°±ä¸ä¼šå¿˜è®°ï¼\næ”¯æŒä¸¥è°¨çš„æ€è€ƒã€‚å¦‚æœä½ è¾¹åšè¾¹è®°å½•ä½ çš„æƒ³æ³•ï¼Œå¹¶æŒç»­åæ€å®ƒä»¬ï¼Œä½ æ›´æœ‰å¯èƒ½å¾—å‡ºä¸€ä¸ªå¼ºæœ‰åŠ›çš„åˆ†æã€‚å½“æœ€ç»ˆä½ å†™ä¸‹ä½ çš„åˆ†æä¸ä»–äººåˆ†äº«æ—¶ï¼Œè¿™ä¹Ÿä¸ºä½ èŠ‚çœäº†æ—¶é—´ã€‚\nå¸®åŠ©ä»–äººç†è§£ä½ çš„å·¥ä½œã€‚ç‹¬è‡ªè¿›è¡Œæ•°æ®åˆ†æçš„æƒ…å†µå¾ˆå°‘ï¼Œä½ é€šå¸¸ä¼šä½œä¸ºä¸€ä¸ªå›¢é˜Ÿçš„ä¸€éƒ¨åˆ†å·¥ä½œã€‚å®éªŒç¬”è®°å¯ä»¥å¸®åŠ©ä½ ä¸ä»…åˆ†äº«ä½ åšäº†ä»€ä¹ˆï¼Œè¿˜åˆ†äº«ä½ ä¸ºä»€ä¹ˆè¿™ä¹ˆåšç»™ä½ çš„åŒäº‹æˆ–å®éªŒå®¤ä¼™ä¼´ã€‚\n\nè®¸å¤šå…³äºæœ‰æ•ˆä½¿ç”¨å®éªŒç¬”è®°çš„å¥½å»ºè®®ä¹Ÿå¯ä»¥è½¬åŒ–ä¸ºåˆ†æç¬”è®°ã€‚æˆ‘ä»¬å€Ÿé‰´äº†è‡ªå·±çš„ç»éªŒå’Œ Colin Purrington å…³äºå®éªŒç¬”è®°çš„å»ºè®® (https://colinpurrington.com/tips/lab-notebooks)ï¼Œæ€»ç»“å‡ºä»¥ä¸‹å‡ ç‚¹æç¤ºï¼š\n\nç¡®ä¿æ¯ä¸ªç¬”è®°éƒ½æœ‰ä¸€ä¸ªæè¿°æ€§çš„æ ‡é¢˜ï¼Œä¸€ä¸ªå¼•äººå…¥èƒœçš„æ–‡ä»¶åï¼Œä»¥åŠä¸€ä¸ªç®€è¦æè¿°åˆ†æç›®æ ‡çš„ç¬¬ä¸€æ®µã€‚\n\nä½¿ç”¨ YAML æ ‡å¤´çš„æ—¥æœŸå­—æ®µæ¥è®°å½•ä½ å¼€å§‹å†™ç¬”è®°çš„æ—¥æœŸï¼š\ndate: 2016-08-23\nä½¿ç”¨ ISO8601 YYYY-MM-DD æ ¼å¼ï¼Œè¿™æ ·å°±ä¸ä¼šæœ‰æ­§ä¹‰ã€‚å³ä½¿ä½ é€šå¸¸ä¸è¿™æ ·å†™æ—¥æœŸï¼Œä¹Ÿè¦ä½¿ç”¨å®ƒï¼\n\nå¦‚æœä½ åœ¨ä¸€ä¸ªåˆ†ææƒ³æ³•ä¸ŠèŠ±è´¹äº†å¤§é‡æ—¶é—´ï¼Œç»“æœå´å‘ç°æ˜¯ä¸ªæ­»èƒ¡åŒï¼Œä¸è¦åˆ é™¤å®ƒï¼å†™ä¸€ä¸ªç®€çŸ­çš„è¯´æ˜ï¼Œè¯´æ˜å®ƒä¸ºä»€ä¹ˆå¤±è´¥ï¼Œå¹¶æŠŠå®ƒç•™åœ¨ç¬”è®°é‡Œã€‚è¿™ä¼šå¸®åŠ©ä½ åœ¨å°†æ¥å›åˆ°è¿™ä¸ªåˆ†ææ—¶é¿å…é‡è¹ˆè¦†è¾™ã€‚\nä¸€èˆ¬æ¥è¯´ï¼Œä½ æœ€å¥½åœ¨ R ä¹‹å¤–è¿›è¡Œæ•°æ®å½•å…¥ã€‚ä½†å¦‚æœä½ ç¡®å®éœ€è¦è®°å½•ä¸€å°æ®µæ•°æ®ï¼Œè¯·ä½¿ç”¨ tibble::tribble() æ¸…æ™°åœ°æŠŠå®ƒåˆ—å‡ºæ¥ã€‚\nå¦‚æœä½ åœ¨ä¸€ä¸ªæ•°æ®æ–‡ä»¶ä¸­å‘ç°é”™è¯¯ï¼Œæ°¸è¿œä¸è¦ç›´æ¥ä¿®æ”¹å®ƒï¼Œè€Œæ˜¯ç¼–å†™ä»£ç æ¥çº æ­£è¿™ä¸ªå€¼ã€‚å¹¶è§£é‡Šä½ ä¸ºä»€ä¹ˆè¦åšè¿™ä¸ªä¿®æ­£ã€‚\nåœ¨ä¸€å¤©ç»“æŸä¹‹å‰ï¼Œç¡®ä¿ä½ èƒ½æ¸²æŸ“è¿™ä¸ªç¬”è®°ã€‚å¦‚æœä½ åœ¨ä½¿ç”¨ç¼“å­˜ï¼Œç¡®ä¿æ¸…é™¤ç¼“å­˜ã€‚è¿™å°†è®©ä½ åœ¨ä»£ç è¿˜è®°å¿†çŠ¹æ–°çš„æ—¶å€™ä¿®å¤ä»»ä½•é—®é¢˜ã€‚\nå¦‚æœä½ å¸Œæœ›ä½ çš„ä»£ç é•¿æœŸå¯å¤ç°ï¼ˆå³ä½ å¯ä»¥åœ¨ä¸‹ä¸ªæœˆæˆ–æ˜å¹´å›æ¥è¿è¡Œå®ƒï¼‰ï¼Œä½ éœ€è¦è·Ÿè¸ªä½ çš„ä»£ç ä½¿ç”¨çš„åŒ…çš„ç‰ˆæœ¬ã€‚ä¸€ä¸ªä¸¥è°¨çš„æ–¹æ³•æ˜¯ä½¿ç”¨ renvï¼Œhttps://rstudio.github.io/renv/index.htmlï¼Œå®ƒå°†åŒ…å­˜å‚¨åœ¨ä½ çš„é¡¹ç›®ç›®å½•ä¸­ã€‚ä¸€ä¸ªå¿«é€Ÿè€Œç²—ç•¥çš„æŠ€å·§æ˜¯åŒ…å«ä¸€ä¸ªè¿è¡Œ sessionInfo() çš„ä»£ç å—â€”â€”è¿™ä¸èƒ½è®©ä½ è½»æ¾åœ°é‡ç°ä½ ä»Šå¤©çš„åŒ…ï¼Œä½†è‡³å°‘ä½ ä¼šçŸ¥é“å®ƒä»¬æ›¾ç»æ˜¯ä»€ä¹ˆæ ·çš„ã€‚\nåœ¨ä½ çš„èŒä¸šç”Ÿæ¶¯ä¸­ï¼Œä½ å°†ä¼šåˆ›å»ºéå¸¸éå¸¸å¤šçš„åˆ†æç¬”è®°ã€‚ä½ å°†å¦‚ä½•ç»„ç»‡å®ƒä»¬ï¼Œä»¥ä¾¿å°†æ¥èƒ½å†æ¬¡æ‰¾åˆ°å®ƒä»¬ï¼Ÿæˆ‘ä»¬å»ºè®®å°†å®ƒä»¬å­˜å‚¨åœ¨å„è‡ªçš„é¡¹ç›®ä¸­ï¼Œå¹¶æƒ³å‡ºä¸€ä¸ªå¥½çš„å‘½åæ–¹æ¡ˆã€‚",
    "crumbs": [
      "æ²Ÿé€š",
      "<span class='chapter-number'>28</span>Â  <span class='chapter-title'>Quarto</span>"
    ]
  },
  {
    "objectID": "quarto.html#æ€»ç»“",
    "href": "quarto.html#æ€»ç»“",
    "title": "28Â  Quarto",
    "section": "\n28.12 æ€»ç»“",
    "text": "28.12 æ€»ç»“\nåœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å‘ä½ ä»‹ç»äº† Quartoï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºåˆ›ä½œå’Œå‘å¸ƒå¯å¤ç°è®¡ç®—æ–‡æ¡£çš„å·¥å…·ï¼Œå®ƒå°†ä½ çš„ä»£ç å’Œæ–‡å­—è¯´æ˜æ•´åˆåœ¨ä¸€å¤„ã€‚ä½ å­¦ä¹ äº†å¦‚ä½•åœ¨ RStudio ä¸­ä½¿ç”¨å¯è§†åŒ–æˆ–æºä»£ç ç¼–è¾‘å™¨ç¼–å†™ Quarto æ–‡æ¡£ï¼Œä»£ç å—å¦‚ä½•å·¥ä½œä»¥åŠå¦‚ä½•ä¸ºå®ƒä»¬è‡ªå®šä¹‰é€‰é¡¹ï¼Œå¦‚ä½•åœ¨ä½ çš„ Quarto æ–‡æ¡£ä¸­åŒ…å«å›¾å½¢å’Œè¡¨æ ¼ï¼Œä»¥åŠä¸ºè®¡ç®—è¿›è¡Œç¼“å­˜çš„é€‰é¡¹ã€‚æ­¤å¤–ï¼Œä½ è¿˜å­¦ä¹ äº†å¦‚ä½•è°ƒæ•´ YAML æ ‡å¤´é€‰é¡¹æ¥åˆ›å»ºè‡ªåŒ…å«æˆ–å‚æ•°åŒ–çš„æ–‡æ¡£ï¼Œä»¥åŠå¦‚ä½•åŒ…å«å¼•æ–‡å’Œå‚è€ƒæ–‡çŒ®ã€‚æˆ‘ä»¬è¿˜ä¸ºä½ æä¾›äº†ä¸€äº›æ•…éšœæ’é™¤å’Œå·¥ä½œæµçš„æŠ€å·§ã€‚\nè™½ç„¶è¿™ä¸ªä»‹ç»åº”è¯¥è¶³ä»¥è®©ä½ å¼€å§‹ä½¿ç”¨ Quartoï¼Œä½†ä»æœ‰è®¸å¤šä¸œè¥¿éœ€è¦å­¦ä¹ ã€‚Quarto è¿˜ç›¸å¯¹å¹´è½»ï¼Œå¹¶ä¸”ä»åœ¨å¿«é€Ÿå‘å±•ã€‚äº†è§£å…¶åˆ›æ–°çš„æœ€ä½³å»å¤„æ˜¯ Quarto çš„å®˜æ–¹ç½‘ç«™ï¼šhttps://quarto.orgã€‚\næˆ‘ä»¬åœ¨è¿™é‡Œæ²¡æœ‰æ¶‰åŠä¸¤ä¸ªé‡è¦çš„ä¸»é¢˜ï¼šåä½œä»¥åŠå¦‚ä½•å‡†ç¡®åœ°å°†ä½ çš„æƒ³æ³•ä¼ è¾¾ç»™å…¶ä»–äººçš„ç»†èŠ‚ã€‚åä½œæ˜¯ç°ä»£æ•°æ®ç§‘å­¦çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œé€šè¿‡ä½¿ç”¨åƒ Git å’Œ GitHub è¿™æ ·çš„ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼Œä½ å¯ä»¥è®©ä½ çš„ç”Ÿæ´»è½»æ¾å¾—å¤šã€‚æˆ‘ä»¬æ¨èç”± Jenny Bryan ç¼–å†™çš„ â€œHappy Git with Râ€ï¼Œè¿™æ˜¯ä¸€æœ¬é¢å‘ R ç”¨æˆ·çš„ Git å’Œ GitHub ç”¨æˆ·å‹å¥½å…¥é—¨è¯»ç‰©ã€‚è¯¥ä¹¦å¯åœ¨çº¿å…è´¹è·å–ï¼šhttps://happygitwithr.comã€‚\næˆ‘ä»¬ä¹Ÿæ²¡æœ‰è°ˆåŠä¸ºäº†æ¸…æ™°åœ°ä¼ è¾¾ä½ çš„åˆ†æç»“æœï¼Œä½ åˆ°åº•åº”è¯¥å†™äº›ä»€ä¹ˆã€‚ä¸ºäº†æé«˜ä½ çš„å†™ä½œæ°´å¹³ï¼Œæˆ‘ä»¬å¼ºçƒˆæ¨èé˜…è¯» Joseph M. Williams & Joseph Bizup çš„ Style: Lessons in Clarity and Grace æˆ– George Gopen çš„ The Sense of Structure: Writing from the Readerâ€™s Perspectiveã€‚è¿™ä¸¤æœ¬ä¹¦éƒ½å°†å¸®åŠ©ä½ ç†è§£å¥å­å’Œæ®µè½çš„ç»“æ„ï¼Œå¹¶ä¸ºä½ æä¾›ä½¿ä½ çš„å†™ä½œæ›´æ¸…æ™°çš„å·¥å…·ã€‚ï¼ˆè¿™äº›ä¹¦å¦‚æœä¹°æ–°çš„ä¼šç›¸å½“æ˜‚è´µï¼Œä½†è®¸å¤šè‹±è¯­è¯¾ç¨‹éƒ½åœ¨ä½¿ç”¨å®ƒä»¬ï¼Œæ‰€ä»¥æœ‰å¾ˆå¤šä¾¿å®œçš„äºŒæ‰‹ä¹¦ï¼‰ã€‚George Gopen ä¹Ÿåœ¨ https://www.georgegopen.com/litigation-articles.html ä¸Šå‘è¡¨äº†ä¸€äº›å…³äºå†™ä½œçš„çŸ­æ–‡ã€‚å®ƒä»¬æ˜¯é’ˆå¯¹å¾‹å¸ˆçš„ï¼Œä½†å‡ ä¹æ‰€æœ‰å†…å®¹ä¹ŸåŒæ ·é€‚ç”¨äºæ•°æ®ç§‘å­¦å®¶ã€‚",
    "crumbs": [
      "æ²Ÿé€š",
      "<span class='chapter-number'>28</span>Â  <span class='chapter-title'>Quarto</span>"
    ]
  },
  {
    "objectID": "quarto-formats.html",
    "href": "quarto-formats.html",
    "title": "29Â  Quarto æ ¼å¼",
    "section": "",
    "text": "29.1 å¼•è¨€\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ å·²ç»äº†è§£äº†å¦‚ä½•ä½¿ç”¨ Quarto æ¥ç”Ÿæˆ HTML æ–‡æ¡£ã€‚ æœ¬ç« å°†ç®€è¦æ¦‚è¿°ä½ å¯ä»¥ä½¿ç”¨ Quarto ç”Ÿæˆçš„è®¸å¤šå…¶ä»–ç±»å‹çš„è¾“å‡ºã€‚\næœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥è®¾ç½®æ–‡æ¡£çš„è¾“å‡ºæ ¼å¼ï¼š\n#| eval: false quarto::quarto_render(â€œdiamond-sizes.qmdâ€, output_format = â€œdocxâ€) ```\n```å¦‚æœä½ æƒ³ä»¥ç¼–ç¨‹æ–¹å¼ç”Ÿæˆå¤šç§ç±»å‹çš„è¾“å‡ºï¼Œè¿™ç§æ–¹æ³•éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºoutput_format` å‚æ•°ä¹Ÿå¯ä»¥æ¥å—ä¸€ä¸ªå€¼åˆ—è¡¨ã€‚\nquarto::quarto_render(\"diamond-sizes.qmd\", output_format = c(\"docx\", \"pdf\"))",
    "crumbs": [
      "æ²Ÿé€š",
      "<span class='chapter-number'>29</span>Â  <span class='chapter-title'>Quarto æ ¼å¼</span>"
    ]
  },
  {
    "objectID": "quarto-formats.html#å¼•è¨€",
    "href": "quarto-formats.html#å¼•è¨€",
    "title": "29Â  Quarto æ ¼å¼",
    "section": "",
    "text": "é€šè¿‡ä¿®æ”¹ YAML æ ‡å¤´æ¥æ°¸ä¹…è®¾ç½®ï¼š\ntitle: \"Diamond sizes\"\nformat: html\n\né€šè¿‡æ‰‹åŠ¨è°ƒç”¨ quarto::quarto_render() æ¥ä¸´æ—¶è®¾ç½®ï¼š",
    "crumbs": [
      "æ²Ÿé€š",
      "<span class='chapter-number'>29</span>Â  <span class='chapter-title'>Quarto æ ¼å¼</span>"
    ]
  },
  {
    "objectID": "quarto-formats.html#è¾“å‡ºé€‰é¡¹",
    "href": "quarto-formats.html#è¾“å‡ºé€‰é¡¹",
    "title": "29Â  Quarto æ ¼å¼",
    "section": "\n29.2 è¾“å‡ºé€‰é¡¹",
    "text": "29.2 è¾“å‡ºé€‰é¡¹\nQuarto æä¾›äº†å¤šç§è¾“å‡ºæ ¼å¼ã€‚ ä½ å¯ä»¥åœ¨ https://quarto.org/docs/output-formats/all-formats.html æ‰¾åˆ°å®Œæ•´çš„åˆ—è¡¨ã€‚ è®¸å¤šæ ¼å¼å…±äº«ä¸€äº›è¾“å‡ºé€‰é¡¹ï¼ˆä¾‹å¦‚ï¼Œç”¨äºåŒ…å«ç›®å½•çš„ toc: trueï¼‰ï¼Œä½†å…¶ä»–æ ¼å¼åˆ™å…·æœ‰ç‰¹å®šäºæ ¼å¼çš„é€‰é¡¹ï¼ˆä¾‹å¦‚ï¼Œcode-fold: true ä¼šå°†ä»£ç å—æŠ˜å æˆ HTML è¾“å‡ºçš„ &lt;details&gt; æ ‡ç­¾ï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥æŒ‰éœ€æ˜¾ç¤ºå®ƒï¼Œä½†è¿™ä¸é€‚ç”¨äº PDF æˆ– Word æ–‡æ¡£ï¼‰ã€‚\nè¦è¦†ç›–é»˜è®¤é€‰é¡¹ï¼Œä½ éœ€è¦ä½¿ç”¨ä¸€ä¸ªå±•å¼€çš„ format å­—æ®µã€‚ ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³æ¸²æŸ“ä¸€ä¸ªå¸¦æœ‰æµ®åŠ¨ç›®å½•çš„ htmlï¼Œä½ å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š\nformat:\n  html:\n    toc: true\n    toc_float: true\nä½ ç”šè‡³å¯ä»¥é€šè¿‡æä¾›ä¸€ä¸ªæ ¼å¼åˆ—è¡¨æ¥æ¸²æŸ“åˆ°å¤šç§è¾“å‡ºï¼š\nformat:\n  html:\n    toc: true\n    toc_float: true\n  pdf: default\n  docx: default\nè¯·æ³¨æ„ï¼Œå¦‚æœä½ ä¸æƒ³è¦†ç›–ä»»ä½•é»˜è®¤é€‰é¡¹ï¼Œå¯ä»¥ä½¿ç”¨ç‰¹æ®Šè¯­æ³• (pdf: default)ã€‚\nè¦æ¸²æŸ“åˆ°æ–‡æ¡£ YAML ä¸­æŒ‡å®šçš„æ‰€æœ‰æ ¼å¼ï¼Œä½ å¯ä»¥ä½¿ç”¨ output_format = \"all\"ã€‚\n\nquarto::quarto_render(\"diamond-sizes.qmd\", output_format = \"all\")",
    "crumbs": [
      "æ²Ÿé€š",
      "<span class='chapter-number'>29</span>Â  <span class='chapter-title'>Quarto æ ¼å¼</span>"
    ]
  },
  {
    "objectID": "quarto-formats.html#æ–‡æ¡£",
    "href": "quarto-formats.html#æ–‡æ¡£",
    "title": "29Â  Quarto æ ¼å¼",
    "section": "\n29.3 æ–‡æ¡£",
    "text": "29.3 æ–‡æ¡£\nä¸Šä¸€ç« é‡ç‚¹ä»‹ç»äº†é»˜è®¤çš„ html è¾“å‡ºã€‚ è¿™ä¸ªä¸»é¢˜æœ‰å‡ ç§åŸºæœ¬çš„å˜ä½“ï¼Œå¯ä»¥ç”Ÿæˆä¸åŒç±»å‹çš„æ–‡æ¡£ã€‚ ä¾‹å¦‚ï¼š\n\npdfï¼šä½¿ç”¨ LaTeXï¼ˆä¸€ä¸ªå¼€æºçš„æ–‡æ¡£æ’ç‰ˆç³»ç»Ÿï¼‰åˆ¶ä½œ PDFï¼Œä½ éœ€è¦å®‰è£…å®ƒã€‚ å¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£…ï¼ŒRStudio ä¼šæç¤ºä½ ã€‚\ndocxï¼šç”¨äº Microsoft Word (.docx) æ–‡æ¡£ã€‚\nodtï¼šç”¨äº OpenDocument æ–‡æœ¬ (.odt) æ–‡æ¡£ã€‚\nrtfï¼šç”¨äºå¯Œæ–‡æœ¬æ ¼å¼ (.rtf) æ–‡æ¡£ã€‚\ngfmï¼šç”¨äº GitHub é£æ ¼çš„ Markdown (.md) æ–‡æ¡£ã€‚\nipynbï¼šç”¨äº Jupyter Notebooks (.ipynb)ã€‚\n\nè¯·è®°ä½ï¼Œåœ¨ç”Ÿæˆä¸å†³ç­–è€…å…±äº«çš„æ–‡æ¡£æ—¶ï¼Œä½ å¯ä»¥é€šè¿‡åœ¨æ–‡æ¡£ YAML ä¸­è®¾ç½®å…¨å±€é€‰é¡¹æ¥å…³é—­ä»£ç çš„é»˜è®¤æ˜¾ç¤ºï¼š\nexecute:\n  echo: false\nå¯¹äº html æ–‡æ¡£ï¼Œå¦ä¸€ä¸ªé€‰æ‹©æ˜¯è®©ä»£ç å—é»˜è®¤éšè—ï¼Œä½†å¯ä»¥é€šè¿‡ç‚¹å‡»æ¥æ˜¾ç¤ºï¼š\nformat:\n  html:\n    code: true",
    "crumbs": [
      "æ²Ÿé€š",
      "<span class='chapter-number'>29</span>Â  <span class='chapter-title'>Quarto æ ¼å¼</span>"
    ]
  },
  {
    "objectID": "quarto-formats.html#æ¼”ç¤ºæ–‡ç¨¿",
    "href": "quarto-formats.html#æ¼”ç¤ºæ–‡ç¨¿",
    "title": "29Â  Quarto æ ¼å¼",
    "section": "\n29.4 æ¼”ç¤ºæ–‡ç¨¿",
    "text": "29.4 æ¼”ç¤ºæ–‡ç¨¿\nä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ Quarto æ¥åˆ¶ä½œæ¼”ç¤ºæ–‡ç¨¿ã€‚ ä¸ Keynote æˆ– PowerPoint ç­‰å·¥å…·ç›¸æ¯”ï¼Œä½ çš„è§†è§‰æ§åˆ¶åŠ›è¾ƒå°ï¼Œä½†å°† R ä»£ç çš„ç»“æœè‡ªåŠ¨æ’å…¥æ¼”ç¤ºæ–‡ç¨¿å¯ä»¥èŠ‚çœå¤§é‡æ—¶é—´ã€‚ æ¼”ç¤ºæ–‡ç¨¿çš„å·¥ä½œåŸç†æ˜¯å°†å†…å®¹åˆ†æˆå¹»ç¯ç‰‡ï¼Œæ¯ä¸ªäºŒçº§ (##) æ ‡é¢˜éƒ½ä¼šå¼€å§‹ä¸€å¼ æ–°çš„å¹»ç¯ç‰‡ã€‚ æ­¤å¤–ï¼Œä¸€çº§ (#) æ ‡é¢˜è¡¨ç¤ºä¸€ä¸ªæ–°èŠ‚çš„å¼€å§‹ï¼Œå¸¦æœ‰ä¸€ä¸ªèŠ‚æ ‡é¢˜å¹»ç¯ç‰‡ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥å¹»ç¯ç‰‡å±…ä¸­æ˜¾ç¤ºã€‚\nQuarto æ”¯æŒå¤šç§æ¼”ç¤ºæ–‡ç¨¿æ ¼å¼ï¼ŒåŒ…æ‹¬ï¼š\n\nrevealjs - ä½¿ç”¨ reveal.js åˆ¶ä½œçš„ HTML æ¼”ç¤ºæ–‡ç¨¿\npptx - PowerPoint æ¼”ç¤ºæ–‡ç¨¿\nbeamer - ä½¿ç”¨ LaTeX Beamer åˆ¶ä½œçš„ PDF æ¼”ç¤ºæ–‡ç¨¿ã€‚\n\nä½ å¯ä»¥åœ¨ https://quarto.org/docs/presentations é˜…è¯»æ›´å¤šå…³äºä½¿ç”¨ Quarto åˆ›å»ºæ¼”ç¤ºæ–‡ç¨¿çš„ä¿¡æ¯ã€‚",
    "crumbs": [
      "æ²Ÿé€š",
      "<span class='chapter-number'>29</span>Â  <span class='chapter-title'>Quarto æ ¼å¼</span>"
    ]
  },
  {
    "objectID": "quarto-formats.html#äº¤äº’æ€§",
    "href": "quarto-formats.html#äº¤äº’æ€§",
    "title": "29Â  Quarto æ ¼å¼",
    "section": "\n29.5 äº¤äº’æ€§",
    "text": "29.5 äº¤äº’æ€§\nå°±åƒä»»ä½• HTML æ–‡æ¡£ä¸€æ ·ï¼Œä½¿ç”¨ Quarto åˆ›å»ºçš„ HTML æ–‡æ¡£ä¹Ÿå¯ä»¥åŒ…å«äº¤äº’å¼ç»„ä»¶ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä»‹ç»ä¸¤ç§åœ¨ Quarto æ–‡æ¡£ä¸­åŒ…å«äº¤äº’æ€§çš„é€‰é¡¹ï¼šhtmlwidgets å’Œ Shinyã€‚\n\n29.5.1 htmlwidgets\nHTML æ˜¯ä¸€ç§äº¤äº’å¼æ ¼å¼ï¼Œä½ å¯ä»¥åˆ©ç”¨ htmlwidgets æ¥å‘æŒ¥è¿™ç§äº¤äº’æ€§ï¼Œhtmlwidgets æ˜¯èƒ½å¤Ÿç”Ÿæˆäº¤äº’å¼ HTML å¯è§†åŒ–çš„ R å‡½æ•°ã€‚ ä¾‹å¦‚ï¼Œçœ‹çœ‹ä¸‹é¢çš„ leaflet åœ°å›¾ã€‚ å¦‚æœä½ æ­£åœ¨ç½‘é¡µä¸ŠæŸ¥çœ‹æ­¤é¡µé¢ï¼Œä½ å¯ä»¥æ‹–åŠ¨åœ°å›¾ã€æ”¾å¤§å’Œç¼©å°ç­‰ã€‚ ä½ æ˜¾ç„¶ä¸èƒ½åœ¨ä¹¦ä¸­è¿™æ ·åšï¼Œæ‰€ä»¥ Quarto ä¼šè‡ªåŠ¨ä¸ºä½ æ’å…¥ä¸€ä¸ªé™æ€æˆªå›¾ã€‚\n\nlibrary(leaflet)\nleaflet() |&gt;\n    setView(174.764, -36.877, zoom = 16) |&gt;\n    addTiles() |&gt;\n    addMarkers(174.764, -36.877, popup = \"Maungawhau\")\n\n\n\n\n\nhtmlwidgets çš„ä¸€å¤§ä¼˜ç‚¹æ˜¯ä½ ä¸éœ€è¦äº†è§£ä»»ä½•å…³äº HTML æˆ– JavaScript çš„çŸ¥è¯†å°±å¯ä»¥ä½¿ç”¨å®ƒä»¬ã€‚ æ‰€æœ‰çš„ç»†èŠ‚éƒ½è¢«å°è£…åœ¨åŒ…é‡Œï¼Œæ‰€ä»¥ä½ ä¸ç”¨æ‹…å¿ƒã€‚\næœ‰è®¸å¤šæä¾› htmlwidgets çš„åŒ…ï¼ŒåŒ…æ‹¬ï¼š\n\ndygraphsï¼šç”¨äºäº¤äº’å¼æ—¶é—´åºåˆ—å¯è§†åŒ–ã€‚\nDTï¼šç”¨äºäº¤äº’å¼è¡¨æ ¼ã€‚\nthreejsï¼šç”¨äºäº¤äº’å¼ 3D å›¾ã€‚\nDiagrammeRï¼šç”¨äºå›¾è¡¨ï¼ˆå¦‚æµç¨‹å›¾å’Œç®€å•çš„èŠ‚ç‚¹é“¾æ¥å›¾ï¼‰ã€‚\n\nè¦äº†è§£æ›´å¤šå…³äº htmlwidgets çš„ä¿¡æ¯å¹¶æŸ¥çœ‹æä¾›å®ƒä»¬çš„è½¯ä»¶åŒ…çš„å®Œæ•´åˆ—è¡¨ï¼Œè¯·è®¿é—® https://www.htmlwidgets.orgã€‚\n\n29.5.2 Shiny\nhtmlwidgets æä¾›å®¢æˆ·ç«¯ (client-side) äº¤äº’æ€§â€”â€”æ‰€æœ‰çš„äº¤äº’æ€§éƒ½å‘ç”Ÿåœ¨æµè§ˆå™¨ä¸­ï¼Œç‹¬ç«‹äº Rã€‚ ä¸€æ–¹é¢ï¼Œè¿™å¾ˆå¥½ï¼Œå› ä¸ºä½ å¯ä»¥åœ¨æ²¡æœ‰ä»»ä½•ä¸ R çš„è¿æ¥çš„æƒ…å†µä¸‹åˆ†å‘ HTML æ–‡ä»¶ã€‚ ç„¶è€Œï¼Œè¿™ä»æ ¹æœ¬ä¸Šé™åˆ¶äº†ä½ åªèƒ½åšé‚£äº›å·²ç»åœ¨ HTML å’Œ JavaScript ä¸­å®ç°çš„äº‹æƒ…ã€‚ å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ shinyï¼Œè¿™æ˜¯ä¸€ä¸ªå…è®¸ä½ ä½¿ç”¨ R ä»£ç è€Œä¸æ˜¯ JavaScript æ¥åˆ›å»ºäº¤äº’æ€§çš„åŒ…ã€‚\nè¦ä» Quarto æ–‡æ¡£ä¸­è°ƒç”¨ Shiny ä»£ç ï¼Œè¯·å°† server: shiny æ·»åŠ åˆ° YAML æ ‡å¤´ï¼š\ntitle: \"Shiny Web App\"\nformat: html\nserver: shiny\nç„¶åï¼Œä½ å¯ä»¥ä½¿ç”¨â€œè¾“å…¥â€å‡½æ•°å‘æ–‡æ¡£æ·»åŠ äº¤äº’å¼ç»„ä»¶ï¼š\n\nlibrary(shiny)\n\ntextInput(\"name\", \"What is your name?\")\nnumericInput(\"age\", \"How old are you?\", NA, min = 0, max = 150)\n\n\n\n\n\n\n\n\n\nä½ è¿˜éœ€è¦ä¸€ä¸ªå¸¦æœ‰å—é€‰é¡¹ context: server çš„ä»£ç å—ï¼Œå…¶ä¸­åŒ…å«éœ€è¦åœ¨ Shiny æœåŠ¡å™¨ä¸­è¿è¡Œçš„ä»£ç ã€‚\nç„¶åï¼Œä½ å¯ä»¥ç”¨ input$name å’Œ input$age æ¥å¼•ç”¨è¿™äº›å€¼ï¼Œä½¿ç”¨å®ƒä»¬çš„ä»£ç ä¼šåœ¨å®ƒä»¬å‘ç”Ÿå˜åŒ–æ—¶è‡ªåŠ¨é‡æ–°è¿è¡Œã€‚\næˆ‘ä»¬æ— æ³•åœ¨è¿™é‡Œå‘ä½ å±•ç¤ºä¸€ä¸ªå®æ—¶çš„ Shiny åº”ç”¨ç¨‹åºï¼Œå› ä¸º Shiny çš„äº¤äº’å‘ç”Ÿåœ¨æœåŠ¡ç«¯ (server-side)ã€‚ è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨ä¸äº†è§£ JavaScript çš„æƒ…å†µä¸‹ç¼–å†™äº¤äº’å¼åº”ç”¨ç¨‹åºï¼Œä½†ä½ éœ€è¦ä¸€ä¸ªæœåŠ¡å™¨æ¥è¿è¡Œå®ƒä»¬ã€‚ è¿™å°±å¸¦æ¥äº†ä¸€ä¸ªåå‹¤é—®é¢˜ï¼šShiny åº”ç”¨ç¨‹åºéœ€è¦ä¸€ä¸ª Shiny æœåŠ¡å™¨æ‰èƒ½åœ¨çº¿è¿è¡Œã€‚ å½“ä½ åœ¨è‡ªå·±çš„è®¡ç®—æœºä¸Šè¿è¡Œ Shiny åº”ç”¨ç¨‹åºæ—¶ï¼ŒShiny ä¼šè‡ªåŠ¨ä¸ºä½ è®¾ç½®ä¸€ä¸ª Shiny æœåŠ¡å™¨ï¼Œä½†å¦‚æœä½ æƒ³åœ¨çº¿å‘å¸ƒè¿™ç§äº¤äº’æ€§ï¼Œä½ éœ€è¦ä¸€ä¸ªé¢å‘å…¬ä¼—çš„ Shiny æœåŠ¡å™¨ã€‚ è¿™å°±æ˜¯ Shiny çš„æ ¹æœ¬æƒè¡¡ï¼šä½ å¯ä»¥åœ¨ Shiny æ–‡æ¡£ä¸­åšä»»ä½•ä½ èƒ½åœ¨ R ä¸­åšçš„äº‹æƒ…ï¼Œä½†è¿™éœ€è¦æœ‰äººåœ¨è¿è¡Œ Rã€‚\nè¦äº†è§£æ›´å¤šå…³äº Shiny çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬æ¨èé˜…è¯» Hadley Wickham çš„ã€ŠMastering Shinyã€‹ï¼Œç½‘å€ï¼šhttps://mastering-shiny.orgã€‚",
    "crumbs": [
      "æ²Ÿé€š",
      "<span class='chapter-number'>29</span>Â  <span class='chapter-title'>Quarto æ ¼å¼</span>"
    ]
  },
  {
    "objectID": "quarto-formats.html#ç½‘ç«™å’Œä¹¦ç±",
    "href": "quarto-formats.html#ç½‘ç«™å’Œä¹¦ç±",
    "title": "29Â  Quarto æ ¼å¼",
    "section": "\n29.6 ç½‘ç«™å’Œä¹¦ç±",
    "text": "29.6 ç½‘ç«™å’Œä¹¦ç±\né€šè¿‡ä¸€äº›é¢å¤–çš„åŸºç¡€è®¾ç½®ï¼Œä½ å¯ä»¥ä½¿ç”¨ Quarto æ¥ç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„ç½‘ç«™æˆ–ä¹¦ç±ï¼š\n\nå°†ä½ çš„ .qmd æ–‡ä»¶æ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„ç›®å½•ä¸­ã€‚index.qmd å°†æˆä¸ºä¸»é¡µã€‚\n\næ·»åŠ ä¸€ä¸ªåä¸º _quarto.yml çš„ YAML æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¸ºç½‘ç«™æä¾›å¯¼èˆªã€‚åœ¨æ­¤æ–‡ä»¶ä¸­ï¼Œå°† project ç±»å‹è®¾ç½®ä¸º book æˆ– websiteï¼Œä¾‹å¦‚ï¼š\nproject:\n  type: book\n\n\nä¾‹å¦‚ï¼Œä¸‹é¢çš„ _quarto.yml æ–‡ä»¶ä»ä¸‰ä¸ªæºæ–‡ä»¶åˆ›å»ºä¸€ä¸ªç½‘ç«™ï¼šindex.qmdï¼ˆä¸»é¡µï¼‰ã€viridis-colors.qmd å’Œ terrain-colors.qmdã€‚\n\nproject:\n  type: website\n\nwebsite:\n  title: \"A website on color scales\"\n  navbar:\n    left:\n      - href: index.qmd\n        text: Home\n      - href: viridis-colors.qmd\n        text: Viridis colors\n      - href: terrain-colors.qmd\n        text: Terrain colors\n\nä½ éœ€è¦çš„ä¹¦ç±çš„ _quarto.yml æ–‡ä»¶ç»“æ„éå¸¸ç›¸ä¼¼ã€‚ ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†å¦‚ä½•åˆ›å»ºä¸€æœ¬åŒ…å«å››ç« çš„ä¹¦ï¼Œå¹¶å°†å…¶æ¸²æŸ“ä¸ºä¸‰ç§ä¸åŒçš„è¾“å‡ºæ ¼å¼ï¼ˆhtmlã€pdf å’Œ epubï¼‰ã€‚åŒæ ·ï¼Œæºæ–‡ä»¶æ˜¯ .qmd æ–‡ä»¶ã€‚\n\nproject:\n  type: book\n\nbook:\n  title: \"A book on color scales\"\n  author: \"Jane Coloriste\"\n  chapters:\n    - index.qmd\n    - intro.qmd\n    - viridis-colors.qmd\n    - terrain-colors.qmd\n\nformat:\n  html:\n    theme: cosmo\n  pdf: default\n  epub: default\n\næˆ‘ä»¬å»ºè®®ä½ ä¸ºä½ çš„ç½‘ç«™å’Œä¹¦ç±ä½¿ç”¨ RStudio é¡¹ç›®ã€‚ æ ¹æ® _quarto.yml æ–‡ä»¶ï¼ŒRStudio ä¼šè¯†åˆ«ä½ æ­£åœ¨å¤„ç†çš„é¡¹ç›®ç±»å‹ï¼Œå¹¶åœ¨ IDE ä¸­æ·»åŠ ä¸€ä¸ªâ€œBuildâ€é€‰é¡¹å¡ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥æ¸²æŸ“å’Œé¢„è§ˆä½ çš„ç½‘ç«™å’Œä¹¦ç±ã€‚ ç½‘ç«™å’Œä¹¦ç±ä¹Ÿéƒ½å¯ä»¥ä½¿ç”¨ quarto::quarto_render() è¿›è¡Œæ¸²æŸ“ã€‚\nåœ¨ https://quarto.org/docs/websites é˜…è¯»æ›´å¤šå…³äº Quarto ç½‘ç«™çš„ä¿¡æ¯ï¼Œåœ¨ https://quarto.org/docs/books é˜…è¯»æ›´å¤šå…³äºä¹¦ç±çš„ä¿¡æ¯ã€‚",
    "crumbs": [
      "æ²Ÿé€š",
      "<span class='chapter-number'>29</span>Â  <span class='chapter-title'>Quarto æ ¼å¼</span>"
    ]
  },
  {
    "objectID": "quarto-formats.html#å…¶ä»–æ ¼å¼",
    "href": "quarto-formats.html#å…¶ä»–æ ¼å¼",
    "title": "29Â  Quarto æ ¼å¼",
    "section": "\n29.7 å…¶ä»–æ ¼å¼",
    "text": "29.7 å…¶ä»–æ ¼å¼\nQuarto è¿˜æä¾›äº†æ›´å¤šçš„è¾“å‡ºæ ¼å¼ï¼š\n\nä½ å¯ä»¥ä½¿ç”¨ Quarto æœŸåˆŠæ¨¡æ¿æ’°å†™æœŸåˆŠæ–‡ç« ï¼šhttps://quarto.org/docs/journals/templates.htmlã€‚\nä½ å¯ä»¥ä½¿ç”¨ format: ipynb å°† Quarto æ–‡æ¡£è¾“å‡ºä¸º Jupyter Notebooksï¼šhttps://quarto.org/docs/reference/formats/ipynb.htmlã€‚\n\næœ‰å…³æ›´å¤šæ ¼å¼çš„åˆ—è¡¨ï¼Œè¯·å‚é˜… https://quarto.org/docs/output-formats/all-formats.htmlã€‚",
    "crumbs": [
      "æ²Ÿé€š",
      "<span class='chapter-number'>29</span>Â  <span class='chapter-title'>Quarto æ ¼å¼</span>"
    ]
  },
  {
    "objectID": "quarto-formats.html#å°ç»“",
    "href": "quarto-formats.html#å°ç»“",
    "title": "29Â  Quarto æ ¼å¼",
    "section": "\n29.8 å°ç»“",
    "text": "29.8 å°ç»“\nåœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å‘ä½ å±•ç¤ºäº†ä½¿ç”¨ Quarto äº¤æµç»“æœçš„å¤šç§é€‰æ‹©ï¼Œä»é™æ€å’Œäº¤äº’å¼æ–‡æ¡£åˆ°æ¼”ç¤ºæ–‡ç¨¿ï¼Œå†åˆ°ç½‘ç«™å’Œä¹¦ç±ã€‚\nè¦äº†è§£æ›´å¤šå…³äºåœ¨è¿™äº›ä¸åŒæ ¼å¼ä¸­è¿›è¡Œæœ‰æ•ˆæ²Ÿé€šçš„ä¿¡æ¯ï¼Œæˆ‘ä»¬æ¨èä»¥ä¸‹èµ„æºï¼š\n\nè¦æé«˜ä½ çš„æ¼”ç¤ºæŠ€å·§ï¼Œå¯ä»¥è¯•è¯• Neal Fordã€Matthew McCollough å’Œ Nathaniel Schutta çš„ Presentation Patternsã€‚å®ƒæä¾›äº†ä¸€å¥—è¡Œä¹‹æœ‰æ•ˆçš„æ¨¡å¼ï¼ˆåŒ…æ‹¬ä½çº§å’Œé«˜çº§ï¼‰ï¼Œä½ å¯ä»¥åº”ç”¨å®ƒä»¬æ¥æ”¹è¿›ä½ çš„æ¼”ç¤ºæ–‡ç¨¿ã€‚\nå¦‚æœä½ åšå­¦æœ¯æ¼”è®²ï¼Œä½ å¯èƒ½ä¼šå–œæ¬¢ Leek group guide to giving talksã€‚\næˆ‘ä»¬è‡ªå·±æ²¡æœ‰ä¸Šè¿‡ï¼Œä½†æˆ‘ä»¬å¬è¿‡å¾ˆå¤šäººå¯¹ Matt McGarrity çš„å…¬å¼€æ¼”è®²åœ¨çº¿è¯¾ç¨‹ https://www.coursera.org/learn/public-speaking è¯„ä»·å¾ˆé«˜ã€‚\nå¦‚æœä½ æ­£åœ¨åˆ›å»ºè®¸å¤šä»ªè¡¨æ¿ (dashboards)ï¼Œè¯·åŠ¡å¿…é˜…è¯» Stephen Few çš„ Information Dashboard Design: The Effective Visual Communication of Dataã€‚å®ƒå°†å¸®åŠ©ä½ åˆ›å»ºçœŸæ­£æœ‰ç”¨è€Œä¸ä»…ä»…æ˜¯å¥½çœ‹çš„ä»ªè¡¨æ¿ã€‚\næœ‰æ•ˆåœ°ä¼ è¾¾ä½ çš„æƒ³æ³•é€šå¸¸éœ€è¦ä¸€äº›å¹³é¢è®¾è®¡çŸ¥è¯†ã€‚Robin Williams çš„ The Non-Designerâ€™s Design Book æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ã€‚",
    "crumbs": [
      "æ²Ÿé€š",
      "<span class='chapter-number'>29</span>Â  <span class='chapter-title'>Quarto æ ¼å¼</span>"
    ]
  }
]